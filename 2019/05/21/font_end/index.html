<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>前端笔记 | Mr.Yellow.Wills</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="前端,js,html">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.3.9">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"codefine","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Mr.Yellow</h5>
          <a href="mailto:601661706@qq.com" title="601661706@qq.com" class="mail">
            
              <span>6</span>
            
              <span>0</span>
            
              <span>1</span>
            
              <span>6</span>
            
              <span>6</span>
            
              <span>1</span>
            
              <span>7</span>
            
              <span>0</span>
            
              <span>6</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/YeWills/YeWills.github.io/tree/blog_code" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>前端笔记</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">前端笔记</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-05-21T00:00:00.000Z" itemprop="datePublished" class="page-time">
  2019-05-21
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-font_end"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">前端笔记</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-05-21 00:00:00" datetime="2019-05-21T00:00:00.000Z"  itemprop="datePublished">2019-05-21</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/前端/">前端</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="前端知识"><a href="#前端知识" class="headerlink" title="前端知识"></a>前端知识</h2><h3 id="浏览器直接使用import-JavaScript-modules"><a href="#浏览器直接使用import-JavaScript-modules" class="headerlink" title="浏览器直接使用import (JavaScript modules)"></a>浏览器直接使用import (JavaScript modules)</h3><p>参考《d3图形、demo讲解、使用经验  –   走势图  – import module 的经典使用》</p>
<h3 id="浏览器缓存"><a href="#浏览器缓存" class="headerlink" title="浏览器缓存"></a>浏览器缓存</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>浏览器缓存分为强、协商缓存；<br>上面是根据页面如何利用缓存的态度来分的。<br>强缓存是指，只要浏览器有这个缓存，页面就直接拿来用，也不去问这个缓存是否最新或改变；<br>协商缓存是指，页面在用浏览器缓存时，会根据这个缓存的状态，决定是否使用这个缓存。<br><figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/cache.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/cache.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h4 id="强缓存"><a href="#强缓存" class="headerlink" title="强缓存"></a>强缓存</h4><p>解释如上</p>
<h4 id="协商缓存"><a href="#协商缓存" class="headerlink" title="协商缓存"></a>协商缓存</h4><p>解释如上</p>
<h4 id="二者区别"><a href="#二者区别" class="headerlink" title="二者区别"></a>二者区别</h4><ul>
<li>强缓存返回状态码是200，但不往服务器发请求；</li>
<li>协商缓存返回状态码是304，会给服务器发请求；</li>
<li>二者的区别也在这个图片上，协商缓存会有 last-modified，if-modified-since 等，强缓存则没有，可依此来判断是否强或协商。<figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/cache.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/cache.jpg" alt title class></a>
                <p></p>
            </figure>
</li>
</ul>
<h3 id="安全类"><a href="#安全类" class="headerlink" title="安全类"></a>安全类</h3><h4 id="CSRF-跨站请求伪造"><a href="#CSRF-跨站请求伪造" class="headerlink" title="CSRF 跨站请求伪造"></a>CSRF 跨站请求伪造</h4><ul>
<li><p>原理<br>CSRF中文称之为 跨站请求伪造。<br>如下，用户登陆网站A后，获得cookie，<br>之后，用户再登陆网站B，B站引诱用户访问A网站，<br>由于这个访问接口与之前的cookie同域名，因此再次访问A网站时浏览器自动带上cookie，<br>从而访问成功，导致非法转账或者用户数据盗取等等。</p>
<figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/csrf.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/csrf.jpg" alt title class></a>
                <p></p>
            </figure>
</li>
<li><p>防御</p>
<ul>
<li>Token 验证：浏览器不会自动给接口带上token，因此后台如果做token验证，是可以避免csrf的。</li>
<li>Referer 验证：服务端会比对接口请求的referer(接口的页面来源)，如果不是我这个站点的referer，若不是就阻止。</li>
</ul>
</li>
<li><p>更多<br><a href="https://www.bilibili.com/video/BV1Dt411V7ao?p=1" target="_blank" rel="noopener">查看</a></p>
</li>
</ul>
<h4 id="XSS-跨站脚本攻击"><a href="#XSS-跨站脚本攻击" class="headerlink" title="XSS 跨站脚本攻击"></a>XSS 跨站脚本攻击</h4><ul>
<li>原理<br>想网站注入一些js脚本，输入的这些脚本在浏览器端运行，实现攻击，可获取cookie或者串改页面信息以及转账等等。<br>其特点主要是 利用浏览器端运行 注入的js脚本，因此其防御也与此有关。</li>
<li>防御<ul>
<li>对用户输入内容进行转义，对脚本语言进行识别过滤。</li>
<li>对cookie等敏感信息进行设置，比如设置cookie 通过js不可读。</li>
</ul>
</li>
<li>demo<br><a href="https://github.com/YeWills/learns/tree/master/node/xss" target="_blank" rel="noopener">小demo</a></li>
</ul>
<h2 id="表单提交"><a href="#表单提交" class="headerlink" title="表单提交"></a>表单提交</h2><h3 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h3><p><a href="https://blog.csdn.net/java_xxxx/article/details/81205315" target="_blank" rel="noopener">详细参考博客</a></p>
<h3 id="enctype"><a href="#enctype" class="headerlink" title="enctype"></a>enctype</h3><p>form默认自带以下三种enctype，其他enctype需要自己封装：<br>EncType表明提交数据的格式 用 Enctype 属性指定将数据回发到服务器时浏览器使用的编码类型。<br>下边是说明：<br>application/x-www-form-urlencoded(form 默认)： 窗体数据被编码为名称/值对。这是标准的编码格式。<br>multipart/form-data： 窗体数据被编码为一条消息，页上的每个控件对应消息中的一个部分。<br>text/plain： 窗体数据以纯文本形式进行编码，其中不含任何控件或格式字符。</p>
<h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a>application/x-www-form-urlencoded</h3><ul>
<li>get请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!-- form 默认是get请求 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">enctype</span>=<span class="string">"application/x-www-form-urlencoded"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form1.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form1.jpg" alt title class></a>
                <p></p>
            </figure>
<p>点击浏览器未解码传参前：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form2.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form2.jpg" alt title class></a>
                <p></p>
            </figure><br>点击浏览器解码后的传参view source：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form3.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form3.jpg" alt title class></a>
                <p></p>
            </figure></p>
<ul>
<li>post请求<br>改为post请求：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">enctype</span>=<span class="string">"application/x-www-form-urlencoded"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>点击浏览器未解码传参前：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-1-post.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-1-post.jpg" alt title class></a>
                <p></p>
            </figure><br>点击浏览器解码后的传参view source：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-1-post1.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-1-post1.jpg" alt title class></a>
                <p></p>
            </figure></p>
<p>上面发现一个现象，当变成post请求时，变成了Form Data；<br>原来当get请求时，是Query string parameters</p>
<h3 id="text-plain"><a href="#text-plain" class="headerlink" title="text/plain"></a>text/plain</h3><ul>
<li>get请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击浏览器未解码传参前：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-text1.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-text1.jpg" alt title class></a>
                <p></p>
            </figure><br>点击浏览器解码后的传参view source：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-text2.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-text2.jpg" alt title class></a>
                <p></p>
            </figure></p>
<ul>
<li>post请求<br>改为post请求：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>浏览器貌似不作任何解析：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-text3.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-text3.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h3 id="multipart-form-data-原生"><a href="#multipart-form-data-原生" class="headerlink" title="multipart/form-data (原生)"></a>multipart/form-data (原生)</h3><p>用form自带原生请求讲解：</p>
<ul>
<li>get请求</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"GET"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击浏览器未解码传参前：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-mul1.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-mul1.jpg" alt title class></a>
                <p></p>
            </figure><br>点击浏览器解码后的传参view source：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-mul2.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-mul2.jpg" alt title class></a>
                <p></p>
            </figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boundary=----WebKitFormBoundaryeRRkatgcCfoB2RDW</span><br></pre></td></tr></table></figure>
<p>如上,boundary是分界线，只要是multipart/form-data请求，浏览器默认会生成这个分割线参数。<br>为什么包含二进制流(文件)的入参时，只能用multipart/form-data 不能用以前的application/x-www-form-urlencoded ，因为二进制流 无法字符串化，只能分割发送给服务器；<br>而这个分割是通过 <code>boundary=----WebKitFormBoundaryeRRkatgcCfoB2RDW</code>来分割的</p>
<ul>
<li>post请求<br>改为post请求：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>浏览器貌似不作任何解析，目前原因位置，原生form发送的，如果带file一律不解析，因此我们用fetch来做：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-mul3.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-mul3.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h3 id="multipart-form-data-fetch"><a href="#multipart-form-data-fetch" class="headerlink" title="multipart/form-data (fetch)"></a>multipart/form-data (fetch)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span></span><br><span class="line"><span class="javascript">       form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">console</span>.log(form)</span></span><br><span class="line">           e.preventDefault()</span><br><span class="line"><span class="javascript">           <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</span></span><br><span class="line"><span class="javascript">           fetch(<span class="string">'/form'</span>,&#123;</span></span><br><span class="line"><span class="javascript">               method:<span class="string">'POST'</span>,</span></span><br><span class="line">               body:formData</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">       &#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>点击浏览器未解码传参前：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-mul4.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-mul4.jpg" alt title class></a>
                <p></p>
            </figure><br>点击浏览器解码后的传参view source：<br><figure class="image-box">
                <a rel=前端笔记 href="/image/http_again/form-mul5.jpg" title="undefined" data-fancybox="images"><img src="/image/http_again/form-mul5.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><h4 id="为什么要用formdata"><a href="#为什么要用formdata" class="headerlink" title="为什么要用formdata"></a>为什么要用formdata</h4><p>为什么要用formdata，因为有multipart/form-data，formdata只是multipart/form-data的实现方式；<br>目前浏览器传输和服务端解析，基本上用 multipart/form-data ，都有了一套成熟的服务端传输文本流，服务端正常解析文本流的规范，<br>所以上传必须用multipart/form-data 或者 formData<br>当然也可以用 application/json，但必须将流转base64文本，且后端配合解析，这些都没有现成工具，因此请用multipart/form-data。</p>
<p><a href="https://segmentfault.com/a/1190000037411957" target="_blank" rel="noopener">参考好文</a></p>
<h4 id="文件上传难点：如何传输流"><a href="#文件上传难点：如何传输流" class="headerlink" title="文件上传难点：如何传输流"></a>文件上传难点：如何传输流</h4><p>浏览器如何将流通过tcp传输到服务器：<br>目前有两种思路：</p>
<ul>
<li>通过 js 的 formData 模拟form 或 直接用multipart/form-data form ，配合xhr(ajax)发送给服务器，这是浏览器支持的传送流的报文。</li>
<li>将流转为文本，通过其他方式传输都可以，比如流转base64。但是相应的服务端也要配合解析这串base64，所以比较麻烦，一般不用这种方式</li>
</ul>
<h4 id="两点：浏览器能传流，服务端有工具解析流"><a href="#两点：浏览器能传流，服务端有工具解析流" class="headerlink" title="两点：浏览器能传流，服务端有工具解析流"></a>两点：浏览器能传流，服务端有工具解析流</h4><p>实现文件上传必须满足以上两点，目前浏览器传输流的方式只有multipart/form-data 或 js 的 formData 方式。<br>以下是formdata的解释：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A library to create readable &quot;multipart/form-data&quot; streams. Can be used to submit forms and file uploads to other web applications.</span><br><span class="line">The API of this library is inspired by the XMLHttpRequest-2 FormData Interface.</span><br></pre></td></tr></table></figure></p>
<p>因为浏览器都是通过formData方式传递流，所以服务端对待有流的请求时，也必须用配套的formdata工具解析这个流，还好，服务端有一套标准解析formdata。</p>
<h4 id="FormData-demo-1"><a href="#FormData-demo-1" class="headerlink" title="FormData demo 1"></a>FormData demo 1</h4><p>用下面任何目录下建一个html，然后使用node 的 http-server 启动一个服务器，访问：<br><strong>如果没有服务器将发送失败</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span></span><br><span class="line"><span class="javascript">          form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span></span><br><span class="line">          e.preventDefault()</span><br><span class="line">      &#125;)</span><br><span class="line">       &#125;, 1000)</span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">onclick1</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> data = <span class="keyword">new</span> FormData(form);</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">              url: <span class="string">"/form"</span>,</span></span><br><span class="line"><span class="javascript">              type: <span class="string">'POST'</span>,</span></span><br><span class="line"><span class="javascript">              cache: <span class="literal">false</span>,</span></span><br><span class="line">              data: data,</span><br><span class="line"><span class="javascript">              processData: <span class="literal">false</span>,<span class="comment">//必须这样设置，原因可去百度查</span></span></span><br><span class="line"><span class="javascript">              contentType: <span class="literal">false</span>,<span class="comment">//必须这样设置，原因可去百度查</span></span></span><br><span class="line"><span class="javascript">              success: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span></span><br><span class="line">              &#125;,</span><br><span class="line"><span class="javascript">              error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">onclick</span>=<span class="string">"onclick1()"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="FormData-demo2"><a href="#FormData-demo2" class="headerlink" title="FormData demo2"></a>FormData demo2</h4><p>html一样，js改为<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onclick1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          <span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">          data.append(<span class="string">'usename'</span>, <span class="number">112</span>)</span><br><span class="line">          data.append(<span class="string">'psw'</span>, <span class="number">11</span>)</span><br><span class="line">          data.append(<span class="string">'freeword'</span>, $(<span class="string">'#file1'</span>)[<span class="number">0</span>].files[<span class="number">0</span>])</span><br><span class="line">          $.ajax(&#123;</span><br><span class="line">              url: <span class="string">"/form"</span>,</span><br><span class="line">              type: <span class="string">'POST'</span>,</span><br><span class="line">              cache: <span class="literal">false</span>,</span><br><span class="line">              data: data,</span><br><span class="line">              processData: <span class="literal">false</span>,<span class="comment">//必须这样设置</span></span><br><span class="line">              contentType: <span class="literal">false</span>,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">              &#125;,</span><br><span class="line">              error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="FormData-fetch"><a href="#FormData-fetch" class="headerlink" title="FormData fetch"></a>FormData fetch</h4><p>上面html不变，js改变如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span><br><span class="line">           form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(form)</span><br><span class="line">           e.preventDefault()</span><br><span class="line">           <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</span><br><span class="line">           fetch(<span class="string">'/form'</span>,&#123;</span><br><span class="line">               method:<span class="string">'POST'</span>,</span><br><span class="line">               body:formData</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://segmentfault.com/a/1190000037411957" target="_blank" rel="noopener">参考好文</a><br><a href="https://segmentfault.com/a/1190000022331737" target="_blank" rel="noopener">参考好文</a><br><a href="https://blog.csdn.net/u010216786/article/details/53168079" target="_blank" rel="noopener">参考好文</a></p>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><h3 id="密码md5加密"><a href="#密码md5加密" class="headerlink" title="密码md5加密"></a>密码md5加密</h3><p>密码信息不能明文传输，数据库也不应知道用户的密码，所以前后端可采用同一套md5进行加密。<br>前端可采用 node的一个mdn包加密。</p>
<h3 id="session-cookie"><a href="#session-cookie" class="headerlink" title="session\cookie"></a>session\cookie</h3><h4 id="设置cookie"><a href="#设置cookie" class="headerlink" title="设置cookie"></a>设置cookie</h4><p>一般应用有两种设计：</p>
<p>登录成功后：<br>一般后台返回 用户信息的sessionID。前端通常会将此sessionId设置为cookie，这个前端或者后端都可以设置。<br>这个cookie 用于后续 刷新页面时 或者后续操作时 更新后端sessionId。</p>
<p>按照用户信息返回方式不同</p>
<ul>
<li>用户信息通过接口请求返回</li>
<li>用户信息存储于本地缓存</li>
</ul>
<p>针对这两种方式，登录之后有两种对应的策略。</p>
<h4 id="用户信息通过接口请求返回-推荐"><a href="#用户信息通过接口请求返回-推荐" class="headerlink" title="用户信息通过接口请求返回(推荐)"></a>用户信息通过接口请求返回(推荐)</h4><p>此时登录成功后，只返回sessionid，不返回用户信息。<br>用户信息可通过 用户接口，携带cookie进行请求，当然你也可以通过前端读取cookie，将cookie作为入参请求用户接口，返回用户信息。<br>用户接口返回用户信息后，前端将用户信息存储到redux上，用户页面渲染，或者必要的后续操作的入参。</p>
<h4 id="用户信息存储于本地缓存"><a href="#用户信息存储于本地缓存" class="headerlink" title="用户信息存储于本地缓存"></a>用户信息存储于本地缓存</h4><p>此时登录成功后，要求登录接口还要返回用户各种信息，<br>前端即时将用户信息更新前端redux进而渲染页面；<br>同时前端将此信息分别存储本地缓存，用于页面刷新时 更新前端redux进而渲染页面；</p>
<h2 id="http知识"><a href="#http知识" class="headerlink" title="http知识"></a>http知识</h2><h3 id="cookie-与-http"><a href="#cookie-与-http" class="headerlink" title="cookie 与 http"></a>cookie 与 http</h3><p>参考另外博客《http协议  - cookie》</p>
<h3 id="post与get区别"><a href="#post与get区别" class="headerlink" title="post与get区别"></a>post与get区别</h3><p>1.get在浏览器回退时是无害的，而post会再次提交请求；<br>2.get请求会被浏览器主动缓存，而post不会，除非手动设置；<br>3.get请求在url中传送的参数是有长度限制的，而post没有限制；<br>4.get请求参数会被完整保留在浏览器历史记录中，而post请求参数不会被保留；</p>
<p>其他一些明显区别，在此不列举 。</p>
<h3 id="http状态码"><a href="#http状态码" class="headerlink" title="http状态码"></a>http状态码</h3><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p>2xx：成功 –表示请求已被成功接收；<br>3xx：重定向 –要完成请求必须进行更进一步的操作；<br>4xx：客户端错误 –请求有语法错误或请求无法实现；<br>5xx：服务器错误 –服务器未能实现合法请求；</p>
<h4 id="常用状态码"><a href="#常用状态码" class="headerlink" title="常用状态码"></a>常用状态码</h4><p>200 ok ： 成功；<br>206 ：客户发起一个带有range头的get请求，服务器完成了它；（通常用于视频分片段的请求）；<br>301／302 : 请求的页面已经转移到新的url，前者是永久重定向，后者302是临时重定向；<br>304 ： 服务器数据无变化，使用浏览器缓存；<br>401 ： 请求未经授权；<br>403 ： 禁止访问；<br>404 ： 请求资源不存在；<br>500／503 ： 服务器发生错误；</p>
<h3 id="token"><a href="#token" class="headerlink" title="token"></a>token</h3><h4 id="token与Authorization关系"><a href="#token与Authorization关系" class="headerlink" title="token与Authorization关系"></a>token与Authorization关系</h4><p>Authorization是http的请求头，Authorization的值就是token。<br>可以说token是定义在http中的Authorization属性上的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">"http://localhost:3000/api/userInfo"</span>,</span><br><span class="line">    beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>) </span>&#123; </span><br><span class="line">                xhr.setRequestHeader(<span class="string">"Authorization"</span>, <span class="string">"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTk4Mzg5OTIyLCJleHAiOjE1OTgzOTM1MjJ9.-SgGux78wAT2N9cxNCFOReg9v3EO8XVoH8M_2FzynXU"</span>);  </span><br><span class="line">            &#125;,&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="概述-2"><a href="#概述-2" class="headerlink" title="概述"></a>概述</h4><p>token也成为令牌。</p>
<h4 id="jsonwebtoken生成token"><a href="#jsonwebtoken生成token" class="headerlink" title="jsonwebtoken生成token"></a>jsonwebtoken生成token</h4><p>参考下面的demo</p>
<h4 id="jwt进行token验证"><a href="#jwt进行token验证" class="headerlink" title="jwt进行token验证"></a>jwt进行token验证</h4><p>参考下面的demo</p>
<h4 id="jsonwebtoken-与-koa-jwt"><a href="#jsonwebtoken-与-koa-jwt" class="headerlink" title="jsonwebtoken 与 koa-jwt"></a>jsonwebtoken 与 koa-jwt</h4><p>参考另外一篇博客《koa2笔记 - jsonwebtoken 与 koa-jwt》</p>
<h4 id="postman进行token请求"><a href="#postman进行token请求" class="headerlink" title="postman进行token请求"></a>postman进行token请求</h4><p>参考博客《0到1快速构建自己的后台管理系统   – 登陆前端页面获取令牌》<br>《0到1快速构建自己的后台管理系统   – postman使用令牌请求》</p>
<h4 id="cmd进行token请求"><a href="#cmd进行token请求" class="headerlink" title="cmd进行token请求"></a>cmd进行token请求</h4><p>参考下面的demo</p>
<h4 id="html进行token请求"><a href="#html进行token请求" class="headerlink" title="html进行token请求"></a>html进行token请求</h4><p>参考下面的demo</p>
<h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p><a href="https://github.com/YeWills/koa-demo/tree/router-Token" target="_blank" rel="noopener">demo</a></p>
<h3 id="三次握手与四次挥手"><a href="#三次握手与四次挥手" class="headerlink" title="三次握手与四次挥手"></a>三次握手与四次挥手</h3><p><a href="https://www.jianshu.com/p/d3725391af59" target="_blank" rel="noopener">参考</a></p>
<h3 id="访问一个url经历了哪些"><a href="#访问一个url经历了哪些" class="headerlink" title="访问一个url经历了哪些"></a>访问一个url经历了哪些</h3><p><a href="https://blog.csdn.net/g291976422/article/details/88984859" target="_blank" rel="noopener">参考</a><br>客户端获取URL - &gt; DNS解析 - &gt; TCP连接 - &gt;发送HTTP请求 - &gt;服务器处理请求 - &gt;返回报文 - &gt;浏览器解析渲染页面 - &gt; TCP断开连接<br>tcp连接属于 传输层，只用于连接，不用于数据收发，<br>http连接属于 应用层，用于数据收发。</p>
<h3 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h3><p><a href="https://github.com/YeWills/learns/tree/master/node/websocket" target="_blank" rel="noopener">websocket的小demo</a></p>
<h2 id="js通信"><a href="#js通信" class="headerlink" title="js通信"></a>js通信</h2><h3 id="同源策略及限制"><a href="#同源策略及限制" class="headerlink" title="同源策略及限制"></a>同源策略及限制</h3><h4 id="概述-3"><a href="#概述-3" class="headerlink" title="概述"></a>概述</h4><p>同源策略是浏览器端做的安全策略。<br>包含以下特点：</p>
<h4 id="Cookie、LocalStaorage和indexDB无法读取；"><a href="#Cookie、LocalStaorage和indexDB无法读取；" class="headerlink" title="Cookie、LocalStaorage和indexDB无法读取；"></a>Cookie、LocalStaorage和indexDB无法读取；</h4><p>非同源下，无法读取非同源的以上缓存；</p>
<h4 id="DOM无法获取"><a href="#DOM无法获取" class="headerlink" title="DOM无法获取"></a>DOM无法获取</h4><h4 id="浏览器屏蔽非同源请求的消息（跨域）"><a href="#浏览器屏蔽非同源请求的消息（跨域）" class="headerlink" title="浏览器屏蔽非同源请求的消息（跨域）"></a>浏览器屏蔽非同源请求的消息（跨域）</h4><h3 id="前后端如何通信"><a href="#前后端如何通信" class="headerlink" title="前后端如何通信"></a>前后端如何通信</h3><h4 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h4><h4 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h4><h4 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h4><p>cors是一个新的通信标准</p>
<h3 id="如何创建ajax"><a href="#如何创建ajax" class="headerlink" title="如何创建ajax"></a>如何创建ajax</h3><h4 id="xmlhttpRequest对象的工作流程"><a href="#xmlhttpRequest对象的工作流程" class="headerlink" title="xmlhttpRequest对象的工作流程"></a>xmlhttpRequest对象的工作流程</h4><h4 id="兼容处理-（ie）"><a href="#兼容处理-（ie）" class="headerlink" title="兼容处理 （ie）"></a>兼容处理 （ie）</h4><p>new XMLHttpRequest<br>new window.ActiveXObeject (ie 兼容)</p>
<h4 id="事件触发条件"><a href="#事件触发条件" class="headerlink" title="事件触发条件"></a>事件触发条件</h4><h4 id="事件的触发顺序"><a href="#事件的触发顺序" class="headerlink" title="事件的触发顺序"></a>事件的触发顺序</h4><h3 id="跨域通信的几种方式"><a href="#跨域通信的几种方式" class="headerlink" title="跨域通信的几种方式"></a>跨域通信的几种方式</h3><h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>在postMessage与CORS出现前，基本上都是通过jsonp来实现跨域；<br>jsonp的原理是利用script异步加载实现。<br>此方法需要后台配合。<br>实现方法：</p>
<ul>
<li><p>在script标签中定义一串url，并且使用callback作为关键字，告诉服务器前台已经定义了一个全局函数jsonpCunstomFnName来接收数据。<br>（callback、jsonpCunstomFnName 这些都可以随便定义，跟后台商量好就行）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://www.google.com/?data=name&amp;callback=jsonpCunstomFnName&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>js代码定义全局函数jsonpCunstomFnName</p>
</li>
<li>服务器返回一段以下script字符，执行全局函数jsonpCunstomFnName,并且将请求返回数据作为参数；<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    jsonpCunstomFnName(&#123;</span><br><span class="line">        data:[]</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h4><figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-postm.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-postm.jpg" alt title class></a>
                <p></p>
            </figure>
<h4 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//利用hash，场景是当前页面A通过iframe嵌入来跨域的页面B</span><br><span class="line">//在A的代码如下</span><br><span class="line">var B = document.getElementsByTagName(&apos;iframe&apos;)</span><br><span class="line">B.src = B.src + &apos;#&apos; + &apos;data&apos;;</span><br><span class="line"></span><br><span class="line">//在B的代码如下</span><br><span class="line">window.onhashchange = function()&#123;</span><br><span class="line">    var data = window.location.hash</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="websocket-1"><a href="#websocket-1" class="headerlink" title="websocket"></a>websocket</h4><figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-webs.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-webs.jpg" alt title class></a>
                <p></p>
            </figure>
<h4 id="CORS-1"><a href="#CORS-1" class="headerlink" title="CORS"></a>CORS</h4><p>cors通信必须配合fetch使用。<br>cors是变种的ajax，浏览器识别到是cors时，自定增加origin参数到请求头中，达到可跨域请求<br> <figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-cors.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-cors.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h2 id="页面优化"><a href="#页面优化" class="headerlink" title="页面优化"></a>页面优化</h2><h3 id="资源合并、压缩"><a href="#资源合并、压缩" class="headerlink" title="资源合并、压缩"></a>资源合并、压缩</h3><p>gzip压缩</p>
<h3 id="减少http请求"><a href="#减少http请求" class="headerlink" title="减少http请求"></a>减少http请求</h3><h3 id="利用浏览器缓存"><a href="#利用浏览器缓存" class="headerlink" title="利用浏览器缓存"></a>利用浏览器缓存</h3><p>参考《高效前端》P72<br>cache-control\last-modified\if-Modified-Since\etag\if-None-Match</p>
<h3 id="非核心代码异步加载"><a href="#非核心代码异步加载" class="headerlink" title="非核心代码异步加载"></a>非核心代码异步加载</h3><h4 id="异步加载的方式"><a href="#异步加载的方式" class="headerlink" title="异步加载的方式"></a>异步加载的方式</h4><p>动态脚本加载(用js创建script标签)，defer，async。</p>
<h4 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h4><p>defer是在html解析完后才执行，如果是多个，按顺序依次执行；<br><figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/async.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/async.jpg" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/async-result.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/async-result.jpg" alt title class></a>
                <p></p>
            </figure></p>
<h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><p>async使用方法与defer相同。<br>async是在html解析完后才执行，如果是多个，则同时执行多个文件；</p>
<h3 id="使用cdn"><a href="#使用cdn" class="headerlink" title="使用cdn"></a>使用cdn</h3><h3 id="预解析dns"><a href="#预解析dns" class="headerlink" title="预解析dns"></a>预解析dns</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//强制打开a标签的dns解析，一般a标签默认开启dns解析，但对于有些浏览器可能没有打开，此时加上这句话可开启。</span><br><span class="line">&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt;</span><br><span class="line">//开启页面预解析dns</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot;  href=&quot;//host_name_to_prefetch.com&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="把css写成内联"><a href="#把css写成内联" class="headerlink" title="把css写成内联"></a>把css写成内联</h3><p>css只有10或20k时，写成内联，谷歌和百度和淘宝pc版都是这样干的。<br>放在内联上，最大的好处是节省了一次cdn请求,从而加快页面响应。<br>注意只适合css不是非常大的情况。</p>
<h2 id="hybrid"><a href="#hybrid" class="headerlink" title="hybrid"></a>hybrid</h2><h3 id="为什么hybrid版本更新方便，更快捷"><a href="#为什么hybrid版本更新方便，更快捷" class="headerlink" title="为什么hybrid版本更新方便，更快捷"></a>为什么hybrid版本更新方便，更快捷</h3><p>因为hybrid使用的是js语言开发，相比原生开发使用的java语言，js语言无法操作设备的相机、横屏竖屏、语音、通讯录等等，而java是能操作这些的。所以每当版本更新时，java原生开发要进行代码审核安全验证，js的hybrid则不需要，所以版本更新更加便捷；</p>
<h3 id="页面无法直接向服务器发请求，需要原生层面中转"><a href="#页面无法直接向服务器发请求，需要原生层面中转" class="headerlink" title="页面无法直接向服务器发请求，需要原生层面中转"></a>页面无法直接向服务器发请求，需要原生层面中转</h3><p>hybrid的js页面的ajax需要调去原生提供的请求API，才能向后端发起请求，所以的ajax请求会经过原生转发</p>
<h3 id="webview"><a href="#webview" class="headerlink" title="webview"></a>webview</h3><ul>
<li>是app中的一个组件（app可以有webview，也可以没有）</li>
<li>用于加载h5页面，即一个小型的浏览器内核<h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="需要了解的算法："><a href="#需要了解的算法：" class="headerlink" title="需要了解的算法："></a>需要了解的算法：</h3>还有兴趣的话，也学习下 冒泡排序：<figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-calc1.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-calc1.jpg" alt title class></a>
                <p></p>
            </figure>
<figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-calc2.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-calc2.jpg" alt title class></a>
                <p></p>
            </figure>
<figure class="image-box">
                <a rel=前端笔记 href="/image/font_end/f-calc3.jpg" title="undefined" data-fancybox="images"><img src="/image/font_end/f-calc3.jpg" alt title class></a>
                <p></p>
            </figure>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="获取并使用字体图标"><a href="#获取并使用字体图标" class="headerlink" title="获取并使用字体图标"></a>获取并使用字体图标</h3><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">可以通过阿里的开源字体库</a>使用</li>
</ul>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><h3 id="滚动到指定的节点"><a href="#滚动到指定的节点" class="headerlink" title="滚动到指定的节点"></a>滚动到指定的节点</h3><p>一个弹框 container–tree， 里面有很多节点；<br>目标：滚动到 指定的 .next-tree-node-label 节点上；<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> treeEle = <span class="built_in">document</span>.querySelector(<span class="string">'.container--tree'</span>);</span><br><span class="line"><span class="keyword">const</span> treePos = treeEle.getBoundingClientRect();</span><br><span class="line"><span class="keyword">const</span> highlightNodes = <span class="built_in">document</span>.querySelector(<span class="string">'.container--tree .next-tree-node.next-filtered &gt; .next-tree-node-inner .next-tree-node-label'</span>);</span><br><span class="line"><span class="keyword">const</span> pos = highlightNodes ? highlightNodes.getBoundingClientRect() : <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (pos) &#123;</span><br><span class="line">  treeEle.scrollTop += pos.top - treePos.top - treeEle.clientHeight / <span class="number">2</span> + <span class="number">35</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里用到了双 getBoundingClientRect 来确定相对位置。<br>实际的业务需求有，当一个div中有非常多的列表节点，希望滚动到第一个高亮的节点。</p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2022-10-17T04:12:18.408Z" itemprop="dateUpdated">2022-10-17 04:12:18</time>
</span><br>


        
        博客内容均为原创，转载注明出处，原文地址：<a href="/2019/05/21/font_end/" target="_blank" rel="external">https://yewills.github.io/2019/05/21/font_end/</a>
        
    </div>
    <footer>
        <a href="https://yewills.github.io">
            <img src="/img/avatar.jpg" alt="Mr.Yellow">
            Mr.Yellow
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/html/">html</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yewills.github.io/2019/05/21/font_end/&title=《前端笔记》 — Mr.Yellow.Wills&pic=https://yewills.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yewills.github.io/2019/05/21/font_end/&title=《前端笔记》 — Mr.Yellow.Wills&source=hellow kity" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/08/13/node_module/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">node模块</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/05/21/http/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">http协议</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前端知识"><span class="post-toc-number">1.</span> <span class="post-toc-text">前端知识</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器直接使用import-JavaScript-modules"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">浏览器直接使用import (JavaScript modules)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#浏览器缓存"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">浏览器缓存</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概述"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">概述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#强缓存"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">强缓存</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#协商缓存"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">协商缓存</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#二者区别"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">二者区别</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安全类"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">安全类</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CSRF-跨站请求伪造"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">CSRF 跨站请求伪造</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#XSS-跨站脚本攻击"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">XSS 跨站脚本攻击</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#表单提交"><span class="post-toc-number">2.</span> <span class="post-toc-text">表单提交</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#概述-1"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">概述</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#enctype"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">enctype</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#application-x-www-form-urlencoded"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">application/x-www-form-urlencoded</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#text-plain"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">text/plain</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#multipart-form-data-原生"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">multipart/form-data (原生)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#multipart-form-data-fetch"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">multipart/form-data (fetch)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#文件上传"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">文件上传</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#为什么要用formdata"><span class="post-toc-number">2.7.1.</span> <span class="post-toc-text">为什么要用formdata</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#文件上传难点：如何传输流"><span class="post-toc-number">2.7.2.</span> <span class="post-toc-text">文件上传难点：如何传输流</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#两点：浏览器能传流，服务端有工具解析流"><span class="post-toc-number">2.7.3.</span> <span class="post-toc-text">两点：浏览器能传流，服务端有工具解析流</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FormData-demo-1"><span class="post-toc-number">2.7.4.</span> <span class="post-toc-text">FormData demo 1</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FormData-demo2"><span class="post-toc-number">2.7.5.</span> <span class="post-toc-text">FormData demo2</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FormData-fetch"><span class="post-toc-number">2.7.6.</span> <span class="post-toc-text">FormData fetch</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#参考"><span class="post-toc-number">2.7.7.</span> <span class="post-toc-text">参考</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#登录"><span class="post-toc-number">3.</span> <span class="post-toc-text">登录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#密码md5加密"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">密码md5加密</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#session-cookie"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">session\cookie</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设置cookie"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">设置cookie</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#用户信息通过接口请求返回-推荐"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">用户信息通过接口请求返回(推荐)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#用户信息存储于本地缓存"><span class="post-toc-number">3.2.3.</span> <span class="post-toc-text">用户信息存储于本地缓存</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#http知识"><span class="post-toc-number">4.</span> <span class="post-toc-text">http知识</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#cookie-与-http"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">cookie 与 http</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#post与get区别"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">post与get区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#http状态码"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">http状态码</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#分类"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">分类</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#常用状态码"><span class="post-toc-number">4.3.2.</span> <span class="post-toc-text">常用状态码</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#token"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">token</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#token与Authorization关系"><span class="post-toc-number">4.4.1.</span> <span class="post-toc-text">token与Authorization关系</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概述-2"><span class="post-toc-number">4.4.2.</span> <span class="post-toc-text">概述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#jsonwebtoken生成token"><span class="post-toc-number">4.4.3.</span> <span class="post-toc-text">jsonwebtoken生成token</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#jwt进行token验证"><span class="post-toc-number">4.4.4.</span> <span class="post-toc-text">jwt进行token验证</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#jsonwebtoken-与-koa-jwt"><span class="post-toc-number">4.4.5.</span> <span class="post-toc-text">jsonwebtoken 与 koa-jwt</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#postman进行token请求"><span class="post-toc-number">4.4.6.</span> <span class="post-toc-text">postman进行token请求</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#cmd进行token请求"><span class="post-toc-number">4.4.7.</span> <span class="post-toc-text">cmd进行token请求</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#html进行token请求"><span class="post-toc-number">4.4.8.</span> <span class="post-toc-text">html进行token请求</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#demo"><span class="post-toc-number">4.4.9.</span> <span class="post-toc-text">demo</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#三次握手与四次挥手"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">三次握手与四次挥手</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#访问一个url经历了哪些"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">访问一个url经历了哪些</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#websocket"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">websocket</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#js通信"><span class="post-toc-number">5.</span> <span class="post-toc-text">js通信</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#同源策略及限制"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">同源策略及限制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#概述-3"><span class="post-toc-number">5.1.1.</span> <span class="post-toc-text">概述</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Cookie、LocalStaorage和indexDB无法读取；"><span class="post-toc-number">5.1.2.</span> <span class="post-toc-text">Cookie、LocalStaorage和indexDB无法读取；</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DOM无法获取"><span class="post-toc-number">5.1.3.</span> <span class="post-toc-text">DOM无法获取</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#浏览器屏蔽非同源请求的消息（跨域）"><span class="post-toc-number">5.1.4.</span> <span class="post-toc-text">浏览器屏蔽非同源请求的消息（跨域）</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前后端如何通信"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">前后端如何通信</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#ajax"><span class="post-toc-number">5.2.1.</span> <span class="post-toc-text">ajax</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Websocket"><span class="post-toc-number">5.2.2.</span> <span class="post-toc-text">Websocket</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CORS"><span class="post-toc-number">5.2.3.</span> <span class="post-toc-text">CORS</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#如何创建ajax"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">如何创建ajax</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#xmlhttpRequest对象的工作流程"><span class="post-toc-number">5.3.1.</span> <span class="post-toc-text">xmlhttpRequest对象的工作流程</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#兼容处理-（ie）"><span class="post-toc-number">5.3.2.</span> <span class="post-toc-text">兼容处理 （ie）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事件触发条件"><span class="post-toc-number">5.3.3.</span> <span class="post-toc-text">事件触发条件</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#事件的触发顺序"><span class="post-toc-number">5.3.4.</span> <span class="post-toc-text">事件的触发顺序</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#跨域通信的几种方式"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">跨域通信的几种方式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#JSONP"><span class="post-toc-number">5.4.1.</span> <span class="post-toc-text">JSONP</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#postMessage"><span class="post-toc-number">5.4.2.</span> <span class="post-toc-text">postMessage</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Hash"><span class="post-toc-number">5.4.3.</span> <span class="post-toc-text">Hash</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#websocket-1"><span class="post-toc-number">5.4.4.</span> <span class="post-toc-text">websocket</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#CORS-1"><span class="post-toc-number">5.4.5.</span> <span class="post-toc-text">CORS</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#页面优化"><span class="post-toc-number">6.</span> <span class="post-toc-text">页面优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#资源合并、压缩"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">资源合并、压缩</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#减少http请求"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">减少http请求</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#利用浏览器缓存"><span class="post-toc-number">6.3.</span> <span class="post-toc-text">利用浏览器缓存</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#非核心代码异步加载"><span class="post-toc-number">6.4.</span> <span class="post-toc-text">非核心代码异步加载</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#异步加载的方式"><span class="post-toc-number">6.4.1.</span> <span class="post-toc-text">异步加载的方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#defer"><span class="post-toc-number">6.4.2.</span> <span class="post-toc-text">defer</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#async"><span class="post-toc-number">6.4.3.</span> <span class="post-toc-text">async</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用cdn"><span class="post-toc-number">6.5.</span> <span class="post-toc-text">使用cdn</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#预解析dns"><span class="post-toc-number">6.6.</span> <span class="post-toc-text">预解析dns</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#把css写成内联"><span class="post-toc-number">6.7.</span> <span class="post-toc-text">把css写成内联</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#hybrid"><span class="post-toc-number">7.</span> <span class="post-toc-text">hybrid</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#为什么hybrid版本更新方便，更快捷"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">为什么hybrid版本更新方便，更快捷</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#页面无法直接向服务器发请求，需要原生层面中转"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">页面无法直接向服务器发请求，需要原生层面中转</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#webview"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">webview</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#算法"><span class="post-toc-number">8.</span> <span class="post-toc-text">算法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#需要了解的算法："><span class="post-toc-number">8.1.</span> <span class="post-toc-text">需要了解的算法：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#FAQ"><span class="post-toc-number">9.</span> <span class="post-toc-text">FAQ</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取并使用字体图标"><span class="post-toc-number">9.1.</span> <span class="post-toc-text">获取并使用字体图标</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#方案"><span class="post-toc-number">10.</span> <span class="post-toc-text">方案</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#滚动到指定的节点"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">滚动到指定的节点</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        我们一起来让这个世界有趣一点
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

        <footer class="footer">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://www.lujingtao.com" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                Mr.Yellow &copy; 2017 - 2022
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yewills.github.io/2019/05/21/font_end/&title=《前端笔记》 — Mr.Yellow.Wills&pic=https://yewills.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yewills.github.io/2019/05/21/font_end/&title=《前端笔记》 — Mr.Yellow.Wills&source=hellow kity" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIklEQVR42u3aQU7EMAwF0Ln/pQeJLTR828NI476uEJC4rwvLif14xM/z+6n+/uqvVzvkq5oPBgbGxzKex+cqWLLb+UV/7nO19vxuGBgY92FUU2ES7Bwl+UyFRI+BgYFxTI7nku6cxHMeBgYGxjzh5kVetZTEwMDAyA+xeQl4frn/iIuBgbGbUW0MvPPnf+xvYGBgfAjjWXzyQ2lSGvaS7C+rMDAwVjOSK/vk9zmjd1SO0jEGBsYNGL0BiDxF5p+v2v7EwMDYzZhc1ietx2RVcmz+g4qBgbGakae/6hXYpCWQf6CoH4uBgbGCMdnorYNf57UYGBi3YeQDE3nhWB2e6H0ODAyMOzDmQ13VuYh8mCO6mMPAwLgBo9oSqL7KhBelYAwMjKWMarDehX4yopGsxcDAwOhdn+VNyryIzEvSghUDA2MFIw82R/ZGMaKEi4GBsY5RDVZNo/M2QHNaBAMDYxEjCTAP1kPmO2BgYOxmTIa6qgMZ1bXVlioGBsZWxnzTCb5Xbj7yzI2BgbGIkR9oJ//TO/qWT+EYGBjrGEmKrGa56svNhzkwMDB2MyYXXpO0mxeXSVwMDIzdjF6a68HyhF5tTmBgYNyBkV+i5QnxVQMcL7g7xMDAWMTIk2y1yOsdeqv3/xgYGBj5YXLSquwdazEwMDCqpOTAmbQQyk0IDAyMGzAml/XVUi8fJitEwcDAWM3oNQby5Dhvc1ZTNgYGxiLGF3eCDyykBvI+AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/plugins/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/plugins/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/plugins/MathJax.js"></script>
<script type="text/javascript" src="/js/plugins/TeX-AMS-MML_HTMLorMML.js"></script>
<script type="text/javascript" src="/js/plugins/MathMenu.js"></script>
<script type="text/javascript" src="/js/plugins/MathZoom.js"></script>

<script type="text/javascript" src="/js/plugins/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/blog.js?v=1.3.9"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.3.9"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src=""></script>







    
</body>
</html>
