<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>tsä¸react</title>
      <link href="/2021/07/22/ts_react/"/>
      <url>/2021/07/22/ts_react/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h3><h4 id="HTMLInputElement-å¾…ç ”ç©¶-todo"><a href="#HTMLInputElement-å¾…ç ”ç©¶-todo" class="headerlink" title="HTMLInputElement å¾…ç ”ç©¶ todo"></a>HTMLInputElement å¾…ç ”ç©¶ todo</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect, useRef, useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">const</span> LikeButton: React.FC = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> likeRef = useRef(<span class="number">0</span>) <span class="comment">//è¿™ä¸ªä¸ç”¨åŠ ç±»å‹ï¼Œä¼ å…¥åˆå§‹å€¼æ˜¯0ï¼Œé»˜è®¤ä¸ºnumberç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> domRef = useRef&lt;HTMLInputElement&gt;(<span class="literal">null</span>) <span class="comment">//null æ— æ³•è®©tsçŒœæµ‹ç±»å‹ï¼Œå› æ­¤è¦å®šä¹‰ç±»å‹</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (domRef &amp;&amp; domRef.current) &#123;</span><br><span class="line">      domRef.current.focus()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">    &lt;input <span class="keyword">type</span>=<span class="string">"text"</span> ref=&#123;domRef&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default LikeButton</span></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»<code>useRef&lt;HTMLInputElement&gt;(null)</code>ä¸­çš„<code>useRef</code> ï¼Œè·³è½¬å£°æ˜æ–‡ä»¶<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface RefObject&lt;T&gt; &#123;</span><br><span class="line">       readonly current: T | <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useRef</span>&lt;<span class="title">T</span>&gt;(<span class="params">initialValue: T|null</span>): <span class="title">RefObject</span>&lt;<span class="title">T</span>&gt;;</span></span><br></pre></td></tr></table></figure></p><h3 id="å¯¹è±¡Object"><a href="#å¯¹è±¡Object" class="headerlink" title="å¯¹è±¡Object"></a>å¯¹è±¡Object</h3><h4 id="å®šä¹‰keyç±»å‹ï¼Œvalueç±»å‹"><a href="#å®šä¹‰keyç±»å‹ï¼Œvalueç±»å‹" class="headerlink" title="å®šä¹‰keyç±»å‹ï¼Œvalueç±»å‹"></a>å®šä¹‰keyç±»å‹ï¼Œvalueç±»å‹</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> interface IThemeProps &#123;</span><br><span class="line">  [key: string]: &#123;<span class="attr">color</span>: string; background: string;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> themes: IThemeProps = &#123;</span><br><span class="line"> <span class="string">'light'</span>: &#123;</span><br><span class="line">   color: <span class="string">'#000'</span>,</span><br><span class="line">   background: <span class="string">'#eee'</span>,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="string">'dark'</span>: &#123;</span><br><span class="line">    color: <span class="string">'#fff'</span>,</span><br><span class="line">    background: <span class="string">'#222'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="state"><a href="#state" class="headerlink" title="state"></a>state</h3><p>è§£å†³ this.state.like æŠ¥é”™ <code>Property &#39;like&#39; does not exist on type &#39;Readonly&lt;{}&gt;&#39;</code><br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IState &#123;</span><br><span class="line">  like: <span class="built_in">any</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> LikeButton <span class="keyword">extends</span> React.Component &lt;<span class="built_in">any</span>, IState&gt;&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props:<span class="built_in">any</span></span>)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state=&#123;like:<span class="number">0</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  handleAlertClick =<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;like&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'you clicked on '</span> + <span class="keyword">this</span>.state.like)  <span class="comment">//like ä¸º 17</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'you clicked on '</span> + like) <span class="comment">//like ä¸º 5</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;like&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="keyword">this</span>.setState(&#123;like: like + <span class="number">1</span>&#125;);&#125;&#125;&gt;</span><br><span class="line">        &#123;like&#125; ğŸ‘</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &#123;/</span>* like ä¸º <span class="number">5</span> çš„æ—¶å€™ï¼Œ  ç‚¹å‡»è§¦å‘ handleAlertClick, ç„¶åä¸€ç›´ç‚¹å‡»ä¸Šé¢çš„onClickæ”¹å˜likeå€¼ï¼Œ<span class="number">3</span>ç§’ålikeå€¼å˜æˆ<span class="number">17</span> *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;this.handleAlertClick&#125;&gt; Alert!</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="style"><a href="#style" class="headerlink" title="style"></a>style</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> wrapperStyle: React.CSSProperties = &#123;</span><br><span class="line">  padding: <span class="string">'20px 40px'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storyWrapper = <span class="function">(<span class="params">stroyFn: <span class="built_in">any</span></span>) =&gt;</span> (</span><br><span class="line">  &lt;div style=&#123;wrapperStyle&#125;&gt;</span><br><span class="line">    &lt;h3&gt;ç»„ä»¶æ¼”ç¤º&lt;<span class="regexp">/h3&gt;</span></span><br><span class="line"><span class="regexp">    &#123;stroyFn()&#125;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="createContext"><a href="#createContext" class="headerlink" title="createContext"></a>createContext</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; FC, useState, createContext, CSSProperties &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> IMenuContext &#123;</span><br><span class="line">  index: <span class="built_in">string</span>;</span><br><span class="line">  onSelect?: <span class="function">(<span class="params">selectedIndex: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">  mode?: MenuMode;</span><br><span class="line">  defaultOpenSubMenus?: <span class="built_in">string</span>[];  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//createContext  å¯ä»¥æ¥æ”¶ä¸€ä¸ªæ³›å‹ IMenuContext</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> MenuContext = createContext&lt;IMenuContext&gt;(&#123;index: <span class="string">'0'</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="click-event-ï¼š-React-MouseEvent"><a href="#click-event-ï¼š-React-MouseEvent" class="headerlink" title="click event ï¼š React.MouseEvent"></a>click event ï¼š React.MouseEvent</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleClick = <span class="function">(<span class="params">e: React.MouseEvent</span>) =&gt;</span> &#123;</span><br><span class="line">   e.preventDefault()</span><br><span class="line">   setOpen(!menuOpen)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰onChange-type-ï¼š-React-ChangeEvent"><a href="#å®šä¹‰onChange-type-ï¼š-React-ChangeEvent" class="headerlink" title="å®šä¹‰onChange type ï¼š React.ChangeEvent"></a>å®šä¹‰onChange type ï¼š React.ChangeEvent</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; ChangeEvent &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> InputProps <span class="keyword">extends</span> Omit&lt;InputHTMLAttributes&lt;HTMLElement&gt;, 'size' &gt; &#123;</span><br><span class="line">  onChange? : <span class="function">(<span class="params">e: ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é¡¶ä¸€ä¸ªä¸º React.ChangeEventåï¼Œ  ä½¿ç”¨çš„æ—¶å€™ï¼Œå°±e.target.value è¿™äº›å±æ€§</span></span><br><span class="line">onChange=&#123;<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;e.target.value&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰é”®ç›˜äº‹ä»¶"><a href="#å®šä¹‰é”®ç›˜äº‹ä»¶" class="headerlink" title="å®šä¹‰é”®ç›˜äº‹ä»¶"></a>å®šä¹‰é”®ç›˜äº‹ä»¶</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handleKeyDown = <span class="function">(<span class="params">e: KeyboardEvent&lt;HTMLInputElement&gt;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">switch</span>(e.keyCode) &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><h3 id="æŒ‰é’®çš„propså®šä¹‰demo"><a href="#æŒ‰é’®çš„propså®šä¹‰demo" class="headerlink" title="æŒ‰é’®çš„propså®šä¹‰demo"></a>æŒ‰é’®çš„propså®šä¹‰demo</h3><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> ButtonSize = <span class="string">'lg'</span> | <span class="string">'sm'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> ButtonType = <span class="string">'primary'</span> | <span class="string">'default'</span> | <span class="string">'danger'</span> | <span class="string">'link'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> BaseButtonProps &#123;</span><br><span class="line">  className?: <span class="built_in">string</span>;</span><br><span class="line">  <span class="comment">/**è®¾ç½® Button çš„ç¦ç”¨ */</span></span><br><span class="line">  disabled?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="comment">/**è®¾ç½® Button çš„å°ºå¯¸ */</span></span><br><span class="line">  size?: ButtonSize;</span><br><span class="line">  <span class="comment">/**è®¾ç½® Button çš„ç±»å‹ */</span></span><br><span class="line">  btnType?: ButtonType;</span><br><span class="line">  children: React.ReactNode;</span><br><span class="line">  href?: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ButtonHTMLAttributes è¿™æ˜¯reactå†™çš„ä¸€ä¸ªæŒ‰é’®çš„propsï¼ŒåŒ…å«äº† onClick ç­‰ç­‰ buttonåº”è¯¥å…·å¤‡çš„æ‰€æœ‰å±æ€§çš„ æ¥å£ã€‚</span></span><br><span class="line"><span class="comment">// AnchorHTMLAttributes è¿™æ˜¯reactå†™çš„ä¸€ä¸ªé”šç‚¹çš„propsã€‚</span></span><br><span class="line"><span class="comment">// NativeButtonProps å…·å¤‡äº† BaseButtonProps ä¸ ButtonHTMLAttributes å…±åŒçš„å±æ€§</span></span><br><span class="line"><span class="keyword">type</span> NativeButtonProps = BaseButtonProps &amp; ButtonHTMLAttributes&lt;HTMLElement&gt;</span><br><span class="line"><span class="keyword">type</span> AnchorButtonProps = BaseButtonProps &amp; AnchorHTMLAttributes&lt;HTMLElement&gt;</span><br><span class="line"><span class="comment">// Partial æ˜¯ ts çš„å…³é”®å­— ï¼Œå°†æ‰€æœ‰ props å±æ€§ å˜ä¸ºå¯é€‰ï¼›</span></span><br><span class="line"><span class="comment">// &amp; æ˜¯ ä¸¤ä¸ªå¯¹è±¡çš„åˆé›†ï¼Œç±»ä¼¼ js çš„ Object.assign</span></span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆè¦ButtonPropså¯é€‰ï¼Œå› ä¸ºä¸ç”¨å¯é€‰ï¼ŒNativeButtonProps ç­‰è¿™äº›å±æ€§éƒ½æ˜¯å¿…å¡«çš„ï¼Œ</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> ButtonProps = Partial&lt;NativeButtonProps &amp; AnchorButtonProps&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> Button: FC&lt;ButtonProps&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br></pre></td></tr></table></figure><h4 id="æŒ‰é’®props"><a href="#æŒ‰é’®props" class="headerlink" title="æŒ‰é’®props"></a>æŒ‰é’®props</h4><p>ButtonHTMLAttributes , å‚è€ƒdemo</p><h4 id="é”šç‚¹props"><a href="#é”šç‚¹props" class="headerlink" title="é”šç‚¹props"></a>é”šç‚¹props</h4><p>AnchorHTMLAttributes , å‚è€ƒdemo</p><h4 id="ts-çš„-Partial"><a href="#ts-çš„-Partial" class="headerlink" title="ts çš„ Partial"></a>ts çš„ Partial</h4><p>å‚è€ƒdemo</p><h2 id="è¿ç”¨åœºæ™¯"><a href="#è¿ç”¨åœºæ™¯" class="headerlink" title="è¿ç”¨åœºæ™¯"></a>è¿ç”¨åœºæ™¯</h2><h3 id="ä»ä¸€ä¸ªå¯¹è±¡ç±»å‹ä¸­å‰”é™¤æŸäº›å±æ€§-Omit"><a href="#ä»ä¸€ä¸ªå¯¹è±¡ç±»å‹ä¸­å‰”é™¤æŸäº›å±æ€§-Omit" class="headerlink" title="ä»ä¸€ä¸ªå¯¹è±¡ç±»å‹ä¸­å‰”é™¤æŸäº›å±æ€§ Omit"></a>ä»ä¸€ä¸ªå¯¹è±¡ç±»å‹ä¸­å‰”é™¤æŸäº›å±æ€§ Omit</h3><p><a href="https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys" target="_blank" rel="noopener">Omit</a></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; FC, ReactElement, InputHTMLAttributes &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">type</span> InputSize = <span class="string">'lg'</span> | <span class="string">'sm'</span></span><br><span class="line"><span class="comment">//react InputHTMLAttributes ä¸­å®šä¹‰äº† sizeï¼Œä¸”sizeç±»å‹æ˜¯numberï¼Œè€Œæˆ‘ä»¬ä¹Ÿè¦å®šä¹‰sizeï¼Œä¸”sizeç±»å‹ä¸ºstringï¼Œ</span></span><br><span class="line"><span class="comment">// å› æ­¤éœ€è¦å‰”é™¤æ‰ react InputHTMLAttributes ä¸­å®šä¹‰çš„ sizeï¼Œä¸ç„¶æŠ¥é”™</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> InputProps <span class="keyword">extends</span> Omit&lt;InputHTMLAttributes&lt;HTMLElement&gt;, 'size' &gt; &#123;</span><br><span class="line">  <span class="comment">/**æ˜¯å¦ç¦ç”¨ Input */</span></span><br><span class="line">  disabled?: <span class="built_in">boolean</span>;</span><br><span class="line">  <span class="comment">/**è®¾ç½® input å¤§å°ï¼Œæ”¯æŒ lg æˆ–è€…æ˜¯ sm */</span></span><br><span class="line">  size?: InputSize;  </span><br><span class="line">   <span class="comment">/**æ·»åŠ åç¼€ ç”¨äºé…ç½®ä¸€äº›å›ºå®šç»„åˆ */</span></span><br><span class="line">  append?: <span class="built_in">string</span> | ReactElement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰react-element"><a href="#å®šä¹‰react-element" class="headerlink" title="å®šä¹‰react element"></a>å®šä¹‰react element</h3><p>å‚è€ƒä¸Šé¢çš„ demo  ï¼š React.ReactElement</p><h3 id="å®šä¹‰Promise"><a href="#å®šä¹‰Promise" class="headerlink" title="å®šä¹‰Promise"></a>å®šä¹‰Promise</h3><p>å‚è€ƒã€Štype çš„ä½¿ç”¨demoã€‹</p><h3 id="å®šä¹‰ref"><a href="#å®šä¹‰ref" class="headerlink" title="å®šä¹‰ref"></a>å®šä¹‰ref</h3><p>ä»¥ä¸‹ä¹Ÿæ˜¯ contains çš„ç»å…¸å¼•ç”¨ï¼Œ ç”¨äºå®ç° ç‚¹å‡»å…ƒç´ ä¹‹å¤–ä»»ä½•åœ°æ–¹ è§¦å‘äº‹ä»¶ï¼Œ æ¯”å¦‚å…³é—­å¼¹æ¡†ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; RefObject, useEffect &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useClickOutside</span>(<span class="params">ref: RefObject&lt;HTMLElement&gt;, handler: <span class="built_in">Function</span></span>) </span>&#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> listener = <span class="function">(<span class="params">event: MouseEvent</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å€¼å¾—æ³¨æ„çš„æ˜¯ ref.current.contains(event.targe) å¯ç”¨äºåˆ¤æ–­domæ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªdom</span></span><br><span class="line">      <span class="keyword">if</span> (!ref.current || ref.current.contains(event.target <span class="keyword">as</span> HTMLElement)) &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      handler(event)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>, listener)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">document</span>.removeEventListener(<span class="string">'click'</span>, listener)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [ref, handler])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useClickOutside</span><br></pre></td></tr></table></figure><h4 id="TransMenu-Item-MenuItemç±»å‹å®šä¹‰"><a href="#TransMenu-Item-MenuItemç±»å‹å®šä¹‰" class="headerlink" title="TransMenu.Item = MenuItemç±»å‹å®šä¹‰"></a><code>TransMenu.Item = MenuItem</code>ç±»å‹å®šä¹‰</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; FC &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> Menu, &#123; MenuProps &#125; <span class="keyword">from</span> <span class="string">'./menu'</span></span><br><span class="line"><span class="keyword">import</span> SubMenu, &#123; SubMenuProps &#125; <span class="keyword">from</span> <span class="string">'./subMenu'</span></span><br><span class="line"><span class="keyword">import</span> MenuItem, &#123; MenuItemProps &#125; <span class="keyword">from</span> <span class="string">'./menuItem'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> IMenuComponent = FC&lt;MenuProps&gt; &amp; &#123;</span><br><span class="line">  Item: FC&lt;MenuItemProps&gt;,</span><br><span class="line">  SubMenu: FC&lt;SubMenuProps&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> TransMenu = Menu <span class="keyword">as</span> IMenuComponent</span><br><span class="line"><span class="comment">// å¦‚æœè¿›è¡Œ TransMenu ç±»å‹å®šä¹‰ï¼Œå°±æ— æ³•export TransMenu.Item</span></span><br><span class="line">TransMenu.Item = MenuItem</span><br><span class="line">TransMenu.SubMenu = SubMenu</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TransMenu</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰file-å’Œ-fileåˆ—è¡¨"><a href="#å®šä¹‰file-å’Œ-fileåˆ—è¡¨" class="headerlink" title="å®šä¹‰file å’Œ fileåˆ—è¡¨"></a>å®šä¹‰file å’Œ fileåˆ—è¡¨</h3><p>FileList ä¸ File æ˜¯ tsè‡ªå¸¦çš„ç±»å‹ã€å¾…è¿›ä¸€æ­¥è€ƒè¯ï¼Ÿã€‘ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  FileList å®šä¹‰å¤šä¸ª file</span></span><br><span class="line"> <span class="keyword">const</span> uploadFiles = <span class="function">(<span class="params">files: FileList</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//  File å®šä¹‰å•ä¸ª file</span></span><br><span class="line">  <span class="keyword">const</span> post = <span class="function">(<span class="params">file: File</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="type-çš„ä½¿ç”¨demo"><a href="#type-çš„ä½¿ç”¨demo" class="headerlink" title="type çš„ä½¿ç”¨demo"></a>type çš„ä½¿ç”¨demo</h3><h4 id="ç¤ºä¾‹ä¸€"><a href="#ç¤ºä¾‹ä¸€" class="headerlink" title="ç¤ºä¾‹ä¸€"></a>ç¤ºä¾‹ä¸€</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> DataSourceObject &#123;</span><br><span class="line">  value: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">å®šä¹‰ä¸€ä¸ªç±»å‹ DataSourceType æ¥æ”¶ä¸€ä¸ªæ³›å‹ï¼Œæ­¤æ³›å‹é»˜è®¤å€¼ä¸º&#123;&#125; ï¼Œè¿”å›è¿™ä¸ªæ³›å‹ å’Œ DataSourceObject çš„å¹¶é›† ã€æ˜¯å¦å¹¶é›†å¾…è€ƒè¯ï¼Ÿã€‘ï¼›</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> DataSourceType&lt;T = &#123;&#125;&gt; = T &amp; DataSourceObject</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> AutoCompleteProps <span class="keyword">extends</span> Omit&lt;InputProps, 'onSelect'&gt; &#123;</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ª Promise æˆ– DataSourceType[]ç±»å‹</span></span><br><span class="line">  fetchSuggestions: <span class="function">(<span class="params">str: <span class="built_in">string</span></span>) =&gt;</span> DataSourceType[] | <span class="built_in">Promise</span>&lt;DataSourceType[]&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹äºŒ"><a href="#ç¤ºä¾‹äºŒ" class="headerlink" title="ç¤ºä¾‹äºŒ"></a>ç¤ºä¾‹äºŒ</h4><p>å‚è€ƒã€Š<code>TransMenu.Item = MenuItem</code>ç±»å‹å®šä¹‰ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†è¯» typescript ç¬”è®°</title>
      <link href="/2021/07/20/ts_more/"/>
      <url>/2021/07/20/ts_more/</url>
      
        <content type="html"><![CDATA[<h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><h3 id="æ³›å‹å°±æ˜¯Tè¿™ä¸ªå­—ç¬¦"><a href="#æ³›å‹å°±æ˜¯Tè¿™ä¸ªå­—ç¬¦" class="headerlink" title="æ³›å‹å°±æ˜¯Tè¿™ä¸ªå­—ç¬¦"></a>æ³›å‹å°±æ˜¯Tè¿™ä¸ªå­—ç¬¦</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸‹é¢çš„Tå°±æ˜¯æ³›å‹ï¼Œæˆ–è€…æ³›å‹å˜é‡ï¼Œ<br>æˆ‘ä»¬è¦ä½¿ç”¨ä¸€ä¸ªå˜é‡æ¥å®šä¹‰ç±»å‹ï¼Œå°±è¦æ–°å»ºä¸€ä¸ªæ³›å‹å˜é‡ï¼Œ<br>æ–°å»ºæ³›å‹å˜é‡çš„æ–¹å¼æ˜¯<code>&lt;&gt;</code>;<br>åˆ›å»ºå‡ºæ¥çš„æ³›å‹å˜é‡ï¼Œå°±å¯ä»¥è¢«å½“æˆ ç±»å‹å¦‚number string ä¸€æ ·ä½¿ç”¨äº†ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">echo</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = echo(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></p><p>æ²¡æœ‰ä¸ä½¿ç”¨æ³›å‹å˜é‡å®šä¹‰ç±»å‹æ—¶ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">echo</span>(<span class="params">arg: <span class="built_in">boolean</span></span>): <span class="title">boolean</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> arg</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = echo(<span class="literal">true</span>)</span><br></pre></td></tr></table></figure></p><h4 id="æ³›å‹å°±æ˜¯ä¸€ç§-number-string"><a href="#æ³›å‹å°±æ˜¯ä¸€ç§-number-string" class="headerlink" title="æ³›å‹å°±æ˜¯ä¸€ç§ number string"></a>æ³›å‹å°±æ˜¯ä¸€ç§ number string</h4><p>number string æ˜¯é€šç”¨çš„ ç±»å‹ã€‚<br>å¦‚æœä½ è¦ç”¨è‡ªå®šä¹‰çš„ç±»å‹ï¼Œ<br>é‚£æ˜¯ä¸æ˜¯è¦è‡ªå·±åˆ›å»ºï¼›<br>åˆ›å»ºå¥½äº†æ­¤æ³›å‹ï¼Œå³å¯è·Ÿ number stringä¸€æ ·ä½¿ç”¨ï¼›</p><p>å¦‚æœä½ è¦ç”¨è‡ªå®šä¹‰çš„ç±»å‹ æ³›å‹Tï¼Œ<br>é‚£ä½ æ˜¯ä¸æ˜¯è¦è‡ªå·±åˆ›å»º <code>&lt;T&gt;</code>ï¼›<br>ä»æ­¤å³å¤šäº†ä¸€ç§ç±»å‹ T ï¼Œä¹Ÿæ˜¯æ³›å‹Tï¼Œï¼Œå³å¯è·Ÿ number stringä¸€æ ·ä½¿ç”¨ï¼›</p><p>æ­¤åˆ›å»ºä¹Ÿç±»ä¼¼jsçš„var let constï¼Œå®šä¹‰å¥½åï¼Œå°±å¯ä»¥è¢«åé¢ä½¿ç”¨ï¼›</p><h4 id="ä½¿ç”¨æ³›å‹å‰ï¼Œè‚¯å®šè¦å…ˆåˆ›å»º-å£°æ˜"><a href="#ä½¿ç”¨æ³›å‹å‰ï¼Œè‚¯å®šè¦å…ˆåˆ›å»º-å£°æ˜" class="headerlink" title="ä½¿ç”¨æ³›å‹å‰ï¼Œè‚¯å®šè¦å…ˆåˆ›å»º(å£°æ˜)"></a>ä½¿ç”¨æ³›å‹å‰ï¼Œè‚¯å®šè¦å…ˆåˆ›å»º(å£°æ˜)</h4><p>ä½¿ç”¨æ³›å‹å‰ï¼Œè‚¯å®šè¦å…ˆé€šè¿‡ <code>&lt;&gt;</code> åˆ›å»º(å£°æ˜)ï¼›<br>å°±å¥½æ¯”jsä¸­ï¼Œè¦æƒ³ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œå…ˆè¦ var å£°æ˜(åˆ›é€ )ï¼›<br>å› æ­¤ <code>&lt;&gt;</code> ç›¸å½“äº var ã€‚</p><p>å› æ­¤ä½¿ç”¨æ³›å‹æ—¶ï¼Œåˆ›å»ºæ³›å‹ä¸€å®šæ˜¯åœ¨æœ€å¼€å§‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>&lt;&gt;</code> ä¸€å®šæ˜¯åœ¨å‰çš„ã€‚</p><h4 id="æ³›å‹ä¹‹äº-lt-gt-å¥½æ¯”-js-è‡³äº-var"><a href="#æ³›å‹ä¹‹äº-lt-gt-å¥½æ¯”-js-è‡³äº-var" class="headerlink" title="æ³›å‹ä¹‹äº&lt;&gt;å¥½æ¯” js è‡³äº var"></a>æ³›å‹ä¹‹äº<code>&lt;&gt;</code>å¥½æ¯” js è‡³äº var</h4><p>å‚è€ƒä»¥ä¸Šåˆ†æã€‚</p><h4 id="æ³›å‹å°±æ˜¯æ³›æ³›ç±»å‹ï¼Œæ— æ‰€ä¸èƒ½çš„ç±»å‹"><a href="#æ³›å‹å°±æ˜¯æ³›æ³›ç±»å‹ï¼Œæ— æ‰€ä¸èƒ½çš„ç±»å‹" class="headerlink" title="æ³›å‹å°±æ˜¯æ³›æ³›ç±»å‹ï¼Œæ— æ‰€ä¸èƒ½çš„ç±»å‹"></a>æ³›å‹å°±æ˜¯æ³›æ³›ç±»å‹ï¼Œæ— æ‰€ä¸èƒ½çš„ç±»å‹</h4><p>æ³›å‹æ˜¯ç›¸å¯¹äº number è¿™äº›å…·ä½“å•ä¸€ç±»å‹è€Œè¨€çš„ã€‚<br>æ³›å‹æ˜¯ç™¾å˜ç±»å‹ï¼Œç™¾æ­ç±»å‹ï¼Œ<br>ç›¸å½“äºæ‰‘å…‹ç‰Œä¸­çš„ä¸€ä¸ªå¤§å°ç‹ï¼›<br>ç™¾æ­å„ç§ç‰Œã€‚</p><h3 id="æ³›å‹çš„ä¸¤å±‚æ„æ€"><a href="#æ³›å‹çš„ä¸¤å±‚æ„æ€" class="headerlink" title="æ³›å‹çš„ä¸¤å±‚æ„æ€"></a>æ³›å‹çš„ä¸¤å±‚æ„æ€</h3><p>ç†è§£æ³›å‹ ï¼š<br>ä¸€ æ³›å‹æ˜¯æ³›æ³›ä¹‹æ•°æ®ç±»å‹ï¼Œç™¾æ­æ•°æ®ç±»å‹ï¼Œç›¸å¯¹äºå•ä¸€ç±»å‹å¦‚numberè€Œè¨€ï¼›<br>äºŒ æ³›å‹éœ€è¦é€šè¿‡ <code>&lt;&gt;</code> åˆ›å»ºï¼›</p><p>äº†è§£ä»¥ä¸Šä¹‹åï¼Œæ³›å‹å°±å¾ˆç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç™¾æ­ç±»å‹ï¼Œ<br>ä»»ä½•éœ€è¦å®šä¹‰ç±»å‹çš„åœ°æ–¹ éƒ½å¯ä»¥ä¸ä¹‹é…åˆä½¿ç”¨ï¼›<br>å¥½æ¯”ä»»ä½•å¯ä»¥ç”¨å¦‚numberç±»å‹æ¥å®šä¹‰ç±»å‹çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä¸ä¹‹é…åˆä½¿ç”¨ï¼›<br>æ¯”å¦‚ æ¥å£ï¼Œç±» ç­‰ç­‰</p><h3 id="æ³›å‹çš„ä½¿ç”¨"><a href="#æ³›å‹çš„ä½¿ç”¨" class="headerlink" title="æ³›å‹çš„ä½¿ç”¨"></a>æ³›å‹çš„ä½¿ç”¨</h3><h4 id="å®šä¹‰ç±»ï¼Œè¦å¤šä¸€æ­¥"><a href="#å®šä¹‰ç±»ï¼Œè¦å¤šä¸€æ­¥" class="headerlink" title="å®šä¹‰ç±»ï¼Œè¦å¤šä¸€æ­¥"></a>å®šä¹‰ç±»ï¼Œè¦å¤šä¸€æ­¥</h4><figure class="image-box">                <img src="/image/ts/cla.jpg" alt title class>                <p></p>            </figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> Queue&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> data = [];</span><br><span class="line">  push(item: T) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data.push(item)</span><br><span class="line">  &#125;</span><br><span class="line">  pop(): T &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data.shift()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queue = <span class="keyword">new</span> Queue&lt;<span class="built_in">number</span>&gt;()</span><br><span class="line">queue.push(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(queue.pop().toFixed())</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> queue2 = <span class="keyword">new</span> Queue&lt;<span class="built_in">string</span>&gt;()</span><br><span class="line">queue2.push(<span class="string">'str'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(queue2.pop().length)</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰æ¥å£ï¼Œè¦å¤šä¸€æ­¥"><a href="#å®šä¹‰æ¥å£ï¼Œè¦å¤šä¸€æ­¥" class="headerlink" title="å®šä¹‰æ¥å£ï¼Œè¦å¤šä¸€æ­¥"></a>å®šä¹‰æ¥å£ï¼Œè¦å¤šä¸€æ­¥</h4><figure class="image-box">                <img src="/image/ts/cla1.jpg" alt title class>                <p></p>            </figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> KeyPair&lt;T, U&gt; &#123;</span><br><span class="line">  key: T;</span><br><span class="line">  value: U;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> kp1: KeyPair&lt;<span class="built_in">number</span>, <span class="built_in">string</span>&gt; = &#123; key: <span class="number">123</span>, value: <span class="string">"str"</span> &#125;</span><br><span class="line"><span class="keyword">let</span> kp2: KeyPair&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123; key: <span class="string">'test'</span>, value: <span class="number">123</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arrTwo: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> IPlus&lt;T&gt; &#123;</span><br><span class="line">  (a: T, b: T) : T</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plus</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">connect</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a: IPlus&lt;<span class="built_in">number</span>&gt; = plus</span><br><span class="line"><span class="keyword">const</span> b: IPlus&lt;<span class="built_in">string</span>&gt; = connect</span><br></pre></td></tr></table></figure><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="è”åˆç±»å‹äº§ç”Ÿæ„ä¹‰"><a href="#è”åˆç±»å‹äº§ç”Ÿæ„ä¹‰" class="headerlink" title="è”åˆç±»å‹äº§ç”Ÿæ„ä¹‰"></a>è”åˆç±»å‹äº§ç”Ÿæ„ä¹‰</h3><h4 id="ä½¿ç”¨è”åˆç±»å‹è§£å†³æŠ¥é”™"><a href="#ä½¿ç”¨è”åˆç±»å‹è§£å†³æŠ¥é”™" class="headerlink" title="ä½¿ç”¨è”åˆç±»å‹è§£å†³æŠ¥é”™"></a>ä½¿ç”¨è”åˆç±»å‹è§£å†³æŠ¥é”™</h4><figure class="image-box">                <img src="/image/ts/all0.jpg" alt title class>                <p></p>            </figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> NameResolver = <span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">string</span></span><br><span class="line"><span class="keyword">type</span> NameOrResolver = <span class="built_in">string</span> | NameResolver</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">n: NameOrResolver</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> n === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> n()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ä½¿ç”¨è”åˆç±»å‹æŠ¥é”™"><a href="#ä¸ä½¿ç”¨è”åˆç±»å‹æŠ¥é”™" class="headerlink" title="ä¸ä½¿ç”¨è”åˆç±»å‹æŠ¥é”™"></a>ä¸ä½¿ç”¨è”åˆç±»å‹æŠ¥é”™</h4><figure class="image-box">                <img src="/image/ts/all.jpg" alt title class>                <p></p>            </figure><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="æ–­è¨€çš„ä¼ ç»Ÿä¸å¿«æ·å†™æ³•"><a href="#æ–­è¨€çš„ä¼ ç»Ÿä¸å¿«æ·å†™æ³•" class="headerlink" title="æ–­è¨€çš„ä¼ ç»Ÿä¸å¿«æ·å†™æ³•"></a>æ–­è¨€çš„ä¼ ç»Ÿä¸å¿«æ·å†™æ³•</h3><figure class="image-box">                <img src="/image/ts/quick.jpg" alt title class>                <p></p>            </figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLength</span>(<span class="params">input: <span class="built_in">string</span> | <span class="built_in">number</span></span>) : <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="comment">// const str = input as String</span></span><br><span class="line">  <span class="comment">// if (str.length) &#123;</span></span><br><span class="line">  <span class="comment">//   return str.length</span></span><br><span class="line">  <span class="comment">// &#125; else &#123;</span></span><br><span class="line">  <span class="comment">//   const number = input as Number</span></span><br><span class="line">  <span class="comment">//   return number.toString().length</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">if</span>((&lt;<span class="built_in">string</span>&gt;input).length) &#123;</span><br><span class="line">    <span class="keyword">return</span> (&lt;<span class="built_in">string</span>&gt;input).length</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> input.toString().length</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜æ–‡ä»¶"><a href="#å£°æ˜æ–‡ä»¶" class="headerlink" title="å£°æ˜æ–‡ä»¶"></a>å£°æ˜æ–‡ä»¶</h2><h3 id="tsä¼šé»˜è®¤è¯»å–d-tsæ–‡ä»¶"><a href="#tsä¼šé»˜è®¤è¯»å–d-tsæ–‡ä»¶" class="headerlink" title="tsä¼šé»˜è®¤è¯»å–d.tsæ–‡ä»¶"></a>tsä¼šé»˜è®¤è¯»å–d.tsæ–‡ä»¶</h3><h4 id="é»˜è®¤ä»»æ„ç›®å½•ä¸‹éƒ½ä¼šè¢«è¯»å–"><a href="#é»˜è®¤ä»»æ„ç›®å½•ä¸‹éƒ½ä¼šè¢«è¯»å–" class="headerlink" title="é»˜è®¤ä»»æ„ç›®å½•ä¸‹éƒ½ä¼šè¢«è¯»å–"></a>é»˜è®¤ä»»æ„ç›®å½•ä¸‹éƒ½ä¼šè¢«è¯»å–</h4><p>tsä¼šé»˜è®¤è¯»å–é¡¹ç›®ä¸‹æ‰€æœ‰çš„d.tsæ–‡ä»¶ï¼Œæ— è®ºåœ¨å“ªä¸ªç›®å½•å­˜æ”¾ d.tsæ–‡ä»¶<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jQuery.d.ts</span></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">var</span> jQuery: <span class="function">(<span class="params">selector: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">any</span></span><br></pre></td></tr></table></figure></p><p>ä¸€èˆ¬å®šä¹‰d.tsæ–‡ä»¶åï¼Œé¡¹ç›®å†…æ‰€æœ‰çš„tsæ–‡ä»¶éƒ½å¯ä»¥è·å¾—æ­¤å£°æ˜ï¼Œç”¨äºç¼–è¯‘ï¼Œ<br>ä½†ä¹Ÿæœ‰ä¸è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥åˆ›å»ºtsconfig.jsonï¼Œå‘Šè¯‰tsï¼Œå°†å£°æ˜ç”¨äºé¡¹ç›®ä¸‹æ‰€æœ‰çš„tsæ–‡ä»¶ã€‚</p><h4 id="tsconfig-json-è§£å†³tsæ— æ³•è·å–å£°æ˜"><a href="#tsconfig-json-è§£å†³tsæ— æ³•è·å–å£°æ˜" class="headerlink" title="tsconfig.json è§£å†³tsæ— æ³•è·å–å£°æ˜"></a>tsconfig.json è§£å†³tsæ— æ³•è·å–å£°æ˜</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//tsconfig.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">"include"</span>: [<span class="string">"**/*"</span>] <span class="comment">//å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰tsæ–‡ä»¶ï¼Œtsæ–‡ä»¶å°±ä¼šè·å¾—å£°æ˜ </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="DefinitelyTyped-github"><a href="#DefinitelyTyped-github" class="headerlink" title="DefinitelyTyped github"></a>DefinitelyTyped github</h3><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped" target="_blank" rel="noopener">DefinitelyTyped</a>è¿™ä¸ªåº“æ˜¯é›†ä¸­ç®¡ç† ts å£°æ˜åº“æ–‡ä»¶çš„ï¼Œ<br>ä»»ä½•å¦‚ antDesign è¦åšå£°æ˜æ–‡ä»¶ï¼Œå°±è¦å‘è¿™ä¸ª DefinitelyTyped ä¸­æ PR å®¡æ ¸ã€‚</p><p>åœ¨<a href="https://microsoft.github.io/TypeSearch/" target="_blank" rel="noopener">TypeSearchè¿™é‡Œ</a>å¯ä»¥æŸ¥è¯¢ä½¿ç”¨çš„åº“æ˜¯å¦æœ‰å£°æ˜æ–‡ä»¶ã€‚ä½¿ç”¨å¤–ç½‘è®¿é—®ï¼Œä¸ç„¶æŸ¥è¯¢ä¸åˆ°ã€‚</p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="é…ç½®æ–‡ä»¶è¯´æ˜demoä¸€"><a href="#é…ç½®æ–‡ä»¶è¯´æ˜demoä¸€" class="headerlink" title="é…ç½®æ–‡ä»¶è¯´æ˜demoä¸€"></a>é…ç½®æ–‡ä»¶è¯´æ˜demoä¸€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸‹é¢æ—¶ tsconfig.build.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="string">"outDir"</span>: <span class="string">"dist"</span>, <span class="comment">//è¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="string">"module"</span>: <span class="string">"esnext"</span>,  <span class="comment">//ä½¿ç”¨ es æ¨¡å—æ ‡å‡†ï¼Œå³ import export</span></span><br><span class="line">    <span class="string">"target"</span>: <span class="string">"es5"</span>, <span class="comment">//ç¼–è¯‘æˆes5</span></span><br><span class="line">    <span class="string">"declaration"</span>: <span class="comment">//true, æ˜¯å¦è¦ç”Ÿæˆå£°æ˜æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"jsx"</span>: <span class="string">"react"</span>, <span class="comment">//æ‰“åŒ…ç¼–è¯‘çš„æ˜¯reactï¼Œå¯é€‰å€¼è¿˜æœ‰ react-native ç­‰</span></span><br><span class="line">    <span class="string">"moduleResolution"</span>:<span class="string">"Node"</span>, <span class="comment">//ç¼–è¯‘çš„è·¯å¾„ é€‰æ‹© node çš„ç­–ç•¥ï¼Œ å³å¸¸ç”¨çš„ç›¸å¯¹è·¯å¾„ï¼Œç»å¯¹è·¯å¾„</span></span><br><span class="line">    <span class="string">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>, <span class="comment">//è®¾ç½®ä¸ºtrueæ—¶ï¼Œimportç­–ç•¥ä¸º import React form 'react' è€Œé import * as React form 'react'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"include"</span>: [</span><br><span class="line">    <span class="string">"src"</span>  <span class="comment">//åªç¼–è¯‘ srcä¸‹</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"exclude"</span>: [ <span class="comment">//ä¸åŒ…å«ä»¥ä¸‹æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"src/**/*.test.tsx"</span>,</span><br><span class="line">    <span class="string">"src/**/*.stories.tsx"</span>,</span><br><span class="line">    <span class="string">"src/setupTests.ts"</span>,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxç¬”è®°(æœ‰)</title>
      <link href="/2021/06/22/nginx_base/"/>
      <url>/2021/06/22/nginx_base/</url>
      
        <content type="html"><![CDATA[<p><em>æœ‰å­šç»´å¿ƒï¼Œäº¨ï¼Œè¡Œæœ‰å°šã€‚</em></p><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="äº‘æœåŠ¡å™¨"><a href="#äº‘æœåŠ¡å™¨" class="headerlink" title="äº‘æœåŠ¡å™¨"></a>äº‘æœåŠ¡å™¨</h3><p>é˜¿é‡Œäº‘ä¸æ”¯æŒä½†ç½‘å¡å¤šIPçš„é…ç½®</p><h3 id="é™æ€æœåŠ¡å™¨å’Œåå‘ä»£ç†"><a href="#é™æ€æœåŠ¡å™¨å’Œåå‘ä»£ç†" class="headerlink" title="é™æ€æœåŠ¡å™¨å’Œåå‘ä»£ç†"></a>é™æ€æœåŠ¡å™¨å’Œåå‘ä»£ç†</h3><p>nginxæ˜¯ä¸€æ¬¾é™æ€æœåŠ¡å™¨ï¼Œå¯ä»¥è‡ªè¡Œå¤„ç†å®¢æˆ·ç«¯é™æ€èµ„æºå¦‚jsã€css ç­‰ç­‰çš„è¿”å›ï¼›<br>nginxå¹¶ä¸èƒ½å¤„ç†åŠ¨æ€èµ„æºæ¥å£ï¼Œæ‰€æœ‰çš„åŠ¨æ€æ¥å£ï¼Œå¦‚å•†å“ä»·æ ¼ã€åº“å­˜é‡ ç­‰è¯·æ±‚ éƒ½è½¬å‘ç»™ ä¸šåŠ¡æœåŠ¡å™¨ï¼Œç”±ä¸šåŠ¡æœåŠ¡å™¨ è¿”å›ç»™nginxï¼Œå†ç”±nginxè¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br>è¿™ä¸ªè¿‡ç¨‹ä¸­nginxèµ·åˆ°ä¸€ä¸ªä»£ç†çš„ä½œç”¨ï¼Œä¸Šé¢çš„è¿‡ç¨‹ä¹Ÿæ˜¯ nginx åå‘ä»£ç†çš„è¿‡ç¨‹ï¼›<br>nginx æœ€é‡è¦çš„ä¸¤ä¸ªåŠŸèƒ½å°±æ˜¯ é™æ€æœåŠ¡å™¨ å’Œ åå‘ä»£ç†ï¼›<br>å…¶ä»–çš„å¦‚è´Ÿè½½å‡è¡¡ï¼ˆå½“nginxä½œä¸ºä»£ç†æ—¶ï¼Œå½“æœ‰å¤šå°æœåŠ¡å™¨æ—¶ï¼Œnginxå¦‚ä½•å°†è¯·æ±‚å‡è¡¡å‘ç»™å¤šå°æœåŠ¡å™¨ï¼Œè¾¾åˆ°è´Ÿè½½å‡è¡¡ æ€§èƒ½ä¼˜åŒ–ï¼‰ï¼Œéƒ½æ˜¯å› æ­¤å»¶ä¼¸å‡ºæ¥ã€‚<br><figure class="image-box">                <img src="/image/nginx/busi.png" alt title class>                <p></p>            </figure><br>å¦å¤–å¯å‚è€ƒã€Šä¸€ä¸ªhttpè¯·æ±‚çš„å…¨æµç¨‹ã€‹å›¾ç‰‡çœ‹åå‘ä»£ç†ã€‚</p><p>åå‘ä»£ç†å…¶å®å°±æ˜¯ è½¬å‘ä»£ç†ã€‚</p><h3 id="nginxç‰¹ç‚¹"><a href="#nginxç‰¹ç‚¹" class="headerlink" title="nginxç‰¹ç‚¹"></a>nginxç‰¹ç‚¹</h3><h4 id="nginx-ç‰¹ç‚¹ä»‹ç»"><a href="#nginx-ç‰¹ç‚¹ä»‹ç»" class="headerlink" title="nginx ç‰¹ç‚¹ä»‹ç»"></a>nginx ç‰¹ç‚¹ä»‹ç»</h4><ul><li><p>é«˜å¹¶å‘ã€é«˜æ€§èƒ½<br>nginxä¸º é«˜å¹¶å‘è€Œç”Ÿï¼›<br>é€šè¿‡ å¢åŠ è¿›ç¨‹ æ¥é€‚åº”é«˜å¹¶å‘ï¼›<br>é€šè¿‡åˆç†è®¾è®¡ è¾¾åˆ°é«˜æ€§èƒ½</p></li><li><p>æ‰©å±•æ€§å¥½</p></li><li><p>å¼‚æ­¥éé˜»å¡çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹</p></li></ul><h4 id="nginxç›¸æ¯”apacheçš„ä¼˜åŠ¿"><a href="#nginxç›¸æ¯”apacheçš„ä¼˜åŠ¿" class="headerlink" title="nginxç›¸æ¯”apacheçš„ä¼˜åŠ¿"></a>nginxç›¸æ¯”apacheçš„ä¼˜åŠ¿</h4><p>apacheæ˜¯ä¸Šä¸€ä»£æœåŠ¡å™¨(å½“æ—¶çš„cpuä¹Ÿæ˜¯å•æ ¸çš„ï¼Œapacheä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªå•æ ¸cpuè®¾è®¡çš„,è¿™ä¸ªç†ç”±åªå½“çœ‹çœ‹)ï¼Œäº§ç”Ÿæ¯”è¾ƒæ—©ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¸€ä¸ªè¿›ç¨‹å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼›</li><li>é˜»å¡å¼çš„</li></ul><p>nginxæ˜¯æœ€æ–°ä¸€ä»£æœåŠ¡å™¨(æ ¹æ®å½“ä»£å¤šæ ¸cpuè®¾è®¡çš„,è¿™ä¸ªç†ç”±åªå½“çœ‹çœ‹)ï¼Œç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>ä¸€ä¸ªè¿›ç¨‹å¤„ç†å¤šä¸ªè¯·æ±‚</li><li>éé˜»å¡å¼çš„</li></ul><p>å› ä¸ºä»¥ä¸Šä¸¤ä¸ªç‰¹ç‚¹ï¼Œnginxä¹Ÿå…·æœ‰äº†é«˜å¹¶å‘èƒ½åŠ›</p><h3 id="nginxäº§ç”Ÿå’Œæµè¡Œçš„åŸå› "><a href="#nginxäº§ç”Ÿå’Œæµè¡Œçš„åŸå› " class="headerlink" title="nginxäº§ç”Ÿå’Œæµè¡Œçš„åŸå› "></a>nginxäº§ç”Ÿå’Œæµè¡Œçš„åŸå› </h3><p>äº’è”ç½‘å¿«é€Ÿå¢é•¿ï¼Œé«˜å¹¶å‘éœ€æ±‚å¤§ï¼Œapacheå¤„ç†è¯·æ±‚çš„ä½æ•ˆæ€§ï¼Œå¯¼è‡´äº†nginx è¿™ç§èƒ½é«˜å¹¶å‘æœåŠ¡å™¨çš„äº§ç”Ÿã€‚</p><h3 id="ä¸€ä¸ªhttpè¯·æ±‚-ä¸-nginx"><a href="#ä¸€ä¸ªhttpè¯·æ±‚-ä¸-nginx" class="headerlink" title="ä¸€ä¸ªhttpè¯·æ±‚ ä¸ nginx"></a>ä¸€ä¸ªhttpè¯·æ±‚ ä¸ nginx</h3><h4 id="ä¸€ä¸ªhttpè¯·æ±‚çš„å…¨æµç¨‹"><a href="#ä¸€ä¸ªhttpè¯·æ±‚çš„å…¨æµç¨‹" class="headerlink" title="ä¸€ä¸ªhttpè¯·æ±‚çš„å…¨æµç¨‹"></a>ä¸€ä¸ªhttpè¯·æ±‚çš„å…¨æµç¨‹</h4><p>å¦‚ä¸‹ï¼š</p><ul><li>è¯·æ±‚å‘é€åˆ°nginxï¼Œnginxå“åº”é™æ€èµ„æºï¼›</li><li>åŠ¨æ€è¯·æ±‚ï¼Œnginxä½œä¸ºåå‘ä»£ç†ï¼šå°†è¯·æ±‚å‘é€ç»™ åº”ç”¨æœåŠ¡å™¨ï¼ˆå°±æ˜¯åç«¯äººå‘˜å†™çš„æœåŠ¡å™¨ï¼‰ï¼Œå†æœ‰åº”ç”¨æœåŠ¡å™¨å“åº”nginxï¼Œç”±nginxè¿”å›å®¢æˆ·ç«¯ã€‚</li><li>åº”ç”¨æœåŠ¡å™¨ æ¥å—è¯·æ±‚åï¼Œè¯·æ±‚DB æ•°æ®åº“æœåŠ¡å™¨ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œç”±æ•°æ®åº“æœåŠ¡å™¨å“åº”æœ€æ–°æ•°æ®ç»™åº”ç”¨æœåŠ¡å™¨ã€‚<figure class="image-box">                <img src="/image/nginx/http.jpg" alt title class>                <p></p>            </figure></li></ul><h4 id="nginxå¤„ç†è¯·æ±‚è¿‡ç¨‹"><a href="#nginxå¤„ç†è¯·æ±‚è¿‡ç¨‹" class="headerlink" title="nginxå¤„ç†è¯·æ±‚è¿‡ç¨‹"></a>nginxå¤„ç†è¯·æ±‚è¿‡ç¨‹</h4><p>å¯¹äºä¸‹å›¾è¯´æ˜ï¼š</p><ul><li>é™æ€æœåŠ¡å™¨ï¼šå…¬å¸é€šè¿‡åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªèµ„æºç›®å½•åº“ï¼Œç”¨äºè¿”å›é™æ€èµ„æº</li><li>å¤§ä¸­å‹å…¬å¸æ‰ä¼šå°† åº”ç”¨æœåŠ¡å’Œæ•°æ®åº“æœåŠ¡å™¨è¿›è¡Œåˆ†ç¦»ï¼Œä¸€èˆ¬åº”ç”¨é€šå¸¸å°†åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®åº“æœåŠ¡å™¨æ”¾åœ¨åŒä¸€ä¸ªæœºå™¨ä¸Šï¼Œä¸ç”¨åšæ•°æ®åº“ä¸åº”ç”¨æœåŠ¡å™¨çš„åˆ†ç¦»ï¼›</li><li><p>é™æ€èµ„æºå“åº”å¾ˆå¿«ï¼Œé€šå¸¸ä¸€æ®µæ—¶é—´å†…èƒ½å¤„ç†5ä¸‡ä¸ªè¯·æ±‚ï¼Œä½†ä¸€ä¸ªåŠ¨æ€è¯·æ±‚å› ä¸ºè¦èµ°åå‘ä»£ç† åˆ° åº”ç”¨æœåŠ¡å™¨ åˆ°æ•°æ®åº“æœåŠ¡å™¨ æ‰€ä»¥å¯èƒ½åªèƒ½å¤„ç†5000æ¡æ•°æ®ï¼Œå› æ­¤å°±æœ‰äº†æ€§èƒ½ä¼˜åŒ–çš„éœ€æ±‚ï¼š</p><ul><li>æ¯”å¦‚ åå‘ä»£ç†çš„æ—¶å€™ï¼Œåœ¨nginxè¿™é‡Œåšç¼“å­˜å¤„ç†ï¼Œç›¸åŒçš„è¯·æ±‚ç›´æ¥ç¼“å­˜è¿”å›ï¼Œä¸éœ€è¦å¾€ä¸‹è¯·æ±‚ï¼Œè¾¾åˆ°åŠ é€Ÿï¼›</li><li>å½“å…¬å¸æœ‰å¤šä¸ªåº”ç”¨æœåŠ¡å™¨æ—¶ï¼Œnginxä¸è¦å°†æ‰€æœ‰è¯·æ±‚å‘é€åˆ°ä¸€å°æœºå™¨ï¼Œé€šè¿‡ç®—æ³•å‡è¡¡å‘é€ï¼Œè¾¾åˆ°è´Ÿè½½å‡è¡¡ï¼›</li></ul></li><li><p>æ•°æ®åº“æ—è¾¹çš„ç¼“å­˜æœåŠ¡ï¼Œä¹Ÿæ˜¯ç”¨äºåŠ é€Ÿçš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä¸éƒ¨ç½²ã€‚</p></li></ul><figure class="image-box">                <img src="/image/nginx/http1.jpg" alt title class>                <p></p>            </figure><h3 id="nginxçš„å˜é‡"><a href="#nginxçš„å˜é‡" class="headerlink" title="nginxçš„å˜é‡"></a>nginxçš„å˜é‡</h3><h4 id="å˜é‡åˆ†ç±»"><a href="#å˜é‡åˆ†ç±»" class="headerlink" title="å˜é‡åˆ†ç±»"></a>å˜é‡åˆ†ç±»</h4><p>nginxæ˜¯ç”¨æ¥å¤„ç†è¯·æ±‚çš„æœåŠ¡å™¨ï¼Œå› æ­¤å®ƒçš„å˜é‡ä¸»è¦æ˜¯å›´ç»• è¯·æ±‚å¤„ç†è€Œåˆ†ç±»çš„ã€‚<br>å¦‚ä¸‹ï¼Œæœ‰5ç§åˆ†ç±»ï¼š<br><figure class="image-box">                <img src="/image/nginx/var1.png" alt title class>                <p></p>            </figure></p><p>ä¸ºä»€ä¹ˆæœ‰tcpé“¾æ¥åˆ†ç±»å˜é‡ï¼š<br>å…¶ä¸­ http å»ºç«‹åœ¨tcp\ipåè®®ä¸Šçš„ï¼Œå»ºç«‹httpé“¾æ¥ï¼Œè¦ç»è¿‡tcpé“¾æ¥ï¼Œåœ¨æ­¤ä¹‹ä¸Šè¿›è¡Œhttpæ•°æ®ä¼ è¾“ã€‚</p><p>ç†è§£ nginxå†…éƒ¨å˜é‡ï¼š<br>nginxè‡ªèº«è¿è¡Œæ—¶ï¼Œä¹Ÿä¼šäº§ç”Ÿç›¸å…³å˜é‡ã€‚</p><h4 id="tcpè¿æ¥ç›¸å…³å˜é‡"><a href="#tcpè¿æ¥ç›¸å…³å˜é‡" class="headerlink" title="tcpè¿æ¥ç›¸å…³å˜é‡"></a>tcpè¿æ¥ç›¸å…³å˜é‡</h4><p>remote_addr å®¢æˆ·ç«¯IPåœ°å€<br>remote_port å®¢æˆ·ç«¯ç«¯å£<br>server_addr æœåŠ¡ç«¯IPåœ°å€<br>server_port æœåŠ¡ç«¯ç«¯å£<br>server_protocol æœåŠ¡ç«¯åè®® æ¯”å¦‚http1.0 http1.1</p><figure class="image-box">                <img src="/image/nginx/var2.png" alt title class>                <p></p>            </figure><h4 id="httpè¯·æ±‚è¿‡ç¨‹ç›¸å…³å˜é‡"><a href="#httpè¯·æ±‚è¿‡ç¨‹ç›¸å…³å˜é‡" class="headerlink" title="httpè¯·æ±‚è¿‡ç¨‹ç›¸å…³å˜é‡"></a>httpè¯·æ±‚è¿‡ç¨‹ç›¸å…³å˜é‡</h4><p>uri è¯·æ±‚çš„urlï¼Œä¸åŒ…å«å‚æ•°<br>request_uri è¯·æ±‚çš„urlï¼ŒåŒ…å«å‚æ•°<br>scheme åè®®åï¼Œhttpæˆ–https<br>request_method è¯·æ±‚æ–¹æ³•<br>request_length å…¨éƒ¨è¯·æ±‚çš„é•¿åº¦ï¼ŒåŒ…æ‹¬è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ï¼›<br>args å…¨éƒ¨å‚æ•°å­—ç¬¦ä¸²<br>arg_å‚æ•°å è·å–å…·ä½“å‚æ•°åçš„å‚æ•°å€¼<br>is_args åˆ¤æ–­urlä¸­æ˜¯å¦æœ‰å‚æ•°ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œåˆ™è¿”å›?ï¼Œå¦åˆ™è¿”å›ç©ºï¼›<br>query_string ä¸ argsç›¸åŒï¼ŒäºŒè€…å¯äº’æ¢ä½¿ç”¨<br>remote_user ç”±http basic authenticationåè®®ä¼ å…¥çš„ç”¨æˆ·å<br>host å…ˆçœ‹è¯·æ±‚è¡Œï¼Œå†çœ‹è¯·æ±‚å¤´ï¼Œæœ€åæ‰¾server_name<br>http_user_agent ç”¨æˆ·æµè§ˆå™¨<br>http_referer ä»é‚£äº›é“¾æ¥è¿‡æ¥<br>http_via ç»è¿‡ä¸€å±‚ä»£ç†æœåŠ¡å™¨ï¼Œæ·»åŠ å¯¹åº”ä»£ç†æœåŠ¡å™¨ä¿¡æ¯<br>http_x_forwarded_for è·å–ç”¨æˆ·çœŸå®IP<br>http_cookie ç”¨æˆ·cookie</p><h4 id="å¤„ç†httpè¯·æ±‚ç›¸å…³å˜é‡"><a href="#å¤„ç†httpè¯·æ±‚ç›¸å…³å˜é‡" class="headerlink" title="å¤„ç†httpè¯·æ±‚ç›¸å…³å˜é‡"></a>å¤„ç†httpè¯·æ±‚ç›¸å…³å˜é‡</h4><p>request_time å¤„ç†è¯·æ±‚å·²è€—è´¹çš„æ—¶é—´<br>request_completion è¯·æ±‚å¤„ç†å®Œæˆè¿”å›okï¼Œå¦åˆ™è¿”å›ç©ºï¼›<br>server_name åŒ¹é…ä¸Šè¯·æ±‚çš„server_nameå€¼<br>https è‹¥å¼€å¯https,åˆ™è¿”å›onï¼Œå¦åˆ™è¿”å›ç©ºï¼›<br>request_filename ç£ç›˜æ–‡ä»¶ç³»ç»Ÿå¾…è®¿é—®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„<br>document_root ç”±uriå’Œroot/aliasè§„åˆ™ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„<br>realpath_root å°†document_rootä¸­çš„è½¯é“¾æ¥æ¢æˆçœŸå®è·¯å¾„<br>limit_rate è¿”å›å“åº”æ—¶çš„é€Ÿåº¦ä¸Šé™å€¼</p><h2 id="ä½¿ç”¨ä¿¡å·é‡ç®¡ç†masterå’Œworker"><a href="#ä½¿ç”¨ä¿¡å·é‡ç®¡ç†masterå’Œworker" class="headerlink" title="ä½¿ç”¨ä¿¡å·é‡ç®¡ç†masterå’Œworker"></a>ä½¿ç”¨ä¿¡å·é‡ç®¡ç†masterå’Œworker</h2><h3 id="linuxä¸­çš„å¸¸ç”¨ä¿¡å·é‡"><a href="#linuxä¸­çš„å¸¸ç”¨ä¿¡å·é‡" class="headerlink" title="linuxä¸­çš„å¸¸ç”¨ä¿¡å·é‡"></a>linuxä¸­çš„å¸¸ç”¨ä¿¡å·é‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SIGHLD                  kill -17 pid   å­è¿›ç¨‹downæ‰åï¼Œå‘å…¶çˆ¶è¿›ç¨‹å‘é€çš„ä¿¡å·</span><br><span class="line">SIGQUIT                 kill -3 pid    ä¹Ÿæ˜¯å…³é—­è¿›ç¨‹</span><br><span class="line">SIGTERM                 kill -15 pid  kill -15 å’Œ kill æ˜¯ä¸€æ ·çš„ï¼Œkill é»˜è®¤æ˜¯15ï¼Œå…³é—­è¿›ç¨‹ï¼Œç­‰ç­‰è¿›ç¨‹å½“æ¬¡å¤„ç†å®Œæ•°æ®åå…³é—­</span><br><span class="line">SIGKILL                 kill -9 pid   ä¸ç­‰å¾…è¿›ç¨‹å¤„ç†å®Œæ•°æ®ï¼Œç«‹å³å…³é—­</span><br><span class="line">SIGHUP                  kill -1 pid  è®©ç¨‹åºé‡æ–°è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">SIGUSER1                kill -10 pid  ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·é‡</span><br><span class="line">SIGUSER2                kill -12 pid  ç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·é‡</span><br><span class="line">SIGWINCH                kill -28 pid  å¤„ç†å°±çš„è¿›ç¨‹å…³é—­</span><br></pre></td></tr></table></figure><h3 id="ä¿¡å·é‡çš„ä¸¤ç§ç”¨æ³•"><a href="#ä¿¡å·é‡çš„ä¸¤ç§ç”¨æ³•" class="headerlink" title="ä¿¡å·é‡çš„ä¸¤ç§ç”¨æ³•"></a>ä¿¡å·é‡çš„ä¸¤ç§ç”¨æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å¦‚ä¸Šï¼Œ</span><br><span class="line">kill -9 pidxxx </span><br><span class="line">ä¹Ÿå¯ä»¥ç”¨</span><br><span class="line">kill -s SIGKILL pidxxx  #s signçš„ç¼©å†™</span><br></pre></td></tr></table></figure><h3 id="nginxçš„-ä¿¡å·é‡-ç®¡ç†"><a href="#nginxçš„-ä¿¡å·é‡-ç®¡ç†" class="headerlink" title="nginxçš„ ä¿¡å·é‡ ç®¡ç†"></a>nginxçš„ ä¿¡å·é‡ ç®¡ç†</h3><h4 id="masterä¸»è¿›ç¨‹-workerå­è¿›ç¨‹"><a href="#masterä¸»è¿›ç¨‹-workerå­è¿›ç¨‹" class="headerlink" title="masterä¸»è¿›ç¨‹ workerå­è¿›ç¨‹"></a>masterä¸»è¿›ç¨‹ workerå­è¿›ç¨‹</h4><p>nginxå°±æ˜¯æœ‰ä¸€ä¸ªmaster ä¸»è¿›ç¨‹ï¼Œå’Œè‹¥å¹²ä¸ª workerå­è¿›ç¨‹æ„æˆçš„ã€‚</p><h4 id="ä¿¡å·é‡-ç®¡ç†nginx"><a href="#ä¿¡å·é‡-ç®¡ç†nginx" class="headerlink" title="ä¿¡å·é‡ ç®¡ç†nginx"></a>ä¿¡å·é‡ ç®¡ç†nginx</h4><p>å¯ä»¥ç”¨ä¿¡å·é‡ ç®¡ç† masterè¿›ç¨‹ï¼›<br>workerè¿›ç¨‹ä¸€èˆ¬æ˜¯masterè¿›ç¨‹æ§åˆ¶çš„ï¼›<br>ä¸€èˆ¬ä½¿ç”¨ä¿¡å·é‡ç®¡ç†masterè¿›ç¨‹ï¼Œè¿›è€Œè®©masterè¿›ç¨‹ç®¡ç†å­è¿›ç¨‹ï¼›<br>ä¹Ÿå¯ä½¿ç”¨ä¿¡å·é‡ç›´æ¥ç®¡ç†workerå­è¿›ç¨‹(è™½ç„¶ä¸æ¨è)ï¼Œ<br>ä¸ºä»€ä¹ˆä¸æ¨èå‘¢ï¼Œå› ä¸ºä¸€æ—¦ç›´æ¥å…³é—­å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¼šè®©masterè¿›ç¨‹å‘é€ä¿¡å·ï¼Œmasterç„¶é‡æ–°å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><h3 id="å‘½ä»¤è¡Œæœ¬è´¨ä¹Ÿæ˜¯ä¿¡å·é‡-ç®¡ç†"><a href="#å‘½ä»¤è¡Œæœ¬è´¨ä¹Ÿæ˜¯ä¿¡å·é‡-ç®¡ç†" class="headerlink" title="å‘½ä»¤è¡Œæœ¬è´¨ä¹Ÿæ˜¯ä¿¡å·é‡ ç®¡ç†"></a>å‘½ä»¤è¡Œæœ¬è´¨ä¹Ÿæ˜¯ä¿¡å·é‡ ç®¡ç†</h3><p>å‘½ä»¤è¡Œå¯ä»¥æ“ä½œä¸‹é¢æ“ä½œï¼š</p><p>reload åº•å±‚åˆ©ç”¨çš„æ˜¯HUPä¿¡å·é‡<br>reload åº•å±‚åˆ©ç”¨çš„æ˜¯USER1ä¿¡å·é‡<br>stop åº•å±‚åˆ©ç”¨çš„æ˜¯TERMä¿¡å·é‡<br>quit åº•å±‚åˆ©ç”¨çš„æ˜¯QUITä¿¡å·é‡</p><h3 id="è®¤è¯†-nginxè¿›ç¨‹"><a href="#è®¤è¯†-nginxè¿›ç¨‹" class="headerlink" title="è®¤è¯† nginxè¿›ç¨‹"></a>è®¤è¯† nginxè¿›ç¨‹</h3><p>nginxçš„é…ç½®æ–‡ä»¶<br>worker_processes auto; //è‡ªåŠ¨è¯†åˆ«ç”µè„‘æœ‰å‡ ä¸ªcpuï¼Œä¸‹é¢çš„ä¾‹å­è¯´æ˜è¯†åˆ«å‡º4ä¸ªè¿›ç¨‹<br><figure class="image-box">                <img src="/image/nginx/pid.png" alt title class>                <p></p>            </figure></p><h3 id="nginx-é…ç½®æ–‡ä»¶é‡è½½è¿‡ç¨‹ä¸åŸç†"><a href="#nginx-é…ç½®æ–‡ä»¶é‡è½½è¿‡ç¨‹ä¸åŸç†" class="headerlink" title="nginx é…ç½®æ–‡ä»¶é‡è½½è¿‡ç¨‹ä¸åŸç†"></a>nginx é…ç½®æ–‡ä»¶é‡è½½è¿‡ç¨‹ä¸åŸç†</h3><h4 id="è¿‡ç¨‹åˆ†æ"><a href="#è¿‡ç¨‹åˆ†æ" class="headerlink" title="è¿‡ç¨‹åˆ†æ"></a>è¿‡ç¨‹åˆ†æ</h4><ul><li>é…ç½®æ–‡ä»¶æ›´æ”¹ï¼Œ</li><li>masterä¸»è¿›ç¨‹è¯»å–é…ç½®æ–‡ä»¶ï¼Œæ£€æµ‹æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œè‹¥æœ‰ï¼Œåˆ™ä¸æ‰§è¡Œé‡è½½ï¼Œ</li><li>è‹¥æ— è¯­æ³•é”™è¯¯ï¼Œmasteråˆ™ç«‹å³ç”Ÿæˆæ–°é…ç½®çš„å­è¿›ç¨‹ï¼ŒåŒæ—¶é€šçŸ¥è€çš„å­è¿›ç¨‹æ‰§è¡Œå®Œåå…³é—­ã€‚</li><li>æ­¤æ—¶å°±å­˜åœ¨æ–°çš„å’Œè€çš„å­è¿›ç¨‹åŒæ—¶å­˜åœ¨çš„æƒ…å†µã€‚</li><li>ä»€ä¹ˆæ˜¯è€çš„å­è¿›ç¨‹æ‰§è¡Œå®Œä¹‹åå®Œæ¯•ï¼Œ</li><li>æ¯”å¦‚ï¼Œå®¢æˆ·åœ¨æµè§ˆç½‘é¡µçš„æ—¶å€™ï¼Œä¸è€çš„å­è¿›ç¨‹å»ºç«‹äº†è¿æ¥ï¼Œä¸€ç›´ç­‰å®¢æˆ·å…³é—­é¡µé¢å…³é—­è¿æ¥ï¼Œ<br>è€çš„å­è¿›ç¨‹æ‰é€€å‡ºã€‚<figure class="image-box">                <img src="/image/nginx/reload.png" alt title class>                <p></p>            </figure></li></ul><h4 id="ä¼šåŒæ—¶å­˜åœ¨æ–°æ—§ä¸¤ç§è¿›ç¨‹"><a href="#ä¼šåŒæ—¶å­˜åœ¨æ–°æ—§ä¸¤ç§è¿›ç¨‹" class="headerlink" title="ä¼šåŒæ—¶å­˜åœ¨æ–°æ—§ä¸¤ç§è¿›ç¨‹"></a>ä¼šåŒæ—¶å­˜åœ¨æ–°æ—§ä¸¤ç§è¿›ç¨‹</h4><p>å¦‚ä¸Šï¼Œæ­¤æ—¶è¿›ç¨‹æ•°æ˜¯ä¸¤å€ã€‚</p><p>nginxçƒ­éƒ¨ç½²å‡çº§ çš„è¿‡ç¨‹<br><figure class="image-box">                <img src="/image/nginx/red.png" alt title class>                <p></p>            </figure></p><h2 id="nginx-å®‰è£…ã€ä½¿ç”¨"><a href="#nginx-å®‰è£…ã€ä½¿ç”¨" class="headerlink" title="nginx å®‰è£…ã€ä½¿ç”¨"></a>nginx å®‰è£…ã€ä½¿ç”¨</h2><h3 id="é…ç½®æ–‡ä»¶ç»“æ„"><a href="#é…ç½®æ–‡ä»¶ç»“æ„" class="headerlink" title="é…ç½®æ–‡ä»¶ç»“æ„"></a>é…ç½®æ–‡ä»¶ç»“æ„</h3><figure class="image-box">                <img src="/image/nginx/in.png" alt title class>                <p></p>            </figure><h3 id="nginxç¯å¢ƒå‡†å¤‡"><a href="#nginxç¯å¢ƒå‡†å¤‡" class="headerlink" title="nginxç¯å¢ƒå‡†å¤‡"></a>nginxç¯å¢ƒå‡†å¤‡</h3><p>ç¡®è®¤å…³é—­iptablesè§„åˆ™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -F #å…³é—­è§„åˆ™</span><br><span class="line">iptables -t nat -L #æŸ¥çœ‹è§„åˆ™</span><br></pre></td></tr></table></figure></p><p>ç¡®è®¤åœç”¨selinux<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc tcc-c++ autoconf pcre pcre-devel make automake</span><br><span class="line">yum -y install wget httpd-tools vim</span><br></pre></td></tr></table></figure></p><h3 id="nginxä¸¤ç§å®‰è£…æ–¹å¼"><a href="#nginxä¸¤ç§å®‰è£…æ–¹å¼" class="headerlink" title="nginxä¸¤ç§å®‰è£…æ–¹å¼"></a>nginxä¸¤ç§å®‰è£…æ–¹å¼</h3><h4 id="æŒ‡å®šæºå’Œç‰ˆæœ¬-å¼ºå¤§"><a href="#æŒ‡å®šæºå’Œç‰ˆæœ¬-å¼ºå¤§" class="headerlink" title="æŒ‡å®šæºå’Œç‰ˆæœ¬(å¼ºå¤§)"></a>æŒ‡å®šæºå’Œç‰ˆæœ¬(å¼ºå¤§)</h4><p>è¿™ç§æ–¹æ³•éœ€è¦è‡ªå·±é…ç½®ä¸‹ï¼Œå¥½å¤„æ˜¯ï¼Œ<br>å¯ä»¥è‡ªå·±å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„nginxï¼Œ<br>ä¸ç”¨è‡ªå·±ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„nginxåŒ…ï¼Œæ‹·è´åˆ°centosä¸­å®‰è£…ã€‚<br>è¿›å…¥<a href="http://nginx.org/en/download.html" target="_blank" rel="noopener">å®˜ç½‘</a>;<br><figure class="image-box">                <img src="/image/nginx/ist1.png" alt title class>                <p></p>            </figure><br>è¿™é‡Œæœ‰å„ä¸ªç¯å¢ƒå®‰è£…ä»‹ç»ï¼š<br><figure class="image-box">                <img src="/image/nginx/ist2.png" alt title class>                <p></p>            </figure><br>æ ¹æ®è¿™ä¸ªæ­¥éª¤ï¼Œæ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦gpgkeyï¼Œè¿™ä¸ªåœ°æ–¹è®¾ç½®ä¸º0ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# cat /etc/yum.repos.d/nginx.repo</span><br><span class="line"></span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">[root@localhost yum.repos.d]#</span><br></pre></td></tr></table></figure></p><p> æ‰§è¡Œå‘½ä»¤ <code>yum list | grep nginx</code> æŸ¥çœ‹yum å¯å®‰è£…çš„ nginxæºï¼Œ<br> å›¾ç‰‡æ˜¾ç¤ºï¼Œnginxå®‰è£…çš„æºå°±æ˜¯ æˆ‘ä»¬åˆšæ‰é…ç½®çš„ nginx.repo ã€‚<br> å¦‚æœæˆ‘ä»¬ç”¨ epel-release è¿™ä¸ªæºæ¥å®‰è£…ï¼Œ é‚£ä¹ˆ ä¸‹å›¾ä¸­çš„æº å°±ä¼šæ˜¾ç¤º epelã€‚<br><figure class="image-box">                <img src="/image/nginx/ist3.png" alt title class>                <p></p>            </figure></p><h4 id="epel-release-ç®€ä¾¿"><a href="#epel-release-ç®€ä¾¿" class="headerlink" title="epel-release(ç®€ä¾¿)"></a>epel-release(ç®€ä¾¿)</h4><p>å‚è€ƒã€Šlinuxç¬”è®°(å) - å®‰è£…å’Œä½¿ç”¨nginxã€‹</p><h3 id="é…ç½®æ–‡ä»¶ç›®å½•ä»‹ç»"><a href="#é…ç½®æ–‡ä»¶ç›®å½•ä»‹ç»" class="headerlink" title="é…ç½®æ–‡ä»¶ç›®å½•ä»‹ç»"></a>é…ç½®æ–‡ä»¶ç›®å½•ä»‹ç»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# rpm -ql nginx</span><br><span class="line">/etc/nginx/nginx.conf  #ä¸»é…ç½®æ–‡ä»¶</span><br><span class="line">/etc/nginx/conf.d/default.conf   #nginxå¯åŠ¨çš„serveré»˜è®¤è¯»å–default.confæ–‡ä»¶,æ­¤æ–‡ä»¶ä¸€èˆ¬è¢«ä¸»é…ç½®æ–‡ä»¶ include</span><br><span class="line">/etc/nginx/fastcgi_params  fastcgié…ç½®ï¼Œ#ä¸phpé…åˆæ—¶éœ€è¦ç”¨åˆ°</span><br><span class="line">/etc/nginx/mime.types  #è®¾ç½®httpåè®®çš„content-typeä¸æ‰©å±•åå¯¹åº”å…³ç³»</span><br><span class="line">/etc/nginx/scgi_params</span><br><span class="line">/etc/nginx/uwsgi_params</span><br><span class="line">/usr/lib/systemd/system/nginx-debug.service  #å®ˆæŠ¤è¿›ç¨‹çš„é…ç½®</span><br><span class="line">/usr/lib/systemd/system/nginx.service  #å®ˆæŠ¤è¿›ç¨‹çš„é…ç½®</span><br><span class="line">/usr/sbin/nginx  #ç»ˆç«¯å‘½ä»¤</span><br><span class="line">/usr/sbin/nginx-debug  #ç»ˆç«¯è°ƒè¯•å‘½ä»¤</span><br></pre></td></tr></table></figure><h3 id="è¯­æ³•ä»‹ç»"><a href="#è¯­æ³•ä»‹ç»" class="headerlink" title="è¯­æ³•ä»‹ç»"></a>è¯­æ³•ä»‹ç»</h3><h4 id="é…ç½®ä»£ç ç»“æ„"><a href="#é…ç½®ä»£ç ç»“æ„" class="headerlink" title="é…ç½®ä»£ç ç»“æ„"></a>é…ç½®ä»£ç ç»“æ„</h4><figure class="image-box">                <img src="/image/nginx/gram.png" alt title class>                <p></p>            </figure><h4 id="å®Œæ•´é…ç½®"><a href="#å®Œæ•´é…ç½®" class="headerlink" title="å®Œæ•´é…ç½®"></a>å®Œæ•´é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost yum.repos.d]# cat /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  auto;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log notice;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;   #é…ç½® content-type</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf; #è¯»å–/etc/nginx/conf.d/default.conf</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@localhost yum.repos.d]# cat /etc/nginx/conf.d/default.conf</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;   åœ¨default.conf å®šä¹‰ 80ç«¯å£</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504 404  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@localhost yum.repos.d]#</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œserverç›¸å…³çš„ï¼Œéƒ½è¢«å®šä¹‰åˆ°äº†  <code>/etc/nginx/conf.d/default.conf</code> ä¸­ï¼›<br>é…ç½®éserverçš„æ‰åœ¨ <code>/etc/nginx/nginx.conf</code>ï¼Œ<br>ç„¶åå…¶ä¸­å†å¼•å…¥ <code>/etc/nginx/conf.d/default.conf</code></p><h4 id="server-includeçš„å¥½å¤„"><a href="#server-includeçš„å¥½å¤„" class="headerlink" title="server includeçš„å¥½å¤„"></a>server includeçš„å¥½å¤„</h4><p>è¿™æ ·åšæœ‰ä¸ªå¥½å¤„ï¼Œæ¯æ¬¡ä¸»é…ç½®æ–‡ä»¶ä¸ç”¨åŠ¨ï¼Œ<br>è‹¥æƒ³å¢åŠ serveré…ç½®ï¼Œåªéœ€åœ¨ç›®å½•<code>/etc/nginx/conf.d/*.conf</code>ä¸‹ï¼Œå¢åŠ confæ–‡ä»¶å³å¯ï¼Œ<br>ä¸»é…ç½®æ–‡ä»¶é»˜è®¤å¼•å…¥ã€‚</p><h2 id="curl-å‘½ä»¤"><a href="#curl-å‘½ä»¤" class="headerlink" title="curl å‘½ä»¤"></a>curl å‘½ä»¤</h2><h3 id="curl-v-url"><a href="#curl-v-url" class="headerlink" title="curl -v url"></a>curl -v url</h3><p>-v å¯ä»¥ä¸‰ä¸ªä¿¡æ¯ï¼šæ˜¾ç¤º è¯·æ±‚ã€ responseä¿¡æ¯ ï¼›<br>è¯·æ±‚å¤´ ä»¥ &gt; ç¼–å·æ ‡è¯†<br>å“åº”å¤´ ä»¥ &lt; ç¼–å·æ ‡è¯†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">$ curl -v http://192.168.228.131/test</span><br><span class="line">*   Trying 192.168.228.131:80...</span><br><span class="line">* Connected to 192.168.228.131 (192.168.228.131) port 80 (#0)</span><br><span class="line">&gt; GET /test HTTP/1.1  #è¯·æ±‚å¤´</span><br><span class="line">&gt; Host: 192.168.228.131</span><br><span class="line">&gt; User-Agent: curl/7.75.0</span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">* Mark bundle as not supporting multiuse</span><br><span class="line">&lt; HTTP/1.1 404 Not Found    #å“åº”å¤´</span><br><span class="line">&lt; Server: nginx/1.20.1</span><br><span class="line">&lt; Date: Sun, 27 Jun 2021 04:18:03 GMT</span><br><span class="line">&lt; Content-Type: text/html</span><br><span class="line">&lt; Content-Length: 506</span><br><span class="line">&lt; Connection: keep-alive</span><br><span class="line">&lt; ETag: &quot;60d7c9e2-1fa&quot;</span><br><span class="line">&lt;</span><br><span class="line">&lt;!DOCTYPE html&gt;  # responseä¿¡æ¯</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Error&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;An error occurred.&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;Sorry, the page you are looking for is currently unavailable.&lt;br/&gt;</span><br><span class="line">P000000000000lease try again later.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;If you are the system administrator of this resource then you should check</span><br><span class="line">the error log for details.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;em&gt;Faithfully yours, nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">* Connection #0 to host 192.168.228.131 left intact</span><br></pre></td></tr></table></figure></p><h3 id="curl-url"><a href="#curl-url" class="headerlink" title="curl url"></a>curl url</h3><p>æ˜¾ç¤º response<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ curl http://192.168.228.131/test</span><br><span class="line">&lt;!DOCTYPE html&gt;   # responseä¿¡æ¯</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Error&lt;/title&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    body &#123;</span><br><span class="line">        width: 35em;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        font-family: Tahoma, Verdana, Arial, sans-serif;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;An error occurred.&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;Sorry, the page you are looking for is currently unavailable.&lt;br/&gt;</span><br><span class="line">P000000000000lease try again later.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;If you are the system administrator of this resource then you should check</span><br><span class="line">the error log for details.&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&lt;em&gt;Faithfully yours, nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><h2 id="è™šæ‹Ÿä¸»æœºé…ç½®"><a href="#è™šæ‹Ÿä¸»æœºé…ç½®" class="headerlink" title="è™šæ‹Ÿä¸»æœºé…ç½®"></a>è™šæ‹Ÿä¸»æœºé…ç½®</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>è™šæ‹Ÿä¸»æœºé…ç½®ï¼š åœ¨åŒä¸€ä¸ªnginxä¸Šè¿è¡Œå¤šå¥—å•ç‹¬æœåŠ¡ï¼Œè¿™äº›æœåŠ¡æ˜¯ç›¸äº’ç‹¬ç«‹çš„<br><figure class="image-box">                <img src="/image/nginx/vir.png" alt title class>                <p></p>            </figure> </p><h3 id="å¤šç§å®ç°æ–¹æ¡ˆ"><a href="#å¤šç§å®ç°æ–¹æ¡ˆ" class="headerlink" title="å¤šç§å®ç°æ–¹æ¡ˆ"></a>å¤šç§å®ç°æ–¹æ¡ˆ</h3><h4 id="åŸºäºä¸»æœº-å¤šIPæ–¹å¼"><a href="#åŸºäºä¸»æœº-å¤šIPæ–¹å¼" class="headerlink" title="åŸºäºä¸»æœº å¤šIPæ–¹å¼"></a>åŸºäºä¸»æœº å¤šIPæ–¹å¼</h4><figure class="image-box">                <img src="/image/nginx/ip.png" alt title class>                <p></p>            </figure><h4 id="åŸºäºç«¯å£çš„é…ç½®æ–¹å¼"><a href="#åŸºäºç«¯å£çš„é…ç½®æ–¹å¼" class="headerlink" title="åŸºäºç«¯å£çš„é…ç½®æ–¹å¼"></a>åŸºäºç«¯å£çš„é…ç½®æ–¹å¼</h4><figure class="image-box">                <img src="/image/nginx/port.png" alt title class>                <p></p>            </figure><h4 id="åŸºäºå¤šåŸŸåæ–¹å¼"><a href="#åŸºäºå¤šåŸŸåæ–¹å¼" class="headerlink" title="åŸºäºå¤šåŸŸåæ–¹å¼"></a>åŸºäºå¤šåŸŸåæ–¹å¼</h4><p>æ¯”è¾ƒç®€å•ï¼Œä¸ä»‹ç»äº†ã€‚</p><h3 id="åŸºäºä¸»æœº-å¤šIPæ–¹å¼-1"><a href="#åŸºäºä¸»æœº-å¤šIPæ–¹å¼-1" class="headerlink" title="åŸºäºä¸»æœº å¤šIPæ–¹å¼"></a>åŸºäºä¸»æœº å¤šIPæ–¹å¼</h3><h4 id="ä¸¤ç§å®ç°æ–¹å¼"><a href="#ä¸¤ç§å®ç°æ–¹å¼" class="headerlink" title="ä¸¤ç§å®ç°æ–¹å¼"></a>ä¸¤ç§å®ç°æ–¹å¼</h4><figure class="image-box">                <img src="/image/nginx/moreip.png" alt title class>                <p></p>            </figure><p>æˆ‘ä»¬ä»¥ å•ç½‘å¡å¤šIPè®²è§£ï¼š</p><h4 id="é…ç½®æ­¥éª¤è¯´æ˜"><a href="#é…ç½®æ­¥éª¤è¯´æ˜" class="headerlink" title="é…ç½®æ­¥éª¤è¯´æ˜"></a>é…ç½®æ­¥éª¤è¯´æ˜</h4><ul><li>é€šè¿‡ipå‘½ä»¤å¢åŠ å¤šä¸ªIPï¼›</li><li>ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶ï¼Œå› ä¸ºserviceéƒ½æ˜¯é€šè¿‡includeåˆ°ä¸»é…ç½®çš„ï¼Œæ‰€æœ‰ä¸»é…ç½®ä¸ç”¨åŠ¨ï¼Œ<br>åªéœ€åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¦‚ï¼š <code>/etc/nginx/conf.d/default1.conf</code> <code>/etc/nginx/conf.d/default2.conf</code>;<br>é…ç½®æ–‡ä»¶ä¿®æ”¹åœ°æ–¹å¦‚ä¸‹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen      192.168.228.132:80;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ locationçš„root,ä¿®æ”¹html webç›®å½•ã€‚</p><ul><li><p>é‡å¯  <code>systemctl restart nginx</code></p></li><li><p>é¡µé¢è®¿é—® <a href="http://192.168.228.132/index.html" target="_blank" rel="noopener">http://192.168.228.132/index.html</a> ç­‰ç­‰</p></li></ul><h4 id="é…ç½®æ­¥éª¤å‘½ä»¤"><a href="#é…ç½®æ­¥éª¤å‘½ä»¤" class="headerlink" title="é…ç½®æ­¥éª¤å‘½ä»¤"></a>é…ç½®æ­¥éª¤å‘½ä»¤</h4><p>å…·ä½“å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> [root@localhost conf.d]#ip a add 192.168.228.132/24 dev ens33  #æ·»åŠ ipï¼Œé»˜è®¤æˆ‘ä»¬åªæœ‰ä¸€ä¸ªè®¾å¤‡ï¼Œè®¾å¤‡åä¸º dev</span><br><span class="line"> [root@localhost conf.d]#ip a add 192.168.228.133/24 dev ens33</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">[root@localhost conf.d]# ip a  #æŸ¥çœ‹</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens33: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:ca:0a:50 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.228.131/24 brd 192.168.228.255 scope global noprefixroute dynamic ens33</span><br><span class="line">       valid_lft 1673sec preferred_lft 1673sec</span><br><span class="line">    inet 192.168.228.132/24 scope global secondary ens33</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet 192.168.228.133/24 scope global secondary ens33</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::9efd:4c59:8c9c:6f69/64 scope link noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"></span><br><span class="line">#ä¹Ÿå¯ä»¥é€šè¿‡ ping æ¥çœ‹çœ‹æ˜¯å¦åŠ å·äº†åˆšæ‰çš„ip</span><br><span class="line"></span><br><span class="line">cp default.conf default1.conf  #é…ç½®nginxæ–‡ä»¶</span><br></pre></td></tr></table></figure></p><h4 id="ifconfig-ä¸-ip-å‘½ä»¤çš„ä¸åŒ"><a href="#ifconfig-ä¸-ip-å‘½ä»¤çš„ä¸åŒ" class="headerlink" title="ifconfig ä¸ ip å‘½ä»¤çš„ä¸åŒ"></a>ifconfig ä¸ ip å‘½ä»¤çš„ä¸åŒ</h4><p>æ³¨æ„åˆ°ä¸€ä¸ªç»†èŠ‚ï¼Œé…ç½®å¥½å¤šipåï¼Œä½¿ç”¨ ipå‘½ä»¤æŸ¥çœ‹ipï¼Œå¦‚ä¸ŠèŠ‚ï¼Œä¸ä¸‹é¢ä½¿ç”¨ ifconfigä¸ä¸€æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost conf.d]# ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500  #æ­¤ç½‘å¡ä¸‹æ²¡æœ‰åˆšæ‰æ–°åŠ çš„ 192.168.228.132 ç­‰</span><br><span class="line">        inet 192.168.228.131  netmask 255.255.255.0  broadcast 192.168.228.255</span><br><span class="line">        inet6 fe80::9efd:4c59:8c9c:6f69  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:ca:0a:50  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 80651  bytes 103675871 (98.8 MiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 13343  bytes 2831968 (2.7 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 8  bytes 672 (672.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 8  bytes 672 (672.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure><h2 id="nginxæ¨¡å—ä¸é…ç½®demo"><a href="#nginxæ¨¡å—ä¸é…ç½®demo" class="headerlink" title="nginxæ¨¡å—ä¸é…ç½®demo"></a>nginxæ¨¡å—ä¸é…ç½®demo</h2><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><p>æœ‰nginxå®˜æ–¹æ¨¡å—<br>æœ‰ç¬¬ä¸‰æ–¹æ¨¡å—</p><h3 id="å®˜æ–¹æ¨¡å—"><a href="#å®˜æ–¹æ¨¡å—" class="headerlink" title="å®˜æ–¹æ¨¡å—"></a>å®˜æ–¹æ¨¡å—</h3><h4 id="stub-status-ï¼šnginxè¿æ¥çŠ¶æ€"><a href="#stub-status-ï¼šnginxè¿æ¥çŠ¶æ€" class="headerlink" title="stub_status ï¼šnginxè¿æ¥çŠ¶æ€"></a>stub_status ï¼šnginxè¿æ¥çŠ¶æ€</h4><p>åœ¨ server ï¼Œ location ä¸­é…ç½®ï¼š<br><figure class="image-box">                <img src="/image/nginx/sub.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/sub1.png" alt title class>                <p></p>            </figure> </p><h4 id="http-sub-module-æ›¿æ¢htmlä¸­çš„å†…å®¹"><a href="#http-sub-module-æ›¿æ¢htmlä¸­çš„å†…å®¹" class="headerlink" title="http_sub_module :æ›¿æ¢htmlä¸­çš„å†…å®¹"></a>http_sub_module :æ›¿æ¢htmlä¸­çš„å†…å®¹</h4><p>å‚æ•°é…ç½® sub_filter_once  on|off; æ˜¯å¦åªåŒ¹é…ä¸€æ¬¡ï¼Œé»˜è®¤æ˜¯çš„ï¼›<br>contextï¼š http server locationï¼›<br><figure class="image-box">                <img src="/image/nginx/mo1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/mo2.png" alt title class>                <p></p>            </figure> </p><h4 id="http-access-module-è®¿é—®é™åˆ¶"><a href="#http-access-module-è®¿é—®é™åˆ¶" class="headerlink" title="http_access_module :è®¿é—®é™åˆ¶"></a>http_access_module :è®¿é—®é™åˆ¶</h4><p>è¯­æ³•ï¼š allow address | CIDR |unix: | all;  å…è®¸IP|IPç½‘æ®µå¦‚192.168.1|ç”¨çš„ä¸å¤š|æ‰€æœ‰;<br>IPæ®µçš„å†™æ³•æ¯”å¦‚ï¼š192.168.1.0/24<br>é»˜è®¤ï¼š â€”â€”<br>context: http, server, location, limit_except</p><p>è¯­æ³•ï¼š deny address | CIDR |unix: | all;<br>é»˜è®¤ï¼š â€”â€”<br>context: http, server, location, limit_except<br><figure class="image-box">                <img src="/image/nginx/allow.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/allow1.png" alt title class>                <p></p>            </figure> </p><h3 id="å¯†ç è®¿é—®-auth-basic"><a href="#å¯†ç è®¿é—®-auth-basic" class="headerlink" title="å¯†ç è®¿é—® auth_basic"></a>å¯†ç è®¿é—® auth_basic</h3><h4 id="auth-basicè¯´æ˜"><a href="#auth-basicè¯´æ˜" class="headerlink" title="auth_basicè¯´æ˜"></a>auth_basicè¯´æ˜</h4><p>è¯­æ³•ï¼š auth_basic string | off;<br>é»˜è®¤ï¼š off<br>context: http, server, location, limit_except</p><p>è¯­æ³•ï¼š auth_basic_user_file file;<br>é»˜è®¤ï¼š __<br>context: http, server, location, limit_except</p><h4 id="å®˜ç½‘demoå‚è€ƒ"><a href="#å®˜ç½‘demoå‚è€ƒ" class="headerlink" title="å®˜ç½‘demoå‚è€ƒ"></a>å®˜ç½‘demoå‚è€ƒ</h4><p><a href="https://nginx.org/en/docs/" target="_blank" rel="noopener">å®˜ç½‘</a><br><figure class="image-box">                <img src="/image/nginx/au1.png" alt title class>                <p></p>            </figure><br><a href="https://nginx.org/en/docs/http/ngx_http_auth_basic_module.html" target="_blank" rel="noopener">æ­¥éª¤</a>å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/nginx/au2.png" alt title class>                <p></p>            </figure> </p><h4 id="htpasswdç”Ÿæˆå¯†ç "><a href="#htpasswdç”Ÿæˆå¯†ç " class="headerlink" title="htpasswdç”Ÿæˆå¯†ç "></a>htpasswdç”Ÿæˆå¯†ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#htpasswdæ˜¯ä¸Šé¢å®˜ç½‘ä¸Š æ¨èçš„ç”Ÿæˆå¯†ç çš„å·¥å…·ï¼Œé…åˆnginxä½¿ç”¨</span><br><span class="line">[root@localhost ~]# rpm -qf /usr/bin/htpasswd   æŸ¥çœ‹htpasswdçš„å®‰è£…åŒ…</span><br><span class="line">httpd-tools-2.4.6-97.el7.centos.x86_64</span><br><span class="line">[root@localhost ~]# yum install httpd-tools -y</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# htpasswd -c /opt/backup/auth_conf testname</span><br><span class="line">New password:</span><br><span class="line">Re-type new password:</span><br><span class="line">Adding password for user testname</span><br><span class="line">[root@localhost ~]# cat /opt/backup/auth_conf</span><br><span class="line">testname:$apr1$Zd0GJW5v$2LLSVth5hPz7nCQf9N9E21</span><br></pre></td></tr></table></figure><h4 id="é…ç½®auth-basic"><a href="#é…ç½®auth-basic" class="headerlink" title="é…ç½®auth_basic"></a>é…ç½®auth_basic</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /etc/nginx/conf.d/auth_test.conf</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~ ^/admin.html &#123;</span><br><span class="line">        root   /opt/backup;</span><br><span class="line">        auth_basic &quot;input your password&quot;;   #é…ç½®è¿™é‡Œ</span><br><span class="line">        auth_basic_user_file /opt/backup/auth_conf; #å°±æ˜¯ä¸Šé¢ç”Ÿæˆçš„å¯†ç  /opt/backup/auth_conf</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://192.168.228.131/admin.html" target="_blank" rel="noopener">http://192.168.228.131/admin.html</a></p><figure class="image-box">                <img src="/image/nginx/auth1.png" alt title class>                <p></p>            </figure> <figure class="image-box">                <img src="/image/nginx/auth2.png" alt title class>                <p></p>            </figure> <h2 id="gzip-é™æ€èµ„æºé…ç½®å’Œdemo"><a href="#gzip-é™æ€èµ„æºé…ç½®å’Œdemo" class="headerlink" title="gzip é™æ€èµ„æºé…ç½®å’Œdemo"></a>gzip é™æ€èµ„æºé…ç½®å’Œdemo</h2><h3 id="å®Œæ•´é…ç½®-1"><a href="#å®Œæ•´é…ç½®-1" class="headerlink" title="å®Œæ•´é…ç½®"></a>å®Œæ•´é…ç½®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    sendfile on;</span><br><span class="line">    access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">#è®¿é—®å¦‚ http://192.168.1.159/zhy.jpg</span><br><span class="line">    location ~ .*\.(jpg|gif|png)$ &#123;</span><br><span class="line">        #gzip on;</span><br><span class="line">        #gzip_http_version 1.1;</span><br><span class="line">        #gzip_comp_level 2;</span><br><span class="line">        #gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line">        root /opt/app/code/images;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #è®¿é—®å¦‚ http://192.168.1.159/aa.js</span><br><span class="line">    location ~ .*\.(txt|xml)$ &#123;</span><br><span class="line">        #gzip on;</span><br><span class="line">        #gzip_http_version 1.1;</span><br><span class="line">        #gzip_comp_level 1;</span><br><span class="line">        #gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png;</span><br><span class="line">        root /opt/app/code/doc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #è®¿é—®å¦‚ http://192.168.1.159/download/testfile</span><br><span class="line">    #æ³¨æ„çš„æ˜¯ï¼Œè¯·åœ¨  /opt/app/code åˆ›å»º download/testfile</span><br><span class="line">    location ~ ^/download &#123;</span><br><span class="line">        #gzip_static on;</span><br><span class="line">        #tcp_nopush on;</span><br><span class="line">        root /opt/app/code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ¡ˆå›¾"><a href="#æ–¹æ¡ˆå›¾" class="headerlink" title="æ–¹æ¡ˆå›¾"></a>æ–¹æ¡ˆå›¾</h3><figure class="image-box">                <img src="/image/nginx/jia1.png" alt title class>                <p></p>            </figure><h3 id="ç›¸å…³æ¨¡å—"><a href="#ç›¸å…³æ¨¡å—" class="headerlink" title="ç›¸å…³æ¨¡å—"></a>ç›¸å…³æ¨¡å—</h3><h4 id="æ–‡ä»¶è¯»å–ï¼š-sendfile"><a href="#æ–‡ä»¶è¯»å–ï¼š-sendfile" class="headerlink" title="æ–‡ä»¶è¯»å–ï¼š sendfile"></a>æ–‡ä»¶è¯»å–ï¼š sendfile</h4><p>è¯­æ³•ï¼š on | off<br>é»˜è®¤ï¼š off<br>context: http, server, location, if in location</p><h4 id="tcp-nopush"><a href="#tcp-nopush" class="headerlink" title="tcp_nopush"></a>tcp_nopush</h4><p>è¯­æ³•ï¼š on | off<br>é»˜è®¤ï¼š off<br>context: http, server, location</p><p>tcp_nopush æ˜¯å¦æ€¥éœ€å‘é€ï¼›<br>å¦‚æœæ˜¯offï¼Œæ ‡è¯† ç­‰æœ‰ä¸€å®šä¼ è¾“æ—¶ï¼Œæ‰é›†ä¸­ä¼ è¾“ï¼›<br>å¤§æ–‡ä»¶ä¼ è¾“ æ¨è æ‰“å¼€ï¼›<br>éœ€è¦å¼€å¯ sendfile onï¼›</p><h4 id="tcp-nodelay"><a href="#tcp-nodelay" class="headerlink" title="tcp_nodelay"></a>tcp_nodelay</h4><p>è¯­æ³•ï¼š on | off<br>é»˜è®¤ï¼š on<br>context: http, server, location</p><p>tcp_nodelayä¸ tcp_nopush ç›¸åï¼Œè¡¨ç¤ºç«‹å³å‘é€ï¼›<br>éœ€è¦å¼€å¯ keepliveï¼›</p><h4 id="æ–‡ä»¶å‹ç¼©ï¼š-gzip"><a href="#æ–‡ä»¶å‹ç¼©ï¼š-gzip" class="headerlink" title="æ–‡ä»¶å‹ç¼©ï¼š gzip"></a>æ–‡ä»¶å‹ç¼©ï¼š gzip</h4><p>è¯­æ³•ï¼š on | off<br>é»˜è®¤ï¼š on<br>context: http, server, location</p><p>åŸç†å¦‚ä¸‹ï¼Œæµè§ˆå™¨è§£å‹gzipï¼Œ nginx å‹ç¼©æ–‡ä»¶ä¸ºgzipï¼›<br>å¥½å¤„æ˜¯ å‡å°‘äº† æœåŠ¡å™¨å¸¦å®½ï¼Œæ–‡ä»¶å˜å°ä¼ è¾“æ›´å¿«ï¼›<br><figure class="image-box">                <img src="/image/nginx/gzip.png" alt title class>                <p></p>            </figure> </p><p>ç›¸å…³æ¨¡å—æœ‰ï¼š<br>gzip_comp_level 2; å‹ç¼©æ¯”<br>gzip_http_version 1.1 ä¸»æµä½¿ç”¨1.1å‹ç¼©ç‰ˆæœ¬;</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>gzipå¯¹å‹ç¼©txt js html æ–‡ä»¶å‹ç¼©æ¯”è¾¾åˆ°å‡ å€åˆ°å‡ åå€ï¼Œé€šè¿‡ç½‘ç»œä¹Ÿèƒ½çœ‹åˆ°gzipçš„å¤§æ–‡ä»¶æ¸²æŸ“æ›´å¿«ï¼Œéå¸¸æ¨èä½¿ç”¨gzipï¼›</p><p>å¼Šç«¯ gzip ä¼šè®©æ–‡ä»¶åŒæ—¶å­˜åœ¨ åŸæ–‡ä»¶ä»¥åŠgzipæ–‡ä»¶ä¸¤ä»½ï¼Œå¯¹æœåŠ¡å™¨ç£ç›˜æœ‰å¤šå ç”¨çš„ä¸å¥½ã€‚</p><h2 id="å…¶ä»–demo"><a href="#å…¶ä»–demo" class="headerlink" title="å…¶ä»–demo"></a>å…¶ä»–demo</h2><h3 id="ä»£ç†é…ç½®demo"><a href="#ä»£ç†é…ç½®demo" class="headerlink" title="ä»£ç†é…ç½®demo"></a>ä»£ç†é…ç½®demo</h3><p>è®¿é—®80ç«¯å£ å¸¦æœ‰newå…³é”®å­—çš„è¯·æ±‚ï¼Œéƒ½è½¬å‘åˆ° 8080 ç«¯å£ã€‚</p><h4 id="ä¸»è¦ä»£ç "><a href="#ä¸»è¦ä»£ç " class="headerlink" title="ä¸»è¦ä»£ç "></a>ä¸»è¦ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen     80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    location ~ .*new.*$ &#123;</span><br><span class="line">        proxy_pass http://192.168.1.159:8080;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen     8080;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /opt/app/code;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ~ ^.*new.*$ &#123;</span><br><span class="line">        root   /opt/app/code2;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨èŒƒå›´ï¼š</p><p><code>http://192.168.1.159/new/down.html</code> ä¼šè¢«ä»£ç†åˆ° 8080 ç«¯å£ã€‚</p><h3 id="ä»£ç†ç¼“å­˜çš„demoè¯´æ˜"><a href="#ä»£ç†ç¼“å­˜çš„demoè¯´æ˜" class="headerlink" title="ä»£ç†ç¼“å­˜çš„demoè¯´æ˜"></a>ä»£ç†ç¼“å­˜çš„demoè¯´æ˜</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">#é…ç½®ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œä¼šè¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼š nginxä¸ºäº†è´Ÿè½½å‡è¡¡ï¼Œè®©å¤šä¸ªè¯·æ±‚ä¼šå¹³å‡çš„åˆ†é…åˆ°æ¯ä¸ªæœåŠ¡å™¨ä¸­ï¼Œä¿è¯æ¯ä¸ªæœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚æ•°é‡ä¸€è‡´ï¼›</span><br><span class="line">#æœ¬åœ°æµ‹è¯•çš„æ•ˆæœæ˜¯ æ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œnginxéƒ½ä¼šè®©è¯·æ±‚è½¬å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨</span><br><span class="line">upstream imooc &#123;</span><br><span class="line">   server 192.168.1.109:80;</span><br><span class="line">   server 192.168.1.159:8080;</span><br><span class="line">&#125;</span><br><span class="line">#/opt/app/cache ç¼“å­˜å­˜æ”¾ä½ç½®ï¼› levels ç›®å½•å­˜æ”¾æ¯”ï¼Œå¯é»˜è®¤è®¾ç½®ï¼›</span><br><span class="line">#keys_zone å®šä¹‰æ ‡è¯†ç¼“å­˜ç©ºé—´çš„åå­—ï¼Œä»¥å¤‡ åé¢çš„ proxy_cache ç”¨åˆ°ï¼Œ</span><br><span class="line">#10m 10å…†çš„æ„æ€ï¼Œä¸æ‡‚å°±é»˜è®¤è¿™æ ·é…ç½®å§</span><br><span class="line">#max_size=10g ç£ç›˜æœ€å¤§10Gï¼Œè¶…è¿‡10G ä¼šè¢« nginxçš„ç®—æ³•åˆ é™¤ï¼›</span><br><span class="line">#inactive=60m  inactive è¡¨ç¤º60åˆ†é’Ÿä¸æ´»è·ƒå°±è¢«åˆ é™¤ç¼“å­˜ï¼›</span><br><span class="line">#use_temp_path=off;ä¸€èˆ¬é»˜è®¤å…³é—­ï¼Œ ä¸æ‡‚å°±é»˜è®¤è¿™æ ·é…ç½®å§</span><br><span class="line">proxy_cache_path /opt/app/cache levels=1:2 keys_zone=imooc_cache:10m max_size=10g inactive=60m use_temp_path=off;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen    80;</span><br><span class="line">  server_name localhost;</span><br><span class="line">  </span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_cache imooc_cache; #å°±æ˜¯ä¸Šé¢keys_zoneå®šä¹‰çš„ç¼“å­˜ç©ºé—´åå­—</span><br><span class="line">proxy_pass http://imooc;</span><br><span class="line">proxy_cache_valid 200 304 12h; #è¡¨ç¤º 200 304 çš„è¯·æ±‚ 12å°æ—¶è¿‡æœŸï¼›</span><br><span class="line">proxy_cache_valid any 10m; #é™¤ä¸Šé¢200 304 çš„è¯·æ±‚ï¼Œ10åˆ†é’Ÿè¿‡æœŸ</span><br><span class="line">proxy_cache_key $host$uri$is_args$args;  #è®¾ç½®ç¼“å­˜keyçš„å”¯ä¸€æ ‡è¯† </span><br><span class="line"></span><br><span class="line">add_header Nginx-Cache &quot;$upstream_cache_status&quot;; #å¢åŠ Nginx-Cacheå¤´ä¿¡æ¯ï¼Œå‘Šè¯‰å®¢æœç«¯ç¼“å­˜æ˜¯å¦upstream_cache_statuså‘½ä¸­</span><br><span class="line"></span><br><span class="line">proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;  #ä¸Šé¢å®šä¹‰äº†ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œå½“ä¸€ä¸ªæœåŠ¡å™¨å‡ºç° error timeout invalid_header http_500 http_502 http_503 http_504 æ—¶ï¼Œå°±è½®è¯¢åˆ°ä¸‹ä¸€ä¸ªæœåŠ¡å™¨</span><br><span class="line">    include proxy_params;# æ­¤é…ç½®ä¹Ÿå¯ä»¥ä¸é…ç½®ï¼Œä½¿ç”¨nginxé»˜è®¤çš„</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡ç«¯æ¸…é™¤ä»£ç†ç¼“å­˜"><a href="#æœåŠ¡ç«¯æ¸…é™¤ä»£ç†ç¼“å­˜" class="headerlink" title="æœåŠ¡ç«¯æ¸…é™¤ä»£ç†ç¼“å­˜"></a>æœåŠ¡ç«¯æ¸…é™¤ä»£ç†ç¼“å­˜</h4><p><code>cd /opt/app/cache</code> ä¸Šé¢å®šä¹‰çš„ç¼“å­˜ç›®å½•ä¸‹ï¼Œå°†é‡Œé¢çš„æ–‡ä»¶å…¨éƒ¨åˆ é™¤</p><h3 id="websocket-ä»£ç†"><a href="#websocket-ä»£ç†" class="headerlink" title="websocket ä»£ç†"></a>websocket ä»£ç†</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><figure class="image-box">                <img src="/image/nginx/ws1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/ws3.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/ws4.png" alt title class>                <p></p>            </figure><h4 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h4><p><strong>å› ä¸ºå…¨ç¨‹éƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œå› æ­¤éƒ½æ˜¯ç”¨127.0.0.1ã€‚</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#å¦‚æœ $http_upgrade æœ‰å€¼ï¼Œ å°±ç»™$connection_upgradeè®¾ç½®å€¼ï¼› </span><br><span class="line">#$connection_upgradeé»˜è®¤ ä¸º upgradeï¼›</span><br><span class="line">#å¦‚æœ  $http_upgrade ä¸º&apos;&apos;,åˆ™ $connection_upgrade å€¼ä¸º close;</span><br><span class="line">map $http_upgrade $connection_upgrade &#123;</span><br><span class="line">  default upgrade;</span><br><span class="line">  &apos;&apos; close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">upstream websocket &#123;</span><br><span class="line">  server 127.0.0.1:8010;  #node å¯åŠ¨çš„æœåŠ¡</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen    8020;</span><br><span class="line">  </span><br><span class="line">  location / &#123;</span><br><span class="line">proxy_pass http://websocket;</span><br><span class="line">proxy_http_version 1.1;</span><br><span class="line">proxy_set_header Upgrade $http_upgrade; #è¿™æ˜¯é…ç½® ws ä»£ç†è½¬å‘çš„å…³é”®</span><br><span class="line">proxy_set_header Connection $connection_upgrade; #è¿™æ˜¯é…ç½® ws ä»£ç†è½¬å‘çš„å…³é”®</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯node js æ–‡ä»¶</span><br><span class="line"><span class="keyword">var</span> msg = <span class="string">''</span>;</span><br><span class="line"><span class="keyword">var</span> websoketServer = <span class="built_in">require</span>(<span class="string">'ws'</span>).Server;</span><br><span class="line"><span class="keyword">var</span> wss = <span class="keyword">new</span> WebSocketServer(&#123;<span class="attr">port</span>: <span class="number">8010</span>&#125;);</span><br><span class="line">wss.on(<span class="string">'connection'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ws</span>)</span>&#123;</span><br><span class="line">  ws.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">    ws.send(<span class="string">'server received from client: '</span> + msg)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#åœ¨æœåŠ¡ç«¯ä¸­çš„ç»ˆç«¯æ‰§è¡Œ</span><br><span class="line">wscat --connect ws://127.0.0.1:8020</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/nginx/ws2.png" alt title class>                <p></p>            </figure><h3 id="uwsgiä»£ç†ä¸djiango"><a href="#uwsgiä»£ç†ä¸djiango" class="headerlink" title="uwsgiä»£ç†ä¸djiango"></a>uwsgiä»£ç†ä¸djiango</h3><p>Django æ˜¯ä¸€ä¸ªå¼€æºçš„webçš„æ¡†æ¶ï¼›<br>Pythonä¸‹æœ‰è®¸å¤šæ¬¾ä¸åŒçš„ Web æ¡†æ¶ã€‚Djangoæ˜¯é‡é‡çº§é€‰æ‰‹ä¸­æœ€æœ‰ä»£è¡¨æ€§çš„ä¸€ä½ã€‚è®¸å¤šæˆåŠŸçš„ç½‘ç«™å’ŒAPPéƒ½åŸºäºDjangoã€‚<br><figure class="image-box">                <img src="/image/nginx/us.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/us1.png" alt title class>                <p></p>            </figure><br><a href="https://www.imooc.com/article/26870" target="_blank" rel="noopener">å®‰è£…Pythonç­‰å‚è€ƒ</a></p><h3 id="rewriteçš„ä½¿ç”¨å’Œdemo"><a href="#rewriteçš„ä½¿ç”¨å’Œdemo" class="headerlink" title="rewriteçš„ä½¿ç”¨å’Œdemo"></a>rewriteçš„ä½¿ç”¨å’Œdemo</h3><h4 id="é…ç½®è¯­æ³•"><a href="#é…ç½®è¯­æ³•" class="headerlink" title="é…ç½®è¯­æ³•"></a>é…ç½®è¯­æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rewrite regex replacement [flag];</span><br><span class="line">default:-</span><br><span class="line">context: server,location, if</span><br></pre></td></tr></table></figure><h4 id="flag"><a href="#flag" class="headerlink" title="flag"></a>flag</h4><p>å¯¹<code>rewrite regex replacement [flag];</code>ä¸­flagå–å€¼è¯´æ˜ã€‚<br><figure class="image-box">                <img src="/image/nginx/re2.png" alt title class>                <p></p>            </figure></p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">  listen    80;</span><br><span class="line">  </span><br><span class="line">  root /opt/app/code;</span><br><span class="line">  location ~ ^/break &#123;</span><br><span class="line">      #è®¿é—®192.168.1.159/break å°†æ˜¯404ï¼Œ </span><br><span class="line">      #å› ä¸ºè¿™ä¸ª/test/ æ˜¯æŒ‡root /opt/app/codeä¸‹çš„ç›®å½•,æ­¤ç›®å½•ä¸‹æ²¡æœ‰test</span><br><span class="line">      #ä¸€èˆ¬break å¯è¿™æ ·é…ç½® rewrite ^(.*)$ /pages/maintain.html break;</span><br><span class="line">rewrite ^/break /test/ break; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ~ ^/last &#123;</span><br><span class="line">      #è®¿é—®192.168.1.159/last å°† æ­£å¸¸è¿”å› &#123;&quot;status&quot;:&quot;success&quot;&#125;ï¼Œ </span><br><span class="line">      #break ä¸ lastçš„åŒºåˆ«åœ¨äºï¼Œ breakæ˜¯é‡å®šå‘åˆ°ç›®å½•ï¼Œ lastæ˜¯è½¬æ¥åˆ°å¦å¤–ä¸€ä¸ªæ¥å£è¯·æ±‚ï¼Œç›¸å½“äºè½¬å‘ï¼Œ</span><br><span class="line">      #ä¸‹é¢çš„/test/ å°±æ˜¯ä¸‹é¢locationå®šä¹‰çš„æ¥å£/test/</span><br><span class="line">rewrite ^/last /test/ last; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  location ~ /test/ &#123;</span><br><span class="line">    default_type application/json;</span><br><span class="line">return 200 &apos;&#123;&quot;status&quot;:&quot;success&quot;&#125;&apos;; </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—® <a href="http://192.168.1.159/last/" target="_blank" rel="noopener">http://192.168.1.159/last/</a></p><figure class="image-box">                <img src="/image/nginx/re.png" alt title class>                <p></p>            </figure><h4 id="last-break-åŒºåˆ«"><a href="#last-break-åŒºåˆ«" class="headerlink" title="last break åŒºåˆ«"></a>last break åŒºåˆ«</h4><p>å¦‚ä¸Šçš„demoã€‚æ³¨æ„çš„æ˜¯lastçš„çŠ¶æ€ç æ˜¯200ï¼Œä¸æ˜¯30x.</p><h4 id="breakå¦™ç”¨"><a href="#breakå¦™ç”¨" class="headerlink" title="breakå¦™ç”¨"></a>breakå¦™ç”¨</h4><p>å¦‚ä¸‹æœåŠ¡ç«¯é™æ€æ–‡ä»¶ç›®å½• ä¸ breakç»“åˆä½¿ç”¨ã€‚<br><figure class="image-box">                <img src="/image/nginx/re3.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/re4.png" alt title class>                <p></p>            </figure></p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="ifconfig-ä¸-ip-å‘½ä»¤çš„ä¸åŒ-1"><a href="#ifconfig-ä¸-ip-å‘½ä»¤çš„ä¸åŒ-1" class="headerlink" title="ifconfig ä¸ ip å‘½ä»¤çš„ä¸åŒ"></a>ifconfig ä¸ ip å‘½ä»¤çš„ä¸åŒ</h3><p>å‚è€ƒä¸Šé¢ã€Šifconfig ä¸ ip å‘½ä»¤çš„ä¸åŒã€‹</p><h3 id="æ£€æµ‹-nginxè¯­æ³•æ˜¯å¦æ­£ç¡®"><a href="#æ£€æµ‹-nginxè¯­æ³•æ˜¯å¦æ­£ç¡®" class="headerlink" title="æ£€æµ‹ nginxè¯­æ³•æ˜¯å¦æ­£ç¡®"></a>æ£€æµ‹ nginxè¯­æ³•æ˜¯å¦æ­£ç¡®</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# nginx -tc /etc/nginx/nginx.conf</span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf test is successful</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p>æ³¨æ„çš„æ˜¯ï¼Œå¯¹äº è¢« ä¸»é…ç½®æ–‡ä»¶<code>/etc/nginx/nginx.conf</code> includeçš„ defaultxxx.conf ç­‰æ–‡ä»¶ï¼Œæ£€æŸ¥å…¶è¯­æ³•æ˜¯å¦æ­£ç¡®éƒ½æ˜¯é€šè¿‡ ï¼Œæ£€æŸ¥å…¶ä¸»é…ç½®æ–‡ä»¶ï¼š<br><code>nginx -tc /etc/nginx/nginx.conf</code>.<br>åªè¦ä¸»é…ç½®æ–‡ä»¶æ£€æŸ¥é€šè¿‡ï¼Œè¯´æ˜è¢«includeçš„æ‰€æœ‰confæ–‡ä»¶éƒ½æ­£å¸¸è¯­æ³•ã€‚</p><p>æ­¤å¤–ä¹Ÿå¯ä»¥é€šè¿‡é‡å¯ <code>systemctl restart nginx</code> æ ¹æ®æç¤ºï¼Œå¯ä»¥æŸ¥çœ‹ç›¸å…³çš„è¯­æ³•é”™è¯¯æç¤ºï¼š<br> <code>systemctl status nginx.service | grep static.conf</code></p><h3 id="IPç½‘æ®µå†™æ³•"><a href="#IPç½‘æ®µå†™æ³•" class="headerlink" title="IPç½‘æ®µå†™æ³•"></a>IPç½‘æ®µå†™æ³•</h3><p>è¯­æ³•ï¼š allow address | CIDR |unix: | all;  å…è®¸IP|IPç½‘æ®µå¦‚192.168.1|ç”¨çš„ä¸å¤š|æ‰€æœ‰;<br>IPæ®µçš„å†™æ³•æ¯”å¦‚ï¼š192.168.1.0/24</p><h3 id="é…ç½®è¯­æ³•-1"><a href="#é…ç½®è¯­æ³•-1" class="headerlink" title="é…ç½®è¯­æ³•"></a>é…ç½®è¯­æ³•</h3><h4 id="ä¸€å®šè¦æ³¨æ„åŠ ç©ºæ ¼"><a href="#ä¸€å®šè¦æ³¨æ„åŠ ç©ºæ ¼" class="headerlink" title="ä¸€å®šè¦æ³¨æ„åŠ ç©ºæ ¼"></a>ä¸€å®šè¦æ³¨æ„åŠ ç©ºæ ¼</h4><p>åœ¨nginxä¸­ï¼Œé…ç½®æ—¶ä¸€å®šè¦æ³¨æ„åŠ ä¸Šç©ºæ ¼ï¼Œ<br>æ¯”å¦‚ifè¯­å¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#é”™è¯¯</span><br><span class="line">if()&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åŠ äº†ç©ºæ ¼ï¼Œæ­£ç¡®</span><br><span class="line">if ( ) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="locationåŒ¹é…ä¼˜å…ˆçº§"><a href="#locationåŒ¹é…ä¼˜å…ˆçº§" class="headerlink" title="locationåŒ¹é…ä¼˜å…ˆçº§"></a>locationåŒ¹é…ä¼˜å…ˆçº§</h3><h4 id="å‡ ç§ä¼˜å…ˆçº§"><a href="#å‡ ç§ä¼˜å…ˆçº§" class="headerlink" title="å‡ ç§ä¼˜å…ˆçº§"></a>å‡ ç§ä¼˜å…ˆçº§</h4><p>= è¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨åŒ¹é…ï¼› â€“ä¼˜å…ˆçº§æœ€é«˜ï¼›<br>^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œä½¿ç”¨å‰ç¼€åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯ä»¥ä»€ä¹ˆå¼€å¤´ï¼› â€“ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼›<br>~ æˆ– ~*  éƒ½æ˜¯æ­£åˆ™åŒ¹é…ï¼Œ å‰è€…åŒºåˆ†å¤§å°å†™ï¼Œ åç¼€ä¸åŒºåˆ†å¤§å°å†™ï¼› â€“ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼›</p><figure class="image-box">                <img src="/image/nginx/lo3.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/lo4.png" alt title class>                <p></p>            </figure><h4 id="demoè¯´æ˜"><a href="#demoè¯´æ˜" class="headerlink" title="demoè¯´æ˜"></a>demoè¯´æ˜</h4><figure class="image-box">                <img src="/image/nginx/lo.png" alt title class>                <p></p>            </figure><h4 id="urlç»“å°¾çš„åæ–œçº¿"><a href="#urlç»“å°¾çš„åæ–œçº¿" class="headerlink" title="urlç»“å°¾çš„åæ–œçº¿"></a>urlç»“å°¾çš„åæ–œçº¿</h4><figure class="image-box">                <img src="/image/nginx/lo5.png" alt title class>                <p></p>            </figure><p>ä¸å¸¦ï¼š<br>location /test :  </p><ul><li>é¦–å…ˆ å…ˆå°è¯•æŠŠ/test å½“æˆä¸€ä¸ªç›®å½•ï¼Œå»æ‰¾ /testç›®å½•ä¸‹çš„ index.html, æœ‰å°±è¿”å›index.html, </li><li>å¦‚æœæ²¡æœ‰index.html, å°±æŠŠ/test å½“æˆä¸€ä¸ªæ–‡ä»¶å¤„ç†ï¼Œçœ‹æ˜¯å¦å­˜åœ¨ test æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨å°±è¿”å›textæ–‡ä»¶ï¼›<br>location /test/ : å»æ‰¾ /test/ç›®å½•ä¸‹çš„ index.html, æœ‰å°±è¿”å›index.html, å¦‚æœæ²¡æœ‰index.html, å°±è¿”å›404ï¼›</li></ul><h3 id="server-name-å†™æ³•-å’Œ-å½¢å¼"><a href="#server-name-å†™æ³•-å’Œ-å½¢å¼" class="headerlink" title="server_name å†™æ³• å’Œ å½¢å¼"></a>server_name å†™æ³• å’Œ å½¢å¼</h3><h4 id="å››ç§å†™æ³•"><a href="#å››ç§å†™æ³•" class="headerlink" title="å››ç§å†™æ³•"></a>å››ç§å†™æ³•</h4><figure class="image-box">                <img src="/image/nginx/serv.png" alt title class>                <p></p>            </figure><h4 id="åŒ¹é…ä¼˜å…ˆçº§"><a href="#åŒ¹é…ä¼˜å…ˆçº§" class="headerlink" title="åŒ¹é…ä¼˜å…ˆçº§"></a>åŒ¹é…ä¼˜å…ˆçº§</h4><figure class="image-box">                <img src="/image/nginx/serv2.png" alt title class>                <p></p>            </figure><h4 id="å››ç§ç»“æ„"><a href="#å››ç§ç»“æ„" class="headerlink" title="å››ç§ç»“æ„"></a>å››ç§ç»“æ„</h4><figure class="image-box">                <img src="/image/nginx/serv1.png" alt title class>                <p></p>            </figure><h4 id="å‡ ç§ä¼˜å…ˆçº§-1"><a href="#å‡ ç§ä¼˜å…ˆçº§-1" class="headerlink" title="å‡ ç§ä¼˜å…ˆçº§"></a>å‡ ç§ä¼˜å…ˆçº§</h4><p>= è¿›è¡Œæ™®é€šå­—ç¬¦ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨åŒ¹é…ï¼› â€“ä¼˜å…ˆçº§æœ€é«˜ï¼›<br>^~ è¡¨ç¤ºæ™®é€šå­—ç¬¦åŒ¹é…ï¼Œä½¿ç”¨å‰ç¼€åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯ä»¥ä»€ä¹ˆå¼€å¤´ï¼› â€“ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼›<br>~ æˆ– ~*  éƒ½æ˜¯æ­£åˆ™åŒ¹é…ï¼Œ å‰è€…åŒºåˆ†å¤§å°å†™ï¼Œ åç¼€ä¸åŒºåˆ†å¤§å°å†™ï¼› â€“ä¼˜å…ˆçº§æ¬¡ä¹‹ï¼›</p><h4 id="demoè¯´æ˜-1"><a href="#demoè¯´æ˜-1" class="headerlink" title="demoè¯´æ˜"></a>demoè¯´æ˜</h4><figure class="image-box">                <img src="/image/nginx/lo.png" alt title class>                <p></p>            </figure><h3 id="æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æµç¨‹"><a href="#æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æµç¨‹" class="headerlink" title="æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æµç¨‹"></a>æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æµç¨‹</h3><figure class="image-box">                <img src="/image/nginx/url.png" alt title class>                <p></p>            </figure><ul><li><p>ç”¨æˆ·<br>å‘é€ä¸€ä¸ªtcpé“¾æ¥<br>åˆ°æˆ‘ä»¬çš„ç½‘å¡ä¸Š</p></li><li><p>ç½‘å¡æ”¶åˆ°ä¹‹å<br>æŠŠè¿™ä¸ªtcpé“¾æ¥æ‹†åŒ…ï¼Œ<br>æ­¤æ—¶æ‹†åŒ…å‡ºæ¥ç¬¬äºŒå±‚ä¿¡æ¯ï¼Œ<br>æ‹†åŒ…åï¼Œå°±æŠŠè¿™ä¸ªåŒ…å«ç¬¬äºŒå±‚ä¿¡æ¯çš„æ•°æ®åŒ…<br>ç»™æˆ‘ä»¬çš„tcp/ip åè®®æ ˆ</p></li><li><p>æˆ‘ä»¬çš„tcp/ip åè®®æ ˆ æŠŠè¿™ä¸ªåŒ…å«ç¬¬äºŒå±‚ä¿¡æ¯çš„æ•°æ®åŒ…ç»™æ‹†æ‰ä¹‹å<br>å‘ç°ä¸€äº›ä¸‰å±‚ä¿¡æ¯<br>æ¯”å¦‚<br>æ˜¯ä¸æ˜¯å½“å‰çš„ipï¼Œ</p></li><li><p>å¦‚æœä¸æ˜¯å°±ç›´æ¥å°†è¿™ä¸ªæ•°æ®åŒ…ä¸¢æ‰ï¼Œåœæ­¢å¤„ç†ï¼›</p></li><li><p>å¦‚æœæ˜¯å°±ç»§ç»­å¤„ç†ï¼›</p></li><li><p>æˆ‘ä»¬çš„tcp/ipåè®®ç»§ç»­æ‹†åŒ…æ•°æ®åŒ…<br>è¿™æ ·å°±æ‹†å‡ºæ¥ç¬¬å››å±‚ä¿¡æ¯ï¼Œ<br>çœ‹ä¸‹ç«¯å£æ˜¯è°ï¼Œæ¯”å¦‚æ˜¯80ç«¯å£æœåŠ¡<br>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„å†…æ ¸æ€ä¼šçŸ¥é“æˆ‘ä»¬çš„80ç«¯å£ åˆ°åº•ç›‘å¬åœ¨ç”¨æˆ·æ€çš„æŸä¸€ä¸ªç¨‹åºä¸­ï¼Œ<br>æ¯”å¦‚nginxæä¾›çš„æœåŠ¡ï¼›</p></li><li><p>æ­¤æ—¶ï¼Œtcp/ipåè®®æ ˆ å°±æŠŠæ•°æ®åŒ…ä¼ é€’ç»™ nginxçš„workerå­è¿›ç¨‹ï¼Œäº¤ç»™nginxå¤„ç†ã€‚</p></li></ul><h3 id="çœ‹æ—¥å¿—çš„å¦™å¤„"><a href="#çœ‹æ—¥å¿—çš„å¦™å¤„" class="headerlink" title="çœ‹æ—¥å¿—çš„å¦™å¤„"></a>çœ‹æ—¥å¿—çš„å¦™å¤„</h3><p>nginx çœ‹æ—¥å¿—ï¼Œå¯ä»¥æ‰“å° å˜é‡åç§°ï¼Œå¯ä»¥è¿™æ ·è¯´ï¼Œå‰ç«¯è°ƒè¯•ï¼Œæ—¥å¿—æ˜¯æ‰“å¼€æ§åˆ¶å° </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨ä¸»é…ç½®æ–‡ä»¶ /etc/nginx/nginx.conf ä¸­</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f /var/log/nginx/access.log</span><br></pre></td></tr></table></figure></p><p>æ¯æ¬¡è®¿é—®nginxï¼Œå°±ä¼šæ˜¾ç¤ºä¸Šé¢çš„æ—¥å¿—ä¿¡æ¯ã€‚</p><h3 id="include-ç”¨æ³•"><a href="#include-ç”¨æ³•" class="headerlink" title="include ç”¨æ³•"></a>include ç”¨æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  location / &#123;</span><br><span class="line">      root   /opt/app/code;</span><br><span class="line">      index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">      proxy_redirect default;</span><br><span class="line">      proxy_set_header Host $http_host;</span><br><span class="line">      proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line"></span><br><span class="line">      proxy_connect_timeout 30;</span><br><span class="line">      proxy_send_timeout 60;</span><br><span class="line">      proxy_read_timeout 60;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºï¼š</p><p>å®šä¹‰ä¸€ä¸ªæ–‡ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat proxy_params</span><br><span class="line">proxy_redirect default;</span><br><span class="line">proxy_set_header Host $http_host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line"></span><br><span class="line">proxy_connect_timeout 30;</span><br><span class="line">proxy_send_timeout 60;</span><br><span class="line">proxy_read_timeout 60;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">       root   /opt/app/code;</span><br><span class="line">       index  index.html index.htm;</span><br><span class="line">       </span><br><span class="line">       include proxy_params; #å¼•å…¥ä¸Šé¢åˆ›å»ºæ–‡ä»¶çš„æ–‡ä»¶proxy_params</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æ¨¡å—åŒ–ï¼Œæ–¹ä¾¿å¼•ç”¨ï¼Œå¯è¯»æ€§å¥½ã€‚</p><h3 id="ä½ ä¸çŸ¥é“çš„-proxy-pass"><a href="#ä½ ä¸çŸ¥é“çš„-proxy-pass" class="headerlink" title="ä½ ä¸çŸ¥é“çš„ proxy_pass"></a>ä½ ä¸çŸ¥é“çš„ proxy_pass</h3><h4 id="ä¸å¸¦-å’Œ-å¸¦-çš„åŒºåˆ«"><a href="#ä¸å¸¦-å’Œ-å¸¦-çš„åŒºåˆ«" class="headerlink" title="ä¸å¸¦/ å’Œ å¸¦/ çš„åŒºåˆ«"></a>ä¸å¸¦/ å’Œ å¸¦/ çš„åŒºåˆ«</h4><figure class="image-box">                <img src="/image/nginx/pa1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/pa2.png" alt title class>                <p></p>            </figure><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="root-ä¸-aliasåŒºåˆ«"><a href="#root-ä¸-aliasåŒºåˆ«" class="headerlink" title="root ä¸ aliasåŒºåˆ«"></a>root ä¸ aliasåŒºåˆ«</h4><figure class="image-box">                <img src="/image/nginx/root.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/root1.png" alt title class>                <p></p>            </figure><h4 id="ä¼ é€’ç”¨æˆ·çš„çœŸå®IPåœ°å€"><a href="#ä¼ é€’ç”¨æˆ·çš„çœŸå®IPåœ°å€" class="headerlink" title="ä¼ é€’ç”¨æˆ·çš„çœŸå®IPåœ°å€"></a>ä¼ é€’ç”¨æˆ·çš„çœŸå®IPåœ°å€</h4><figure class="image-box">                <img src="/image/nginx/ipprops.png" alt title class>                <p></p>            </figure><h4 id="åŒ¹é…æ‰€æœ‰è·¯å¾„çš„-æ­£åˆ™"><a href="#åŒ¹é…æ‰€æœ‰è·¯å¾„çš„-æ­£åˆ™" class="headerlink" title="åŒ¹é…æ‰€æœ‰è·¯å¾„çš„ æ­£åˆ™"></a>åŒ¹é…æ‰€æœ‰è·¯å¾„çš„ æ­£åˆ™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rewrite ^(.*)$ /pages/maintain.html break;  # ^(.*)$åŒ¹é…æ‰€æœ‰è·¯å¾„</span><br><span class="line">rewrite ^(.*)$ /pages/$1 break;  # $1 ä¸º ^(.*)$ ä¸­(.*)éƒ¨åˆ†ï¼Œä¸æ­£åˆ™è¡¨è¾¾å¼ä¸€æ ·ï¼Œå¯ä»¥æœ‰$1 $2 ...</span><br></pre></td></tr></table></figure><h4 id="å…³é—­nginxçš„æ–¹æ³•"><a href="#å…³é—­nginxçš„æ–¹æ³•" class="headerlink" title="å…³é—­nginxçš„æ–¹æ³•"></a>å…³é—­nginxçš„æ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -aux | grep nginx</span><br><span class="line">nginx      1270  0.0  0.2  57312  2528 ?        S    Jul03   0:00 nginx: worker process</span><br><span class="line">nginx      1271  0.0  0.1  57092  1784 ?        S    Jul03   0:00 nginx: cache manager process</span><br><span class="line">root       1390  0.0  0.0 112812   972 pts/0    R+   00:54   0:00 grep --color=auto nginx</span><br><span class="line">[root@localhost ~]# kill -9 1270 1271</span><br><span class="line">[root@localhost ~]# ps -aux | grep nginx</span><br><span class="line">root       1393  0.0  0.0 112812   972 pts/0    R+   00:54   0:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure><h4 id="restart-nginxæŠ¥é”™æ—¶å¤„ç†æ–¹å¼"><a href="#restart-nginxæŠ¥é”™æ—¶å¤„ç†æ–¹å¼" class="headerlink" title="restart nginxæŠ¥é”™æ—¶å¤„ç†æ–¹å¼"></a>restart nginxæŠ¥é”™æ—¶å¤„ç†æ–¹å¼</h4><p>æœ‰æ—¶å€™nginxè¯­æ³•æ˜¯æ­£ç¡®çš„ï¼›<br>ç«¯å£ä¹Ÿæ²¡æœ‰è¢«å ç”¨ï¼›<br>systemctl restart nginx ä¾ç„¶æŠ¥é”™ï¼Œæ­¤æ—¶å¯ä»¥å…³é—­nginxï¼Œç„¶åå†é‡å¯ã€‚</p><h4 id="md5åŠ å¯†ç”Ÿæˆä¸‹è½½é“¾æ¥çš„shè„šæœ¬"><a href="#md5åŠ å¯†ç”Ÿæˆä¸‹è½½é“¾æ¥çš„shè„šæœ¬" class="headerlink" title="md5åŠ å¯†ç”Ÿæˆä¸‹è½½é“¾æ¥çš„shè„šæœ¬"></a>md5åŠ å¯†ç”Ÿæˆä¸‹è½½é“¾æ¥çš„shè„šæœ¬</h4><p>$() çš„å¦™ç”¨,$()æ‹¬å·å†…ï¼Œå¯å†™shè¡¨è¾¾å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost test]# cat md.sh</span><br><span class="line"></span><br><span class="line">#!/bin/sh</span><br><span class="line">#</span><br><span class="line">servername=&quot;jeson.t.com&quot;</span><br><span class="line">download_file=&quot;/opt/app/&quot;</span><br><span class="line">time_num=$( date -d &quot;2021-10-18 00:00:00&quot; +%s )  #$() çš„å¦™ç”¨</span><br><span class="line">secret_num=&quot;imooc&quot;</span><br><span class="line"></span><br><span class="line"># echoçš„è¾“å‡ºç›¸å½“äº openssl éœ€è¦çš„ç›®å½•ï¼Œ å…ˆè¿›è¡Œ md5åŠ å¯†ï¼Œåbase64ï¼Œå†åé¢å°±æ˜¯ä¸€äº›æ ¼å¼èŠ±å¤„ç†</span><br><span class="line">res=$(echo -n &quot;$&#123;time_num&#125;$&#123;download_file&#125; $&#123;secret_num&#125;&quot;|openssl md5 -binary | openssl base64 | tr +/ -_ | tr -d =)</span><br><span class="line"></span><br><span class="line">echo &quot;http://$&#123;servername&#125;$&#123;download_file&#125;?md5=$&#123;res&#125;$&amp;expires=$&#123;time_num&#125;&quot;</span><br><span class="line">[root@localhost test]# sh ./md.sh</span><br><span class="line">http://jeson.t.com/opt/app/?md5=kyo5J6MRVm1l-Rvjt9rzWw$&amp;expires=1634529600</span><br><span class="line">[root@localhost test]#</span><br></pre></td></tr></table></figure></p><h4 id="å®‰è£…opensslæŒ‡å®šç‰ˆæœ¬çš„shè„šæœ¬"><a href="#å®‰è£…opensslæŒ‡å®šç‰ˆæœ¬çš„shè„šæœ¬" class="headerlink" title="å®‰è£…opensslæŒ‡å®šç‰ˆæœ¬çš„shè„šæœ¬"></a>å®‰è£…opensslæŒ‡å®šç‰ˆæœ¬çš„shè„šæœ¬</h4><figure class="image-box">                <img src="/image/nginx/open.png" alt title class>                <p></p>            </figure><h2 id="æµè§ˆå™¨ç¼“å­˜ä¸nginx"><a href="#æµè§ˆå™¨ç¼“å­˜ä¸nginx" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜ä¸nginx"></a>æµè§ˆå™¨ç¼“å­˜ä¸nginx</h2><h3 id="æµè§ˆå™¨ç¼“å­˜åŸç†"><a href="#æµè§ˆå™¨ç¼“å­˜åŸç†" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜åŸç†"></a>æµè§ˆå™¨ç¼“å­˜åŸç†</h3><figure class="image-box">                <img src="/image/nginx/cache.png" alt title class>                <p></p>            </figure><h2 id="å®‰å…¨ç›¸å…³"><a href="#å®‰å…¨ç›¸å…³" class="headerlink" title="å®‰å…¨ç›¸å…³"></a>å®‰å…¨ç›¸å…³</h2><h3 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´"><a href="#æ–‡ä»¶ä¸Šä¼ æ¼æ´" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ æ¼æ´"></a>æ–‡ä»¶ä¸Šä¼ æ¼æ´</h3><p>æ–‡ä»¶ä¸Šä¼ æ¼æ´-åˆ©ç”¨è¿™äº›å¯ä»¥ä¸Šä¼ çš„æ¥å£å°†æ¶æ„ä»£ç æ¤å…¥åˆ°æœåŠ¡å™¨ä¸­ï¼Œå†é€šè¿‡urlå»è®¿é—®ä»¥æ‰§è¡Œä»£ç ã€‚</p><p><a href="http://www.imooc.com/upload/1.jpg/1.php" target="_blank" rel="noopener">http://www.imooc.com/upload/1.jpg/1.php</a><br>nginxå°†1.jpgä½œä¸ºphpä»£ç æ‰§è¡Œã€‚</p><p>å¦‚æœ1.jpg åŒ…å«äº†phpä¸å¥½çš„ä»£ç ï¼Œå°±ä¼šæ±¡æŸ“äº†æœåŠ¡å™¨ã€‚</p><p>è§£å†³ä¹‹é“ï¼Œåœ¨äºnginxå†…ï¼Œè¯†åˆ«urlæ˜¯å¦åˆè§„ï¼Œå¹¶åšç›¸åº”è¿”å›ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location ^~ /upload &#123;</span><br><span class="line">  root /opt/app/images;</span><br><span class="line">  if($request_filename ~* (.*)\.php)&#123;</span><br><span class="line">    return 403 #å¦‚æœæ˜¯phpæ ¼å¼ï¼Œå°±ä¸è¦ç»™æ˜¾ç¤ºæˆ–ä¸‹è½½å›¾ç‰‡</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="sqlæ³¨å…¥"><a href="#sqlæ³¨å…¥" class="headerlink" title="sqlæ³¨å…¥"></a>sqlæ³¨å…¥</h3><p>sqlæ³¨å…¥ åˆ©ç”¨æœªè¿‡æ»¤æœªå®¡æ ¸ç”¨æˆ·è¾“å…¥çš„æ”»å‡»æ–¹æ³•ï¼Œè®©åº”ç”¨è¿è¡Œæœ¬ä¸åº”è¯¥è¿è¡Œçš„sqlä»£ç ã€‚</p><figure class="image-box">                <img src="/image/nginx/aql.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/aql1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/aql2.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/aql3.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/nginx/aql4.png" alt title class>                <p></p>            </figure><p>å½“é€šè¿‡<br><figure class="image-box">                <img src="/image/nginx/aql5.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/nginx/aql51.png" alt title class>                <p></p>            </figure><br>å‘ç°ä¹Ÿç™»å½•æˆåŠŸäº†ã€‚<br><figure class="image-box">                <img src="/image/nginx/aql6.png" alt title class>                <p></p>            </figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(ç¦»)</title>
      <link href="/2021/06/19/linux_six/"/>
      <url>/2021/06/19/linux_six/</url>
      
        <content type="html"><![CDATA[<h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>dock è¡¨ç¤ºç å¤´ï¼Œdockeræ˜¯ ç å¤´å·¥äººçš„æ„æ€<br>docker æ˜¯ä¸€ä¸ªå®¹å™¨(container)å¼•æ“</p><h3 id="å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«"><a href="#å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«" class="headerlink" title="å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«"></a>å®¹å™¨å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«</h3><p>å¦‚ä¸‹å›¾ï¼Œå…¶ä¸­ app a å¥½æ¯”è™šæ‹Ÿæœºcentosä¸­ yum install å„ç§è½¯ä»¶ å¦‚httpdï¼Œ squid<br><figure class="image-box">                <img src="/image/linuxs/vir.png" alt title class>                <p></p>            </figure><br>è¿˜å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/jingzhunbiancheng/article/details/80994909" target="_blank" rel="noopener">Dockerä¸VMè™šæ‹Ÿæœºçš„åŒºåˆ«ä»¥åŠDockerçš„ç‰¹ç‚¹</a><br>è¿˜å¯ä»¥å‚è€ƒ<a href="https://www.zhihu.com/question/48174633" target="_blank" rel="noopener">dockerå®¹å™¨ä¸è™šæ‹Ÿæœºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p><h3 id="ç‰ˆæœ¬"><a href="#ç‰ˆæœ¬" class="headerlink" title="ç‰ˆæœ¬"></a>ç‰ˆæœ¬</h3><p>docker ä¼ä¸šç‰ˆæ˜¯æ”¶è´¹çš„<br>docker-ce æ˜¯ç¤¾åŒºç‰ˆï¼Œå…è´¹çš„ï¼Œä¸€èˆ¬ç”¨ docker-ceç¤¾åŒºç‰ˆã€‚<br><figure class="image-box">                <img src="/image/linuxs/sim.png" alt title class>                <p></p>            </figure></p><h3 id="centosçš„dockerå®‰è£…å’Œä½¿ç”¨"><a href="#centosçš„dockerå®‰è£…å’Œä½¿ç”¨" class="headerlink" title="centosçš„dockerå®‰è£…å’Œä½¿ç”¨"></a>centosçš„dockerå®‰è£…å’Œä½¿ç”¨</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>ä¸‹é¢å®‰è£…æ­¥éª¤å’Œä½¿ç”¨å…¨éƒ¨<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils</span><br><span class="line">#è®¾ç½®ç¨³å®šä»“åº“</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">   --add-repo \</span><br><span class="line">   https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linuxs/ins.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io  #docker-ceæ˜¯å…è´¹ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><p>è‡³æ­¤å®‰è£…å®Œæ¯•</p><h4 id="ä½¿ç”¨ä¸€ï¼š-hello-world"><a href="#ä½¿ç”¨ä¸€ï¼š-hello-world" class="headerlink" title="ä½¿ç”¨ä¸€ï¼š hello-world"></a>ä½¿ç”¨ä¸€ï¼š hello-world</h4><p>å®‰è£…å¥½åï¼Œç›´æ¥çœ‹æ–‡æ¡£è¿™é‡Œ<br><figure class="image-box">                <img src="/image/linuxs/start.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/start1.png" alt title class>                <p></p>            </figure></p><h4 id="ä½¿ç”¨äºŒï¼šå®‰è£…å’Œä½¿ç”¨centos"><a href="#ä½¿ç”¨äºŒï¼šå®‰è£…å’Œä½¿ç”¨centos" class="headerlink" title="ä½¿ç”¨äºŒï¼šå®‰è£…å’Œä½¿ç”¨centos"></a>ä½¿ç”¨äºŒï¼šå®‰è£…å’Œä½¿ç”¨centos</h4><p>æ¶‰åŠåˆ°æ¯”è¾ƒå¤šï¼Œå•ç‹¬åˆ—å‡ºè¯´æ˜:ã€Šå®‰è£…å’Œä½¿ç”¨centosã€‹</p><h4 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -it centos bash</span><br><span class="line">Unable to find image &apos;centos:latest&apos; locally</span><br><span class="line">docker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).</span><br><span class="line">See &apos;docker run --help&apos;.</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡åˆ°è¿™æ ·çš„å¼‚å¸¸ï¼Œè¯·å¤šå°è¯•å‡ æ¬¡</p><h3 id="å®‰è£…å’Œä½¿ç”¨centos"><a href="#å®‰è£…å’Œä½¿ç”¨centos" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨centos"></a>å®‰è£…å’Œä½¿ç”¨centos</h3><h4 id="å®‰è£…å’Œä½¿ç”¨"><a href="#å®‰è£…å’Œä½¿ç”¨" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨"></a>å®‰è£…å’Œä½¿ç”¨</h4><p><code>docker run -it centos bash</code> è¿™ä¸ªå‘½ä»¤æ˜¯ä½¿ç”¨dockerè¿›å…¥ centos çš„bashç»ˆç«¯ï¼›<br>dockerä¼šé¦–å…ˆä»æœ¬åœ°æŸ¥çœ‹æ˜¯å¦æœ‰centosï¼Œå¦‚æœæ— ï¼Œå°±ä¼šè‡ªåŠ¨å®‰è£…centosï¼›<br>ç„¶åè¿›å…¥centos çš„bashç»ˆç«¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -it centos bash</span><br><span class="line">Unable to find image &apos;centos:latest&apos; locally</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">7a0437f04f83: Pull complete</span><br><span class="line">Digest: sha256:5528e8b1b1719d34604c87e11dcd1c0a20bedf46e83b5632cdeac91b8c04efc1</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line">#æ³¨æ„è¿™é‡Œä»¥åŠå˜æˆroot@30c93c21d6d0 ä¸ä¸Šä¸€æ­¥centosä¸»æœºroot@localhost</span><br><span class="line">#è¿™è¯´æ˜å®‰è£…å®Œåï¼Œé»˜è®¤è¿›å…¥centosç»ˆç«¯ï¼Œä¸”ä½¿ç”¨rootç”¨æˆ· </span><br><span class="line">[root@30c93c21d6d0 /]# ls  </span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@30c93c21d6d0 /]# pwd</span><br><span class="line">/</span><br><span class="line">[root@30c93c21d6d0 /]# exit é€€å‡ºdocker centosç³»ç»Ÿï¼Œè¿›å…¥ä¸»æœºcentosç³»ç»Ÿç»ˆç«¯</span><br><span class="line">exit</span><br><span class="line">[root@localhost ~]# pwd</span><br><span class="line">/root</span><br><span class="line">#é€€å‡ºdocker centosç³»ç»Ÿåï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨dockerä½¿ç”¨docker centosç³»ç»Ÿå†…çš„å¯è¿è¡Œç¨‹åºï¼Œ</span><br><span class="line">#æ¯”å¦‚ docker centosç³»ç»Ÿå†…çš„echo ç¨‹åºè¾“å‡ºè¯­å¥</span><br><span class="line">[root@localhost ~]# docker run -it centos /bin/echo &quot;hollo docker..&quot;</span><br><span class="line">hollo docker..</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure></p><h4 id="é€€å‡ºdocker-centosç³»ç»Ÿåä»å¯ä½¿ç”¨"><a href="#é€€å‡ºdocker-centosç³»ç»Ÿåä»å¯ä½¿ç”¨" class="headerlink" title="é€€å‡ºdocker centosç³»ç»Ÿåä»å¯ä½¿ç”¨"></a>é€€å‡ºdocker centosç³»ç»Ÿåä»å¯ä½¿ç”¨</h4><p>é€€å‡ºdocker centosç³»ç»Ÿåï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨dockerä½¿ç”¨docker centosç³»ç»Ÿå†…çš„å¯è¿è¡Œç¨‹åºï¼Œè§ä¸Šé¢ã€Šå®‰è£…å’Œä½¿ç”¨ã€‹çš„å‘½ä»¤è¡Œ</p><h3 id="å…¶ä»–ä»‹ç»"><a href="#å…¶ä»–ä»‹ç»" class="headerlink" title="å…¶ä»–ä»‹ç»"></a>å…¶ä»–ä»‹ç»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images  #dockerå®‰è£…çš„é•œåƒ</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    d1165f221234   3 months ago   13.3kB</span><br><span class="line">centos        latest    300e315adb2f   6 months ago   209MB</span><br><span class="line">[root@localhost ~]# docker ps   #dockerç›®å‰åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œä¸‹é¢æ˜¾ç¤ºæ˜¯æ²¡æœ‰</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@localhost ~]# docker ps -a  #-aè¡¨ç¤ºdockeråˆšæ‰è¿è¡Œçš„è¿›ç¨‹</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">fdc92c41c363   centos        &quot;/bin/echo &apos;hollo doâ€¦&quot;   8 minutes ago    Exited (0) 7 minutes ago              optimistic_volhard</span><br><span class="line">30c93c21d6d0   centos        &quot;bash&quot;                   16 minutes ago   Exited (0) 15 minutes ago             busy_jang</span><br><span class="line">889899077b9c   hello-world   &quot;/hello&quot;                 32 minutes ago   Exited (0) 32 minutes ago             clever_dirac</span><br><span class="line">[root@localhost ~]# docker ps --help</span><br><span class="line"></span><br><span class="line">Usage:  docker ps [OPTIONS]</span><br><span class="line"></span><br><span class="line">List containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all containers (default shows just running)</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided</span><br><span class="line">      --format string   Pretty-print containers using a Go template</span><br><span class="line">  -n, --last int        Show n last created containers (includes all states) (default -1)</span><br><span class="line">  -l, --latest          Show the latest created container (includes all states)</span><br><span class="line">      --no-trunc        Don&apos;t truncate output</span><br><span class="line">  -q, --quiet           Only display container IDs</span><br><span class="line">  -s, --size            Display total file sizes</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h2 id="LNMPæ¶æ„å®‰è£…ä½¿ç”¨"><a href="#LNMPæ¶æ„å®‰è£…ä½¿ç”¨" class="headerlink" title="LNMPæ¶æ„å®‰è£…ä½¿ç”¨"></a>LNMPæ¶æ„å®‰è£…ä½¿ç”¨</h2><h3 id="LNMPæ¶æ„ä»‹ç»"><a href="#LNMPæ¶æ„ä»‹ç»" class="headerlink" title="LNMPæ¶æ„ä»‹ç»"></a>LNMPæ¶æ„ä»‹ç»</h3><p>LNMPæ¶æ„ ï¼š Linux + nginx + mysql + ï¼ˆmariaDBï¼‰ + php çš„å¼€å‘æ¶æ„<br>ç±»ä¼¼çš„æœ‰LAMPæ¶æ„ï¼š<br>LAMPæ¶æ„ : Linux + apache + mysql + ï¼ˆmariaDBï¼‰ + php çš„å¼€å‘æ¶æ„</p><p>php ä¸ apache å¤©ç”Ÿå°±æ­é…ï¼Œä½† nginxä¸phpé€šè®¯å¿…é¡»è¦å®‰è£… FastCGIåè®®ï¼›</p><p>Discuzï¼ ä¸€ä¸ªå›½å†…çš„è®ºå› BBS è½¯ä»¶ç³»ç»Ÿ</p><h3 id="è®¤è¯†FastCGI"><a href="#è®¤è¯†FastCGI" class="headerlink" title="è®¤è¯†FastCGI"></a>è®¤è¯†FastCGI</h3><h4 id="æ¶æ„ç¤ºæ„å›¾"><a href="#æ¶æ„ç¤ºæ„å›¾" class="headerlink" title="æ¶æ„ç¤ºæ„å›¾"></a>æ¶æ„ç¤ºæ„å›¾</h4><figure class="image-box">                <img src="/image/linuxs/fa1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxs/fa3.png" alt title class>                <p></p>            </figure><h4 id="FastCGIæ˜¯ç›¸å¯¹äºæ—©æœŸçš„-CGIè¯´çš„"><a href="#FastCGIæ˜¯ç›¸å¯¹äºæ—©æœŸçš„-CGIè¯´çš„" class="headerlink" title="FastCGIæ˜¯ç›¸å¯¹äºæ—©æœŸçš„ CGIè¯´çš„"></a>FastCGIæ˜¯ç›¸å¯¹äºæ—©æœŸçš„ CGIè¯´çš„</h4><p>ä¸‹é¢æ˜¯æ—©æœŸçš„ CGIæ¶æ„ï¼Œå› ä¸ºæœ‰æŸäº›ä¸è¶³ï¼Œå› æ­¤å°±æœ‰äº†ä¸Šé¢çš„ fastCGI.<br><figure class="image-box">                <img src="/image/linuxs/fa2.png" alt title class>                <p></p>            </figure></p><h4 id="å»¶ç”³è®²è§£-uwsgi"><a href="#å»¶ç”³è®²è§£-uwsgi" class="headerlink" title="å»¶ç”³è®²è§£- uwsgi"></a>å»¶ç”³è®²è§£- uwsgi</h4><figure class="image-box">                <img src="/image/linuxs/fa4.png" alt title class>                <p></p>            </figure><h3 id="FastCGIåè®®-ä¸-php-fpm"><a href="#FastCGIåè®®-ä¸-php-fpm" class="headerlink" title="FastCGIåè®® ä¸ php-fpm"></a>FastCGIåè®® ä¸ php-fpm</h3><p>FastCGIåè®®æ˜¯å¯ä»¥è®©nginxä¸phpè¿›è¡Œé€šè®¯çš„ä¸€ä¸ªåè®®<br>php-fpmå°±æ˜¯ä¸€ä¸ªè¿™æ ·çš„åè®®ï¼š</p><h3 id="php-fpm"><a href="#php-fpm" class="headerlink" title="php-fpm"></a>php-fpm</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>è¡¨ç¤º FastCGI è¿›ç¨‹ç®¡ç†å™¨<br>é»˜è®¤ç›‘å¬9000ç«¯å£</p><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install php-fpm</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.ustc.edu.cn</span><br><span class="line"> * epel: mirrors.thzhost.com</span><br><span class="line"> * extras: mirrors.ustc.edu.cn</span><br><span class="line"> * updates: mirrors.ustc.edu.cn</span><br><span class="line"> * webtatic: us-east.repo.webtatic.com</span><br><span class="line">Resolving Dependencies</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package php-fpm.x86_64 0:5.4.16-48.el7 will be installed</span><br><span class="line">--&gt; Processing Dependency: php-common(x86-64) = 5.4.16-48.el7 for package: php-fpm-5.4.16-48.el7.x86_64</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package php-common.x86_64 0:5.4.16-48.el7 will be installed</span><br><span class="line">--&gt; Processing Conflict: php56w-common-5.6.40-1.w7.x86_64 conflicts php-common &lt; 5.6</span><br><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line">#å› ä¸ºä¹‹å‰å‡çº§äº†phpç‰ˆæœ¬åˆ° php56ï¼Œä¸php-fpm å†²çª</span><br><span class="line">Error: php56w-common conflicts with php-common-5.4.16-48.el7.x86_64</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…å¼‚å¸¸"><a href="#å®‰è£…å¼‚å¸¸" class="headerlink" title="å®‰è£…å¼‚å¸¸"></a>å®‰è£…å¼‚å¸¸</h4><p>å¦‚ä¸Šå› ä¸ºä¹‹å‰å‡çº§äº†phpç‰ˆæœ¬åˆ° php56ï¼Œä¸php-fpm å†²çªï¼Œ<br>æ—¢ç„¶è¿™æ ·ï¼Œå°±ä¸å®‰è£… php-fpmï¼Œå®‰è£… php56w-fpm</p><h4 id="è§£å†³ä¹‹é“"><a href="#è§£å†³ä¹‹é“" class="headerlink" title="è§£å†³ä¹‹é“"></a>è§£å†³ä¹‹é“</h4><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥å¸è½½php56ï¼Œå®‰è£…phpä½ç‰ˆæœ¬ï¼Œä¸è¿‡ä¸å¤ªå¥½ï¼Œç›´æ¥å®‰è£…php56w-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install php-fpm</span><br><span class="line">#å®‰è£…å®Œåï¼Œä¼šå‘ç°nginxç›®å½•ä¸‹ä¸‹å¤šäº†ä¸‹é¢æ–‡ä»¶</span><br><span class="line">[root@localhost ~]# ls /etc/nginx/</span><br><span class="line"> fastcgi.conf.default uwsgi_params fastcgi_params uwsgi_params.default</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><h4 id="å®‰è£…å®Œåç»§ç»­ä½¿ç”¨-php-fpm"><a href="#å®‰è£…å®Œåç»§ç»­ä½¿ç”¨-php-fpm" class="headerlink" title="å®‰è£…å®Œåç»§ç»­ä½¿ç”¨ php-fpm"></a>å®‰è£…å®Œåç»§ç»­ä½¿ç”¨ php-fpm</h4><p>è™½ç„¶å®‰è£…çš„æ˜¯php56w-fpmï¼Œä½†å®‰è£…å¥½åï¼Œä½¿ç”¨æ—¶ï¼Œè¯·ä½¿ç”¨php-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start php-fpm</span><br><span class="line">systemctl enable php-fpm</span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®nginxå’Œphpé€šè®¯"><a href="#é…ç½®nginxå’Œphpé€šè®¯" class="headerlink" title="é…ç½®nginxå’Œphpé€šè®¯"></a>é…ç½®nginxå’Œphpé€šè®¯</h3><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"> location / &#123;</span><br><span class="line">              index index.html index.htm index.php;  #ç½‘é¡µçš„æ–‡ä»¶å¯ä»¥æ˜¯è¿™å‡ ç§ç±»å‹ï¼›</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">#å†æ¬¡å†™ä¸ªlocationï¼Œç”¨æ¥è§£æphpæ–‡ä»¶ï¼Œ ~è¡¨ç¤ºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œ å‡¡æ˜¯åŒ¹é…åˆ°phpçš„æ–‡ä»¶æ—¶</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">          fastcgi_pass 127.0.0.1:9000; #åŒ¹é…åˆ°phpæ–‡ä»¶æ˜¯ï¼Œä¼ é€’ç»™fastcgiï¼Œ9000æ˜¯fastcgié»˜è®¤ç«¯å£</span><br><span class="line">          fastcgi_index index.php;</span><br><span class="line">          #$document_root ä»£è¡¨é…ç½®æ–‡ä»¶ä¸­serveræ¨¡å—ä¸‹çš„root ï¼š /usr/share/nginx/html;</span><br><span class="line">          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  </span><br><span class="line">          include fastcgi_params;</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®é¡µé¢"><a href="#è®¿é—®é¡µé¢" class="headerlink" title="è®¿é—®é¡µé¢"></a>è®¿é—®é¡µé¢</h4><p><a href="https://192.168.1.109/" target="_blank" rel="noopener">https://192.168.1.109/</a><br><figure class="image-box">                <img src="/image/linuxs/ok1.png" alt title class>                <p></p>            </figure><br><a href="https://192.168.1.109/index.php" target="_blank" rel="noopener">https://192.168.1.109/index.php</a><br>æ˜¾ç¤ºä¸‹é¢æ–‡ä»¶ï¼Œè¯´æ˜ phpä¸nginxé€šè®¯æ­£å¸¸äº†ï¼š<br><figure class="image-box">                <img src="/image/linuxs/ok2.png" alt title class>                <p></p>            </figure></p><h4 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h4><p>nginx -t å¯ä»¥è°ƒè¯•é…ç½®æ–‡ä»¶ <code>/etc/nginx/nginx.conf</code> å“ªé‡Œå“ªä¸€è¡Œå‡ºé”™ï¼Œè¯­æ³•å‡ºé”™ã€‚</p><h4 id="å®Œæ•´é…ç½®"><a href="#å®Œæ•´é…ç½®" class="headerlink" title="å®Œæ•´é…ç½®"></a>å®Œæ•´é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# cat /etc/nginx/nginx.conf</span><br><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line"> # upstream backend-apache &#123;</span><br><span class="line">  #    server 127.0.0.1:7080;</span><br><span class="line"> # &#125;</span><br><span class="line"> #upstream backend-jenkins &#123;</span><br><span class="line">  #      server 127.0.0.1:8080;</span><br><span class="line">   # &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;</span><br><span class="line">        listen       [::]:80 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">       return 301 https://$host$request_uri;</span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># Settings for a TLS enabled server.</span><br><span class="line">#</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       443 ssl http2 default_server;</span><br><span class="line">        listen       [::]:443 ssl http2 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        ssl_certificate &quot;/etc/nginx/pki/server.crt&quot;;</span><br><span class="line">        ssl_certificate_key &quot;/etc/nginx/pki/server.key&quot;;</span><br><span class="line">        ssl_session_cache shared:SSL:1m;</span><br><span class="line">        ssl_session_timeout  10m;</span><br><span class="line">        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">      #   location / &#123;</span><br><span class="line">       #         proxy_pass http://backend-apache;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">        #location /jenkins &#123;</span><br><span class="line">         #       proxy_pass http://backend-jenkins;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">              index index.html index.htm index.php;</span><br><span class="line">        &#125;</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">          fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">          fastcgi_index index.php;</span><br><span class="line">          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">          include fastcgi_params;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@localhost html]#</span><br></pre></td></tr></table></figure><h3 id="Discuzè®ºå›æ­å»º-LNMPæ¶æ„çš„å®è·µ"><a href="#Discuzè®ºå›æ­å»º-LNMPæ¶æ„çš„å®è·µ" class="headerlink" title="Discuzè®ºå›æ­å»º(LNMPæ¶æ„çš„å®è·µ)"></a>Discuzè®ºå›æ­å»º(LNMPæ¶æ„çš„å®è·µ)</h3><h4 id="å‚è€ƒå®˜ç½‘å®‰è£…"><a href="#å‚è€ƒå®˜ç½‘å®‰è£…" class="headerlink" title="å‚è€ƒå®˜ç½‘å®‰è£…"></a>å‚è€ƒå®˜ç½‘å®‰è£…</h4><p>Discuzè®ºå› å°±æ˜¯åŸºäºLNMPæ¶æ„<br>Linux + nginx + mysql + ï¼ˆmariaDBï¼‰ + php çš„å¼€å‘æ¶æ„</p><p>å®‰è£…æ•™ç¨‹å‚è€ƒ <a href="https://www.dismall.com/thread-77-1-1.html" target="_blank" rel="noopener">Discuzå®˜ç½‘</a><br>ä»»æ„ç”µè„‘ä¸‹ä¸‹è½½å®‰è£…åŒ…ï¼š<br>è¿›å…¥<a href="https://www.discuz.net/" target="_blank" rel="noopener">é¦–é¡µ</a><br><figure class="image-box">                <img src="/image/linuxs/doc20.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/doc21.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/doc22.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/doc23.png" alt title class>                <p></p>            </figure></p><p>æ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp Discuz_X3.4_SC_UTF8_20210520.zip root@192.168.1.109:/usr/share/nginx/html  è¿™æ˜¯nginxæ–‡æ¡£ç›®å½•</span><br></pre></td></tr></table></figure></p><h4 id="åœ¨æœåŠ¡ç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤"><a href="#åœ¨æœåŠ¡ç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤" class="headerlink" title="åœ¨æœåŠ¡ç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤"></a>åœ¨æœåŠ¡ç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> cd /usr/share/nginx/html/</span><br><span class="line"> unzip Discuz_X3.4_SC_UTF8_20210520.zip</span><br><span class="line">[root@localhost html]# ls</span><br><span class="line"> readme   upload  utility ...  è§£å‹åå¤šå‡ºè¿™å‡ ä¸ªæ–‡ä»¶</span><br><span class="line">[root@localhost html]# rm -rf 404.html 50x.html index.html index.php  åˆ é™¤æ— ç”¨æ–‡ä»¶</span><br><span class="line">[root@localhost html]# mv upload/* .  å°†è§£å‹å‡ºæ¥çš„ upload å†…æ–‡ä»¶ï¼Œç§»åˆ°åˆ°æœ¬ç›®å½•</span><br><span class="line">[root@localhost html]# ls</span><br><span class="line">#æœ‰installæ–‡ä»¶å¤¹ï¼Œå°±æ˜¯åé¢è¦è®¿é—®çš„</span><br><span class="line">admin.php  config           en-US        home.php   install     misc.php        poweredby.png  robots.txt  template   utility</span><br><span class="line">api        connect.php      favicon.ico  icons      LICENSE     nginx-logo.png  qqqun.png      search.php  uc_client</span><br><span class="line">api.php    crossdomain.xml  forum.php    img        m           plugin.php      readme         source      uc_server</span><br><span class="line">archiver   data             group.php    index.php  member.php  portal.php      readme.html    static      upload</span><br><span class="line">[root@localhost html]# chmod -Rf 777 .   è®¾ç½®æƒé™ä¸º777 å¯è¯»å†™</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨Discuzè‡ªå¸¦çš„é¡µé¢å®‰è£…ç¨‹åº-install"><a href="#ä½¿ç”¨Discuzè‡ªå¸¦çš„é¡µé¢å®‰è£…ç¨‹åº-install" class="headerlink" title="ä½¿ç”¨Discuzè‡ªå¸¦çš„é¡µé¢å®‰è£…ç¨‹åº install"></a>ä½¿ç”¨Discuzè‡ªå¸¦çš„é¡µé¢å®‰è£…ç¨‹åº install</h4><p>é¡µé¢è®¿é—® <a href="https://192.168.1.109/install" target="_blank" rel="noopener">https://192.168.1.109/install</a></p><figure class="image-box">                <img src="/image/linuxs/doc1.png" alt title class>                <p></p>            </figure><h4 id="ä¸å¯è¯»å†™çš„é—®é¢˜"><a href="#ä¸å¯è¯»å†™çš„é—®é¢˜" class="headerlink" title="ä¸å¯è¯»å†™çš„é—®é¢˜"></a>ä¸å¯è¯»å†™çš„é—®é¢˜</h4><p>æ˜¯æƒé™çš„é—®é¢˜<br><figure class="image-box">                <img src="/image/linuxs/doc2.png" alt title class>                <p></p>            </figure><br>è§£å†³æ–¹æ³•ä¸€(ä¸æ¨èï¼Œæ­¤æ–¹æ³•å¯èƒ½å¯¼è‡´å¼€æœºå¼‚å¸¸)ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_rw_content_t &quot;(/.*)?&quot;</span><br><span class="line">restorecon -Rv .</span><br></pre></td></tr></table></figure></p><p>ç»ˆæè§£å†³æ–¹æ³•(æ¨è):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">semanage 0</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡åˆ·æ–°é¡µé¢ï¼š<br><figure class="image-box">                <img src="/image/linuxs/ok3.png" alt title class>                <p></p>            </figure></p><p>ç‚¹å‡»ä¸‹ä¸€æ­¥<br><figure class="image-box">                <img src="/image/linuxs/doc3.png" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# mysql -u root -p  #ä¸‹å›¾ä¸­çš„rootå°±æ˜¯æ ¹æ®ä½ è‡ªå·±å®‰è£…åœ¨centosä¸Šçš„mysqlæ¥çš„</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/linuxs/doc4.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxs/doc5.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxs/doc6.png" alt title class>                <p></p>            </figure><p>å‘å¸–<br><figure class="image-box">                <img src="/image/linuxs/doc7.png" alt title class>                <p></p>            </figure><br>ç®¡ç†ä¸­å¿ƒ<br><figure class="image-box">                <img src="/image/linuxs/doc8.png" alt title class>                <p></p>            </figure></p><p>ä»¥åæ¯æ¬¡åªéœ€è¦é€šè¿‡ <a href="https://192.168.1.109/" target="_blank" rel="noopener">https://192.168.1.109/</a> å³å¯è®¿é—®</p><h2 id="æ•‘æ´æ¨¡å¼"><a href="#æ•‘æ´æ¨¡å¼" class="headerlink" title="æ•‘æ´æ¨¡å¼"></a>æ•‘æ´æ¨¡å¼</h2><p>ç”±äºä¸Šé¢é…ç½®Discuzæ—¶ ä¿®æ”¹äº†ä¸Šä¸‹æ–‡ <code>semanage fcontext -a -t httpd_sys_rw_content_t &quot;(/.*)?&quot;</code>ï¼Œ<br>å¯¼è‡´äº†å¼€æœºæœåŠ¡å™¨ centosæ—¶ï¼Œå®‰å…¨éªŒè¯çš„é—®é¢˜ï¼Œæ— æ³•å¼€æœºï¼Œå› æ­¤è¦è¿›å…¥æ•‘æ´æ¨¡å¼ï¼Œå…³é—­ selinuxï¼Œé‡å¯æœºå™¨.<br><figure class="image-box">                <img src="/image/linuxs/help1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/help2.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/help3.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/help4.png" alt title class>                <p></p>            </figure><br>é€šè¿‡ç¼–è¾‘ /etc/selinux/config ç›®å½•ï¼Œå¯ä»¥æ°¸ä¹…å…³é—­seLinuxï¼›<br>å› ä¸ºsetenforce 0 æ˜¯æš‚æ—¶å…³é—­ã€‚<br><figure class="image-box">                <img src="/image/linuxs/help5.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxs/help6.png" alt title class>                <p></p>            </figure></p><p>ç„¶åæ‰§è¡Œå‘½ä»¤<br>exit  é€€å‡º<br>reboot  é‡å¯å°±å¥½äº†</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(å)</title>
      <link href="/2021/06/16/linux_five/"/>
      <url>/2021/06/16/linux_five/</url>
      
        <content type="html"><![CDATA[<h2 id="Nginx-æœåŠ¡å™¨"><a href="#Nginx-æœåŠ¡å™¨" class="headerlink" title="Nginx æœåŠ¡å™¨"></a>Nginx æœåŠ¡å™¨</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å…³äº Nginxï¼Œ<a href="https://www.cnblogs.com/wcwnina/p/8728391.html" target="_blank" rel="noopener">å‚è€ƒåšå®¢</a><br>æ‘˜å½•åšå®¢éƒ¨åˆ†å†…å®¹ï¼š<br>åå‘ä»£ç†ï¼š<br>åå‘ä»£ç†ï¼Œâ€å®ƒä»£ç†çš„æ˜¯æœåŠ¡ç«¯ï¼Œä»£æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚â€ï¼Œä¸»è¦ç”¨äºæœåŠ¡å™¨é›†ç¾¤åˆ†å¸ƒå¼éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œåå‘ä»£ç†éšè—äº†æœåŠ¡å™¨çš„ä¿¡æ¯ã€‚<br><figure class="image-box">                <img src="/image/linuxfi/ng1.png" alt title class>                <p></p>            </figure><br>æ­£å‘ä»£ç†ï¼š<br>æ­£å‘ä»£ç†æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å®¢æˆ·ç«¯éå¸¸æ˜ç¡®è¦è®¿é—®çš„æœåŠ¡å™¨åœ°å€ï¼›æœåŠ¡å™¨åªæ¸…æ¥šè¯·æ±‚æ¥è‡ªå“ªä¸ªä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸æ¸…æ¥šæ¥è‡ªå“ªä¸ªå…·ä½“çš„å®¢æˆ·ç«¯ï¼›æ­£å‘ä»£ç†æ¨¡å¼å±è”½æˆ–è€…éšè—äº†çœŸå®å®¢æˆ·ç«¯ä¿¡æ¯ã€‚<br><figure class="image-box">                <img src="/image/linuxfi/ng2.png" alt title class>                <p></p>            </figure></p><h4 id="apacheã€nginxã€IIS"><a href="#apacheã€nginxã€IIS" class="headerlink" title="apacheã€nginxã€IIS"></a>apacheã€nginxã€IIS</h4><p>é«˜æ€§èƒ½ã€è½»é‡çº§ã€åŠŸèƒ½ä¸°å¯Œã€é…ç½®ç®€å•ã€‚ç”¨cè¯­è¨€å†™çš„ï¼›<br>2004å¹´å‘å¸ƒç¬¬ä¸€ç‰ˆ<br>apacheã€nginxã€IIS å¹¶ç§° æœåŠ¡å™¨ä¸‰å·¨å¤´<br>apache é˜»å¡å‹ã€åŒæ­¥å¤šè¿›ç¨‹ã€‚nginx å¼‚æ­¥ã€éé˜»å¡ã€äº‹ä»¶é©±åŠ¨ï¼›</p><p>ä¸‹å›¾æ—¶æœåŠ¡å™¨æ’åï¼š<br><figure class="image-box">                <img src="/image/linuxfi/ng3.png" alt title class>                <p></p>            </figure></p><h3 id="å®‰è£…å’Œä½¿ç”¨nginx"><a href="#å®‰è£…å’Œä½¿ç”¨nginx" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨nginx"></a>å®‰è£…å’Œä½¿ç”¨nginx</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release  çº¢å¸½ç³»åˆ—é¢å¤–åŒ…ï¼Œnginxå®‰è£…ä¾èµ–æ­¤åŒ…</span><br><span class="line">yum install nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><h4 id="ä¸¤ç§å¯åŠ¨æ–¹å¼"><a href="#ä¸¤ç§å¯åŠ¨æ–¹å¼" class="headerlink" title="ä¸¤ç§å¯åŠ¨æ–¹å¼"></a>ä¸¤ç§å¯åŠ¨æ–¹å¼</h4><p>æ–¹å¼ä¸€ï¼š<br>ç›´æ¥å‘½ä»¤è¡Œ è¾“å…¥ nginxï¼›<br>æ–¹å¼äºŒï¼š<br><code>systemctl start nginx</code></p><p>å¯åŠ¨åè®¿é—®ï¼Œè¿™é‡Œä¼šå‡ºç°centosé¡µé¢ï¼Œæ­¤é¡µé¢æ˜¯nginxé©±åŠ¨çš„é¡µé¢ï¼Œ<br>å¯åœ¨<code>/usr/share/nginx/html/index.html</code>ä¸­é…ç½®<br><a href="http://192.168.1.109/" target="_blank" rel="noopener">http://192.168.1.109/</a><br><figure class="image-box">                <img src="/image/linuxfi/ng4.png" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -ql nginx  æŸ¥çœ‹nginxç›¸å…³é…ç½®</span><br><span class="line">/etc/nginx/nginx.conf  #ä¸»é…ç½®æ–‡ä»¶</span><br><span class="line">/usr/share/nginx/html/index.html  #ä¸Šé¢http://192.168.1.109/æµè§ˆå™¨ä¸Šæ˜¾ç¤ºçš„é¡µé¢</span><br><span class="line">/usr/lib/systemd/system/nginx.service  #å†³å®šäº† å¯ä½¿ç”¨systemctl start nginx å¯åŠ¨</span><br><span class="line">/usr/sbin/nginx #å†³å®šäº† å¯ä½¿ç”¨nginx ç›´æ¥å¯åŠ¨</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨nginxå¤±è´¥çš„è§£å†³æ–¹æ³•"><a href="#å¯åŠ¨nginxå¤±è´¥çš„è§£å†³æ–¹æ³•" class="headerlink" title="å¯åŠ¨nginxå¤±è´¥çš„è§£å†³æ–¹æ³•"></a>å¯åŠ¨nginxå¤±è´¥çš„è§£å†³æ–¹æ³•</h4><p>å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯èƒ½å¯åŠ¨nginxå¤±è´¥ï¼Œå¯èƒ½çš„åŸå› æ˜¯ï¼Œä½ çš„æœºå™¨åŒæ—¶å¯åŠ¨äº†apacheï¼Œ<br>apacheå’Œnginxéƒ½æ˜¯ç›‘å¬80ç«¯å£ï¼Œå› æ­¤å¤±è´¥ã€‚</p><figure class="image-box">                <img src="/image/linuxfi/ng5.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#è§£å†³ä¹‹é“ï¼Œå¯å…³é—­ apacheï¼Œå†æ¬¡å¯åŠ¨nginxï¼š</span><br><span class="line">systemctl stop httpd</span><br><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><h3 id="nginxè¯­æ³•"><a href="#nginxè¯­æ³•" class="headerlink" title="nginxè¯­æ³•"></a>nginxè¯­æ³•</h3><p><a href="http://nginx.org/en/docs/" target="_blank" rel="noopener">å®˜ç½‘æ–‡æ¡£</a></p><h4 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h4><p>æ²¡æœ‰ç”¨èŠ±æ‹¬å·åŒ…å«çš„ï¼Œå°±æ˜¯å…¨å±€å˜é‡ï¼Œæ¯”å¦‚ä¸‹é¢å°±æ˜¯å…¨å±€å˜é‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user nginx;  </span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br></pre></td></tr></table></figure></p><h4 id="èŠ±æ‹¬å·-å±€éƒ¨å˜é‡-å’Œ-åŒºå—"><a href="#èŠ±æ‹¬å·-å±€éƒ¨å˜é‡-å’Œ-åŒºå—" class="headerlink" title="èŠ±æ‹¬å·(å±€éƒ¨å˜é‡ å’Œ åŒºå—)"></a>èŠ±æ‹¬å·(å±€éƒ¨å˜é‡ å’Œ åŒºå—)</h4><p>å¦‚ä¸‹ï¼Œeventsçš„ç›¸å…³åŒºå—ä¿¡æ¯éƒ½å®šä¹‰åœ¨èŠ±æ‹¬å·å†…ï¼ŒèŠ±æ‹¬å·å†…å®šä¹‰çš„å˜é‡æ˜¯å±€éƒ¨å˜é‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å®šä¹‰ä¸€ä¸ªåå­—"><a href="#å®šä¹‰ä¸€ä¸ªåå­—" class="headerlink" title="å®šä¹‰ä¸€ä¸ªåå­—"></a>å®šä¹‰ä¸€ä¸ªåå­—</h4><p>å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  #log_formatå®šä¹‰äº†æ—¥å¿—çš„æ ¼å¼ä»¥ å³ä¾§ä¸€é•¿ä¸²å­—ç¬¦ä¸²æ ¼å¼å½¢å¼ï¼Œ</span><br><span class="line">  #å› ä¸ºaccess_logä¹Ÿè¦ç”¨åˆ°è¿™ä¸²é•¿å­—ç¬¦ä¸²ï¼Œå› æ­¤log_formatç»™å­—ç¬¦ä¸²å®šä¹‰äº†ä¸€ä¸ªåå­— main</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;   #mainä»£è¡¨äº†ä¸Šé¢çš„é•¿å­—ç¬¦ä¸²</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="include-å¯¼å…¥"><a href="#include-å¯¼å…¥" class="headerlink" title="include å¯¼å…¥"></a>include å¯¼å…¥</h4><p>ç›¸å½“äºimportï¼Œåœ¨é…ç½®ä¸­å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include /etc/nginx/conf.d/*.conf;</span><br></pre></td></tr></table></figure></p><h4 id="ä»¥åˆ†å·ç»“å°¾"><a href="#ä»¥åˆ†å·ç»“å°¾" class="headerlink" title="ä»¥åˆ†å·ç»“å°¾"></a>ä»¥åˆ†å·ç»“å°¾</h4><p>ä»£ç è¡Œä»¥åˆ†å·ç»“å°¾ï¼Œå¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_connections 1024;</span><br></pre></td></tr></table></figure></p><h3 id="nginx-å…¶ä»–çŸ¥è¯†ä»‹ç»"><a href="#nginx-å…¶ä»–çŸ¥è¯†ä»‹ç»" class="headerlink" title="nginx å…¶ä»–çŸ¥è¯†ä»‹ç»"></a>nginx å…¶ä»–çŸ¥è¯†ä»‹ç»</h3><h4 id="server-è™šæ‹Ÿä¸»æœº-å’Œ-ç«¯å£æœåŠ¡ç­‰"><a href="#server-è™šæ‹Ÿä¸»æœº-å’Œ-ç«¯å£æœåŠ¡ç­‰" class="headerlink" title="server (è™šæ‹Ÿä¸»æœº å’Œ ç«¯å£æœåŠ¡ç­‰)"></a>server (è™šæ‹Ÿä¸»æœº å’Œ ç«¯å£æœåŠ¡ç­‰)</h4><p>nginx çš„ server ç›¸å½“äº apacheçš„è™šæ‹Ÿä¸»æœºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">      listen       80 default_server;</span><br><span class="line">      listen       [::]:80 default_server;</span><br><span class="line">      server_name  _;</span><br><span class="line">      root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">      # Load configuration files for the default server block.</span><br><span class="line">      include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">      location / &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      error_page 404 /404.html;</span><br><span class="line">      location = /404.html &#123;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      error_page 500 502 503 504 /50x.html;</span><br><span class="line">      location = /50x.html &#123;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h4 id="å…¨å±€å˜é‡å«ä¹‰ä»‹ç»"><a href="#å…¨å±€å˜é‡å«ä¹‰ä»‹ç»" class="headerlink" title="å…¨å±€å˜é‡å«ä¹‰ä»‹ç»"></a>å…¨å±€å˜é‡å«ä¹‰ä»‹ç»</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user nginx;  #è¯´æ˜ç”¨æˆ·æ˜¯nginx</span><br><span class="line">worker_processes auto; #nginx çš„cpu æ ¸å¿ƒæ•°è®¾ç½®ï¼Œå•æ ¸æˆ–å¤šæ ¸ ï¼Œå¯è®¾ç½®å€¼ä¸º auto ï¼Œä¹Ÿå¯ä¸º 1ï¼Œ2ï¼Œ3ç­‰</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123; #nginxæ˜¯åŸºäºäº‹ä»¶çš„</span><br><span class="line">    worker_connections 1024; #å¯¹åº”ä¸Šé¢çš„worker_processesçš„ï¼Œæ¯ä¸ªworkè¿›ç¨‹å¯ä»¥æœ‰å¤šå°‘ä¸ªè¿æ¥</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;&#125; #è¿™é‡Œé…ç½®ä¸€äº›httpåè®®</span><br></pre></td></tr></table></figure><h4 id="nginxä¸»é…ç½®æ–‡ä»¶"><a href="#nginxä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="nginxä¸»é…ç½®æ–‡ä»¶"></a>nginxä¸»é…ç½®æ–‡ä»¶</h4><p>ä»¥ä¸‹æ˜¯ä¸»é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œæ³¨é‡Šä¸€äº›ä¸Šé¢æ²¡æœ‰è§£é‡Šåˆ°çš„å†…å®¹ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]# cat /etc/nginx/nginx.conf</span><br><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;  #nginxé»˜è®¤ä½¿ç”¨80ç«¯å£,è¿™æ˜¯é’ˆå¯¹ ipv4</span><br><span class="line">        listen       [::]:80 default_server; #nginxé»˜è®¤ä½¿ç”¨80ç«¯å£,è¿™æ˜¯é’ˆå¯¹ ipv6</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># Settings for a TLS enabled server.   #nginxå®šä¹‰https</span><br><span class="line">#</span><br><span class="line">#    server &#123;</span><br><span class="line">#        listen       443 ssl http2 default_server;</span><br><span class="line">#        listen       [::]:443 ssl http2 default_server;</span><br><span class="line">#        server_name  _;</span><br><span class="line">#        root         /usr/share/nginx/html;</span><br><span class="line">#</span><br><span class="line">#        ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;;</span><br><span class="line">#        ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;;</span><br><span class="line">#        ssl_session_cache shared:SSL:1m;</span><br><span class="line">#        ssl_session_timeout  10m;</span><br><span class="line">#        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">#        ssl_prefer_server_ciphers on;</span><br><span class="line">#</span><br><span class="line">#        # Load configuration files for the default server block.</span><br><span class="line">#        include /etc/nginx/default.d/*.conf;</span><br><span class="line">#</span><br><span class="line">#        location / &#123;</span><br><span class="line">#        &#125;</span><br><span class="line">#</span><br><span class="line">#        error_page 404 /404.html;</span><br><span class="line">#        location = /404.html &#123;</span><br><span class="line">#        &#125;</span><br><span class="line">#</span><br><span class="line">#        error_page 500 502 503 504 /50x.html;</span><br><span class="line">#        location = /50x.html &#123;</span><br><span class="line">#        &#125;</span><br><span class="line">#    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="é…ç½®nginxä¸ºåå‘ä»£ç†ï¼Œè®¾ç½®https"><a href="#é…ç½®nginxä¸ºåå‘ä»£ç†ï¼Œè®¾ç½®https" class="headerlink" title="é…ç½®nginxä¸ºåå‘ä»£ç†ï¼Œè®¾ç½®https"></a>é…ç½®nginxä¸ºåå‘ä»£ç†ï¼Œè®¾ç½®https</h2><h3 id="é…ç½®httpsæ–¹æ¡ˆ"><a href="#é…ç½®httpsæ–¹æ¡ˆ" class="headerlink" title="é…ç½®httpsæ–¹æ¡ˆ"></a>é…ç½®httpsæ–¹æ¡ˆ</h3><p>æœ¬ä¾‹å±•ç¤º nginx åå‘ä»£ç† apache tomcatçš„Jenkins æœåŠ¡å™¨ã€‚</p><p>å› ä¸º nginx apache å…±åŒç›‘å¬äº† 80 å’Œ 443ç«¯å£ï¼Œ<br>å› æ­¤ç¬¬ä¸€æ­¥ ä¿®æ”¹ apache çš„80 443ç«¯å£ï¼›<br>è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œé¦–å…ˆä¸æ€¥äºç›´æ¥é…ç½®httpsï¼Œè€Œæ˜¯å…ˆé…ç½® nginx http çš„æ–¹å‘ä»£ç†</p><p>ç„¶å å†é…ç½® nginx https çš„åå‘ä»£ç†ï¼›</p><h3 id="ä¿®æ”¹apache"><a href="#ä¿®æ”¹apache" class="headerlink" title="ä¿®æ”¹apache"></a>ä¿®æ”¹apache</h3><h4 id="ä¿®æ”¹apache-80-443-ç«¯å£"><a href="#ä¿®æ”¹apache-80-443-ç«¯å£" class="headerlink" title="ä¿®æ”¹apache 80 443 ç«¯å£"></a>ä¿®æ”¹apache 80 443 ç«¯å£</h4><ul><li>ä¿®æ”¹apache 80 443 ç«¯å£<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/httpd/conf/httpd.conf</span><br><span class="line">#å°†åŸæ¥çš„</span><br><span class="line">#Listen 80</span><br><span class="line">#æ”¹ä¸º</span><br><span class="line">#Listen 7080 http</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> vim /etc/httpd/conf.d/ssl.conf</span><br><span class="line">#å°†åŸæ¥çš„</span><br><span class="line">#Listen 443 https</span><br><span class="line">#æ”¹ä¸º</span><br><span class="line">#Listen 7443 https</span><br><span class="line"></span><br><span class="line">å°†åŸæ¥çš„</span><br><span class="line">#&lt;VirtualHost _default_:443&gt;</span><br><span class="line">#æ”¹ä¸º</span><br><span class="line">#&lt;VirtualHost _default_:7443&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="é‡å¯apacheæŠ¥é”™"><a href="#é‡å¯apacheæŠ¥é”™" class="headerlink" title="é‡å¯apacheæŠ¥é”™"></a>é‡å¯apacheæŠ¥é”™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl restart httpd</span><br><span class="line">#systemctl status httpd.service #æ‰§è¡Œæ­¤å‘½ä»¤æŸ¥çœ‹è¯¦ç»†åŸå› </span><br><span class="line">Job for httpd.service failed because the control process exited with error code. See &quot;systemctl status httpd.service&quot; and &quot;journalctl -xe&quot; for details.</span><br><span class="line">[root@localhost ~]# systemctl status httpd.service</span><br><span class="line">â— httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: failed (Result: exit-code) since Wed 2021-06-16 11:53:40 EDT; 32s ago</span><br><span class="line">     Docs: man:httpd(8)</span><br><span class="line">           man:apachectl(8)</span><br><span class="line">  Process: 2383 ExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND (code=exited, status=1/FAILURE)</span><br><span class="line"> Main PID: 2383 (code=exited, status=1/FAILURE)</span><br><span class="line"></span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Starting The Apache HTTP Se...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: AH00558: httpd: Could not ...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: (13)Permission denied: AH0...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: (13)Permission denied: AH0...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: no listening sockets avail...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: AH00015: Unable to open logs</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: httpd.service: main process...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Failed to start The Apache ...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Unit httpd.service entered ...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: httpd.service failed.</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full. #æœ‰äº›è¡Œè¢«æŠ˜å äº†ï¼Œå‘½ä»¤ååŠ å‚æ•° -l æŸ¥çœ‹æ‰€æœ‰</span><br><span class="line">[root@localhost ~]# systemctl status httpd.service -l</span><br><span class="line">â— httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: failed (Result: exit-code) since Wed 2021-06-16 11:53:40 EDT; 1min 0s ago</span><br><span class="line">     Docs: man:httpd(8)</span><br><span class="line">           man:apachectl(8)</span><br><span class="line">  Process: 2383 ExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND (code=exited, status=1/FAILURE)</span><br><span class="line"> Main PID: 2383 (code=exited, status=1/FAILURE)</span><br><span class="line"></span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Starting The Apache HTTP Server...</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: AH00558: httpd: Could not reliably determine the server&apos;s fully qualified domain name, using localhost.localdomain. Set the &apos;ServerName&apos; directive globally to suppress this message</span><br><span class="line">#å‘ç°æ˜¯7080ç«¯å£é™åˆ¶ï¼Œæ˜¯ SElinux çš„é—®é¢˜</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: (13)Permission denied: AH00072: make_sock: could not bind to address [::]:7080  </span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: (13)Permission denied: AH00072: make_sock: could not bind to address 0.0.0.0:7080</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: no listening sockets available, shutting down</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain httpd[2383]: AH00015: Unable to open logs</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: httpd.service: main process exited, code=exited, status=1/FAILURE</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Failed to start The Apache HTTP Server.</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: Unit httpd.service entered failed state.</span><br><span class="line">Jun 16 11:53:40 localhost.localdomain systemd[1]: httpd.service failed.</span><br></pre></td></tr></table></figure><h4 id="SElinux-å¢åŠ ç«¯å£7080-7443"><a href="#SElinux-å¢åŠ ç«¯å£7080-7443" class="headerlink" title="SElinux å¢åŠ ç«¯å£7080 7443"></a>SElinux å¢åŠ ç«¯å£7080 7443</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# semanage port -l | grep http #æŸ¥çœ‹SElinuxä¸ httpç›¸å…³çš„ç«¯å£</span><br><span class="line">http_cache_port_t              tcp      8080, 8118, 8123, 10001-10010</span><br><span class="line">http_cache_port_t              udp      3130</span><br><span class="line">http_port_t                    tcp      80, 81, 443, 488, 8008, 8009, 8443, 9000  #çœ‹è¿™é‡Œï¼Œç¼ºå°‘äº† 7443 7080</span><br><span class="line">pegasus_http_port_t            tcp      5988</span><br><span class="line">pegasus_https_port_t           tcp      5989</span><br><span class="line">[root@localhost ~]# semanage port -a -t http_port_t -p tcp 7080   #semanageç»™SElinuxå¢åŠ ç«¯å£  http_port_tå¯¹åº”ä¸Šé¢çš„http_port_tï¼Œ å¢åŠ  7080ç«¯å£</span><br><span class="line">[root@localhost ~]# semanage port -a -t http_port_t -p tcp 7443</span><br><span class="line">[root@localhost ~]# semanage port -l | grep http</span><br><span class="line">http_cache_port_t              tcp      8080, 8118, 8123, 10001-10010</span><br><span class="line">http_cache_port_t              udp      3130</span><br><span class="line">http_port_t                    tcp      7443, 7080, 80, 81, 443, 488, 8008, 8009, 8443, 9000</span><br><span class="line">pegasus_http_port_t            tcp      5988</span><br><span class="line">pegasus_https_port_t           tcp      5989</span><br></pre></td></tr></table></figure><h4 id="é˜²ç«å¢™-å¢åŠ ç«¯å£7080-7443"><a href="#é˜²ç«å¢™-å¢åŠ ç«¯å£7080-7443" class="headerlink" title="é˜²ç«å¢™ å¢åŠ ç«¯å£7080 7443"></a>é˜²ç«å¢™ å¢åŠ ç«¯å£7080 7443</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# firewall-cmd --list-ports</span><br><span class="line">443/tcp 80/tcp 3306/tcp 8080/tcp</span><br><span class="line">[root@localhost ~]# firewall-cmd --zone=public --add-port=7080/tcp --permanent</span><br><span class="line">success</span><br><span class="line">[root@localhost ~]# firewall-cmd --zone=public --add-port=7443/tcp --permanent</span><br><span class="line">success</span><br><span class="line">[root@localhost ~]# firewall-cmd --reload</span><br><span class="line">success</span><br><span class="line">[root@localhost ~]# firewall-cmd --list-ports</span><br><span class="line">443/tcp 80/tcp 3306/tcp 8080/tcp 7080/tcp 7443/tcp</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®ç½‘ç«™"><a href="#è®¿é—®ç½‘ç«™" class="headerlink" title="è®¿é—®ç½‘ç«™"></a>è®¿é—®ç½‘ç«™</h4><p><a href="http://192.168.1.109:7080/" target="_blank" rel="noopener">http://192.168.1.109:7080/</a><br><figure class="image-box">                <img src="/image/linuxfi/apa1.png" alt title class>                <p></p>            </figure><br><a href="https://192.168.1.109:7443/" target="_blank" rel="noopener">https://192.168.1.109:7443/</a><br><figure class="image-box">                <img src="/image/linuxfi/apa2.png" alt title class>                <p></p>            </figure></p><h4 id="è®¿é—®å¤±è´¥çš„è§£å†³æ–¹æ³•"><a href="#è®¿é—®å¤±è´¥çš„è§£å†³æ–¹æ³•" class="headerlink" title="è®¿é—®å¤±è´¥çš„è§£å†³æ–¹æ³•"></a>è®¿é—®å¤±è´¥çš„è§£å†³æ–¹æ³•</h4><p>ä¸Šé¢è®¾ç½®åï¼Œä¹Ÿå¯èƒ½å¤±è´¥ï¼Œé‚£å°±æŠŠnginxå…³é—­ï¼Œå†å…ˆæŠŠ é˜²ç«å¢™ å’Œ SElinux éƒ½å…³é—­ï¼Œç„¶åé‡æ–°è®¾ç½®ä¸€æ¬¡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop ç«‹å³åœæ­¢nginxæœåŠ¡</span><br><span class="line">setenforce 0</span><br><span class="line">systemctl stop firewalld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#è®¾ç½®å®Œåï¼Œç«‹å³æ‰§è¡Œï¼š</span><br><span class="line">systemctl restart httpd</span><br><span class="line">#ç„¶åå†æ‰“å¼€ é˜²ç«å¢™ å’Œ sss ï¼Œ</span><br><span class="line">#å†æ¬¡è®¿é—®ï¼Œç»“æœéƒ½å¯ä»¥äº†</span><br><span class="line">setenforce 1</span><br><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®nginxä¸ºhttp-åå‘ä»£ç†"><a href="#é…ç½®nginxä¸ºhttp-åå‘ä»£ç†" class="headerlink" title="é…ç½®nginxä¸ºhttp åå‘ä»£ç†"></a>é…ç½®nginxä¸ºhttp åå‘ä»£ç†</h3><h4 id="é…ç½®nginxçš„http"><a href="#é…ç½®nginxçš„http" class="headerlink" title="é…ç½®nginxçš„http"></a>é…ç½®nginxçš„http</h4><p>/etc/nginx/nginx.conf  æ˜¯nginxä¸»é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost nginx]# nginx  #å¯åŠ¨nginx</span><br><span class="line">[root@localhost nginx]# systemctl start tomcat #å¯åŠ¨jenkins</span><br></pre></td></tr></table></figure><p>å¯åŠ¨tomcatæ˜¯ä¸ºäº†åé¢ nginxé…ç½®è½¬å‘åˆ°tomcatä¸Šçš„Jenkinsæ—¶ç”¨ï¼›</p><p>é¡µé¢å³å¯è®¿é—®ï¼š<br><a href="http://192.168.1.109/" target="_blank" rel="noopener">http://192.168.1.109/</a>   nginxé©±åŠ¨é¡µé¢<br><a href="http://192.168.1.109:8080/jenkins/" target="_blank" rel="noopener">http://192.168.1.109:8080/jenkins/</a>  jenkinsé©±åŠ¨é¡µé¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf </span><br><span class="line"></span><br><span class="line">#åœ¨httpåŒºå—å†…ï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line"></span><br><span class="line">  upstream backend-apache &#123;   #upstreamä¸Šæ¸¸çš„æ„æ€ï¼Œå®šä¹‰apacheæœåŠ¡å™¨åç«¯ï¼Œ æ³¨æ„å®šä¹‰åå­—ä¸è¦ç”¨ä¸‹æ–œæ ï¼Œ</span><br><span class="line">  #å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œbackend_apache è¿™æ ·æ˜¯ä¸å¥½çš„</span><br><span class="line">      server 127.0.0.1:7080;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"> upstream backend-jenkins &#123; #å®šä¹‰jenkinsæœåŠ¡å™¨åç«¯</span><br><span class="line">        server 127.0.0.1:8080;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹httpåŒºå—å†…çš„serveråŒºå—ï¼Œä¿®æ”¹å¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line">  server &#123;</span><br><span class="line">            server_name  www.linuxcoreaqq.com linuxcoreapp.com; #è®¾ç½®åŸŸå ï¼Œä½¿ç”¨ç©ºæ ¼éš”å¼€ å¯è®¾ç½®å¤šä¸ªåŸŸå</span><br><span class="line">            location / &#123;  #locationæ˜¯åŸŸååæ¥çš„pathï¼Œ/ ä»£è¡¨ www.linuxcoreaqq.com å°†é‡å®šå‘è½¬æ¥åˆ° apacheæœåŠ¡å™¨</span><br><span class="line">                    proxy_pass http://backend-apache;   #proxy_pass proxyæ˜¯ä»£ç† passæ˜¯è½¬æ¥ï¼Œ</span><br><span class="line">                    #ä»£ç†åˆ°ä¸Šé¢å®šä¹‰çš„backend_apache apacheæœåŠ¡å™¨</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            location /jenkins &#123;   #/jenkins ä»£è¡¨ www.linuxcoreaqq.com/jenkins å°†é‡å®šå‘è½¬æ¥åˆ°jenkinsæœåŠ¡å™¨</span><br><span class="line">                    proxy_pass http://backend-jenkins;   #ä»£ç†åˆ°ä¸Šé¢å®šä¹‰çš„backend_jenkins  jenkinsæœåŠ¡å™¨</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h4 id="è§£å†³æ£˜æ‰‹çš„é…ç½®é‡è½½æŠ¥é”™"><a href="#è§£å†³æ£˜æ‰‹çš„é…ç½®é‡è½½æŠ¥é”™" class="headerlink" title="è§£å†³æ£˜æ‰‹çš„é…ç½®é‡è½½æŠ¥é”™"></a>è§£å†³æ£˜æ‰‹çš„é…ç½®é‡è½½æŠ¥é”™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# nginx -s reload #æŠ¥é”™</span><br><span class="line">nginx: [error] open() &quot;/run/nginx.pid&quot; failed (2: No such file or directory)</span><br><span class="line">[root@localhost ~]# systemctl restart nginx #ä¹Ÿå¤±è´¥æŠ¥é”™</span><br><span class="line">[root@localhost ~]# nginx æŠ¥é”™</span><br><span class="line">nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)</span><br></pre></td></tr></table></figure><p>å…¶å®ä»¥ä¸Šé—®é¢˜ï¼Œéƒ½æ˜¯ä¸€ä¸ªåŸå› ï¼Œå°±æ˜¯80ç«¯å£è¢«å ç”¨ï¼Œå› æ­¤å½“åŠ¡ä¹‹æ€¥å°±æ˜¯æ€æ‰æ‰€æœ‰ 80ç«¯å£å ç”¨çš„ç¨‹åºï¼ŒåŒ…æ‹¬ nginxè‡ªå·±ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">netstat -anp |grep 80  #æŸ¥çœ‹æ‰€æœ‰å ç”¨80ç«¯å£çš„pidè¿›ç¨‹</span><br><span class="line">kill -9 1796 1797  kill -9 #æ˜¯å›ºå®šå†™æ³•ï¼Œåé¢è·Ÿpid</span><br><span class="line">nginx  #æˆåŠŸäº†ï¼Œä¸æŠ¥é”™äº†</span><br><span class="line">nginx -s reload  #æˆåŠŸäº†ï¼Œä¸æŠ¥é”™äº†</span><br></pre></td></tr></table></figure></p><h4 id="é…ç½®nginxçš„httpæˆåŠŸ"><a href="#é…ç½®nginxçš„httpæˆåŠŸ" class="headerlink" title="é…ç½®nginxçš„httpæˆåŠŸ"></a>é…ç½®nginxçš„httpæˆåŠŸ</h4><p>127.0.0.1:7080<br>å¦‚ä¸Šé¢nginxä»£ç ï¼Œ</p><ul><li>å°±æ˜¯ å½“è®¿é—® <a href="http://192.168.1.109/" target="_blank" rel="noopener">http://192.168.1.109/</a> æ—¶ï¼Œå°†è¯·æ±‚è½¬å‘åˆ° <a href="http://127.0.0.1:7080" target="_blank" rel="noopener">http://127.0.0.1:7080</a>  ä¸Š(apacheæœåŠ¡å™¨)ï¼›</li><li>å°±æ˜¯ å½“è®¿é—® <a href="http://192.168.1.109/jenkins" target="_blank" rel="noopener">http://192.168.1.109/jenkins</a> æ—¶ï¼Œå°†è¯·æ±‚è½¬å‘åˆ° <a href="http://127.0.0.1:8080" target="_blank" rel="noopener">http://127.0.0.1:8080</a>  ä¸Š(tomcatæœåŠ¡å™¨)ï¼›</li></ul><p>ç°åœ¨è®¿é—®å¦‚ä¸‹ï¼Œè¯´æ˜æˆåŠŸäº†ï¼š<br><a href="http://192.168.1.109/" target="_blank" rel="noopener">http://192.168.1.109/</a><br><figure class="image-box">                <img src="/image/linuxfi/proxy1.png" alt title class>                <p></p>            </figure><br><a href="http://192.168.1.109/jenkins" target="_blank" rel="noopener">http://192.168.1.109/jenkins</a><br><figure class="image-box">                <img src="/image/linuxfi/proxy2.png" alt title class>                <p></p>            </figure></p><p>å®¢æˆ·æœºé…ç½®å¥½ hoståï¼Œä¹Ÿå¯é€šè¿‡åŸŸåè®¿é—®ï¼Œå¦‚<br><a href="http://www.linuxcoreaqq.com/jenkins" target="_blank" rel="noopener">http://www.linuxcoreaqq.com/jenkins</a></p><h3 id="nginx-é…ç½®https-åå‘ä»£ç†"><a href="#nginx-é…ç½®https-åå‘ä»£ç†" class="headerlink" title="nginx é…ç½®https åå‘ä»£ç†"></a>nginx é…ç½®https åå‘ä»£ç†</h3><p>å°†æ‰€æœ‰çš„httpè¯·æ±‚ï¼Œé‡å®šå‘åˆ°httpsè¯·æ±‚ï¼›</p><h4 id="ç”Ÿæˆ-è¯ä¹¦å’Œç§é’¥"><a href="#ç”Ÿæˆ-è¯ä¹¦å’Œç§é’¥" class="headerlink" title="ç”Ÿæˆ è¯ä¹¦å’Œç§é’¥"></a>ç”Ÿæˆ è¯ä¹¦å’Œç§é’¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls /etc/httpd/pki/  #åœ¨é…ç½®apache httpsæ—¶ï¼Œæˆ‘ä»¬ç”Ÿæˆè¿‡ä¸¤ä¸ªå…¬é’¥ ç§é’¥ï¼Œä»¥æ­¤é…ç½®nginxï¼›</span><br><span class="line">server.crt  server.csr  server.key</span><br><span class="line">[root@localhost ~]# cd /etc/nginx/</span><br><span class="line">[root@localhost nginx]# mkdir pki</span><br><span class="line">[root@localhost nginx]# cd pki</span><br><span class="line">[root@localhost pki]# cp /etc/httpd/pki/server.crt /etc/httpd/pki/server.key .   #å°†apacheé…ç½®çš„å…¬é’¥ ç§é’¥æ”¾åˆ° æ­¤ç›®å½•</span><br><span class="line">[root@localhost pki]# ls</span><br><span class="line">server.crt  server.key</span><br><span class="line">[root@localhost pki]# pwd</span><br><span class="line">/etc/nginx/pki</span><br></pre></td></tr></table></figure><h4 id="é…ç½®-443ç«¯å£"><a href="#é…ç½®-443ç«¯å£" class="headerlink" title="é…ç½® 443ç«¯å£"></a>é…ç½® 443ç«¯å£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost pki]# vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>https åœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­å·²ç»é…ç½®å¥½ï¼Œåªæ˜¯æ³¨é‡Šäº†ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯æ”¾å¼€æ³¨é‡Šï¼›<br>ç„¶ååšä»¥ä¸‹ä¿®æ”¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssl_certificate &quot;/etc/nginx/pki/server.crt&quot;;</span><br><span class="line">ssl_certificate_key &quot;/etc/nginx/pki/server.key&quot;;</span><br></pre></td></tr></table></figure></p><h4 id="åœ¨80-ç«¯å£-åŒºå—ä¸­å®šä¹‰ï¼š"><a href="#åœ¨80-ç«¯å£-åŒºå—ä¸­å®šä¹‰ï¼š" class="headerlink" title="åœ¨80 ç«¯å£ åŒºå—ä¸­å®šä¹‰ï¼š"></a>åœ¨80 ç«¯å£ åŒºå—ä¸­å®šä¹‰ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#301é‡å®šå‘  $host$request_uri æ˜¯nginxçš„ä¸¤ä¸ªå˜é‡ï¼Œåˆ†åˆ«ä»£è¡¨ ä¸»æœºåœ°å€ å’Œurlåçš„è·¯å¾„</span><br><span class="line">return 301 https://$host$request_uri;</span><br></pre></td></tr></table></figure><p>å¹¶å°†ä¸‹é¢é…ç½® ä» 80 åŒºå— ç§»åŠ¨è‡³ 443ç«¯å£åŒºå—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">            proxy_pass http://backend-apache;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /jenkins &#123;</span><br><span class="line">            proxy_pass http://backend-jenkins;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h4 id="å®Œæ•´çš„é…ç½®"><a href="#å®Œæ•´çš„é…ç½®" class="headerlink" title="å®Œæ•´çš„é…ç½®"></a>å®Œæ•´çš„é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost pki]# cat /etc/nginx/nginx.conf</span><br><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line">  upstream backend-apache &#123;</span><br><span class="line">      server 127.0.0.1:7080;</span><br><span class="line">  &#125;</span><br><span class="line"> upstream backend-jenkins &#123;</span><br><span class="line">        server 127.0.0.1:8080;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;</span><br><span class="line">        listen       [::]:80 default_server;</span><br><span class="line">        server_name  www.linuxcoreaqq.com linuxcoreapp.com;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">       return 301 https://$host$request_uri;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># Settings for a TLS enabled server.</span><br><span class="line">#</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       443 ssl http2 default_server;</span><br><span class="line">        listen       [::]:443 ssl http2 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        ssl_certificate &quot;/etc/nginx/pki/server.crt&quot;;</span><br><span class="line">        ssl_certificate_key &quot;/etc/nginx/pki/server.key&quot;;</span><br><span class="line">        ssl_session_cache shared:SSL:1m;</span><br><span class="line">        ssl_session_timeout  10m;</span><br><span class="line">        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">         location / &#123;</span><br><span class="line">                proxy_pass http://backend-apache;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /jenkins &#123;</span><br><span class="line">                proxy_pass http://backend-jenkins;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµè§ˆå™¨è®¿é—®http-ä¼š-è‡ªåŠ¨è½¬-https"><a href="#æµè§ˆå™¨è®¿é—®http-ä¼š-è‡ªåŠ¨è½¬-https" class="headerlink" title="æµè§ˆå™¨è®¿é—®http ä¼š è‡ªåŠ¨è½¬ https"></a>æµè§ˆå™¨è®¿é—®http ä¼š è‡ªåŠ¨è½¬ https</h4><p><a href="http://www.linuxcoreaqq.com/jenkins" target="_blank" rel="noopener">http://www.linuxcoreaqq.com/jenkins</a> å°†è¢«é‡å®šå‘åˆ°httpsï¼š<br><a href="https://www.linuxcoreaqq.com/jenkins" target="_blank" rel="noopener">https://www.linuxcoreaqq.com/jenkins</a></p><figure class="image-box">                <img src="/image/linuxfi/https.png" alt title class>                <p></p>            </figure><h3 id="è¿‡ç¨‹åˆ†æ"><a href="#è¿‡ç¨‹åˆ†æ" class="headerlink" title="è¿‡ç¨‹åˆ†æ"></a>è¿‡ç¨‹åˆ†æ</h3><h4 id="è¿‡ç¨‹æè¿°"><a href="#è¿‡ç¨‹æè¿°" class="headerlink" title="è¿‡ç¨‹æè¿°"></a>è¿‡ç¨‹æè¿°</h4><p>ä¸Šé¢é¦–å…ˆåˆ©ç”¨ nginx ä»£ç†äº†æ‰€æœ‰çš„httpè¯·æ±‚ï¼Œ301é‡å®šå‘åˆ° httpsï¼›<br>ä»æ­¤ å®¢æˆ·ç«¯ å‘å¾€æœåŠ¡ç«¯çš„è¯·æ±‚ éƒ½æ˜¯httpsï¼›<br>nginx ç›‘å¬ 443è¯·æ±‚ï¼Œæ¥æ”¶å®¢æˆ·ç«¯çš„httpsè¯·æ±‚ï¼›<br>ç„¶åå°†å®¢æˆ·ç«¯ä»¥httpå½¢å¼è½¬å‘ç»™ å¯¹åº”çš„æœåŠ¡ç«¯(Jenkins æˆ– apache)</p><h4 id="nginx-æ‹¦æˆªäº†æ‰€æœ‰-å®¢æˆ·ç«¯httpè¯·æ±‚ï¼Œå¹¶å“åº”301"><a href="#nginx-æ‹¦æˆªäº†æ‰€æœ‰-å®¢æˆ·ç«¯httpè¯·æ±‚ï¼Œå¹¶å“åº”301" class="headerlink" title="nginx æ‹¦æˆªäº†æ‰€æœ‰ å®¢æˆ·ç«¯httpè¯·æ±‚ï¼Œå¹¶å“åº”301"></a>nginx æ‹¦æˆªäº†æ‰€æœ‰ å®¢æˆ·ç«¯httpè¯·æ±‚ï¼Œå¹¶å“åº”301</h4><p>å¦‚ä¸Šnginxæ‹¦æˆªäº†æ‰€æœ‰httpè¯·æ±‚ï¼Œå¹¶ç»™å®ƒä»¬é‡å®šå‘äº† httpsï¼Œ æ­¤æ—¶nginx ç›¸å½“äºæœåŠ¡å™¨ï¼›</p><h4 id="nginx-ç›‘å¬äº†æ‰€æœ‰è¯·æ±‚httpsï¼Œå¹¶ä»£ç†è½¬å‘-åå‘ä»£ç†"><a href="#nginx-ç›‘å¬äº†æ‰€æœ‰è¯·æ±‚httpsï¼Œå¹¶ä»£ç†è½¬å‘-åå‘ä»£ç†" class="headerlink" title="nginx ç›‘å¬äº†æ‰€æœ‰è¯·æ±‚httpsï¼Œå¹¶ä»£ç†è½¬å‘ (åå‘ä»£ç†)"></a>nginx ç›‘å¬äº†æ‰€æœ‰è¯·æ±‚httpsï¼Œå¹¶ä»£ç†è½¬å‘ (åå‘ä»£ç†)</h4><p>å¦‚ä¸Š nginx ç›‘å¬äº†æ‰€æœ‰httpsè¯·æ±‚ï¼Œå¹¶å°†å®ƒä»¬çš„è¯·æ±‚è½¬å‘ä»£ç†åˆ° å¯¹åº”çš„ Jenkins æˆ– apache æœåŠ¡å™¨ä¸Šã€‚</p><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>å½“æ‰€æœ‰è®¿é—®éƒ½é€šè¿‡åå‘ä»£ç†å¹¶ä¸”é˜»æ­¢å¯¹åç«¯çš„ç›´æ¥è®¿é—®æ—¶<br>å®‰å…¨æ€§å¾—åˆ°äº†å¢å¼ºã€‚<br>å¦‚æœ¬ä¾‹ä¸­ï¼Œ å®¢æˆ·ç«¯ä¸ç›´æ¥è®¿é—®åç«¯ï¼Œè€Œæ˜¯å…ˆä¸ nginx ä¹‹é—´è¿›è¡Œhttpsé€šä¿¡ï¼Œå¢åŠ äº†å®‰å…¨æ€§ï¼›<br>å†ç”±nginxä¸åç«¯ è¿›è¡Œhttp è®¿é—®ï¼Œä¸ä¼šè¢«æŠ“åŒ…ã€‚</p><h4 id="å€¼å¾—æ³¨æ„çš„æ˜¯"><a href="#å€¼å¾—æ³¨æ„çš„æ˜¯" class="headerlink" title="å€¼å¾—æ³¨æ„çš„æ˜¯"></a>å€¼å¾—æ³¨æ„çš„æ˜¯</h4><p>nginx å³å¯ä½œä¸ºæ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨</p><h2 id="Squid-ä½œä¸ºä»£ç†ç¼“å­˜æœåŠ¡å™¨"><a href="#Squid-ä½œä¸ºä»£ç†ç¼“å­˜æœåŠ¡å™¨" class="headerlink" title="Squid ä½œä¸ºä»£ç†ç¼“å­˜æœåŠ¡å™¨"></a>Squid ä½œä¸ºä»£ç†ç¼“å­˜æœåŠ¡å™¨</h2><h3 id="ä»£ç†ç¼“å­˜"><a href="#ä»£ç†ç¼“å­˜" class="headerlink" title="ä»£ç†ç¼“å­˜"></a>ä»£ç†ç¼“å­˜</h3><p>ä½¿ç”¨ä»£ç†ç¼“å­˜å¯ä»¥è®©ç”¨æˆ·è·å¾—æ›´å¿«çš„èµ„æºè®¿é—®ï¼Œä¹ŸèŠ‚çœå¸¦å®½ï¼›<br>ä»£ç†ç¼“å­˜çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯å®ƒå¯ä»¥æˆæƒæˆ–ç¦æ­¢è®¿é—®æŸäº›åœ¨çº¿èµ„æºï¼›<br>ç½‘ç«™ï¼Œç«¯å£ï¼ŒæœåŠ¡ï¼Œç­‰ã€‚å¯ä»¥ä¸ºæ•´ä¸ªå±€åŸŸç½‘è®¾ç½®å…¨å±€çš„å®‰å…¨ç­–ç•¥ï¼›</p><h3 id="ä½¿ç”¨ä»£ç†ç¼“å­˜çš„å‡ ç§æ–¹æ³•"><a href="#ä½¿ç”¨ä»£ç†ç¼“å­˜çš„å‡ ç§æ–¹æ³•" class="headerlink" title="ä½¿ç”¨ä»£ç†ç¼“å­˜çš„å‡ ç§æ–¹æ³•"></a>ä½¿ç”¨ä»£ç†ç¼“å­˜çš„å‡ ç§æ–¹æ³•</h3><ul><li>ä»£ç†ç¼“å­˜çš„ä½¿ç”¨å¯ä»¥æ˜¯å¯é€‰çš„ï¼Œéå¼ºåˆ¶çš„</li><li>ä»£ç†ç¼“å­˜çš„ä½¿ç”¨å¯ä»¥æ˜¯å¼ºåˆ¶ä¸”æ˜¾å¼çš„ï¼Œè®¿é—®äº’è”ç½‘çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡ç¼“å­˜ï¼Œä½†ç”¨æˆ·å¿…é¡»æ‰‹åŠ¨é…ç½®å…¶æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ç¨‹åº</li><li>ä»£ç†ç¼“å­˜çš„ä½¿ç”¨å¯ä»¥æ˜¯å¼ºåˆ¶ä¸”éšå¼çš„ï¼Œç”¨æˆ·æ— éœ€ä»»ä½•é…ç½®ï¼›</li></ul><h3 id="Squidä»‹ç»"><a href="#Squidä»‹ç»" class="headerlink" title="Squidä»‹ç»"></a>Squidä»‹ç»</h3><p>Squid é±¿é±¼ ä¹Œè´¼ çš„æ„æ€ï¼Œ å³å¯é…ç½®ä¸ºæ­£å‘ä»£ç†ï¼Œä¹Ÿå¯ä»¥é…ç½®ä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼›<br>é»˜è®¤ç›‘å¬3128ç«¯å£</p><h3 id="squid-çš„é…ç½®æ–‡ä»¶"><a href="#squid-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="squid çš„é…ç½®æ–‡ä»¶"></a>squid çš„é…ç½®æ–‡ä»¶</h3><p>ä¸»é…ç½®æ–‡ä»¶ <code>/etc/squid/squid.conf</code></p><p>ç­›é€‰æ­¤æ–‡ä»¶çš„å†…å®¹ï¼šgrep -vE â€œ^#|^$â€ /etc/squid/squid.conf<br>-E æ˜¯ä½¿ç”¨æ­£å¸¸è¡¨è¾¾å¼ -væ˜¯å–å  â€œ^#|^$â€ â€œä»¥äº•å·å¼€å|ä»¥ç»“å°¾å¼€å¤´(ç©ºè¡Œ)â€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# grep -vE &quot;^#|^$&quot; /etc/squid/squid.conf</span><br><span class="line">acl localnet src 10.0.0.0/8     # RFC1918 possible internal network #localnet #acl æŒ‡ä»¤</span><br><span class="line">acl localnet src 172.16.0.0/12  # RFC1918 possible internal network #localnet #acl æŒ‡ä»¤</span><br><span class="line">acl localnet src 192.168.0.0/16 # RFC1918 possible internal network #localnet #acl æŒ‡ä»¤</span><br><span class="line">acl localnet src fc00::/7       # RFC 4193 local private network range #localnet #acl æŒ‡ä»¤ï¼Œè¿™æ˜¯ipv6</span><br><span class="line">acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines #localnet #acl æŒ‡ä»¤ï¼Œè¿™æ˜¯ipv6</span><br><span class="line">acl SSL_ports port 443</span><br><span class="line">acl Safe_ports port 80          # http</span><br><span class="line">acl Safe_ports port 21          # ftp</span><br><span class="line">acl Safe_ports port 443         # https</span><br><span class="line">acl Safe_ports port 70          # gopher</span><br><span class="line">acl Safe_ports port 210         # wais</span><br><span class="line">acl Safe_ports port 1025-65535  # unregistered ports</span><br><span class="line">acl Safe_ports port 280         # http-mgmt</span><br><span class="line">acl Safe_ports port 488         # gss-http</span><br><span class="line">acl Safe_ports port 591         # filemaker</span><br><span class="line">acl Safe_ports port 777         # multiling http</span><br><span class="line">acl CONNECT method CONNECT</span><br><span class="line">http_access deny !Safe_ports  #æ‹’ç»éSafe_portsçš„ç«¯å£</span><br><span class="line">http_access deny CONNECT !SSL_ports</span><br><span class="line">http_access allow localhost manager</span><br><span class="line">http_access deny manager</span><br><span class="line">http_access allow localnet</span><br><span class="line">http_access allow localhost</span><br><span class="line">http_access deny all  #http_access çš„æŒ‡ä»¤çš„ç»“å°¾æœ€å¥½ç”¨ denyç»“å°¾ï¼Œè·Ÿ switch breackä¸€æ ·</span><br><span class="line">http_port 3128</span><br><span class="line">coredump_dir /var/spool/squid</span><br><span class="line">refresh_pattern ^ftp:           1440    20%     10080</span><br><span class="line">refresh_pattern ^gopher:        1440    0%      1440</span><br><span class="line">refresh_pattern -i (/cgi-bin/|\?) 0     0%      0</span><br><span class="line">refresh_pattern .               0       20%     4320</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h3 id="http-port-æŒ‡ä»¤"><a href="#http-port-æŒ‡ä»¤" class="headerlink" title="http_port æŒ‡ä»¤"></a>http_port æŒ‡ä»¤</h3><p>æŒ‡å®šsquid ç›‘å¬çš„åœ°å€å’Œç«¯å£<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œsquidç›‘å¬3128ç«¯å£ä¸Šæ‰€æœ‰çš„ç½‘ç»œæ¥å£ï¼›<br>å¯ä»¥é…ç½®å¤šä¸ªhttp_portæŒ‡ä»¤ï¼Œä»¥ä¾¿squidç›‘å¬å¤šä¸ªåœ°å€æˆ–ç«¯å£</p><h3 id="acl-æŒ‡ä»¤"><a href="#acl-æŒ‡ä»¤" class="headerlink" title="acl æŒ‡ä»¤"></a>acl æŒ‡ä»¤</h3><p>access control listsç¼©å†™è¡¨ç¤º è®¿é—®æ§åˆ¶åˆ—è¡¨<br>ACLæ˜¯è®¿é—®æ§åˆ¶è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ä¹‹åå°†è¢« http_accessä½¿ç”¨<br>ç”¨äºæ ¹æ®è¿™äº›è§„åˆ™å…è®¸æˆ–ç¦æ­¢è¿æ¥</p><p>ä¸‹é¢æ˜¯aclæŒ‡ä»¤<br> acl localnet src 10.0.0.0/8     # RFC1918 possible internal network</p><p>ç¬¬äºŒä¸ªå­—æ®µæ˜¯ACLçš„åç§°<br>å…·æœ‰ç›¸åŒåç§°çš„å¤šä¸ªaclæŒ‡ä»¤å°†å åŠ æ¯ä¸ªæŒ‡ä»¤çš„æ¡ä»¶</p><p>ç¬¬ä¸‰ä¸ªå­—æ®µæ˜¯ACLçš„ç±»å‹<br>æœ€é‡è¦çš„æ˜¯src æ¥æºï¼Œ<br>å¦å¤–è¿˜æœ‰ dst ç›®çš„åœ°ï¼Œ port ç«¯å£ï¼Œ time æ—¶é—´ï¼›</p><p>ç¬¬å››ä¸ªå­—æ®µæ˜¯aclçš„å€¼<br>æ ¹æ®aclçš„ç±»å‹ï¼Œå€¼å¯ä»¥æ˜¯ç½‘ç»œåœ°å€ï¼Œç«¯å£ ç­‰ç­‰ï¼›</p><h3 id="http-accessæŒ‡ä»¤"><a href="#http-accessæŒ‡ä»¤" class="headerlink" title="http_accessæŒ‡ä»¤"></a>http_accessæŒ‡ä»¤</h3><p>http_accessæŒ‡ä»¤åæ¥ allow æˆ– deny<br>ç”¨äºæ§åˆ¶å¯¹ä»£ç†ç¼“å­˜çš„è®¿é—®ï¼Œæ‹’ç»æˆ–å…è®¸ã€‚<br>ä½¿ç”¨ç‰¹ç‚¹ï¼Œå»ºè®®ä»¥denyç»“å°¾ï¼Œç”¨ï¼è¡¨ç¤ºéã€‚<br>http_access deny !Safe_ports  #æ‹’ç»éSafe_portsçš„ç«¯å£<br>http_access deny all  #httpd çš„æŒ‡ä»¤çš„ç»“å°¾æœ€å¥½ç”¨ denyç»“å°¾ï¼Œè·Ÿ switch breackä¸€æ ·</p><h2 id="Squidä½¿ç”¨ä¸¾ä¾‹"><a href="#Squidä½¿ç”¨ä¸¾ä¾‹" class="headerlink" title="Squidä½¿ç”¨ä¸¾ä¾‹"></a>Squidä½¿ç”¨ä¸¾ä¾‹</h2><h3 id="Squidé…ç½®å’Œä½¿ç”¨"><a href="#Squidé…ç½®å’Œä½¿ç”¨" class="headerlink" title="Squidé…ç½®å’Œä½¿ç”¨"></a>Squidé…ç½®å’Œä½¿ç”¨</h3><h4 id="æœåŠ¡å™¨å®‰è£…squid"><a href="#æœåŠ¡å™¨å®‰è£…squid" class="headerlink" title="æœåŠ¡å™¨å®‰è£…squid"></a>æœåŠ¡å™¨å®‰è£…squid</h4><p>å®‰è£… <code>yum install squid</code></p><h4 id="é…ç½®å®¢æˆ·æœºcentos"><a href="#é…ç½®å®¢æˆ·æœºcentos" class="headerlink" title="é…ç½®å®¢æˆ·æœºcentos"></a>é…ç½®å®¢æˆ·æœºcentos</h4><p>å…ˆå…³é—­å®¢æˆ·æœºï¼›<br>é…ç½®ç½‘ç»œé€‚é…å™¨ï¼Œé€‰æ‹©æ¡¥æ¥æ¨¡å¼<br><figure class="image-box">                <img src="/image/linuxfi/stu1.png" alt title class>                <p></p>            </figure><br>é‡å¯å®¢æˆ·æœºï¼Œ<br>ç›®å‰å®¢æˆ·æœºæ˜¯å¯ä»¥æ­£å¸¸ä¸Šç½‘çš„ï¼Œæˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºä¸èƒ½ä¸Šç½‘ï¼›<br>æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmtui</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linuxfi/stu2.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxfi/stu3.png" alt title class>                <p></p>            </figure><p>è®¾ç½®ä¸€ä¸ªè·Ÿ æœåŠ¡å™¨ä¸€æ ·çš„æ®µçš„åœ°å€ï¼Œ192.168.1.xxx, è¿™é‡Œè®¾ç½®ä¸º192.168.1.116<br>24æ˜¯å­ç½‘æ©ç ä¸º255.255.255.0 çš„æ„æ€ï¼›<br>ç½‘å…³å’Œdnsä¸è¦è®¾ç½®ï¼Œè¿™æ ·å®¢æˆ·æœºå°±ä¸èƒ½ä¸Šç½‘ï¼Œè¾¾åˆ°ç›®çš„ï¼›<br><figure class="image-box">                <img src="/image/linuxfi/stu4.png" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ systemctl restart network</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.1.116  netmask 255.255.255.0  broadcast 192.168.1.255</span><br><span class="line">[hz@localhost ~]$ ping baidu.com #ä¸èƒ½è”ç½‘</span><br><span class="line">ping: baidu.com: Name or service not known</span><br><span class="line">[hz@localhost ~]$ ping 192.168.1.109  #å¯ä»¥è¿åˆ°å±€åŸŸç½‘</span><br><span class="line">--- 192.168.1.109 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2002ms</span><br><span class="line">rtt min/avg/max/mdev = 0.654/0.679/0.712/0.024 ms</span><br></pre></td></tr></table></figure><p>æ‰“å¼€å®¢æˆ·æœºç«ç‹æµè§ˆå™¨ï¼Œè®¾ç½®å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/linuxfi/stu5.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxfi/stu6.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxfi/stu7.png" alt title class>                <p></p>            </figure><br>æ‹’ç»è®¿é—®ï¼ŒåŸæ¥æ˜¯æœåŠ¡ç«¯æ²¡æœ‰å¼€æ”¾3128 é˜²ç«å¢™ç«¯å£<br><figure class="image-box">                <img src="/image/linuxfi/stu8.png" alt title class>                <p></p>            </figure></p><h4 id="å¼€æ”¾æœåŠ¡å™¨ç«¯é˜²ç«å¢™-3128ç«¯å£"><a href="#å¼€æ”¾æœåŠ¡å™¨ç«¯é˜²ç«å¢™-3128ç«¯å£" class="headerlink" title="å¼€æ”¾æœåŠ¡å™¨ç«¯é˜²ç«å¢™ 3128ç«¯å£"></a>å¼€æ”¾æœåŠ¡å™¨ç«¯é˜²ç«å¢™ 3128ç«¯å£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# firewall-cmd --zone=public --add-port=3128/tcp --permanent</span><br><span class="line">success</span><br><span class="line">[root@localhost ~]# firewall-cmd --reload</span><br><span class="line">success</span><br><span class="line">[root@localhost ~]# firewall-cmd --list-ports</span><br><span class="line">443/tcp 80/tcp 3306/tcp 8080/tcp 7080/tcp 7443/tcp 3128/tcp</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆä¸ç”¨è®¾ç½® SElinux ç«¯å£å‘¢ï¼Œ<br>å› ä¸º SElinux é»˜è®¤å¼€æ”¾æ­¤ç«¯å£ï¼Œå¯ä»¥è¿™æ ·æŸ¥çœ‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# semanage port -l | grep squid</span><br><span class="line">squid_port_t                   tcp      3128, 3401, 4827</span><br><span class="line">squid_port_t                   udp      3401, 4827</span><br></pre></td></tr></table></figure></p><h4 id="é‡åˆ°dnsè§£æé—®é¢˜"><a href="#é‡åˆ°dnsè§£æé—®é¢˜" class="headerlink" title="é‡åˆ°dnsè§£æé—®é¢˜"></a>é‡åˆ°dnsè§£æé—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR</span><br><span class="line">The requested URL could not be retrieved</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/linuxfi/stu9.png" alt title class>                <p></p>            </figure><p>åŸæ¥æ˜¯æœåŠ¡ç«¯ è®¾ç½®dnsæœåŠ¡å™¨ä¸å¤Ÿçš„åŸå› ï¼Œ<br><a href="https://www.365jz.com/article/24025" target="_blank" rel="noopener">è®¾ç½®è¿‡ç¨‹å‚è€ƒåšå®¢</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat  /etc/resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">nameserver 192.168.0.1   #è¿™æ˜¯åŸæœ‰çš„</span><br><span class="line">nameserver 202.106.0.20  #è¿™æ˜¯æ–°å¢çš„ åŒ—äº¬ç½‘é€šçš„DNSæœåŠ¡å™¨åœ°å€</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è®¿é—®ç™¾åº¦ï¼š<br>å¯ä»¥æ­£å¸¸è®¿é—®äº†<br><figure class="image-box">                <img src="/image/linuxfi/stu10.png" alt title class>                <p></p>            </figure></p><h4 id="å¦‚æœè¿˜é‡åˆ°é—®é¢˜"><a href="#å¦‚æœè¿˜é‡åˆ°é—®é¢˜" class="headerlink" title="å¦‚æœè¿˜é‡åˆ°é—®é¢˜"></a>å¦‚æœè¿˜é‡åˆ°é—®é¢˜</h4><p>æ®åˆ°æœåŠ¡å™¨ç«¯ï¼Œæ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# systemctl restart squid</span><br></pre></td></tr></table></figure></p><p>å¦å¤–è²Œä¼¼æ¯æ¬¡æœåŠ¡å™¨é‡å¯åï¼Œ /etc/resolv.conf é…ç½®æ–‡ä»¶å°±ä¼šè¢«é‡åˆ¶ï¼Œè¦é‡æ–°è®¾ç½®ã€‚</p><h3 id="å…¶ä»–åº”ç”¨åœºæ™¯"><a href="#å…¶ä»–åº”ç”¨åœºæ™¯" class="headerlink" title="å…¶ä»–åº”ç”¨åœºæ™¯"></a>å…¶ä»–åº”ç”¨åœºæ™¯</h3><h4 id="å…è®¸æŒ‡å®šipçš„å®¢æˆ·æœºè®¿é—®"><a href="#å…è®¸æŒ‡å®šipçš„å®¢æˆ·æœºè®¿é—®" class="headerlink" title="å…è®¸æŒ‡å®šipçš„å®¢æˆ·æœºè®¿é—®"></a>å…è®¸æŒ‡å®šipçš„å®¢æˆ·æœºè®¿é—®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/squid/squid.conf</span><br><span class="line">#åœ¨é¡¶éƒ¨æ·»åŠ ï¼š</span><br><span class="line">#åªå…è®¸ æ¥è‡ª 192.168.1.107 ip çš„å®¢æˆ·ç«¯è®¿é—®</span><br><span class="line">acl client src 192.168.1.107</span><br><span class="line">http_access allow client</span><br><span class="line">http_access deny all</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# systemctl restart squid</span><br></pre></td></tr></table></figure><p>å› ä¸ºå®¢æˆ·æœº é 192.168.1.107, å› æ­¤æŒ‚æ‰äº†ã€‚<br><figure class="image-box">                <img src="/image/linuxfi/demo1.png" alt title class>                <p></p>            </figure></p><h4 id="ç¦æ­¢è®¿é—®æŒ‡å®šå…³é”®å­—url"><a href="#ç¦æ­¢è®¿é—®æŒ‡å®šå…³é”®å­—url" class="headerlink" title="ç¦æ­¢è®¿é—®æŒ‡å®šå…³é”®å­—url"></a>ç¦æ­¢è®¿é—®æŒ‡å®šå…³é”®å­—url</h4><p>ç¦æ­¢urlåŒ…å«taobaoçš„é¡µé¢è®¿é—®ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acl deny_keyword url_regex -i taobao   #url_regex ç±»å‹æ˜¯urlï¼Œ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è§„åˆ™ -iè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ </span><br><span class="line">http_access deny deny_keyword</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linuxfi/tao.png" alt title class>                <p></p>            </figure><h4 id="ç¦æ­¢ç‰¹å®šç½‘ç«™"><a href="#ç¦æ­¢ç‰¹å®šç½‘ç«™" class="headerlink" title="ç¦æ­¢ç‰¹å®šç½‘ç«™"></a>ç¦æ­¢ç‰¹å®šç½‘ç«™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acl deny_url url_regex www.imooc.com   #url_regex ç±»å‹æ˜¯urlï¼Œ ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è§„åˆ™ ç¦æ­¢www.imooc.com è®¿é—®</span><br><span class="line">http_access deny deny_url</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢ä¸‹è½½æŒ‡å®šç±»å‹çš„æ–‡ä»¶"><a href="#ç¦æ­¢ä¸‹è½½æŒ‡å®šç±»å‹çš„æ–‡ä»¶" class="headerlink" title="ç¦æ­¢ä¸‹è½½æŒ‡å®šç±»å‹çš„æ–‡ä»¶"></a>ç¦æ­¢ä¸‹è½½æŒ‡å®šç±»å‹çš„æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">acl deny_file urlpath_regex -i \.rar$ \.avi$ \.zip$ \.exe$  # urlpath_regex ç±»å‹æ˜¯urlpathï¼Œ ç¦æ­¢æ–‡ä»¶ä¸‹è½½</span><br><span class="line">http_access deny deny_file</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(å·½)</title>
      <link href="/2021/06/08/linux_fore/"/>
      <url>/2021/06/08/linux_fore/</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…-MariaDB-æ•°æ®åº“è½¯ä»¶-MySQL"><a href="#å®‰è£…-MariaDB-æ•°æ®åº“è½¯ä»¶-MySQL" class="headerlink" title="å®‰è£… MariaDB æ•°æ®åº“è½¯ä»¶(MySQL)"></a>å®‰è£… MariaDB æ•°æ®åº“è½¯ä»¶(MySQL)</h2><h3 id="MariaDBæ˜¯å…è´¹ç‰ˆçš„MySQL"><a href="#MariaDBæ˜¯å…è´¹ç‰ˆçš„MySQL" class="headerlink" title="MariaDBæ˜¯å…è´¹ç‰ˆçš„MySQL"></a>MariaDBæ˜¯å…è´¹ç‰ˆçš„MySQL</h3><p>MariaDBæ˜¯MySQLçš„ä¸€ä¸ªç¤¾åŒºç»´æŠ¤ç‰ˆæœ¬ï¼Œå¼€æºåˆ†æ”¯ï¼›<br>å‡ ä¹å®Œå…¨å…¼å®¹mysqlï¼›<br>mysqlä½œè€…ä»¥ä»–å¥³å„¿åå­—å‘½ä»¤çš„è½¯ä»¶ï¼›</p><h3 id="å®‰è£…MariaDB"><a href="#å®‰è£…MariaDB" class="headerlink" title="å®‰è£…MariaDB"></a>å®‰è£…MariaDB</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#mariadbä¸»ç¨‹åºï¼Œ mariadb-server æœåŠ¡å™¨ç¨‹åº</span><br><span class="line">yum install mariadb mariadb-server  </span><br><span class="line">å®‰è£…å®Œæˆåï¼Œè®°å¾—å¯åŠ¨ç¨‹åº</span><br><span class="line">systemctl start mariadb å¯åŠ¨ç¨‹åº</span><br><span class="line">systemctl status mariadb æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span><br><span class="line">systemctl enable mariadb è®¾ç½®å¼€æœºå¯åŠ¨</span><br></pre></td></tr></table></figure><h4 id="MariaDB-è¿›è¡Œåˆå§‹åŒ–æ“ä½œ"><a href="#MariaDB-è¿›è¡Œåˆå§‹åŒ–æ“ä½œ" class="headerlink" title="MariaDB è¿›è¡Œåˆå§‹åŒ–æ“ä½œ"></a>MariaDB è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</h4><p>å®‰è£…ä¹‹åï¼Œä¸è¦ç«‹å³ä½¿ç”¨ï¼Œå…ˆè¿›è¡Œåˆå§‹åŒ–æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysql_secure_installation</span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MariaDB to secure it, we&apos;ll need the current</span><br><span class="line">password for the root user.  If you&apos;ve just installed MariaDB, and</span><br><span class="line">you haven&apos;t set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line">#è¯·è¾“å…¥æ•°æ®åº“rootç”¨æˆ·çš„å¯†ç ï¼Œåˆšå®‰è£…æ•°æ®åº“rootå¯†ç é»˜è®¤ä¸ºç©ºï¼Œå› æ­¤ä¸ç”¨è¾“å…¥ç›´æ¥å›è½¦</span><br><span class="line">Enter current password for root (enter for none):</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MariaDB</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line">#æ˜¯å¦è¦è®¾ç½®rootå¯†ç </span><br><span class="line">Set root password? [Y/n] y</span><br><span class="line">New password:</span><br><span class="line">Re-enter new password:</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MariaDB installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MariaDB without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line">#æ˜¯å¦è¦åˆ é™¤åŒ¿åç”¨æˆ·ï¼ŒåŒ¿åç”¨æˆ·çš„æ•°æ®åº“ä»»ä½•è´¦å·éƒ½å¯ä»¥è®¿é—®ï¼Œå› æ­¤å¯ä»¥åˆ é™¤</span><br><span class="line">Remove anonymous users? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from &apos;localhost&apos;.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line">#æ˜¯å¦ç¦æ­¢è¿œç¨‹ç™»é™†rootç”¨æˆ·</span><br><span class="line">Disallow root login remotely? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">By default, MariaDB comes with a database named &apos;test&apos; that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line">#æ˜¯å¦åˆ é™¤æµ‹è¯•æ•°æ®åº“å’Œæˆæƒ</span><br><span class="line">Remove test database and access to it? [Y/n] y</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line">#æ˜¯å¦è®©åˆšæ‰è®¾ç½®çš„ç«‹å³ç”Ÿæ•ˆ</span><br><span class="line">Reload privilege tables now? [Y/n] y</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br><span class="line"></span><br><span class="line">All done!  If you&apos;ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MariaDB!</span><br></pre></td></tr></table></figure></p><h4 id="ä¿®æ”¹å­—ç¬¦ç¼–ç ä¸º-utf8"><a href="#ä¿®æ”¹å­—ç¬¦ç¼–ç ä¸º-utf8" class="headerlink" title="ä¿®æ”¹å­—ç¬¦ç¼–ç ä¸º utf8"></a>ä¿®æ”¹å­—ç¬¦ç¼–ç ä¸º utf8</h4><p>åœ¨ MariaDB çš„é…ç½®æ–‡ä»¶ /etc/my.cnfä¸­åŠ å…¥ä»¥ä¸‹ä¸¤å¥é…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">character_set_server=utf8</span><br><span class="line">init_connect=&apos;SET NAMES utf8&apos;</span><br></pre></td></tr></table></figure></p><h4 id="ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦é‡å¯"><a href="#ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦é‡å¯" class="headerlink" title="ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦é‡å¯"></a>ä¿®æ”¹å®Œæˆåï¼Œéœ€è¦é‡å¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart mariadb å¯åŠ¨ç¨‹åº</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysql</span><br><span class="line">ERROR 1045 (28000): Access denied for user &apos;root&apos;@&apos;localhost&apos; (using password: NO)</span><br><span class="line">[root@localhost ~]#  mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line"># è¿›å…¥æ•°æ®åº“è¾“å…¥å‘½ä»¤æ—¶ï¼Œè¯·ä»¥åˆ†å·ç»“å°¾ï¼Œå¦åˆ™å‘½ä»¤ä¸æ‰§è¡Œ</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 3</span><br><span class="line">Server version: 5.5.68-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"># å‡ºç° MariaDB [(none)]&gt; è¯´æ˜ç™»å½•æˆåŠŸï¼Œè¿›å…¥æ•°æ®åº“äº†ï¼š</span><br><span class="line">è¾“å…¥å‘½ä»¤æ³¨æ„åŠ åˆ†å·</span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹åˆšæ‰è®¾ç½®çš„å­—ç¬¦ä¸²utf8</span><br><span class="line">MariaDB [(none)]&gt; show variables like &apos;%character_set%&apos;;</span><br><span class="line"># character_set_client å®¢æˆ·ç«¯ å’Œcharacter_set_serveræœåŠ¡å™¨</span><br><span class="line">éƒ½æ˜¯utf8</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client     | utf8                       |</span><br><span class="line">| character_set_connection | utf8                       |</span><br><span class="line">| character_set_database   | latin1                     |</span><br><span class="line">| character_set_filesystem | binary                     |</span><br><span class="line">| character_set_results    | utf8                       |</span><br><span class="line">| character_set_server     | latin1                     |</span><br><span class="line">| character_set_system     | utf8                       |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt;</span><br><span class="line"></span><br><span class="line">quit exit ç­‰éƒ½å¯ä»¥é€€å‡ºæ•°æ®åº“</span><br></pre></td></tr></table></figure><h4 id="é‡æ–°è®¾ç½®-å¯ä»¥è¿œç¨‹è®¿é—®"><a href="#é‡æ–°è®¾ç½®-å¯ä»¥è¿œç¨‹è®¿é—®" class="headerlink" title="é‡æ–°è®¾ç½® å¯ä»¥è¿œç¨‹è®¿é—®"></a>é‡æ–°è®¾ç½® å¯ä»¥è¿œç¨‹è®¿é—®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line">#æ”¹è¿™é‡Œå°±è¡Œï¼š</span><br><span class="line">#æ˜¯å¦ç¦æ­¢è¿œç¨‹ç™»é™†rootç”¨æˆ·</span><br><span class="line">Disallow root login remotely? [Y/n] n</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®é˜²ç«å¢™"><a href="#è®¾ç½®é˜²ç«å¢™" class="headerlink" title="è®¾ç½®é˜²ç«å¢™"></a>è®¾ç½®é˜²ç«å¢™</h4><p>è®¾ç½®é˜²ç«å¢™ï¼Œè®©é˜²ç«å¢™æ”¾è¡Œå¯¹æ•°æ®åº“ç¨‹åºè½¯ä»¶çš„è¯·æ±‚</p><p>MariaDB é»˜è®¤ä»¥ 3306 ç«¯å£è¿›è¡Œè®¿é—®</p><p>åœ¨é˜²ç«å¢™ç­–ç•¥ä¸­ï¼ŒæœåŠ¡ç«¯ç»Ÿç§°ä¸ºmysql</p><p>é˜²ç«å¢™æ”¾è¡Œæ•°æ®åº“è®¿é—®è¯·æ±‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br><span class="line">#mysqlå’ŒMariaDBï¼Œå¯¹äºé˜²ç«å¢™è€Œè¨€éƒ½ä¸€æ ·ï¼Œåœ¨é˜²ç«å¢™ç­–ç•¥ä¸­ï¼ŒæœåŠ¡ç«¯ç»Ÿç§°ä¸ºmysqlï¼Œ</span><br><span class="line">#å› æ­¤è¿™å¥å‘½ä»¤æ—¢è®¾ç½®äº† mysqlï¼Œåˆè®¾ç½®äº† MariaDB</span><br><span class="line">firewall-cmd --zone=public --add-service=mysql --permanent</span><br><span class="line">firewall-cmd --reload #éœ€è¦é‡è½½ä¹‹åï¼ŒæŸ¥çœ‹å·²ç»æ”¾è¡Œæ¥å£</span><br><span class="line">firewall-cmd --list-ports</span><br><span class="line">443/tcp 80/tcp 3306/tcp</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…PHPï¼Œæ­å»º-LAMP-æ¶æ„"><a href="#å®‰è£…PHPï¼Œæ­å»º-LAMP-æ¶æ„" class="headerlink" title="å®‰è£…PHPï¼Œæ­å»º LAMP æ¶æ„"></a>å®‰è£…PHPï¼Œæ­å»º LAMP æ¶æ„</h2><h3 id="é™æ€ç½‘ç«™ä¸åŠ¨æ€ç½‘ç«™"><a href="#é™æ€ç½‘ç«™ä¸åŠ¨æ€ç½‘ç«™" class="headerlink" title="é™æ€ç½‘ç«™ä¸åŠ¨æ€ç½‘ç«™"></a>é™æ€ç½‘ç«™ä¸åŠ¨æ€ç½‘ç«™</h3><p>é™æ€ç½‘ç«™çš„æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¿æ¥<br><figure class="image-box">                <img src="/image/linuxf/lamp.png" alt title class>                <p></p>            </figure></p><p>åŠ¨æ€ç½‘ç«™<br>åŠ¨æ€ç½‘ç«™çš„ç½‘é¡µç¼–ç¨‹è¯­è¨€å’Œæ•°æ®åº“æ¥å£<br><figure class="image-box">                <img src="/image/linuxf/say.png" alt title class>                <p></p>            </figure></p><h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p>åœ¨æœåŠ¡ç«¯æ‰§è¡Œçš„è„šæœ¬è¯­è¨€ï¼Œæ˜¯å¸¸ç”¨çš„ç½‘ç«™ç¼–ç¨‹è¯­è¨€<br>phpçš„ä»£ç å¯ä»¥ç›´æ¥åµŒå…¥htmlç½‘é¡µä¸­ï¼Œä¸éœ€è¦ç¼–è¾‘å°±å¯ä»¥æ‰§è¡Œ</p><h3 id="LAMPæ¶æ„"><a href="#LAMPæ¶æ„" class="headerlink" title="LAMPæ¶æ„"></a>LAMPæ¶æ„</h3><p>Linux + apache + mysql + ï¼ˆmariaDBï¼‰ + php çš„å¼€å‘æ¶æ„<br>ç»å¸¸è¢«ç”¨äºæ­å»ºåŠ¨æ€ç½‘ç«™<br>å•ç‹¬çš„apacheåªèƒ½æ­å»ºé™æ€ç½‘ç«™</p><h3 id="å®‰è£…php"><a href="#å®‰è£…php" class="headerlink" title="å®‰è£…php"></a>å®‰è£…php</h3><p>php #ä¸»ç¨‹åºï¼ˆåŒ…å«ç»™apacheä½¿ç”¨çš„æ¨¡å—ï¼‰<br>php-mysql #ä½¿phpç¨‹åºèƒ½è¯»å–mysqlæ•°æ®åº“çš„æ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install php</span><br><span class="line">yum install php-mysql</span><br><span class="line">rpm -ql php #æŸ¥çœ‹å®‰è£…ä¿¡æ¯</span><br><span class="line">rpm -ql php-mysql #æŸ¥çœ‹å®‰è£…ä¿¡æ¯</span><br></pre></td></tr></table></figure><h3 id="é…ç½®apacheçš„webé¡µé¢ç›®å½•"><a href="#é…ç½®apacheçš„webé¡µé¢ç›®å½•" class="headerlink" title="é…ç½®apacheçš„webé¡µé¢ç›®å½•"></a>é…ç½®apacheçš„webé¡µé¢ç›®å½•</h3><p>åœ¨apacheæœåŠ¡å™¨çš„webé¡µé¢ç›®å½•åˆ›å»ºæ–‡ä»¶ï¼›<br>ä¹‹å‰é…ç½®apacheçš„æ—¶å€™ï¼Œå°†å…¶webé¡µé¢ç›®å½•é…ç½®åœ¨ <code>/home/web</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /home/web/info.php</span><br><span class="line">&lt;?php</span><br><span class="line"> phpinfo();  </span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢ phpinfo æ˜¯ phpçš„å‡½æ•°ï¼Œä¼šæ˜¾ç¤ºphpæ‰€æœ‰çš„é…ç½®ä¿¡æ¯</p><h3 id="apacheä¸phpç»“åˆæˆåŠŸ"><a href="#apacheä¸phpç»“åˆæˆåŠŸ" class="headerlink" title="apacheä¸phpç»“åˆæˆåŠŸ"></a>apacheä¸phpç»“åˆæˆåŠŸ</h3><p>é¡µé¢è®¿é—®ï¼š<br><a href="http://192.168.1.109/info.php" target="_blank" rel="noopener">http://192.168.1.109/info.php</a></p><p>çœ‹åˆ°ä¸‹é¢è¯´æ˜ apacheä¸phpç»“åˆæˆåŠŸ<br><figure class="image-box">                <img src="/image/linuxf/php.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/php1.png" alt title class>                <p></p>            </figure></p><p>è‡³æ­¤æ­å»º LAMP æ¶æ„è¿˜å·®æ•°æ®åº“çš„è¿æ¥ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å€Ÿç”¨ wordpress å»ºç«™ï¼Œ<br>wordpress å»ºç«™ä¸­è¦åšæ•°æ®åº“è¿æ¥ã€‚</p><h3 id="wordpress-å»ºç«™-LAMPæ¶æ„çš„å®è·µ"><a href="#wordpress-å»ºç«™-LAMPæ¶æ„çš„å®è·µ" class="headerlink" title="wordpress å»ºç«™(LAMPæ¶æ„çš„å®è·µ)"></a>wordpress å»ºç«™(LAMPæ¶æ„çš„å®è·µ)</h3><h4 id="WordPress"><a href="#WordPress" class="headerlink" title="WordPress"></a>WordPress</h4><p>wordpress æ˜¯ä½¿ç”¨phpè¯­è¨€å¼€å‘çš„åšå®¢å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€æ¬¾ CMS(å†…å®¹ç®¡ç†ç³»ç»Ÿ)ï¼Œ<br>æ˜¯å…¨çƒä½¿ç”¨æœ€å¹¿æ³›çš„åšå®¢å¹³å°ï¼›<br>å¾ˆå¤šéåšå®¢ç½‘ç«™ä¹Ÿä¼šä½¿ç”¨wordpress æ­å»º</p><h4 id="å®¢æˆ·æœºç”µè„‘ä¸­æµè§ˆå™¨ä¸‹è½½-wordpress"><a href="#å®¢æˆ·æœºç”µè„‘ä¸­æµè§ˆå™¨ä¸‹è½½-wordpress" class="headerlink" title="å®¢æˆ·æœºç”µè„‘ä¸­æµè§ˆå™¨ä¸‹è½½ wordpress"></a>å®¢æˆ·æœºç”µè„‘ä¸­æµè§ˆå™¨ä¸‹è½½ wordpress</h4><p>åœ¨å®¢æˆ·æœºç”µè„‘ä¸­æµè§ˆå™¨ä¸‹è½½ wordpress æ— è®º winæˆ–macç‰ˆæœ¬éƒ½å¯ä»¥ï¼›<br>æ¯”å¦‚ <a href="http://www.pc6.com/softview/SoftView_14956.html" target="_blank" rel="noopener">è¿™é‡Œä¸‹è½½</a>;</p><h4 id="ä½¿ç”¨-scp-è¿›è¡Œ-ssh-è¿œç¨‹æ‹·è´"><a href="#ä½¿ç”¨-scp-è¿›è¡Œ-ssh-è¿œç¨‹æ‹·è´" class="headerlink" title="ä½¿ç”¨ scp è¿›è¡Œ ssh è¿œç¨‹æ‹·è´"></a>ä½¿ç”¨ scp è¿›è¡Œ ssh è¿œç¨‹æ‹·è´</h4><p>å®¢æˆ·æœºä½¿ç”¨git bash æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ scp wordpressv5.7.zip root@192.168.1.109:/root</span><br><span class="line">root@192.168.1.109&apos;s password:</span><br><span class="line">wordpressv5.7.zip                             100%   16MB   4.9MB/s   00:03</span><br></pre></td></tr></table></figure></p><h4 id="unzip-è§£å‹ç¼©-ï¼ˆå®‰è£…unzipï¼‰"><a href="#unzip-è§£å‹ç¼©-ï¼ˆå®‰è£…unzipï¼‰" class="headerlink" title="unzip è§£å‹ç¼© ï¼ˆå®‰è£…unzipï¼‰"></a>unzip è§£å‹ç¼© ï¼ˆå®‰è£…unzipï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install unzip</span><br><span class="line">unzip wordpressv5.7.zip</span><br></pre></td></tr></table></figure><h4 id="å°†wordpressè§£å‹åŒ…æ‹·è´åˆ°apacheé¡µé¢ç›®å½•ä¸‹"><a href="#å°†wordpressè§£å‹åŒ…æ‹·è´åˆ°apacheé¡µé¢ç›®å½•ä¸‹" class="headerlink" title="å°†wordpressè§£å‹åŒ…æ‹·è´åˆ°apacheé¡µé¢ç›®å½•ä¸‹"></a>å°†wordpressè§£å‹åŒ…æ‹·è´åˆ°apacheé¡µé¢ç›®å½•ä¸‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#å°†wordpressè§£å‹åŒ…æ‹·è´åˆ°apacheé¡µé¢ç›®å½•ä¸‹</span><br><span class="line">[root@localhost wordpress]# cp -r wordpress /home/web</span><br><span class="line">[root@localhost wordpress]# cd /home/web/wordpress/</span><br><span class="line">[root@localhost wordpress]# ls</span><br><span class="line">#wp-admin æ˜¯é…ç½®ç›®å½• setup-config.php æ˜¯å…¶ç›®å½•ä¸‹ å®‰è£…çš„ä¸€äº›é…ç½®æ–‡ä»¶</span><br><span class="line">index.php        wp-blog-header.php    wp-includes        wp-settings.php</span><br><span class="line">license.txt      wp-comments-post.php  wp-links-opml.php  wp-signup.php</span><br><span class="line">readme.html      wp-config-sample.php  wp-load.php        wp-trackback.php</span><br><span class="line">wp-activate.php  wp-content            wp-login.php       xmlrpc.php</span><br><span class="line">wp-admin         wp-cron.php           wp-mail.php</span><br><span class="line">[root@localhost wordpress]#</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®wordpressé…ç½®é¡µé¢å‡ºç°é—®é¢˜"><a href="#è®¿é—®wordpressé…ç½®é¡µé¢å‡ºç°é—®é¢˜" class="headerlink" title="è®¿é—®wordpressé…ç½®é¡µé¢å‡ºç°é—®é¢˜"></a>è®¿é—®wordpressé…ç½®é¡µé¢å‡ºç°é—®é¢˜</h4><p>é¡µé¢è®¿é—®åˆšæ‰æ‹·è´åˆ°apache webç›®å½•ä¸‹çš„ <code>wp-admin/setup-config.php</code> æ˜¯wordpressçš„å¯åŠ¨é…ç½®é¡µé¢ï¼Œ<br>æ­¤é¡µé¢å‘Šè¯‰ä½ å¦‚ä½•ä¸€æ­¥æ­¥å®‰è£…é…ç½®wordpress<br><a href="https://192.168.1.109/wordpress/wp-admin/setup-config.php" target="_blank" rel="noopener">https://192.168.1.109/wordpress/wp-admin/setup-config.php</a><br><figure class="image-box">                <img src="/image/linuxf/wd.png" alt title class>                <p></p>            </figure></p><h4 id="å‡çº§-php"><a href="#å‡çº§-php" class="headerlink" title="å‡çº§ php"></a>å‡çº§ php</h4><p><a href="https://blog.csdn.net/qq_34829953/article/details/78078790" target="_blank" rel="noopener">å‚è€ƒè¿™ç¯‡åšå®¢</a>ï¼Œä»åšå®¢ä¸­ç¬¬äºŒä¸ªå¼€å§‹æ‰§è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/epel-release.rpm</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br><span class="line">yum remove php-common -y</span><br><span class="line">yum install -y php56w php56w-opcache php56w-xml php56w-mcrypt php56w-gd php56w-devel php56w-mysql php56w-intl php56w-mbstring</span><br></pre></td></tr></table></figure><p>å…¶å®ä½ ä¹Ÿæ²¡å¿…è¦å®‰è£…è¿™ä¹ˆå¤šï¼Œä½ åªéœ€å®‰è£… php56w å’Œ php56w-mysql (è®©phpèƒ½å¤Ÿè¯»å–mysqlæ•°æ®åº“)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wordpress]# php -v</span><br><span class="line">PHP 5.6.40 (cli) (built: Jan 12 2019 13:11:15)</span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line">    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies</span><br><span class="line">[root@localhost wordpress]# systemctl restart httpd</span><br></pre></td></tr></table></figure></p><h4 id="wordpressé…ç½®é¡µé¢-è®¿é—®æˆåŠŸ"><a href="#wordpressé…ç½®é¡µé¢-è®¿é—®æˆåŠŸ" class="headerlink" title="wordpressé…ç½®é¡µé¢ è®¿é—®æˆåŠŸ"></a>wordpressé…ç½®é¡µé¢ è®¿é—®æˆåŠŸ</h4><figure class="image-box">                <img src="/image/linuxf/wd2.png" alt title class>                <p></p>            </figure><p>å†æ¬¡åˆ·æ–°é¡µé¢ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼Œè¯´æ˜æ­£å¸¸äº†</p><h4 id="é…ç½®mysqlæ•°æ®åº“"><a href="#é…ç½®mysqlæ•°æ®åº“" class="headerlink" title="é…ç½®mysqlæ•°æ®åº“"></a>é…ç½®mysqlæ•°æ®åº“</h4><p>ä¸Šé¢çš„wordpressé…ç½®é¡µé¢ï¼Œå…¶å®å·²ç»å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•æ¥ä¸‹æ¥é…ç½®äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wordpress]# mysql -u root -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 3</span><br><span class="line">Server version: 5.5.68-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database wordpress; #åˆ›å»ºè¡¨</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| wordpress          |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br><span class="line">GRANT ALL ON wordpress.* #åœ¨ wordpress æ•°æ®åº“ä¸Šå¼€æ”¾æ‰€æœ‰æƒé™ ç»™ä¸»æœºç”¨æˆ·&apos;imooc&apos;@&apos;192.168.1.109&apos; ï¼Œ å¯†ç æ˜¯123456</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON wordpress.* TO &apos;imooc&apos;@&apos;192.168.1.109&apos; IDENTIFIED BY &apos;123456&apos;;  </span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure></p><h4 id="é…ç½®wordpressç›¸å…³æ•°æ®åº“ä¿¡æ¯"><a href="#é…ç½®wordpressç›¸å…³æ•°æ®åº“ä¿¡æ¯" class="headerlink" title="é…ç½®wordpressç›¸å…³æ•°æ®åº“ä¿¡æ¯"></a>é…ç½®wordpressç›¸å…³æ•°æ®åº“ä¿¡æ¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wordpress]# pwd</span><br><span class="line">/home/web/wordpress</span><br><span class="line">#æ‹·è´wp-config-sample.php å‘½åä¸ºwp-config.php</span><br><span class="line">[root@localhost wordpress]# cp wp-config-sample.php wp-config.php</span><br><span class="line">[root@localhost wordpress]# ls</span><br><span class="line">index.php        wp-blog-header.php    wp-cron.php        wp-mail.php</span><br><span class="line">license.txt      wp-comments-post.php  wp-includes        wp-settings.php</span><br><span class="line">readme.html      wp-config.php         wp-links-opml.php  wp-signup.php</span><br><span class="line">wp-activate.php  wp-config-sample.php  wp-load.php        wp-trackback.php</span><br><span class="line">wp-admin         wp-content            wp-login.php       xmlrpc.php</span><br><span class="line">[root@localhost wordpress]# vim wp-config.php</span><br><span class="line"></span><br><span class="line">#ä¿®æ”¹åœ°æ–¹å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">define( &apos;DB_NAME&apos;, &apos;wordpress&apos; );</span><br><span class="line"></span><br><span class="line">/** MySQL database username */</span><br><span class="line">define( &apos;DB_USER&apos;, &apos;imooc&apos; );</span><br><span class="line"></span><br><span class="line">/** MySQL database password */</span><br><span class="line">define( &apos;DB_PASSWORD&apos;, &apos;123456&apos; );</span><br><span class="line"></span><br><span class="line">/** MySQL hostname */</span><br><span class="line">define( &apos;DB_HOST&apos;, &apos;192.168.1.109&apos; );</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl restart httpd</span><br></pre></td></tr></table></figure><p>åˆ·æ–°é¡µé¢ï¼š<br><a href="https://192.168.1.109/wordpress/wp-admin/setup-config.php" target="_blank" rel="noopener">https://192.168.1.109/wordpress/wp-admin/setup-config.php</a><br>ç‚¹å‡»ä¸‹å›¾ çš„å®‰è£…ï¼š</p><figure class="image-box">                <img src="/image/linuxf/wd3.png" alt title class>                <p></p>            </figure><h4 id="å»ºç«‹æ•°æ®åº“æ—¶å‡ºé”™"><a href="#å»ºç«‹æ•°æ®åº“æ—¶å‡ºé”™" class="headerlink" title="å»ºç«‹æ•°æ®åº“æ—¶å‡ºé”™"></a>å»ºç«‹æ•°æ®åº“æ—¶å‡ºé”™</h4><figure class="image-box">                <img src="/image/linuxf/wd4.png" alt title class>                <p></p>            </figure><p>SELinux çš„å®‰å…¨ç­–ç•¥é—®é¢˜å¯¼è‡´çš„ï¼›</p><p>éªŒè¯ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wordpress]# getenforce</span><br><span class="line">Enforcing  #è¯´æ˜ SELinux æ˜¯å¼€å¯çš„</span><br><span class="line">#å…³é—­SELinuxéªŒè¯ä¸‹ï¼š</span><br><span class="line">[root@localhost wordpress]# setenforce 0</span><br></pre></td></tr></table></figure></p><p>åˆ·æ–°é¡µé¢ï¼š<br><a href="https://192.168.1.109/wordpress/wp-admin/setup-config.php" target="_blank" rel="noopener">https://192.168.1.109/wordpress/wp-admin/setup-config.php</a><br>å˜æˆä¸‹å›¾ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†<br><figure class="image-box">                <img src="/image/linuxf/wd5.png" alt title class>                <p></p>            </figure></p><h4 id="è§£å†³-æ•°æ®åº“-è¿æ¥çš„SELinuxé—®é¢˜"><a href="#è§£å†³-æ•°æ®åº“-è¿æ¥çš„SELinuxé—®é¢˜" class="headerlink" title="è§£å†³ æ•°æ®åº“ è¿æ¥çš„SELinuxé—®é¢˜"></a>è§£å†³ æ•°æ®åº“ è¿æ¥çš„SELinuxé—®é¢˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost wordpress]# setenforce 1 #å¼€å¯ SELinux</span><br><span class="line">[root@localhost wordpress]# getsebool -a | grep #httpd æŸ¥è¯¢ SELinux çš„ä¸€äº›å¸ƒå°”å€¼è®¾ç½®</span><br><span class="line">httpd_anon_write --&gt; off</span><br><span class="line">httpd_builtin_scripting --&gt; on</span><br><span class="line">httpd_can_check_spam --&gt; off</span><br><span class="line">httpd_can_connect_ftp --&gt; off</span><br><span class="line">httpd_can_connect_ldap --&gt; off</span><br><span class="line">httpd_can_connect_mythtv --&gt; off</span><br><span class="line">httpd_can_connect_zabbix --&gt; off</span><br><span class="line">httpd_can_network_connect --&gt; off  #æ˜¯å¦å…è®¸apacheç½‘ç»œè®¿é—®æ•°æ®åº“</span><br><span class="line">httpd_can_network_connect_cobbler --&gt; off</span><br><span class="line">httpd_can_network_connect_db --&gt; off</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">[root@localhost wordpress]# setsebool -P httpd_can_network_connect=1 #å¼€å¯apacheç½‘ç»œè®¿é—®æ•°æ®åº“</span><br><span class="line">[root@localhost wordpress]#</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æˆåŠŸ"><a href="#é…ç½®æˆåŠŸ" class="headerlink" title="é…ç½®æˆåŠŸ"></a>é…ç½®æˆåŠŸ</h4><p>åˆ·æ–°é¡µé¢ï¼š<br><a href="https://192.168.1.109/wordpress/wp-admin/install.php" target="_blank" rel="noopener">https://192.168.1.109/wordpress/wp-admin/install.php</a> æˆ–<br><a href="https://192.168.1.109/wordpress/wp-admin/setup-config.php" target="_blank" rel="noopener">https://192.168.1.109/wordpress/wp-admin/setup-config.php</a><br>å˜æˆä¸‹å›¾ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ï¼Œè¿›å…¥äº†wordpress 5åˆ†é’Ÿå®‰è£…ç¨‹åº</p><p>é…ç½®ç½‘ç«™ä¿¡æ¯ï¼Œæ¯”å¦‚ç½‘ç«™åï¼Œç½‘ç«™ç®¡ç†å‘˜ï¼Œé‚®ç®±ï¼Œè¿™äº›éƒ½å¯ä»¥éšä¾¿å†™<br><figure class="image-box">                <img src="/image/linuxf/wd6.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/wd7.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/wd8.png" alt title class>                <p></p>            </figure></p><p>ç™»å½•æˆåŠŸåï¼Œ<br>è¿›å…¥ç½‘ç«™åå°ç®¡ç†ç³»ç»Ÿï¼š<br><figure class="image-box">                <img src="/image/linuxf/wd9.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/wd10.png" alt title class>                <p></p>            </figure> </p><p>è¿›å…¥è‡ªå·±çš„ç½‘ç«™ä¸»ç«™ç‚¹ï¼š<br><figure class="image-box">                <img src="/image/linuxf/wd11.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/wd12.png" alt title class>                <p></p>            </figure></p><h3 id="ä¸€äº›è¯´æ˜"><a href="#ä¸€äº›è¯´æ˜" class="headerlink" title="ä¸€äº›è¯´æ˜"></a>ä¸€äº›è¯´æ˜</h3><h4 id="phpçš„é…ç½®çš„è¯´æ˜"><a href="#phpçš„é…ç½®çš„è¯´æ˜" class="headerlink" title="phpçš„é…ç½®çš„è¯´æ˜"></a>phpçš„é…ç½®çš„è¯´æ˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/php.ini PHPçš„ä¸»é…ç½®æ–‡ä»¶</span><br><span class="line">/etc/httpd/conf.d/php.conf phpç»™apacheä½¿ç”¨çš„æ¨¡å—çš„é…ç½®</span><br><span class="line">/etc/php.d/mysql.ini  phpç¨‹åºè¯»å–mysqlæ•°æ®åº“çš„æ¨¡å—é…ç½®</span><br></pre></td></tr></table></figure><h4 id="scp-çš„è¯´æ˜"><a href="#scp-çš„è¯´æ˜" class="headerlink" title="scp çš„è¯´æ˜"></a>scp çš„è¯´æ˜</h4><p>scpæ˜¯ secure copyçš„ç¼©å†™, scpæ˜¯linuxç³»ç»Ÿä¸‹åŸºäºsshç™»é™†è¿›è¡Œå®‰å…¨çš„è¿œç¨‹æ–‡ä»¶æ‹·è´å‘½ä»¤ã€‚<br><a href="https://www.cnblogs.com/pluslius/p/9893340.html" target="_blank" rel="noopener">scpå‘½ä»¤</a></p><h2 id="java-web"><a href="#java-web" class="headerlink" title="java web"></a>java web</h2><h3 id="java-web-åº”ç”¨çš„ä¸–ç•Œ"><a href="#java-web-åº”ç”¨çš„ä¸–ç•Œ" class="headerlink" title="java web åº”ç”¨çš„ä¸–ç•Œ"></a>java web åº”ç”¨çš„ä¸–ç•Œ</h3><p>java web åº”ç”¨çš„ä¸–ç•Œ ï¼š<br>servlet tomcat å’Œ Jenkins</p><h3 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æ˜¯javaå¼€å‘çš„ä¸€ç§æŒç»­é›†æˆï¼ˆCIï¼‰å·¥å…·<br>CIæ˜¯ continuous integration çš„ç¼©å†™ï¼Œè¡¨ç¤ºæŒç»­é›†æˆï¼›<br>èƒ½å¤Ÿè®©è½¯ä»¶çš„æµ‹è¯• ç¼–è¯‘ å’Œéƒ¨ç½²è‡ªåŠ¨åŒ–<br>é€šå¸¸ä¸ç‰ˆæœ¬ç®¡ç†å·¥å…· å¦‚svn gitã€ æ„å»ºå·¥å…·ç»“åˆä½¿ç”¨ï¼›<br>å¸¸ç”¨çš„æ„å»ºå·¥å…·æœ‰ Antã€ Mavenã€ Gradleï¼›</p><p>è¿˜æœ‰å…¶ä»–æŒç»­é›†æˆå·¥å…·ï¼Œæ¯”å¦‚ gitlab CI/CD</p><h4 id="war-æ–‡ä»¶"><a href="#war-æ–‡ä»¶" class="headerlink" title=".war æ–‡ä»¶"></a>.war æ–‡ä»¶</h4><p>Jenkinsæ˜¯ä»¥servletå½¢å¼æä¾›çš„<br>å®ƒé‡‡ç”¨æ‰©å±•åä¸º.war çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„å½¢å¼ï¼›<br>waræ˜¯web archiveçš„ç¼©å†™ï¼Œè¡¨ç¤º ç½‘ç»œå½’æ¡£æ–‡ä»¶</p><h3 id="javaçš„webåº”ç”¨ç¨‹åºçš„ä¸–ç•Œï¼š"><a href="#javaçš„webåº”ç”¨ç¨‹åºçš„ä¸–ç•Œï¼š" class="headerlink" title="javaçš„webåº”ç”¨ç¨‹åºçš„ä¸–ç•Œï¼š"></a>javaçš„webåº”ç”¨ç¨‹åºçš„ä¸–ç•Œï¼š</h3><p>servletï¼Œ jsp ç­‰ï¼›</p><h3 id="servlet"><a href="#servlet" class="headerlink" title="servlet"></a>servlet</h3><p>javaä¸­æ—¨åœ¨åŠ¨æ€ç”Ÿæˆhtmlä»£ç çš„åº”ç”¨ç¨‹åºé€šå¸¸é‡‡ç”¨servletçš„å½¢å¼ï¼›<br>servletæ˜¯å°Šé‡java servlet api çš„java webåº”ç”¨ç¨‹åºï¼›</p><p>servlet = service + appletï¼Œ è¡¨ç¤º å°æœåŠ¡ç¨‹åº<br>service è¡¨ç¤º æœåŠ¡ï¼Œ appletè¡¨ç¤º å°åº”ç”¨ç¨‹åº</p><h4 id="Jenkins-ä¸-servlet"><a href="#Jenkins-ä¸-servlet" class="headerlink" title="Jenkins ä¸ servlet"></a>Jenkins ä¸ servlet</h4><p>Jenkinsæ˜¯ä»¥servletå½¢å¼æä¾›çš„</p><h4 id="servlet-ä¸¤ç§æ–¹å¼"><a href="#servlet-ä¸¤ç§æ–¹å¼" class="headerlink" title="servlet ä¸¤ç§æ–¹å¼"></a>servlet ä¸¤ç§æ–¹å¼</h4><p>åˆ›å»º servlet ä¸¤ç§æ–¹å¼</p><ul><li>è¦ä¹ˆç¼–å†™çº¯javaä»£ç å¹¶ç¼–è¯‘</li><li>è¦ä¹ˆå†™ä¸€ä¸ªjspï¼ˆJava server pagesï¼‰</li></ul><h4 id="servletä¸jsp"><a href="#servletä¸jsp" class="headerlink" title="servletä¸jsp"></a>servletä¸jsp</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="jsp"><a href="#jsp" class="headerlink" title="jsp"></a>jsp</h4><p>jsp å®é™…ä¸Šæ˜¯ä¸€ä¸ªhtmlé¡µé¢ï¼Œå…¶ä¸­æ·»åŠ äº†å¯¹javaä»£ç çš„è°ƒç”¨<br>jsp ç¼–è¯‘å™¨ç¼–è¯‘jspï¼Œå°†å…¶è½¬æ¢ä¸º servletï¼›</p><h3 id="servletå®¹å™¨"><a href="#servletå®¹å™¨" class="headerlink" title="servletå®¹å™¨"></a>servletå®¹å™¨</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>è¦èƒ½å¤Ÿåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œservletå¹¶å°†httpè¯·æ±‚ä¼ é€’ç»™å®ƒä»¬ï¼›<br>éœ€è¦ä¸€ä¸ªservletå®¹å™¨ï¼›<br>tomcatæ˜¯apacheè½¯ä»¶åŸºé‡‘ä¼šå‘å¸ƒçš„servletå®¹å™¨</p><h4 id="tomcat"><a href="#tomcat" class="headerlink" title="tomcat"></a>tomcat</h4><p>ç”±å‡ ä¸ªç»„ä»¶æ„æˆï¼š Catalina ã€coyoteã€jasper</p><p>Catalina å®ƒæœ¬èº«æ˜¯servletçš„å®¹å™¨ï¼Œå¹¶è´Ÿè´£å…¶æ‰§è¡Œï¼›<br>coyote æ˜¯ä¸€ä¸ªhttpé“¾æ¥å™¨ï¼Œå› æ­¤æ˜¯ä¸€ä¸ªå¾®å‹webæœåŠ¡å™¨ï¼Œå®ƒå°†httpè¯·æ±‚ä¼ è¾“åˆ°Catalinaï¼›<br>jasperæ˜¯tomcatçš„jspç¼–è¯‘å™¨ï¼›</p><p>tomcat é»˜è®¤ç«¯å£ 8080</p><p><a href="https://blog.csdn.net/u010129985/article/details/80831518" target="_blank" rel="noopener">apacheå’Œtomcatæœ‰ä»€ä¹ˆä¸åŒ</a></p><h2 id="Jenkinsçš„è¿è¡Œ"><a href="#Jenkinsçš„è¿è¡Œ" class="headerlink" title="Jenkinsçš„è¿è¡Œ"></a>Jenkinsçš„è¿è¡Œ</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ä¸ºäº†ä½¿ç”¨Jenkinsåº”ç”¨ç¨‹åºï¼Œéœ€è¦å®‰è£…tomcatæœåŠ¡å™¨<br>Jenkinsä¹Ÿå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼›<br>å› ä¸ºå®ƒè‡ªèº«ä¹ŸåŒ…å«äº†åä¸º winstone çš„servletå¾®å‹å®¹å™¨ï¼›</p><h3 id="Jenkins-servlet-tomcat-jsp-java-ä¸‰è€…å…³ç³»"><a href="#Jenkins-servlet-tomcat-jsp-java-ä¸‰è€…å…³ç³»" class="headerlink" title="Jenkins servlet tomcat (jsp java) ä¸‰è€…å…³ç³»"></a>Jenkins servlet tomcat (jsp java) ä¸‰è€…å…³ç³»</h3><p>servletæ˜¯éµå®ˆ java servlet api çš„java web åº”ç”¨ç¨‹åº<br>servlet å¯ç”± çº¯javaä»£ç ç¼–å†™ï¼Œä¹Ÿå¯ä»¥ä»jspé¡µé¢ç”Ÿæˆ<br>servlet ç”±servletå®¹å™¨æ‰§è¡Œï¼›<br>tomcat æ˜¯apacheè½¯ä»¶åŸºé‡‘ä¼šå‘å¸ƒçš„servletå®¹å™¨<br>ä¹Ÿå¯ä»¥ä½œä¸ºè½»é‡çº§çš„webåº”ç”¨æœåŠ¡å™¨<br>Jenkinsæ˜¯ä½œä¸ºservletæä¾›çš„Javaåº”ç”¨ç¨‹åºï¼›</p><h3 id="é…ç½®javaç¯å¢ƒå¹¶å®‰è£…tomcat"><a href="#é…ç½®javaç¯å¢ƒå¹¶å®‰è£…tomcat" class="headerlink" title="é…ç½®javaç¯å¢ƒå¹¶å®‰è£…tomcat"></a>é…ç½®javaç¯å¢ƒå¹¶å®‰è£…tomcat</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">yum install tomcat #å¯ä»¥ç›´æ¥å®‰è£… tomcat è€Œä¸”é™„å¸¦å®‰è£… Javaè¿è¡Œæ—¶çš„ç¯å¢ƒ JRE(ç”¨æ¥ä½¿javaåº”ç”¨è¿è¡Œèµ·æ¥)ï¼Œä½†ä¸ä¼šå®‰è£…JDK;</span><br><span class="line">java -version # å®‰è£…tomcatæ—¶ï¼Œå…¶å®å·²ç»æŠŠjavaè¿è¡Œæ—¶ç¯å¢ƒJREå®‰è£…ä¸Šäº†ï¼Œå› æ­¤å¯ä»¥æ‰§è¡Œjavaå‘½ä»¤,æ¯”å¦‚æŸ¥çœ‹javaç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">systemctl status tomcat  #æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span><br><span class="line">systemctl start tomcat #å¯åŠ¨tomcat</span><br><span class="line">systemctl enable tomcat #è®¾ç½®å¼€å¯å¯åŠ¨</span><br><span class="line">rpm -ql tomcat #æŸ¥çœ‹tomcatç›¸å…³ç›®å½•å’Œé…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# rpm -ql tomcat</span><br><span class="line">/etc/logrotate.d/tomcat</span><br><span class="line">/etc/sysconfig/tomcat</span><br><span class="line">/etc/tomcat</span><br><span class="line">/etc/tomcat/conf.d/README</span><br><span class="line">/etc/tomcat/context.xml</span><br><span class="line">/etc/tomcat/log4j.properties</span><br><span class="line">/etc/tomcat/logging.properties</span><br><span class="line">/etc/tomcat/server.xml  #è¿™æ˜¯tocaté…ç½®æœåŠ¡å™¨æ–‡ä»¶ï¼Œæ¯”å¦‚è¿™é‡Œå¯é…ç½®tomcat é»˜è®¤8080ç«¯å£</span><br><span class="line">/etc/tomcat/tomcat-users.xml #é…ç½®ç”¨æˆ·</span><br><span class="line">/etc/tomcat/tomcat.conf  #ä¸»é…ç½®æ–‡ä»¶</span><br><span class="line">/usr/share/tomcat/logs</span><br><span class="line">/usr/share/tomcat/temp</span><br><span class="line">/usr/share/tomcat/webapps #webåº”ç”¨ç¨‹åºç›¸å…³é…ç½®åœ¨è¿™é‡Œï¼Œæ­¤æ–‡ä»¶ä¹Ÿæ˜¯/var/lib/tomcat/webappsçš„è½¯è¿æ¥</span><br><span class="line">/usr/share/tomcat/work</span><br><span class="line">/var/lib/tomcat/webapps</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ls -dl /usr/share/tomcat/webapps</span><br><span class="line">#è¯´æ˜ /usr/share/tomcat/webapps æ˜¯è½¯è¿æ¥åˆ°  /var/lib/tomcat/webapps æ–‡ä»¶çš„ï¼›</span><br><span class="line">lrwxrwxrwx. 1 root tomcat 23 Jun  9 10:46 /usr/share/tomcat/webapps -&gt; /var/lib/tomcat/webapps</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h4 id="openjdk-ä¸-jdk"><a href="#openjdk-ä¸-jdk" class="headerlink" title="openjdk ä¸ jdk"></a>openjdk ä¸ jdk</h4><p>è‡ªåŠ¨java è¢«oracleæ”¶è´­åï¼Œå¾ˆå¤šç¨‹åºå°±ç”¨ openjdk ä»£æ›¿ jdkä½¿ç”¨ï¼ŒäºŒè€…åŠŸèƒ½ä¸€è‡´ï¼›<br>åœ¨centosä¸­ï¼Œä½¿ç”¨openjdkä»£æ›¿ jdkä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum search java | grep openjdk  æ­¤å‘½ä»¤å¯ä»¥æŸ¥æ‰¾å¯å®‰è£…çš„ openjdk ç‰ˆæœ¬ï¼Œ</span><br><span class="line">java-1.6.0-openjdk.x86_64 : OpenJDK Runtime Environment</span><br><span class="line">java-1.6.0-openjdk-demo.x86_64 : OpenJDK Demos</span><br><span class="line">java-1.6.0-openjdk-devel.x86_64 : OpenJDK Development Environment</span><br><span class="line">java-1.8.0-openjdk-devel.x86_64 : OpenJDK 8 Development Environment</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦å®‰è£…å¼€å‘jdkç‰ˆæœ¬å¯ä»¥ å®‰è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install java-1.8.0-openjdk-devel.x86_64</span><br><span class="line">javac # å®‰è£…jdkåï¼Œå¯æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œæ­¤å‘½ä»¤ä¸º javaç¼–è¯‘å™¨</span><br></pre></td></tr></table></figure></p><h4 id="æµè§ˆå™¨è®¿é—®tomcatå¼‚å¸¸"><a href="#æµè§ˆå™¨è®¿é—®tomcatå¼‚å¸¸" class="headerlink" title="æµè§ˆå™¨è®¿é—®tomcatå¼‚å¸¸"></a>æµè§ˆå™¨è®¿é—®tomcatå¼‚å¸¸</h4><p>è‡³æ­¤Jenkinsçš„é…ç½®å®‰è£…å¥½äº†ï¼Œtomcat é»˜è®¤ç«¯å£ 8080ï¼Œå› æ­¤å¯ä»¥è®¿é—®ï¼š<br>é…ç½®ä¸Šé¢çš„tomcatåï¼Œ<br><a href="http://192.168.1.109:8080/" target="_blank" rel="noopener">http://192.168.1.109:8080/</a><br>å‘ç°æ— æ³•è®¿é—®ï¼ŒåŸæ¥ç¼ºå°‘äº†webåº”ç”¨ç¨‹åºçš„ç®¡ç†è½¯ä»¶åŒ…</p><h4 id="å®‰è£…webåº”ç”¨ç¨‹åºçš„ç®¡ç†è½¯ä»¶åŒ…"><a href="#å®‰è£…webåº”ç”¨ç¨‹åºçš„ç®¡ç†è½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…webåº”ç”¨ç¨‹åºçš„ç®¡ç†è½¯ä»¶åŒ…"></a>å®‰è£…webåº”ç”¨ç¨‹åºçš„ç®¡ç†è½¯ä»¶åŒ…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install tomcat-webapps tomcat-admin-webapps</span><br><span class="line">yum install tomcat-docs-webapp tomcat-javadoc # è¿™æ˜¯å‚è€ƒæ–‡æ¡£ï¼Œå¯ä»¥ä¸ç”¨å®‰è£…</span><br><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure><p>å†æ¬¡è®¿é—®<br><a href="http://192.168.1.109:8080/" target="_blank" rel="noopener">http://192.168.1.109:8080/</a><br>å‘ç°è¿˜æ˜¯æ— æ³•è®¿é—®ï¼ŒåŸæ¥é˜²ç«å¢™çš„åŸå› ï¼Œæ‰§è¡Œå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è®¿é—®<br><a href="http://192.168.1.109:8080/" target="_blank" rel="noopener">http://192.168.1.109:8080/</a><br>æˆåŠŸäº†ï¼š<br><figure class="image-box">                <img src="/image/linuxf/tom.png" alt title class>                <p></p>            </figure></p><h4 id="æ”¾å¼€é˜²ç«å¢™-8080ç«¯å£"><a href="#æ”¾å¼€é˜²ç«å¢™-8080ç«¯å£" class="headerlink" title="æ”¾å¼€é˜²ç«å¢™ 8080ç«¯å£"></a>æ”¾å¼€é˜²ç«å¢™ 8080ç«¯å£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld</span><br><span class="line">firewall-cmd --list-ports</span><br><span class="line">firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">firewall-cmd --reload  #æ›´æ–°é…ç½®</span><br><span class="line">firewall-cmd --list-ports #æŸ¥çœ‹å·²ç»æ”¾è¡Œçš„ç«¯å£</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®ç”¨æˆ·"><a href="#è®¾ç½®ç”¨æˆ·" class="headerlink" title="è®¾ç½®ç”¨æˆ·"></a>è®¾ç½®ç”¨æˆ·</h4><figure class="image-box">                <img src="/image/linuxf/user.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/tomcat/tomcat-users.xml</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶ä¸­ä¸‹é¢æ³¨é‡Šçš„éƒ¨åˆ†æ”¾å¼€ï¼Œè¿™æ˜¯ç³»ç»Ÿé…ç½®å¥½çš„é»˜è®¤æµ‹è¯•ç”¨æˆ·ï¼Œå¯ä»¥æŠŠå¯†ç è®¾ç½®ç®€å•ç‚¹ï¼Œæ¯”å¦‚123456<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;user name=&quot;admin&quot; password=&quot;123456&quot; roles=&quot;admin,manager,admin-gui,admin-script,manager-gui,manager-script,manager-jmx,manager-status&quot; /&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure><p>ç„¶åç‚¹å‡»ä¸Šå›¾æŒ‰é’®ï¼Œç™»å½•ï¼š</p><figure class="image-box">                <img src="/image/linuxf/login.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxf/login1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxf/mana.png" alt title class>                <p></p>            </figure><p>å¦‚å›¾ä¸Šï¼Œçº¢æ¡†å†…ï¼Œè¿™äº›åº”ç”¨éƒ½åœ¨ç›®å½•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls /var/lib/tomcat/webapps/</span><br><span class="line">docs  examples  host-manager  manager  ROOT  sample</span><br></pre></td></tr></table></figure></p><h3 id="å®‰è£…JenkinsæŒç»­é›†æˆç¯å¢ƒ"><a href="#å®‰è£…JenkinsæŒç»­é›†æˆç¯å¢ƒ" class="headerlink" title="å®‰è£…JenkinsæŒç»­é›†æˆç¯å¢ƒ"></a>å®‰è£…JenkinsæŒç»­é›†æˆç¯å¢ƒ</h3><h4 id="Jenkins-æ˜¯Javaå†™çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼›"><a href="#Jenkins-æ˜¯Javaå†™çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼›" class="headerlink" title="Jenkins æ˜¯Javaå†™çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼›"></a>Jenkins æ˜¯Javaå†™çš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼›</h4><p>å¯ä»¥å•ç‹¬è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨servletå®¹å™¨ä¸­è¿è¡Œï¼›<br>è¿™é‡Œæˆ‘ä»¬åœ¨tomcatè¿™ä¸ªservletå®¹å™¨é‡Œå®‰è£…Jenkinsï¼›</p><h4 id="Jenkinsçš„waræ–‡ä»¶"><a href="#Jenkinsçš„waræ–‡ä»¶" class="headerlink" title="Jenkinsçš„waræ–‡ä»¶"></a>Jenkinsçš„waræ–‡ä»¶</h4><p>war æ˜¯ web application archive æ„æ€æ˜¯ web çš„å½’æ¡£æ–‡ä»¶</p><h4 id="åœ¨windowä¸‹ï¼Œä¸‹è½½æ–‡ä»¶-å¹¶æ‹·è´ç§»åŠ¨ï¼š"><a href="#åœ¨windowä¸‹ï¼Œä¸‹è½½æ–‡ä»¶-å¹¶æ‹·è´ç§»åŠ¨ï¼š" class="headerlink" title="åœ¨windowä¸‹ï¼Œä¸‹è½½æ–‡ä»¶, å¹¶æ‹·è´ç§»åŠ¨ï¼š"></a>åœ¨windowä¸‹ï¼Œä¸‹è½½æ–‡ä»¶, å¹¶æ‹·è´ç§»åŠ¨ï¼š</h4><p><a href="http://mirrors.jenkins.io/war-stable/2.204.1/jenkins.war" target="_blank" rel="noopener">http://mirrors.jenkins.io/war-stable/2.204.1/jenkins.war</a></p><p>scpå°†æ–‡ä»¶æ‹·è´è‡³centos<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp jenkins.war root@192.168.0.106:/root</span><br></pre></td></tr></table></figure></p><h4 id="æ‰§è¡Œtomcatå‘½ä»¤ç”Ÿæˆ-Jenkins-ç›®å½•"><a href="#æ‰§è¡Œtomcatå‘½ä»¤ç”Ÿæˆ-Jenkins-ç›®å½•" class="headerlink" title="æ‰§è¡Œtomcatå‘½ä»¤ç”Ÿæˆ Jenkins ç›®å½•"></a>æ‰§è¡Œtomcatå‘½ä»¤ç”Ÿæˆ Jenkins ç›®å½•</h4><p>å°†ä¸Šé¢æ–‡ä»¶ç§»åŠ¨è‡³ tomcatçš„webç›®å½•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mv jenkins.war /var/lib/tomcat/webapps #tomcatçš„webç›®å½•</span><br><span class="line">cd /var/lib/tomcat/webapps</span><br><span class="line">systemctl restart tomcat</span><br><span class="line">#åªéœ€è¦æŠŠ Jenkins.war æ”¾ç½®åœ¨`/var/lib/tomcat/webapps`ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ `systemctl restart tomcat` ï¼Œ </span><br><span class="line">#tomcatå°±ä¼šåœ¨è¯¥ç›®å½•ä¸‹ ç”Ÿæˆ Jenkinsç›®å½•ï¼Œ</span><br></pre></td></tr></table></figure></p><h4 id="wgetä¸‹è½½æ–‡ä»¶å’Œscpæ‹·è´æ–‡ä»¶åŒºåˆ«"><a href="#wgetä¸‹è½½æ–‡ä»¶å’Œscpæ‹·è´æ–‡ä»¶åŒºåˆ«" class="headerlink" title="wgetä¸‹è½½æ–‡ä»¶å’Œscpæ‹·è´æ–‡ä»¶åŒºåˆ«"></a>wgetä¸‹è½½æ–‡ä»¶å’Œscpæ‹·è´æ–‡ä»¶åŒºåˆ«</h4><p>ä¸è¿‡ä½ æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œå´å‘ç°æ²¡æœ‰ç”Ÿæˆjenkinsç›®å½•ï¼Œ<br>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ç”¨wget ç›´æ¥ä¸‹è½½  jenkins.war åˆ° ç›®å½• <code>/var/lib/tomcat/webapps</code>ï¼Œ<br>æ˜¯å¯ä»¥ç”Ÿæˆç›®å½•jenkinsï¼›<br>ä¸ºä»€ä¹ˆå‘¢ï¼ŒåŸæ¥æ˜¯ wget ä¸‹è½½ä¸‹æ¥çš„ æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡ æ¯” scpè¿‡æ¥çš„å¥½ï¼Œ<br>æ­¤æ—¶SELinuxå°±ä¸ä¼šé˜»æ­¢ï¼Œå¯ä»¥ç”Ÿæˆç›®å½•ï¼Œ<br>ä½ å¯ä»¥é€šè¿‡æŠŠ SELinuxå®‰è£…éªŒè¯å…³é—­ (æ‰§è¡Œå‘½ä»¤ setenforce 0)ï¼Œå†æ¬¡æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ï¼Œå°±ä¼šå‘ç°å¯ä»¥ç”Ÿæˆç›®å½•ã€‚</p><h4 id="è§£å†³SELinux-çš„-scpæ‹·è´é—®é¢˜"><a href="#è§£å†³SELinux-çš„-scpæ‹·è´é—®é¢˜" class="headerlink" title="è§£å†³SELinux çš„ scpæ‹·è´é—®é¢˜"></a>è§£å†³SELinux çš„ scpæ‹·è´é—®é¢˜</h4><ul><li><p>æ–¹æ³•ä¸€ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost webapps]# cd /var/lib/tomcat/webapps</span><br><span class="line">[root@localhost webapps]# ls</span><br><span class="line">docs  examples  host-manager  jenkins.war  manager  ROOT  sample</span><br><span class="line">[root@localhost webapps]# ls -Zd .  æŸ¥çœ‹å½“å‰ç›®å½•å®‰å…¨ä¸Šä¸‹æ–‡</span><br><span class="line">drwxrwxr-x. root tomcat system_u:object_r:tomcat_var_lib_t:s0 .</span><br><span class="line">[root@localhost webapps]# ls -Zd jenkins.war</span><br><span class="line">-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 jenkins.war</span><br><span class="line">[root@localhost webapps]# semanage fcontext -a -t tomcat_var_lib_t jenkins.war</span><br><span class="line">[root@localhost webapps]# restorecon -Rv .   é‡å¯è¯¥ç›®å½•å®‰å…¨ä¸Šä¸‹æ–‡</span><br></pre></td></tr></table></figure></li><li><p>æ–¹æ³•äºŒï¼š<br>ç›´æ¥æ‹·è´è¿›å»ï¼Œä¹Ÿå¯ä»¥ï¼Œæ­¤æ—¶å°±é¿å…äº†å®‰å…¨ä¸Šä¸‹æ–‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /var/lib/tomcat/webapps</span><br><span class="line">rm -rf jenkins jenkins.war</span><br></pre></td></tr></table></figure></li></ul><p>åœ¨å®¢æœç«¯æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp jenkins.war root@192.168.1.109:/var/lib/tomcat/webapps</span><br></pre></td></tr></table></figure></p><h4 id="è®¿é—®ä¾ç„¶æŠ¥é”™ï¼š"><a href="#è®¿é—®ä¾ç„¶æŠ¥é”™ï¼š" class="headerlink" title="è®¿é—®ä¾ç„¶æŠ¥é”™ï¼š"></a>è®¿é—®ä¾ç„¶æŠ¥é”™ï¼š</h4><p><a href="http://192.168.1.109:8080/jenkins" target="_blank" rel="noopener">http://192.168.1.109:8080/jenkins</a></p><p>Unable to create the home directory â€˜/usr/share/tomcat/.jenkinsâ€™. This is most likely a permission problem.</p><p>To change the home directory, use JENKINS_HOME environment variable or set the JENKINS_HOME system property. See Container-specific documentation for more details of how to do this.</p><h4 id="è§£å†³æ–¹æ³•ï¼š"><a href="#è§£å†³æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³æ–¹æ³•ï¼š"></a>è§£å†³æ–¹æ³•ï¼š</h4><p>æ–¹æ³•ä¸€ï¼šæ¨è<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/tomcat</span><br><span class="line"> mkdir .jenkins</span><br><span class="line"> chown tomcat:tomcat .jenkins</span><br><span class="line"> systemctl restart tomcat</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•ä¸€ï¼šç»ˆæè§£å†³æ–¹æ³•ï¼š<br>å¦‚æœè¿˜ä¸èƒ½è§£å†³ï¼Œå°±å…³é—­å®‰å…¨æ ¡éªŒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setenforce 0</span><br><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è®¿é—®ï¼š<br><a href="http://192.168.1.109:8080/jenkins" target="_blank" rel="noopener">http://192.168.1.109:8080/jenkins</a><br>å°±ä¼šè·³è½¬åˆ°ï¼š<br><figure class="image-box">                <img src="/image/linuxf/jenk1.png" alt title class>                <p></p>            </figure></p><p>å¤åˆ¶å›¾ç‰‡ä¸­çš„åœ°å€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tomcat]# cat /usr/share/tomcat/.jenkins/secrets/initialAdminPassword</span><br><span class="line">41d9a966b9e6470e97a534d4c69ef517</span><br></pre></td></tr></table></figure></p><p>å°†ä¸Šé¢çš„å¯†ç å¤åˆ¶åˆ°ä¸Šé¢é¡µé¢ä¸Šï¼Œç‚¹å‡»ç»§ç»­ï¼š</p><h4 id="ä¿®æ”¹tomcatçš„Jenkins-ç›®å½•"><a href="#ä¿®æ”¹tomcatçš„Jenkins-ç›®å½•" class="headerlink" title="ä¿®æ”¹tomcatçš„Jenkins ç›®å½•"></a>ä¿®æ”¹tomcatçš„Jenkins ç›®å½•</h4><p>å¦‚æœä½ è¦ä¿®æ”¹ /usr/share/tomcat/.jenkins ç›®å½•ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mkdir /var/lib/jenkins</span><br><span class="line">chown tomcat:tomcat /var/lib/jenkins</span><br><span class="line">vim /etc/tomcat/context.xml</span><br><span class="line">#åœ¨ Context å†…å¢åŠ ä¸€è¡Œ</span><br><span class="line">&lt;Context&gt;</span><br><span class="line">    &lt;Environment name=&quot;JENKINS_HOME&quot; value=&quot;/var/lib/jenkins&quot; type=&quot;java.lang.String&quot;/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure></p><p><a href="http://192.168.1.109:8080/jenkins" target="_blank" rel="noopener">http://192.168.1.109:8080/jenkins</a><br><figure class="image-box">                <img src="/image/linuxf/jenk2.png" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br><span class="line">a3aba81d552b42238184305d6687a020</span><br></pre></td></tr></table></figure></p><p>ç­‰å¾…ä¸€åˆ†é’Ÿï¼Œå‡ºç°é¡µé¢</p><figure class="image-box">                <img src="/image/linuxf/jenk3.png" alt title class>                <p></p>            </figure><h4 id="jenkinså®‰è£…æˆåŠŸ"><a href="#jenkinså®‰è£…æˆåŠŸ" class="headerlink" title="jenkinså®‰è£…æˆåŠŸ"></a>jenkinså®‰è£…æˆåŠŸ</h4><p>å¦‚æœé¡ºåˆ©ï¼Œå°±é€‰æ‹©å®‰è£…æ¨èæ’ä»¶<br><figure class="image-box">                <img src="/image/linuxf/jk1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/jk2.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/jk3.png" alt title class>                <p></p>            </figure><br>å‡ºç°ä»¥ä¸‹é¡µé¢ï¼Œè¯´æ˜Jenkinså®‰è£…å¥½ï¼š<br><figure class="image-box">                <img src="/image/linuxf/jk4.png" alt title class>                <p></p>            </figure></p><p>æŸ¥çœ‹å·²ç»å®‰è£…å¥½çš„æ’ä»¶<br><figure class="image-box">                <img src="/image/linuxf/jk5.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/jk6.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxf/jk7.png" alt title class>                <p></p>            </figure></p><h4 id="å‡ºç°offline-ç¦»çº¿-é—®é¢˜çš„è§£å†³æ–¹æ³•"><a href="#å‡ºç°offline-ç¦»çº¿-é—®é¢˜çš„è§£å†³æ–¹æ³•" class="headerlink" title="å‡ºç°offline(ç¦»çº¿)é—®é¢˜çš„è§£å†³æ–¹æ³•"></a>å‡ºç°offline(ç¦»çº¿)é—®é¢˜çš„è§£å†³æ–¹æ³•</h4><p>æ­¤æ—¶ä¹Ÿå¯èƒ½å‡ºç°offline é—®é¢˜ï¼Œ æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¯ä¸ç”¨ç®¡ã€‚</p><figure class="image-box">                <img src="/image/linuxf/jenk4.png" alt title class>                <p></p>            </figure><p>è¿™æ˜¯è¯ä¹¦é—®é¢˜ï¼Œ<br>è§£å†³æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /var/lib/jenkins/hudson.model.UpdateCenter.xml</span><br><span class="line">#å°†å…¶ä¸­</span><br><span class="line"># &lt;url&gt;https://updates.jenkins.io/update-center.json&lt;/url&gt;</span><br><span class="line"># æ”¹ä¸º httpï¼Œå³ä¸ºï¼š</span><br><span class="line">#  &lt;url&gt;http://updates.jenkins.io/update-center.json&lt;/url&gt;</span><br><span class="line"></span><br><span class="line">systemctl restart tomcat</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡åˆ·æ–°<br><a href="http://192.168.1.109:8080/jenkins" target="_blank" rel="noopener">http://192.168.1.109:8080/jenkins</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /var/lib/jenkins/secrets/initialAdminPassword</span><br><span class="line">a3aba81d552b42238184305d6687a020</span><br></pre></td></tr></table></figure></p><p>å¯†ç ç™»å½•ä¸‹å³å¯</p><h4 id="å®‰è£…Jenkinsä¸é¡ºåˆ©æ—¶çš„è§£å†³æ–¹æ³•"><a href="#å®‰è£…Jenkinsä¸é¡ºåˆ©æ—¶çš„è§£å†³æ–¹æ³•" class="headerlink" title="å®‰è£…Jenkinsä¸é¡ºåˆ©æ—¶çš„è§£å†³æ–¹æ³•"></a>å®‰è£…Jenkinsä¸é¡ºåˆ©æ—¶çš„è§£å†³æ–¹æ³•</h4><p>Jenkinsä¹Ÿæœ‰å¯èƒ½ä¸é¡ºåˆ©<br><figure class="image-box">                <img src="/image/linuxf/jenk6.png" alt title class>                <p></p>            </figure></p><p>æ­¤æ—¶å°±é€‰æ‹©ï¼Œä¸å®‰è£…ä»»ä½•æ’ä»¶ï¼ŒæŠŠJenkinså®‰è£…å¥½å†è¯´ï¼š<br><figure class="image-box">                <img src="/image/linuxf/jenk7.png" alt title class>                <p></p>            </figure><br>é€‰æ‹©noneï¼Œä¸å®‰è£…ä»»ä½•æ’ä»¶<br><figure class="image-box">                <img src="/image/linuxf/jenk8.png" alt title class>                <p></p>            </figure><br>å®‰è£…å®Œæˆï¼š<br><figure class="image-box">                <img src="/image/linuxf/jenk9.png" alt title class>                <p></p>            </figure></p><h3 id="Jenkinsçš„è¿è¡Œè¯´æ˜"><a href="#Jenkinsçš„è¿è¡Œè¯´æ˜" class="headerlink" title="Jenkinsçš„è¿è¡Œè¯´æ˜"></a>Jenkinsçš„è¿è¡Œè¯´æ˜</h3><p>å¯ä»¥ç›´æ¥è¿è¡Œ java -jar jenkins.war<br>ä¹Ÿå¯ä»¥ä¿®æ”¹ç«¯å£è¿è¡Œ java -jar jenkins.war â€“httpPort=8081<br>æˆ–è€…åœ¨tomcatè¿™æ ·çš„servletå®¹å™¨é‡Œè¿è¡Œ(ä¸Šé¢æ¼”ç¤ºçš„è¿‡ç¨‹å°±æ˜¯åœ¨tomcatå®¹å™¨é‡Œè¿è¡Œjenkins)</p><h3 id="tomcatçš„-coyote-web-æœåŠ¡å™¨"><a href="#tomcatçš„-coyote-web-æœåŠ¡å™¨" class="headerlink" title="tomcatçš„ coyote web æœåŠ¡å™¨"></a>tomcatçš„ coyote web æœåŠ¡å™¨</h3><h4 id="tomcatçš„-coyote-web-æœåŠ¡å™¨çš„å±€é™"><a href="#tomcatçš„-coyote-web-æœåŠ¡å™¨çš„å±€é™" class="headerlink" title="tomcatçš„ coyote web æœåŠ¡å™¨çš„å±€é™"></a>tomcatçš„ coyote web æœåŠ¡å™¨çš„å±€é™</h4><p>coyote æ˜¯tomcatè‡ªå¸¦çš„è½»é‡çº§webæœåŠ¡å™¨ï¼›<br>coyote web æœåŠ¡å™¨ä¸èƒ½ç”¨äºç›´æ¥æœåŠ¡å®¢æˆ·ç«¯è¿æ¥<br>å®ƒåœ¨å¤„ç†é™æ€æ–‡ä»¶æ—¶æ•ˆç‡è¾ƒä½<br>å¹¶ä¸”æœ¬èº«ä¸æ”¯æŒ https åè®®</p><h4 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h4><p>ä½¿ç”¨åŠŸèƒ½æ›´å¼ºå¤§çš„webæœåŠ¡å™¨ï¼Œ æ¯”å¦‚ apache æˆ– nginx ä½œä¸ºä»£ç†æœåŠ¡å™¨ï¼Œ å°†è¯·æ±‚è½¬å‘åˆ° tomcatï¼›<br>webæœåŠ¡å™¨å°†ç®¡ç†httpsè¿æ¥ã€è®¿é—®é™åˆ¶å’Œé™æ€é¡µé¢ï¼›<br>åªæœ‰å¯¹javaåº”ç”¨ç¨‹åºçš„è¯·æ±‚ä¼šè¢«è½¬å‘åˆ°tomcatï¼›</p><h4 id="webæœåŠ¡å™¨å’Œtomcatåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ–¹å¼"><a href="#webæœåŠ¡å™¨å’Œtomcatåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ–¹å¼" class="headerlink" title="webæœåŠ¡å™¨å’Œtomcatåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ–¹å¼"></a>webæœåŠ¡å™¨å’Œtomcatåº”ç”¨æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ–¹å¼</h4><ul><li>ä½¿ç”¨httpåè®®ï¼ŒwebæœåŠ¡å™¨å°†ä¼šåšä¸€ä¸ªhttpé‡å®šå‘åˆ°tomcatæœåŠ¡å™¨ï¼›</li><li>ä½¿ç”¨æŸäº›æ’ä»¶ï¼Œä¾‹å¦‚ä»…é€‚ç”¨äºapacheçš„mod_jkæ’ä»¶ï¼Œè¯¥æ’ä»¶ä½¿ç”¨ç‰¹æ®Šåè®®åœ¨apacheå’Œtomcatä¹‹é—´è¿›è¡Œé€šä¿¡ï¼›</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(éœ‡)</title>
      <link href="/2021/05/30/linux_third/"/>
      <url>/2021/05/30/linux_third/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®¡ç†æœåŠ¡å™¨å’ŒæœåŠ¡"><a href="#ç®¡ç†æœåŠ¡å™¨å’ŒæœåŠ¡" class="headerlink" title="ç®¡ç†æœåŠ¡å™¨å’ŒæœåŠ¡"></a>ç®¡ç†æœåŠ¡å™¨å’ŒæœåŠ¡</h2><h3 id="å®ˆæŠ¤è¿›ç¨‹å’Œåˆå§‹åŒ–è¿›ç¨‹æœåŠ¡"><a href="#å®ˆæŠ¤è¿›ç¨‹å’Œåˆå§‹åŒ–è¿›ç¨‹æœåŠ¡" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹å’Œåˆå§‹åŒ–è¿›ç¨‹æœåŠ¡"></a>å®ˆæŠ¤è¿›ç¨‹å’Œåˆå§‹åŒ–è¿›ç¨‹æœåŠ¡</h3><h4 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h4><p>ä¸€ä¸ªè¿è¡Œèµ·æ¥çš„ç¨‹åºè¢«ç§°ä¹‹ä¸º è¿›ç¨‹</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost h2]# ps -o ppid,pid,tty,cmd # -o æ˜¯æŒ‡å®šæ˜¾ç¤ºä»€ä¹ˆå†…å®¹åˆ— PPID çˆ¶è¿›ç¨‹idï¼Œ pid è‡ªå·±idï¼Œ ttå°±æ˜¯ttyçª—å£ cmd ä»€ä¹ˆè¿›ç¨‹</span><br><span class="line">  PPID    PID TT       CMD</span><br><span class="line">  2697  16107 pts/0    sudo su</span><br><span class="line"> 16107  16109 pts/0    su</span><br><span class="line"> 16109  16112 pts/0    bash</span><br><span class="line"> 16112  28766 pts/0    ps -o ppid,pid,tty,cmd</span><br><span class="line">[root@localhost h2]#</span><br></pre></td></tr></table></figure><h4 id="å®ˆæŠ¤è¿›ç¨‹-ç‰¹æ®Šè¿›ç¨‹"><a href="#å®ˆæŠ¤è¿›ç¨‹-ç‰¹æ®Šè¿›ç¨‹" class="headerlink" title="å®ˆæŠ¤è¿›ç¨‹ (ç‰¹æ®Šè¿›ç¨‹)"></a>å®ˆæŠ¤è¿›ç¨‹ (ç‰¹æ®Šè¿›ç¨‹)</h4><p> linuxæœ‰äº›ç‰¹æ®Šè¿›ç¨‹ åªåœ¨åå°è¿è¡Œï¼›<br> è¿™äº›çˆ¶è¿›ç¨‹çš„PIDä¸º1ï¼›<br> PIDä¸º1çš„è¿›ç¨‹åªåœ¨ç³»ç»Ÿå…³é—­æ—¶æ‰ä¼šè¢«é”€æ¯ï¼›<br> æˆ‘ä»¬å°†è¿™ç±»ç‰¹æ®Šè¿›ç¨‹ç§°ä¹‹ä¸º daemon å®ˆæŠ¤è¿›ç¨‹ï¼›daemonæ˜¯å¤å¸Œè…Šç¥è¯ä¸­çš„åŠç¥åŠäººç²¾çµã€å®ˆæŠ¤ç¥ï¼›<br> å› æ­¤å®ˆæŠ¤è¿›ç¨‹ä¹Ÿç§°ä¸º ç²¾çµè¿›ç¨‹ï¼›<br> å®ˆæŠ¤è¿›ç¨‹ä¹Ÿè¢«ç§°ä¸º serviceï¼ˆæœåŠ¡ï¼‰ï¼›<br> æœåŠ¡å™¨è½¯ä»¶å¤§å¤šéƒ½æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼è¿è¡Œçš„ï¼›<br> å®ˆæŠ¤è¿›ç¨‹çš„åå­—é€šå¸¸ä¼šåœ¨æœ€åæœ‰ä¸€ä¸ªdï¼Œè¡¨ç¤º daemonï¼›<br> ä¾‹å¦‚ systemdï¼Œhttpdï¼Œ smbd ç­‰ç­‰ï¼›</p><h4 id="linuxæ“ä½œç³»ç»Ÿçš„å¼€æœºè¿‡ç¨‹"><a href="#linuxæ“ä½œç³»ç»Ÿçš„å¼€æœºè¿‡ç¨‹" class="headerlink" title="linuxæ“ä½œç³»ç»Ÿçš„å¼€æœºè¿‡ç¨‹"></a>linuxæ“ä½œç³»ç»Ÿçš„å¼€æœºè¿‡ç¨‹</h4><figure class="image-box">                <img src="/image/linuxt/ser.png" alt title class>                <p></p>            </figure><h4 id="åˆå§‹åŒ–è¿›ç¨‹æœåŠ¡"><a href="#åˆå§‹åŒ–è¿›ç¨‹æœåŠ¡" class="headerlink" title="åˆå§‹åŒ–è¿›ç¨‹æœåŠ¡"></a>åˆå§‹åŒ–è¿›ç¨‹æœåŠ¡</h4><p>centosè‡ªä» centos7ä»¥æ¥ï¼Œä»¥systemdå‘½ä»¤æ¥è®¾ç½®æœåŠ¡ï¼Œå…³é”®å­—æ˜¯ systemctl ï¼š<br><figure class="image-box">                <img src="/image/linuxt/ser1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxt/ser2.png" alt title class>                <p></p>            </figure></p><h3 id="ç”¨systemdç®¡ç†ç³»ç»ŸæœåŠ¡"><a href="#ç”¨systemdç®¡ç†ç³»ç»ŸæœåŠ¡" class="headerlink" title="ç”¨systemdç®¡ç†ç³»ç»ŸæœåŠ¡"></a>ç”¨systemdç®¡ç†ç³»ç»ŸæœåŠ¡</h3><h4 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h4><p>systemd æ˜¯å‡ ä¹æ‰€æœ‰æœ€æ–°çš„linuxå‘è¡Œç‰ˆé‡‡ç”¨çš„åˆå§‹åŒ–ç³»ç»Ÿï¼›ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºåˆå§‹åŒ–è¿›ç¨‹æœåŠ¡ï¼›<br>systemd çš„ pid æ˜¯1ï¼›<br>å…¶ä»–è¿›ç¨‹éƒ½æ˜¯å®ƒçš„å­è¿›ç¨‹ï¼› </p><p>systemd å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒåŒ…å«äº†ä¸€ç»„å‘½ä»¤ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿè¿›ç¨‹ç®¡ç†çš„æ–¹æ–¹é¢é¢ï¼›<br>systemd æ˜¯åŸºäºäº‹ä»¶çš„ï¼Œè¿™ä½¿å¾—å®ƒæ‹¥æœ‰æ›´çµæ´»çš„æœºåˆ¶ï¼›<br>systemd å¯ä»¥ä½¿è¿›ç¨‹å¹¶è¡Œå¯åŠ¨ï¼Œå¹¶éå¸¸ç²¾è‡´çš„ç®¡ç†å„ç§ä¾èµ–å…³ç³»ï¼›<br>ç®¡ç†ä»»åŠ¡çš„è®¡åˆ’ï¼Œç³»ç»Ÿæ—¥å¿—ï¼Œå¤–è®¾ ç­‰ï¼›</p><h4 id="ç®¡ç†è¿›ç¨‹çš„å¯åŠ¨å’Œåœæ­¢"><a href="#ç®¡ç†è¿›ç¨‹çš„å¯åŠ¨å’Œåœæ­¢" class="headerlink" title="ç®¡ç†è¿›ç¨‹çš„å¯åŠ¨å’Œåœæ­¢"></a>ç®¡ç†è¿›ç¨‹çš„å¯åŠ¨å’Œåœæ­¢</h4><p>systemd æä¾›äº† systemctl å‘½ä»¤ï¼›<br>ä½¿å¾—æˆ‘ä»¬å¯ç®¡ç† unit å•å…ƒï¼›<br>å¯¹systemdæ¥è¯´ï¼Œunitæ³›æŒ‡å®ƒå¯ä»¥æ“ä½œçš„ä»»ä½•å¯¹è±¡ï¼›</p><p>unit å¯ä»¥æœ‰ä¸åŒçš„ç±»å‹ï¼š æœåŠ¡(æ¯”å¦‚ ç²¾çµè¿›ç¨‹)ï¼Œ æŒ‚è½½ï¼ˆmountï¼‰ï¼Œ å¤–è®¾ï¼Œç­‰ç­‰ï¼›<br>å®ˆæŠ¤è¿›ç¨‹å°±å±äº service æœåŠ¡ ç±»å‹ï¼Œæ˜¯ä¸Šé¢unitçš„ä¸€ç§ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y install samba  #smbå‘½ä»¤éœ€è¦å®‰è£…samba</span><br><span class="line">systemctl start smb</span><br><span class="line">ps -aux | grep smb</span><br><span class="line">systemctl status smb</span><br><span class="line">systemctl stop smb</span><br><span class="line">systemctl #ä¸ä¼ å‚æ•°ç›¸å½“äº systemctl list-units</span><br><span class="line">systemctl list-units --type=service #æŸ¥çœ‹unit type ä¸º serviceçš„ è¿›ç¨‹</span><br></pre></td></tr></table></figure><p>targetåç§°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --type=target --all</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linuxt/tar.png" alt title class>                <p></p>            </figure><h4 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h4><p>å¯ä»¥é€šè¿‡ journalctl å‘½ä»¤æ¥ç®¡ç†ç³»ç»Ÿæ—¥å¿—ï¼›<br>å¯ä»¥é€šè¿‡ systemd-analyze å‘½ä»¤æ¥æŸ¥çœ‹å¯åŠ¨è€—æ—¶ï¼›</p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p>æ›´å¤šSystemdçŸ¥è¯†ï¼Œå‚è€ƒè¿™ç¯‡åšå®¢ï¼š<br><a href="http://ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html" target="_blank" rel="noopener">Systemd å…¥é—¨æ•™ç¨‹</a></p><h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><h3 id="httpd-ä¸-Apache"><a href="#httpd-ä¸-Apache" class="headerlink" title="httpd ä¸ Apache"></a>httpd ä¸ Apache</h3><p>Apache æ˜¯ç›®å‰è¯•é”™å æœ‰ç‡å¾ˆé«˜çš„webæœåŠ¡ç¨‹åº<br>è·¨å¹³å° Windowsã€linuxã€ macOSã€Unix<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install httpd</span><br></pre></td></tr></table></figure></p><p>åœ¨centosç­‰ red hat ä¸€æ—ä¸­ï¼Œ apache ç¨‹åºçš„åå­—å« httpd ï¼Œå› æ­¤å®‰è£… Apache å°±æ˜¯ å®‰è£… httpdï¼›<br>httpdï¼Œåé¢æœ‰dï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªç²¾çµè¿›ç¨‹ï¼Œåå°ä¸€ç›´è¿è¡Œã€‚<br>åœ¨Ubuntu ç­‰ linuxå‘è¡Œç‰ˆä¸­ï¼Œä¾ç„¶å« Apacheï¼›</p><h3 id="systemctl-ç®¡ç†-httpd"><a href="#systemctl-ç®¡ç†-httpd" class="headerlink" title="systemctl ç®¡ç† httpd"></a>systemctl ç®¡ç† httpd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemctl start httpd #å¯åŠ¨ApacheæœåŠ¡</span><br><span class="line">systemctl stop httpd #åœæ­¢ApacheæœåŠ¡</span><br><span class="line">systemctl restart httpd #é‡å¯ ApacheæœåŠ¡</span><br><span class="line">systemctl reload httpd #é‡è½½ApacheæœåŠ¡çš„é…ç½®æ–‡ä»¶ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ</span><br><span class="line">systemctl status httpd #æŸ¥çœ‹çŠ¶æ€</span><br><span class="line">systemctl enable httpd #è®¾ç½®å¼€æœºè‡ªåŠ¨å¯åŠ¨ ApacheæœåŠ¡</span><br><span class="line">systemctl disable httpd #è®¾ç½®å¼€æœºä¸å¯åŠ¨ ApacheæœåŠ¡</span><br><span class="line">systemctl is-enabled httpd #æŸ¥çœ‹ApacheæœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨</span><br></pre></td></tr></table></figure><h3 id="æœåŠ¡å™¨ipåœ¨-å®¢æˆ·æœºè®¿é—®Apacheé¦–é¡µ"><a href="#æœåŠ¡å™¨ipåœ¨-å®¢æˆ·æœºè®¿é—®Apacheé¦–é¡µ" class="headerlink" title="æœåŠ¡å™¨ipåœ¨ å®¢æˆ·æœºè®¿é—®Apacheé¦–é¡µ"></a>æœåŠ¡å™¨ipåœ¨ å®¢æˆ·æœºè®¿é—®Apacheé¦–é¡µ</h3><p>ApacheæœåŠ¡å¦‚æœå®‰è£…æˆåŠŸï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æœåŠ¡å™¨ipåœ¨ å®¢æˆ·æœºè®¿é—®ï¼Œ<br>ä½†å› ä¸ºæœ‰é˜²ç«å¢™çš„ç¼˜æ•…è®¿é—®ä¸äº†ï¼Œå› ä¸ºé˜²ç«å¢™æ²¡æœ‰å¼€æ”¾æ­¤ç«¯å£å·ï¼Œ<br><figure class="image-box">                <img src="/image/linuxt/apa1.png" alt title class>                <p></p>            </figure><br>å¯ä»¥é€šè¿‡å‘½ä»¤æ¥æŸ¥çœ‹æœåŠ¡å™¨å¼€æ”¾çš„ç«¯å£ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-ports</span><br></pre></td></tr></table></figure></p><h3 id="å®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡"><a href="#å®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡" class="headerlink" title="å®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡"></a>å®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#æ–¹æ³•ä¸€ï¼š</span><br><span class="line">#å¯ä»¥é€šè¿‡å…³é—­æœåŠ¡å™¨é˜²ç«å¢™æ¥è®¿é—®ï¼š</span><br><span class="line"></span><br><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨å®¢æˆ·æœºä¸Šè®¿é—®ï¼Œå‡ºç°ä¸‹é¢é¡µé¢è¯´æ˜æˆåŠŸï¼š<br><figure class="image-box">                <img src="/image/linuxt/apa.png" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#æ–¹æ³•äºŒ æ¨èï¼š</span><br><span class="line">#è®¾ç½®é˜²ç«å¢™å¼€æ”¾80ç«¯å£ æ°¸ä¹…--permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">#ä¸Šé¢è®¾ç½®åï¼Œä½¿ç”¨æ­¤å‘½ä»¤ä½¿è®¾ç½®ç«‹å³ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥ä¸ç”¨æ­¤å‘½ä»¤ï¼Œé‡å¯ç”µè„‘åç”Ÿæ•ˆ</span><br><span class="line">firewall-cmd reload </span><br><span class="line">#è®¾ç½®é˜²ç«å¢™å…³é—­80ç«¯å£ æ°¸ä¹…--permanent</span><br><span class="line">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br></pre></td></tr></table></figure><p>æ³¨æ„çš„æ˜¯ æ¯æ¬¡ä½ çš„è™šæ‹Ÿæœºå¦‚æœæ›´æ¢äº†ç½‘ç»œæˆ–è€…ç½‘ç»œæ–­å¼€é‡è¿åï¼Œéœ€è¦ç”¨ <code>systemctl restart network</code> é‡æ–°æ›´æ–°è™šæ‹Ÿæœºipé…ç½®ï¼›</p><h3 id="é…ç½®-ApacheæœåŠ¡"><a href="#é…ç½®-ApacheæœåŠ¡" class="headerlink" title="é…ç½® ApacheæœåŠ¡"></a>é…ç½® ApacheæœåŠ¡</h3><h4 id="ä¸‹é¢æ˜¯ApacheæœåŠ¡çš„é…ç½®æ–‡ä»¶åœ°å€"><a href="#ä¸‹é¢æ˜¯ApacheæœåŠ¡çš„é…ç½®æ–‡ä»¶åœ°å€" class="headerlink" title="ä¸‹é¢æ˜¯ApacheæœåŠ¡çš„é…ç½®æ–‡ä»¶åœ°å€"></a>ä¸‹é¢æ˜¯ApacheæœåŠ¡çš„é…ç½®æ–‡ä»¶åœ°å€</h4><figure class="image-box">                <img src="/image/linuxt/apac.png" alt title class>                <p></p>            </figure><h4 id="é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹ç±»å‹ï¼š"><a href="#é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹ç±»å‹ï¼š" class="headerlink" title="é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹ç±»å‹ï¼š"></a>é…ç½®æ–‡ä»¶æœ‰ä»¥ä¸‹ç±»å‹ï¼š</h4><figure class="image-box">                <img src="/image/linuxt/apac1.png" alt title class>                <p></p>            </figure><p> å…¨å±€é…ç½®ï¼Œå¦‚ä¸‹ä¸ç”¨ <code>&lt;Directory&gt;</code> åŒ…èµ·æ¥ï¼Œæ¯”å¦‚ LogLevel warn ç­‰ç­‰;<br> åŒºåŸŸé…ç½®ï¼Œå¦‚ä¸‹åŒºåŸŸé…ç½®ä¸€èˆ¬ç”¨ <code>&lt;Directory&gt;</code> åŒ…èµ·æ¥;</p><h4 id="ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶éƒ¨åˆ†ç¤ºä¾‹"><a href="#ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶éƒ¨åˆ†ç¤ºä¾‹" class="headerlink" title="ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶éƒ¨åˆ†ç¤ºä¾‹"></a>ä¸‹é¢æ˜¯é…ç½®æ–‡ä»¶éƒ¨åˆ†ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot &quot;/var/www/html&quot;  #  å…¨å±€é…ç½® </span><br><span class="line">LogLevel warn # å…¨å±€é…ç½®</span><br><span class="line"></span><br><span class="line">&lt;Directory /&gt;  # åŒºåŸŸé…ç½®</span><br><span class="line">    AllowOverride none</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"># è¯´æ˜é’ˆå¯¹ &quot;/var/www&quot; çš„åŒºåŸŸè®¾ç½®</span><br><span class="line">&lt;Directory &quot;/var/www&quot;&gt; </span><br><span class="line">    AllowOverride None</span><br><span class="line">    # Allow open access:</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„-httpdå‚æ•°"><a href="#é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„-httpdå‚æ•°" class="headerlink" title="é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„ httpdå‚æ•°,"></a>é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„ httpdå‚æ•°,</h4><p>ä¸‹é¢å‚æ•°ä¸­ï¼Œæœ‰äº›æ˜¯å…¨å±€é…ç½®ï¼Œæœ‰äº›æ˜¯åŒºåŸŸé…ç½®å‚æ•°<br><figure class="image-box">                <img src="/image/linuxt/apac2.png" alt title class>                <p></p>            </figure></p><p>å¦‚ä¸Šå›¾ Directory æ˜¯é…ç½®ç½‘ç«™æ•°æ®ç›®å½•çš„æƒé™ï¼Œå¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory /&gt; #  é…ç½®æ ¹ç›®å½•/</span><br><span class="line">    AllowOverride none</span><br><span class="line">    Require all denied</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"># é…ç½®ç›®å½•/var/www</span><br><span class="line">&lt;Directory &quot;/var/www&quot;&gt; </span><br><span class="line">    AllowOverride None</span><br><span class="line">    # Allow open access:</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><h3 id="SELinux-å®‰å…¨å­ç³»ç»Ÿ"><a href="#SELinux-å®‰å…¨å­ç³»ç»Ÿ" class="headerlink" title="SELinux å®‰å…¨å­ç³»ç»Ÿ"></a>SELinux å®‰å…¨å­ç³»ç»Ÿ</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>SELinux æ˜¯ security-enhanced linux ç¼©å†™ï¼Œè¡¨ç¤º å®‰å…¨å¢å¼ºå‹ linuxï¼›</p><figure class="image-box">                <img src="/image/linuxt/sel0.png" alt title class>                <p></p>            </figure><h4 id="é˜²ç«å¢™å’Œ-SELinux-çš„åŒºåˆ«"><a href="#é˜²ç«å¢™å’Œ-SELinux-çš„åŒºåˆ«" class="headerlink" title="é˜²ç«å¢™å’Œ SELinux çš„åŒºåˆ«"></a>é˜²ç«å¢™å’Œ SELinux çš„åŒºåˆ«</h4><p>é˜²ç«å¢™å°±åƒé˜²ç›—é—¨ï¼Œç”¨äºæŠµå¾¡å¤–éƒ¨çš„å±é™©ï¼›<br>SELinuxå°±åƒä¿é™©æŸœï¼Œç”¨äºä¿æŠ¤å†…éƒ¨çš„èµ„æºï¼›<br><figure class="image-box">                <img src="/image/linuxt/sel.png" alt title class>                <p></p>            </figure></p><h4 id="sestatus"><a href="#sestatus" class="headerlink" title="sestatus"></a>sestatus</h4><p>sestatus  selinux status ç¼©å†™ï¼›æ­¤å‘½ä»¤ç”¨äºæŸ¥çœ‹selinuxçŠ¶æ€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# sestatus  </span><br><span class="line">SELinux status:                 enabled  # æ˜¯å¦å¯åŠ¨</span><br><span class="line">SELinuxfs mount:                /sys/fs/selinux</span><br><span class="line">SELinux root directory:         /etc/selinux  # SELinux ä¸»ç›®å½•</span><br><span class="line">Loaded policy name:             targeted</span><br><span class="line">Current mode:                   enforcing  #  æ¨¡å¼</span><br><span class="line">Mode from config file:          enforcing</span><br><span class="line">Policy MLS status:              enabled</span><br><span class="line">Policy deny_unknown status:     allowed</span><br><span class="line">Max kernel policy version:      31</span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®å®æˆ˜-ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹"><a href="#é…ç½®å®æˆ˜-ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹" class="headerlink" title="é…ç½®å®æˆ˜ ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹"></a>é…ç½®å®æˆ˜ ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹</h3><h4 id="æ­¥éª¤å¦‚ä¸‹"><a href="#æ­¥éª¤å¦‚ä¸‹" class="headerlink" title="æ­¥éª¤å¦‚ä¸‹"></a>æ­¥éª¤å¦‚ä¸‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# cd /</span><br><span class="line">[root@localhost /]# mkdir /home</span><br><span class="line">[root@localhost /]# cd /home</span><br><span class="line">[root@localhost /]# mkdir /web</span><br><span class="line">[root@localhost /]# pwd</span><br><span class="line">/home/web</span><br><span class="line">[root@localhost /]# echo &quot;hellow world apache&quot; &gt;./index.html</span><br><span class="line">[root@localhost /]# vim /etc/httpd/conf/httpd.conf</span><br></pre></td></tr></table></figure><p><code>/etc/httpd/conf/httpd.conf</code>ä¿®æ”¹éƒ¨åˆ†å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DocumentRoot &quot;/home/web&quot;</span><br><span class="line"></span><br><span class="line">&lt;Directory &quot;/home/web&quot;&gt;</span><br><span class="line">    AllowOverride None</span><br><span class="line">    # Allow open access:</span><br><span class="line">    Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# systemctl reload httpd  é‡è½½apacheï¼Œè®©é…ç½®ç«‹å³ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure><h4 id="é…ç½®çš„é¦–é¡µä¸ç”Ÿæ•ˆ"><a href="#é…ç½®çš„é¦–é¡µä¸ç”Ÿæ•ˆ" class="headerlink" title="é…ç½®çš„é¦–é¡µä¸ç”Ÿæ•ˆ"></a>é…ç½®çš„é¦–é¡µä¸ç”Ÿæ•ˆ</h4><p>åœ¨å®¢æˆ·æœºä¸­è®¿é—®æœåŠ¡å™¨ipï¼Œå‘ç°è¿˜æ˜¯åŸæ¥çš„å†…å®¹ï¼Œæ²¡æœ‰æ˜¾ç¤ºè‡ªå·±è®¾ç½®çš„å†…å®¹ï¼Œ<br>è¿™æ˜¯ç”±äºä¸Šé¢çš„SELinuxå®‰å…¨é™åˆ¶çš„åŸå› ï¼Œç”±äº SELinux çš„é™åˆ¶ï¼Œè®©æœåŠ¡å™¨ç»§ç»­æ˜¾ç¤ºä¹‹å‰çš„é¡µé¢ï¼›</p><h4 id="é…ç½®SELinux"><a href="#é…ç½®SELinux" class="headerlink" title="é…ç½®SELinux"></a>é…ç½®SELinux</h4><p>é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œå¯è®¿é—®æ­£ç¡®çš„é¡µé¢ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# setenforce 0  å¯ä½¿ç”¨ä¸‹é¢å‘½ä»¤æš‚æ—¶åœæ‰ SELinux æœåŠ¡ï¼Œ</span><br><span class="line"># setenforceæ˜¯æš‚æ—¶è®¾ç½®ï¼Œç³»ç»Ÿé‡å¯åç”¨åŸæ¥çš„é…ç½®</span><br><span class="line"># setenforce 1 æ˜¯æš‚æ—¶è®¾ç½®ä¸ºå¼ºåˆ¶å®‰å…¨æ¨¡å¼</span><br><span class="line"></span><br><span class="line">[root@localhost /]# getenforce  æŸ¥çœ‹ SELinux çš„é…ç½®ï¼Œå‘ç°æ˜¯Permissiveä¸é™åˆ¶çš„ï¼›</span><br><span class="line">Permissive</span><br></pre></td></tr></table></figure></p><p>å†æ¬¡è®¿é—®å¯ä»¥æ˜¾ç¤ºæ­£ç¡®é¡µé¢ï¼š<br><figure class="image-box">                <img src="/image/linuxt/apac3.png" alt title class>                <p></p>            </figure></p><h4 id="é…ç½®ä¸ç”Ÿæ•ˆçš„æœ¬è´¨åŸå› "><a href="#é…ç½®ä¸ç”Ÿæ•ˆçš„æœ¬è´¨åŸå› " class="headerlink" title="é…ç½®ä¸ç”Ÿæ•ˆçš„æœ¬è´¨åŸå› "></a>é…ç½®ä¸ç”Ÿæ•ˆçš„æœ¬è´¨åŸå› </h4><p>å¦‚ä¸‹ <code>/var/www/html</code> æ˜¯ httpd é»˜è®¤çš„åŸé¦–é¡µå†…å®¹æ˜¾ç¤ºç›®å½•ï¼›<br><code>/home/web</code>æ˜¯ httpd ç›®å‰é¦–é¡µå†…å®¹æ˜¾ç¤ºç›®å½•ï¼›<br>äºŒè€…çš„å®‰å…¨ä¸Šä¸‹æ–‡ä¸åŒï¼Œä»è€Œè§¦å‘äº†SELinuxçš„å®‰å…¨ç­–ç•¥ï¼Œå› æ­¤æ— æ³•æ­£å¸¸æ˜¾ç¤º è®¾ç½®åçš„é¡µé¢å†…å®¹ã€‚<br>è§£å†³ä¹‹æ³•ï¼Œå°±æ˜¯è®¾ç½® å®‰å…¨ä¸Šä¸‹æ–‡ æ ¹ <code>/var/www/html</code> ä¸€æ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# ls -Zd /var/www/html #-Z æ˜¯æ˜¾ç¤ºç›®å½•çš„ æƒé™ ç¾¤ç»„ å®‰å…¨ä¸Šä¸‹æ–‡ ç­‰ç­‰ -dæ˜¯ä¸æ˜¾ç¤ºç›®å½•å†…å®¹ï¼Œåªæ˜¾ç¤ºç›®å½•æœ¬èº«</span><br><span class="line"># drwxr-xr-x. æƒé™ ï¼› ç”¨æˆ·å’Œç¾¤ç»„ root root ï¼›  </span><br><span class="line">#  system_u:object_r:httpd_sys_content_t:s0 å®‰å…¨ä¸Šä¸‹æ–‡ ï¼›</span><br><span class="line"># å®‰å…¨ä¸Šä¸‹æ–‡ ä»¥å†’å·åˆ†éš”ï¼Œå†…å®¹åˆ†åˆ«ä¸º ç”¨æˆ·:è§’è‰²:ç±»å‹:å…¶ä»–ä¿¡æ¯</span><br><span class="line"># system_u ä»£è¡¨ç³»ç»Ÿè¿›ç¨‹</span><br><span class="line"># object_r æ–‡ä»¶ç›®å½•è§’è‰²</span><br><span class="line"># httpd_sys_content_t ç½‘ç«™æœåŠ¡çš„ç³»ç»Ÿæ–‡ä»¶</span><br><span class="line">drwxr-xr-x. root root system_u:object_r:httpd_sys_content_t:s0 /var/www/html</span><br><span class="line">[root@localhost /]# ls -Zd /home/web</span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:home_root_t:s0 /home/web</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡"><a href="#ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡"></a>ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡</h3><h4 id="semanage-å‘½ä»¤"><a href="#semanage-å‘½ä»¤" class="headerlink" title="semanage å‘½ä»¤"></a>semanage å‘½ä»¤</h4><p>semanage æ˜¯ SELinux manage çš„ç¼©å†™</p><p>semanage çš„å¸¸ç”¨å‚æ•°</p><ul><li>-l æŸ¥è¯¢</li><li>-a æ·»åŠ </li><li>-m ä¿®æ”¹</li><li>-d åˆ é™¤</li></ul><p>è¿è¡Œ semanageå‘½ä»¤ï¼Œå‘ç°æ²¡æœ‰å®‰è£…ï¼Œ</p><h4 id="yun-provides-semanage-å‘½ä»¤"><a href="#yun-provides-semanage-å‘½ä»¤" class="headerlink" title="yun provides semanage å‘½ä»¤"></a>yun provides semanage å‘½ä»¤</h4><p>å¯é€šè¿‡ yun provides semanage æ‰¾åˆ°å¦‚ä½•å®‰è£…,æˆ–æ‰¾åˆ° semanage çš„å®‰è£…ä¾èµ–åŒ…å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# yum provides semanage</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.ustc.edu.cn</span><br><span class="line"> * extras: mirrors.ustc.edu.cn</span><br><span class="line"> * updates: mirrors.ustc.edu.cn</span><br><span class="line"></span><br><span class="line">base/7/x86_64/filelists_db                               | 7.2 MB     00:01</span><br><span class="line">extras/7/x86_64/filelists_db                             | 231 kB     00:00</span><br><span class="line">updates/7/x86_64/filelists_db                            | 4.7 MB     00:00</span><br><span class="line"># SELinux policy core python utilities è¯´æ˜ä¾èµ–åŒ…æ˜¯policycoreutils-python</span><br><span class="line">policycoreutils-python-2.5-34.el7.x86_64 : SELinux policy core python utilities </span><br><span class="line">Repo        : base</span><br><span class="line">Matched from:</span><br><span class="line">Filename    : /usr/sbin/semanage</span><br></pre></td></tr></table></figure><p>è¿›è¡Œå®‰è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install policycoreutils-python</span><br></pre></td></tr></table></figure></p><h4 id="semanage-ä¿®æ”¹ä¸Šä¸‹æ–‡"><a href="#semanage-ä¿®æ”¹ä¸Šä¸‹æ–‡" class="headerlink" title="semanage ä¿®æ”¹ä¸Šä¸‹æ–‡"></a>semanage ä¿®æ”¹ä¸Šä¸‹æ–‡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# setenforce 1 #æš‚æ—¶è®¾ç½®SELinuxä¸ºå¼ºåˆ¶å®‰å…¨æ¨¡å¼ï¼Œä»¥ä¾¿æ¼”ç¤º</span><br><span class="line">#fcontext ä¸Šä¸‹æ–‡ï¼Œ ç»™/home/web æ·»åŠ ä¸Šä¸‹æ–‡ </span><br><span class="line">#httpd_sys_content_t,è¿™ä¸ªå°±æ˜¯ä¸Šé¢ /var/www/html çš„ä¸Šä¸‹æ–‡</span><br><span class="line">[root@localhost /]# semanage fcontext -a -t httpd_sys_content_t /home/web</span><br><span class="line">#åŠ *ï¼Œç»™ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ åŠ ä¸Šä¸‹æ–‡</span><br><span class="line">[root@localhost /]# semanage fcontext -a -t httpd_sys_content_t /home/web/*</span><br><span class="line"># restorecon æ˜¯restore content ç¼©å†™ï¼Œè®©/home/web ä¸‹åˆšæ‰è®¾ç½®çš„ä¸Šä¸‹æ–‡ç”Ÿæ•ˆ</span><br><span class="line">[root@localhost /]# restorecon -Rv /home/web</span><br><span class="line">restorecon reset /home/web context unconfined_u:object_r:home_root_t:s0-&gt;unconfined_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">restorecon reset /home/web/index.html context unconfined_u:object_r:home_root_t:s0-&gt;unconfined_u:object_r:httpd_sys_content_t:s0</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢ä¸€é¡¿æ“ä½œåï¼Œé‡æ–°è®¿é—®ï¼Œå‘ç°èƒ½æ­£å¸¸è®¿é—®æ–°é¡µé¢äº†</p><h3 id="DHCP-åŠ¨æ€ã€é™æ€åˆ†é…IP"><a href="#DHCP-åŠ¨æ€ã€é™æ€åˆ†é…IP" class="headerlink" title="DHCP åŠ¨æ€ã€é™æ€åˆ†é…IP"></a>DHCP åŠ¨æ€ã€é™æ€åˆ†é…IP</h3><h4 id="DHCP-åŠ¨æ€ä¸»æœºé…ç½®åè®®"><a href="#DHCP-åŠ¨æ€ä¸»æœºé…ç½®åè®®" class="headerlink" title="DHCP: åŠ¨æ€ä¸»æœºé…ç½®åè®®"></a>DHCP: åŠ¨æ€ä¸»æœºé…ç½®åè®®</h4><p>dynamic host configuration protocol çš„ç¼©å†™ï¼›<br>è¡¨ç¤º åŠ¨æ€ä¸»æœºé…ç½®åè®®<br>æ˜¯ä¸€ç§åŸºäºUDPåè®®ä¸”ä»…é™äºåœ¨å±€åŸŸç½‘å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œåè®®ï¼›<br>ä¸»è¦ç”¨äºå±€åŸŸç½‘ç¯å¢ƒæˆ–è€…å­˜åœ¨è¾ƒå¤šåŠå…¬è®¾å¤‡çš„å±€åŸŸç½‘ç¯å¢ƒä¸­ï¼›<br>ä¸»è¦æ˜¯ä¸ºå±€åŸŸç½‘å†…éƒ¨çš„è®¾å¤‡æˆ–ç½‘ç»œä¾›åº”å•†è‡ªåŠ¨åˆ†é…IPåœ°å€ç­‰å‚æ•°ï¼›<br>å¯ä»¥è‡ªåŠ¨ç®¡ç†ä¸»æœºçš„IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNSåœ°å€ï¼Œç­‰å‚æ•°ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.1.103  netmask 255.255.255.0  broadcast 192.168.1.255</span><br><span class="line">        inet6 fe80::82b:eb85:8c19:22d1  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:70:c9:77  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 740  bytes 76328 (74.5 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 452  bytes 53516 (52.2 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure></p><p>DHCP å±äºç½‘ç»œé…ç½®ï¼Œé…ç½®ç›®å½•åœ¨è¿™é‡Œ <code>/etc/sysconfig/network-scripts/ifcfg-ens33</code>:<br>ifcfg-ens33  è¿™é‡Œçš„ens33ï¼Œå°±æ˜¯ä¸Šé¢ifconfigæ‰§è¡Œæ—¶ ä»¥å¤ªç½‘æ¥å£çš„ens33ï¼Œå¯èƒ½ä¸åŒæœºå™¨ä¸åŒ</p><h4 id="è®¾ç½®å›ºå®šè™šæ‹Ÿæœºçš„IPåœ°å€"><a href="#è®¾ç½®å›ºå®šè™šæ‹Ÿæœºçš„IPåœ°å€" class="headerlink" title="è®¾ç½®å›ºå®šè™šæ‹Ÿæœºçš„IPåœ°å€"></a>è®¾ç½®å›ºå®šè™šæ‹Ÿæœºçš„IPåœ°å€</h4><p>æ³¨æ„çš„æ˜¯ï¼Œè¦è®¾ç½®ä¸ºå›ºå®šï¼Œå¿…é¡» ç½‘ç»œé€‚é…å™¨è®¾ç½®ä¸ºæ¡¥æ¥ï¼Œå¦‚ä¸‹ï¼š</p><figure class="image-box">                <img src="/image/linuxt/card.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line">#ä»¥ä¸‹åŸé…ç½®</span><br><span class="line">TYPE=Ethernet #è®¾å¤‡æ¨¡å¼</span><br><span class="line">PROXY_METHOD=none </span><br><span class="line">BROWSER_ONLY=no </span><br><span class="line">BOOTPROTO=dhcp #åœ°å€åˆ†é…æ¨¡å¼</span><br><span class="line">DEFROUTE=yes </span><br><span class="line">IPV4_FAILURE_FATAL=no </span><br><span class="line">IPV6INIT=yes </span><br><span class="line">IPV6_AUTOCONF=yes </span><br><span class="line">IPV6_DEFROUTE=yes </span><br><span class="line">IPV6_FAILURE_FATAL=no </span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy </span><br><span class="line">NAME=ens33 #ç½‘å¡åç§°</span><br><span class="line">UUID=0b309202-2bc1-41e3-ba5e-f8d356fbebd8 </span><br><span class="line">DEVICE=ens33 </span><br><span class="line">ONBOOT=yes #æ˜¯å¦å¯åŠ¨, è¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸€å®šæ˜¯å¯åŠ¨çš„ï¼Œä¸ç„¶æ— æ³•è”ç½‘</span><br><span class="line"></span><br><span class="line">åªéœ€æ”¹åŠ¨ä»¥ä¸‹éƒ¨åˆ†</span><br><span class="line">BOOTPROTO=static #ä¿®æ”¹</span><br><span class="line">IPADDR=192.168.1.109 #IPåœ°å€  #è®¾ç½®ä¸ºé™æ€ï¼Œå¿…é¡»æŒ‡å®šIPåœ°å€</span><br><span class="line">NETMASK=255.255.255.0 #å­ç½‘æ©ç  #æŒ‡å®šIPåœ°å€,å¿…é¡»æŒ‡å®šå­ç½‘æ©ç </span><br><span class="line">PREFIX=24 #24 æ˜¯ 255.255.255.0 äºŒè¿›åˆ¶è¡¨ç¤ºæœ‰24ä¸ª1ï¼Œè·Ÿä¸Šé¢ä¸€ä¸ªæ„æ€ï¼›</span><br><span class="line">GATEWAY=192.168.1.1 #ç½‘å…³åœ°å€</span><br><span class="line">DNS1=192.168.0.1 #dnsæœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">systemctl restart network # é‡å¯ï¼Œè®©é…ç½®ç”Ÿæ•ˆï¼›</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç½‘å…³åœ°å€éœ€è¦è™šæ‹Ÿæœºæ‰€åœ¨çš„ ä¸»æœºwindowä¸Šçœ‹ï¼Œ<br>windowæŸ¥çœ‹ é»˜è®¤ç½‘å…³åœ°å€ï¼Œdnsåœ°å€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig /all</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linuxt/ip.png" alt title class>                <p></p>            </figure><p>æ³¨æ„çš„æ˜¯ï¼Œä¸è¦åœ¨å®¢æˆ·æœºè®¾ç½® ipï¼Œä¸ç„¶å‡ºç°å¡é¡¿ï¼Œæœ€å¥½æ˜¯åœ¨æœåŠ¡å™¨ç«¯è®¾ç½®ã€‚</p><h3 id="æœåŠ¡å™¨ä¸»æœºçš„åˆ†ç±»"><a href="#æœåŠ¡å™¨ä¸»æœºçš„åˆ†ç±»" class="headerlink" title="æœåŠ¡å™¨ä¸»æœºçš„åˆ†ç±»"></a>æœåŠ¡å™¨ä¸»æœºçš„åˆ†ç±»</h3><p>æ›´å¤šå‚è€ƒ <a href="https://www.zhihu.com/question/19856629?sort=created" target="_blank" rel="noopener">çŸ¥ä¹</a></p><h4 id="ç‹¬ç«‹æœåŠ¡å™¨"><a href="#ç‹¬ç«‹æœåŠ¡å™¨" class="headerlink" title="ç‹¬ç«‹æœåŠ¡å™¨"></a>ç‹¬ç«‹æœåŠ¡å™¨</h4><p>è¿™å°æœåŠ¡å™¨ä»…æä¾›ç»™ç”¨æˆ·ä¸€ä¸ªäººä½¿ç”¨ï¼›<br>ç”¨æˆ·å¯¹æœåŠ¡å™¨ç¡¬ä»¶é…ç½®æœ‰å®Œå…¨çš„æ§åˆ¶æƒï¼›<br>é€‚åˆå¤§ä¸­å‹ç½‘ç«™ï¼›</p><h4 id="è™šæ‹Ÿä¸»æœº"><a href="#è™šæ‹Ÿä¸»æœº" class="headerlink" title="è™šæ‹Ÿä¸»æœº"></a>è™šæ‹Ÿä¸»æœº</h4><p>è™šæ‹Ÿä¸»æœºçš„è‹±è¯­æ˜¯ virtual host<br>åœ¨ä¸€å°æœåŠ¡å™¨ä¸­åˆ’åˆ†ä¸€å®šçš„ç£ç›˜ç©ºé—´ï¼›<br>ä»…æä¾›åŸºç¡€çš„ç½‘ç«™è®¿é—®ã€æ•°æ®å­˜æ”¾ä¸ä¼ è¾“åŠŸèƒ½ï¼›<br>ä¸€èˆ¬æ¯”è¾ƒä¾¿å®œï¼Œä¹Ÿå‡ ä¹ä¸éœ€è¦ç”¨æˆ·è‡ªè¡Œç»´æŠ¤ç½‘ç«™ä»¥å¤–çš„æœåŠ¡ï¼›<br>é€‚åˆå°å‹ç½‘ç«™ï¼›</p><h4 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h4><p>virtual private server çš„ç¼©å†™<br>è¡¨ç¤º è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨<br>åœ¨ä¸€å°æœåŠ¡å™¨ä¸­åˆ©ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯æ¨¡æ‹Ÿå‡ºå¤šå° ä¸»æœº<br>æ¯ä¸ª ä¸»æœº éƒ½æœ‰ç‹¬ç«‹çš„ IPåœ°å€ã€æ“ä½œç³»ç»Ÿï¼›<br>éœ€è¦å…·å¤‡ä¸€å®šçš„ç»´æŠ¤ç³»ç»Ÿèƒ½åŠ›<br>é€‚åˆå°å‹ç½‘ç«™ï¼›</p><h4 id="ECS"><a href="#ECS" class="headerlink" title="ECS"></a>ECS</h4><p>elastic compute service ç¼©å†™ å¼¹æ€§è®¡ç®—æœåŠ¡<br>ä¹Ÿå°±æ˜¯ä¸€èˆ¬è¯´çš„ äº‘æœåŠ¡å™¨ ï¼Œå¦‚ é˜¿é‡Œäº‘æœåŠ¡å™¨<br>æ•´åˆäº†è®¡ç®— å­˜å‚¨ ç½‘ç»œ ï¼Œèƒ½å¤Ÿåšåˆ°å¼¹æ€§ä¼¸ç¼©çš„è®¡ç®—æœåŠ¡ï¼›<br>å’ŒVPSçš„å·®åˆ«ï¼šäº‘æœåŠ¡å™¨æ˜¯å»ºç«‹åœ¨ä¸€ç»„é›†ç¾¤æœåŠ¡å™¨ä¸­ï¼›<br>æ¯ä¸ªæœåŠ¡å™¨éƒ½ä¼šä¿å­˜ä¸€ä¸ªä¸»æœºçš„é•œåƒï¼ˆå¤‡ä»½ï¼‰ï¼Œå®‰å…¨æ€§å’Œç¨³å®šæ€§æ›´é«˜ï¼›<br>åˆ†å¸ƒå¼æ¶æ„ã€‚é€‚åˆå¤§ä¸­å°å‹ç½‘ç«™</p><h3 id="å¦‚ä½•é€‰æ‹©æœåŠ¡å™¨ä¸»æœº"><a href="#å¦‚ä½•é€‰æ‹©æœåŠ¡å™¨ä¸»æœº" class="headerlink" title="å¦‚ä½•é€‰æ‹©æœåŠ¡å™¨ä¸»æœº"></a>å¦‚ä½•é€‰æ‹©æœåŠ¡å™¨ä¸»æœº</h3><h4 id="é€‚åˆåˆ›ä¸šé˜¶æ®µçš„å°ç«™ç¾¤ä½“çš„æœåŠ¡å™¨ç±»å‹"><a href="#é€‚åˆåˆ›ä¸šé˜¶æ®µçš„å°ç«™ç¾¤ä½“çš„æœåŠ¡å™¨ç±»å‹" class="headerlink" title="é€‚åˆåˆ›ä¸šé˜¶æ®µçš„å°ç«™ç¾¤ä½“çš„æœåŠ¡å™¨ç±»å‹"></a>é€‚åˆåˆ›ä¸šé˜¶æ®µçš„å°ç«™ç¾¤ä½“çš„æœåŠ¡å™¨ç±»å‹</h4><p>å»ºè®®é€‰æ‹© äº‘æœåŠ¡å™¨ï¼Œ ä»·æ ¼ä¸è´µï¼Œæ€§èƒ½å¼ºåŠ²ï¼›</p><h4 id="é€‚åˆåˆ›å»ºå°å‹ä¸ªäººç½‘ç«™çš„æœåŠ¡å™¨ç±»å‹"><a href="#é€‚åˆåˆ›å»ºå°å‹ä¸ªäººç½‘ç«™çš„æœåŠ¡å™¨ç±»å‹" class="headerlink" title="é€‚åˆåˆ›å»ºå°å‹ä¸ªäººç½‘ç«™çš„æœåŠ¡å™¨ç±»å‹"></a>é€‚åˆåˆ›å»ºå°å‹ä¸ªäººç½‘ç«™çš„æœåŠ¡å™¨ç±»å‹</h4><p>å»ºè®®é€‰ä¸­ è™šæ‹Ÿä¸»æœº/vpsï¼Œæˆ–è€…ç”¨ GitHub pagesç­‰ï¼›</p><h3 id="apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½"><a href="#apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½" class="headerlink" title="apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½"></a>apacheçš„è™šæ‹Ÿä¸»æœºåŠŸèƒ½</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æœåŠ¡å™¨åŸºäºç”¨æˆ·è¯·æ±‚çš„ä¸åŒ IP åœ°å€ã€ä¸»æœºåŸŸåæˆ–ç«¯å£å·<br>èƒ½å¤Ÿæä¾›å¤šä¸ªç½‘ç«™åŒæ—¶ä¸ºå¤–éƒ¨æä¾›è®¿é—®æœåŠ¡çš„æŠ€æœ¯ï¼›<br>ç”¨æˆ·è¯·æ±‚çš„èµ„æºä¸åŒï¼Œè·å–åˆ°çš„ç½‘é¡µå†…å®¹ä¹Ÿä¸ç›¸åŒï¼›</p><h4 id="åŸºäºIPåœ°å€ï¼›"><a href="#åŸºäºIPåœ°å€ï¼›" class="headerlink" title="åŸºäºIPåœ°å€ï¼›"></a>åŸºäºIPåœ°å€ï¼›</h4><p>å¦‚æœä¸€å°æœåŠ¡å™¨æœ‰å¤šä¸ªIPåœ°å€ï¼›<br>æ¯ä¸ªIPåœ°å€ä¸æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„æ¯ä¸ªç½‘ç«™ä¸€ä¸€å¯¹åº”ï¼›<br>è¿™æ ·ç”¨æˆ·å»è¯·æ±‚è®¿é—®ä¸åŒIPåœ°å€çš„æ—¶å€™ï¼Œä¼šè®¿é—®åˆ°ä¸åŒç½‘ç«™çš„èµ„æºï¼›<br>è€Œä¸”æ¯ä¸ªç½‘ç«™éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„IP</p><h4 id="åŸºäºIPåœ°å€é…ç½®å®æˆ˜"><a href="#åŸºäºIPåœ°å€é…ç½®å®æˆ˜" class="headerlink" title="åŸºäºIPåœ°å€é…ç½®å®æˆ˜"></a>åŸºäºIPåœ°å€é…ç½®å®æˆ˜</h4><p>å¢åŠ æœåŠ¡å™¨IPçš„æ–¹å¼ï¼ˆå¢åŠ ä¸¤ä¸ªIP 192.168.1.10  192.168.1.20ï¼‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br><span class="line"># å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š</span><br><span class="line">IPADDR1=192.168.1.10</span><br><span class="line">PREFIX1=24</span><br><span class="line">NETMASK1=255.255.255.0</span><br><span class="line"></span><br><span class="line">IPADDR2=192.168.1.20</span><br><span class="line">PREFIX2=24</span><br><span class="line">NETMASK2=255.255.255.0</span><br><span class="line"></span><br><span class="line">systemctl restart network</span><br><span class="line"></span><br><span class="line"># ç„¶åpingä¸‹çœ‹æ˜¯å¦è®¾ç½®æˆåŠŸï¼š</span><br><span class="line">ping 192.168.1.10</span><br><span class="line">ping 192.168.1.20</span><br></pre></td></tr></table></figure></p><p>æ¥ä¸Šé¢çš„ã€Šé…ç½®å®æˆ˜ ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹ã€‹</p><p>æˆ‘ä»¬åœ¨ <code>/home/web</code> æ–°å¢ä¸¤ä¸ªç›®å½•å’Œæ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/web/10</span><br><span class="line">mkdir /home/web/20</span><br><span class="line">echo &quot;ip : 192.168.1.10&quot; &gt;/home/web/10/index.html</span><br><span class="line">echo &quot;ip : 192.168.1.20&quot; &gt;/home/web/20/index.html</span><br></pre></td></tr></table></figure></p><p><code>/etc/httpd/conf/httpd.conf</code>å¢åŠ ä»¥ä¸‹éƒ¨åˆ†å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.1.10&gt;</span><br><span class="line">    DocumentRoot /home/web/10</span><br><span class="line">    ServerName www.linuxabc.com</span><br><span class="line">    &lt;Directory &quot;/home/web&quot;&gt;</span><br><span class="line">        AllowOverride None</span><br><span class="line">        # Allow open access:</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.1.20&gt;</span><br><span class="line">    DocumentRoot /home/web/20</span><br><span class="line">    ServerName www.linuxddd.com</span><br><span class="line">    &lt;Directory &quot;/home/web&quot;&gt;</span><br><span class="line">        AllowOverride None</span><br><span class="line">        # Allow open access:</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ä¸Šé¢ ServerName éšä¾¿è®¾ç½®ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload httpd # é‡å¯ï¼Œè®©é…ç½®ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure><p>åœ¨å®¢æˆ·æœºä¸­è®¿é—®é¡µé¢ï¼Œæ³¨æ„å…³é—­é˜²ç«å¢™ æˆ–å…¶ä»–é€å‡º80ç«¯å£çš„æ–¹æ³•ï¼Œè§ã€Šå®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡ã€‹ï¼š<br><figure class="image-box">                <img src="/image/linuxt/vi1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxt/vi2.png" alt title class>                <p></p>            </figure></p><p>é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿™æ¬¡è®¾ç½®åï¼Œå°±å¯ä»¥ä¸å— SELinux å®‰å…¨é™åˆ¶å‘¢ï¼Œ<br>å› ä¸ºæˆ‘ä»¬åœ¨ ã€Šé…ç½®å®æˆ˜ ï¼šä¿®æ”¹è®¿é—®é¦–é¡µå†…å®¹ã€‹å·²ç»å¯¹ /home/web ä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡ äº†ï¼Œå¦‚æœæ¢å…¶ä»–ç›®å½•ï¼Œè¯·æŒ‰ä¸Šé¢ã€Šä¿®æ”¹æ–‡ä»¶å®‰å…¨ä¸Šä¸‹æ–‡ã€‹ä¿®æ”¹ä¸Šä¸‹æ–‡ã€‚</p><h4 id="åŸºäºä¸»æœºåŸŸå"><a href="#åŸºäºä¸»æœºåŸŸå" class="headerlink" title="åŸºäºä¸»æœºåŸŸå"></a>åŸºäºä¸»æœºåŸŸå</h4><p>å½“ä½ çš„æœåŠ¡å™¨æ— æ³•ä¸ºæ¯ä¸ªç½‘ç«™åˆ†é…ç‹¬ç«‹çš„IPæ—¶ï¼Œ<br>ä½ å¯ä»¥è®©apacheå»è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·è¯·æ±‚çš„åŸŸåï¼Œæ ¹æ®åŸŸåä¼ è¾“ä¸åŒå†…å®¹ç»™ç”¨æˆ·ï¼›<br>è¿™ç§æƒ…å†µï¼Œå°±åªéœ€ä¿è¯æœåŠ¡å™¨ä¸­åªè¦æœ‰ä¸€ä¸ªIPå¯ç”¨å°±è¡Œäº†</p><h4 id="åŸºäºä¸»æœºåŸŸåé…ç½®å®æˆ˜"><a href="#åŸºäºä¸»æœºåŸŸåé…ç½®å®æˆ˜" class="headerlink" title="åŸºäºä¸»æœºåŸŸåé…ç½®å®æˆ˜"></a>åŸºäºä¸»æœºåŸŸåé…ç½®å®æˆ˜</h4><p>å®¢æˆ·æœºä¸­ä¿®æ”¹host:<br><code>C:\Windows\System32\drivers\etc</code><br>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œgit bash ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /c/Windows/System32/drivers/etc</span><br><span class="line">vi host</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨vi ç¼–è¾‘host:</p><p><code>192.168.1.10 www.linuxabc.com www.linuxddd.com</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/web/abc</span><br><span class="line">mkdir /home/web/ddd</span><br><span class="line">echo &quot;host : www.linuxabc.com&quot; &gt;/home/web/abc/index.html</span><br><span class="line">echo &quot;ip : www.linuxddd.com&quot; &gt;/home/web/ddd/index.html</span><br></pre></td></tr></table></figure><p><code>/etc/httpd/conf/httpd.conf</code>å¢åŠ ä»¥ä¸‹éƒ¨åˆ†å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.1.10&gt;</span><br><span class="line">    DocumentRoot /home/web/abc</span><br><span class="line">    ServerName www.linuxabc.com</span><br><span class="line">    &lt;Directory &quot;/home/web/abc&quot;&gt;</span><br><span class="line">        AllowOverride None</span><br><span class="line">        # Allow open access:</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.1.10&gt;</span><br><span class="line">    DocumentRoot /home/web/ddd</span><br><span class="line">    ServerName www.linuxddd.com</span><br><span class="line">    &lt;Directory &quot;/home/web/ddd&quot;&gt;</span><br><span class="line">        AllowOverride None</span><br><span class="line">        # Allow open access:</span><br><span class="line">        Require all granted</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><p>åœ¨å®¢æˆ·æœºä¸­è®¿é—®é¡µé¢ï¼Œæ³¨æ„å…³é—­é˜²ç«å¢™ æˆ–å…¶ä»–é€å‡º80ç«¯å£çš„æ–¹æ³•ï¼Œè§ã€Šå®¢æˆ·æœºå¦‚ä½•è®¿é—®æœåŠ¡å™¨çš„ApacheæœåŠ¡ã€‹<br>ï¼š<br><figure class="image-box">                <img src="/image/linuxt/vi3.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxt/vi4.png" alt title class>                <p></p>            </figure></p><p>æ³¨æ„çš„æ˜¯ï¼Œ192.168.1.10 æ˜¯æˆ‘ä»¬ä¹‹å‰ ã€ŠåŸºäºIPåœ°å€ã€‹åˆ›å»ºçš„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä½ æŒ‰ç…§æ­¤åˆ›å»ºï¼›<br>å¦å¤–ï¼Œä¸ºäº†æ¶ˆé™¤å½±å“ï¼Œå¯å°†ä¸Šé¢ã€ŠåŸºäºIPåœ°å€ã€‹ä¸­åˆ›å»ºçš„ httpdé…ç½® ä»¥åŠ /home/web/10 20 ç›®å½•åˆ é™¤ï¼›</p><h2 id="https"><a href="#https" class="headerlink" title="https"></a>https</h2><h3 id="ä¸ºä»€ä¹ˆè¦https"><a href="#ä¸ºä»€ä¹ˆè¦https" class="headerlink" title="ä¸ºä»€ä¹ˆè¦https"></a>ä¸ºä»€ä¹ˆè¦https</h3><p>https å¯ä»¥ç¡®ä¿æ‰€æœ‰ç»è¿‡æœåŠ¡å™¨ä¼ è¾“çš„æ•°æ®åŒ…éƒ½æ˜¯ç»è¿‡åŠ å¯†çš„ï¼›<br>ä½¿å¾—å‡å†’æœåŠ¡å™¨æ— æ³•å†’å……çœŸæ­£çš„æœåŠ¡å™¨</p><h3 id="CA"><a href="#CA" class="headerlink" title="CA"></a>CA</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>CA è¯ä¹¦å…¬è¯æƒå¨æœºæ„<br>CA ç”¨äºä¸ºå®¢æˆ·ç«¯ç¡®è®¤æ‰€è¿æ¥çš„ç½‘ç«™çš„æœåŠ¡å™¨æä¾›çš„è¯ä¹¦æ˜¯å¦åˆæ³•<br>æ•°å­—è¯ä¹¦æ˜¯ç»è¿‡CAè®¤è¯çš„å…¬é’¥ï¼Œå…¶å†…å®¹ä¸ä»…åŒ…å«å…¬é’¥ï¼Œè¿˜åŒ…å«å…¶ä»–å†…å®¹ï¼›</p><h4 id="æµè§ˆå™¨ã€æœåŠ¡å™¨ã€caè¯ä¹¦æœºæ„-ä¸‰è€…å…³ç³»"><a href="#æµè§ˆå™¨ã€æœåŠ¡å™¨ã€caè¯ä¹¦æœºæ„-ä¸‰è€…å…³ç³»" class="headerlink" title="æµè§ˆå™¨ã€æœåŠ¡å™¨ã€caè¯ä¹¦æœºæ„ ä¸‰è€…å…³ç³»"></a>æµè§ˆå™¨ã€æœåŠ¡å™¨ã€caè¯ä¹¦æœºæ„ ä¸‰è€…å…³ç³»</h4><p>ä½ å¯ä»¥ç”Ÿæˆç§é’¥ï¼Œåˆ¶ä½œå‡ºå¿…è¦çš„è¯ä¹¦æ•°æ® å¹¶å‘ caæœºæ„æ³¨å†Œï¼Œå®Œæˆæ³¨å†Œå¹¶ç”Ÿæˆå·²æ³¨å†Œçš„è¯ä¹¦(å…¬é’¥)ï¼Œ</p><p>æµè§ˆå™¨æµè§ˆæ—¶ï¼Œæµè§ˆå™¨ä¼šä¸»åŠ¨å‘caå»ç¡®è®¤è¯ä¹¦æ˜¯å¦æ˜¯åˆæ³•æ³¨å†Œçš„ï¼›å¦‚ä½•åˆæ³•ï¼Œæµè§ˆå™¨å°†æŠŠè‡ªå·±çš„å¯†é’¥é€šè¿‡ è¯ä¹¦(å…¬é’¥)åŠ å¯†ï¼Œå‘ç»™æœåŠ¡å™¨ï¼›<br>æœåŠ¡å™¨ç”¨ä¸Šé¢çš„ç§é’¥ è§£å¯†å‡º å¯†é’¥ï¼Œç„¶ååç»­çš„ç”µè¯éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå¯†é’¥è¿›è¡Œå¯¹ç§°åŠ å¯†ã€‚</p><p><a href="https://www.cnblogs.com/hthf/p/4986507.html" target="_blank" rel="noopener">read more</a></p><h4 id="ä¸ºä»€ä¹ˆCAèƒ½é˜²æ­¢å†’å……çœŸæ­£çš„æœåŠ¡å™¨"><a href="#ä¸ºä»€ä¹ˆCAèƒ½é˜²æ­¢å†’å……çœŸæ­£çš„æœåŠ¡å™¨" class="headerlink" title="ä¸ºä»€ä¹ˆCAèƒ½é˜²æ­¢å†’å……çœŸæ­£çš„æœåŠ¡å™¨"></a>ä¸ºä»€ä¹ˆCAèƒ½é˜²æ­¢å†’å……çœŸæ­£çš„æœåŠ¡å™¨</h4><p>å¦‚ä¸Šï¼Œæµè§ˆå™¨ä¼šä¸»åŠ¨åƒcaå»ç¡®è®¤è¯ä¹¦æ˜¯å¦æ˜¯æœåŠ¡å™¨xxxxåˆæ³•æ³¨å†Œçš„ï¼›<br>æ­¤æ—¶æœ‰äººå‡å†’æœåŠ¡å™¨xxxè¯ä¹¦ï¼Œ<br>æƒ³å‡å†’çš„äººè‚¯å®šéœ€è¦å‘caæ³¨å†Œè¯ä¹¦ï¼Œä½†caæœºæ„è¯´æœåŠ¡å™¨xxxå·²ç»æ³¨å†Œè¯ä¹¦äº†ï¼Œä½ åˆæ¥æ³¨å†Œï¼Œä½ æ˜¯éª—å­å§ï¼›<br>å¦‚æœå‡å†’çš„äººä¸æ³¨å†Œcaè¯ä¹¦ï¼Œä¸å¥½æ„æ€ï¼Œæ­¤è¯ä¹¦ç›´æ¥æ— æ•ˆï¼›<br>caä¼šå‘Šè¯‰æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨xxxæ³¨å†Œçš„è¯ä¹¦æ˜¯å¦å¤–ä¸€ä¸ªï¼Œä¸æ˜¯å½“å‰è¿™ä¸ªå‡å†’è¯ä¹¦ï¼›<br>é‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæç¤ºä¸å®‰å…¨ï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šåç»­æ´»åŠ¨ï¼›</p><h4 id="æµè§ˆå™¨-æœåŠ¡å™¨-å¯¹è¯-å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†"><a href="#æµè§ˆå™¨-æœåŠ¡å™¨-å¯¹è¯-å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†" class="headerlink" title="æµè§ˆå™¨/æœåŠ¡å™¨ å¯¹è¯ å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†"></a>æµè§ˆå™¨/æœåŠ¡å™¨ å¯¹è¯ å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†</h4><p>å¦‚ä¸Šï¼Œæµè§ˆå™¨ä¸æœåŠ¡å™¨ é€šè¿‡éå¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯† å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œ<br>åç»­é€šè¿‡ä½¿ç”¨å¯¹ç§°åŠ å¯†ã€‚</p><h3 id="Apache-æœåŠ¡å™¨é…ç½®HTTPS"><a href="#Apache-æœåŠ¡å™¨é…ç½®HTTPS" class="headerlink" title="Apache æœåŠ¡å™¨é…ç½®HTTPS"></a>Apache æœåŠ¡å™¨é…ç½®HTTPS</h3><h4 id="é˜²ç«å¢™æ”¾å¼€443ç«¯å£å®‰å…¨é™åˆ¶"><a href="#é˜²ç«å¢™æ”¾å¼€443ç«¯å£å®‰å…¨é™åˆ¶" class="headerlink" title="é˜²ç«å¢™æ”¾å¼€443ç«¯å£å®‰å…¨é™åˆ¶"></a>é˜²ç«å¢™æ”¾å¼€443ç«¯å£å®‰å…¨é™åˆ¶</h4><p>é˜²ç«å¢™æ”¾å¼€443ç«¯å£å®‰å…¨é™åˆ¶åï¼Œæµè§ˆå™¨ç«¯å°†å¯ä»¥443ç«¯å£ï¼ˆhttpsé»˜è®¤ç«¯å£ï¼‰è®¿é—®æœåŠ¡å™¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=443/tcp --permanent  permanentæ°¸ä¹…</span><br><span class="line">firewall-cmd --reload  æ›´æ–°é…ç½®</span><br><span class="line">firewall-cmd --list-ports æŸ¥çœ‹å·²ç»æ”¾è¡Œçš„ç«¯å£</span><br></pre></td></tr></table></figure></p><h4 id="å®‰è£…apacheçš„SSLæ”¯æŒæ¨¡å—"><a href="#å®‰è£…apacheçš„SSLæ”¯æŒæ¨¡å—" class="headerlink" title="å®‰è£…apacheçš„SSLæ”¯æŒæ¨¡å—"></a>å®‰è£…apacheçš„SSLæ”¯æŒæ¨¡å—</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y mod_ssl #apacheçš„SSLæ”¯æŒæ¨¡å— mod_ssl</span><br><span class="line">systemctl restart httpd #å› ä¸ºå®‰è£…mod_sslçš„è¿‡ç¨‹ï¼Œç›¸å½“äºé…ç½®äº†apacheï¼Œéœ€é‡å¯</span><br></pre></td></tr></table></figure><p><a href="https://www.jianshu.com/p/46a911bd49a7" target="_blank" rel="noopener">PKI ä½“ç³»æ¦‚è¿° : æ‰€æœ‰ä¸æ•°å­—è¯ä¹¦ç›¸å…³çš„å„ç§æ¦‚å¿µå’ŒæŠ€æœ¯ï¼Œç»Ÿç§°ä¸º PKI</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls /etc/httpd/conf.d/ssl.conf</span><br><span class="line">/etc/httpd/conf.d/ssl.conf #mod_ssl é’ˆå¯¹ apache çš„ ssl é…ç½®æ–‡ä»¶</span><br><span class="line"># centos é»˜è®¤æä¾›sslæœºåˆ¶éœ€è¦çš„è¯ä¹¦æ–‡ä»¶å’Œç§é’¥</span><br><span class="line">[root@localhost ~]# ls /etc/pki/tls/private/localhost.key #centos é»˜è®¤æä¾›sshç§é’¥,å¯ä»¥ç”¨æ¥åˆ¶ä½œè¯ä¹¦</span><br><span class="line">/etc/pki/tls/private/localhost.key</span><br><span class="line">[root@localhost ~]# ls /etc/pki/tls/certs/ #è¿™é‡Œæ˜¯è¯ä¹¦çš„é›†åˆç›®å½•</span><br><span class="line">ca-bundle.crt        localhost.crt    Makefile</span><br><span class="line">ca-bundle.trust.crt  make-dummy-cert  renew-dummy-cert</span><br><span class="line">[root@localhost ~]# ls /etc/pki/tls/certs/localhost.crt  #åŠ å¯†åè¯ä¹¦çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ç­¾ååçš„è¯ä¹¦</span><br><span class="line">/etc/pki/tls/certs/localhost.crt</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ˜¯é€šè¿‡mod_ssl ç”Ÿæˆçš„ å› æ­¤ä¸æ˜¯ç»è¿‡ç¬¬ä¸‰æ–¹è®¤è¯æ³¨å†Œçš„ï¼Œæ‰€æœ‰è°·æ­Œæµè§ˆå™¨æ‰æœ‰ä»¥ä¸‹æç¤ºï¼›</p><h4 id="è¯·ä½¿ç”¨æœåŠ¡å™¨ä¸»æœºIP"><a href="#è¯·ä½¿ç”¨æœåŠ¡å™¨ä¸»æœºIP" class="headerlink" title="è¯·ä½¿ç”¨æœåŠ¡å™¨ä¸»æœºIP"></a>è¯·ä½¿ç”¨æœåŠ¡å™¨ä¸»æœºIP</h4><p>æ³¨æ„è¿™é‡Œç”¨æ¥è®¿é—®çš„IPï¼Œè¯·ä½¿ç”¨æœåŠ¡å™¨ä¸»æœºIPï¼Œè€Œä¸è¦ä½¿ç”¨è™šæ‹ŸIPï¼Œå¦åˆ™å¯èƒ½è®¿é—®ä¸æˆåŠŸã€‚<br><figure class="image-box">                <img src="/image/linuxt/https1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxt/https2.png" alt title class>                <p></p>            </figure></p><figure class="image-box">                <img src="/image/linuxt/ca1.png" alt title class>                <p></p>            </figure><p>å…¬é’¥åŠ å¯†æ–¹æ³•ï¼Œä½¿ç”¨æœŸé™é»˜è®¤ä¸€å¹´<br><figure class="image-box">                <img src="/image/linuxt/ca2.png" alt title class>                <p></p>            </figure></p><h3 id="ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦"><a href="#ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦" class="headerlink" title="ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦"></a>ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦</h3><p>ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦å…¶å®å°±æ˜¯è‡ªå·±åŠ å¯†ç”Ÿæˆ è¯ä¹¦(å…¬é’¥)å’Œç§é’¥<br>éœ€è¦ç”¨opensslè¿™ä¸ªè½¯ä»¶æ¥ç”Ÿæˆè¯ä¹¦æ–‡ä»¶ï¼›</p><h4 id="opensslç”Ÿæˆç§é’¥"><a href="#opensslç”Ÿæˆç§é’¥" class="headerlink" title="opensslç”Ÿæˆç§é’¥"></a>opensslç”Ÿæˆç§é’¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">yum install -y openssl</span><br><span class="line">cd /etc/httpd #å¯ä»¥æ˜¯ä»»æ„ç›®å½•ï¼Œä¸è¿‡ä¸€èˆ¬apacheé…ç½®ç›¸å…³éƒ½æ”¾è¿™é‡Œ</span><br><span class="line">mkdir pki #æ‰€æœ‰ä¸æ•°å­—è¯ä¹¦ç›¸å…³çš„å„ç§æ¦‚å¿µ ç§°ä¹‹ä¸ºpkiï¼Œå› æ­¤å¢åŠ ç›®å½•pkiï¼Œ</span><br><span class="line">#å½“ç„¶ä½ å¯ä»¥å‘½åä»»æ„åå­—</span><br><span class="line">cd pki pki</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ gen rsa å³ rsa ç®—æ³•æ¥ç”Ÿæˆç§é’¥ï¼Œç§é’¥ åå­—ä¸º server.key ,ç§é’¥æ˜¯2048ä½</span><br><span class="line">openssl genrsa -out server.key 2048</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆäº†server-crtè¯ä¹¦"><a href="#ç”Ÿæˆäº†server-crtè¯ä¹¦" class="headerlink" title="ç”Ÿæˆäº†server.crtè¯ä¹¦"></a>ç”Ÿæˆäº†server.crtè¯ä¹¦</h4><p>CSR æ˜¯ è¯ä¹¦ç­¾åçš„è¯·æ±‚ çš„æ„æ€ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@localhost pki]# ls</span><br><span class="line">server.csr  server.key #ç”Ÿæˆäº† server.csr è¿™æ ·ä¸€ä¸ªè¯ä¹¦è¯·æ±‚</span><br><span class="line"></span><br><span class="line">#x509 ç±»å‹çš„è‡ªç­¾åè¯ä¹¦ï¼Œæ˜¯ä¸€ç§æ ‡å‡†ç­¾åè¯ä¹¦</span><br><span class="line">#-days 3650 æœ‰æ•ˆæœŸ 10å¹´</span><br><span class="line"># -in server.csr è¾“å…¥æ–‡ä»¶æ˜¯server.csr</span><br><span class="line"># -signkey server.key ç”¨ç§é’¥server.keyæ¥ç­¾åè¯ä¹¦</span><br><span class="line"># -out server.crtè¾“å‡ºå¾—åˆ°çš„è¯ä¹¦</span><br><span class="line">[root@localhost pki]# openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt</span><br><span class="line">Signature ok</span><br><span class="line">subject=/C=CN/ST=ZHEJIANG/L=HANGZHOU/O=ALI/OU=LINU/CN=192.168.1.109/emailAddress=AA.QQ.COM</span><br><span class="line">Getting Private key</span><br><span class="line">[root@localhost pki]#  ls</span><br><span class="line">server.crt  server.csr  server.key</span><br></pre></td></tr></table></figure></p><h4 id="ä¿®æ”¹sslé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹sslé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹sslé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹sslé…ç½®æ–‡ä»¶</h4><p>sslæ˜¯httpsåŠ å¯†é…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim conf.d/ssl.conf</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SSLCertificateFile /etc/pki/tls/certs/server.crt #è¯ä¹¦</span><br><span class="line">SSLCertificateKeyFile /etc/pki/tls/private/server.key #ç§é’¥</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart httpd #é‡å¯ ApacheæœåŠ¡</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/linuxt/cert1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxt/cert.png" alt title class>                <p></p>            </figure><h4 id="ä¸ºä»€ä¹ˆå¯ä»¥httpè®¿é—®"><a href="#ä¸ºä»€ä¹ˆå¯ä»¥httpè®¿é—®" class="headerlink" title="ä¸ºä»€ä¹ˆå¯ä»¥httpè®¿é—®"></a>ä¸ºä»€ä¹ˆå¯ä»¥httpè®¿é—®</h4><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥httpè®¿é—®ï¼Œå› ä¸ºapacheæœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ”¾å¼€äº†é˜²ç«å¢™80ç«¯å£çš„ç›‘å¬<br>è‡³äºä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨httpsè®¿é—®ï¼Œæ˜¯ä¸€æ ·çš„åŸå› ï¼Œåœ¨apacheæœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ”¾å¼€äº†é˜²ç«å¢™443çš„ç›‘å¬ï¼›<br><figure class="image-box">                <img src="/image/linuxt/cert2.png" alt title class>                <p></p>            </figure></p><h4 id="æœ‰äº›æœåŠ¡å™¨èƒ½ç”¨httpè®¿é—®ï¼Œä¸èƒ½ç”¨https"><a href="#æœ‰äº›æœåŠ¡å™¨èƒ½ç”¨httpè®¿é—®ï¼Œä¸èƒ½ç”¨https" class="headerlink" title="æœ‰äº›æœåŠ¡å™¨èƒ½ç”¨httpè®¿é—®ï¼Œä¸èƒ½ç”¨https"></a>æœ‰äº›æœåŠ¡å™¨èƒ½ç”¨httpè®¿é—®ï¼Œä¸èƒ½ç”¨https</h4><p>æˆ‘ä»¬åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™ç”¨webpackå¯åŠ¨ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åé€šè¿‡httpï¼Œæ˜¯å¯ä»¥è®¿é—®çš„ï¼Œä½†æ¢æˆhttpsä¸èƒ½è®¿é—®ï¼Œ<br>æœ¬è´¨åŸå› ï¼Œå°±è·Ÿæˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ï¼Œapacheå†…æ”¾å¼€äº†80ç«¯å£é˜²ç«å¢™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥httpè®¿é—®ï¼›<br>å¦‚æœæ”¾å¼€äº† 443 é˜²ç«å¢™ç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡httpsè®¿é—®ï¼›<br>è€Œwebpackå¯åŠ¨ä¸€ä»½æœåŠ¡çš„æ—¶å€™ï¼Œä¼°è®¡å†…éƒ¨åªåšäº†httpçš„80ç«¯å£å¼€æ”¾ï¼›æ²¡æœ‰åš443ç«¯å£å¼€æ”¾ï¼›</p><p>https æ˜¯å¦èƒ½è®¿é—®æœåŠ¡å™¨ ï¼Œæœ¬è´¨æ˜¯ çœ‹æœåŠ¡å™¨æ˜¯å¦æ”¾å¼€ 80å’Œ443ç«¯å£ï¼Œå¹¶é…ç½®ç›¸å…³é¡µé¢èµ„æºã€‚</p><p>https ä¸ http æœ¬è´¨æ˜¯ 80 å’Œ 443 ç«¯å£çš„ä¸åŒ<br>è¿™å°±å¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯èƒ½åªå¯åŠ¨ä¸€ä¸ª80æˆ–ä¸€ä¸ª443 æ˜¯å¾ˆåˆç†çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(å¤)</title>
      <link href="/2021/05/21/linux_more/"/>
      <url>/2021/05/21/linux_more/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="SSHç›¸å…³åŠå…¶ç™»å½•"><a href="#SSHç›¸å…³åŠå…¶ç™»å½•" class="headerlink" title="SSHç›¸å…³åŠå…¶ç™»å½•"></a>SSHç›¸å…³åŠå…¶ç™»å½•</h3><h4 id="SSHæ¦‚è¿°"><a href="#SSHæ¦‚è¿°" class="headerlink" title="SSHæ¦‚è¿°"></a>SSHæ¦‚è¿°</h4><p>å®¢æˆ·æœºï¼ŒæŠŠè¿æ¥åˆ°æœåŠ¡å™¨çš„æœºå™¨ç§°ä¹‹ä¸ºå®¢æˆ·æœºã€‚</p><p>SSHåè®®æ˜¯è‹±è¯­ Secure SHellçš„ç¼©å†™ï¼Œ è¡¨ç¤ºâ€œå®‰å…¨çš„shellâ€ï¼Œ shell æ˜¯è‹±è¯­ â€œå£³â€çš„æ„æ€ã€‚</p><h4 id="SSHåŠ å¯†æ–¹å¼"><a href="#SSHåŠ å¯†æ–¹å¼" class="headerlink" title="SSHåŠ å¯†æ–¹å¼"></a>SSHåŠ å¯†æ–¹å¼</h4><p>å¯¹ç§°åŠ å¯†ï¼Œ ä¹Ÿå«å¯¹ç§°å¯†é’¥åŠ å¯†ï¼› è‡´å‘½ç¼ºé™·ï¼Œä¼šè¯å¼€å§‹å‰ ä¼ é€’çš„å¯†é’¥ å¯èƒ½ä¼šè¢«æˆªå–ï¼Œ ä»è€Œå˜æˆç›¸å½“äºæ˜æ–‡ä¼ è¾“ã€‚</p><p>éå¯¹ç§° å…¬é’¥åŠ å¯† ç§é’¥è§£å¯†ï¼›</p><p>SSH ç»“åˆä½¿ç”¨éå¯¹ç§°åŠ å¯†å’Œå¯¹ç§°åŠ å¯†ä¸¤ç§æ–¹æ³•ï¼›<br>é¦–å…ˆ ä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼Œå®‰å…¨åœ°ä¼ è¾“å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼›<br>ä¹‹åï¼Œå°±ä¸€ç›´ä½¿ç”¨å¯¹ç§°åŠ å¯†çš„å¯†é’¥æ¥ä½œä¸ºåŠ å¯† å’Œ è§£å¯†çš„æ‰‹æ®µã€‚</p><h4 id="æœåŠ¡å™¨å®‰è£…SSHæœåŠ¡"><a href="#æœåŠ¡å™¨å®‰è£…SSHæœåŠ¡" class="headerlink" title="æœåŠ¡å™¨å®‰è£…SSHæœåŠ¡"></a>æœåŠ¡å™¨å®‰è£…SSHæœåŠ¡</h4><p>centos æœåŠ¡å™¨ç‰ˆæœ¬ é»˜è®¤å®‰è£… SSHæœåŠ¡ï¼Œ<br>å®‰è£…SSH: yum install openssh-server<br>å¯åŠ¨ï¼š systemctl start(æˆ– restart) sshd<br>è®¾ç½®å¼€å¯å¯åŠ¨ï¼š systemctl enable sshd<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥çœ‹æ˜¯å¦è¿è¡Œ</span><br><span class="line">ps -ef | grep ssh</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹æ˜¯å¦ç³»ç»Ÿå¼€æœºå¯åŠ¨</span><br><span class="line">systemctl list-unit-files | grep enabled</span><br></pre></td></tr></table></figure></p><h4 id="å®¢æˆ·ç«¯å®‰è£…sshå·¥å…·"><a href="#å®¢æˆ·ç«¯å®‰è£…sshå·¥å…·" class="headerlink" title="å®¢æˆ·ç«¯å®‰è£…sshå·¥å…·"></a>å®¢æˆ·ç«¯å®‰è£…sshå·¥å…·</h4><p>windowsï¼š å®‰è£… puttyï¼Œxshellï¼Œ secureCRTï¼Œ è¿™ä¸‰æ¬¾éƒ½æ˜¯sshçš„ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨äºè¿æ¥sshæœåŠ¡å™¨ç«¯ï¼›<br>linuxï¼š yum install openssh-clients<br>macOS é»˜è®¤å·²ç»å®‰è£…äº†sshå®¢æˆ·ç«¯ï¼›</p><p>sshé»˜è®¤çš„ç«¯å£æ˜¯22,ä¸‹é¢æ˜¯puttyå®‰è£…ï¼š<br>æ¨å‡ºè¿æ¥ï¼šexit<br><figure class="image-box">                <img src="/image/linux/put.png" alt title class>                <p></p>            </figure></p><p>centoså’ŒmacOSä¸­è¿æ¥æ˜¯ä¸€æ ·çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@172.20.10.2</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹ sshd è¿è¡Œæƒ…å†µ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status sshd</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linux/run.png" alt title class>                <p></p>            </figure><h4 id="é…ç½®SSH"><a href="#é…ç½®SSH" class="headerlink" title="é…ç½®SSH"></a>é…ç½®SSH</h4><p>åœ¨man æŸ¥æ‰¾å‘½ä»¤åï¼Œè¾“å…¥ <code>/</code>è¿›è¡Œæœç´¢ã€‚<br>man sshd_config</p><p>å…¨å±€configæ–‡ä»¶æœ‰ä¸¤ä¸ª<br>sshå®¢æˆ·ç«¯é…ç½®ï¼š /etc/ssh/ssh_config (å…¨å±€) æˆ– ~/.ssh/config (ä¸ªäººç›®å½•))<br>sshæœåŠ¡ç«¯é…ç½®ï¼š /etc/ssh/sshd_config<br>æŸ¥çœ‹ä½¿ç”¨æ‰‹å†Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man sshd_config (sshå®¢æˆ·ç«¯)</span><br><span class="line">man ssh_config (sshå®¢æˆ·ç«¯)</span><br></pre></td></tr></table></figure></p><p>æœåŠ¡ç«¯configå¸¸ç”¨é…ç½®å‚æ•°<br>PermitRootLogin æ˜¯å¦å…è®¸rootç”¨æˆ·èº«ä»½ç™»å½•<br>PasswordAuthentication æ˜¯å¦å…è®¸å¯†ç éªŒè¯ç™»å½•<br>PubkeyAuthentication æ˜¯å¦å…è®¸å…¬é’¥ç™»å½•<br>PermiEmptyPasswords æ˜¯å¦è¿è¡Œç©ºå¯†ç ç™»å½•</p><p>ä¿®æ”¹é…ç½®åï¼Œé‡å¯sshdæœåŠ¡ç«‹å³ç”Ÿæ•ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart sshd</span><br></pre></td></tr></table></figure></p><h4 id="ç”Ÿæˆ-sshç›®å½•"><a href="#ç”Ÿæˆ-sshç›®å½•" class="headerlink" title="ç”Ÿæˆ.sshç›®å½•"></a>ç”Ÿæˆ.sshç›®å½•</h4><p>rootç”¨æˆ·çš„å®¶ç›®å½•ä¸‹ï¼Œå¦‚æœæ²¡æœ‰.sshç›®å½•<br>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh localhost</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linux/host.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/host1.png" alt title class>                <p></p>            </figure><h4 id="å®¢æˆ·ç«¯é…ç½®ç™»å½•"><a href="#å®¢æˆ·ç«¯é…ç½®ç™»å½•" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®ç™»å½•"></a>å®¢æˆ·ç«¯é…ç½®ç™»å½•</h4><p>å®¢æˆ·ç«¯é…ç½®.ssh config<br>å±€éƒ¨çš„å®¢æˆ·ç«¯configæ–‡ä»¶åœ¨ç”¨æˆ·å®¶ç›®å½•çš„.sshéšè—ç›®å½•ä¸­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.ssh/config #(ä¸ªäººç›®å½•))</span><br></pre></td></tr></table></figure></p><p>æ­¤æ–‡ä»¶ä¸€èˆ¬é»˜è®¤æ²¡æœ‰åˆ›å»ºï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ls -al</span><br><span class="line">cd .ssh</span><br><span class="line">touch config</span><br><span class="line">chmod 600 config #ä¿®æ”¹æƒé™ï¼Œæœ€å¥½ä¿®æ”¹ä¸‹ï¼Œä¹Ÿå¯ä¸ä¿®æ”¹</span><br><span class="line">ls -l</span><br><span class="line">nano config</span><br><span class="line">Host rootali</span><br><span class="line">    HostName 192.168.1.103</span><br><span class="line">    Port 22</span><br><span class="line">    User root</span><br><span class="line"># é‡æ–°åœ¨å®¢æˆ·ç«¯ç™»å½•ï¼š </span><br><span class="line">ssh rootali #rootaliä¸Šé¢é…ç½®çš„åˆ«å</span><br><span class="line">#è¾“å…¥å¯†ç å¯ä»¥ç™»å½•äº†</span><br></pre></td></tr></table></figure></p><h3 id="SSHå…å¯†ç ç™»å½•"><a href="#SSHå…å¯†ç ç™»å½•" class="headerlink" title="SSHå…å¯†ç ç™»å½•"></a>SSHå…å¯†ç ç™»å½•</h3><p>åŸºäºå¯†é’¥çš„éªŒè¯<br>å®¢æˆ·æœºç”Ÿæˆå¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰ï¼ŒæŠŠå…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼›<br>å¹¶ä¸æœåŠ¡å™¨çš„å…¬é’¥è¿›è¡Œæ¯”è¾ƒï¼›<br>è¿™ç§éªŒè¯ç™»å½•çš„æ–¹æ³•æ›´åŠ å®‰å…¨ï¼Œä¹Ÿè¢«ç§°ä¹‹ä¸º â€œå…¬é’¥éªŒè¯ç™»å½•â€</p><ul><li><p>åœ¨å®¢æˆ·æœºä¸­ç”Ÿæˆå¯†é’¥å¯¹ï¼ˆå…¬é’¥å’Œç§é’¥ï¼‰<br>ssh-keygenï¼ˆé»˜è®¤ä½¿ç”¨RSAéå¯¹ç§°åŠ å¯†ç®—æ³•ï¼‰<br>æ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æ³¨æ„ï¼Œåœ¨éè”æœºæœåŠ¡å™¨æ—¶æ‰§è¡Œæ­¤å‘½ä»¤</span><br><span class="line">ssh-keygen #æ­¤å‘½ä»¤ä¼šåœ¨ `~/.ssh/`ç›®å½•ä¸‹ï¼Œä¼šæ–°ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š</span><br><span class="line"># id_rsa.pub å…¬é’¥ï¼›</span><br><span class="line"># id_rsa ç§é’¥ï¼›</span><br></pre></td></tr></table></figure></li><li><p>æŠŠå®¢æˆ·æœºçš„å…¬é’¥ä¼ é€åˆ°æœåŠ¡å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id root@192.168.1.103 #ç­‰ä»·äº ssh-copy-id -i ~/.ssh/id_rsa.pub root@192.168.1.103</span><br><span class="line">#å…¶ä¸­ -i æ˜¯æŒ‡å®šæ–‡ä»¶æ‹·è´</span><br></pre></td></tr></table></figure></li></ul><p>ä¸‹æ¬¡ç™»å½•å°±ç”¨å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.1.103</span><br></pre></td></tr></table></figure></p><p>ssh-copy-id ä¼šæŠŠå®¢æˆ·æœºçš„å…¬é’¥è¿½åŠ åˆ°æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶ï¼š<code>~/.ssh/authorized_keys</code>;<br>ä½ ä¼šå‘ç° authorized_keys çš„å†…å®¹ä¸ ä¸Šé¢çš„ id_rsa.pub æ˜¯ä¸€æ ·çš„ã€‚</p><p>ä¸Šé¢çš„ssh-copy-idå‘½ä»¤å…¶å®å°±æ˜¯ä¸€ä¸ªå¤åˆ¶å‘½ä»¤ï¼Œä½ å¯ä»¥ä¸æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œç›´æ¥æŠŠå…¬é’¥çš„å†…å®¹æ‹·è´åˆ°authorized_keysæ–‡ä»¶ä¸­ã€‚</p><p>å¦‚æœä½ ä¸æƒ³ä½¿ç”¨å…å¯†ç™»å½•äº†ï¼Œå¯åœ¨å®¢æˆ·æœºæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -o  PreferredAuthentications=password -o PubkeyAuthentication=no root@192.168.1.104</span><br></pre></td></tr></table></figure></p><h3 id="å‘½ä»¤é›†åˆ"><a href="#å‘½ä»¤é›†åˆ" class="headerlink" title="å‘½ä»¤é›†åˆ"></a>å‘½ä»¤é›†åˆ</h3><h4 id="scp-ç½‘é—´æ‹·è´"><a href="#scp-ç½‘é—´æ‹·è´" class="headerlink" title="scp ç½‘é—´æ‹·è´"></a>scp ç½‘é—´æ‹·è´</h4><p>scp æ˜¯ secure copy ç¼©å†™ å®‰å…¨æ‹·è´ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬é€šè¿‡ç½‘ç»œï¼ŒæŠŠæ–‡ä»¶ä»ä¸€å°ç”µè„‘æ‹·è´åˆ°å¦ä¸€å°ã€‚<br>scp åŸºäº SSH(Secure SHell)çš„åŸç†æ¥è¿ä½œçš„ã€‚<br>SSH ä¼šåœ¨ä¸¤å°ç½‘ç»œè¿æ¥çš„ç”µè„‘ä¹‹é—´åˆ›å»ºä¸€æ¡å®‰å…¨é€šä¿¡çš„ç®¡é“<br>scp å°±åˆ©ç”¨è¿™æ¡ç®¡é“å®‰å…¨åœ°æ‹·è´æ–‡ä»¶</p><p>scp sourcefile destinationfile å‰è€…æ˜¯æºæ–‡ä»¶ï¼Œåè€…æ˜¯ç›®æ ‡æ–‡ä»¶ å°±æ˜¯æ‹·è´äº§ç”Ÿçš„æ–‡ä»¶ï¼›<br>ä¸Šé¢ä¸¤ä¸ªæ–‡ä»¶éƒ½å¯ä»¥ä»¥ user@ip:file_name æ¥è¡¨ç¤ºï¼› å…¶ä¸­ip ä¹Ÿå¯ä»¥æ˜¯ åŸŸåã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp file.txt root@192.168.1.5:/root # è¡¨ç¤ºä»æˆ‘çš„ç”µè„‘ä¸­å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„fileã€‚txt æ‹·è´åˆ°è¿œç¨‹ç”µè„‘ã€‚</span><br></pre></td></tr></table></figure></p><h2 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h2><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ul><li>vimä¸‹è¾“å…¥å¤§å†™ï¼Œæ˜¯æŒ‰shift+å¯¹åº”å­—æ¯</li><li>vimæœ‰æ›¿æ¢æ¨¡å¼ï¼Œå‚è€ƒå¦‚ä¸‹ã€Šæ›¿æ¢æ¨¡å¼ã€‹</li><li>vimä¸­ æ•°å­—+æŒ‡ä»¤ æ˜¯å¾ˆé€šç”¨çš„æ–¹å¼ï¼›ä¸‹é¢æœ‰ç›¸å…³è§£é‡Š</li></ul><h3 id="vim-çš„å¤šç§æ¨¡å¼"><a href="#vim-çš„å¤šç§æ¨¡å¼" class="headerlink" title="vim çš„å¤šç§æ¨¡å¼"></a>vim çš„å¤šç§æ¨¡å¼</h3><p>vim çš„å¤šç§æ¨¡å¼ ï¼š äº¤äº’æ¨¡å¼(é»˜è®¤æ¨¡å¼ï¼Œä¹Ÿå«æ­£å¸¸æ¨¡å¼)ã€æ’å…¥æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¯è§†æ¨¡å¼(ä¸å¸¸ç”¨)</p><h4 id="äº¤äº’æ¨¡å¼ï¼š"><a href="#äº¤äº’æ¨¡å¼ï¼š" class="headerlink" title="äº¤äº’æ¨¡å¼ï¼š"></a>äº¤äº’æ¨¡å¼ï¼š</h4><p>æ¯æ¬¡è¿è¡Œvimï¼Œå°±ä¼šè¿›å…¥è¿™ç§æ¨¡å¼ï¼›<br>è¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œä½ ä¸èƒ½è¾“å…¥æ–‡æœ¬ï¼›<br>å¯ä»¥è®©æˆ‘ä»¬åœ¨æ–‡æœ¬é—´ç§»åŠ¨ï¼Œåˆ é™¤ä¸€è¡Œæ–‡æœ¬ï¼Œå¤åˆ¶ç²˜è´´æ–‡æœ¬ï¼›<br>å¯ä»¥è·³è½¬åˆ°æŒ‡å®šè¡Œï¼Œæ’¤é”€æ“ä½œç­‰ç­‰ï¼›</p><h4 id="æ’å…¥æ¨¡å¼ï¼š"><a href="#æ’å…¥æ¨¡å¼ï¼š" class="headerlink" title="æ’å…¥æ¨¡å¼ï¼š"></a>æ’å…¥æ¨¡å¼ï¼š</h4><p>æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„æ–‡æœ¬ç¼–è¾‘å™¨çš„ä¸€è´¯ä½œé£ï¼Œ<br>æŒ‰iè¿›å…¥è¿™ç§æ¨¡å¼ï¼Œå…¶ä»–è¿›å…¥è¿™ç§æ¨¡å¼çš„æ–¹æ³•æœ‰ Iï¼ˆå¤§å†™iï¼‰ã€a å’Œ Aã€oå’ŒOï¼›<br>é€€å‡ºæ­¤æ¨¡å¼ï¼šæŒ‰ä¸‹Escé”®</p><h4 id="å‘½ä»¤-è¡Œ-æ¨¡å¼ï¼š"><a href="#å‘½ä»¤-è¡Œ-æ¨¡å¼ï¼š" class="headerlink" title="å‘½ä»¤(è¡Œ)æ¨¡å¼ï¼š"></a>å‘½ä»¤(è¡Œ)æ¨¡å¼ï¼š</h4><p>ä¹Ÿç§°ä¸º åº•çº¿å‘½ä»¤æ¨¡å¼<br>è¿™ä¸ªæ¨¡å¼ä¸‹ å¯ä»¥è¿è¡Œä¸€äº›å‘½ä»¤ä¾‹å¦‚ é€€å‡º ä¿å­˜ ç­‰ç­‰ï¼›<br>ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ¨¡å¼æ¥æ¿€æ´»ä¸€äº›vimé…ç½®ï¼Œä¾‹å¦‚è¯­æ³•é«˜äº®ï¼Œæ˜¾ç¤ºè¡Œå· ç­‰ç­‰ï¼›<br>ç”šè‡³è¿˜å¯ä»¥å‘é€ä¸€äº›å‘½ä»¤ç»™ç»ˆç«¯å‘½ä»¤è¡Œï¼Œä¾‹å¦‚ls cp ç­‰ç­‰ï¼›<br>è¿›å…¥æ–¹å¼ï¼šé¦–å…ˆå¤„äºäº¤äº’æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹å†’å·é”®ï¼›<br>è¾“å…¥å‘½ä»¤åï¼Œå›è½¦å°†æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œæ‰§è¡Œå‘½ä»¤åï¼Œå°†å›åˆ°äº¤äº’æ¨¡å¼ï¼›<br>å½“ç„¶äº†ï¼Œå¦‚æœç›´æ¥æŒ‰escé”®ä¹Ÿå¯ä»¥å›åˆ°äº¤äº’æ¨¡å¼ï¼›</p><figure class="image-box">                <img src="/image/linuxm/vim.png" alt title class>                <p></p>            </figure><h4 id="å¯è§†æ¨¡å¼ï¼š"><a href="#å¯è§†æ¨¡å¼ï¼š" class="headerlink" title="å¯è§†æ¨¡å¼ï¼š"></a>å¯è§†æ¨¡å¼ï¼š</h4><p>éƒ½ä»äº¤äº’æ¨¡å¼å¼€å§‹,<br>åœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼š<br>v å­—ç¬¦å¯è§†æ¨¡å¼ï¼›<br>V è¡Œå¯è§†æ¨¡å¼ï¼›<br>ctrl + v å—å¯è§†æ¨¡å¼ï¼›</p><p>v å­—ç¬¦å¯è§†æ¨¡å¼ï¼š<br>å¯ä½¿ç”¨ä¸Šä¸‹å·¦å³å…‰æ ‡ é€‰ä¸­å­—ç¬¦ï¼Œé…åˆ då®ç°åˆ é™¤ï¼›<br>V è¡Œå¯è§†æ¨¡å¼ï¼š<br>è¡Œå¯è§†æ¨¡å¼é»˜è®¤é€‰ä¸­å…‰æ ‡æ‰€åœ¨è¡Œï¼Œé…åˆdå®ç°åˆ é™¤ï¼›</p><p>ctrl + v å—å¯è§†æ¨¡å¼ï¼›<br>ã€winä¸‹ä¸€å®šä½¿ç”¨ git bash æ“ä½œï¼Œå¦åˆ™å…‰æ ‡é€‰ä¸­ä¸ä¸€æ ·ã€‘<br>é…åˆ d å’Œ I å¯å®ç°å¾ˆæ–¹ä¾¿æ“ä½œï¼š<br>dé”® ç”¨äºåˆ é™¤é€‰ä¸­çš„å†…å®¹ï¼›<br>Ié”® ç”¨äºæ’å…¥å†…å®¹ï¼š è¿›å…¥å—å¯è§†æ¨¡å¼ï¼Œå…‰æ ‡é€‰ä¸­ç›¸åº”å­—ç¬¦ï¼ŒæŒ‰Iè¿›å…¥insertæ¨¡å¼ï¼Œè¾“å…¥æ’å…¥çš„å­—ç¬¦ï¼ŒæŒ‰escï¼Œå°±ä¼šåœ¨é€‰ä¸­çš„å­—ç¬¦å‰éƒ½æ’å…¥å¯¹åº”å­—ç¬¦éå¸¸å¥½ç”¨ã€‚<br><figure class="image-box">                <img src="/image/linuxm/vim1.png" alt title class>                <p></p>            </figure></p><h3 id="vim-åŸºæœ¬æ“ä½œï¼ˆç§»åŠ¨ï¼Œå†™å…¥ï¼Œä¿å­˜ï¼Œç­‰ç­‰ï¼‰"><a href="#vim-åŸºæœ¬æ“ä½œï¼ˆç§»åŠ¨ï¼Œå†™å…¥ï¼Œä¿å­˜ï¼Œç­‰ç­‰ï¼‰" class="headerlink" title="vim åŸºæœ¬æ“ä½œï¼ˆç§»åŠ¨ï¼Œå†™å…¥ï¼Œä¿å­˜ï¼Œç­‰ç­‰ï¼‰"></a>vim åŸºæœ¬æ“ä½œï¼ˆç§»åŠ¨ï¼Œå†™å…¥ï¼Œä¿å­˜ï¼Œç­‰ç­‰ï¼‰</h3><p> ã€winä¸‹ä¸€å®šä½¿ç”¨ git bash æ“ä½œã€‘</p><h4 id="ä¿å­˜æ–‡ä»¶ï¼š"><a href="#ä¿å­˜æ–‡ä»¶ï¼š" class="headerlink" title="ä¿å­˜æ–‡ä»¶ï¼š"></a>ä¿å­˜æ–‡ä»¶ï¼š</h4><p>:w ä¿å­˜æ–‡ä»¶ï¼š éœ€å…ˆåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼ŒæŒ‰å†’å·è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰wï¼Œwriteçš„ç¼©å†™ï¼Œæ˜¯å†™å…¥ä¿å­˜çš„æ„æ€ï¼›<br>å¦‚æœæ˜¯æ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œå¯ :w newfilename ,å°±æ˜¯ä¿å­˜æ–°æ–‡ä»¶<br>ä¿å­˜æ–‡ä»¶åï¼Œå°±å›åˆ°äº†äº¤äº’æ¨¡å¼ï¼Œå¯ä»¥è¿›è¡Œé€€å‡ºï¼›<br>:q é€€å‡ºï¼Œ éœ€å…ˆåœ¨äº¤äº’æ¨¡å¼ä¸‹ï¼ŒæŒ‰å†’å·è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰q,å°±æ˜¯quitï¼Œé€€å‡ºï¼›<br>æ–‡ä»¶è‹¥å·²ç»ä¿®æ”¹ï¼Œä½†æœªä¿å­˜ï¼Œæ‰§è¡Œé€€å‡ºå‘½ä»¤ï¼Œvimå°†çº¢è‰²æé†’ï¼Œå¦‚æœè¦ç›´æ¥é€€å‡ºï¼Œå¯è¿è¡Œå‘½ä»¤ :qï¼<br>:wq ä¿å­˜ç„¶åé€€å‡ºï¼šè¿™æ˜¯ä¸¤ä¸ªå‘½ä»¤çš„ç»„åˆï¼šwå’Œqï¼›<br>:x ä¸ :wq æœ‰åŒæ ·æ•ˆæœã€‚</p><h3 id="æ ‡å‡†æ“ä½œï¼ˆå¤åˆ¶ï¼Œç²˜è´´ï¼Œæ’¤é”€ï¼Œç­‰ç­‰ï¼‰"><a href="#æ ‡å‡†æ“ä½œï¼ˆå¤åˆ¶ï¼Œç²˜è´´ï¼Œæ’¤é”€ï¼Œç­‰ç­‰ï¼‰" class="headerlink" title="æ ‡å‡†æ“ä½œï¼ˆå¤åˆ¶ï¼Œç²˜è´´ï¼Œæ’¤é”€ï¼Œç­‰ç­‰ï¼‰"></a>æ ‡å‡†æ“ä½œï¼ˆå¤åˆ¶ï¼Œç²˜è´´ï¼Œæ’¤é”€ï¼Œç­‰ç­‰ï¼‰</h3><p>ä»¥ä¸‹éƒ½å¿…é¡»å¤„äº <strong>äº¤äº’æ¨¡å¼ä¸‹</strong>ï¼š</p><h4 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h4><p>x åˆ é™¤ï¼› å…ˆæŒ‰æ•°å­— å†æŒ‰ xï¼›åˆ é™¤æŒ‡å®šæ•°å­—çš„å­—ç¬¦ï¼›<br>dd åˆ é™¤å•è¯æˆ–è€…è¡Œ,å…ˆæŒ‰æ•°å­— å†æŒ‰ ddï¼›åˆ é™¤æŒ‡å®šæ•°å­—çš„è¡Œ ï¼›<br>d0 åˆ é™¤ä»å…‰æ ‡åˆ°è¡Œé¦–<br>d$ åˆ é™¤ä»å…‰æ ‡åˆ°è¡Œæœ«ï¼›<br>ä»¥ä¸Š då¼€å¤´çš„å…¶å®æ˜¯å‰ªåˆ‡ï¼Œå¯ä»¥é…åˆç²˜è´´pä½¿ç”¨ï¼Œä¸è¿‡æ˜¯å‰ªåˆ‡è¾¾åˆ°äº†åˆ é™¤çš„æ•ˆæœ;</p><h4 id="å¤åˆ¶"><a href="#å¤åˆ¶" class="headerlink" title="å¤åˆ¶"></a>å¤åˆ¶</h4><p>yy å¤åˆ¶ä¸€è¡Œ<br>yw å¤åˆ¶ä¸€ä¸ªå•è¯<br>y$ å¤åˆ¶åˆ°å…‰æ ‡åˆ°è¡Œå°¾<br>y0 å¤åˆ¶å…‰æ ‡åˆ°è¡Œé¦–</p><h4 id="ç²˜è´´"><a href="#ç²˜è´´" class="headerlink" title="ç²˜è´´"></a>ç²˜è´´</h4><p>p ç²˜è´´<br> å…ˆæŒ‰æ•°å­— å†æŒ‰ pï¼›è¡¨ç¤ºç²˜è´´å‡ æ¬¡</p><h4 id="æ›¿æ¢æ¨¡å¼"><a href="#æ›¿æ¢æ¨¡å¼" class="headerlink" title="æ›¿æ¢æ¨¡å¼"></a>æ›¿æ¢æ¨¡å¼</h4><p>R æ›¿æ¢æ¨¡å¼ ï¼šä½¿ç”¨å¤§å†™çš„Rä¼šè¿›å…¥æ›¿æ¢æ¨¡å¼ï¼Œè¦é€€å‡ºæ­¤æ¨¡å¼æŒ‰esc</p><h4 id="æ’¤é”€æ“ä½œ"><a href="#æ’¤é”€æ“ä½œ" class="headerlink" title="æ’¤é”€æ“ä½œ"></a>æ’¤é”€æ“ä½œ</h4><p>u æ’¤é”€æ“ä½œï¼Œ<br>6 u æ’¤é”€ä¹‹å‰6æ¬¡æ“ä½œï¼›</p><p><strong>vimä¸­ æ•°å­—+æŒ‡ä»¤ æ˜¯å¾ˆé€šç”¨çš„æ–¹å¼ï¼›</strong></p><h4 id="é‡åš"><a href="#é‡åš" class="headerlink" title="é‡åš"></a>é‡åš</h4><p>Ctrl + r é‡åš<br>ä¸ºäº†å–æ¶ˆæ’¤é”€ï¼Œä¹Ÿå°±æ˜¯é‡åšä¹‹å‰çš„ä¿®æ”¹<br>åªéœ€è¦æŒ‰ä¸‹ctrl+rï¼Œ ræ˜¯redo é‡åš</p><h4 id="è®¾ç½®é…ç½®-set"><a href="#è®¾ç½®é…ç½®-set" class="headerlink" title="è®¾ç½®é…ç½® :set"></a>è®¾ç½®é…ç½® :set</h4><p>:set nu  vimæ˜¾ç¤ºè¡Œå·ï¼Œnu numberï¼›<br>:set nonu vimä¸æ˜¾ç¤ºè¡Œå·ï¼›</p><h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="shell-æ¦‚è¿°"><a href="#shell-æ¦‚è¿°" class="headerlink" title="shell æ¦‚è¿°"></a>shell æ¦‚è¿°</h3><p>å‡ ä¹æ‰€æœ‰unixå‘å±•è€Œæ¥çš„ç³»ç»Ÿéƒ½æ˜¯åŸºäºshå¼€å‘å‡ºæ¥çš„shellã€‚</p><p>shell æœ‰ä»¥ä¸‹å‡ ä¸ªåˆ†ç±»ï¼š<br><figure class="image-box">                <img src="/image/linuxm/shell0.png" alt title class>                <p></p>            </figure></p><h3 id="å…³äºbashï¼š"><a href="#å…³äºbashï¼š" class="headerlink" title="å…³äºbashï¼š"></a>å…³äºbashï¼š</h3><p>å…¶ä¸­bashæ˜¯éå¸¸æœ‰åçš„shellï¼Œ<br>æ˜¯å¤§å¤šæ•°linuxå‘è¡Œç‰ˆçš„é»˜è®¤shellï¼›<br>ä¹Ÿæ˜¯è‹¹æœçš„macOSæ“ä½œç³»ç»Ÿçš„é»˜è®¤Shell(æ®è¯´å› ä¸ºç‰ˆæƒé—®é¢˜ä»¥åä¼šç¼“å­˜Zsh)</p><h3 id="shellå¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿ"><a href="#shellå¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿ" class="headerlink" title="shellå¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿ"></a>shellå¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿ</h3><p>shellæ˜¯ç®¡ç†å‘½ä»¤è¡Œçš„ç¨‹åºï¼›<br>è®°ä½ä½ ä¹‹å‰åœ¨ç»ˆç«¯è¾“å…¥è¿‡çš„å‘½ä»¤ï¼›<br>ç”¨ç»„åˆé”®ctrl+Råœ¨ç»ˆç«¯çš„å†å²çºªå½•ä¸­æœç´¢æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼›<br>è¾“å…¥å‘½ä»¤åï¼Œè¿ç»­ä¸¤æ¬¡tabé”® å±•ç¤ºæ‰€æœ‰ä»¥æ­¤å¼€å¤´çš„å‘½ä»¤ï¼›<br>è¾“å…¥å‘½ä»¤åï¼ŒæŒ‰ä¸€æ¬¡tabé”® è¡¥å…¨ï¼›<br>æ§åˆ¶å‘½ä»¤è¿›ç¨‹ï¼Œæ¯”å¦‚ctrl+z ç»ˆæ­¢è¿›ç¨‹ï¼›<br>é‡å®šå‘å‘½ä»¤(ç”¨åˆ°&lt; &gt; | ç­‰ç¬¦å·)<br>å®šä¹‰åˆ«å</p><p>å¦‚ä¸‹å›¾ï¼Œshellå¥½æ¯”ç”¨æˆ·å’Œå†…æ ¸æ²Ÿé€šçš„ä¸€ä¸ªæ¡¥æ¢ï¼š<br><figure class="image-box">                <img src="/image/linuxm/shell1.png" alt title class>                <p></p>            </figure></p><h3 id="åˆ‡æ¢shell"><a href="#åˆ‡æ¢shell" class="headerlink" title="åˆ‡æ¢shell"></a>åˆ‡æ¢shell</h3><p>ä¸ºäº†åˆ‡æ¢shellï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹å‘½ä»¤ chsh ï¼Œchange shell çš„ç¼©å†™ï¼›</p><h3 id="åˆ›å»ºè„šæœ¬æ–‡ä»¶"><a href="#åˆ›å»ºè„šæœ¬æ–‡ä»¶" class="headerlink" title="åˆ›å»ºè„šæœ¬æ–‡ä»¶"></a>åˆ›å»ºè„šæœ¬æ–‡ä»¶</h3><h3 id="å…³äºè„šæœ¬çš„è¯´æ˜"><a href="#å…³äºè„šæœ¬çš„è¯´æ˜" class="headerlink" title="å…³äºè„šæœ¬çš„è¯´æ˜"></a>å…³äºè„šæœ¬çš„è¯´æ˜</h3><ul><li>vim test.sh</li><li>sh å°±æ˜¯shellçš„ç¼©å†™ï¼›</li><li>åç¼€.shå·²ç»æˆä¸ºä¸€ç§çº¦å®šä¿—æˆçš„å‘½åæƒ¯ä¾‹ï¼Œä½ ä¹Ÿå¯ä»¥ä¸åŠ åç¼€ï¼›</li><li>å†™ä¸€ä¸ªshellè„šæœ¬æ—¶ï¼Œç¬¬ä¸€è¦åšçš„å°±æ˜¯æŒ‡å®šå“ªç§shellæ¥ è§£æ/è¿è¡Œ å®ƒï¼›</li><li><p>å› ä¸ºsh ksh bash ç­‰ç­‰shellçš„è¯­æ³•ä¸å°½ç›¸åŒï¼›</p></li><li><p><code>#ï¼</code>è¢«ç§°ä½œsha-bang,æˆ–è€…shebangï¼›æŒ‡å®šè„šæœ¬ç”¨å“ªç§shellæ¥è¿è¡Œï¼›</p></li><li>ä½ ä¹‹å‰å­¦è¿‡çš„å‘½ä»¤åœ¨shellä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚ lsï¼Œ catç­‰ç­‰ï¼›</li><li>æ³¨é‡Šä½¿ç”¨ #ï¼›</li><li>ç»™è„šæœ¬æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œçš„æƒé™ <code>chmod +x test.sh</code></li></ul><p>ç¼–è¾‘test.shå†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash   #sha-bang,æŒ‡å®šè„šæœ¬ç”¨bash shellæ¥è¿è¡Œ</span><br><span class="line">ls</span><br></pre></td></tr></table></figure></p><h4 id="chmodæ·»åŠ å¯æ‰§è¡Œçš„æƒé™"><a href="#chmodæ·»åŠ å¯æ‰§è¡Œçš„æƒé™" class="headerlink" title="chmodæ·»åŠ å¯æ‰§è¡Œçš„æƒé™"></a>chmodæ·»åŠ å¯æ‰§è¡Œçš„æƒé™</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ ls -l</span><br><span class="line">-rw-rw-r--.  1 hz   hz           16 May 29 06:53 test.sh #-rw-rw-r--é‡Œæ²¡æœ‰xï¼Œè¯´æ˜æ²¡æœ‰è¿è¡Œæƒé™ï¼›</span><br><span class="line"></span><br><span class="line">#æ·»åŠ å¯æ‰§è¡Œçš„æƒé™</span><br><span class="line">[hz@localhost ~]$ chmod +x test.sh</span><br><span class="line">[hz@localhost ~]$ ls -l</span><br><span class="line">-rwxrwxr-x.  1 hz   hz           16 May 29 06:53 test.sh #-rwxrwxr-xæœ‰xï¼Œè¯´æ˜æœ‰è¿è¡Œæƒé™ï¼›</span><br><span class="line"></span><br><span class="line">#ä½¿ç”¨ ./test.sh è¿è¡Œæ­¤shæ–‡ä»¶</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">Documents  htop-2.2.0.tar.gz  test.sh</span><br></pre></td></tr></table></figure><p>shellå‘½ä»¤ç›¸æ¯”è¾“å…¥è¡Œçš„ä¼˜åŠ¿ä¹‹ä¸€ï¼Œå°±æ˜¯ä¸€æ¬¡æ€§å¯ä»¥è¾“å…¥å¾ˆå¤šä¸ªå‘½ä»¤ï¼›</p><h4 id="ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ"><a href="#ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ" class="headerlink" title="ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ"></a>ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ</h4><ul><li>è°ƒè¯•ä¸€ä¸ªè„šæœ¬ç¨‹åº bash -x test.sh</li><li>å‚æ•° -xè¡¨ç¤ºä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œ</li><li>shellå°±ä¼šæŠŠæˆ‘ä»¬çš„è„šæœ¬æ–‡ä»¶è¿è¡Œæ—¶çš„ç»†èŠ‚æ‰“å°å‡ºæ¥<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ bash -x test.sh</span><br><span class="line">+ ls # bash -x test.sh è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œ</span><br><span class="line">Desktop    htop-2.2.0     test.sh</span><br><span class="line">[hz@localhost ~]$</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ›å»ºå±äºè‡ªå·±çš„å‘½ä»¤"><a href="#åˆ›å»ºå±äºè‡ªå·±çš„å‘½ä»¤" class="headerlink" title="åˆ›å»ºå±äºè‡ªå·±çš„å‘½ä»¤"></a>åˆ›å»ºå±äºè‡ªå·±çš„å‘½ä»¤</h3><h4 id="å…³äºPATH"><a href="#å…³äºPATH" class="headerlink" title="å…³äºPATH"></a>å…³äºPATH</h4><p>ä¸ºä»€ä¹ˆpwdè¿™äº›å‘½ä»¤ç›´æ¥å¯ä»¥è¿è¡Œï¼Œæ—¶å› ä¸ºè¿™äº›å‘½ä»¤éƒ½åœ¨PATHä¸­ï¼›<br>PATHæ˜¯linuxçš„ä¸€ä¸ªç³»ç»Ÿå˜é‡<br>è¿™ä¸ªå˜é‡åŒ…å«äº†ä½ ç³»ç»Ÿé‡Œæ‰€æœ‰å¯ä»¥è¢«ç›´æ¥æ‰§è¡Œçš„ç¨‹åºè·¯å¾„ï¼›<br>å¯ç”¨ echo $PATHå¯ä»¥æ‰“å°PATHï¼Œå°†åˆ›å»ºçš„shæ–‡ä»¶æ‹·è´åˆ°PATHä¸­çš„ä»»æ„ä¸€ä¸ªç›®å½•ï¼Œå³åˆ›å»ºæˆåŠŸï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ echo $PATH</span><br><span class="line">/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/sbin:/home/hz/.local/bin:/home/hz/bin</span><br><span class="line">[hz@localhost ~]$ sudo cp test.sh /usr/local/sbin #å°†shæ‹·è´åˆ°PATHé‡Œé¢ä»»æ„ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå³å¯åœ¨ä»»æ„åœ°æ–¹è¿è¡Œtest.shå‘½ä»¤äº†ï¼›</span><br><span class="line">[hz@localhost ~]$ test.sh </span><br><span class="line">Desktop    htop-2.2.0test.sh</span><br></pre></td></tr></table></figure></p><h3 id="Shellä¸­çš„å˜é‡"><a href="#Shellä¸­çš„å˜é‡" class="headerlink" title="Shellä¸­çš„å˜é‡"></a>Shellä¸­çš„å˜é‡</h3><p>å¯ä»¥ç”¨å˜é‡åœ¨å†…å­˜ä¸­æš‚æ—¶å‚¨å­˜ä¿¡æ¯</p><h4 id="å®šä¹‰å˜é‡ï¼š"><a href="#å®šä¹‰å˜é‡ï¼š" class="headerlink" title="å®šä¹‰å˜é‡ï¼š"></a>å®šä¹‰å˜é‡ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#å˜é‡åæ˜¯message,æ³¨æ„=å·¦å³ä¸è¦æœ‰ç©ºæ ¼ï¼ŒåŠ ç©ºæ ¼å°†è®©ç³»ç»Ÿè®¤ä¸ºmessageæ˜¯ä¸€ä¸ªå‘½ä»¤</span><br><span class="line">message=&apos;hello world&apos; </span><br><span class="line"># åæ–œæ \ï¼Œä¹Ÿæˆä¸ºè½¬ä¹‰å­—ç¬¦ï¼Œåœ¨å˜é‡å€¼ä¸­åŠ å…¥å•å¼•å·ï¼Œéœ€è¦ç”¨è½¬ä¹‰ç¬¦</span><br><span class="line">message=&apos;hello ,it\&apos;s me&apos;</span><br></pre></td></tr></table></figure><h4 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æ³¨æ„ä¸‹é¢ä¸¤ç§æ–¹å¼ï¼Œæ‰“å°ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡æœ¬è´¨ä¸ä¸€æ ·</span><br><span class="line">[hz@localhost ~]$ echo hello world # å‘echoä¼ é€’ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºhello å’Œ world ï¼Œå› æ­¤è¢«æ‰“å°å‡ºæ¥</span><br><span class="line">hello world</span><br><span class="line">[hz@localhost ~]$ echo &quot;hello world&quot; # ç”¨åŒå¼•å·æ‹¬èµ·æ¥åï¼Œç›¸å½“äºä¸€ä¸ªå‚æ•°ï¼Œå‘echoä¼ é€’ä¸€ä¸ªå‚æ•° ï¼šhello world</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure><h4 id="e-æ’å…¥æ¢è¡Œç¬¦"><a href="#e-æ’å…¥æ¢è¡Œç¬¦" class="headerlink" title="-e æ’å…¥æ¢è¡Œç¬¦"></a>-e æ’å…¥æ¢è¡Œç¬¦</h4><ul><li>å¦‚æœè¦æ’å…¥æ¢è¡Œç¬¦ï¼Œéœ€è¦ç”¨åˆ° -e å‚æ•° :ä¸ºäº†ä½¿ è½¬ä¹‰ç¬¦ å‘ç”Ÿä½œç”¨</li><li>æ¯”å¦‚æ¢è¡Œè½¬ä¹‰ç¬¦ \n ,å¦‚ä¸‹<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ echo -e &quot;hello world\nsecond line&quot;</span><br><span class="line">hello world</span><br><span class="line">second line</span><br></pre></td></tr></table></figure></li></ul><h4 id="å˜é‡åå‰åŠ "><a href="#å˜é‡åå‰åŠ " class="headerlink" title="å˜é‡åå‰åŠ  $"></a>å˜é‡åå‰åŠ  $</h4><ul><li>æ˜¾ç¤ºå˜é‡ï¼š bashè„šæœ¬ä¸­ï¼Œå¦‚æœè¦æ˜¾ç¤ºä¸€ä¸ªå˜é‡ï¼Œç”¨echoåï¼Œå¿…é¡»è¦åœ¨å˜é‡åå‰åŠ  $<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰å˜é‡</span><br><span class="line">[hz@localhost ~]$ msg1=&quot;888&quot; #å®šä¹‰å˜é‡msg1ï¼Œæ­¤å˜é‡å°†è¢«å†™å…¥ç³»ç»Ÿå†…å­˜</span><br><span class="line">[hz@localhost ~]$ echo $msg1 #ä¸ºä»€ä¹ˆå¯ä»¥è¯»å–ï¼Œå› ä¸ºè¯¥å˜é‡è¢«å†™å…¥å†…å­˜äº†</span><br><span class="line">888</span><br><span class="line"></span><br><span class="line"># åœ¨shellè„šæœ¬ä¸­å®šä¹‰ï¼Œæ³¨æ„çš„æ˜¯ï¼Œè„šæœ¬ä¸­å®šä¹‰çš„å˜é‡ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ— æ³•æ‰“å°å‡ºæ¥</span><br><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">msg=&quot;hello world&quot;</span><br><span class="line">echo $msg</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh  #è¿è¡Œå‘½ä»¤</span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ echo $msg # ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ— æ³•æ‰“å°å‡ºæ¥</span><br></pre></td></tr></table></figure></li></ul><h3 id="å•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«"><a href="#å•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«" class="headerlink" title="å•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«"></a>å•å¼•å·ä¸åŒå¼•å·çš„åŒºåˆ«</h3><p>å®šä¹‰å˜é‡å€¼æ—¶ï¼Œå•å¼•å·ä¸åŒå¼•å·æœ‰åŒºåˆ«ï¼›</p><ul><li>å•å¼•å·<br>å¦‚æœå˜é‡è¢«åŒ…å«åœ¨å•å¼•å·é‡Œé¢<br>é‚£ä¹ˆå˜é‡ä¸ä¼šè¢«è§£æ<br>ç¾å…ƒç¬¦å· $ ä¿æŒåŸæ ·è¾“å‡º,å› ä¸ºå•å¼•å·å¿½ç•¥è¢«å®ƒæ‹¬èµ·æ¥çš„æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦;</li><li>åŒå¼•å·<br>åŒå¼•å·ä¹Ÿä¼šå¿½ç•¥å¤§å¤šæ•°ç‰¹æ®Šå­—ç¬¦ï¼Œ<br>ä¸åŒçš„æ˜¯ï¼ŒåŒå¼•å·ä¸ä¼šå¿½ç•¥ è¿™äº›ç¬¦å·ï¼š$  åå¼•å·(`) åæ–œæ <br>ä¸å¿½ç•¥ä¸Šé¢çš„$ç¬¦å·ï¼Œåœ¨åŒå¼•å·å†…å¯è¿›è¡Œå˜é‡åæ›¿æ¢<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ msg1=&quot;888&quot;</span><br><span class="line">[hz@localhost ~]$ echo $msg1</span><br><span class="line">888</span><br><span class="line">[hz@localhost ~]$ echo &apos;price is $msg1&apos;  #å•å¼•å·ï¼Œé‚£ä¹ˆå˜é‡ä¸ä¼šè¢«è§£æ, å› ä¸ºå•å¼•å·å¿½ç•¥è¢«å®ƒæ‹¬èµ·æ¥çš„æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦</span><br><span class="line">price is $msg1</span><br><span class="line">[hz@localhost ~]$ echo &quot;price is $msg1&quot;  #åŒå¼•å·ï¼Œå¯æ­£å¸¸è¾“å‡ºå˜é‡</span><br><span class="line">price is 888</span><br></pre></td></tr></table></figure></li></ul><h3 id="åå¼•å·"><a href="#åå¼•å·" class="headerlink" title="åå¼•å·"></a>åå¼•å·</h3><ul><li>åå¼•å·è¦æ±‚shellæ‰§è¡Œè¢«å®ƒæ‹¬èµ·æ¥çš„å†…å®¹(å¦‚ å‘½ä»¤)ï¼Œåå¼•å·ç”¨æ³•å¹¿æ³›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ msg=`pwd`  #åå¼•å· msgçš„å€¼å°±æ˜¯shellæ‰§è¡Œpwdä¹‹åçš„ç»“æœ</span><br><span class="line">[hz@localhost ~]$ echo &quot;you are in dir $msg&quot;</span><br><span class="line">you are in dir /home/hz</span><br></pre></td></tr></table></figure></li></ul><h3 id="read-è¯·æ±‚è¾“å…¥"><a href="#read-è¯·æ±‚è¾“å…¥" class="headerlink" title="read è¯·æ±‚è¾“å…¥"></a>read è¯·æ±‚è¾“å…¥</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><ul><li>read å‘½ä»¤è¯»å–åˆ°çš„æ–‡æœ¬ä¼šè¢«ç«‹å³å‚¨å­˜åœ¨ä¸€ä¸ªå˜é‡é‡Œ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">read name  #å°†readè¯»å–åˆ°çš„å†…å®¹ èµ‹å€¼ç»™å˜é‡ name</span><br><span class="line">echo &quot;hellow $name !&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">hz   #è¿è¡Œåï¼Œå…‰æ ‡è¿™é‡Œé—ªçƒï¼Œæç¤ºä½ è¾“å…¥å†…å®¹ï¼Œè¾“å…¥å®Œæ¯•ï¼Œå›è½¦åreadè¯»å–ä½ è¾“å…¥çš„å†…å®¹ï¼Œæ‰§è¡Œåç»­å‘½ä»¤</span><br><span class="line">hellow hz !</span><br></pre></td></tr></table></figure></li></ul><h4 id="åŒæ—¶ç»™å‡ ä¸ªå˜é‡èµ‹å€¼"><a href="#åŒæ—¶ç»™å‡ ä¸ªå˜é‡èµ‹å€¼" class="headerlink" title="åŒæ—¶ç»™å‡ ä¸ªå˜é‡èµ‹å€¼"></a>åŒæ—¶ç»™å‡ ä¸ªå˜é‡èµ‹å€¼</h4><p>readå‘½ä»¤ä¸€ä¸ªå•è¯ä¸€ä¸ªå•è¯(å•è¯æ˜¯ç”¨ç©ºæ ¼åˆ†å¼€çš„)åœ°è¯»å–ä½ è¾“å…¥çš„å‚æ•°ï¼Œå¹¶æŠŠæ¯ä¸ªå‚æ•°èµ‹å€¼ç»™å¯¹åº”å˜é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">read name place #ç©ºæ ¼åˆ†éš”å˜é‡å</span><br><span class="line">echo &quot;hellow $name , welcome $place !&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">hz chengdu #è¾“å…¥æ—¶ï¼Œä»¥ç©ºæ ¼åˆ†éš”</span><br><span class="line">hellow hz , welcome chengdu !</span><br></pre></td></tr></table></figure></p><h4 id="p-æ˜¾ç¤ºæç¤ºä¿¡æ¯"><a href="#p-æ˜¾ç¤ºæç¤ºä¿¡æ¯" class="headerlink" title="-p æ˜¾ç¤ºæç¤ºä¿¡æ¯"></a>-p æ˜¾ç¤ºæç¤ºä¿¡æ¯</h4><p>readå‘½ä»¤çš„-på‚æ•°ï¼Œpæ˜¯ promptï¼Œè¡¨ç¤ºæç¤º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">read -p &apos;please enter your name: &apos; name #-p å®šä¹‰æç¤ºè¯­</span><br><span class="line">echo &quot;hellow $name !&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">please enter your name: hz #å…³é—­é—ªçƒæç¤ºè¾“å…¥æ—¶ï¼Œæœ‰ä¸Šé¢å®šä¹‰çš„æç¤ºè¯­</span><br><span class="line">hellow hz !</span><br></pre></td></tr></table></figure></p><h4 id="n-é™åˆ¶å­—ç¬¦æ•°ç›®"><a href="#n-é™åˆ¶å­—ç¬¦æ•°ç›®" class="headerlink" title="-n é™åˆ¶å­—ç¬¦æ•°ç›®"></a>-n é™åˆ¶å­—ç¬¦æ•°ç›®</h4><p>ç”¨-nå‚æ•°å¯ä»¥é™åˆ¶ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦(å­—ç¬¦æ•°)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">read -p &apos;please enter your name(5 characters max): &apos; -n 5 name #-n å®šä¹‰é•¿åº¦</span><br><span class="line">echo -e &quot;\nhellow $name !&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">please enter your name(5 characters max): huang #å½“è¾“å…¥ä¸Šé¢è¶…è¿‡5ä¸ªå­—ç¬¦æ—¶ï¼Œä¸éœ€è¦å›è½¦ï¼Œç³»ç»Ÿç›´æ¥æ‰§è¡Œåé¢å‘½ä»¤</span><br><span class="line">hellow huang !</span><br></pre></td></tr></table></figure></p><h4 id="t-é™åˆ¶è¾“å…¥æ—¶é—´"><a href="#t-é™åˆ¶è¾“å…¥æ—¶é—´" class="headerlink" title="-t é™åˆ¶è¾“å…¥æ—¶é—´"></a>-t é™åˆ¶è¾“å…¥æ—¶é—´</h4><p>ç”¨æ³•æ ¹ä¸Šé¢ä¸€æ ·ï¼Œè¶…è¿‡è¾“å…¥æ—¶é—´ï¼Œå°±ä¸è¯»å–ç›´æ¥æ‰§è¡Œåç»­å‘½ä»¤</p><h4 id="s-éšè—è¾“å…¥å†…å®¹"><a href="#s-éšè—è¾“å…¥å†…å®¹" class="headerlink" title="-s éšè—è¾“å…¥å†…å®¹"></a>-s éšè—è¾“å…¥å†…å®¹</h4><p>ç”¨æ³•ä¸ä¸Šä¸€æ ·ï¼Œé€šå¸¸ç”¨äºå¯†ç è¾“å…¥ï¼Œåœºæ™¯æœ‰ç™»å½•rootç”¨æˆ·æ—¶ï¼Œè¾“å…¥å¯†ç æ˜¯éšè—æ˜¾ç¤ºçš„ã€‚</p><h3 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h3><h4 id="åœ¨bashä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼"><a href="#åœ¨bashä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼" class="headerlink" title="åœ¨bashä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼"></a>åœ¨bashä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼</h4><p>ç‰¢è®° ï¼šåœ¨bashä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼</p><h4 id="letå‘½ä»¤å¯ä»¥ç”¨äºèµ‹å€¼"><a href="#letå‘½ä»¤å¯ä»¥ç”¨äºèµ‹å€¼" class="headerlink" title="letå‘½ä»¤å¯ä»¥ç”¨äºèµ‹å€¼"></a>letå‘½ä»¤å¯ä»¥ç”¨äºèµ‹å€¼</h4><p>bashæœ¬èº«ä¸ä¼šæ“çºµæ•°å­—ï¼Œéšè—å®ƒä¹Ÿä¸ä¼šåšè¿ç®—<br>å¯ä»¥ç”¨letæ¥è¾¾åˆ°è¿ç®—ç›®çš„ï¼Œletå‘½ä»¤å¯ä»¥ç”¨äºèµ‹å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">let &quot;a = 5&quot;</span><br><span class="line">let &quot;b = 6&quot;</span><br><span class="line">let &quot;c = a + b&quot;</span><br><span class="line">echo &quot;c =  $c&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">c =  11</span><br></pre></td></tr></table></figure></p><h4 id="shellæ”¯æŒçš„è¿ç®—ç¬¦ï¼š"><a href="#shellæ”¯æŒçš„è¿ç®—ç¬¦ï¼š" class="headerlink" title="shellæ”¯æŒçš„è¿ç®—ç¬¦ï¼š"></a>shellæ”¯æŒçš„è¿ç®—ç¬¦ï¼š</h4><figure class="image-box">                <img src="/image/linuxm/calc.png" alt title class>                <p></p>            </figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><h4 id="shellçš„æŸ¥çœ‹å’Œä½¿ç”¨"><a href="#shellçš„æŸ¥çœ‹å’Œä½¿ç”¨" class="headerlink" title="shellçš„æŸ¥çœ‹å’Œä½¿ç”¨"></a>shellçš„æŸ¥çœ‹å’Œä½¿ç”¨</h4><p>shellä¸­ï¼Œæ¯ä¸ªè„šæœ¬å†…çš„å˜é‡ ä¸èƒ½è¢« å…¶ä»–è„šæœ¬ä½¿ç”¨ï¼›<br>ä¸è¿‡shellä¸­çš„ç¯å¢ƒå˜é‡å¯ä»¥è¢«æ­¤ç§shellçš„ä»»æ„è„šæœ¬ç¨‹åºä½¿ç”¨<br>æˆ‘ä»¬æœ‰æ—¶ä¹ŸæŠŠç¯å¢ƒå˜é‡ç§°ä¹‹ä¸º å…¨å±€å˜é‡<br>å¯ä»¥ç”¨envå‘½ä»¤æ¥æ˜¾ç¤ºä½ ç›®å‰æ‰€æœ‰çš„ç¯å¢ƒå˜é‡<br><figure class="image-box">                <img src="/image/linuxm/env.png" alt title class>                <p></p>            </figure><br>å…¶ä¸­é‡è¦çš„å˜é‡æœ‰ï¼š</p><ul><li>SHELL</li><li>PATH : PATHæ˜¯ä¸€ç³»åˆ—è·¯å¾„çš„é›†åˆï¼Œ<br>åªè¦æœ‰å¯æ‰§è¡Œç¨‹åºä½äºä»»æ„ä¸€ä¸ªå­˜åœ¨ä¸PATHä¸­çš„è·¯å¾„ï¼Œ<br>é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¾“å…¥å¯æ‰§è¡Œç¨‹åºåå­—æ¥æ‰§è¡Œ</li><li>HOME :ä½ çš„å®¶ç›®å½•æ‰€åœ¨è·¯å¾„</li><li>PWD ï¼šä½ å½“å‰æ‰€åœ¨ç›®å½•<br>å˜é‡ä½¿ç”¨æ—¶ï¼Œåªéœ€åœ¨å‰åŠ $,æ¯”å¦‚ï¼š<code>echo $PATH</code></li></ul><h4 id="è‡ªå®šä¹‰ç¯å¢ƒå˜é‡"><a href="#è‡ªå®šä¹‰ç¯å¢ƒå˜é‡" class="headerlink" title="è‡ªå®šä¹‰ç¯å¢ƒå˜é‡"></a>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</h4><p>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡ ä½¿ç”¨ exportï¼Œ æˆ‘ä»¬ä¸€èˆ¬åœ¨rcæ–‡ä»¶ä¸­å®šä¹‰ç¯å¢ƒå˜é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat .bashrc</span><br><span class="line"># .bashrc</span><br><span class="line"></span><br><span class="line"># Source global definitions</span><br><span class="line">if [ -f /etc/bashrc ]; then</span><br><span class="line">. /etc/bashrc</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"> export EDITOR=nano</span><br></pre></td></tr></table></figure></p><h3 id="å‚æ•°å˜é‡"><a href="#å‚æ•°å˜é‡" class="headerlink" title="å‚æ•°å˜é‡"></a>å‚æ•°å˜é‡</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¯ä»¥è¿™æ ·è°ƒç”¨æˆ‘ä»¬çš„è„šæœ¬æ–‡ä»¶<br>./test.sh å‚æ•°1 å‚æ•°2 â€¦<br>è¿™äº›ä¸ªå‚æ•°1 å‚æ•°2 â€¦ è¢«ç§°ä¹‹ä¸º â€œå‚æ•°å˜é‡â€</p><figure class="image-box">                <img src="/image/linuxm/var.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;you have executed $0, there are $# params&quot;</span><br><span class="line">echo &quot;first params is  $1&quot;</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh money beauti  #è¾“å…¥å‚æ•°</span><br><span class="line">you have executed ./test.sh, there are 2 params</span><br><span class="line">first params is  money</span><br></pre></td></tr></table></figure><h4 id="shiftå‘½ä»¤æŒªç§»"><a href="#shiftå‘½ä»¤æŒªç§»" class="headerlink" title="shiftå‘½ä»¤æŒªç§»"></a>shiftå‘½ä»¤æŒªç§»</h4><p>shiftå‘½ä»¤æ¥ æŒªç§» å‚æ•°ï¼Œä¸€è¾¹ä¾æ¬¡å¤„ç†ï¼›<br>shiftå‘½ä»¤å¸¸è¢«ç”¨åœ¨å¾ªç¯ä¸­ï¼Œä½¿å¾—å‚æ•°ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¢«å¤„ç†</p><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><p>å¦‚ä¸‹ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">arr=(&apos;value0&apos; &apos;value1&apos; &apos;value2&apos;) #å®šä¹‰æ•°ç»„ï¼Œç”¨å°æ‹¬å·ï¼Œæ¯ä¸ªå…ƒç´ ç”¨ç©ºæ ¼åˆ†éš”</span><br><span class="line">arr[5]=&apos;value5&apos;</span><br><span class="line">echo $&#123;arr[0]&#125;  #ä½¿ç”¨æ•°ç»„ ç”¨ $&#123;&#125;, å¯é€šè¿‡ä¸‹æ ‡è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é€šé…ç¬¦ï¼Œè®¿é—®æ‰€æœ‰</span><br><span class="line">echo $&#123;arr[*]&#125; #ä¹Ÿå¯ä»¥é€šè¿‡é€šé…ç¬¦ï¼Œè®¿é—®æ‰€æœ‰</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">value0</span><br><span class="line">value0 value1 value2 value5</span><br></pre></td></tr></table></figure></p><h3 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><p>å¦‚ä¸‹ä¸­æ‹¬å·ä¸¤ä¾§éƒ½è¦æœ‰ç©ºæ ¼ï¼š<br><figure class="image-box">                <img src="/image/linuxm/if.png" alt title class>                <p></p>            </figure><br>ä¸Šé¢å›¾ç‰‡ä¸­ï¼Œ fiæ˜¯ifçš„åè½¬å†™æ³•ï¼Œè¡¨ç¤º ifè¯­å¥ç»“æŸã€‚<br>å¦å¤–ä¸€ç§å†™æ³•ï¼Œä¸­æ‹¬å·å³ä¾§åŠ åˆ†å·ï¼š<br><figure class="image-box">                <img src="/image/linuxm/if1.png" alt title class>                <p></p>            </figure></p><h4 id="ç­‰äºå·"><a href="#ç­‰äºå·" class="headerlink" title="ç­‰äºå·"></a>ç­‰äºå·</h4><p>åœ¨shellä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨ifæ¡ä»¶å†…ï¼Œåˆ¤æ–­æ˜¯å¦ç›¸ç­‰ç”¨ä¸€ä¸ªç­‰äºå·ï¼Œå½“ç„¶ä½ ç”¨ä¸¤ä¸ªç­‰äºå·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">name1=&quot;test&quot;</span><br><span class="line">name2=&quot;demo&quot;</span><br><span class="line"></span><br><span class="line">if [ $name1 = $name2 ]  #åˆ¤æ–­æ˜¯å¦ç›¸ç­‰ç”¨ä¸€ä¸ªç­‰äºå·</span><br><span class="line">then</span><br><span class="line">    echo &quot;you have the same name&quot;</span><br><span class="line">else </span><br><span class="line">    echo &quot;you diffrent name&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">you diffrent name</span><br></pre></td></tr></table></figure></p><h4 id="elif-å¦åˆ™-å¦‚æœ"><a href="#elif-å¦åˆ™-å¦‚æœ" class="headerlink" title="elif å¦åˆ™ å¦‚æœ"></a>elif å¦åˆ™ å¦‚æœ</h4><p>elif æ˜¯ else if çš„ç¼©å†™ã€‚<br><figure class="image-box">                <img src="/image/linuxm/if2.png" alt title class>                <p></p>            </figure></p><h3 id="ä¸åŒçš„æµ‹è¯•ç±»å‹"><a href="#ä¸åŒçš„æµ‹è¯•ç±»å‹" class="headerlink" title="ä¸åŒçš„æµ‹è¯•ç±»å‹"></a>ä¸åŒçš„æµ‹è¯•ç±»å‹</h3><figure class="image-box">                <img src="/image/linuxm/test.png" alt title class>                <p></p>            </figure><h4 id="å­—ç¬¦ä¸²åˆ¤æ–­"><a href="#å­—ç¬¦ä¸²åˆ¤æ–­" class="headerlink" title="å­—ç¬¦ä¸²åˆ¤æ–­"></a>å­—ç¬¦ä¸²åˆ¤æ–­</h4><p>åœ¨shellä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼š<br><figure class="image-box">                <img src="/image/linuxm/test1.png" alt title class>                <p></p>            </figure></p><h4 id="æ•°å­—åˆ¤æ–­"><a href="#æ•°å­—åˆ¤æ–­" class="headerlink" title="æ•°å­—åˆ¤æ–­"></a>æ•°å­—åˆ¤æ–­</h4><p>å°½ç®¡shellæŠŠæ‰€æœ‰å˜é‡éƒ½çœ‹æˆå­—ç¬¦ä¸²ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯å¯ä»¥åšæ•°å­—çš„æ¡ä»¶æµ‹è¯•ï¼š</p><figure class="image-box">                <img src="/image/linuxm/num.png" alt title class>                <p></p>            </figure><h4 id="æ–‡ä»¶åˆ¤æ–­"><a href="#æ–‡ä»¶åˆ¤æ–­" class="headerlink" title="æ–‡ä»¶åˆ¤æ–­"></a>æ–‡ä»¶åˆ¤æ–­</h4><p>ç›¸æ¯”ä¸»æµå˜æˆè¯­è¨€ï¼Œ<br>shellçš„ä¸€å¤§ä¼˜åŠ¿å°±æ˜¯å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æµ‹è¯•æ–‡ä»¶ï¼š<br><figure class="image-box">                <img src="/image/linuxm/file.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxm/file1.png" alt title class>                <p></p>            </figure></p><h3 id="amp-amp-ä¸”çš„åº”ç”¨"><a href="#amp-amp-ä¸”çš„åº”ç”¨" class="headerlink" title="&amp;&amp; ä¸”çš„åº”ç”¨"></a>&amp;&amp; ä¸”çš„åº”ç”¨</h3><p>ç±»ä¼¼çš„è¿˜æœ‰ æˆ–|| çš„åº”ç”¨ï¼š<br><figure class="image-box">                <img src="/image/linuxm/sum.png" alt title class>                <p></p>            </figure></p><h3 id="caseçš„åº”ç”¨"><a href="#caseçš„åº”ç”¨" class="headerlink" title="caseçš„åº”ç”¨"></a>caseçš„åº”ç”¨</h3><h4 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">     &quot;matth&quot;)</span><br><span class="line">        echo &quot;hello matth&quot;</span><br><span class="line">        ;;  #ä¸¤ä¸ªåˆ†å· ç±»ä¼¼js çš„break</span><br><span class="line">     &quot;mark&quot;) #ä¹Ÿå¯ä»¥ç”¨é€šé…ç¬¦åŠ ä¸Šå­—ç¬¦ä¸²</span><br><span class="line">        echo &quot;hello mark&quot;</span><br><span class="line">        ;;</span><br><span class="line">     *)  #é€šé…ç¬¦</span><br><span class="line">        echo &quot;sorry,i do not know you&quot;</span><br><span class="line">      ;;</span><br><span class="line">esac #caseçš„ç»“æŸç¬¦å·</span><br><span class="line">[hz@localhost ~]$ ./test.sh mark</span><br><span class="line">hello mark</span><br><span class="line">[hz@localhost ~]$ ./test.sh hz</span><br><span class="line">sorry,i do not know you</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å•-è€Œä¸æ˜¯-æµ‹è¯•æˆ–"><a href="#ä½¿ç”¨å•-è€Œä¸æ˜¯-æµ‹è¯•æˆ–" class="headerlink" title="ä½¿ç”¨å•|è€Œä¸æ˜¯||æµ‹è¯•æˆ–"></a>ä½¿ç”¨å•|è€Œä¸æ˜¯||æµ‹è¯•æˆ–</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">case $1 in</span><br><span class="line">     &quot;matth&quot; | &quot;lucy&quot; | &quot;jim&quot;) #caseå†…ä½¿ç”¨æˆ–æ—¶ï¼Œä¸èƒ½ç”¨åŒ||,è€Œè¦ç”¨å•|</span><br><span class="line">        echo &quot;hello matth&quot;</span><br><span class="line">        ;;</span><br><span class="line">     *mark) #é€šé…ç¬¦åŠ ä¸Šå­—ç¬¦ä¸²,æ­¤æ—¶è¦å»æ‰åŒå¼•å·</span><br><span class="line">        echo &quot;hello mark&quot;</span><br><span class="line">        ;;</span><br><span class="line">     *)</span><br><span class="line">        echo &quot;sorry,i do not know you&quot;</span><br><span class="line">      ;;</span><br><span class="line">esac</span><br><span class="line">[hz@localhost ~]$ ./test.sh jim</span><br><span class="line">hello matth</span><br><span class="line">[hz@localhost ~]$ ./test.sh supermark</span><br><span class="line">hello mark</span><br><span class="line">[hz@localhost ~]$ ./test.sh liuxijun</span><br><span class="line">sorry,i do not know you</span><br></pre></td></tr></table></figure><h3 id="shellå¾ªç¯è¯­å¥"><a href="#shellå¾ªç¯è¯­å¥" class="headerlink" title="shellå¾ªç¯è¯­å¥"></a>shellå¾ªç¯è¯­å¥</h3><h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><figure class="image-box">                <img src="/image/linuxm/while1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxm/while2.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxm/while3.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ vim test.sh</span><br><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">while [ -z $response ] || [ $response != &apos;yes&apos; ] #è‹¥å˜é‡è¾“å…¥ä¸ºç©º æˆ– é yesï¼Œåˆ™ä¸€ç›´è®©ä½ å¾ªç¯è¾“å…¥</span><br><span class="line">do</span><br><span class="line">    read -p &apos;say yes: &apos; response</span><br><span class="line">done</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">say yes: </span><br><span class="line">say yes: d</span><br><span class="line">say yes: yes</span><br><span class="line">[hz@localhost ~]$</span><br></pre></td></tr></table></figure><h4 id="until"><a href="#until" class="headerlink" title="until"></a>until</h4><p>ä¸whileç›¸åçš„ æ˜¯untilï¼Œç”¨æ³•ä¸€æ ·ã€‚</p><h4 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">for file in `ls *.sh`  #ä½¿ç”¨åå¼•å·ï¼Œåˆ—å‡ºç›®å½•ä¸‹æ‰€æœ‰shæ–‡ä»¶ï¼Œèµ‹å€¼ç»™å˜é‡file</span><br><span class="line">do</span><br><span class="line">    cp $file $file-copy #å°†å˜é‡fileçš„æ‰€æœ‰æ–‡ä»¶copyä¸€ä»½</span><br><span class="line">done</span><br><span class="line">[hz@localhost ~]$ ls *.sh</span><br><span class="line">test.sh</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">[hz@localhost ~]$ ls *.sh</span><br><span class="line">test.sh</span><br><span class="line">[hz@localhost ~]$ ls *.sh-copy</span><br><span class="line">test.sh-copy</span><br></pre></td></tr></table></figure><h4 id="seq-é…åˆ-forä½¿ç”¨"><a href="#seq-é…åˆ-forä½¿ç”¨" class="headerlink" title="seq é…åˆ forä½¿ç”¨"></a>seq é…åˆ forä½¿ç”¨</h4><p>seqæ˜¯sequence åºåˆ—çš„æ„æ€ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">for i in `seq 1 5` #äº§ç”Ÿ1åˆ°5çš„åºåˆ—å€¼</span><br><span class="line">do </span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[hz@localhost ~]$ vim test.sh</span><br><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">for i in `seq 1 2 5` #äº§ç”Ÿ1åˆ°5çš„åºåˆ—å€¼,ä¸­é—´é—´éš”2</span><br><span class="line">do </span><br><span class="line">    echo $i</span><br><span class="line">done</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">5</span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><h4 id="ä¸¤ç§å®šä¹‰æ–¹å¼"><a href="#ä¸¤ç§å®šä¹‰æ–¹å¼" class="headerlink" title="ä¸¤ç§å®šä¹‰æ–¹å¼"></a>ä¸¤ç§å®šä¹‰æ–¹å¼</h4><figure class="image-box">                <img src="/image/linuxm/fun.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linuxm/fun1.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">print ()&#123;</span><br><span class="line"> echo hello $1</span><br><span class="line">&#125;</span><br><span class="line">print   # è°ƒç”¨å‡½æ•°ï¼Œæ— ä¼ å‚</span><br><span class="line">print lucy # è°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¼ å‚</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">hello</span><br><span class="line">hello lucy</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°è¿”å›æ–¹å¼ä¸€ï¼šreturn-ä¸"><a href="#å‡½æ•°è¿”å›æ–¹å¼ä¸€ï¼šreturn-ä¸" class="headerlink" title="å‡½æ•°è¿”å›æ–¹å¼ä¸€ï¼šreturn ä¸ $?"></a>å‡½æ•°è¿”å›æ–¹å¼ä¸€ï¼šreturn ä¸ $?</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">print () &#123;</span><br><span class="line">  echo hello $1</span><br><span class="line">  return 1</span><br><span class="line">&#125;</span><br><span class="line">print lily</span><br><span class="line"></span><br><span class="line">echo return value of previous funtion is $? # $?ä»£è¡¨ ä¸Šä¸€æ¬¡å‡½æ•°çš„è¿”å›å€¼</span><br><span class="line">[hz@localhost ~]$ ./test.sh</span><br><span class="line">hello lily</span><br><span class="line">return value of previous funtion is 1</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°è¿”å›æ–¹å¼äºŒï¼šç”¨å‘½ä»¤-å¦‚cat-ä»£æ›¿return"><a href="#å‡½æ•°è¿”å›æ–¹å¼äºŒï¼šç”¨å‘½ä»¤-å¦‚cat-ä»£æ›¿return" class="headerlink" title="å‡½æ•°è¿”å›æ–¹å¼äºŒï¼šç”¨å‘½ä»¤(å¦‚cat)ä»£æ›¿return"></a>å‡½æ•°è¿”å›æ–¹å¼äºŒï¼šç”¨å‘½ä»¤(å¦‚cat)ä»£æ›¿return</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">getlines () &#123;</span><br><span class="line">  cat $1 | wc -l  #$1 getlineså‡½æ•°çš„å…¥å‚ ï¼›æ­¤å¤–catä¹Ÿèµ·åˆ°äº†ä¸Šé¢returnçš„ä½œç”¨</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">linenum=$(getlines $1)  #$1 ä½œä¸ºtest.sh å‘½ä»¤çš„å…¥å‚ï¼› ä½¿ç”¨$() åŒ…å«ï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼›</span><br><span class="line"></span><br><span class="line">echo the files $1 has $linenum lines.</span><br><span class="line">[hz@localhost ~]$ ./test.sh bb.txt</span><br><span class="line">the files bb.txt has 8 lines.</span><br></pre></td></tr></table></figure><h4 id="å˜é‡ä½œç”¨èŒƒå›´"><a href="#å˜é‡ä½œç”¨èŒƒå›´" class="headerlink" title="å˜é‡ä½œç”¨èŒƒå›´"></a>å˜é‡ä½œç”¨èŒƒå›´</h4><p>é»˜è®¤æ¥è¯´ï¼Œä¸€ä¸ªå˜é‡æ˜¯å…¨å±€çš„ï¼Œ<br>è¦å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œ éœ€è¦ç”¨localå…³é”®å­—<br><figure class="image-box">                <img src="/image/linuxm/fun2.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/linuxm/fun3.png" alt title class>                <p></p>            </figure></p><h4 id="é‡è½½å‘½ä»¤"><a href="#é‡è½½å‘½ä»¤" class="headerlink" title="é‡è½½å‘½ä»¤"></a>é‡è½½å‘½ä»¤</h4><p>æˆ‘ä»¬å¯ä»¥ç”¨å‡½æ•°æ¥å®ç°å‘½ä»¤çš„é‡è½½ï¼›<br>ä¹Ÿå°±æ˜¯è¯´æŠŠå‡½æ•°çš„åå­—å–æˆä¸æˆ‘ä»¬é€šå¸¸åœ¨å‘½ä»¤è¡Œç”¨çš„å‘½ä»¤ç›¸åŒçš„åå­—ï¼š<br>å¦‚ä¸‹ï¼Œæˆ‘ä»¬æƒ³é‡è½½lsè¿™ä¸ªå‘½ä»¤ï¼Œæ­¤æ—¶å¯ä»¥ç”¨ commandï¼Œæ³¨æ„å¦‚æœä¸ç”¨commandï¼Œä¼šè®©ç¨‹åºæ— é™å¾ªç¯æ‰§è¡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ cat test.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line">ls ()&#123;</span><br><span class="line">  command ls -lh</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ls</span><br></pre></td></tr></table></figure></p><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><h4 id="ç”Ÿæˆç¼©ç•¥å›¾å¹¶htmlå±•ç¤º"><a href="#ç”Ÿæˆç¼©ç•¥å›¾å¹¶htmlå±•ç¤º" class="headerlink" title="ç”Ÿæˆç¼©ç•¥å›¾å¹¶htmlå±•ç¤º"></a>ç”Ÿæˆç¼©ç•¥å›¾å¹¶htmlå±•ç¤º</h4><p><a href="https://github.com/YeWills/linux-test/tree/master/code/shell/6" target="_blank" rel="noopener">ä»£ç å’Œå¿…è¦çš„ç´ æåœ¨è¿™é‡Œ</a><br>æ³¨æ„ï¼Œè¦å®‰è£…ç¼©ç•¥å›¾æ’ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install ImageMagick</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line"># å¦‚æœå‘½ä»¤å‚æ•°ä¸ºç©º(-z zero)ï¼Œå°±ç”¨é»˜è®¤çš„gallery.html</span><br><span class="line">if [ -z $1 ]</span><br><span class="line">then</span><br><span class="line">    output=&apos;gallery.html&apos;</span><br><span class="line">else</span><br><span class="line">    output=$1</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ç©ºå­—ç¬¦ä¸²æ›¿æ¢æ–‡ä»¶å†…å®¹  &gt;è¾“å‡ºé‡å®šå‘</span><br><span class="line">echo &apos;&apos; &gt; $output</span><br><span class="line"></span><br><span class="line">if [ ! -e thumbnails ]  # å¦‚æœä¸å­˜åœ¨thumbnailsç›®å½•</span><br><span class="line">then</span><br><span class="line">    mkdir thumbnails</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Beginning of HTMLï¼ˆHTML æ–‡ä»¶çš„å¼€å¤´ï¼‰</span><br><span class="line">echo &apos;&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;My Gallery&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;p&gt;&apos; &gt;&gt; $output  #`&gt;&gt;` é‡å®šå‘æ–‡ä»¶æœ«å°¾</span><br><span class="line"></span><br><span class="line">#  `2&gt;` å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œ /dev/nullæ˜¯é»‘æ´ç›®å½•ï¼Œå®Œå…¨ä¸¢å¼ƒ</span><br><span class="line">for image in `ls *.jpg *.png *.jpeg *.gif 2&gt;/dev/null` </span><br><span class="line">do</span><br><span class="line">    convert $image -thumbnail &apos;200x200&gt;&apos; thumbnails/$image  #å‹ç¼©çš„å›¾ç‰‡æ”¾ç½®thumbnails/ç›®å½•ä¸‹</span><br><span class="line">    echo &apos;      &lt;a href=&quot;&apos;$image&apos;&quot;&gt;&lt;img src=&quot;thumbnails/&apos;$image&apos;&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&apos; &gt;&gt; $output</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># End of HTMLï¼ˆHTML æ–‡ä»¶çš„ç»“å°¾ï¼‰</span><br><span class="line">echo &apos;    &lt;/p&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;&apos; &gt;&gt; $output</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼š</span><br><span class="line">./gallery.sh test.html</span><br></pre></td></tr></table></figure><h4 id="ç»Ÿè®¡æ–‡æœ¬å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°"><a href="#ç»Ÿè®¡æ–‡æœ¬å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°" class="headerlink" title="ç»Ÿè®¡æ–‡æœ¬å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°"></a>ç»Ÿè®¡æ–‡æœ¬å†…å­—ç¬¦å‡ºç°çš„æ¬¡æ•°</h4><h5 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h5><p><a href="https://github.com/YeWills/linux-test/tree/master/code/shell/7" target="_blank" rel="noopener">ä»£ç å’Œç´ æ</a><br>æœ¬å‘½ä»¤æ˜¯è¦ç»Ÿè®¡words.txt æ–‡ä»¶å†…è‹±æ–‡å­—æ¯ a-z å‡ºç°çš„æ¬¡æ•°ï¼Œå¹¶ä¸”ä»¥å¦‚ä¸‹æ–¹å¼å±•ç¤ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A - 276526</span><br><span class="line">B - 27652699</span><br><span class="line">C - 27652699</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">if [ -z $1 ] # å¦‚æœå‘½ä»¤å‚æ•°ä¸ºç©º(-z zero)</span><br><span class="line">then</span><br><span class="line">    echo &quot;Please enter the file of dictionary !&quot;</span><br><span class="line">    exit  # é€€å‡ºç¨‹åº</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ ! -e $1 ] # ifåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨çš„å‘½ä»¤ -e exist</span><br><span class="line">then</span><br><span class="line">    echo &quot;Please make sure that the file of dictionary exists !&quot;</span><br><span class="line">    exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Definition of function</span><br><span class="line"># å‡½æ•°å®šä¹‰</span><br><span class="line">statistics () &#123;</span><br><span class="line">  for char in &#123;a..z&#125;  # éå† a åˆ° z å­—ç¬¦</span><br><span class="line">  do</span><br><span class="line">    # &quot;$char - `grep -io &quot;$char&quot; $1`&quot;  åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å­—ç¬¦å¦‚aï¼Œ-i å¿½ç•¥å¤§å°å†™ï¼Œ -o å¯»æ‰¾å‡ºæ‰€æœ‰å­—ç¬¦ï¼Œå¦‚æœä¸åŠ ï¼Œ</span><br><span class="line">    #ä¸€è¡Œä¸­è‹¥æœ‰å¤šä¸ªå­—ç¬¦åŒ¹é…ä¹Ÿåªè®¤ä¸ºæ˜¯æ‰¾åˆ°ä¸€è¡Œ</span><br><span class="line">    # wc -l ç»Ÿè®¡è¡Œæ•° (-l line)</span><br><span class="line">    # tr /a-z/ /A-Z/  træ˜¯è½¬æ¢ï¼Œ å°†å°å†™ a-z è½¬æ¢ ä¸º A-Z å¤§å†™ï¼›</span><br><span class="line">    # &gt;&gt; tmp.txt è¿½åŠ åˆ°ä¸€ä¸ªä¸´æ—¶ç”¨äºå­˜å‚¨çš„æ–‡ä»¶ï¼Œåˆ›é€ æ­¤æ–‡ä»¶ï¼Œåœ¨äºåé¢èƒ½é…åˆsortä½¿ç”¨</span><br><span class="line">    echo &quot;$char - `grep -io &quot;$char&quot; $1 | wc -l`&quot; | tr /a-z/ /A-Z/ &gt;&gt; tmp.txt</span><br><span class="line">  done</span><br><span class="line">  # -r å€’åºæ’åˆ—ï¼Œ -n ç”¨äºå¯¹æ•°å­—æ’åº ï¼Œ -k 2 æŒ‡å®š ç¬¬2åˆ—æ’åº ï¼Œ -t  - æŒ‡å®šåˆ—ä¹‹é—´ä»¥-ä½œä¸ºåˆ†éš”ç¬¦</span><br><span class="line">  sort -rn -k 2 -t - tmp.txt</span><br><span class="line">  rm tmp.txt #ç»Ÿè®¡å®Œåï¼Œtmp.txtå°±ä¸éœ€è¦äº†ï¼Œåˆ é™¤æ‰</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Use of function</span><br><span class="line"># å‡½æ•°ä½¿ç”¨</span><br><span class="line">statistics $1</span><br></pre></td></tr></table></figure><h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼š</span><br><span class="line">./statistics.sh words.txt</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>eslintç¬”è®°</title>
      <link href="/2021/05/09/eslint/"/>
      <url>/2021/05/09/eslint/</url>
      
        <content type="html"><![CDATA[<h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><h3 id="eslint-é…åˆ-vscode-ä½¿ç”¨"><a href="#eslint-é…åˆ-vscode-ä½¿ç”¨" class="headerlink" title="eslint é…åˆ vscode ä½¿ç”¨"></a>eslint é…åˆ vscode ä½¿ç”¨</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>eslintåœ¨vscodeç”Ÿæ•ˆï¼š<br>å®‰è£…eslintæ’ä»¶åœ¨vscodeä¸­ï¼›<br>å¦‚æœç”¨åˆ°airbnbçš„ï¼Œå°±å®‰è£…ç›¸å…³çš„airbnb çš„ node_moduleåŒ…å³å¯ã€‚<br>ä¸ç”¨è®¾ç½®ä»€ä¹ˆsettingã€‚jsonã€‚<br>ä»»æ„æ‰“å¼€ä¸€ä¸ªjsæ–‡ä»¶ï¼Œä¸èƒ½æ˜¯tsæ–‡ä»¶å“¦ï¼Œçœ‹æ˜¯å¦ç”Ÿæ•ˆã€‚</p><h4 id="å¿…é¡»è¦æ‰“å¼€vscodeçš„eslité…ç½®"><a href="#å¿…é¡»è¦æ‰“å¼€vscodeçš„eslité…ç½®" class="headerlink" title="å¿…é¡»è¦æ‰“å¼€vscodeçš„eslité…ç½®"></a>å¿…é¡»è¦æ‰“å¼€vscodeçš„eslité…ç½®</h4><p>æ‰“å¼€vscodeï¼Œç‚¹å‡»ä¸‹é¢è¿›è¡Œeslintè®¾ç½®ï¼Œ<br>å¦‚ä¸‹å›¾æ˜¯è®¾ç½®å¥½çš„ï¼Œæ²¡æœ‰è®¾ç½®å¥½ï¼Œæ˜¯ç¦ç”¨ï¼Œå¯å‚è€ƒ<a href="https://blog.csdn.net/jinlx_/article/details/109381941" target="_blank" rel="noopener">blog</a><br><figure class="image-box">                <img src="/image/blog_flow/pro.jpg" alt title class>                <p></p>            </figure></p><h4 id="è¯¯åŒº"><a href="#è¯¯åŒº" class="headerlink" title="è¯¯åŒº"></a>è¯¯åŒº</h4><p>å¾ˆå¤šäººä»¥ä¸ºeslintè¦è®¾ç½®ä¸€å¤§å †çš„vscodeæ’ä»¶ï¼Œå…¶å®ä¸ç„¶ï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸ªeslintæ’ä»¶å³å¯ã€‚</p><h3 id="ç¦ç”¨è§„åˆ™"><a href="#ç¦ç”¨è§„åˆ™" class="headerlink" title="ç¦ç”¨è§„åˆ™"></a>ç¦ç”¨è§„åˆ™</h3><p>åŸºæœ¬ä¸Šæ‰€æœ‰çš„è§„åˆ™éƒ½å¯ä»¥é€šè¿‡è®¾ç½® å€¼ä¸º 0çš„æ•°ç»„æ¥ç¦ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;no-unused-expressions&quot;: [0]</span><br></pre></td></tr></table></figure></p><h3 id="eslint-ä¸ç”Ÿæ•ˆ"><a href="#eslint-ä¸ç”Ÿæ•ˆ" class="headerlink" title="eslint ä¸ç”Ÿæ•ˆ"></a>eslint ä¸ç”Ÿæ•ˆ</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æƒ³è¦vscodeçš„fix all autoFixable problemï¼›é…ç½®airbnbå eslintä¸ç”Ÿæ•ˆï¼›<br>é¦–å…ˆeslinté™¤äº†ä¸Šé¢è¯´çš„ vscode å¯èƒ½éœ€è¦å®‰è£…linter-eslintå¤–ï¼Œå› ä¸ºç”¨äº† airbnbï¼Œæ‰€æœ‰ä¸€å®šè¦åœ¨å®‰è£…airbnbç›¸å…³çš„ä¸¤ä¸ªnode_module:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint-config-airbnb&quot;: &quot;^17.0.0&quot;,</span><br><span class="line">&quot;eslint-import-resolver-babel-module&quot;: &quot;^4.0.0&quot;,</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶è¿˜è¦å®‰è£…å…¶ä»–ç›¸å…³çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;babel-eslint&quot;: &quot;^8.2.6&quot;,</span><br><span class="line"></span><br><span class="line">&quot;eslint-plugin-import&quot;: &quot;^2.13.0&quot;,</span><br><span class="line">&quot;eslint-plugin-jsx-a11y&quot;: &quot;^6.1.1&quot;,</span><br><span class="line">&quot;eslint-plugin-react&quot;: &quot;^7.10.0&quot;,</span><br><span class="line">&quot;eslint-plugin-react-hooks&quot;: &quot;^3.0.0&quot;,</span><br></pre></td></tr></table></figure></p><p>ä¹‹æ‰€ä»¥åœ¨webpackæœªè¿è¡Œæ—¶ï¼Œeslintèƒ½å¤Ÿèµ·ä½œç”¨ï¼Œä¼°è®¡æ˜¯eslinté»˜è®¤ç›´æ¥é€šè¿‡ â€˜/node_module/eslint-config-airbnb/index.jsâ€™ç­‰çš„æ–¹å¼å¼•ç”¨äº†ç›¸å…³æ–‡ä»¶ï¼Œå¦‚æœè¿™äº›å¼•ç”¨å­˜åœ¨ï¼Œeslintå°†å¼€å¯å®æ—¶ç›‘å¬ã€‚</p><h4 id="å…¶ä»–æƒ…å†µ"><a href="#å…¶ä»–æƒ…å†µ" class="headerlink" title="å…¶ä»–æƒ…å†µ"></a>å…¶ä»–æƒ…å†µ</h4><p>æ³¨æ„çš„æ˜¯ï¼Œvscodeä½¿ç”¨eslintæ—¶ï¼Œå¿…é¡»å®‰è£… linter-eslint æ’ä»¶æ‰èƒ½ç”Ÿæ•ˆï¼Œè£…äº†æ’ä»¶åæ‰èƒ½è¯†åˆ«æ ¹ç›®å½•ä¸‹çš„eslinté…ç½®æ–‡ä»¶ã€‚</p><h4 id="ts-tsxä¸ç”Ÿæ•ˆï¼Œjsç”Ÿæ•ˆ"><a href="#ts-tsxä¸ç”Ÿæ•ˆï¼Œjsç”Ÿæ•ˆ" class="headerlink" title="ts tsxä¸ç”Ÿæ•ˆï¼Œjsç”Ÿæ•ˆ"></a>ts tsxä¸ç”Ÿæ•ˆï¼Œjsç”Ÿæ•ˆ</h4><p>å¦‚æœä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†tsï¼Œå¯èƒ½å¯¹äºts tsxçš„æ–‡ä»¶ï¼Œtsè‡ªå¸¦çš„éªŒè¯è§„åˆ™å°†ä¼˜å…ˆäºeslintï¼Œæ­¤æ—¶eslintå¯èƒ½åœ¨jsæ–‡ä»¶ä¸­ç”Ÿæ•ˆï¼Œtsæ–‡ä»¶ä¸­ä¸ç”Ÿæ•ˆã€‚<br>ä¸è¿‡tsæ–‡ä»¶ä¸­æœ‰tsè‡ªå¸¦çš„éªŒè¯è§„åˆ™ç”Ÿæ•ˆã€‚</p><h4 id="æ²¡æœ‰å®‰è£…prettier"><a href="#æ²¡æœ‰å®‰è£…prettier" class="headerlink" title="æ²¡æœ‰å®‰è£…prettier"></a>æ²¡æœ‰å®‰è£…prettier</h4><p>æ²¡æœ‰å®‰è£…ä¸€ä¸‹ä¸¤ä¸ªä¾èµ–æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œç”¨vscodeçš„æ—¶å€™ï¼Œä½ å¦‚æœæ³¨æ„è§‚å¯Ÿvscodeç»™äºˆçš„é”™è¯¯æç¤ºï¼Œä¼šå‘ç°ï¼Œé”™è¯¯æç¤ºåŸºæœ¬ä¸Šéƒ½æ˜¯prettieræŠ¥é”™çš„ï¼Œå› æ­¤ç›¸å…³çš„åŒ…ä¸å®‰è£…è‚¯å®šä¸ç”Ÿæ•ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint-config-prettier&quot;: &quot;^4.3.0&quot;,</span><br><span class="line"> &quot;eslint-plugin-prettier&quot;: &quot;^3.1.4&quot;,</span><br></pre></td></tr></table></figure><h3 id="eslintc-é…ç½®ä¸package-jsonè”ç³»"><a href="#eslintc-é…ç½®ä¸package-jsonè”ç³»" class="headerlink" title=".eslintc é…ç½®ä¸package.jsonè”ç³»"></a>.eslintc é…ç½®ä¸package.jsonè”ç³»</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line">"eslint": "^5.16.0",</span><br><span class="line">"babel-eslint": "^8.2.3",</span><br><span class="line">"eslint-config-airbnb": "^17.1.0",</span><br><span class="line">"eslint-config-prettier": "^4.3.0",</span><br><span class="line">"eslint-plugin-compat": "^2.2.0",</span><br><span class="line">"eslint-plugin-import": "^2.20.2",</span><br><span class="line">"eslint-plugin-jsx-a11y": "^6.0.3",</span><br><span class="line">"eslint-plugin-prettier": "^3.1.4",</span><br><span class="line">"eslint-plugin-react": "^7.20.0",</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.eslintc</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line">  <span class="attr">"plugins"</span>: [</span><br><span class="line">    <span class="string">"react"</span>, <span class="comment">//å¯¹åº”ä¸Šé¢ eslint-plugin-react</span></span><br><span class="line">    <span class="string">"jsx-a11y"</span>, <span class="comment">//å¯¹åº”ä¸Šé¢ eslint-plugin-jsx-a11y</span></span><br><span class="line">    <span class="string">"import"</span> <span class="comment">//å¯¹åº”ä¸Šé¢ eslint-plugin-import</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"extends"</span>: [</span><br><span class="line">    <span class="string">"airbnb"</span>, <span class="comment">//å¯¹åº”ä¸Šé¢ eslint-config-airbnb</span></span><br><span class="line">    <span class="string">"prettier"</span> <span class="comment">//å¯¹åº”ä¸Šé¢ eslint-config-prettier</span></span><br><span class="line">  ],</span><br></pre></td></tr></table></figure><h3 id="eslintå¯¹webpackåˆ«åæŠ¥é”™"><a href="#eslintå¯¹webpackåˆ«åæŠ¥é”™" class="headerlink" title="eslintå¯¹webpackåˆ«åæŠ¥é”™"></a>eslintå¯¹webpackåˆ«åæŠ¥é”™</h3><p>å®‰è£…æ’ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint-import-resolver-webpack&quot;: &quot;^0.13.0&quot;,</span><br></pre></td></tr></table></figure></p><p>åœ¨.eslintrcä¸­é…ç½®ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">"settings": &#123;</span><br><span class="line">   "import/resolver": &#123;</span><br><span class="line">     "webpack": &#123;</span><br><span class="line">       "config": "./webpack.config.base.js"//è¿™é‡Œå¯¼å…¥webpackä¸­å…³äºåˆ«åçš„é…ç½®</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="å­˜ç–‘airbnb"><a href="#å­˜ç–‘airbnb" class="headerlink" title="å­˜ç–‘airbnb"></a>å­˜ç–‘airbnb</h3><p>åœ¨æˆ‘ç”¨çš„é¡¹ç›®ä¸­ï¼Œè²Œä¼¼ä¸å¿…ç›´æ¥å®‰è£… airbnbåŒ…ï¼Œä¸€èˆ¬éƒ½æ˜¯å®‰è£…â€eslint-config-airbnbâ€åŒ…å°±å¯ä»¥äº†ã€‚å°±å¯ä»¥ç”Ÿæ•ˆeslintäº†ã€‚</p><h2 id="prettier"><a href="#prettier" class="headerlink" title="prettier"></a>prettier</h2><h3 id="åœ¨eslintä¸­ç”Ÿæ•ˆprettier-prettier"><a href="#åœ¨eslintä¸­ç”Ÿæ•ˆprettier-prettier" class="headerlink" title="åœ¨eslintä¸­ç”Ÿæ•ˆprettier/prettier"></a>åœ¨eslintä¸­ç”Ÿæ•ˆprettier/prettier</h3><h4 id="é…ç½®eslit"><a href="#é…ç½®eslit" class="headerlink" title="é…ç½®eslit"></a>é…ç½®eslit</h4><p>ä»£ç æ ¼å¼ã€ç¾è§‚ç¨‹åº¦ è¦é…ç½®prettierï¼Œè¦æƒ³prettierç”Ÿæ•ˆï¼Œå¿…é¡»åœ¨ä¸‹é¢ä¸‰å¤„é…ç½®ï¼š<br>ä¸è¿‡eslintä¸€èˆ¬å¯ä»¥å¯ä»¥é€šè¿‡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line"><span class="string">"plugins"</span>: [</span><br><span class="line">  <span class="string">"react"</span>,</span><br><span class="line">  <span class="string">"jsx-a11y"</span>,</span><br><span class="line">  <span class="string">"import"</span>,</span><br><span class="line">  <span class="string">"prettier"</span><span class="comment">//å¿…é¡»é…ç½®</span></span><br><span class="line">],</span><br><span class="line"><span class="string">"extends"</span>: [</span><br><span class="line">  <span class="string">"airbnb"</span>,</span><br><span class="line">  <span class="string">"prettier"</span><span class="comment">//å¿…é¡»é…ç½®</span></span><br><span class="line">],</span><br><span class="line"><span class="string">"rules"</span>: &#123;</span><br><span class="line">  <span class="string">"prettier/prettier"</span>: <span class="string">"error"</span>,<span class="comment">//å¿…é¡»é…ç½®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸è¿‡eslintä¸€èˆ¬å¯ä»¥å¯ä»¥é€šè¿‡ä¸‹é¢è®¾ç½® ç©ºè¡Œæ§åˆ¶ï¼Œç¼©è¿›è®¾ç½®ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä¸è®¾ç½®prettierï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"parser"</span>: <span class="string">"babel-eslint"</span>,</span><br><span class="line"><span class="string">"plugins"</span>: [</span><br><span class="line">  <span class="string">"react"</span>,</span><br><span class="line">],</span><br><span class="line"><span class="string">"extends"</span>: [</span><br><span class="line">  <span class="string">"airbnb"</span>,</span><br><span class="line">],</span><br><span class="line"><span class="string">"rules"</span>: &#123;</span><br><span class="line">  <span class="string">"indent"</span>: [<span class="string">"warn"</span>, <span class="number">2</span>],</span><br><span class="line">  <span class="string">"no-multiple-empty-lines"</span>: [<span class="string">"warn"</span>, &#123; <span class="string">"max"</span>: <span class="number">2</span>, <span class="string">"maxEOF"</span>: <span class="number">1</span> &#125;],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="è®°å¾—è¦å®‰è£…prettier"><a href="#è®°å¾—è¦å®‰è£…prettier" class="headerlink" title="è®°å¾—è¦å®‰è£…prettier"></a>è®°å¾—è¦å®‰è£…prettier</h4><p>é™¤äº†ä¸Šé¢çš„prettieræ’ä»¶ï¼Œè¿˜è¦è®°å¾—å®‰è£…prettierã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eslint </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxç¬”è®°(ä¹¾)</title>
      <link href="/2021/05/01/linux/"/>
      <url>/2021/05/01/linux/</url>
      
        <content type="html"><![CDATA[<h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="å‘½ä»¤ä¸­åŒå¼•å·çš„å¦™ç”¨"><a href="#å‘½ä»¤ä¸­åŒå¼•å·çš„å¦™ç”¨" class="headerlink" title="å‘½ä»¤ä¸­åŒå¼•å·çš„å¦™ç”¨"></a>å‘½ä»¤ä¸­åŒå¼•å·çš„å¦™ç”¨</h3><p>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep eslint  eslint.md</span><br></pre></td></tr></table></figure></p><p>å½“å¦‚æœè¦æœç´¢ eslint çš„ä½¿ç”¨ ä¸­é—´æœ‰ç©ºæ ¼æ—¶ï¼ŒåŠ ä¸ŠåŒå¼•å·å°±è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;eslint çš„ä½¿ç”¨&quot;  eslint.md</span><br></pre></td></tr></table></figure></p><p>åœ¨linuxä¸­ï¼ŒåŒå¼•å·å¯ç”¨äºå¸¦æœ‰ç©ºæ ¼å†…å®¹çš„æ“ä½œã€‚</p><h3 id="æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…"><a href="#æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…" class="headerlink" title="æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…"></a>æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…</h3><p>æˆ‘ä»¬æ²¡æœ‰å®‰è£…æŸå‘½ä»¤ï¼Œä½†åˆå‘ç”¨ï¼Œä¸çŸ¥é“å®‰è£…å“ªä¸ªå®‰è£…åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -qf /usr/bin/htpasswd</span><br><span class="line">httpd-tools-2.4.6-97.el7.centos.x86_64</span><br><span class="line">[root@localhost ~]# yum install httpd-tools -y</span><br></pre></td></tr></table></figure><h3 id="æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…-1"><a href="#æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…-1" class="headerlink" title="æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…"></a>æŸ¥æ‰¾å‘½ä»¤çš„å®‰è£…åŒ…</h3><p>æˆ‘ä»¬æ²¡æœ‰å®‰è£…æŸå‘½ä»¤ï¼Œä½†åˆå‘ç”¨ï¼Œä¸çŸ¥é“å®‰è£…å“ªä¸ªå®‰è£…åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# rpm -qf /usr/bin/htpasswd</span><br><span class="line">httpd-tools-2.4.6-97.el7.centos.x86_64</span><br><span class="line">[root@localhost ~]# yum install httpd-tools -y</span><br></pre></td></tr></table></figure><h3 id="å®ç”¨å‘½ä»¤"><a href="#å®ç”¨å‘½ä»¤" class="headerlink" title="å®ç”¨å‘½ä»¤"></a>å®ç”¨å‘½ä»¤</h3><h4 id="æŸ¥æ‰¾å ç”¨çš„æ¥å£"><a href="#æŸ¥æ‰¾å ç”¨çš„æ¥å£" class="headerlink" title="æŸ¥æ‰¾å ç”¨çš„æ¥å£"></a>æŸ¥æ‰¾å ç”¨çš„æ¥å£</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# netstat -luntp</span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv-Q Send-Q Local Address           Foreign Address         State                      PID/Program name</span><br><span class="line">tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN                     1148/master</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN                     1269/nginx: master</span><br><span class="line">tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN                     1269/nginx: master</span><br><span class="line">tcp        0      0 0.0.0.0:8082            0.0.0.0:*               LISTEN                     1269/nginx: master</span><br><span class="line">tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN                     986/sshd</span><br><span class="line">tcp6       0      0 ::1:25                  :::*                    LISTEN                     1148/master</span><br><span class="line">tcp6       0      0 :::22                   :::*                    LISTEN                     986/sshd</span><br><span class="line">udp        0      0 127.0.0.1:323           0.0.0.0:*                                          663/chronyd</span><br><span class="line">udp6       0      0 ::1:323                 :::*                                               663/chronyd</span><br><span class="line">[root@localhost ~]# netstat -luntp | grep 80</span><br><span class="line">tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN                     1269/nginx: master</span><br><span class="line">tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN                     1269/nginx: master</span><br><span class="line">tcp        0      0 0.0.0.0:8082            0.0.0.0:*               LISTEN                     1269/nginx: master</span><br></pre></td></tr></table></figure><h4 id="æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ‰€æœ‰pid"><a href="#æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ‰€æœ‰pid" class="headerlink" title="æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ‰€æœ‰pid"></a>æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ‰€æœ‰pid</h4><p>ä»¥ nginxä¸ºä¾‹å­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -aux | grep nginx</span><br><span class="line">nginx      1270  0.0  0.2  57312  2528 ?        S    Jul03   0:00 nginx: worker process</span><br><span class="line">nginx      1271  0.0  0.1  57092  1784 ?        S    Jul03   0:00 nginx: cache manager process</span><br><span class="line">root       1390  0.0  0.0 112812   972 pts/0    R+   00:54   0:00 grep --color=auto nginx</span><br><span class="line">[root@localhost ~]# kill -9 1270 1271</span><br><span class="line">[root@localhost ~]# ps -aux | grep nginx</span><br><span class="line">root       1393  0.0  0.0 112812   972 pts/0    R+   00:54   0:00 grep --color=auto nginx</span><br></pre></td></tr></table></figure></p><h2 id="åŸºç¡€çŸ¥è¯†ä¸€"><a href="#åŸºç¡€çŸ¥è¯†ä¸€" class="headerlink" title="åŸºç¡€çŸ¥è¯†ä¸€"></a>åŸºç¡€çŸ¥è¯†ä¸€</h2><h3 id="è™šæ‹Ÿæœºå®‰è£…centos"><a href="#è™šæ‹Ÿæœºå®‰è£…centos" class="headerlink" title="è™šæ‹Ÿæœºå®‰è£…centos"></a>è™šæ‹Ÿæœºå®‰è£…centos</h3><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><figure class="image-box">                <img src="/image/linux/instal.jpg" alt title class>                <p></p>            </figure><h3 id="è°ƒå‡ºç»ˆç«¯æ–¹æ³•"><a href="#è°ƒå‡ºç»ˆç«¯æ–¹æ³•" class="headerlink" title="è°ƒå‡ºç»ˆç«¯æ–¹æ³•"></a>è°ƒå‡ºç»ˆç«¯æ–¹æ³•</h3><p>æœ‰ä¸¤ç§ç»ˆç«¯ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¸€æ ·çš„ï¼Œä¸€ç§æ˜¯terminalï¼Œä¸€ç§æ˜¯ttyã€‚<br>ttyæ˜¯ çœŸæ­£çš„ç»ˆç«¯ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œåªæœ‰é»‘åº•ç™½å­—çš„å…¨å±å¹•çš„ç»ˆç«¯ï¼Œåªèƒ½é€šè¿‡é”®ç›˜è¾“å…¥ï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºconsole (æ§åˆ¶å°)ï¼›</p><p>Terminal æ˜¯å›¾å½¢æ¨¡å¼çš„ç»ˆç«¯ï¼Œä¸€èˆ¬åœ¨centOSç­‰Linuxå‘è¡Œç‰ˆä¸‹æ—¥å¸¸ä½¿ç”¨</p><h4 id="Terminal-æ¨è"><a href="#Terminal-æ¨è" class="headerlink" title="Terminal(æ¨è)"></a>Terminal(æ¨è)</h4><p>Activities Overview  ç³»ç»Ÿæœç´¢å·¥å…·ï¼Œæœç´¢Terminalã€‚<br><figure class="image-box">                <img src="/image/linux/terminal1.jpg" alt title class>                <p></p>            </figure></p><h4 id="ttyç»ˆç«¯"><a href="#ttyç»ˆç«¯" class="headerlink" title="ttyç»ˆç«¯"></a>ttyç»ˆç«¯</h4><figure class="image-box">                <img src="/image/linux/terminal2.jpg" alt title class>                <p></p>            </figure><h3 id="oscar-oscar-laptop-ä»€ä¹ˆæ„æ€"><a href="#oscar-oscar-laptop-ä»€ä¹ˆæ„æ€" class="headerlink" title="[oscar@oscar-laptop ~ ] $ ä»€ä¹ˆæ„æ€"></a>[oscar@oscar-laptop ~ ] $ ä»€ä¹ˆæ„æ€</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/linux/name1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/name2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/name3.jpg" alt title class>                <p></p>            </figure><h3 id="å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­è¡¨ç¤ºæƒé™çš„å­—ç¬¦"><a href="#å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­è¡¨ç¤ºæƒé™çš„å­—ç¬¦" class="headerlink" title="å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­è¡¨ç¤ºæƒé™çš„å­—ç¬¦"></a>å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­è¡¨ç¤ºæƒé™çš„å­—ç¬¦</h3><p><code>$</code> è¡¨ç¤ºæ™®é€šç”¨æˆ·ï¼Œæœ‰æƒé™çš„é™åˆ¶ï¼›<br><code>#</code> è¡¨ç¤ºè¶…çº§ç”¨æˆ·ï¼Œ ä¹Ÿå°±æ˜¯rootï¼›<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ su</span><br><span class="line">Password: S</span><br><span class="line">[root@localhost hz]<span class="comment"># exit</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">[hz@localhost ~]$</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œsuè¿›å…¥è¶…çº§ç”¨æˆ·ï¼›<br>æ‰§è¡Œexité€€å‡ºè¶…çº§ç”¨æˆ·ã€‚</p><h3 id="å‘½ä»¤è¡ŒæŠ€å·§"><a href="#å‘½ä»¤è¡ŒæŠ€å·§" class="headerlink" title="å‘½ä»¤è¡ŒæŠ€å·§"></a>å‘½ä»¤è¡ŒæŠ€å·§</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><ul><li>Ctrl + r æŸ¥æ‰¾ä½¿ç”¨è¿‡çš„å‘½ä»¤</li><li>Ctrl + a å›åˆ°å‘½ä»¤é¦–å­—ç¬¦</li><li>Ctrl + e å›åˆ°å‘½ä»¤ç»“å°¾</li></ul><h4 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h4><ul><li>pwd å‘½ä»¤ ï¼š æ˜¾ç¤ºå½“å‰ç›®å½•</li><li><p>which å‘½ä»¤æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¯æ‰“å°å‡ºæ­¤å‚æ•°å‘½ä»¤å¯¹åº”çš„ç¨‹åºå®‰è£…ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ which git</span><br><span class="line">/mingw64/bin/git</span><br><span class="line"></span><br><span class="line">$ which node</span><br><span class="line">/c/Program Files/nodejs/node</span><br></pre></td></tr></table></figure></li><li><p>history åˆ—å‡ºä¹‹å‰ä½¿ç”¨è¿‡çš„æ‰€æœ‰å‘½ä»¤ï¼Œ æ­¤æ—¶è¾“å…¥<code>! + index(æ•°å­—)</code> å¯ä»¥æ‰§è¡Œå¯¹åº”å‘½ä»¤</p></li><li><p>ls -a æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼Œ-aåŒ…æ‹¬éšè—çš„</p></li><li><p>cd å‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å›åˆ°çˆ¶èŠ‚ç‚¹</span><br><span class="line">cd ..</span><br><span class="line"># ä¸Šé¢çš„ç‚¹è¡¨ç¤ºç›®å½•ï¼Œ ç¬¬ä¸€ä¸ªç‚¹è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºçˆ¶äº²ç›®å½•ï¼Œå½“è¦å¹³ç§»å¤šä¸ªç›®å½•æ—¶ï¼Œéœ€è¦ç”¨/åˆ†å‰²</span><br><span class="line">cd ../.. #å›é€€ä¸¤ä¸ªç›®å½•</span><br></pre></td></tr></table></figure></li><li><p>du -ah æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°</p></li></ul><h4 id="ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å‘½ä»¤"><a href="#ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å‘½ä»¤" class="headerlink" title="ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å‘½ä»¤"></a>ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å‘½ä»¤</h4><ul><li>cat å’Œ less éƒ½å¯æ˜¾ç¤ºæ–‡ä»¶å†…å®¹<br>cat ä¸€æ¬¡æ€§ç»ˆç«¯ä¸­æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰å†…å®¹ï¼Œ é€‚åˆæ˜¾ç¤ºå°æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat source/_posts/linux.md</span><br><span class="line">cat source/_posts/linux.md -n # -n æ˜¾ç¤ºå†…å®¹æ—¶ï¼ŒåŠ ä¸Šè¡Œå·</span><br></pre></td></tr></table></figure></li></ul><p>å¼ºå¤§çš„ less æŸ¥çœ‹å‘½ä»¤<br>less åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼›<br>æŒ‰ç©ºæ ¼æŸ¥çœ‹ä¸‹ä¸€ä¸ªå±å¹•<br>æŒ‰å›è½¦å¥æŸ¥çœ‹ä¸‹ä¸€è¡Œ<br>æŒ‰ué”®æŸ¥çœ‹å‰è¿›åŠä¸ªå±å¹•<br>æŒ‰qé€€å‡º<br>æŒ‰ = æŸ¥çœ‹å½“å‰æƒ…å†µå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ç›®å‰å¤„äº 1-14è¡Œçš„ä½ç½®ï¼Œæ–‡ä»¶å†…å®¹æ€»å…±238è¡Œï¼› ç›®å‰å çš„å­—ç¬¦175ï¼Œæ€»å­—ç¬¦6686ï¼Œå½“å‰é¡µå æ•´ä¸ªå†…å®¹3%ï¼›</span><br><span class="line">source/_posts/linux.md lines 1-14/238 byte 175/6686 3%  (press RETURN)</span><br></pre></td></tr></table></figure></p><p>æŒ‰hé”®ï¼ŒæŸ¥çœ‹lessçš„å¸®åŠ©æ–‡æ¡£ï¼›<br>æŒ‰/è¿›å…¥æœç´¢æ¨¡å¼</p><ul><li>head æ˜¾ç¤ºæ–‡ä»¶å¼€å¤´</li><li>tail æ˜¾ç¤ºæ–‡ä»¶æœ€å<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">#-n 5 æ˜¾ç¤ºæœ€å5è¡Œï¼›</span><br><span class="line">$ tail -n 5 less source/_posts/linux.md</span><br><span class="line">``` </span><br><span class="line">tailå¦å¤–ä¸€ä¸ªå¼ºå¤§åœ°æ–¹æ˜¯é…åˆ -f ä¸€èµ·ä½¿ç”¨ï¼Œå®æ—¶ç›‘å¬æ–‡ä»¶æœ€æ–°ä¿®æ”¹ï¼š</span><br><span class="line">```s</span><br><span class="line">#-n 5 æ˜¾ç¤ºæœ€å5è¡Œï¼›tailé»˜è®¤æ¯è¿‡1ç§’æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æœ‰æ–°å†…å®¹ï¼Œ</span><br><span class="line">$ tail -f  less source/_posts/linux.md</span><br><span class="line">#-n 5 æ˜¾ç¤ºæœ€å5è¡Œï¼›æ¯éš”4ç§’ç›‘å¬ä¸€æ¬¡</span><br><span class="line">$ tail -f -s 4  less source/_posts/linux.md</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">#### å…¶ä»–å‘½ä»¤</span><br><span class="line"></span><br><span class="line">- touch å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ªç©ºç™½æ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±ä¸åˆ›å»º</span><br><span class="line">å¦‚ä½•åˆ›å»ºä¸€ä¸ªåŒ…å«ç©ºæ ¼æ–‡ä»¶åçš„æ–‡ä»¶ï¼Œä½¿ç”¨ åŒå¼•å·ï¼š</span><br><span class="line">```s</span><br><span class="line">$ touch new_fule  #æ¨è</span><br><span class="line">$ touch &quot;new file&quot;  #ä¸æ¨èå¸¦ç©ºæ ¼çš„æ–‡ä»¶å</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- mkdir åˆ›å»ºç›®å½•</span><br><span class="line">å¯ä½¿ç”¨ -p é€’å½’åˆ›å»ºç›®å½•ç»“æ„ï¼Œæ³¨æ„windowä¸‹çš„linuxå·¥å…·ï¼Œä¸æ”¯æŒ-pã€‚</span><br><span class="line">```s</span><br><span class="line">$ mkdir aa/cc -p</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- cp æ‹·è´æ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">```s</span><br><span class="line">$ cp file file_copy #æ‹·è´fileï¼Œé‡å‘½ä»¤ä¸ºfile_copy</span><br><span class="line">$ cp file aa/file_copy #æ‹·è´fileï¼Œåˆ°ç›®å½•aaä¸‹ï¼Œå‘½ä»¤ä¸ºfile_copy</span><br><span class="line">$ cp -r one one_copy #æ‹·è´ç›®å½•è¦åŠ  -rï¼Œ æ‹·è´ç›®å½•oneï¼Œå¾—åˆ°ç›®å½•one_copyï¼Œé‡Œé¢æ‰€æœ‰æ–‡ä»¶éƒ½è¢«æ‹·è´</span><br><span class="line">``` </span><br><span class="line">é…åˆ é€šé…ç¬¦ * ä½¿ç”¨ï¼Œå¤§å¤§æé«˜æ‹·è´æ•ˆç‡</span><br><span class="line">```s</span><br><span class="line">$ cp *.txt one æŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰txtæ–‡ä»¶æ‹·è´åˆ°oneç›®å½•ä¸‹</span><br><span class="line">$ cp ha* one æŠŠå½“å‰ç›®å½•ä»¥haå¼€å¤´çš„æ–‡ä»¶éƒ½æ‹·è´åˆ°oneç›®å½•ä¸­</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- mv ç§»åŠ¨æ–‡ä»¶/ç›®å½•(ä¹Ÿå¯ç”¨äºé‡å‘½å)</span><br><span class="line">ç”¨æ³•ä¸cpç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œmvæ“ä½œç›®å½•æ—¶ï¼Œä¸éœ€è¦ç”¨é¢å¤–çš„ -få‚æ•°</span><br><span class="line">```s</span><br><span class="line">$ mv newfile one å°†newfileæ–‡ä»¶ç§»åŠ¨åˆ°oneç›®å½•ï¼ŒåŸå…ˆçš„newfileå°†ä¸å­˜åœ¨äºå…ˆå‰ç›®å½•</span><br><span class="line">$ mv one twp å°†one ç›®å½• ç§»åˆ° twpç›®å½•ä¸‹</span><br><span class="line">$ mv *.txt one æŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰txtæ–‡ä»¶ç§»åŠ¨åˆ°oneç›®å½•ä¸‹</span><br><span class="line"># å¾—ç›Šäºmvçš„ç§»åŠ¨æœºåˆ¶ï¼Œå› æ­¤mvä¹Ÿå¯ä»¥ç”¨äºé‡å‘½å</span><br><span class="line">$ mv one twp å°†one ç›®å½• é‡å‘½å ä¸º twp (å‰ææ˜¯twpä¸å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±æ˜¯ç§»åŠ¨äº†)</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- rm åˆ é™¤æ–‡ä»¶å’Œç›®å½•</span><br><span class="line"> - åˆ é™¤æ–‡ä»¶ï¼š</span><br><span class="line">```s</span><br><span class="line">$ rm newfile ç›´æ¥åˆ é™¤æ–‡ä»¶</span><br><span class="line">$ rm -i  newfile  åˆ é™¤ä¹‹å‰ä¼šè¯¢é—®æ˜¯å¦åˆ é™¤</span><br><span class="line">$ rm -f  newfile  å¼ºåˆ¶åˆ é™¤</span><br><span class="line">``` </span><br><span class="line"> - åˆ é™¤ç›®å½•åŠå…¶å†…çš„ä¸€åˆ‡æ–‡ä»¶ï¼š</span><br><span class="line">```s</span><br><span class="line">$ rm -r  one  # åˆ é™¤oneç›®å½•ï¼Œåˆ é™¤ç›®å½•éœ€è¦å¸¦-r</span><br><span class="line">``` </span><br><span class="line">å±é™©çš„æ“ä½œ</span><br><span class="line">```s</span><br><span class="line">$ rm -rf  one   å¼ºåˆ¶åˆ é™¤oneç›®å½•</span><br><span class="line">``` </span><br><span class="line">æ¯ç­åœ°çƒçš„å‘½ä»¤</span><br><span class="line">```s</span><br><span class="line">$ rm -rf  /* æˆ– $ rm -rf  / #ç›´æ¥åˆ é™¤ä½ /æ ¹ç›®å½•ä¸‹çš„æ•´ä¸ªç³»ç»Ÿï¼›</span><br><span class="line">#ä½œä¸ºä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œä¸€èˆ¬linuxç³»ç»Ÿï¼Œåªæœ‰è¶…çº§ç®¡ç†å‘˜æ‰æ‹¥æœ‰æ­¤å‘½ä»¤æƒé™</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">- lnå‘½ä»¤ åˆ›å»ºæ–‡ä»¶/ç›®å½•é“¾æ¥</span><br><span class="line">ä¸€ç§æ˜¯ç‰©ç†é“¾æ¥å’Œç¡¬é“¾æ¥ï¼›</span><br><span class="line">ä¸€ç§æ˜¯ç¬¦å·é“¾æ¥æˆ–è½¯é“¾æ¥(ç±»ä¼¼æ–°å»ºæ–‡ä»¶å¿«æ·æ–¹å¼)</span><br><span class="line">åˆ›å»ºç¡¬é“¾æ¥ ç›´æ¥ç”¨lnå‘½ä»¤ï¼Œä¸åŠ ä»»ä½•å‚æ•°</span><br><span class="line">```s</span><br><span class="line">C:\Users\Administrator\Desktop\test</span><br><span class="line">Î» ln abc.txt aaa.txt</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator\Desktop\test</span><br><span class="line">Î» ls -i #-iå¯ä»¥æŸ¥çœ‹æ–‡ä»¶inodeç </span><br><span class="line">2533274790510393 aaa.txt  1970324837089091 cc/</span><br><span class="line">2533274790510393 abc.txt</span><br><span class="line">#2533274790510393 æ˜¯inodeç </span><br></pre></td></tr></table></figure></li></ul><p>å»ºç«‹ç¡¬é“¾æ¥æ—¶ï¼Œä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸¤ä¸ªæ–‡ä»¶å°±ä¼šåŒæ—¶æ”¹å˜<br>ä¸€æ—¦ä¸¤ä¸ªæ–‡ä»¶é—´æœ‰äº†ç¡¬é“¾æ¥ï¼Œä½ ä¿®æ”¹ä»»æ„ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿®æ”¹çš„æ—¶ç›¸åŒçš„ä¸€å—å†…å®¹ï¼Œ<br>ç¡¬é“¾æ¥æœ‰ä¸ªç¼ºé™·ï¼Œåªèƒ½åˆ›å»ºæ–‡ä»¶ç¡¬é“¾æ¥ï¼Œä¸èƒ½åˆ›å»ºç›®å½•çš„ï¼Œï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å¤æ‚è®¾ç½®ï¼Œæ¥å»ºç«‹ç›®å½•ç¡¬é“¾æ¥ï¼‰<br>ç±»ä¼¼jsä¸­çš„å¯¹è±¡å¼•ç”¨ï¼Œå¯¹è±¡åå¯ä»¥ä¸ä¸€æ ·ï¼Œä½†åªè¦thisæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹ä»»æ„ä¸€ä¸ªå¼•ç”¨ï¼Œå†…å®¹éƒ½åŒæ—¶æ”¹å˜ã€‚<br><figure class="image-box">                <img src="/image/linux/link.jpg" alt title class>                <p></p>            </figure></p><p>è½¯é“¾æ¥ å¯ä»¥æŒ‡å‘æ–‡ä»¶å’Œç›®å½•ï¼Œå¯¹äºç›®å½•ï¼Œä¸€èˆ¬éƒ½ç”¨è½¯é“¾æ¥ã€‚<br>è½¯é“¾æ¥æ‰çœŸæ­£åƒæˆ‘ä»¬windowä¸‹çš„å¿«æ·æ–¹å¼ï¼ŒåŸç†å¾ˆç›¸ä¼¼ï¼›<br>åˆ›å»ºç¡¬é“¾æ¥æ—¶ï¼Œlnä¸å¸¦ä»»ä½•å‚æ•°ï¼Œåˆ›å»ºè½¯é“¾æ¥æ—¶éœ€è¦å¸¦ä¸Š -s å‚æ•°ï¼Œ sæ—¶symbolicç¬¦å·çš„ç¼©å†™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Î» ln -s abc.txt ff.txt #åˆ›å»ºabc.txt çš„ è½¯é“¾æ¥ ff.txt</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linux/link2.jpg" alt title class>                <p></p>            </figure><h4 id="ç”¨æˆ·å’Œæƒé™å‘½ä»¤"><a href="#ç”¨æˆ·å’Œæƒé™å‘½ä»¤" class="headerlink" title="ç”¨æˆ·å’Œæƒé™å‘½ä»¤"></a>ç”¨æˆ·å’Œæƒé™å‘½ä»¤</h4><ul><li>sudo æš‚æ—¶ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™(é’ˆå¯¹æ­¤å‘½ä»¤)</li><li>sudo su ä¸€ç›´ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™ï¼Œ é€€å‡ºè¶…çº§ç”¨æˆ·ï¼Œä½¿ç”¨exitå‘½ä»¤ï¼›</li><li>su - å‘½ä»¤å¯ä»¥ç›´æ¥è¿›å…¥rootçš„å®¶ç›®å½•ï¼›<br>è¶…çº§ç”¨æˆ·æœ‰ä»¥ä¸‹æƒåŠ›å‘½ä»¤ï¼š</li><li>useradd ç”¨äºæ·»åŠ æ–°ç”¨æˆ·</li><li>passwd ç”¨äºä¿®æ”¹ç”¨æˆ·å¯†ç </li><li>userdel ç”¨äºåˆ é™¤ç”¨æˆ·<br>userdel username â€“remove æˆ– userdel username -r  åˆ é™¤ç”¨æˆ·å¹¶ä¸”åˆ é™¤å¯¹åº”ç”¨æˆ·å®¶ç›®å½•ï¼›</li></ul><h4 id="æ–‡ä»¶æƒé™"><a href="#æ–‡ä»¶æƒé™" class="headerlink" title="æ–‡ä»¶æƒé™"></a>æ–‡ä»¶æƒé™</h4><p>å¯é€šè¿‡ ls -l æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨è¯¦æƒ…åŒ…å«æƒé™ä¿¡æ¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ls -l file</span><br><span class="line">-rw-rw-r--</span><br><span class="line">ä»å·¦å¾€å³è§£é‡Šï¼š</span><br><span class="line">-è¯´æ˜æ˜¯æ–‡ä»¶ï¼Œå¦‚æœæ˜¯då°±æ˜¯ç›®å½•ï¼Œå¦‚æœæ˜¯lå°±æ˜¯linkï¼›</span><br><span class="line">rw- æ–‡ä»¶çš„æ‰€æœ‰è€…å¯¹æ–‡ä»¶æœ‰è¯»rã€å†™wæƒé™ï¼Œ-æ²¡æœ‰è¿è¡Œæƒé™ï¼ˆ-è¯´æ˜æ²¡æœ‰ç›¸å…³æƒé™ï¼‰ï¼›</span><br><span class="line">æ²¡æœ‰è¿è¡Œæƒé™ä¹Ÿå¥½ç†è§£ï¼Œæ™®é€šæ–‡ä»¶ï¼Œé»˜è®¤æ²¡æœ‰å¯æ‰§è¡Œå±æ€§ï¼›</span><br><span class="line">rw- è¡¨é¢æ–‡ä»¶æ‰€åœ¨çš„ç¾¤ç»„çš„å…¶ä»–ç”¨æˆ·ï¼Œå¯¹æ–‡ä»¶æœ‰è¯»å†™æƒé™ï¼Œæ²¡æœ‰è¿è¡Œæƒé™ï¼›</span><br><span class="line">r-- è¡¨ç¤ºå…¶ä»–ç”¨æˆ·(é™¤å»æ–‡ä»¶æ‰€åœ¨ç”¨æˆ·ç¾¤ç»„çš„ç”¨æˆ·)åªæœ‰è¯»æ­¤æ–‡ä»¶æƒé™ï¼›</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linux/ah.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/ah1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/ah2.jpg" alt title class>                <p></p>            </figure><ul><li>chmod change mode çš„ç¼©å†™ï¼Œæ”¹å˜æ–‡ä»¶æƒé™å‘½ä»¤ã€‚</li></ul><h3 id="linux-ä¸-windows"><a href="#linux-ä¸-windows" class="headerlink" title="linux ä¸ windows"></a>linux ä¸ windows</h3><h4 id="ä¸€åˆ‡çš†æ–‡ä»¶"><a href="#ä¸€åˆ‡çš†æ–‡ä»¶" class="headerlink" title="ä¸€åˆ‡çš†æ–‡ä»¶"></a>ä¸€åˆ‡çš†æ–‡ä»¶</h4><p>è¿™æ˜¯Linuxä¸Windowsæœ€å¤§åŒºåˆ«ï¼›</p><h4 id="ä¸‡æœ‰ä¹‹æºï¼Œæ–œæ é’å¹´"><a href="#ä¸‡æœ‰ä¹‹æºï¼Œæ–œæ é’å¹´" class="headerlink" title="ä¸‡æœ‰ä¹‹æºï¼Œæ–œæ é’å¹´"></a>ä¸‡æœ‰ä¹‹æºï¼Œæ–œæ é’å¹´</h4><p>linuxæœ‰ä¸”åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œå°±æ˜¯ / æ–œæ ï¼Œæ ¹ç›®å½•å°±æ˜¯Linuxæœ€é¡¶å±‚çš„ç›®å½•ã€‚</p><h4 id="windowåæ–œæ -ä¸linuxæ–œæ†"><a href="#windowåæ–œæ -ä¸linuxæ–œæ†" class="headerlink" title="windowåæ–œæ /ä¸linuxæ–œæ†"></a>windowåæ–œæ /ä¸linuxæ–œæ†</h4><ul><li><p>window æ–‡ä»¶ç›®å½•ä»¥åæ–œæ ï¼š</p><figure class="image-box">                <img src="/image/linux/unsame.jpg" alt title class>                <p></p>            </figure></li><li><p>linux æ–‡ä»¶ç›®å½•ä»¥æ–œæ ï¼š<br>linuxä¸­ç”¨æ–œæ /æ¥æ ‡æ˜ç›®å½•çš„å±‚çº§ä¸åŒ…å«å…³ç³»</p><figure class="image-box">                <img src="/image/linux/unsame1.jpg" alt title class>                <p></p>            </figure></li></ul><h4 id="æ ¹ç›®å½•ç›´å±å­ç›®å½•"><a href="#æ ¹ç›®å½•ç›´å±å­ç›®å½•" class="headerlink" title="æ ¹ç›®å½•ç›´å±å­ç›®å½•"></a>æ ¹ç›®å½•ç›´å±å­ç›®å½•</h4><ul><li><p>window</p><figure class="image-box">                <img src="/image/linux/win.jpg" alt title class>                <p></p>            </figure></li><li><p>linux<br>è§ã€Šæ ¹ç›®å½•ç›´å±å­ç›®å½•ã€‹</p></li></ul><h3 id="linuxæ ¹ç›®å½•ç›´å±å­ç›®å½•"><a href="#linuxæ ¹ç›®å½•ç›´å±å­ç›®å½•" class="headerlink" title="linuxæ ¹ç›®å½•ç›´å±å­ç›®å½•"></a>linuxæ ¹ç›®å½•ç›´å±å­ç›®å½•</h3><h4 id="é€šè¿‡å‘½ä»¤æŸ¥çœ‹ç›®å½•"><a href="#é€šè¿‡å‘½ä»¤æŸ¥çœ‹ç›®å½•" class="headerlink" title="é€šè¿‡å‘½ä»¤æŸ¥çœ‹ç›®å½•"></a>é€šè¿‡å‘½ä»¤æŸ¥çœ‹ç›®å½•</h4><p><a href="https://linuxtoy.org/archives/linux-file-structure.html" target="_blank" rel="noopener">æ›´å¤šè¯¦ç»†å‚è€ƒè¿™é‡Œ</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ls / æ˜¯æŸ¥çœ‹ æ ¹ç›®å½•</span><br><span class="line">[hz@localhost ~]$ ls /</span><br><span class="line">bin   dev  home  lib64  mnt  proc  run   srv  tmp  var</span><br><span class="line">boot  etc  lib   media  opt  root  sbin  sys  usr</span><br></pre></td></tr></table></figure><h4 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h4><ul><li>bin è‹±è¯­binaryçš„ç¼©å†™ï¼Œè¡¨ç¤º â€œäºŒè¿›åˆ¶æ–‡ä»¶â€</li><li>æˆ‘ä»¬çŸ¥é“å¯æ‰§è¡Œæ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„</li><li>binç›®å½•åŒ…å«äº†ä¼šè¢«æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„å¯æ‰§è¡Œç¨‹åº</li></ul><h4 id="boot"><a href="#boot" class="headerlink" title="boot"></a>boot</h4><ul><li>è‹±è¯­bootè¡¨ç¤º â€œå¯åŠ¨â€</li><li>ç›®å½•åŒ…å«ä¸linuxå¯åŠ¨å¯†åˆ‡ç›¸å…³çš„æ–‡ä»¶</li></ul><h4 id="dev"><a href="#dev" class="headerlink" title="dev"></a>dev</h4><ul><li>è‹±è¯­ deviceç¼©å†™ï¼Œè¡¨ç¤º è®¾å¤‡</li><li>åŒ…å«å¤–è®¾ï¼Œå®ƒé‡Œé¢çš„å­ç›®å½•ï¼Œæ¯ä¸€ä¸ªå¯¹åº”ä¸€ä¸ªå¤–è®¾</li><li>æ¯”å¦‚ä»£è¡¨æˆ‘ä»¬çš„å…‰ç›˜é©±åŠ¨å™¨çš„æ–‡ä»¶å°±ä¼šå‡ºç°åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢</li></ul><h4 id="etc"><a href="#etc" class="headerlink" title="etc"></a>etc</h4><ul><li>æœ‰ç‚¹ä¸èƒ½é¡¾åæ€ä¹‰äº†ï¼Œetcæ˜¯æ³•è¯­ et ceteraçš„ç¼©å†™</li><li>ç¿»è¯‘æˆè‹±è¯­å°±æ˜¯ and so onï¼Œ è¡¨ç¤º ç­‰ç­‰ï¼›</li><li>etc ç›®å½•åŒ…å«ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶</li></ul><p>ä¸ºä»€ä¹ˆåœ¨/etcä¸‹é¢å­˜æ”¾é…ç½®æ–‡ä»¶</p><ul><li>æŒ‰ç…§åŸå§‹çš„unixè¯´æ³•ï¼Œè¿™ä¸‹é¢æ”¾çš„éƒ½æ˜¯ä¸€å †é›¶é›¶ç¢ç¢çš„ä¸œè¥¿ï¼Œå°±å«etcå¥½äº†ï¼Œæ˜¯å†å²é—ç•™å› ç´ ï¼Œæ‰€ä»¥å«etcã€‚<br>ç›®å‰ï¼Œå¤§å¤šå…¨å±€çš„é…ç½®éƒ½æ˜¯æ”¾åœ¨ etcä¸‹ï¼Œå¦‚ /etc/hostsæ–‡ä»¶ç­‰ç­‰ï¼›</li></ul><h4 id="home"><a href="#home" class="headerlink" title="home"></a>home</h4><ul><li>è‹±è¯­homeè¡¨ç¤º å®¶ï¼Œ ç”¨æˆ·çš„ç§äººç›®å½•ï¼›</li><li>åœ¨homeç›®å½•ä¸­ï¼Œæˆ‘ä»¬æ”¾ç½®ç§äººçš„æ–‡ä»¶ï¼›</li><li>ç±»ä¼¼Windowsä¸­çš„documentsæ–‡ä»¶å¤¹ï¼Œä¹Ÿå« â€œæˆ‘çš„æ–‡æ¡£â€</li><li>linux ä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨homeç›®å½•ä¸‹æœ‰ä¸€ä¸ªç§äººç›®å½•</li><li>(é™¤äº†å¤§ç®¡å®¶ç”¨æˆ·root)</li><li>rootç”¨æˆ·æ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œæ¯”è¾ƒä»»æ€§ï¼Œæ ¹æ™®é€šç”¨æˆ·ä¸ä½åœ¨ä¸€èµ·</li><li>å‡å¦‚æˆ‘çš„ç”¨æˆ·åæ˜¯oscarï¼Œé‚£ä¹ˆæˆ‘çš„ç§äººç›®å½•å°±æ˜¯ <code>/home/oscar</code></li><li>å‡å¦‚å¦å¤–ä¸€ä¸ªç”¨æˆ·å«johnï¼Œé‚£ä¹ˆä»–çš„ç§äººç›®å½•å°±æ˜¯ <code>/home/john</code><h4 id="lib"><a href="#lib" class="headerlink" title="lib"></a>lib</h4></li><li>è‹±è¯­libraryçš„ç¼©å†™ï¼Œè¡¨ç¤º åº“</li><li>ç›®å½•åŒ…å«è¢«ç¨‹åºæ‰€è°ƒç”¨çš„åº“æ–‡ä»¶ï¼Œä¾‹å¦‚.soç»“å°¾çš„æ–‡ä»¶</li><li>Windows ä¸‹è¿™æ ·çš„åº“æ–‡ä»¶åˆ™æ˜¯ä»¥.dllç»“å°¾</li></ul><h4 id="media"><a href="#media" class="headerlink" title="media"></a>media</h4><ul><li>è‹±è¯­ media è¡¨ç¤º åª’ä½“</li><li>å¯ç§»åŠ¨çš„å¤–è®¾ï¼ˆUSBç›˜ï¼ŒSDå¡ï¼ŒDVD,å…‰ç›˜ ç­‰ç­‰ï¼‰æ’å…¥ç”µè„‘æ—¶</li><li>linuxå¯ä»¥è®©æˆ‘ä»¬é€šè¿‡mediaçš„å­ç›®å½•æ¥è®¿é—®è¿™äº›å¤–è®¾ä¸­çš„å†…å®¹</li></ul><h4 id="mnt"><a href="#mnt" class="headerlink" title="mnt"></a>mnt</h4><ul><li>mountçš„ç¼©å†™ï¼Œè¡¨ç¤º æŒ‚è½½</li><li>æœ‰ç‚¹ç±»ä¼¼ mediaç›®å½•ï¼Œä½†ä¸€èˆ¬ç”¨äºä¸´æ—¶æŒ‚è½½ä¸€äº›è£…ç½®</li></ul><h4 id="opt"><a href="#opt" class="headerlink" title="opt"></a>opt</h4><ul><li>å¯é€‰çš„åº”ç”¨è½¯ä»¶åŒ…</li><li>ç”¨äºå®‰è£…å¤šæ•°ç¬¬ä¸‰æ–¹è½¯ä»¶å’Œæ’ä»¶<h4 id="root"><a href="#root" class="headerlink" title="root"></a>root</h4></li><li>æ ¹ çš„æ„æ€</li><li>è¶…çº§ç”¨æˆ· root çš„å®¶ç›®å½•</li><li>ä¸€èˆ¬çš„ç”¨æˆ·çš„å®¶ç›®å½•ä½äº /homeä¸‹ï¼Œrootç”¨æˆ·æ˜¯ä¸ªä¾‹å¤–</li></ul><h4 id="sbin"><a href="#sbin" class="headerlink" title="sbin"></a>sbin</h4><ul><li>system binaryçš„ç¼©å†™ï¼Œè¡¨ç¤º ç³»ç»ŸäºŒè¿›åˆ¶æ–‡ä»¶</li><li>æ¯”binç›®å½•å¤šäº†ä¸€ä¸ªå‰ç¼€ system</li><li>sbinç›®å½•åŒ…å«ç³»ç»Ÿçº§çš„é‡è¦å¯æ‰§è¡Œç¨‹åº</li></ul><h4 id="srv"><a href="#srv" class="headerlink" title="srv"></a>srv</h4><ul><li>service çš„ç¼©å†™ï¼Œè¡¨ç¤º æœåŠ¡</li><li>åŒ…å«ä¸€äº›ç½‘ç»œæœåŠ¡å¯åŠ¨ä¹‹åæ‰€éœ€å–ç”¨çš„æ•°æ®</li></ul><h4 id="tmp"><a href="#tmp" class="headerlink" title="tmp"></a>tmp</h4><ul><li>ä¸´æ—¶çš„ï¼Œæ™®é€šç”¨æˆ·å’Œç¨‹åºå­˜æ”¾ä¸´æ—¶æ–‡ä»¶çš„åœ°æ–¹</li></ul><h4 id="usr"><a href="#usr" class="headerlink" title="usr"></a>usr</h4><ul><li>è‹±è¯­ Unix Software Resource çš„ç¼©å†™ï¼Œè¡¨ç¤º Unixæ“ä½œç³»ç»Ÿè½¯ä»¶èµ„æº(ç±»ä¼¼etcï¼Œä¹Ÿæ˜¯å†å²é—ç•™çš„å‘½å)</li><li>æ˜¯æœ€åºå¤§çš„ç›®å½•ä¹‹ä¸€</li><li>ç±»ä¼¼Windowsä¸­çš„<code>C:\windows</code> å’Œ <code>C:\Program Files</code> è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹çš„é›†åˆ</li><li>usrç›®å½•é‡Œå®‰è£…äº†å¤§éƒ¨åˆ†ç”¨æˆ·è¦è°ƒç”¨çš„ç¨‹åº</li></ul><h4 id="var"><a href="#var" class="headerlink" title="var"></a>var</h4><ul><li>variable çš„ç¼©å†™ï¼Œè¡¨ç¤º åŠ¨æ€çš„ å¯å˜çš„</li><li>é€šå¸¸åŒ…å«ç¨‹åºçš„æ•°æ®ï¼Œæ¯”å¦‚logæ—¥å¿—æ–‡ä»¶</li></ul><h4 id="ç±»Unixæ“ä½œç³»ç»Ÿæ˜¯ç±»ä¼¼çš„"><a href="#ç±»Unixæ“ä½œç³»ç»Ÿæ˜¯ç±»ä¼¼çš„" class="headerlink" title="ç±»Unixæ“ä½œç³»ç»Ÿæ˜¯ç±»ä¼¼çš„"></a>ç±»Unixæ“ä½œç³»ç»Ÿæ˜¯ç±»ä¼¼çš„</h4><p>ä»¥ä¸Šç›®å½•åˆ—è¡¨å½¢å¼ï¼Œåœ¨ç±»Unixæ“ä½œç³»ç»Ÿæ˜¯ç±»ä¼¼çš„ï¼Œå¦‚macOSçš„ç›®å½•ç»“æ„ä¹Ÿæ˜¯ä»æ ¹ç›®å½•/å¼€å§‹çš„ã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="å¯åŠ¨ç”µè„‘è¿‡ç¨‹"><a href="#å¯åŠ¨ç”µè„‘è¿‡ç¨‹" class="headerlink" title="å¯åŠ¨ç”µè„‘è¿‡ç¨‹"></a>å¯åŠ¨ç”µè„‘è¿‡ç¨‹</h4><figure class="image-box">                <img src="/image/linux/start.png" alt title class>                <p></p>            </figure><h4 id="GNUä¸linux"><a href="#GNUä¸linux" class="headerlink" title="GNUä¸linux"></a>GNUä¸linux</h4><p>linuxçš„å®˜æ–¹ç§°è°“åº”è¯¥æ˜¯â€œGNU/Linuxâ€ï¼Œä¸€èˆ¬ç®€ç§°Linuxï¼›<br>GNUé¡¹ç›®+Linuxï¼ˆç³»ç»Ÿå†…æ ¸ï¼‰= GNU/Linux å®Œæ•´çš„æ“ä½œç³»ç»Ÿ<br><figure class="image-box">                <img src="/image/linux/op.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸‰å¤§æ“ä½œç³»ç»Ÿçš„å…³ç³»"><a href="#ä¸‰å¤§æ“ä½œç³»ç»Ÿçš„å…³ç³»" class="headerlink" title="ä¸‰å¤§æ“ä½œç³»ç»Ÿçš„å…³ç³»"></a>ä¸‰å¤§æ“ä½œç³»ç»Ÿçš„å…³ç³»</h4><figure class="image-box">                <img src="/image/linux/line.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/line1.jpg" alt title class>                <p></p>            </figure><h4 id="ä¸åŒçš„Linuxå‘è¡Œç‰ˆ"><a href="#ä¸åŒçš„Linuxå‘è¡Œç‰ˆ" class="headerlink" title="ä¸åŒçš„Linuxå‘è¡Œç‰ˆ"></a>ä¸åŒçš„Linuxå‘è¡Œç‰ˆ</h4><figure class="image-box">                <img src="/image/linux/version.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/version1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/version2.jpg" alt title class>                <p></p>            </figure><h3 id="å‘½ä»¤è¡Œå‚æ•°èµ‹å€¼"><a href="#å‘½ä»¤è¡Œå‚æ•°èµ‹å€¼" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°èµ‹å€¼"></a>å‘½ä»¤è¡Œå‚æ•°èµ‹å€¼</h3><p>çŸ­å‚æ•°èµ‹å€¼ï¼Œé€šå¸¸æ˜¯è¿™æ ·çš„ï¼š command -p 10</p><p>é•¿å‚æ•°èµ‹å€¼ï¼Œ é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š  command â€“parameter=10</p><h3 id="è½¯ä»¶ä¸å®‰è£…"><a href="#è½¯ä»¶ä¸å®‰è£…" class="headerlink" title="è½¯ä»¶ä¸å®‰è£…"></a>è½¯ä»¶ä¸å®‰è£…</h3><h4 id="è½¯ä»¶åŒ…"><a href="#è½¯ä»¶åŒ…" class="headerlink" title="è½¯ä»¶åŒ…"></a>è½¯ä»¶åŒ…</h4><p>Windowsä¸‹çš„å®‰è£…ç¨‹åºï¼Œåœ¨centos ä¸‹ç§°ä¹‹ä¸º è½¯ä»¶åŒ…ï¼Œ è‹±è¯­ packageï¼›<br>ä¸€ä¸ªè½¯ä»¶åŒ…å…¶å®æ˜¯è½¯ä»¶çš„æ‰€æœ‰æ–‡ä»¶çš„å‹ç¼©åŒ…ï¼›<br>ä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼ŒåŒ…å«äº†å®‰è£…è½¯ä»¶çš„æ‰€æœ‰æŒ‡ä»¤ï¼›<br>åœ¨ red hat ä¸€æ—é‡Œï¼Œè½¯ä»¶åŒ…çš„åç¼€æ˜¯ .rpm;<br>rpm æ˜¯ red hat package manager çš„ç¼©å†™ï¼Œè¡¨ç¤ºçº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼›<br>centos ä½œä¸º red hat ä¸€æ—çš„ä¸€å‘˜ï¼Œä¹Ÿæ˜¯ç”¨ .rpm çš„è½¯ä»¶åŒ…ï¼›</p><p>ç±»ä¼¼çš„ Debian å®¶æ—çš„è½¯ä»¶åŒ… åç¼€ä¸º .deb ã€‚</p><p>linux å®‰è£…ç¨‹åºçš„ç‰¹ç‚¹ï¼Œlinux åˆ›å»ºä¸€ä¸ªé›†ä¸­å­˜æ”¾è½¯ä»¶çš„åœ°æ–¹ï¼›</p><h4 id="åˆ‡æ¢è½¯ä»¶ä»“åº“"><a href="#åˆ‡æ¢è½¯ä»¶ä»“åº“" class="headerlink" title="åˆ‡æ¢è½¯ä»¶ä»“åº“"></a>åˆ‡æ¢è½¯ä»¶ä»“åº“</h4><p>centos ç³»ç»Ÿä½¿ç”¨çš„è½¯ä»¶ä»“åº“çš„åˆ—è¡¨æ˜¯è®°å½•åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š<br><code>/etc/yum.repos.d/CentOS-Base.repo</code>;<br>è¿™ä¸ªæ–‡ä»¶æ˜¯ç³»ç»Ÿæ–‡ä»¶ï¼Œåªèƒ½è¢«rootç”¨æˆ·ä¿®æ”¹ï¼›</p><p>centoså®˜æ–¹çš„æºåˆ—è¡¨ï¼š<br><a href="https://www.centos.org/download/mirrors/" target="_blank" rel="noopener">https://www.centos.org/download/mirrors/</a></p><p>åˆ‡æ¢æºçš„æ­¥éª¤å‚è€ƒè¿™ç¯‡åšå®¢ï¼š<br><a href="https://blog.csdn.net/inslow/article/details/54177191" target="_blank" rel="noopener">è¯¦ç»†å¯å‚è€ƒ</a>ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä»http://mirrors.aliyun.com/repo/Centos-5.repoä¸‹è½½æ–‡ä»¶ï¼Œæ”¾åˆ°/etc/yum.repos.d/ç›®å½•ä¸‹ï¼ŒæŠŠè¯¥æ–‡ä»¶é‡å‘½åä¸ºCentOS-Base.repo</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…è½¯ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š"><a href="#å®‰è£…è½¯ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š" class="headerlink" title="å®‰è£…è½¯ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š"></a>å®‰è£…è½¯ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š</h4><ul><li>é€šè¿‡å›¾å½¢ç•Œé¢ï¼š<figure class="image-box">                <img src="/image/linux/app.jpg" alt title class>                <p></p>            </figure></li><li>é€šè¿‡å‘½ä»¤ç»ˆç«¯å®‰è£…ï¼Œæ­¤æ—¶ç”¨åˆ°yumå®‰è£…(æ¨è)</li></ul><p>yumæ˜¯centosä¸­çš„é»˜è®¤åŒ…ç®¡ç†å·¥å…·ï¼Œä¹Ÿç”¨äºred hat ä¸€æ—ï¼›<br>yum å¸¸ç”¨å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum update ç”¨äº æ›´æ–°è½¯ä»¶åŒ…ï¼›</span><br><span class="line">yum update xxx;</span><br><span class="line">yum search xxx;</span><br><span class="line">yum install xxx </span><br><span class="line">yum remove xxx</span><br></pre></td></tr></table></figure></p><ul><li>ä¸‹è½½ æœ¬åœ°.rpm è½¯ä»¶åŒ…ï¼Œå¯ä»¥ç”¨rpmå‘½ä»¤æ¥å®‰è£…ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm -i *.rpm  ç”¨äºå®‰è£…ï¼›</span><br><span class="line">sudo rpm -e åŒ…å ç”¨äºå¸è½½ï¼›</span><br><span class="line"> æœ¬åœ°.rpm è½¯ä»¶åŒ…ï¼Œä¹Ÿå¯ä»¥ç”¨yumæ¥å®‰è£…</span><br><span class="line"> sudo yum localinstall *.rpm  ç”¨äºå®‰è£…ï¼›</span><br><span class="line"> sudo yum remove åŒ…å ç”¨äºå¸è½½ï¼›</span><br></pre></td></tr></table></figure></li></ul><h3 id="RTFM-é˜…è¯»é‚£è¯¥æ­»çš„æ‰‹å†Œ"><a href="#RTFM-é˜…è¯»é‚£è¯¥æ­»çš„æ‰‹å†Œ" class="headerlink" title="RTFM é˜…è¯»é‚£è¯¥æ­»çš„æ‰‹å†Œ"></a>RTFM é˜…è¯»é‚£è¯¥æ­»çš„æ‰‹å†Œ</h3><p>RTFM ï¼šread the fucking manual ç¼©å†™ï¼›</p><h4 id="man-å‘½ä»¤"><a href="#man-å‘½ä»¤" class="headerlink" title="man å‘½ä»¤"></a>man å‘½ä»¤</h4><p>man å‘½ä»¤ manual ç¼©å†™<br>åæ¥ä½ æƒ³è¦æ˜¾ç¤ºä½¿ç”¨æ‰‹å†Œçš„å‘½ä»¤ï¼Œå‡½æ•° ç­‰ç­‰ï¼›<br>æ­¤å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»Ÿä¸­è‡ªå¸¦çš„å„ç§å‚è€ƒæ‰‹å†Œï¼›<br>å…·ä½“å¯æŸ¥å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li>å¯æ‰§è¡Œç¨‹åºæˆ–shellå‘½ä»¤</li><li>ç³»ç»Ÿè°ƒç”¨ï¼ˆlinux å†…æ ¸æä¾›çš„å‡½æ•°ï¼‰</li><li>åº“è°ƒç”¨ï¼ˆç¨‹åºåº“ä¸­çš„å‡½æ•°ï¼‰</li><li>æ–‡ä»¶ï¼ˆä¾‹å¦‚ /etc/passwdï¼‰</li><li>ç‰¹æ®Šæ–‡ä»¶ï¼ˆé€šå¸¸åœ¨/devä¸‹ï¼‰</li><li>æ‚é¡¹ï¼ˆæ¯”å¦‚manï¼ˆ7ï¼‰ï¼Œgroffï¼ˆ7ï¼‰ï¼‰</li><li>ç³»ç»Ÿç®¡ç†å‘½ä»¤ï¼ˆé€šå¸¸åªèƒ½è¢«rootç”¨æˆ·ä½¿ç”¨ï¼‰</li><li>å†…æ ¸å­ç¨‹åº</li></ul><h4 id="å®‰è£…manå‘½ä»¤"><a href="#å®‰è£…manå‘½ä»¤" class="headerlink" title="å®‰è£…manå‘½ä»¤"></a>å®‰è£…manå‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y man-pages</span><br></pre></td></tr></table></figure><p>æ‰‹å†Œä¸å…¨ï¼Œæ›´æ–°manæ•°æ®åº“<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mandb</span><br></pre></td></tr></table></figure></p><h4 id="manå‘½ä»¤ä½¿ç”¨"><a href="#manå‘½ä»¤ä½¿ç”¨" class="headerlink" title="manå‘½ä»¤ä½¿ç”¨"></a>manå‘½ä»¤ä½¿ç”¨</h4><p>è¾“å…¥ man æ•°å­— å‘½ä»¤/å‡½æ•° ï¼Œ å¯ä»¥æŸ¥åˆ°ç›¸å…³çš„å‘½ä»¤å’Œå‡½æ•°ï¼›<br>å¦‚æœä¸åŠ æ•°å­—ï¼Œmané»˜è®¤ä»æ•°å­—è¾ƒå°çš„æ‰‹å†Œä¸­å¯»æ‰¾ç›¸å…³å‘½ä»¤å’Œå‡½æ•°ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">man rand</span><br><span class="line">man 3 rand</span><br><span class="line">random()</span><br></pre></td></tr></table></figure></p><h4 id="æ‰‹å†Œä¸­æœç´¢"><a href="#æ‰‹å†Œä¸­æœç´¢" class="headerlink" title="æ‰‹å†Œä¸­æœç´¢"></a>æ‰‹å†Œä¸­æœç´¢</h4><p>/é”® ï¼š å®ç°æœç´¢ï¼Œå’Œä¹‹å‰åœ¨lesså‘½ä»¤ä¸­åŠŸèƒ½ç±»ä¼¼ï¼›</p><p>åœ¨è°·æ­Œæˆ–ç™¾åº¦ ç›´æ¥æœç´¢ man ls ä¹Ÿå¯ä»¥å‡ºæ¥æ‰‹å†Œçš„å†…å®¹ï¼›</p><h4 id="apropos-æŸ¥æ‰¾å‘½ä»¤"><a href="#apropos-æŸ¥æ‰¾å‘½ä»¤" class="headerlink" title="apropos æŸ¥æ‰¾å‘½ä»¤"></a>apropos æŸ¥æ‰¾å‘½ä»¤</h4><p>å¯é€šè¿‡ apropos sound æŸ¥æ‰¾ç›¸å…³å‘½ä»¤ å¦‚ amixer éŸ³é‡è°ƒèŠ‚å™¨ï¼›</p><h4 id="whatis-å‘½ä»¤-manç²¾ç®€ç‰ˆ"><a href="#whatis-å‘½ä»¤-manç²¾ç®€ç‰ˆ" class="headerlink" title="whatis å‘½ä»¤(manç²¾ç®€ç‰ˆ)"></a>whatis å‘½ä»¤(manç²¾ç®€ç‰ˆ)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whatis ls</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç”¨ï¼š<br>-h æˆ– â€“help</p><h3 id="æŸ¥æ‰¾æ–‡ä»¶"><a href="#æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="æŸ¥æ‰¾æ–‡ä»¶"></a>æŸ¥æ‰¾æ–‡ä»¶</h3><h4 id="locate-å‘½ä»¤"><a href="#locate-å‘½ä»¤" class="headerlink" title="locate å‘½ä»¤"></a>locate å‘½ä»¤</h4><p>å¯¹äºåˆšåˆ›å»ºä¸ä¹…çš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬è¿˜æ²¡è¢«æ”¶å½•è¿›æ–‡ä»¶æ•°æ®åº“ï¼Œå› æ­¤ç”¨locateå‘½ä»¤å°±æ‰¾ä¸åˆ°å…¶ç´¢å¼•ï¼Œè‡ªç„¶å°±ä¸ä¼šè¿”å›ä»»ä½•ç»“æœã€‚<br>linuxç³»ç»Ÿä¸€èˆ¬æ¯å¤©ä¼šæ›´æ–°ä¸€æ¬¡æ–‡ä»¶æ•°æ®åº“ï¼Œåªè¦ä½ ç›¸éš”24å°æ—¶å†ç”¨locateæŸ¥æ‰¾ï¼Œå°±èƒ½æ‰¾åˆ°åˆšåˆ›å»ºçš„æ–‡ä»¶ã€‚</p><h4 id="sudo-updated"><a href="#sudo-updated" class="headerlink" title="sudo updated"></a>sudo updated</h4><p>å¯ä½¿ç”¨ sudo updated æ›´æ–°æ–‡ä»¶æ•°æ®åº“</p><h4 id="findå‘½ä»¤"><a href="#findå‘½ä»¤" class="headerlink" title="findå‘½ä»¤"></a>findå‘½ä»¤</h4><p>findçš„åŒºåˆ«ï¼š<br>find æŸ¥æ‰¾ç£ç›˜<br>locate æŸ¥æ‰¾æ–‡ä»¶æ•°æ®åº“</p><p>find ä½•å¤„ ä½•ç‰© åšä»€ä¹ˆ<br>find é»˜è®¤æŸ¥æ‰¾å½“å‰ç›®å½•åŠå…¶å­ç›®å½•ï¼Œä¹Ÿå¯ä»¥æŒ‡å®š æŸ¥æ‰¾ç›®å½• å¦‚ /home<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find /var/log -name &quot;newfile&quot;</span><br><span class="line">find /var/log -name &quot;newfile*&quot;</span><br><span class="line">find /var -size +10M #æŸ¥æ‰¾è¶…è¿‡10Mçš„æ–‡ä»¶ Mæ˜¯å…†ï¼Œä¹Ÿå°±æ˜¯10çš„6æ¬¡æ–¹</span><br><span class="line">find -name &quot;*.txt&quot;-atime -7 #æŸ¥æ‰¾æœ€è¿‘7å¤©å†…ä¿®æ”¹è¿‡çš„txtæ–‡ä»¶</span><br></pre></td></tr></table></figure></p><p>type ç±»å‹<br>-type d : åªæŸ¥æ‰¾ç›®å½•ç±»å‹ã€‚ dæ˜¯ directory ç›®å½•ï¼›<br>-type f : åªæŸ¥æ‰¾æ–‡ä»¶ç±»å‹ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name &quot;newfile&quot; -type d #.æ˜¯å½“å‰ç›®å½•ï¼Œ</span><br></pre></td></tr></table></figure></p><h4 id="findè¿›è¡Œæ“ä½œ"><a href="#findè¿›è¡Œæ“ä½œ" class="headerlink" title="findè¿›è¡Œæ“ä½œ"></a>findè¿›è¡Œæ“ä½œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find -name &quot;*.jpg&quot; -delete #åˆ é™¤æ‰€æœ‰æŸ¥æ‰¾åˆ°çš„jpgæ–‡ä»¶ï¼Œ</span><br></pre></td></tr></table></figure><h4 id="execä¸-ok"><a href="#execä¸-ok" class="headerlink" title="-execä¸ -ok"></a>-execä¸ -ok</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find one -name &quot;*.txt&quot; -exec chmod 600 &#123;&#125; \; #å¯¹äºæ¯ä¸ªæ‰¾åˆ°çš„txtæ–‡ä»¶ï¼Œéƒ½è¿›è¡Œ-execå‚æ•°æŒ‡å®šæ“ä½œï¼Œå¦‚ç»™txtæ–‡ä»¶è®¾ç½®600æƒé™ï¼›</span><br><span class="line">find one -name &quot;*.txt&quot; -ok chmod 600 &#123;&#125; \; #okè·Ÿ exec ä¸€æ ·ï¼Œ åªæ˜¯okæ“ä½œæ—¶ï¼Œä¼šè¯¢é—®æ˜¯å¦ç»§ç»­ï¼›</span><br></pre></td></tr></table></figure><h3 id="æŸ¥æ‰¾å†…å®¹"><a href="#æŸ¥æ‰¾å†…å®¹" class="headerlink" title="æŸ¥æ‰¾å†…å®¹"></a>æŸ¥æ‰¾å†…å®¹</h3><h4 id="grep-å‘½ä»¤-ç­›é€‰æ•°æ®"><a href="#grep-å‘½ä»¤-ç­›é€‰æ•°æ®" class="headerlink" title="grep å‘½ä»¤ ç­›é€‰æ•°æ®"></a>grep å‘½ä»¤ ç­›é€‰æ•°æ®</h4><ul><li>grep æ—¶ globally search a regular expression and print çš„ç¼©å†™</li><li>æ„æ€æ˜¯ å…¨å±€æœç´¢ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”æ‰“å°</li><li><p>grep çš„åŠŸèƒ½ç®€å•è¯´æ˜¯åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å…³é”®å­—ï¼Œå¹¶æ˜¾ç¤ºå…³é”®å­—æ‰€åœ¨çš„è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep eslint  eslint.md #æœç´¢æ–‡ä»¶å†…å…³é”®å­—eslint</span><br></pre></td></tr></table></figure></li><li><p>-i å¿½ç•¥å¤§å°å†™</p></li><li>-n æ˜¾ç¤ºè¡Œå·</li><li>-v åªæ˜¾ç¤ºæœç´¢æ–‡æœ¬ä¸åœ¨çš„è¡Œï¼Œ væ—¶invertç¼©å†™</li><li>-r åœ¨ç›®å½•å’Œæ‰€æœ‰å­æ–‡ä»¶ä¸­æŸ¥æ‰¾ï¼Œåé¢è·Ÿæœç´¢ç›®å½•è€Œä¸æ˜¯æ–‡ä»¶ï¼Œræ˜¯recursiveçš„ç¼©å†™ï¼Œè¡¨ç¤ºé€’å½’ã€‚</li><li>E ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E ^eslint  eslint.md #æœç´¢æ–‡ä»¶å†…å…³é”®å­—eslint</span><br></pre></td></tr></table></figure></li></ul><h4 id="sortå‘½ä»¤-ä¸ºæ–‡ä»¶æ’åº"><a href="#sortå‘½ä»¤-ä¸ºæ–‡ä»¶æ’åº" class="headerlink" title="sortå‘½ä»¤ ä¸ºæ–‡ä»¶æ’åº"></a>sortå‘½ä»¤ ä¸ºæ–‡ä»¶æ’åº</h4><ul><li><p>-o  outputç¼©å†™ï¼Œå°†æ’åºåçš„å†…å®¹å†™å…¥æ–°æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -o ç”¨äºè¾“å‡ºæ–°æ–‡ä»¶.txt åŸæ–‡ä»¶.txt</span><br></pre></td></tr></table></figure></li><li><p>-rå‚æ•° å€’åºæ’åˆ— reverseçš„ç¼©å†™ã€‚</p></li></ul><h4 id="wcå‘½ä»¤-æ–‡ä»¶ç»Ÿè®¡"><a href="#wcå‘½ä»¤-æ–‡ä»¶ç»Ÿè®¡" class="headerlink" title="wcå‘½ä»¤ æ–‡ä»¶ç»Ÿè®¡"></a>wcå‘½ä»¤ æ–‡ä»¶ç»Ÿè®¡</h4><ul><li>wc word countç¼©å†™ï¼Œç”¨äºç»Ÿè®¡å•è¯æ•°ï¼Œè¡Œæ•°ï¼Œå­—ç¬¦æ•°ï¼Œå­—èŠ‚æ•°ç­‰ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> wc eslint.md</span><br><span class="line">152  238 4712 eslint.md # ä¾æ¬¡é¡ºåºåˆ†åˆ«ä¸ºï¼š è¡Œæ•° å•è¯æ•°(æ­¤å‘½ä»¤çš„å•è¯æ•°ä»¥ç©ºæ ¼splitè®¡ç®—) å­—èŠ‚æ•°</span><br></pre></td></tr></table></figure></li></ul><p>å…³äºwcå¦‚ä½•è®¡ç®—å•è¯æ•°ï¼Œå¯ä»¥é€šè¿‡ <code>man wc</code>æ¥æŸ¥çœ‹ç›¸å…³è§£é‡Š</p><h3 id="cutå‘½ä»¤-å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹"><a href="#cutå‘½ä»¤-å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹" class="headerlink" title="cutå‘½ä»¤ å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹"></a>cutå‘½ä»¤ å‰ªåˆ‡æ–‡ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹</h3><ul><li>cutç”¨äºå¯¹æ–‡ä»¶çš„æ¯ä¸€è¡Œè¿›è¡Œå‰ªåˆ‡å¤„ç†<h4 id="c-æ ¹æ®å­—ç¬¦æ•°æ¥å‰ªåˆ‡"><a href="#c-æ ¹æ®å­—ç¬¦æ•°æ¥å‰ªåˆ‡" class="headerlink" title="-c æ ¹æ®å­—ç¬¦æ•°æ¥å‰ªåˆ‡"></a>-c æ ¹æ®å­—ç¬¦æ•°æ¥å‰ªåˆ‡</h4>c æ˜¯characterç¼©å†™ï¼Œè¡¨ç¤ºå­—ç¬¦<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -c 2-4 name.txt #å‰ªåˆ‡æ¯ä¸€è¡Œçš„ç¬¬äºŒåˆ°ç¬¬å››ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure></li></ul><h4 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h4><ul><li>-d å‚æ•°ï¼Œ delimiterçš„ç¼©å†™ï¼Œæ˜¯è‹±è¯­åˆ†éš”ç¬¦çš„æ„æ€ï¼›<br>ç”¨äºæŒ‡å®šç”¨ä»€ä¹ˆåˆ†éš”ç¬¦ï¼ˆæ¯”å¦‚é€—å· åˆ†å· åŒå¼•å·ç­‰ç­‰ï¼‰</li><li>-f è¡¨ç¤ºå‰ªåˆ‡ä¸‹ç”¨åˆ†éš”ç¬¦çš„å“ªä¸€å—(é€šè¿‡ç´¢å¼•indexæ ‡è¯†)æˆ–å“ªå‡ å—ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">cut -d , -f 1 notes.csv # æ–‡ä»¶å†…å®¹ä»¥é€—å·åˆ†éš”ï¼Œå‰ªåˆ‡åˆ†éš”åindex ä¸º 1çš„é‚£å—å†…å®¹ï¼› æ³¨æ„å‘½ä»¤åéƒ½è¦å¸¦ç©ºæ ¼</span><br><span class="line">cut -d , -f 1,2 notes.csv # æ–‡ä»¶å†…å®¹ä»¥é€—å·åˆ†éš”ï¼Œå‰ªåˆ‡åˆ†éš”åindex ä¸º 1å’Œ2çš„é‚£å—å†…å®¹ï¼› æ³¨æ„å‘½ä»¤åéƒ½è¦å¸¦ç©ºæ ¼</span><br><span class="line">cut -d , -f 2- notes.csv # æ–‡ä»¶å†…å®¹ä»¥é€—å·åˆ†éš”ï¼Œå‰ªåˆ‡åˆ†éš”åindex ä¸º 2ä¹‹åçš„æ‰€æœ‰å—å†…å®¹ï¼› æ³¨æ„å‘½ä»¤åéƒ½è¦å¸¦ç©ºæ ¼</span><br><span class="line"></span><br><span class="line">#ç¬¬ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¦‚ä¸‹ï¼š</span><br><span class="line">C:\Users\Administrator\Desktop\linux</span><br><span class="line">  Î» cat test.csv</span><br><span class="line">  mark, 95 / 100 , å¾ˆä¸é”™</span><br><span class="line">  mttt, 9 / 100 , å¾ˆå¥½</span><br><span class="line">  gree, 5 / 100 , ä¸é”™</span><br><span class="line">  lucy, 6 / 100 , å¾ˆä¸é”™</span><br><span class="line">  jim, 5 / 100 , é”™</span><br><span class="line">  david, 17 / 100 , ä¸é”™</span><br><span class="line"></span><br><span class="line">  C:\Users\Administrator\Desktop\linux</span><br><span class="line">  Î» cut -d , -f 1 test.csv</span><br><span class="line">  mark</span><br><span class="line">  mttt</span><br><span class="line">  gree</span><br><span class="line">  lucy</span><br><span class="line">  jim</span><br><span class="line">  david</span><br><span class="line">  C:\Users\Administrator\Desktop\linux</span><br></pre></td></tr></table></figure></li></ul><h2 id="åŸºç¡€çŸ¥è¯†äºŒ"><a href="#åŸºç¡€çŸ¥è¯†äºŒ" class="headerlink" title="åŸºç¡€çŸ¥è¯†äºŒ"></a>åŸºç¡€çŸ¥è¯†äºŒ</h2><h3 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h3><ul><li><code>&gt;</code> é‡å®šå‘åˆ°æ–°çš„æ–‡ä»¶ï¼Œ å¯ä»¥å°†å‘½ä»¤çš„è¾“å‡ºç»“æœé‡å®šå‘åˆ°ä½ é€‰æ‹©çš„æ–‡ä»¶ä¸­<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Î» cut -d , -f 1 test.csv &gt; cmd.csv #å°†åŸæœ¬æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„å†…å®¹ï¼Œåˆ›å»ºä¸€ä¸ªcmd.csvæ–‡ä»¶ï¼Œæ˜¾ç¤ºåˆ°è¿™ä¸ªæ–‡ä»¶ä¸­æ¥ï¼Œ </span><br><span class="line">#æ­¤æ–‡ä»¶æ‰§è¡Œåï¼Œç”µè„‘ä¸­ä¼šåˆ›å»ºä¸€ä¸ªcmd.csvæ–‡ä»¶</span><br></pre></td></tr></table></figure></li></ul><p>æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨<code>&gt;</code>ï¼Œåˆ›å»ºçš„æ–‡ä»¶ï¼Œå¦‚æœåŸæ–‡ä»¶å­˜åœ¨ï¼Œå°†ç›´æ¥è¦†ç›–åŸæ–‡ä»¶çš„å†…å®¹ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºã€‚</p><p>ä¸ºäº†è§£å†³<code>&gt;</code>ç›´æ¥è¦†ç›–æ–‡ä»¶ï¼Œæœ‰äº†å¦å¤–ä¸€ä¸ªå‘½ä»¤ <code>&gt;&gt;</code></p><ul><li><p><code>&gt;&gt;</code> é‡å®šå‘æ–‡ä»¶æœ«å°¾ï¼Œ å®ƒè·Ÿ  <code>&gt;</code> åŠŸèƒ½ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯ï¼Œ å¦‚æœåŸæ–‡ä»¶å­˜åœ¨ï¼Œ <code>&gt;&gt;</code>åªä¼šåœ¨æ–‡ä»¶å†…å®¹æœ«å°¾è¿½åŠ ï¼Œè€Œä¸æ˜¯è¦†ç›–</p></li><li><p><code>2&gt;</code> å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œå½“å‘½ä»¤æ‰§è¡Œå‡ºé”™æ—¶ï¼Œé”™è¯¯ä¿¡æ¯é‡å®šå‘æ–‡ä»¶ä¸­å¯ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œè€Œä¸èƒ½ä½¿ç”¨ <code>&gt;&gt;</code>å‘½ä»¤ï¼Œå› ä¸º<code>&gt;&gt;</code>åªèƒ½åœ¨å‘½ä»¤æ‰§è¡Œä¸å‡ºé”™æ—¶é‡å®šå‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Î» cut -d , -f 1 test.csv &gt;&gt; cmd.csv  2&gt; err.log #å°†åŸæœ¬æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„å†…å®¹ï¼Œæ˜¾ç¤ºåœ¨cmd.csvä¸­ï¼Œ</span><br><span class="line">#å¦‚æœå‡ºé”™ï¼Œæƒ³é”™è¯¯ä¿¡æ¯æ˜¾ç¤ºåœ¨æ–‡ä»¶ err.logä¸­</span><br></pre></td></tr></table></figure></li><li><p><code>2&gt;&gt;</code> å°†é”™è¯¯ä¿¡æ¯è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶çš„æœ«å°¾ï¼Œç†è§£ä¸ <code>&gt;</code> å’Œ <code>&gt;&gt;</code>ä¸€æ ·</p></li></ul><ul><li><code>2&gt;&amp;1</code> åˆå¹¶è¾“å‡ºï¼Œæœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³æ­£å¸¸è¾“å‡ºä¸ä¸Šé¢è¯´çš„é”™è¯¯è¾“å‡ºåˆå¹¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ç”¨è¿™ä¸ªå‘½ä»¤ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Î» cut -d , -f 1 test.csv &gt;&gt; result.txt  2&gt;&amp;1 #å°†åŸæœ¬æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„å†…å®¹ï¼Œæ˜¾ç¤ºåœ¨cmd.csvä¸­,æ— è®ºé”™è¯¯è¿˜æ˜¯æ­£å¸¸è¾“å‡ºå†…å®¹ï¼Œ</span><br></pre></td></tr></table></figure></li></ul><p>ä¸Šé¢é‡å®šå‘éƒ½æ˜¯ä»¥cutä¸ºä¾‹å­ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨lsï¼Œæˆ–å…¶ä»–ä»»ä½•å‘½ä»¤åœ¨ç»ˆç«¯æœ‰è¾“å‡ºå†…å®¹çš„ï¼Œéƒ½å¯ä»¥è¾“å‡ºåˆ°æ–‡ä»¶ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator\Desktop\linux</span><br><span class="line">Î» ls &gt; uu.txt</span><br><span class="line"></span><br><span class="line">C:\Users\Administrator\Desktop\linux</span><br><span class="line">Î» cat uu.txt</span><br><span class="line">abc.txt</span><br><span class="line">end.md</span><br><span class="line">eslint.md</span><br><span class="line">font_end.md</span><br><span class="line">git.md</span><br><span class="line">he.txt</span><br><span class="line">test.csv</span><br><span class="line">tt.csv</span><br><span class="line">uu.txt</span><br></pre></td></tr></table></figure></p><h3 id="é»‘æ´æ–‡ä»¶-dev-null"><a href="#é»‘æ´æ–‡ä»¶-dev-null" class="headerlink" title="é»‘æ´æ–‡ä»¶ /dev/null"></a>é»‘æ´æ–‡ä»¶ /dev/null</h3><p>è¿™æ˜¯Linuxç³»ç»Ÿä¸­ä¸“æœ‰çš„ä¸€ä¸ªé»‘æ´æ–‡ä»¶ï¼Œæ˜¯ç‰¹æ®Šæ–‡ä»¶ï¼Œä¸æ˜¯ä¸€ä¸ªç›®å½•ï¼Œä»»ä½•å†…å®¹æˆ–æ•°æ®å†™å…¥å…¶ä¸­ï¼Œå°±å¥½æ¯”è¢«ä¸¢å¤±ï¼Œå¯ç”¨äºæ‰§è¡Œå‘½ä»¤æ—¶ï¼Œä¸åšä»»ä½•è¾“å‡ºï¼Œå³ æ—¢ä¸æƒ³åœ¨ç»ˆç«¯è¾“å‡ºæ˜¾ç¤ºï¼Œä¹Ÿä¸æƒ³é‡å®šå‘åˆ°æ–‡ä»¶è¾“å‡ºï¼Œæ­¤æ—¶å¯ç”¨åˆ°å®ƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Î» cut -d , -f 1 test.csv &gt; /dev.null #å°†åŸæœ¬æ˜¾ç¤ºåœ¨ç»ˆç«¯çš„å†…å®¹ï¼Œç›´æ¥æ‰”æ‰ï¼Œä¸åšä»»ä½•æ˜¾ç¤º</span><br></pre></td></tr></table></figure></p><h3 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h3><figure class="image-box">                <img src="/image/linux/cut.png" alt title class>                <p></p>            </figure><ul><li><p><code>&lt;</code> ç”¨äºæŒ‡å®šå‘½ä»¤çš„è¾“å…¥ä¸ºæ–‡ä»¶è¾“å…¥ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#ä¸‹é¢ä¸¤ä¸ªå‘½ä»¤æ‰§è¡Œç»“æœè¡¨ç°ä¸€æ ·ï¼Œä½†æœ‰åŒºåˆ«</span><br><span class="line"> Î» cat notes.csv #catå‘½ä»¤æ¥å—çš„è¾“å…¥æ˜¯notes.csvè¿™ä¸ªæ–‡æœ¬ç•Œé¢ï¼› å®ƒè¦å…ˆæ‰“å¼€notes.csvæ–‡ä»¶ï¼Œç„¶åæ‰“å°æ–‡ä»¶å†…å®¹</span><br><span class="line"> Î» cat &lt; notes.csv #catå‘½ä»¤æ¥å—çš„è¾“å…¥ç›´æ¥æ˜¯notes.csvè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹ï¼› catå‘½ä»¤åªè´Ÿè´£å°†å…¶å†…å®¹æ‰“å°ï¼›æ‰“å¼€æ–‡ä»¶å¹¶å°†æ–‡ä»¶å†…å®¹ä¼ é€’ç»™catå‘½ä»¤çš„å·¥ä½œåˆ™äº¤ç»™ç»ˆç«¯å®Œæˆï¼›</span><br></pre></td></tr></table></figure></li><li><p><code>&lt;&lt;</code> ç”¨äºæŒ‡å®šå‘½ä»¤çš„è¾“å…¥ä¸ºé”®ç›˜è¾“å…¥: ä»é”®ç›˜è¯»å–ï¼Œå°†é”®ç›˜çš„è¾“å…¥é‡å®šå‘ä¸ºæŸä¸ªå‘½ä»¤çš„è¾“å…¥.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ENDä¸‹é¢çš„ENDä½ å¯ä»¥å–ä»»ä½•åå­—éƒ½å¯ä»¥</span><br><span class="line"> Î» sort -n &lt;&lt; END #è¾“å…¥è¿™æ¡å‘½ä»¤åï¼ŒæŒ‰ä¸‹å›è½¦ï¼Œç»ˆç«¯å°±è¿›å…¥é”®ç›˜è¾“å…¥æ¨¡å¼ï¼›è¾“å…¥å­—ç¬¦ä¸²ï¼Œè¾“å…¥å®Œä¸€è¡Œå°±æŒ‰å›è½¦ï¼Œç¼–è¾‘ä¸‹ä¸€è¡Œï¼›è¾“å…¥å®Œæ¯•ï¼Œå°±è¾“å…¥ ä¸Šé¢çš„END;sortå°±ä¼šå¯¹ä½ åˆšæ‰è¾“å…¥çš„ä¸œè¥¿è¿›è¡Œæ’åºï¼›</span><br></pre></td></tr></table></figure></li></ul><h4 id="ç»¼åˆç»ƒä¹ è¾“å…¥è¾“å‡ºé‡å®šå‘"><a href="#ç»¼åˆç»ƒä¹ è¾“å…¥è¾“å‡ºé‡å®šå‘" class="headerlink" title="ç»¼åˆç»ƒä¹ è¾“å…¥è¾“å‡ºé‡å®šå‘"></a>ç»¼åˆç»ƒä¹ è¾“å…¥è¾“å‡ºé‡å®šå‘</h4><figure class="image-box">                <img src="/image/linux/red.png" alt title class>                <p></p>            </figure><h3 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h3><p>ç®¡é“ç¬¦å· <code>|</code>ï¼Œå…¶ä½œç”¨æ˜¯å»ºç«‹å‘½ä»¤ç®¡é“ï¼Œä¹Ÿç®—æ˜¯é‡å®šå‘æµçš„ä¸€ç§ã€‚<br><figure class="image-box">                <img src="/image/linux/pop2.png" alt title class>                <p></p>            </figure><br>ç®¡é“åŸç†<br>å°†ä¸¤ä¸ªå‘½ä»¤è¿æˆç®¡é“ï¼Œç®€å•è¯´å°±æ˜¯å°†ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ã€‚<br><figure class="image-box">                <img src="/image/linux/pop.png" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost red]$ cat test.csv</span><br><span class="line">mark, 95 / 100 , å¾ˆä¸é”™</span><br><span class="line">mttt, 9 / 100 , å¾ˆå¥½</span><br><span class="line">gree, 5 / 100 , ä¸é”™</span><br><span class="line">lucy, 6 / 100 , å¾ˆä¸é”™</span><br><span class="line">jim, 5 / 100 , é”™</span><br><span class="line">david, 17 / 100 , ä¸é”™</span><br><span class="line">[hz@localhost red]$ cut -d , -f 1 test.csv | sort &gt; sorted_names.txt # ä»test.csvå‰ªåˆ‡å†…å®¹ä½œä¸ºsortçš„æ’åºè¾“å…¥å†…å®¹ï¼Œå°†æœ€ç»ˆæ’åºçš„å†…å®¹åˆ›å»ºä¸ºsorted_names.txt</span><br><span class="line">[hz@localhost red]$ cat sorted_names.txt</span><br><span class="line">david</span><br><span class="line">gree</span><br><span class="line">jim</span><br><span class="line">lucy</span><br><span class="line">mark</span><br><span class="line">mttt</span><br><span class="line">[hz@localhost red]$</span><br></pre></td></tr></table></figure><p>ç»¼åˆç»ƒä¹ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#grep a -Ir /home/hz/red ä»ç›®å½•ä¸­æ‰¾å‡ºæ‰€æœ‰åŒ…å« a è¿™ä¸ªå…³é”®å­—çš„è¡Œï¼Œ -I ç”¨äºæ’é™¤äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ -r ç”¨äºé€’å½’éå†(å› ä¸ºgrepéå†ç›®å½•å¿…é¡»å¸¦-r)</span><br><span class="line">#cut -d : -f 1 ä»¥åˆ†å·åˆ†éš”ä¸Šé¢çš„è¾“å‡ºå†…å®¹ï¼Œè·å–ç¬¬ä¸€ä¸ªindexï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶å</span><br><span class="line">#sort æ’åº</span><br><span class="line">#uniq å»é‡</span><br><span class="line">grep a -Ir /home/hz/red | cut -d : -f 1 | sort | uniq</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/linux/pop1.png" alt title class>                <p></p>            </figure><h3 id="è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹"><a href="#è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹" class="headerlink" title="è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹"></a>è¿›ç¨‹å’Œç³»ç»Ÿç›‘æµ‹</h3><h4 id="ps-è¿›ç¨‹çš„é™æ€åˆ—è¡¨"><a href="#ps-è¿›ç¨‹çš„é™æ€åˆ—è¡¨" class="headerlink" title="ps è¿›ç¨‹çš„é™æ€åˆ—è¡¨"></a>ps è¿›ç¨‹çš„é™æ€åˆ—è¡¨</h4><p>ps æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­çš„è¿›ç¨‹ï¼Œåªæ˜¾ç¤ºå‘½ä»¤è¾“å…¥æ—¶çš„å‘½ä»¤</p><h4 id="top-è¿›ç¨‹çš„åŠ¨æ€åˆ—è¡¨"><a href="#top-è¿›ç¨‹çš„åŠ¨æ€åˆ—è¡¨" class="headerlink" title="top è¿›ç¨‹çš„åŠ¨æ€åˆ—è¡¨"></a>top è¿›ç¨‹çš„åŠ¨æ€åˆ—è¡¨</h4><p>top åŠ¨æ€æ˜¾ç¤ºå½“æ—¶çš„è¿›ç¨‹ã€‚</p><h4 id="glances-iftop-htopè½¯ä»¶"><a href="#glances-iftop-htopè½¯ä»¶" class="headerlink" title="glances iftop htopè½¯ä»¶"></a>glances iftop htopè½¯ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#-y å¸¦ä¸Š-yåï¼Œæ‰§è¡Œå‘½ä»¤æ—¶å°†ä¸å†è¯¢é—®ä½ æ˜¯å¦yesï¼Œç›´æ¥æ‰§è¡Œã€‚</span><br><span class="line">yum install epel* -y</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/ba__lu/article/details/80557947" target="_blank" rel="noopener">CentOS7 å®‰è£…ç³»ç»Ÿç›‘æ§è½¯ä»¶ glances iftop htop</a></p><h3 id="åœæ­¢è¿›ç¨‹"><a href="#åœæ­¢è¿›ç¨‹" class="headerlink" title="åœæ­¢è¿›ç¨‹"></a>åœæ­¢è¿›ç¨‹</h3><p>ctrl+C å’Œ kill å‘½ä»¤</p><p>åœ¨ç»ˆç«¯ä¸­ï¼Œæ‹·è´å’Œç²˜è´´ æ—¶ ctrl + shift + c æˆ– vï¼› ctrl + c æ˜¯åœæ­¢ç»ˆç«¯ä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚</p><ul><li>ctrl + c åªèƒ½ä½œç”¨äºå½“å‰ç»ˆç«¯ä¸­æ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚</li></ul><ul><li>kill åŠ pidè¿›ç¨‹å·åœæ­¢è¿›ç¨‹ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kill 1125 6629</span><br><span class="line">kill -9 7291 # -9 é…åˆkillä½¿ç”¨ï¼Œå¯å¼ºåˆ¶ç«‹å³ç»“æŸè¿›ç¨‹ã€‚</span><br></pre></td></tr></table></figure></li></ul><h3 id="å…¶ä»–å‘½ä»¤-1"><a href="#å…¶ä»–å‘½ä»¤-1" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo halt #å…³é—­ç³»ç»Ÿ - å…³æœº</span><br><span class="line">sudo reboot #é‡å¯ç³»ç»Ÿ</span><br><span class="line">#å‰é¢ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯è°ƒç”¨ shutdown å‘½ä»¤</span><br><span class="line">poweroff #ç«‹å³å…³æœº</span><br></pre></td></tr></table></figure><h3 id="å»¶æ—¶æ‰§è¡Œçš„å‘½ä»¤"><a href="#å»¶æ—¶æ‰§è¡Œçš„å‘½ä»¤" class="headerlink" title="å»¶æ—¶æ‰§è¡Œçš„å‘½ä»¤"></a>å»¶æ—¶æ‰§è¡Œçš„å‘½ä»¤</h3><h4 id="atå‘½ä»¤-å»¶æ—¶æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œåªèƒ½è®©ç¨‹åºæ‰§è¡Œä¸€æ¬¡"><a href="#atå‘½ä»¤-å»¶æ—¶æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œåªèƒ½è®©ç¨‹åºæ‰§è¡Œä¸€æ¬¡" class="headerlink" title="atå‘½ä»¤ å»¶æ—¶æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œåªèƒ½è®©ç¨‹åºæ‰§è¡Œä¸€æ¬¡"></a>atå‘½ä»¤ å»¶æ—¶æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œåªèƒ½è®©ç¨‹åºæ‰§è¡Œä¸€æ¬¡</h4><p>å¦‚æœæ²¡æœ‰æ­¤å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ <code>sudo yum install at</code>;</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">at 20:10</span><br><span class="line">&gt; touch test.txt</span><br><span class="line"># ctrl + D ç»„åˆé”®ï¼Œatä¼šæ˜¾ç¤º&lt;EOT&gt;,æ˜¯ç»“æŸè‹±æ–‡çš„ç¼©å†™</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ atq atrmå‘½ä»¤åˆ—å‡ºå’Œåˆ é™¤æ­£åœ¨ç­‰å¾…æ‰§è¡Œatä»»åŠ¡ï¼›</p><h4 id="sleep-å‘½ä»¤-ä¼‘æ¯ä¸€ä¼š"><a href="#sleep-å‘½ä»¤-ä¼‘æ¯ä¸€ä¼š" class="headerlink" title="sleep å‘½ä»¤ ä¼‘æ¯ä¸€ä¼š"></a>sleep å‘½ä»¤ ä¼‘æ¯ä¸€ä¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºæ–‡ä»¶ï¼Œç­‰å¾…15åˆ†é’Ÿï¼Œç„¶ååˆ é™¤æ–‡ä»¶ï¼›</span><br><span class="line">touch file.txt; sleep 14m; rm file.txt</span><br></pre></td></tr></table></figure><h4 id="crontab-ç¨‹åº"><a href="#crontab-ç¨‹åº" class="headerlink" title="crontab ç¨‹åº"></a>crontab ç¨‹åº</h4><figure class="image-box">                <img src="/image/linux/chk.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/cro1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/cro2.png" alt title class>                <p></p>            </figure><p>é…ç½®linuxç»ˆç«¯é»˜è®¤ä½¿ç”¨ nano ç¼–è¾‘å™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># .bashrc æ˜¯bash shell çš„é…ç½®æ–‡ä»¶</span><br><span class="line">echo &quot;export EDITOR=nano&quot; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure></p><h3 id="amp-amp-ã€-è¿˜æœ‰-åˆ†å·"><a href="#amp-amp-ã€-è¿˜æœ‰-åˆ†å·" class="headerlink" title="&amp;&amp; ã€ || è¿˜æœ‰ åˆ†å·"></a>&amp;&amp; ã€ || è¿˜æœ‰ åˆ†å·</h3><p>&amp;&amp; å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡ŒæˆåŠŸ å†æ‰§è¡Œåä¸€ä¸ªç¨‹åºï¼›<br>|| å‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œæ‰æ‰§è¡Œåä¸€ä¸ªç¨‹åºï¼›<br>; åˆ†å· ä¸è®ºåˆ†å·å‰çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸä¸å¦ï¼Œéƒ½æ‰§è¡Œåˆ†å·åçš„å‘½ä»¤</p><h3 id="æ–‡ä»¶çš„è§£å‹ä¸å‹ç¼©"><a href="#æ–‡ä»¶çš„è§£å‹ä¸å‹ç¼©" class="headerlink" title="æ–‡ä»¶çš„è§£å‹ä¸å‹ç¼©"></a>æ–‡ä»¶çš„è§£å‹ä¸å‹ç¼©</h3><h4 id="tarå‘½ä»¤ï¼Œ-gzipå’Œbzip2å‘½ä»¤çš„ä½¿ç”¨"><a href="#tarå‘½ä»¤ï¼Œ-gzipå’Œbzip2å‘½ä»¤çš„ä½¿ç”¨" class="headerlink" title="tarå‘½ä»¤ï¼Œ gzipå’Œbzip2å‘½ä»¤çš„ä½¿ç”¨"></a>tarå‘½ä»¤ï¼Œ gzipå’Œbzip2å‘½ä»¤çš„ä½¿ç”¨</h4><ul><li>é¦–å…ˆ ç”¨tarå°†å¤šä¸ªæ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ªæ€»çš„æ–‡ä»¶ï¼Œç§°ä¸º archiveï¼›</li><li>ç„¶å ç”¨gzipæˆ–bzip2å‘½ä»¤å°†archiveå‹ç¼©ä¸ºæ›´å°çš„æ–‡ä»¶ï¼›<figure class="image-box">                <img src="/image/linux/tar.png" alt title class>                <p></p>            </figure></li></ul><h3 id="æ–‡ä»¶è§£å‹ä¸å‹ç¼©"><a href="#æ–‡ä»¶è§£å‹ä¸å‹ç¼©" class="headerlink" title="æ–‡ä»¶è§£å‹ä¸å‹ç¼©"></a>æ–‡ä»¶è§£å‹ä¸å‹ç¼©</h3><h4 id="åœ¨è™šæ‹Ÿæœºä¸Šçš„centosä¸Šæ‰¾åˆ°å…±äº«çš„æ–‡ä»¶"><a href="#åœ¨è™šæ‹Ÿæœºä¸Šçš„centosä¸Šæ‰¾åˆ°å…±äº«çš„æ–‡ä»¶" class="headerlink" title="åœ¨è™šæ‹Ÿæœºä¸Šçš„centosä¸Šæ‰¾åˆ°å…±äº«çš„æ–‡ä»¶"></a>åœ¨è™šæ‹Ÿæœºä¸Šçš„centosä¸Šæ‰¾åˆ°å…±äº«çš„æ–‡ä»¶</h4><p>å¯é€šè¿‡å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># .bashrc æ˜¯bash shell çš„é…ç½®æ–‡ä»¶</span><br><span class="line">sudo find / -name &quot;ä½ å…±äº«æ–‡ä»¶çš„åå­—&quot;</span><br></pre></td></tr></table></figure></p><p>å½“ä»¥ä¸Šæ–¹æ³•æ‰¾ä¸åˆ°å…±äº«æ–‡ä»¶å¤¹æ—¶ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•ï¼Œ<a href="https://blog.csdn.net/leacas/article/details/114678676" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒ</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost hz]#  vmware-hgfsclient  #å‘½ä»¤æŸ¥çœ‹å½“å‰æœ‰å“ªäº›å…±äº«çš„ç›®å½•ï¼Œè¿™é‡Œæˆ‘åªä½¿ç”¨äº†sharedæ–‡ä»¶å¤¹ </span><br><span class="line">vmshare1</span><br><span class="line">#å‘½ä»¤æŒ‚è½½è¯¥å…±äº«æ–‡ä»¶å¤¹(æ³¨æ„ï¼šå¸¦.å·çš„å“¦)ï¼Œå…¶ä¸­.host:/Documentsæ˜¯å…±äº«åï¼Œåªéœ€æŠŠDocumentsæ¢æˆ </span><br><span class="line">[root@localhost hz]# sudo vmhgfs-fuse .host:/vmshare1 /mnt/hgfs</span><br><span class="line">[root@localhost hz]# ls  /mnt/hgfs æˆåŠŸæ‰¾åˆ°è·å–åˆ°å…±äº«æ–‡ä»¶å¤¹</span><br><span class="line">6        git.md  htop-2.2.0.tar.gz  test.csv  tyyyu.txt</span><br><span class="line">aa.txty  he.txt  ok.rar             tt.csv    uu.txt</span><br></pre></td></tr></table></figure></p><p>ä½ ä¹Ÿå¯ä»¥å°†ä¸Šé¢å†™æˆä¸€ä¸ªshellï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost Desktop]# cat share.sh</span><br><span class="line">get_share_dirname()&#123;</span><br><span class="line">  echo <span class="string">`vmware-hgfsclient`</span></span><br><span class="line">&#125;</span><br><span class="line">vmhgfs-fuse <span class="string">".host:/$(get_share_dirname)"</span> /mnt/hgfs</span><br></pre></td></tr></table></figure></p><p>åˆ°æ­¤ä¸ºæ­¢æ˜¯å¯ä»¥ä½¿ç”¨è¯¥å…±äº«æ–‡ä»¶å¤¹äº†ï¼Œä½†æ¯æ¬¡éƒ½å¾—é‡å¤mountä¸€æ¬¡ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸ºéšæœºå¯åŠ¨åè‡ªåŠ¨æŒ‚è½½ ,<br>ç¼–è¾‘ /etc/fstabï¼Œæ·»åŠ ä¸‹é¢ä¸€è¡Œ,ä¸è¿‡ä»¥ä¸‹æ–¹å¼å­˜åœ¨é—®é¢˜ï¼Œä¸”æ”¾è¿™é‡Œåšä¸€ä¸ªå‚è€ƒï¼Œä¸å»ºè®®æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.host:/vmshare1 /mnt/hgfs vmhgfs defaults 0 0</span><br></pre></td></tr></table></figure></p><h4 id="ä¿®æ”¹å…±äº«æ–‡ä»¶æƒé™ä¸ºæ™®é€šç”¨æˆ·"><a href="#ä¿®æ”¹å…±äº«æ–‡ä»¶æƒé™ä¸ºæ™®é€šç”¨æˆ·" class="headerlink" title="ä¿®æ”¹å…±äº«æ–‡ä»¶æƒé™ä¸ºæ™®é€šç”¨æˆ·"></a>ä¿®æ”¹å…±äº«æ–‡ä»¶æƒé™ä¸ºæ™®é€šç”¨æˆ·</h4><p>å…±äº«æ–‡ä»¶ä¸€èˆ¬åœ¨rootä¸‹ï¼Œæ¯”å¦‚ï¼š<code>/mnt/hgfs/vmshare/</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># å…±äº«æ–‡ä»¶åœ¨rootä¸‹ï¼Œæ‰€æœ‰æ˜¯rootè¶…çº§ç®¡ç†æƒé™ï¼Œæˆ‘ä»¬è¦æ”¹ä¸ºæ™®é€šç”¨æˆ·æƒé™</span><br><span class="line">[hz@localhost ~]$ ls -l /mnt/hgfs/vmshare/</span><br><span class="line">total 16</span><br><span class="line">-rwxrwxrwx. 1 root root 14214 May 15 01:01 git.md</span><br><span class="line">-rwxrwxrwx. 1 root root    38 May 20 17:40 he.txt</span><br><span class="line">-rwxrwxrwx. 1 root root   143 May 22 04:03 test.csv</span><br><span class="line">-rwxrwxrwx. 1 root root    14 May 22 03:38 tt.csv</span><br><span class="line">-rwxrwxrwx. 1 root root    74 May 22 04:39 uu.txt</span><br><span class="line"># æŠŠå…±äº«ç›®å½•å†…æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ° ç”¨æˆ·ç›®å½•ä¸‹çš„ /home/hz/tartest</span><br><span class="line">[hz@localhost ~]$ sudo cp -r /mnt/hgfs/vmshare/ /home/hz/tartest</span><br><span class="line"># æ‰“å°æ–‡ä»¶æƒé™ï¼Œå‘ç°æ˜¯rootæƒé™</span><br><span class="line">[hz@localhost ~]$ ls -l /home/hz/tartest</span><br><span class="line">total 32</span><br><span class="line">-rwxr-xr-x. 1 root root 14214 May 22 21:18 git.md</span><br><span class="line">-rwxr-xr-x. 1 root root    38 May 22 21:18 he.txt</span><br><span class="line">-rwxr-xr-x. 1 root root   143 May 22 21:18 test.csv</span><br><span class="line">-rwxr-xr-x. 1 root root    14 May 22 21:18 tt.csv</span><br><span class="line">-rwxr-xr-x. 1 root root    74 May 22 21:18 uu.txt</span><br><span class="line"># -R ç”¨äºä¿®æ”¹ç›®å½•ï¼Œ ä¿®æ”¹ç›®å½•çš„æƒé™ä¸º hz:hzï¼Œå‰ä¸€ä¸ªhzæ˜¯ç¾¤ç»„ï¼Œåä¸€ä¸ªhzæ˜¯ç”¨æˆ·ï¼›</span><br><span class="line">[hz@localhost ~]$ sudo chown -R hz:hz /home/hz/tartest</span><br><span class="line"># -R å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°æƒé™å·²ç»å˜æˆæ™®é€šç”¨æˆ·</span><br><span class="line">[hz@localhost ~]$ ls -l /home/hz/tartest</span><br><span class="line">total 32</span><br><span class="line">-rwxr-xr-x. 1 hz hz 14214 May 22 21:18 git.md</span><br><span class="line">-rwxr-xr-x. 1 hz hz    38 May 22 21:18 he.txt</span><br><span class="line">-rwxr-xr-x. 1 hz hz   143 May 22 21:18 test.csv</span><br><span class="line">-rwxr-xr-x. 1 hz hz    14 May 22 21:18 tt.csv</span><br><span class="line">-rwxr-xr-x. 1 hz hz    74 May 22 21:18 uu.txt</span><br><span class="line">[hz@localhost ~]$</span><br></pre></td></tr></table></figure></p><h4 id="å‹ç¼©"><a href="#å‹ç¼©" class="headerlink" title="å‹ç¼©"></a>å‹ç¼©</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># -cvf ä¸­ cè¡¨ç¤ºåˆ›å»ºï¼Œ vè¡¨ç¤ºæ˜¾ç¤ºç»†èŠ‚ï¼Œ fè¡¨ç¤ºæŒ‡å®šå½’æ¡£æ–‡ä»¶ </span><br><span class="line">[hz@localhost ~]$ tar -cvf sorting.tar tartest/</span><br><span class="line">tartest/</span><br><span class="line">tartest/git.md</span><br><span class="line">tartest/he.txt</span><br><span class="line">tartest/test.csv</span><br><span class="line">tartest/tt.csv</span><br><span class="line">tartest/uu.txt</span><br><span class="line">[hz@localhost ~]$ ls</span><br><span class="line">sorting.tar tartest</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#ä¸Šé¢æ˜¯é’ˆå¯¹ç›®å½•å‹ç¼©ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é’ˆå¯¹æ–‡ä»¶å‹ç¼©</span><br><span class="line">[hz@localhost ~]$ tar -cvf sorting.tar tartest/git.md tartest/he.txt</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># -rvfè¿½åŠ æ–‡ä»¶åˆ°å½’æ¡£ï¼Œ å°†git.mdè¿™ä¸ªæ–‡ä»¶æ·»åŠ åˆ° sorting.tarå½’æ¡£ä¸­ï¼›</span><br><span class="line">$ tar -rvf sorting.tar tartest/git.md</span><br><span class="line"></span><br><span class="line"># -xvfè§£å¼€å½’æ¡£ï¼Œxæ˜¯extractç¼©å†™ï¼Œå–å‡ºçš„æ„æ€ï¼›</span><br><span class="line">$ tar -xvf sorting.tar</span><br></pre></td></tr></table></figure><h4 id="gzipå’Œbzip2å‘½ä»¤ï¼Œå‹ç¼©å½’æ¡£"><a href="#gzipå’Œbzip2å‘½ä»¤ï¼Œå‹ç¼©å½’æ¡£" class="headerlink" title="gzipå’Œbzip2å‘½ä»¤ï¼Œå‹ç¼©å½’æ¡£"></a>gzipå’Œbzip2å‘½ä»¤ï¼Œå‹ç¼©å½’æ¡£</h4><p>gzipæ¯”bzip2å¸¸ç”¨ï¼Œæ•ˆç‡æ›´é«˜ï¼Œæ‰€æœ‰ç”¨çš„å¤šï¼›</p><ul><li>.tar.gz ç”¨gzipå‘½ä»¤å‹ç¼©åçš„æ–‡ä»¶åç¼€å</li><li>.tar.bz2 ç”¨bzip2å‘½ä»¤å‹ç¼©åçš„æ–‡ä»¶åç¼€å</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gzip sorting.tar</span><br><span class="line">$ bzip2 sorting.tar</span><br></pre></td></tr></table></figure><h4 id="gunzip-å’Œ-bunzip2-å‘½ä»¤-è§£å‹"><a href="#gunzip-å’Œ-bunzip2-å‘½ä»¤-è§£å‹" class="headerlink" title="gunzip å’Œ bunzip2 å‘½ä»¤ è§£å‹"></a>gunzip å’Œ bunzip2 å‘½ä»¤ è§£å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gunzip sorting.tar.gz</span><br></pre></td></tr></table></figure><h4 id="ä¸€æ­¥åˆ°ä½å‹ç¼©ä¸è§£å‹"><a href="#ä¸€æ­¥åˆ°ä½å‹ç¼©ä¸è§£å‹" class="headerlink" title="ä¸€æ­¥åˆ°ä½å‹ç¼©ä¸è§£å‹"></a>ä¸€æ­¥åˆ°ä½å‹ç¼©ä¸è§£å‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># åœ¨-cvfå‰åŠ zï¼Œzå°±æ˜¯gzipçš„æ„æ€ï¼Œåˆå¹¶èµ·æ¥å°±æ˜¯ -zcvf</span><br><span class="line">$ tar -zcvf sorting.tar.gz sorting</span><br><span class="line"># åœ¨-xvf å‰åŠ zï¼Œzå°±æ˜¯gzipçš„æ„æ€ï¼Œåˆå¹¶èµ·æ¥å°±æ˜¯ -zxvf</span><br><span class="line">$ tar -zxvf sorting.tar.gz</span><br></pre></td></tr></table></figure><h4 id="zcat-bzcat-æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶"><a href="#zcat-bzcat-æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶" class="headerlink" title="zcat bzcat æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶"></a>zcat bzcat æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ zcat sorting.tar.gz</span><br><span class="line">$ bzcat sorting.tar.bz2</span><br></pre></td></tr></table></figure><h4 id="zip-unzip-å‹ç¼©-è§£å‹-zip-æ–‡ä»¶"><a href="#zip-unzip-å‹ç¼©-è§£å‹-zip-æ–‡ä»¶" class="headerlink" title="zip/unzip å‹ç¼©/è§£å‹ zip æ–‡ä»¶"></a>zip/unzip å‹ç¼©/è§£å‹ zip æ–‡ä»¶</h4><p>ä¸€èˆ¬linuxå¯èƒ½éœ€è¦å®‰è£…è¿™ä¸ªå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install zip #red hat ä¸€æ—çš„å®‰è£…æ–¹å¼ï¼›</span><br><span class="line">sudo yum install unzip #red hat ä¸€æ—çš„å®‰è£…æ–¹å¼ï¼›</span><br><span class="line"></span><br><span class="line">unzip -l ab.zip  #æŸ¥çœ‹ab.zipæ–‡ä»¶ï¼Œä½†ä¸è§£å‹</span><br><span class="line">zip -r sorting.zip sorting/  #å‹ç¼©sortingç›®å½•ä¸º sorting.zipæ–‡ä»¶ï¼› -rç”¨äºå‹ç¼©ç›®å½•</span><br></pre></td></tr></table></figure></p><h3 id="ç¼–è¯‘å®‰è£…è½¯ä»¶"><a href="#ç¼–è¯‘å®‰è£…è½¯ä»¶" class="headerlink" title="ç¼–è¯‘å®‰è£…è½¯ä»¶"></a>ç¼–è¯‘å®‰è£…è½¯ä»¶</h3><p>ä¸‹é¢éƒ½æ˜¯åŸºäºred hat ä¸€æ—çš„linuxå‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬centosï¼›å…¶ä»–éçº¢å¸½linuxå‘è¡Œç‰ˆå¤§åŒå°å¼‚ã€‚<br> <figure class="image-box">                <img src="/image/linux/stl.png" alt title class>                <p></p>            </figure></p><h4 id="alienè½¯ä»¶"><a href="#alienè½¯ä»¶" class="headerlink" title="alienè½¯ä»¶"></a>alienè½¯ä»¶</h4><p>alien å¤–æ˜Ÿäººçš„æ„æ€ï¼Œ å¯ä»¥å°†debå®‰è£…åŒ…å’Œrpmå®‰è£…åŒ…äº’ç›¸è½¬æ¢</p><ul><li><p>å®‰è£…alienè½¯ä»¶ï¼›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install alien</span><br></pre></td></tr></table></figure></li><li><p>å°† deb è½¬æ¢ä¸ºrpm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo alien -r xxx.deb #è½¬æ¢ä¸ºrpmï¼Œæ­¤è¿‡ç¨‹å¯èƒ½è€—æ—¶è¾ƒé•¿ã€‚</span><br><span class="line">$ rpm -i xxx.rpm #ä½¿ç”¨rpmå‘½ä»¤å®‰è£…rpmåŒ…</span><br></pre></td></tr></table></figure></li></ul><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡debç­‰æ–¹å¼è½¬æ¢è¿‡æ¥çš„rpmåŒ…ï¼Œå¯èƒ½å®‰è£…ä¸æˆåŠŸï¼Œå› æ­¤æœ€å¥½æ˜¯èƒ½å¤Ÿç›´æ¥ä¸‹è½½åˆ°rpmåŒ…ã€‚</p><ul><li>å®åœ¨æ‰¾ä¸åˆ°rpmå®‰è£…åŒ…ï¼Œå¯ä»¥è·å–è½¯ä»¶çš„æºä»£ç ï¼Œå¯ä»¥è‡ªè¡Œç¼–è¯‘</li></ul><h4 id="htopç¼–è¯‘å®‰è£…"><a href="#htopç¼–è¯‘å®‰è£…" class="headerlink" title="htopç¼–è¯‘å®‰è£…"></a>htopç¼–è¯‘å®‰è£…</h4><p>ç¼–è¯‘å®‰è£…ï¼Œç¼–è¯‘å°±æ˜¯å°† ç¨‹åºçš„æºä»£ç  è½¬æ¢æˆ å¯æ‰§è¡Œæ–‡ä»¶ çš„è¿‡ç¨‹ã€‚</p><p>ls /usr/bin ä¸‹éƒ½æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼›</p><ul><li><a href="https://hisham.hm/htop/releases/2.2.0/" target="_blank" rel="noopener">å»htopä¸‹è½½æºç </a>,é€‰æ‹©å…¶ä¸­çš„gzåŒ…ï¼›</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹é¢å‘½ä»¤è¯·ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™ï¼š</span><br><span class="line"></span><br><span class="line">[root]# cp /mnt/hgfs/vmshare/htop-2.2.0.tar.gz . # å°†å…±äº«æ–‡ä»¶æ‹·è´åˆ°å½“å‰ç›®å½•ï¼›</span><br><span class="line">[root]# chown hz:hz htop-2.2.0.tar.gz # ä¿®æ”¹å‹ç¼©åŒ…æ–‡ä»¶æƒé™</span><br><span class="line">[root]# tar -zxvf htop-2.2.0.tar.gz # è§£å‹ç¼©</span><br><span class="line">[root]# cd ./htop-2.2.0</span><br><span class="line">[root]# ls # å‘ç°é‡Œé¢æœ‰ configureå¯æ‰§è¡Œç¨‹åºï¼Œä»¥åŠç¼–è¯‘çš„è¯´æ˜æ–‡ä»¶  Makefile æ­¤æ–‡ä»¶å¯¹ä¸‹é¢è¦ç”¨çš„makeå‘½ä»¤è¿›è¡Œè¯´æ˜ï¼› </span><br><span class="line">     # å…¶ä¸­configureæ–‡ä»¶ç”¨äºç¼–è¯‘å‰çš„é…ç½®å·¥ä½œï¼Œ Makefileå¯¹åº”ç¼–è¯‘çš„é…ç½®è¯´æ˜ï¼›</span><br><span class="line">[root]# ./configure æ‰§è¡Œæ­¤å‘½ä»¤ï¼Œåšç¼–è¯‘å‰çš„é…ç½®è®¾ç½®å·¥ä½œ</span><br><span class="line">configure: error: You may want to use --disable-unicode or install libncursesw. </span><br><span class="line">        # å‘ç°æŠ¥é”™ï¼Œæç¤ºæˆ‘ä»¬å¯ä»¥ç”¨ ./configure --disable-unicode å‘½ä»¤ æˆ–è€… å®‰è£…libncursesw</span><br><span class="line"></span><br><span class="line">[root]# ./configure --disable-unicode # è¿˜æ˜¯æŠ¥é”™ï¼Œå› æ­¤éœ€è¦å®‰è£…libncursesw </span><br><span class="line">        #  è¿™é‡Œæˆ‘ä»¬å®‰è£… libncursesw lib[ncursesw] çš„å¼€å‘ç‰ˆæœ¬ ncurses-devel</span><br><span class="line">[root]#  yum -y install ncurses-devel # -y è¡¨ç¤ºä¸ç”¨ç»è¿‡æˆ‘åŒæ„ç›´æ¥æ‰§è¡Œå‘½ä»¤</span><br><span class="line">[root]# ./configure # å†æ¬¡æ‰§è¡Œç¼–è¯‘å‰è®¾ç½®</span><br><span class="line">[root]# make # æ­¤å‘½ä»¤å¯¹äºä¸Šé¢çš„Makefileè¯´æ˜æ–‡ä»¶ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤ç›¸å½“äºå®‰è£…ï¼Œå®‰è£…çš„å†…å®¹ä¸ºMakefileå†™çš„</span><br><span class="line">[root]# make install # å°†ç¼–è¯‘å¥½çš„å®‰è£…åŒ…è¿›è¡Œå®‰è£…</span><br><span class="line">[root]# ls /usr/local/bin # å› ä¸ºæ˜¯æœ¬åœ°è‡ªå·±ç¼–è¯‘å®‰è£…ï¼Œæ‰€ä»¥ å®‰è£…å¥½åï¼Œ</span><br><span class="line">        # ä¼šé»˜è®¤å°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾ç½®äºlocal/binä¸‹ï¼Œä¸è¿‡ä¹Ÿå¯èƒ½åœ¨ /usr/binï¼Œå¯ä»¥æ³¨æ„ä¸‹ã€‚</span><br><span class="line">htop</span><br><span class="line">[root]# /usr/local/bin/htop # å› ä¸ºhtopæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤ç›´æ¥é€šè¿‡è·¯å¾„æ–‡ä»¶å¯ç›´æ¥è¿è¡Œå‘½ä»¤ï¼Œ</span><br><span class="line">        # å¦‚æœåœ¨/usr/bin/ä¸‹æœ‰htopï¼Œä¼°è®¡å¯ç›´æ¥æ‰§è¡Œ htop</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/linux/htop.png" alt title class>                <p></p>            </figure><h4 id="rarç¼–è¯‘å®‰è£…"><a href="#rarç¼–è¯‘å®‰è£…" class="headerlink" title="rarç¼–è¯‘å®‰è£…"></a>rarç¼–è¯‘å®‰è£…</h4><ul><li>åœ¨<a href="https://www.rarlab.com/" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹ï¼Œæ‰¾åˆ° å®‰è£…åŒ…<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ä¸‹é¢å‘½ä»¤è¯·ä½¿ç”¨è¶…çº§ç”¨æˆ·æƒé™ï¼š</span><br><span class="line"></span><br><span class="line">[root]# wget https://www.rarlab.com/rar/rarlinux-x64-6.0.1.tar.gz</span><br><span class="line">[root]# tar -zxvf rarlinux-x64-6.0.1.tar.gz</span><br><span class="line">[root]# ls # å‘ç°é‡Œé¢æœ‰å·²ç»æœ‰ç¼–è¯‘å¥½çš„rar å’Œ unrar å¯æ‰§è¡Œç¨‹åºï¼Œå› æ­¤ä¸éœ€è¦ç¼–è¯‘ï¼Œç›´æ¥å®‰è£…å³å¯ ï¼›</span><br></pre></td></tr></table></figure></li></ul><figure class="image-box">                <img src="/image/linux/rar.png" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root]# make # æ­¤å‘½ä»¤å¯¹äºä¸Šé¢çš„Makefileè¯´æ˜æ–‡ä»¶ï¼Œæ‰§è¡Œæ­¤å‘½ä»¤ç›¸å½“äºå®‰è£…ï¼Œå®‰è£…çš„å†…å®¹ä¸ºMakefileå†™çš„</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹ç¯å¢ƒå˜é‡<br>æˆ‘ä»¬è‡ªå·±ç¼–è¯‘å®‰è£…çš„ç¨‹åºï¼Œé»˜è®¤æ”¾ç½®åœ¨  /usr/local/bin ä¸‹ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ æ‰æ–¹ä¾¿ä½¿ç”¨å®‰è£…çš„ç¨‹åºï¼Œ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># nano ~/.bash_profile</span><br><span class="line">PATH=$PATH:/usr/local/php5/bin</span><br><span class="line">export PATH</span><br><span class="line">#  source /etc/profile æˆ–æ‰§è¡Œç‚¹å‘½ä»¤ ./profile ä½¿å…¶ä¿®æ”¹ç”Ÿæ•ˆã€‚</span><br><span class="line">#  å…³é—­ç»ˆç«¯ï¼Œé‡æ–°æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå³å¯ä½¿ç”¨å®‰è£…çš„å‘½ä»¤</span><br></pre></td></tr></table></figure><ul><li>å‹ç¼©ã€è§£å‹æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rar a sort.rar sort/  # a æ˜¯addç¼©å†™ï¼Œæ·»åŠ </span><br><span class="line">unrar e sort.rar  # e æ˜¯extract ç¼©å†™ æå– å–å‡º</span><br><span class="line">unrar l sort.rar  # ä¸è§£å¼€ï¼Œç›´æ¥çœ‹å†…å®¹</span><br></pre></td></tr></table></figure></li></ul><h4 id="ä¿®æ”¹ç¯å¢ƒå˜é‡"><a href="#ä¿®æ”¹ç¯å¢ƒå˜é‡" class="headerlink" title="ä¿®æ”¹ç¯å¢ƒå˜é‡"></a>ä¿®æ”¹ç¯å¢ƒå˜é‡</h4><p>è§ã€Šrarç¼–è¯‘å®‰è£…ã€‹</p><h3 id="å®‰è£…centos-æœåŠ¡å™¨"><a href="#å®‰è£…centos-æœåŠ¡å™¨" class="headerlink" title="å®‰è£…centos æœåŠ¡å™¨"></a>å®‰è£…centos æœåŠ¡å™¨</h3><p>è¿™é‡Œé€‰ç”¨ CentOS-7-x86_64-Minimal-2009 ç‰ˆæœ¬ï¼›<br>ä¸‹é¢ç®­å¤´éƒ¨åˆ†æ˜¯è®¾ç½®ç£ç›˜ï¼Œç‚¹å‡»è¿›å»ï¼Œï¼ŒæŒ‰ç…§é»˜è®¤é€‰ä¸­ä¸‹ï¼Œç„¶åç‚¹å‡»done å³å¯ï¼Œå…¶ä»–è®¾ç½®å®‰è£…é»˜è®¤æ¥ï¼š<br>è¿™ä¸ªé¡µé¢è¿˜å¯è®¾ç½®å…¶ä»–é…ç½®ï¼Œä¸è¿‡ä¸€èˆ¬é»˜è®¤å°±è¡Œäº†ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸‹å¯ä»¥è®¾ç½®ä»€ä¹ˆï¼š</p><figure class="image-box">                <img src="/image/linux/ser.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/linux/ser1.png" alt title class>                <p></p>            </figure><p>å› ä¸ºæ˜¯æœåŠ¡å™¨ï¼Œæ‰€æœ‰è¿™é‡Œåªéœ€è®¾ç½®rootå³å¯ï¼Œä¸éœ€è¦è®¾ç½®å…¶ä»–ç”¨æˆ·ã€‚</p><p>ä¸‹é¢å°±æ˜¯ç­‰å¾…å®‰è£…äº†ï¼Œå®‰è£…å¥½åï¼Œä½¿ç”¨rootç™»å½•ï¼š<br><figure class="image-box">                <img src="/image/linux/ser2.png" alt title class>                <p></p>            </figure></p><h4 id="ç½‘ç»œè®¾ç½®åŠå…¶ç›¸å…³å‘½ä»¤"><a href="#ç½‘ç»œè®¾ç½®åŠå…¶ç›¸å…³å‘½ä»¤" class="headerlink" title="ç½‘ç»œè®¾ç½®åŠå…¶ç›¸å…³å‘½ä»¤"></a>ç½‘ç»œè®¾ç½®åŠå…¶ç›¸å…³å‘½ä»¤</h4><p>æŸ¥çœ‹ipä¿¡æ¯çš„ä¸¤ä¸ªå‘½ä»¤<br>ifconfig  æ¯”è¾ƒæ—§çš„å‘½ä»¤ net-toolsä¸­å‘½ä»¤<br>ip addr æ¯”è¾ƒæ–°çš„å‘½ä»¤ iproute2ä¸­çš„å‘½ä»¤<br><a href="https://www.jianshu.com/p/6fff29bd42b3" target="_blank" rel="noopener">å…³äºifconfigä¸ip addr</a></p><p>è®¾ç½®ç½‘ç»œä¸ºæ¡¥æ¥æ¨¡å¼ï¼Œæ–¹ä¾¿å…¶ä»–è™šæ‹Ÿæœºcentosè®¿é—®åˆ°è¿™å°è™šæ‹Ÿæœºï¼š<br><a href="https://www.cnblogs.com/jpfss/p/8616613.html" target="_blank" rel="noopener">VirtualBoxä¸­æœ‰4ä¸­ç½‘ç»œè¿æ¥æ–¹å¼</a><br><a href="https://www.jianshu.com/p/5fc492060e70" target="_blank" rel="noopener">enp0s3 ä¸ ens33</a></p><figure class="image-box">                <img src="/image/linux/ip.png" alt title class>                <p></p>            </figure><p>æ³¨æ„çš„æ˜¯ï¼Œè™šæ‹Ÿæœºé“¾æ¥ç½‘ç»œæ—¶ï¼Œéœ€è¦è®¾ç½®ä¸‹å›¾ ONBOOT = yes,ç„¶åé‡å¯ç”µè„‘ï¼Œå¦åˆ™æ— æ³•é“¾æ¥ç½‘ç»œ<br><figure class="image-box">                <img src="/image/linux/ser3.png" alt title class>                <p></p>            </figure></p><p>å¦‚æœè¦ä½¿ç”¨ifconfigï¼Œéœ€è¦å®‰æ’ net-toolsï¼Œ<br>å®‰è£…ï¼š<code>yum install net-tools</code>ï¼Œç„¶åä¸€è·¯yeså°±è¡Œï¼›</p><p>è¿™é‡Œå¯ä»¥æŸ¥çœ‹ net-tools iproute2 ä¸‹éƒ½æœ‰å“ªäº›å‘½ä»¤<br><figure class="image-box">                <img src="/image/linuxm/lan3.png" alt title class>                <p></p>            </figure></p><p>æŸ¥çœ‹ ifconfig å‘½ä»¤æ˜¯å“ªä¸ªå®‰è£…åŒ…ï¼š<br>ä½¿ç”¨rpm -qf æ¥æŸ¥çœ‹ å®‰è£…æ¨¡å—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[hz@localhost ~]$ which ifconfig</span><br><span class="line">/usr/sbin/ifconfig</span><br><span class="line">[hz@localhost ~]$ rpm -qf /usr/sbin/ifconfig</span><br><span class="line">net-tools-2.0-0.25.20131004git.el7.x86_64 #è¯´æ˜æ˜¯net-toolså®‰è£…æ¨¡æ¿</span><br><span class="line">[hz@localhost ~]$</span><br></pre></td></tr></table></figure></p><h3 id="è§£è¯»ifconfig"><a href="#è§£è¯»ifconfig" class="headerlink" title="è§£è¯»ifconfig"></a>è§£è¯»ifconfig</h3><h4 id="æ—§ç‰ˆ"><a href="#æ—§ç‰ˆ" class="headerlink" title="æ—§ç‰ˆ"></a>æ—§ç‰ˆ</h4><p>å¦‚ä¸‹å‘½ä»¤è¡Œæ‰§è¡Œæ­¤å‘½ä»¤åï¼Œä¼šæ˜¾ç¤ºä¸‰ä¸ªæ¥å£ï¼š</p><ul><li>eth0 å¯¹åº”æœ‰é™è¿æ¥ï¼Œå¯¹åº”ä½ çš„æœ‰çº¿ç½‘å¡ï¼Œä¸€èˆ¬æ˜¯RJ45ç½‘çº¿ï¼Œethæ˜¯ Ethernet çš„ç¼©å†™ï¼Œè¡¨ç¤ºä»¥å¤ªç½‘ï¼Œæœ‰äº›ç”µè„‘å¯èƒ½æœ‰å‡ æ¡ç½‘çº¿è¿ç€ï¼Œæ­¤æ—¶ä¼šæœ‰eth1ï¼Œeth2.</li><li>lo æœ¬åœ°å›ç¯ local loopback ç¼©å†™ï¼Œå¯¹åº”è™šæ‹Ÿç½‘å¡ï¼Œå¯¹åº”ip 127.0.0.1,ä¸€èˆ¬ç”¨äºè®¿é—®è‡ªå·±ï¼›<figure class="image-box">                <img src="/image/linux/lo.png" alt title class>                <p></p>            </figure></li><li>wlan0 å¯¹åº”wi-fi æ— çº¿è¿æ¥ï¼Œå¯¹åº”ä½ çš„æ— çº¿ç½‘å¡ï¼Œwlan æ˜¯ wireless Local Area Network çš„ç¼©å†™ï¼Œè¡¨ç¤ºæ— çº¿å±€åŸŸç½‘ï¼Œè‹¥ä½ æœ‰å‡ ä¸ªæ— çº¿ç½‘å¡ï¼Œå°±æœ‰wlan1 wlan2â€¦</li></ul><p>å…³äºä¸‹å›¾çš„è§£æï¼š<br>çº¢æ¡†æ¡†å‡ºçš„ï¼Œ æ— çº¿æ²¡æœ‰å‘åŒ…å’Œæ”¶åŒ…ï¼Œ æœ¬åœ°å›ç¯æœ‰åŒ…çš„å‘é€ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼› æœ€å¤šçš„å‘åŒ…æ•°é‡æ˜¯æœ‰çº¿è¿æ¥ï¼Œæ‰€ä»¥åˆ¤å®šæœ‰çº¿è¿æ¥ã€‚<br><figure class="image-box">                <img src="/image/linuxm/lan1.png" alt title class>                <p></p>            </figure></p><h4 id="æ–°ç‰ˆ"><a href="#æ–°ç‰ˆ" class="headerlink" title="æ–°ç‰ˆ"></a>æ–°ç‰ˆ</h4><ul><li>enp0s3 en ä»£è¡¨ä»¥å¤ªç½‘å¡ï¼Œæ˜¯Ethernetçš„ç¼©å†™ï¼Œ p0s3 ä»£è¡¨PCIæ¥å£çš„ç‰©ç†åœ°å€ä¸ºï¼ˆ0ï¼Œ3ï¼‰ï¼Œ<br>å…¶ä¸­æ¨ªåæ ‡ä»£è¡¨bugæ€»çº¿ï¼Œçºµåæ ‡ä»£è¡¨slot æ§½ã€æ’å£</li></ul><p>è¿˜æœ‰ä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼Œå¯ä»¥ä¸ç”¨ç®¡ï¼Œè¿™é‡Œå°±ä¸åˆ—å‡ºäº†ã€‚<br><figure class="image-box">                <img src="/image/linuxm/lan2.png" alt title class>                <p></p>            </figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº†è§£æ§åˆ¶å°</title>
      <link href="/2021/04/06/console/"/>
      <url>/2021/04/06/console/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="preserve-log"><a href="#preserve-log" class="headerlink" title="preserve log"></a>preserve log</h3><p>ä¿ç•™é¡µé¢è·³è½¬å‰çš„è¯·æ±‚æ—¥å¿—ï¼Œæ³¨æ„æ­¤åŠŸèƒ½ä¸‹çš„è·³è½¬å‰è¯·æ±‚æ—¥å¿— å¯èƒ½æœ‰å¤±çœŸæƒ…å†µï¼Œ è°·æ­Œ å’Œ ç«ç‹ å„ä¸ªæµè§ˆå™¨è¡¨ç°ä¸ä¸€è‡´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯å·¥å…· </tag>
            
            <tag> æ§åˆ¶å° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†è¯»httpåè®®</title>
      <link href="/2021/03/24/http_again/"/>
      <url>/2021/03/24/http_again/</url>
      
        <content type="html"><![CDATA[<h2 id="TCP-IPåˆ†å±‚åè®®æ¨¡å‹"><a href="#TCP-IPåˆ†å±‚åè®®æ¨¡å‹" class="headerlink" title="TCP/IPåˆ†å±‚åè®®æ¨¡å‹"></a>TCP/IPåˆ†å±‚åè®®æ¨¡å‹</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å®è´¨ä¸ŠTCP/IPæœ‰ä¸ƒå±‚æ¨¡å‹ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬åªç®€åŒ–æˆ å››å±‚æ¨¡å‹è®¨è®ºå³å¯ã€‚</p><h3 id="TCP-IPçš„ä¸ƒå±‚æ¨¡å‹"><a href="#TCP-IPçš„ä¸ƒå±‚æ¨¡å‹" class="headerlink" title="TCP/IPçš„ä¸ƒå±‚æ¨¡å‹"></a>TCP/IPçš„ä¸ƒå±‚æ¨¡å‹</h3><p><a href="https://blog.csdn.net/qq_41681241/article/details/86654125" target="_blank" rel="noopener">å‚è€ƒ</a><br><figure class="image-box">                <img src="/image/http_again/level1.png" alt title class>                <p></p>            </figure></p><h3 id="TCP-IPçš„å››å±‚æ¨¡å‹-ä¸»æµ"><a href="#TCP-IPçš„å››å±‚æ¨¡å‹-ä¸»æµ" class="headerlink" title="TCP/IPçš„å››å±‚æ¨¡å‹(ä¸»æµ)"></a>TCP/IPçš„å››å±‚æ¨¡å‹(ä¸»æµ)</h3><h4 id="httpåè®®æ˜¯TCP-IPåè®®çš„ä¸€ä¸ªå­é›†"><a href="#httpåè®®æ˜¯TCP-IPåè®®çš„ä¸€ä¸ªå­é›†" class="headerlink" title="httpåè®®æ˜¯TCP/IPåè®®çš„ä¸€ä¸ªå­é›†"></a>httpåè®®æ˜¯TCP/IPåè®®çš„ä¸€ä¸ªå­é›†</h4><p>httpåè®®æ˜¯æ„å»ºåœ¨TCP/IPåè®®åŸºç¡€ä¸Šçš„ï¼Œæ˜¯TCP/IPåè®®çš„ä¸€ä¸ªå­é›†ï¼›</p><h4 id="TCP-IPåè®®æ˜¯æœ‰å››å±‚åè®®ç»„æˆåº¦ç³»ç»Ÿï¼š"><a href="#TCP-IPåè®®æ˜¯æœ‰å››å±‚åè®®ç»„æˆåº¦ç³»ç»Ÿï¼š" class="headerlink" title="TCP/IPåè®®æ˜¯æœ‰å››å±‚åè®®ç»„æˆåº¦ç³»ç»Ÿï¼š"></a>TCP/IPåè®®æ˜¯æœ‰å››å±‚åè®®ç»„æˆåº¦ç³»ç»Ÿï¼š</h4><p>åº”ç”¨å±‚ï¼Œä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚<br><figure class="image-box">                <img src="/image/http_again/http1.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¼ è¾“å±‚-æœ‰ä¸¤ä¸ªæ€§è´¨ä¸åŒçš„åè®®ï¼š"><a href="#ä¼ è¾“å±‚-æœ‰ä¸¤ä¸ªæ€§è´¨ä¸åŒçš„åè®®ï¼š" class="headerlink" title="ä¼ è¾“å±‚ æœ‰ä¸¤ä¸ªæ€§è´¨ä¸åŒçš„åè®®ï¼š"></a>ä¼ è¾“å±‚ æœ‰ä¸¤ä¸ªæ€§è´¨ä¸åŒçš„åè®®ï¼š</h4><p>tcp æ˜¯æœ‰è¿æ¥çš„(ä¸‰æ¬¡æ¡æ‰‹)ï¼Œå®‰å…¨ã€ä¸è¿‡æ•ˆç‡ä½ç‚¹ï¼›<br>UDP æ— è¿æ¥ï¼Œä¸å®‰å…¨ï¼Œä¸è¿‡æ•ˆç‡æ›´å¿«ï¼›</p><h4 id="ä¸‹é¢æ˜¯æ•°æ®åŒ…å°è£…è¿‡ç¨‹ï¼š"><a href="#ä¸‹é¢æ˜¯æ•°æ®åŒ…å°è£…è¿‡ç¨‹ï¼š" class="headerlink" title="ä¸‹é¢æ˜¯æ•°æ®åŒ…å°è£…è¿‡ç¨‹ï¼š"></a>ä¸‹é¢æ˜¯æ•°æ®åŒ…å°è£…è¿‡ç¨‹ï¼š</h4><figure class="image-box">                <img src="/image/http_again/data.jpg" alt title class>                <p></p>            </figure><h4 id="å››å±‚æ¨¡å‹å±•ç¤ºhttpä¼ è¾“è¿‡ç¨‹"><a href="#å››å±‚æ¨¡å‹å±•ç¤ºhttpä¼ è¾“è¿‡ç¨‹" class="headerlink" title="å››å±‚æ¨¡å‹å±•ç¤ºhttpä¼ è¾“è¿‡ç¨‹"></a>å››å±‚æ¨¡å‹å±•ç¤ºhttpä¼ è¾“è¿‡ç¨‹</h4><figure class="image-box">                <img src="/image/http_again/datah.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/ceng1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/ceng3.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/ceng2.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/ceng4.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/ceng5.png" alt title class>                <p></p>            </figure><h4 id="httpè¿æ¥ä½•æ—¶ç»“æŸï¼š"><a href="#httpè¿æ¥ä½•æ—¶ç»“æŸï¼š" class="headerlink" title="httpè¿æ¥ä½•æ—¶ç»“æŸï¼š"></a>httpè¿æ¥ä½•æ—¶ç»“æŸï¼š</h4><figure class="image-box">                <img src="/image/http_again/leave.jpg" alt title class>                <p></p>            </figure><h3 id="tcp-ipåè®®ä¸dnsæœåŠ¡å™¨å…³ç³»"><a href="#tcp-ipåè®®ä¸dnsæœåŠ¡å™¨å…³ç³»" class="headerlink" title="tcp\ipåè®®ä¸dnsæœåŠ¡å™¨å…³ç³»"></a>tcp\ipåè®®ä¸dnsæœåŠ¡å™¨å…³ç³»</h3><h4 id="æµè§ˆå™¨æŸ¥è¯¢IPçš„è¿‡ç¨‹ä¸æ˜¯tcp-ipåè®®"><a href="#æµè§ˆå™¨æŸ¥è¯¢IPçš„è¿‡ç¨‹ä¸æ˜¯tcp-ipåè®®" class="headerlink" title="æµè§ˆå™¨æŸ¥è¯¢IPçš„è¿‡ç¨‹ä¸æ˜¯tcp\ipåè®®"></a>æµè§ˆå™¨æŸ¥è¯¢IPçš„è¿‡ç¨‹ä¸æ˜¯tcp\ipåè®®</h4><p>å¦‚ä¸‹å›¾ï¼Œæµè§ˆå™¨è®¿é—®ç«™ç‚¹ï¼Œé¦–å…ˆè®¿é—®dnsæœåŠ¡å™¨ï¼Œè·å–IPåï¼Œ<br>æ‰ç”Ÿæˆhttpè¯·æ±‚ï¼Œä¹‹åæ‰ä¸æœåŠ¡å™¨å»ºç«‹tcp\ipé“¾æ¥ã€‚<br><figure class="image-box">                <img src="/image/http_again/back.jpg" alt title class>                <p></p>            </figure></p><h4 id="è®¿é—®ç½‘é¡µåŒ…å«æŸ¥è¯¢IPä¸å‘é€httpä¸¤ä¸ªè¯·æ±‚"><a href="#è®¿é—®ç½‘é¡µåŒ…å«æŸ¥è¯¢IPä¸å‘é€httpä¸¤ä¸ªè¯·æ±‚" class="headerlink" title="è®¿é—®ç½‘é¡µåŒ…å«æŸ¥è¯¢IPä¸å‘é€httpä¸¤ä¸ªè¯·æ±‚"></a>è®¿é—®ç½‘é¡µåŒ…å«æŸ¥è¯¢IPä¸å‘é€httpä¸¤ä¸ªè¯·æ±‚</h4><p>å¦‚ä¸Šå›¾ï¼Œè®¿é—®ä¸€ä¸ªé¡µé¢ï¼Œè¦åšä¸¤ä¸ªè¯·æ±‚</p><ul><li>æŸ¥è¯¢dnsè·å–IP</li><li>è·å–IPåï¼Œå‘èµ·httpè¯·æ±‚</li></ul><h3 id="å†è¯»å››å±‚æ¨¡å‹"><a href="#å†è¯»å››å±‚æ¨¡å‹" class="headerlink" title="å†è¯»å››å±‚æ¨¡å‹"></a>å†è¯»å››å±‚æ¨¡å‹</h3><h4 id="å›¾ç¤º"><a href="#å›¾ç¤º" class="headerlink" title="å›¾ç¤º"></a>å›¾ç¤º</h4><p>ä¸‹å›¾æ˜¯å·¦ä¾§å®¢æˆ·ç«¯å‘é€httpè¯·æ±‚ï¼Œç»è¿‡å±‚å±‚åŠ é¦–éƒ¨ä¿¡æ¯ï¼Œ<br>ä¼ é€’ç»™æœåŠ¡å™¨ç”µè„‘ï¼Œ<br>å†ç”±æœåŠ¡å™¨ç”µè„‘ï¼Œç»è¿‡å±‚å±‚æ‹†åŒ…ï¼Œ<br>è·å–httpæ•°æ®çš„è¿‡ç¨‹ã€‚</p><p>è·å–httpæ•°æ®åï¼ŒæœåŠ¡ç«¯å“åº”çš„æ•°æ®ä¹Ÿæ˜¯ç»è¿‡ä¸Šé¢ä¸€ä¸ªå¾ªç¯ä¼ é€’ç»™å®¢æˆ·ç«¯çš„ã€‚<br><figure class="image-box">                <img src="/image/http_again/level2.png" alt title class>                <p></p>            </figure></p><h4 id="æœåŠ¡ç«¯æ¥æ”¶æ—¶æ•°æ®åŒ…æ‹†åŒ…è¿‡ç¨‹"><a href="#æœåŠ¡ç«¯æ¥æ”¶æ—¶æ•°æ®åŒ…æ‹†åŒ…è¿‡ç¨‹" class="headerlink" title="æœåŠ¡ç«¯æ¥æ”¶æ—¶æ•°æ®åŒ…æ‹†åŒ…è¿‡ç¨‹"></a>æœåŠ¡ç«¯æ¥æ”¶æ—¶æ•°æ®åŒ…æ‹†åŒ…è¿‡ç¨‹</h4><p>æˆ‘ä»¬å…ˆè¯´æœåŠ¡ç«¯ï¼š<br>ä¸Šå›¾å³ä¾§æ˜¯æœåŠ¡ç«¯å¤„ç† tcp/ipåè®®é“¾æ¥çš„è¿‡ç¨‹ï¼š</p><ul><li><p>æœåŠ¡å™¨ç½‘å¡ æ‹†åŒ…ï¼š<br>ä»¥å¤ªç½‘é¦–éƒ¨å†…å®¹æœ‰ æœåŠ¡å™¨macåœ°å€ï¼ˆå¯¹åº”ç‰©ç†ç½‘å¡åœ°å€ï¼‰ï¼Œè‹¥ä¸è‡ªå·±ä¸€è‡´ï¼Œè¯´æ˜æ˜¯ç»™è‡ªå·±çš„ï¼›<br>å°±ä¼šæŠŠæ•°æ®åŒ…çš„ä»¥å¤ªç½‘é¦–éƒ¨æ‹†æ‰ï¼ŒæŠŠä¸åŒ…å«ä»¥å¤ªç½‘é¦–éƒ¨çš„æ•°æ®åŒ… å‘ç»™ ç½‘ç»œå±‚ï¼›</p></li><li><p>ç½‘ç»œå±‚ ç»§ç»­æ‹†åŒ…ï¼š<br>ç»è¿‡ç½‘å¡æ‹†åŒ…åï¼Œç½‘ç»œå±‚æ”¶åˆ°çš„æ•°æ®åŒ… åªåŒ…å«äº† IPé¦–éƒ¨ã€tcpé¦–éƒ¨ã€httpæ•°æ®ã€‚<br>ç½‘ç»œå±‚æŠŠå…¶ä¸­çš„ IPé¦–éƒ¨ä¿¡æ¯æ‹†å‡ºæ¥è¯»å–å…¶ä¸­ä¿¡æ¯ã€‚<br>IPé¦–éƒ¨ ä¿¡æ¯ä¸­ åŒ…å«äº† IPä¿¡æ¯ï¼Œå¦‚æœIPæ˜¯æœ¬æœºåœ°å€ï¼Œé‚£ä¹ˆå‘å¾€ä¼ è¾“å±‚ï¼›</p></li><li><p>ä¼ è¾“å±‚ ç»§ç»­æ‹†åŒ…ï¼š<br>æ‹†å‡º tcp é¦–éƒ¨ï¼Œ tcpä¿¡æ¯ä¸­åŒ…å«äº† ç«¯å£å·ä¿¡æ¯ï¼Œæ¯”å¦‚443 80 ç­‰ï¼Œå¦‚æœæœ¬æœºä¸­æœ‰å¯¹åº”ç«¯å£å·çš„åº”ç”¨ç¨‹åºï¼Œ<br>å°±æŠŠ åªæœ‰httpæ•°æ®çš„æ•°æ®åŒ… ç»™åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ apache  nginxï¼›</p></li><li><p>åº”ç”¨å±‚ è§£æ http æ•°æ®<br>nginx è§£æ http æ•°æ®ï¼Œ ç„¶ååšå‡ºå“åº”ï¼Œå“åº”çš„httpæ•°æ®ï¼Œä¹Ÿä¼šç»è¿‡å±‚å±‚åŠ æ•°æ® åˆ°è¾¾<br>å®¢æˆ·ç«¯åï¼Œè¢«å±‚å±‚æ‹†åŒ… åˆ°è¾¾ å®¢æˆ·ç«¯å†…çš„ åº”ç”¨ï¼Œå¦‚æµè§ˆå™¨æˆ–appï¼›</p></li></ul><h4 id="ä¸ºäº†ä¸€ä¸ªhttpæ•°æ®ä¼ é€’ï¼ŒåŠ äº†å¾ˆå¤šå…¶ä»–ä¿¡æ¯"><a href="#ä¸ºäº†ä¸€ä¸ªhttpæ•°æ®ä¼ é€’ï¼ŒåŠ äº†å¾ˆå¤šå…¶ä»–ä¿¡æ¯" class="headerlink" title="ä¸ºäº†ä¸€ä¸ªhttpæ•°æ®ä¼ é€’ï¼ŒåŠ äº†å¾ˆå¤šå…¶ä»–ä¿¡æ¯"></a>ä¸ºäº†ä¸€ä¸ªhttpæ•°æ®ä¼ é€’ï¼ŒåŠ äº†å¾ˆå¤šå…¶ä»–ä¿¡æ¯</h4><p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬ä¸ºäº†æ­£ç¡®ä¼ è¾“ä¸€ä¸ªhttpæ•°æ®ï¼Œæœ€åï¼Œç»™è¿™ä¸ªhttpæ•°æ®åŠ äº†å¾ˆå¤šå±‚æ•°æ®ï¼š ä»¥å¤ªç½‘é¦–éƒ¨ï¼ŒIPé¦–éƒ¨ã€tcpé¦–éƒ¨ï¼š<br><figure class="image-box">                <img src="/image/http_again/level3.png" alt title class>                <p></p>            </figure></p><h4 id="ä¼ è¾“å±‚ç†è§£"><a href="#ä¼ è¾“å±‚ç†è§£" class="headerlink" title="ä¼ è¾“å±‚ç†è§£"></a>ä¼ è¾“å±‚ç†è§£</h4><p>ç”µè„‘ä¸­ï¼Œæ˜¯é€šè¿‡ç«¯å£å·æ¥ç¡®å®šåº”ç”¨è½¯ä»¶çš„ã€‚<br>æ‰€ä»¥ä¼ è¾“å±‚çš„é¦–è¦ä»»åŠ¡æ˜¯ è¯†åˆ«å‡ºç«¯å£å·ï¼Œè¯†åˆ«å‡ºç«¯å£å·ï¼Œå°±è¯†åˆ«å‡ºäº†å¯¹åº”çš„åº”ç”¨ç¨‹åºï¼Œ<br>è¿™æ ·å°±çŸ¥é“æŠŠ æ•°æ®åŒ…ä¼ è¾“ç»™ ä¸‹ä¸€æ­¥çš„ åº”ç”¨ç¨‹åºäº†ã€‚</p><h4 id="ç½‘ç»œå±‚çš„ç†è§£"><a href="#ç½‘ç»œå±‚çš„ç†è§£" class="headerlink" title="ç½‘ç»œå±‚çš„ç†è§£"></a>ç½‘ç»œå±‚çš„ç†è§£</h4><p>ä¸€ä¸ªç”µè„‘ä¸ä¸€å®šåªæœ‰ä¸€ä¸ªIPï¼Œå¾ˆå¤šæœåŠ¡å™¨åº”ç”¨è½¯ä»¶å¯ä»¥ è®¾ç½®å¤šä¸ªè™šæ‹Ÿipï¼Œå› æ­¤ ç‰©ç†macåœ°å€èƒ½å”¯ä¸€ç¡®å®šç”µè„‘åœ°å€ï¼›</p><p>ä½†åŒä¸€å°ä¸»æœº å¯èƒ½å¤šä¸ªIPï¼Œéœ€è¦ç½‘ç»œå±‚è¿›ä¸€æ­¥è¯†åˆ«ã€‚</p><h4 id="é“¾è·¯å±‚ç†è§£"><a href="#é“¾è·¯å±‚ç†è§£" class="headerlink" title="é“¾è·¯å±‚ç†è§£"></a>é“¾è·¯å±‚ç†è§£</h4><p>å››å±‚æ¨¡å‹ä¸­ï¼Œé“¾è·¯å±‚åŒ…å«äº†åŸæ¥7å±‚æ¨¡å‹ä¸­çš„ ç‰©ç†å±‚ã€‚</p><h2 id="htmlåè®®åŸºç¡€"><a href="#htmlåè®®åŸºç¡€" class="headerlink" title="htmlåè®®åŸºç¡€"></a>htmlåè®®åŸºç¡€</h2><h3 id="äº†è§£httpåè®®"><a href="#äº†è§£httpåè®®" class="headerlink" title="äº†è§£httpåè®®"></a>äº†è§£httpåè®®</h3><h4 id="TCP-IPçš„å››å±‚æ¨¡å‹"><a href="#TCP-IPçš„å››å±‚æ¨¡å‹" class="headerlink" title="TCP/IPçš„å››å±‚æ¨¡å‹"></a>TCP/IPçš„å››å±‚æ¨¡å‹</h4><p>å‚è€ƒä¸Šé¢ã€ŠTCP/IPåè®®çš„åˆ†å±‚æ¨¡å‹ã€‹</p><h4 id="æ— è¿æ¥-è¯·æ±‚å®Œå³å…³é—­-ä¸-é¢å‘è¿æ¥-ä¸‰æ¬¡æ¡æ‰‹"><a href="#æ— è¿æ¥-è¯·æ±‚å®Œå³å…³é—­-ä¸-é¢å‘è¿æ¥-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="æ— è¿æ¥(è¯·æ±‚å®Œå³å…³é—­) ä¸ é¢å‘è¿æ¥(ä¸‰æ¬¡æ¡æ‰‹)"></a>æ— è¿æ¥(è¯·æ±‚å®Œå³å…³é—­) ä¸ é¢å‘è¿æ¥(ä¸‰æ¬¡æ¡æ‰‹)</h4><p>å¦‚é¢˜ã€‚httpæ‹¥æœ‰æ­¤ç‰¹æ€§ã€‚</p><h4 id="æ— çŠ¶æ€"><a href="#æ— çŠ¶æ€" class="headerlink" title="æ— çŠ¶æ€"></a>æ— çŠ¶æ€</h4><p>å¯¹äºæœåŠ¡å™¨è€Œè¨€ï¼Œæ— è®ºç¬¬ä¸€æ¬¡è¿˜æ˜¯ç¬¬å‡ æ¬¡è¯·æ±‚ éƒ½ä¸€æ ·ï¼ŒæœåŠ¡å™¨è¿”å›çš„ä¸œè¥¿æ˜¯ä¸€æ ·çš„ï¼ŒæœåŠ¡å™¨ä¸ä¼šè®°ä½ä¹‹å‰çš„è¯·æ±‚æƒ…å†µï¼Œ<br>è¿™å°±æ˜¯httpè¯·æ±‚çš„æ— çŠ¶æ€æ€§</p><h4 id="ä¸¤ç§ä¿æŒè¿æ¥çŠ¶æ€çš„æ‰‹æ®µï¼šcookieä¸session"><a href="#ä¸¤ç§ä¿æŒè¿æ¥çŠ¶æ€çš„æ‰‹æ®µï¼šcookieä¸session" class="headerlink" title="ä¸¤ç§ä¿æŒè¿æ¥çŠ¶æ€çš„æ‰‹æ®µï¼šcookieä¸session"></a>ä¸¤ç§ä¿æŒè¿æ¥çŠ¶æ€çš„æ‰‹æ®µï¼šcookieä¸session</h4><p>å‚è€ƒã€Šsessionã€‹</p><h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p> å¦‚ä¸‹ç”¨æˆ·ç™»å½•ï¼Œåå°ç”Ÿæˆsessionï¼Œç„¶åå°†sessionå†™å…¥cookieï¼Œé¡µé¢çš„åç»­æ“ä½œéƒ½é€šè¿‡cookieè¯»å–ï¼Œå¯¹æ¯”sessionã€‚<br> <figure class="image-box">                <img src="/image/http_again/sess.png" alt title class>                <p></p>            </figure></p><h4 id="session-ä¸€èˆ¬äº-cookieä¸€èµ·ä½¿ç”¨"><a href="#session-ä¸€èˆ¬äº-cookieä¸€èµ·ä½¿ç”¨" class="headerlink" title="session ä¸€èˆ¬äº cookieä¸€èµ·ä½¿ç”¨"></a>session ä¸€èˆ¬äº cookieä¸€èµ·ä½¿ç”¨</h4><p>æ˜¾ç„¶æ— çŠ¶æ€æ€§è´¨éš¾ä»¥æ»¡è¶³æŸäº›éœ€æ±‚ï¼Œå› æ­¤äº§ç”Ÿäº†ä¸¤ç§ä¿æŒçŠ¶æ€çš„æ‰‹æ®µcookieä¸sessionï¼›<br>å‰è€…å­˜å‚¨äºå®¢æˆ·ç«¯ï¼Œåè€…å­˜å‚¨äºæœåŠ¡ç«¯ï¼›<br>æ¯”å¦‚ä½ ä¹‹å‰åšè¿‡ ç™»å½•çš„httpè¯·æ±‚ï¼Œä½ å°±æœ‰cookieï¼Œ ç¬¬äºŒæ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè™½ç„¶è¯·æ±‚è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œ<br>ä½†æ˜¯é€šè¿‡cookieè¿™ç§æŠ€æœ¯æ‰‹æ®µï¼Œå¯ä»¥ä¿å­˜ä¹‹å‰çš„è¯·æ±‚ä¿¡æ¯ï¼Œä¸ºä¸‹æ¬¡æœåŠ¡å™¨å“åº”æä¾›ä¿¡æ¯ã€‚</p><p>ä¹Ÿç§°ä¸ºä¼šè¯è·Ÿè¸ªæŠ€æœ¯ã€‚</p><p>session åŸºæœ¬ä¸Šè¦ä¸ cookie ä¸€èµ·ä½¿ç”¨ï¼›<br>å¦‚ä¸‹å›¾ï¼Œé€šè¿‡sessionä¿¡æ¯ è®¾ç½®cookieï¼Œé€šè¿‡cookieï¼Œæ¯æ¬¡æ›´æ–°sessionä¿¡æ¯ï¼Œè¿›è€Œæ›´æ–°cookieã€‚<br><figure class="image-box">                <img src="/image/http_again/cookie.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/cookie1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/cookie2.jpg" alt title class>                <p></p>            </figure></p><h4 id="sessionä¸cookie-åŒºåˆ«å’Œå¼‚åŒ"><a href="#sessionä¸cookie-åŒºåˆ«å’Œå¼‚åŒ" class="headerlink" title="sessionä¸cookie åŒºåˆ«å’Œå¼‚åŒ"></a>sessionä¸cookie åŒºåˆ«å’Œå¼‚åŒ</h4><p>å‰è€…ç”¨æˆ·æœåŠ¡ç«¯ï¼Œåè€…å®¢æˆ·ç«¯ï¼›<br>å‰è€…æœ‰æ—¶æ•ˆæ€§ï¼Œå¯èƒ½å¾ˆçŸ­ï¼› åè€…cookieï¼Œå¯ä»¥è®¾ç½®æ— é™é•¿æ—¶é—´ï¼›</p><h4 id="session-ä¹Ÿå¯äº-url-ä¸€èµ·ä½¿ç”¨"><a href="#session-ä¹Ÿå¯äº-url-ä¸€èµ·ä½¿ç”¨" class="headerlink" title="session ä¹Ÿå¯äº url ä¸€èµ·ä½¿ç”¨"></a>session ä¹Ÿå¯äº url ä¸€èµ·ä½¿ç”¨</h4><p>ç™¾åˆ†ä¹‹ä¹åçš„ç½‘ç«™ä½¿ç”¨cookie é…åˆ sessionä½¿ç”¨ï¼›<br>ä¹Ÿæœ‰æµè§ˆå™¨ç¦ç”¨äº†cookieï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½ä½¿ç”¨sessionäº†å‘¢ï¼›<br>æ­¤æ—¶å¯ä»¥ä½¿ç”¨url é…åˆ sessionä½¿ç”¨ï¼›<br>sessionæœ¬è´¨ä¸Šæ˜¯æœåŠ¡ç«¯ç»™å®¢æˆ·ç«¯å­˜å‚¨çš„ç”¨æˆ·æ¡£æ¡ˆï¼›<br>åªè¦æœ‰æŠ€æœ¯èƒ½å°†å®¢æˆ·è®¿é—®ä¿¡æ¯ä¼ ç»™æœåŠ¡ç«¯é‚£ä¹ˆ sessionå°±å¯ä»¥å‘æŒ¥æ¡£æ¡ˆå­˜å‚¨ä½œç”¨ï¼›<br>é™¤äº†cookieï¼Œå®¢æˆ·ç«¯å¯é€šè¿‡urlæŠŠç”¨æˆ·ä¿¡æ¯(session)ä¼ ç»™æœåŠ¡ç«¯ï¼š<br>ä¸€ç§æ˜¯ç»™url æ·»åŠ é™„åŠ ä¿¡æ¯(åˆ†å·éš”å¼€)ä¼ ç»™æœåŠ¡ç«¯ï¼š<br><figure class="image-box">                <img src="/image/http_again/url.jpg" alt title class>                <p></p>            </figure><br>ä¸€ç§æ˜¯ç»™urlï¼Œæ·»åŠ æŸ¥è¯¢ä¿¡æ¯ï¼š<br><figure class="image-box">                <img src="/image/http_again/url1.jpg" alt title class>                <p></p>            </figure></p><h3 id="httpçš„é•¿çŸ­è¿æ¥-æœ¬è´¨æ˜¯TCPé•¿çŸ­è¿æ¥"><a href="#httpçš„é•¿çŸ­è¿æ¥-æœ¬è´¨æ˜¯TCPé•¿çŸ­è¿æ¥" class="headerlink" title="httpçš„é•¿çŸ­è¿æ¥ æœ¬è´¨æ˜¯TCPé•¿çŸ­è¿æ¥"></a>httpçš„é•¿çŸ­è¿æ¥ æœ¬è´¨æ˜¯TCPé•¿çŸ­è¿æ¥</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>httpåè®®æ˜¯åº”ç”¨å±‚çš„åè®®ï¼Œè€Œè¿æ¥æ˜¯ä¼ è¾“çš„æ„æ€ï¼›<br>å› æ­¤httpçš„é•¿çŸ­è¿æ¥ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¼ è¾“å±‚çš„TCPåè®®ï¼›</p><h4 id="http1-1é»˜è®¤é•¿è¿æ¥"><a href="#http1-1é»˜è®¤é•¿è¿æ¥" class="headerlink" title="http1.1é»˜è®¤é•¿è¿æ¥"></a>http1.1é»˜è®¤é•¿è¿æ¥</h4><p>http1.0é»˜è®¤ç”¨çŸ­è¿æ¥ï¼›<br>http1.1é»˜è®¤ç”¨é•¿è¿æ¥ï¼›</p><h4 id="é•¿è¿æ¥éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¯æŒ"><a href="#é•¿è¿æ¥éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¯æŒ" class="headerlink" title="é•¿è¿æ¥éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¯æŒ"></a>é•¿è¿æ¥éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½æ”¯æŒ</h4><p>å¦‚é¢˜ã€‚</p><h4 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h4><p>é•¿è¿æ¥é€‚åˆ è¦é¢‘ç¹è¯·æ±‚çš„ï¼›<br>çŸ­è¿æ¥é€‚åˆ ä¸å¸¸è¯·æ±‚ï¼›</p><h4 id="é•¿è¿æ¥è¦è€ƒè™‘çš„"><a href="#é•¿è¿æ¥è¦è€ƒè™‘çš„" class="headerlink" title="é•¿è¿æ¥è¦è€ƒè™‘çš„"></a>é•¿è¿æ¥è¦è€ƒè™‘çš„</h4><p>æœåŠ¡ç«¯åº”è¯¥è¦è€ƒè™‘ å“ªäº›è¿æ¥å¦‚æœé•¿æ—¶é—´å¤„äºç©ºé—²ï¼Œå°±åº”è¯¥å…³é—­è¿æ¥ï¼›<br>æˆ–è€…å½“ä¸€å°ç”µè„‘äºæœåŠ¡å™¨é•¿è¿æ¥è¶…è¿‡ä¸€å®šæ•°é‡æ—¶ï¼Œå…³é—­ä¸€äº›é•¿è¿æ¥ï¼›</p><h3 id="ä»£ç†-ä¸-æŠ“åŒ…"><a href="#ä»£ç†-ä¸-æŠ“åŒ…" class="headerlink" title="ä»£ç† ä¸ æŠ“åŒ…"></a>ä»£ç† ä¸ æŠ“åŒ…</h3><p>å¦‚ä¸‹ä¸ºä»€ä¹ˆå¾ˆå¤šæŠ“åŒ…å·¥å…·éƒ½ä½¿ç”¨äº†ä»£ç†å‘¢ï¼Œ<br>å› ä¸ºæŠ“åŒ…å·¥å…·éƒ½éœ€è¦æŠ“å–è¯·æ±‚çš„å…¥å‚å’Œè¿”å›ï¼Œåªæœ‰é€šè¿‡ä¸€å±‚æŠ“åŒ…å·¥å…·çš„ä»£ç†ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½å‘å¾€æŠ“åŒ…ä»£ç†æœåŠ¡å™¨ï¼Œ<br>è¿›è¡Œè½¬å‘ï¼Œå¦‚æ­¤ï¼ŒæŠ“åŒ…å·¥å…·å°±å¯ä»¥æŠ“å– å…¥å‚å’Œå“åº”ï¼Œå¸‚é¢ä¸Šåœºæ™¯æŠ“åŒ…å·¥å…·éƒ½æœ‰ç”¨ä»£ç†ï¼Œå¯ä»¥è¿™æ ·éªŒè¯ï¼š<br>æ‰“å¼€ä¸€ä¸ªæŠ“åŒ…å·¥å…·ï¼Œç„¶åç‚¹å‡»æµè§ˆå™¨çš„ä»£ç†è®¾ç½®ï¼Œæ­¤æ—¶åº”è¯¥æµè§ˆå™¨èµ°äº†ä»£ç†äº†<br><figure class="image-box">                <img src="/image/http_again/proxy1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/proxy.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç½‘å…³"><a href="#ç½‘å…³" class="headerlink" title="ç½‘å…³"></a>ç½‘å…³</h3><p>ç½‘å…³è·Ÿä»£ç†ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œä»£ç†åªèƒ½è½¬å‘åè®®ç›¸åŒçš„è¯·æ±‚ï¼›<br>ç½‘å…³åˆ™æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼›<br>ç½‘å…³æ˜¯ä¸€ä¸ªåè®®è½¬æ¢å™¨ã€‚<br><figure class="image-box">                <img src="/image/http_again/gateway.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/gateway1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/gateway2.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/gateway3.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><h4 id="ä¸€èˆ¬å¯¹é™æ€èµ„æºç¼“å­˜"><a href="#ä¸€èˆ¬å¯¹é™æ€èµ„æºç¼“å­˜" class="headerlink" title="ä¸€èˆ¬å¯¹é™æ€èµ„æºç¼“å­˜"></a>ä¸€èˆ¬å¯¹é™æ€èµ„æºç¼“å­˜</h4><p>ä¸€èˆ¬é¡µé¢å¯¹è¯·æ±‚é¢‘ç‡ä¸å¤§çš„åšç¼“å­˜ï¼Œæ¯”å¦‚é™æ€èµ„æºï¼Œå¦‚jsã€cssã€å›¾ç‰‡ç­‰ï¼›</p><h4 id="ç¼“å­˜ä¸€èˆ¬é€šè¿‡è¯·æ±‚å¤´ä¸å“åº”å¤´å®ç°"><a href="#ç¼“å­˜ä¸€èˆ¬é€šè¿‡è¯·æ±‚å¤´ä¸å“åº”å¤´å®ç°" class="headerlink" title="ç¼“å­˜ä¸€èˆ¬é€šè¿‡è¯·æ±‚å¤´ä¸å“åº”å¤´å®ç°"></a>ç¼“å­˜ä¸€èˆ¬é€šè¿‡è¯·æ±‚å¤´ä¸å“åº”å¤´å®ç°</h4><figure class="image-box">                <img src="/image/http_again/cache.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/cache1.jpg" alt title class>                <p></p>            </figure><p>Expires ä¸ Cache-ConTrol çš„ max-ageå…±å­˜æ—¶ï¼Œä¼˜å…ˆçº§æ¯” max-ageåœ°ï¼›<br><figure class="image-box">                <img src="/image/http_again/cache2.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/cache3.jpg" alt title class>                <p></p>            </figure><br>Etagä¼˜å…ˆçº§æ¯” Last-Modified é«˜ï¼›</p><h4 id="è¯·æ±‚åœºæ™¯demo"><a href="#è¯·æ±‚åœºæ™¯demo" class="headerlink" title="è¯·æ±‚åœºæ™¯demo"></a>è¯·æ±‚åœºæ™¯demo</h4><figure class="image-box">                <img src="/image/http_again/cache4.jpg" alt title class>                <p></p>            </figure><p>å¦‚æœè¿‡äº†Expiresæ—¶é—´ï¼Œä½†æ˜¯æ–‡ä»¶åˆæ²¡æœ‰ä¿®æ”¹å‘¢ï¼Œæ­¤æ—¶å¼•å…¥ Last-Modifiedï¼Œå¦‚æœExpiresè¿‡æœŸï¼Œä½†Last-Modifiedæ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆè®¤ä¸ºæ–‡ä»¶æ˜¯åŒä¸€ä¸ªï¼Œè¿”å›304ï¼›<br>Last-Modifiedä¼˜å…ˆçº§æ¯”Expiresé«˜ã€‚<br><figure class="image-box">                <img src="/image/http_again/cache5.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/cache5-1.jpg" alt title class>                <p></p>            </figure></p><p>Last-Modifiedæ˜¯ä¸€ä¸ªç§’æˆ–è€…æ¯«ç§’å•ä½ï¼Œä¹Ÿæœ‰å¯èƒ½åœ¨åŒä¸€ç§’ç”šè‡³æ¯«ç§’å†…ï¼Œæ–‡ä»¶ä¹Ÿè¢«æ”¹å˜çš„æƒ…å†µï¼Œæ­¤æ—¶å¼•å…¥ Etag ä½œä¸ºæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œ<br>å¦‚æœ Etag æ”¹å˜ï¼Œå…¶ä»–ç¼“å­˜å¤´éƒ½æ— æ•ˆï¼ŒEtagä¼˜å…ˆçº§æœ€é«˜ã€‚<br>å¦‚æœEtagæœªæ”¹å˜ï¼Œåˆ™ç›´æ¥è®¤ä¸º 304ï¼›<br><figure class="image-box">                <img src="/image/http_again/cache6.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/cache6-1.jpg" alt title class>                <p></p>            </figure></p><h3 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸€ä¸ªåŸå¸‚åªæœ‰ç«è½¦ç«™æ‰èƒ½å”®ç¥¨ï¼Œ<br>æ­¤æ—¶åŸä¸œã€åŸè¥¿ã€åŸåŒ—ã€åŸå— çš„äººéƒ½åªèƒ½å»ç«è½¦ç«™ä¹°ç¥¨ï¼Œ<br>ä¸€æ¥åŠ å¤§äº†ä¹°ç¥¨äººè´­ç¥¨æ•ˆç‡ï¼Œè®©è´­ç¥¨æ›´åŠ éº»çƒ¦ï¼›<br>äºŒæ¥åŠ å¤§äº†ç«è½¦ç«™æ‰¿å—å‹åŠ›ï¼Œå…¨åŸçš„äººéƒ½å»ç«è½¦ç«™ä¹°ç¥¨ï¼Œç«è½¦ç«™å°±è¿™ä¹ˆå¤§ï¼Œæ— æ³•æ‰©å»ºï¼Œè¿™æ ·ç«è½¦ç«™å°±æ‰¿å—äº†å¾ˆå¤§çš„å”®ç¥¨å‹åŠ›ã€‚<br>æ­¤æ—¶ç«è½¦ç«™åœ¨åŸå¸‚å„åœ°è®¾ç½®äº† ç«è½¦ç¥¨ä»£å”®ç‚¹ï¼Œæ—¢æ–¹ä¾¿äº†è´­ç¥¨äººï¼Œä¹Ÿå‡è½»äº†ç«è½¦ç«™æ€»ç«™çš„å‹åŠ›ï¼›<br>è€Œcdnå°±ç±»ä¼¼è¿™æ ·çš„ç«è½¦ç¥¨ä»£å”®ç‚¹ã€‚<br><figure class="image-box">                <img src="/image/http_again/cdn.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ul><li>æé«˜äº†è®¿é—®é€Ÿåº¦ï¼›<br>ä¸€ä¸ªæ˜¯å°±è¿‘æé«˜äº†è®¿é—®é€Ÿåº¦ï¼›<br>å¦å¤–ä¸€æ–¹é¢ï¼Œæ¯”å¦‚åŒ—æ–¹å¤§å¤šäººç”¨è”è°ƒï¼Œå—æ–¹å¤§å¤šç”¨ç”µä¿¡ï¼Œæ­¤æ—¶åŒ—æ–¹äººé€šè¿‡è”è°ƒcdnæœåŠ¡å™¨è‚¯å®šè¦æ¯”ç”µä¿¡cdnæœåŠ¡å™¨å¿«ã€‚</li><li>å‡è½»äº†å¯¹æœåŠ¡ç«¯æ€»ç«™è®¿é—®çš„å‹åŠ›ï¼›</li></ul><h4 id="å·¥ä½œæœºåˆ¶"><a href="#å·¥ä½œæœºåˆ¶" class="headerlink" title="å·¥ä½œæœºåˆ¶"></a>å·¥ä½œæœºåˆ¶</h4><figure class="image-box">                <img src="/image/http_again/cdn4.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/cdn3.jpg" alt title class>                <p></p>            </figure><h3 id="å†…å®¹åå•†æœºåˆ¶ï¼šä¸åŒåœ°åŒºè®¿é—®ï¼Œè¿”å›ä¸åŒè¯­è¨€é¡µ"><a href="#å†…å®¹åå•†æœºåˆ¶ï¼šä¸åŒåœ°åŒºè®¿é—®ï¼Œè¿”å›ä¸åŒè¯­è¨€é¡µ" class="headerlink" title="å†…å®¹åå•†æœºåˆ¶ï¼šä¸åŒåœ°åŒºè®¿é—®ï¼Œè¿”å›ä¸åŒè¯­è¨€é¡µ"></a>å†…å®¹åå•†æœºåˆ¶ï¼šä¸åŒåœ°åŒºè®¿é—®ï¼Œè¿”å›ä¸åŒè¯­è¨€é¡µ</h3><h4 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/http_again/accept1.jpg" alt title class>                <p></p>            </figure><p>åŒä¸€ä¸ªurlï¼Œä¸åŒåœ°åŒºè®¿é—®æ—¶ï¼Œå¯èƒ½å‡ºç°ä¸åŒè¯­è¨€çš„é¡µé¢ï¼Œ<br>è¿™ä¸æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯å†…å®¹åå•†è¿”å›æœºåˆ¶æœ‰å…³ï¼Œ<br>ç›®å‰ä¸»æµçš„å†…å®¹åå•†æœºåˆ¶æ˜¯ æœåŠ¡ç«¯åˆ¤æ–­è¯·æ±‚å¤´ä¿¡æ¯ï¼Œè¿›è¡Œå†…å®¹è¿”å›ï¼Œ<br>å¦‚ä¸‹æ˜¯ä¸»è¦çš„å†…å®¹åå•† çš„è¯·æ±‚å¤´ï¼š</p><figure class="image-box">                <img src="/image/http_again/accept.jpg" alt title class>                <p></p>            </figure><h4 id="è¿‘ä¼¼åŒ¹é…-q"><a href="#è¿‘ä¼¼åŒ¹é…-q" class="headerlink" title="è¿‘ä¼¼åŒ¹é… q"></a>è¿‘ä¼¼åŒ¹é… q</h4><p>ä¸‹å›¾ qç”¨æ¥è¡¨ç¤ºä¼˜å…ˆçº§æƒé‡ï¼Œç”¨äºè¿‘ä¼¼åŒ¹é…ï¼š<br><figure class="image-box">                <img src="/image/http_again/accept2.jpg" alt title class>                <p></p>            </figure></p><h3 id="æ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½"><a href="#æ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½" class="headerlink" title="æ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½"></a>æ–­ç‚¹ç»­ä¼ å’Œå¤šçº¿ç¨‹ä¸‹è½½</h3><h4 id="Range"><a href="#Range" class="headerlink" title="Range"></a>Range</h4><p>æ–­ç‚¹ç»­ä¼ çš„è¯·æ±‚ï¼Œè¯·æ±‚å¤´ä¼šåŒ…å« Range è¯·æ±‚å¤´ï¼š<br><figure class="image-box">                <img src="/image/http_again/range0.jpg" alt title class>                <p></p>            </figure><br>è¿…é›·çš„ä¸‹è½½æš‚åœä¸ç»§ç»­ä¸‹è½½ï¼Œæˆ–è€… ä¸‹è½½è¿‡ç¨‹ ç½‘ç»œå¼‚å¸¸æˆ–ä¸­æ–­ï¼Œç½‘ç»œè¿æ¥å ç»§ç»­ä¸‹è½½ï¼Œè¿™äº›éƒ½æ˜¯æ–­ç‚¹ç»­ä¼ ã€‚</p><figure class="image-box">                <img src="/image/http_again/range.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/range1-1.jpg" alt title class>                <p></p>            </figure><h4 id="206"><a href="#206" class="headerlink" title="206"></a>206</h4><p>æ–­ç‚¹ç»­ä¼ æˆåŠŸåè¿”å›çš„çŠ¶æ€ç æ˜¯ 206 è€Œä¸æ˜¯ 200ã€‚<br><figure class="image-box">                <img src="/image/http_again/range1.jpg" alt title class>                <p></p>            </figure></p><h4 id="æ–­ç‚¹ç»­ä¼ è¿‡ç¨‹"><a href="#æ–­ç‚¹ç»­ä¼ è¿‡ç¨‹" class="headerlink" title="æ–­ç‚¹ç»­ä¼ è¿‡ç¨‹"></a>æ–­ç‚¹ç»­ä¼ è¿‡ç¨‹</h4><figure class="image-box">                <img src="/image/http_again/range2.jpg" alt title class>                <p></p>            </figure><h4 id="å¤šçº¿ç¨‹ä¸‹è½½-åˆ†ç‰‡ä¸‹è½½"><a href="#å¤šçº¿ç¨‹ä¸‹è½½-åˆ†ç‰‡ä¸‹è½½" class="headerlink" title="å¤šçº¿ç¨‹ä¸‹è½½(åˆ†ç‰‡ä¸‹è½½)"></a>å¤šçº¿ç¨‹ä¸‹è½½(åˆ†ç‰‡ä¸‹è½½)</h4><p>å¤šçº¿ç¨‹ä¸‹è½½ä¸æ–­ç‚¹ç»­ä¼ ä¸€æ ·ï¼Œåªæ˜¯æ–­ç‚¹ç»­ä¼ æ˜¯è¢«åŠ¨ï¼Œä¸€ä¸ªç‰‡æ®µä¸€ä¸ªç‰‡æ®µä¸‹è½½ï¼›<br>å¤šçº¿ç¨‹ä¸‹è½½æ˜¯ä¸»åŠ¨å°†ä¸‹è½½åˆ‡å‰²æˆå¤šä¸ªç‰‡æ®µï¼ŒåŒæ—¶è¿›è¡Œä¸‹è½½ã€‚</p><h3 id="è¯·æ±‚å¤´"><a href="#è¯·æ±‚å¤´" class="headerlink" title="è¯·æ±‚å¤´"></a>è¯·æ±‚å¤´</h3><h4 id="æ¦‚è¿°-5"><a href="#æ¦‚è¿°-5" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/http_again/http1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/http2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/http3.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/http4.jpg" alt title class>                <p></p>            </figure><h4 id="accept"><a href="#accept" class="headerlink" title="accept"></a>accept</h4><p>406 å“åº”ç ï¼š<br><figure class="image-box">                <img src="/image/http_again/httpattr1.jpg" alt title class>                <p></p>            </figure></p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><figure class="image-box">                <img src="/image/http_again/httpattr2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr3.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr4.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr5.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr6-1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr6-2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpattr7.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/code1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/code2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/code3.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/code4.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/code5.jpg" alt title class>                <p></p>            </figure><h3 id="httpåè®®ç“¶é¢ˆ"><a href="#httpåè®®ç“¶é¢ˆ" class="headerlink" title="httpåè®®ç“¶é¢ˆ"></a>httpåè®®ç“¶é¢ˆ</h3><h4 id="æ¦‚è¿°-6"><a href="#æ¦‚è¿°-6" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸€ä¸ªæµè§ˆå™¨åŒä¸€ä¸ªåŸŸåä¸‹ï¼Œä¸€æ¬¡æœ€å¤š4ä¸ªhttpè¿æ¥è¯·æ±‚ï¼Œåé¢çš„å°†é˜»å¡ï¼›æ ¹æ®å„ä¸ªæµè§ˆå™¨ä¸åŒï¼Œè¿æ¥æ•°é‡ä¸ä¸€æ ·ã€‚<br><figure class="image-box">                <img src="/image/http_again/low.jpg" alt title class>                <p></p>            </figure></p><h4 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h4><figure class="image-box">                <img src="/image/http_again/ws.jpg" alt title class>                <p></p>            </figure><p>websocketçš„ä¼˜ç‚¹ï¼š</p><ul><li>å…¨åŒå·¥è¿æ¥ï¼›</li><li>å‡å°‘é€šä¿¡é‡ï¼Œå¦‚å»ºç«‹wsè¿æ¥åï¼Œåç»­é€šè®¯ä¸ç”¨è¯·æ±‚å¤´ä¿¡æ¯ç­‰ç­‰ã€‚</li></ul><h3 id="spdy"><a href="#spdy" class="headerlink" title="spdy"></a>spdy</h3><figure class="image-box">                <img src="/image/http_again/spdy.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/spdy1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/spdy2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/spdy3.jpg" alt title class>                <p></p>            </figure><h3 id="è®¤è¯†url"><a href="#è®¤è¯†url" class="headerlink" title="è®¤è¯†url"></a>è®¤è¯†url</h3><p><a href="http://www.github.com" target="_blank" rel="noopener">www.github.com</a></p><p>www æ˜¯ä¸»æœºåï¼Œgithub.com æ˜¯åŸŸåï¼›</p><h2 id="httpåè®®è¿›é˜¶"><a href="#httpåè®®è¿›é˜¶" class="headerlink" title="httpåè®®è¿›é˜¶"></a>httpåè®®è¿›é˜¶</h2><h3 id="å¤šç§åŠ å¯†æ–¹å¼-https"><a href="#å¤šç§åŠ å¯†æ–¹å¼-https" class="headerlink" title="å¤šç§åŠ å¯†æ–¹å¼(https)"></a>å¤šç§åŠ å¯†æ–¹å¼(https)</h3><h4 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h4><p>å¯¹ç§°åŠ å¯†ä¹Ÿå«å¯†é’¥åŠ å¯†ï¼ŒåŠ å¯†å’Œè§£å¯†éƒ½ä½¿ç”¨ä¸€ä¸ªå¯†é’¥ã€‚<br>å¦‚ä¸‹å›¾ï¼Œä¼šè¯å¼€å§‹ï¼Œå°èŒ æŠŠå¯†é’¥ key1 å‘ç»™ å°é£ï¼›<br>åé¢å°é£æ¯æ¬¡ä¸å°èŒé€šè¿‡éƒ½é€šè¿‡è¿™ä¸ªå¯†é’¥ key1 åŠ å¯†ã€‚<br><figure class="image-box">                <img src="/image/http_again/https1.jpg" alt title class>                <p></p>            </figure></p><p>è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹å›¾ï¼Œä¸­é—´äººåœ¨ä¸€å¼€å§‹å°±æˆªå–äº†ä»–ä»¬çš„è¯·æ±‚ï¼Œä¸€å¼€å§‹å°±è·å–äº† å°èŒå‘çš„key1å¯†é’¥ï¼Œé‚£ä¹ˆä¸­é—´äººå°±å¯ä»¥è§£å¯†äºŒè€…çš„è°ˆè¯å†…å®¹äº†ã€‚<br><figure class="image-box">                <img src="/image/http_again/https1-1.jpg" alt title class>                <p></p>            </figure></p><h4 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h4><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå°±è¦ç”¨åˆ°éå¯¹ç§°åŠ å¯†ï¼Œ<strong>éå¯¹ç§°åŠ å¯†æœ‰ä¸ªé‡è¦ç‰¹ç‚¹ï¼Œæœ‰å…¬é’¥å’Œç§é’¥ï¼Œå¯ä»¥é€šè¿‡å…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼›ä¹Ÿå¯ä»¥é€šè¿‡ç§é’¥åŠ å¯†ï¼Œå…¬é’¥è§£å¯†</strong>ã€‚<br>å¦‚ä¸‹å›¾ï¼Œå°èŒæŠŠè‡ªå·±çš„å…¬é’¥ key1 å‘ç»™ å°é£ï¼Œå°é£è‡ªå·±è®¾ç½®å¥½ä¸€ä¸ªå¯†é’¥key2ï¼ŒåŒæ—¶ç”¨key1åŠ å¯†key2å¾—åˆ°va3ï¼Œå‘ç»™å°èŒï¼›<br><figure class="image-box">                <img src="/image/http_again/https2.jpg" alt title class>                <p></p>            </figure><br>å°èŒæ”¶åˆ°va3åé€šè¿‡è‡ªå·±çš„ç§é’¥è§£å¯†va3ï¼Œä¹Ÿå¾—åˆ°äº†key2ã€‚<br>æ­¤æ—¶å°é£å’Œå°èŒéƒ½çŸ¥é“äº†å¯†é’¥key2ã€‚<br>ä»–ä»¬ä¹‹é—´å¯ä»¥åƒä¸Šé¢å¯¹ç§°åŠ å¯†ä¸€æ ·ï¼Œé€šè¿‡key2è¿›è¡ŒåŠ å¯†å¯¹è¯ã€‚<br>è€Œä¸­é—´äººç”±äºæ²¡æœ‰å°èŒçš„ç§é’¥ï¼Œå› æ­¤æ— æ³•è§£å¯†va3ï¼Œæ— æ³•è·å–key2ï¼Œå°±æ— æ³•è§£å¯†ä»–ä»¬çš„é€šè¯ã€‚<br>ä¸Šé¢é€šè¿‡éå¯¹ç§°åŠ å¯† æ¥ä¼ è¾“ å¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œä¿è¯å¯¹ç§°åŠ å¯†çš„å¯†é’¥ä¸è¢«ç›—å–ï¼›<br>åæœŸé€šè¿‡å¯¹ç§°åŠ å¯†ç»è¿‡é€šè¯ã€‚<br><figure class="image-box">                <img src="/image/http_again/https3.jpg" alt title class>                <p></p>            </figure></p><p>ä¸è¿‡è¿™æ ·æœ‰ä¸ªé—®é¢˜ï¼Œç”±ä¸Šé¢çŸ¥é“ï¼Œåªè¦èƒ½è·å–å°é£çš„å¯¹ç§°åŠ å¯†å¯†é’¥key2ï¼Œå°±èƒ½è§£å¯†å¯¹è¯ï¼Œå› æ­¤ä¸­é—´äººåœ¨ä»–ä»¬ç¬¬ä¸€æ¬¡ä¼šè¯æ—¶ï¼Œä¸²æ”¹ å°èŒçš„key1ï¼Œæ¢ä¸€ä¸ªè‡ªå·±çš„å…¬é’¥kex1ç»™å°é£ï¼›<br>å°é£é€šè¿‡kex1åŠ å¯†key2å¾—åˆ°va3ï¼› ä¸­é—´äººé€šè¿‡ç§é’¥è§£å¯†va3ï¼Œè·å–key2ï¼Œå†ç”¨key1åŠ å¯†key2è·å¾—va3-1 ç»™ å°èŒï¼Œ<br>å°èŒé€šè¿‡ç§é’¥è§£å¯†va3-1è·å¾—key2.<br>è¿™æ · ä¸‰ä¸ªäººéƒ½è·å¾—äº† å°é£çš„å¯†é’¥key2.<br><figure class="image-box">                <img src="/image/http_again/https4.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/https5.jpg" alt title class>                <p></p>            </figure></p><h4 id="è¯ä¹¦åŠ å¯†-https"><a href="#è¯ä¹¦åŠ å¯†-https" class="headerlink" title="è¯ä¹¦åŠ å¯†(https)"></a>è¯ä¹¦åŠ å¯†(https)</h4><p>ä¸ºäº†è§£å†³ä¸Šé¢é—®é¢˜ï¼Œæ­¤æ—¶å¼•å…¥äº†è¯ä¹¦ï¼Œå¦‚ä¸‹å›¾ï¼Œå°èŒå°†key1å‘ç»™è¯ä¹¦æœºæ„ï¼Œè¯ä¹¦æœºæ„å‘ç»™å°èŒä¸€æœ¬è¯ä¹¦ã€‚</p><p>å°èŒå°†è¯ä¹¦å‘ç»™å°é£ï¼Œå› ä¸ºå„å¤§æµè§ˆå™¨éƒ½çŸ¥é“æ‰€æœ‰æœºæ„çš„è¯ä¹¦æ¶ˆæ¯ï¼Œå°é£æ ¸å¯¹è¯ä¹¦çœŸå‡åï¼Œå› ä¸ºæµè§ˆå™¨çŸ¥é“å„ä¸ªè¯ä¹¦çš„key1ï¼Œå°é£è·å¾—key1ï¼›<br>å°é£é€šè¿‡ key1 åŠ å¯† key2ï¼Œä¼ ç»™ å°èŒï¼Œ å°èŒç§é’¥è§£å¯†è·å¾—key2ï¼ŒåæœŸå°±é€šè¿‡key2 è¿›è¡Œé€šè¯ã€‚</p><p>å› ä¸ºè¯ä¹¦çš„ç”ŸæˆåŒ…å«äº†æœåŠ¡å™¨åœ°å€ ç­‰ä¸€ç³»åˆ—ä¿¡æ¯ï¼ŒåŸºæœ¬ä¸Šæ— æ³•é€ å‡ï¼Œæ‰€æœ‰ä¸­é—´äººæ— æ³•ä¼ªé€ è¯ä¹¦ï¼Œè§£å†³äº†ä¸Šé¢ä¸²æ”¹çš„é—®é¢˜ã€‚</p><figure class="image-box">                <img src="/image/http_again/https6.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/https7.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/https8.jpg" alt title class>                <p></p>            </figure><p>å› ä¸ºè¯ä¹¦å¸¦äº†ä¸€ç³»åˆ—æœåŠ¡å™¨åœ°å€ä¿¡æ¯ï¼Œæ‰€æœ‰æ— æ³•é’ˆå¯¹æŒ‡å®šçš„æœåŠ¡å™¨å†ä¼ªé€ ä¸€ä¸ªè¯ä¹¦ï¼›<br>è€Œæµè§ˆå™¨åˆæœ‰é‰´åˆ«è¯ä¹¦æ˜¯å¦ä¸ºæŸä¸ªæœåŠ¡å™¨çš„èƒ½åŠ›ï¼›<br>å› æ­¤ä¸­é—´äººæ— æ³•å†é€šè¿‡è‡ªå·±ä¼ªé€ è¯ä¹¦ä»æµè§ˆå™¨ç«¯éª—æ¥ æµè§ˆå™¨ç”¨äºå¯¹ç§°åŠ å¯†çš„å¯†é’¥äº†ã€‚</p><h3 id="https"><a href="#https" class="headerlink" title="https"></a>https</h3><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>https ä¸€èˆ¬æ˜¯ éå¯¹ç§°åŠ å¯† ä¼ è¾“ ä¼šè¯å¯†é’¥ï¼Œ<br>ä¼šè¯ä½¿ç”¨å¯¹ç§°åŠ å¯†ï¼š<br><figure class="image-box">                <img src="/image/http_again/ok.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/ok1.png" alt title class>                <p></p>            </figure></p><h4 id="æ¦‚è¿°-7"><a href="#æ¦‚è¿°-7" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>åœ¨å›½å†…httpsèµ·æºäº2014å¹´ç™¾åº¦ç½‘ç«™çš„ç‡å…ˆä½¿ç”¨ï¼Œåˆ°å¦‚ä»Šä¸è¿‡6å¹´å¤šã€‚<br><figure class="image-box">                <img src="/image/http_again/httpsm1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/http_again/httpsm2.jpg" alt title class>                <p></p>            </figure></p><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li><p>å†…å®¹åŠ å¯†ï¼šä¿è¯æµè§ˆå™¨å‘é€åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡æ˜¯åŠ å¯†çš„ï¼›<br>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>éå¯¹ç§°å¯†é’¥äº¤æ¢ï¼Œå¯¹ç§°å†…å®¹åŠ å¯†</strong>ï¼šéå¯¹ç§°åŠ å¯†ç”¨äºå¯†é’¥äº¤æ¢ï¼Œå¯¹ç§°åŠ å¯†ç”¨äºå†…å®¹åŠ å¯†ï¼Œè¯¦ç»†å‚è€ƒã€Šå¤šç§åŠ å¯†æ–¹å¼(https)ã€‹</p></li><li><p>èº«ä»½è®¤è¯ï¼šä¿è¯ä½ å½“æˆ‘çš„æœåŠ¡å™¨å‡†ç¡®æ€§</p></li><li><p>æ•°æ®å®Œæ•´æ€§</p></li></ul><h4 id="ä½¿ç”¨æˆæœ¬"><a href="#ä½¿ç”¨æˆæœ¬" class="headerlink" title="ä½¿ç”¨æˆæœ¬"></a>ä½¿ç”¨æˆæœ¬</h4><ul><li>è¯ä¹¦è´¹ç”¨ä»¥åŠæ›´æ–°ç»´æŠ¤ï¼šå…¶å®è¿™ä¸ªä¹Ÿä¸ç®—è´µï¼›</li><li>httpsé™ä½ç”¨æˆ·è®¿é—®é€Ÿåº¦ï¼šå…¶å®åˆç†éƒ¨ç½²ï¼Œä¸é€Šäºhttpé€Ÿåº¦<figure class="image-box">                <img src="/image/http_again/httpsm3.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http_again/httpsm4.jpg" alt title class>                <p></p>            </figure></li><li>æ¶ˆè€—cpuèµ„æºï¼Œéœ€è¦å¢åŠ å¤§é‡æœºå™¨ï¼šæ¯”å¦‚éå¯¹ç§°å¯†é’¥äº¤æ¢ï¼Œå¯¹ç§°å†…å®¹åŠ å¯†ï¼Œè¿™äº›éƒ½æ¶ˆè€—cpuç­‰ç­‰</li></ul><h4 id="httpsåŠ å¯†çš„è¯¯è§£"><a href="#httpsåŠ å¯†çš„è¯¯è§£" class="headerlink" title="httpsåŠ å¯†çš„è¯¯è§£"></a>httpsåŠ å¯†çš„è¯¯è§£</h4><p>httpsåŠ å¯†æ˜¯æŠ¥æ–‡åŠ å¯†ï¼Œé˜²æ­¢çš„æ˜¯ä¸­é—´ä»£ç†çªƒå–æŠ¥æ–‡ï¼Œé˜²æ­¢æŠ“åŒ… ç­‰ç­‰ï¼›<br>å› æ­¤httpsåŠ å¯†æ˜¯ç›¸å¯¹ä¸­é—´ä»£ç†ã€æŠ“åŒ…å·¥å…·è€Œè¨€çš„åŠ å¯†ï¼Œå¦‚æœä½ ç”¨æŠ“åŒ…å·¥å…·æŠ“åŒ… httpsè¯·æ±‚ï¼Œä½ ä¼šå‘ç°æŠ¥æ–‡éƒ½æ˜¯åŠ å¯†çš„ï¼›<br>ä½†httpsåŠ å¯†ä¸å¯¹æµè§ˆå™¨æ§åˆ¶å°åŠ å¯†ï¼Œç”¨æµè§ˆå™¨æŸ¥çœ‹è¯·æ±‚å‚æ•°ï¼Œéƒ½æ˜¯æœªåŠ å¯†çš„ã€‚</p><h3 id="http2-0"><a href="#http2-0" class="headerlink" title="http2.0"></a>http2.0</h3><p>2015å¹´å‡ºç°ï¼›<br>http2.0 ä¸ spdyæ¸Šæºå¾ˆæ·±ï¼Œå¾ˆå¤šåŸæ¥ç»´æŠ¤spdyçš„äººï¼Œåé¢è½¬è€Œå»ç»´æŠ¤http2.0ï¼ŒæŸç§æ„ä¹‰è¯´ï¼Œhttp2.0æ˜¯spdyçš„å‡çº§ã€‚<br><figure class="image-box">                <img src="/image/http_again/http20.jpg" alt title class>                <p></p>            </figure></p><h3 id="http-0-9ä¸1-1åŒºåˆ«"><a href="#http-0-9ä¸1-1åŒºåˆ«" class="headerlink" title="http 0.9ä¸1.1åŒºåˆ«"></a>http 0.9ä¸1.1åŒºåˆ«</h3><p>è¿™é‡Œåªè®²è¿°éƒ¨åˆ†åŒºåˆ«ã€‚</p><h4 id="http-1-1-å¹¶å‘6ä¸ªtcpè¿æ¥"><a href="#http-1-1-å¹¶å‘6ä¸ªtcpè¿æ¥" class="headerlink" title="http 1.1 å¹¶å‘6ä¸ªtcpè¿æ¥"></a>http 1.1 å¹¶å‘6ä¸ªtcpè¿æ¥</h4><p>http 1.1 å¯ä»¥å¹¶å‘å»ºç«‹tcpè¿æ¥ï¼Œä»è€Œå¹¶å‘httpè¯·æ±‚ï¼Œ<br>å› æµè§ˆå™¨ä¸åŒï¼Œå¹¶å‘è¿æ¥æ•°é‡ç•¥ä¸ºä¸ä¸€ï¼Œä¸€èˆ¬è®¤ä¸ºæ˜¯6ä¸ªtcpè¿æ¥ã€‚<br>ä¸è¿‡æ¯ä¸ªtcpè¿æ¥åªèƒ½ä¸€ä¸ªä¸€ä¸ªåœ°è¿›è¡Œhttpè¯·æ±‚ï¼Œæ— æ³•å¹¶å‘httpè¯·æ±‚ã€‚<br>ç”±äºä¸€æ¬¡å¯åŒæ—¶å¹¶å‘6ä¸ªtcpè¿æ¥ï¼Œæ¯ä¸ªtcpåŒæ—¶åªèƒ½å¤„ç†ä¸€ä¸ªhttpè¯·æ±‚ï¼Œ<br>å› æ­¤å¯è¯´ http1.1åè®®å¯åŒæ—¶å¹¶å‘ 6ä¸ªhttpè¯·æ±‚ã€‚</p><h4 id="keep-alive-é•¿è¿æ¥"><a href="#keep-alive-é•¿è¿æ¥" class="headerlink" title="keep-alive é•¿è¿æ¥"></a>keep-alive é•¿è¿æ¥</h4><p>1.1é»˜è®¤é•¿è¿æ¥ï¼Œtcpè¿æ¥åï¼Œä¸€æ¬¡httpè¯·æ±‚å®Œåï¼Œä¸ä¼šå…³é—­tcpè¿æ¥ï¼ŒåæœŸå…¶ä»–æ“ä½œçš„httpè¯·æ±‚ å¯å¤ç”¨tcpé€šé“è¿›è¡Œä¼ è¾“ã€‚<br>è¿™ä»ä¾§é¢è¯´æ˜äº†ï¼Œtcpæ˜¯ç±»ä¼¼ ç«è½¦çš„é“è·¯é“è·¯ï¼Œæ˜¯ä¼ è¾“çš„é“è·¯ï¼Œhttpæ•°æ®åŒ…è¯·æ±‚æ˜¯é“è·¯ä¸Šå¥”è·‘çš„ç«è½¦ï¼Œå…³é—­é“è·¯ï¼Œç«è½¦å°±ä¸èƒ½ä¼ è¾“ã€‚</p><h4 id="ä¸€ä¸ªtcpè¿æ¥åŒæ—¶åªå¤„ç†ä¸€ä¸ªhttpè¯·æ±‚"><a href="#ä¸€ä¸ªtcpè¿æ¥åŒæ—¶åªå¤„ç†ä¸€ä¸ªhttpè¯·æ±‚" class="headerlink" title="ä¸€ä¸ªtcpè¿æ¥åŒæ—¶åªå¤„ç†ä¸€ä¸ªhttpè¯·æ±‚"></a>ä¸€ä¸ªtcpè¿æ¥åŒæ—¶åªå¤„ç†ä¸€ä¸ªhttpè¯·æ±‚</h4><p>å‚æ•°ä¸Šé¢ã€‚</p><h4 id="å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹-éœ€è¦è®¾ç½®3Gç½‘ç»œ"><a href="#å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹-éœ€è¦è®¾ç½®3Gç½‘ç»œ" class="headerlink" title="å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹(éœ€è¦è®¾ç½®3Gç½‘ç»œ)"></a>å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹(éœ€è¦è®¾ç½®3Gç½‘ç»œ)</h4><p>å¦‚ä¸‹ï¼Œéœ€è¦è®¾ç½® ç½‘ç»œä¸º3Gï¼Œä¸ç„¶çœ‹çš„ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œä¸”è®¾ç½®æ¸…é™¤ç¼“å­˜ï¼š<br><figure class="image-box">                <img src="/image/http_again/compare1.jpg" alt title class>                <p></p>            </figure></p><p>å¦‚æœç½‘ç»œé€Ÿåº¦å¾ˆå¿«ï¼Œå¯¼è‡´httpå“åº”éå¸¸å¿«ï¼Œæ­¤æ—¶éƒ½æ¥ä¸åŠæˆ–è€…æ²¡å¿…è¦å»ºç«‹æ–°çš„tcpè¿æ¥ï¼Œç›´æ¥å¤ç”¨ä¸Šä¸€æ¬¡tcpè¿æ¥ï¼Œæ­¤æ—¶çœ‹åˆ°çš„tcpè¿æ¥ä¸æ˜¯å¾ˆæ˜æ˜¾çš„6ä¸ªï¼š<br><figure class="image-box">                <img src="/image/http_again/compare2.jpg" alt title class>                <p></p>            </figure></p><h3 id="http-1-1ä¸2-0åŒºåˆ«"><a href="#http-1-1ä¸2-0åŒºåˆ«" class="headerlink" title="http 1.1ä¸2.0åŒºåˆ«"></a>http 1.1ä¸2.0åŒºåˆ«</h3><p>è¿™é‡Œåªè®²è¿°éƒ¨åˆ†åŒºåˆ«ã€‚</p><h4 id="ä¸€æ¬¡tcpè¿æ¥ï¼Œå¹¶å‘å¤šä¸ªhttpè¯·æ±‚"><a href="#ä¸€æ¬¡tcpè¿æ¥ï¼Œå¹¶å‘å¤šä¸ªhttpè¯·æ±‚" class="headerlink" title="ä¸€æ¬¡tcpè¿æ¥ï¼Œå¹¶å‘å¤šä¸ªhttpè¯·æ±‚"></a>ä¸€æ¬¡tcpè¿æ¥ï¼Œå¹¶å‘å¤šä¸ªhttpè¯·æ±‚</h4><p>1.1çš„ä¸€ä¸ªtcpè¿æ¥åªèƒ½ä¸€ä¸ªæ¥ç€ä¸€ä¸ªåœ°å¤„ç†httpè¯·æ±‚ï¼Œ<br>2.0å¯ä»¥è®©ä¸€ä¸ªtcpè¿æ¥åŒæ—¶å¹¶å‘å¤šä¸ªhttpè¯·æ±‚ï¼Œç›®å‰ä¹Ÿæ²¡è¯´æ˜æœ‰å¤šå°‘æ•°é‡é™åˆ¶ï¼›</p><h4 id="ä¸åŒåŸŸåä½¿ç”¨ä¸åŒtcpè¿æ¥"><a href="#ä¸åŒåŸŸåä½¿ç”¨ä¸åŒtcpè¿æ¥" class="headerlink" title="ä¸åŒåŸŸåä½¿ç”¨ä¸åŒtcpè¿æ¥"></a>ä¸åŒåŸŸåä½¿ç”¨ä¸åŒtcpè¿æ¥</h4><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé¡µé¢è¯·æ±‚çš„åŸŸååªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆä¸€ä¸ªé¡µé¢æ¸²æŸ“å°±åªæœ‰ä¸€ä¸ªtcpè¿æ¥ã€‚<br>ä¸è¿‡å¦‚æœé¡µé¢å†…çš„è¯·æ±‚ï¼Œæœ‰å¤šä¸ªåŸŸçš„æ—¶å€™ï¼Œå°±ä¼šå¹¶è¡Œå»ºç«‹å¤šä¸ªtcpè¿æ¥ã€‚</p><h4 id="åŒå·¥é€šä¿¡ï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€"><a href="#åŒå·¥é€šä¿¡ï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€" class="headerlink" title="åŒå·¥é€šä¿¡ï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€"></a>åŒå·¥é€šä¿¡ï¼ŒæœåŠ¡ç«¯ä¸»åŠ¨æ¨é€</h4><p>æœ€å…¸å‹ï¼Œæ¯”å¦‚ä¸€ä¸ªhtmlçš„è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šä¸»åŠ¨è§£æhtmlå†…å®¹ï¼Œè¿”å›htmlçš„åŒæ—¶ï¼Œå°†css js ç­‰é™æ€æ–‡ä»¶ä¸€å¹¶è¿”å›ã€‚</p><h4 id="httpè¯·æ±‚çš„ä¼˜å…ˆçº§"><a href="#httpè¯·æ±‚çš„ä¼˜å…ˆçº§" class="headerlink" title="httpè¯·æ±‚çš„ä¼˜å…ˆçº§"></a>httpè¯·æ±‚çš„ä¼˜å…ˆçº§</h4><p>æ¯”å¦‚ç”¨äºæ¸²æŸ“é¡µé¢çš„cssè¯·æ±‚ä¼šä¼˜å…ˆå›¾ç‰‡çš„è¯·æ±‚å‘é€ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šä¼˜å…ˆå“åº”cssç­‰è¿™äº›é«˜ä¼˜å…ˆçº§è¯·æ±‚ã€‚ä»¥è®©é¡µé¢æ›´æ—©å‘ˆç°ï¼Œä¸è¿‡è¿™äº›ä¼˜å…ˆçº§ä¹Ÿä¸æ˜¯ç»å¯¹çš„ã€‚</p><h4 id="å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹"><a href="#å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹" class="headerlink" title="å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹"></a>å®éªŒ-é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹</h4><p>è®¾ç½®æ¸…é™¤ç¼“å­˜ï¼š<br><figure class="image-box">                <img src="/image/http_again/compare3.jpg" alt title class>                <p></p>            </figure></p><h3 id="æ„æƒ³ä¸åˆ°çš„-httpè¿æ¥-tcpè¿æ¥-ä¸-é•¿çŸ­è¿æ¥"><a href="#æ„æƒ³ä¸åˆ°çš„-httpè¿æ¥-tcpè¿æ¥-ä¸-é•¿çŸ­è¿æ¥" class="headerlink" title="æ„æƒ³ä¸åˆ°çš„ (httpè¿æ¥ tcpè¿æ¥ ä¸ é•¿çŸ­è¿æ¥)"></a>æ„æƒ³ä¸åˆ°çš„ (httpè¿æ¥ tcpè¿æ¥ ä¸ é•¿çŸ­è¿æ¥)</h3><p>httpè¿æ¥å…¶å®ä¸å‡†ç¡®ï¼Œåªæœ‰httpè¯·æ±‚ï¼Œæ²¡æœ‰httpè¿æ¥ï¼Œ<br>è¿æ¥æœ¬è´¨æ˜¯tcpè¿æ¥ã€‚<br>å› æ­¤é•¿çŸ­è¿æ¥ï¼Œéƒ½æ˜¯tcpè¿æ¥è€Œè¨€çš„ï¼Œ<br>æ²¡æœ‰æ‰€è°“çš„é•¿çŸ­httpè¿æ¥ã€‚<br>httpè¯·æ±‚ å¾—åˆ°å“åº”åï¼Œè¿™æ¬¡httpè¯·æ±‚å°±å®Œæˆå’Œå…³é—­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> httpåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»£ç† è·¨åŸŸ hostä»£ç†</title>
      <link href="/2021/01/19/proxy_cores/"/>
      <url>/2021/01/19/proxy_cores/</url>
      
        <content type="html"><![CDATA[<h2 id="webpackä»£ç†"><a href="#webpackä»£ç†" class="headerlink" title="webpackä»£ç†"></a>webpackä»£ç†</h2><h3 id="åŒåŸŸåä¸”åŒç«¯å£æ‰ä¼šè¢«åŒ¹é…"><a href="#åŒåŸŸåä¸”åŒç«¯å£æ‰ä¼šè¢«åŒ¹é…" class="headerlink" title="åŒåŸŸåä¸”åŒç«¯å£æ‰ä¼šè¢«åŒ¹é…"></a>åŒåŸŸåä¸”åŒç«¯å£æ‰ä¼šè¢«åŒ¹é…</h3><p>åœºæ™¯ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œç¬¬ä¸‰æ–¹ç»„ä»¶ç”¨äº†è‡ªå·±ä¸€å¥—ajaxï¼Œä¸”å†…ç½®äº†è‡ªå·±çš„ç½‘å€åšè¯·æ±‚ï¼Œä¸è¿‡å¯¹å¤–æš´éœ²äº†hostå¤„ç†ï¼Œæ­¤æ—¶ä¸ºé¿å…è·¨åŸŸï¼Œå°†ç¬¬ä¸‰æ–¹ç»„ä»¶hosté…ç½®ä¸ºâ€™a.test360.com:8080â€™ï¼Œä¸webpackå¯åŠ¨çš„åŸŸåç«¯å£ç›¸åŒã€‚<br>æ­¤æ—¶å°±ä¼šè¢«webpackæ•è·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MediaUp(&#123;</span><br><span class="line">        browse_button : <span class="string">'pickfiles'</span>,</span><br><span class="line">        filters : &#123;</span><br><span class="line">            mime_types : [</span><br><span class="line">                    &#123; <span class="attr">title</span> : <span class="string">"Video files"</span>, <span class="attr">extensions</span> : <span class="string">"wmv,avi,mpg,mpeg,3gp,mov,mp4,flv,f4v,m4v,m2t,mts,rmvb,vob,mkv"</span>&#125;</span><br><span class="line">                ],</span><br><span class="line">            max_file_size : <span class="string">'30mb'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        snaps:<span class="number">8</span>,<span class="comment">//0è¡¨ç¤ºä¸è·å–</span></span><br><span class="line">        host:<span class="string">'a.test360.com:8080'</span></span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">   host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line">   port: <span class="number">8080</span>,</span><br><span class="line">   proxy: &#123;</span><br><span class="line">     <span class="string">'/api/proxy'</span>: &#123;<span class="comment">//ç¬¬ä¸‰æ–¹ç»„ä»¶çš„è¯·æ±‚ä¼šè¢«æ•è· ï¼š http://a.test360.com:8080/api/proxy/blockAbc.json</span></span><br><span class="line">       target: <span class="string">'http://upload.media.test.com:3000'</span>,</span><br><span class="line">       changeOrigin: <span class="literal">true</span>,</span><br><span class="line">       secure: <span class="literal">false</span>,</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure><h3 id="proxyåªè¦ä»»æ„ä¸€å¤„åŒ¹é…åˆ°å³å¯"><a href="#proxyåªè¦ä»»æ„ä¸€å¤„åŒ¹é…åˆ°å³å¯" class="headerlink" title="proxyåªè¦ä»»æ„ä¸€å¤„åŒ¹é…åˆ°å³å¯"></a>proxyåªè¦ä»»æ„ä¸€å¤„åŒ¹é…åˆ°å³å¯</h3><p>å¦‚ä¸‹<code>/proxy</code>æ—¢èƒ½åŒ¹é…åˆ° <code>/proxy</code> è¿˜èƒ½åŒ¹é…åˆ° <code>/api/proxy/</code> ç­‰ç­‰:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">   host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line">   port: <span class="number">8080</span>,</span><br><span class="line">   proxy: &#123;</span><br><span class="line">     <span class="string">'/proxy'</span>: &#123;<span class="comment">//è¢«åŒ¹é…çš„æœ‰ ï¼š http://a.test360.com:8080/api/proxy/blockAbc.json  ä¸ http://a.test360.com:8080/proxy/blockAbc.json</span></span><br><span class="line">       target: <span class="string">'http://upload.media.test.com:3000'</span>,</span><br><span class="line">       changeOrigin: <span class="literal">true</span>,</span><br><span class="line">       secure: <span class="literal">false</span>,</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="ç»™webpackä»£ç†åˆ°çš„åŸŸåé…ç½®hostä»£ç†"><a href="#ç»™webpackä»£ç†åˆ°çš„åŸŸåé…ç½®hostä»£ç†" class="headerlink" title="ç»™webpackä»£ç†åˆ°çš„åŸŸåé…ç½®hostä»£ç†"></a>ç»™webpackä»£ç†åˆ°çš„åŸŸåé…ç½®hostä»£ç†</h3><p>å¦‚ä¸Š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">   host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line">   port: <span class="number">8080</span>,</span><br><span class="line">   proxy: &#123;</span><br><span class="line">     <span class="string">'/proxy'</span>: &#123;</span><br><span class="line">       target: <span class="string">'http://upload.media.test.com:3000'</span>,</span><br><span class="line">       changeOrigin: <span class="literal">true</span>,</span><br><span class="line">       secure: <span class="literal">false</span>,</span><br><span class="line">     &#125;,</span><br></pre></td></tr></table></figure></p><p>hosté…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 upload.media.test.com</span><br></pre></td></tr></table></figure></p><p> é¡µé¢ä¸­è®¿é—® <code>http://a.test360.com:8080/api/proxy/blockAbc.json</code> æ—¶å…¶å®ç›¸å½“äºè®¿é—® <code>http://127.0.0.1:3000/api/proxy/blockAbc.json</code></p><h2 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h2><h3 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h3><h4 id="è·¨åŸŸçš„åŸå› "><a href="#è·¨åŸŸçš„åŸå› " class="headerlink" title="è·¨åŸŸçš„åŸå› "></a>è·¨åŸŸçš„åŸå› </h4><ul><li>æµè§ˆå™¨é™åˆ¶</li><li>è·¨åŸŸ</li><li>XHR(XMLHttpRequest)è¯·æ±‚</li></ul><p>åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸‰ç‚¹ï¼Œæ‰æ¶‰åŠè·¨åŸŸé—®é¢˜ã€‚<br>ä»¥ä¸Šå‰ä¸¤ç‚¹å¥½ç†è§£ï¼Œç¬¬ä¸‰ç‚¹ ä»€ä¹ˆæ˜¯ XHR(XMLHttpRequest)è¯·æ±‚ï¼Ÿ<br>å•ç‹¬ä¸€å°èŠ‚è®²è§£ã€‚<br>ä¸€èˆ¬ç”¨ajax æˆ– fetch æˆ– axios è¯·æ±‚çš„éƒ½æ˜¯xhrè¯·æ±‚ï¼Œè¿™äº›è¯·æ±‚æ˜¯æœ‰è·¨åŸŸé—®é¢˜ã€‚<br>è€Œ scriptæ ‡ç­¾ imgæ ‡ç­¾å†…çš„src éƒ½ä¸æ˜¯xhrè¯·æ±‚ï¼Œå°±ä¸ä¼šæœ‰è·¨åŸŸé—®é¢˜ã€‚</p><h4 id="XHR-XMLHttpRequest-è¯·æ±‚"><a href="#XHR-XMLHttpRequest-è¯·æ±‚" class="headerlink" title="XHR(XMLHttpRequest)è¯·æ±‚"></a>XHR(XMLHttpRequest)è¯·æ±‚</h4><p>ä»€ä¹ˆæ˜¯xhrè¯·æ±‚ï¼Œç®€å•ç†è§£å°±æ˜¯å‡¡äº‹é€šè¿‡ajaxè¯·æ±‚çš„ï¼Œéƒ½æ˜¯xhrè¯·æ±‚ï¼Œ æ¯”å¦‚ajax æˆ– fetch æˆ– axiosè¯·æ±‚ï¼›<br>ä¸æ­¤ç›¸å¯¹çš„å°±æ˜¯ scriptæ ‡ç­¾ imgæ ‡ç­¾å†…çš„src éƒ½ä¸æ˜¯xhrè¯·æ±‚ï¼›<br>é€šè¿‡æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹è¯·æ±‚æ˜¯å¦ä¸º xhrè¯·æ±‚ï¼š<br><figure class="image-box">                <img src="/image/proxy/xhr.png" alt title class>                <p></p>            </figure></p><p>æ›´å¤šè¯¦ç»†å‚è€ƒã€Šjsonpã€‹</p><h4 id="ç»å…¸çš„è·¨åŸŸè§£å†³æ–¹å¼ç¤ºæ„å›¾"><a href="#ç»å…¸çš„è·¨åŸŸè§£å†³æ–¹å¼ç¤ºæ„å›¾" class="headerlink" title="ç»å…¸çš„è·¨åŸŸè§£å†³æ–¹å¼ç¤ºæ„å›¾"></a>ç»å…¸çš„è·¨åŸŸè§£å†³æ–¹å¼ç¤ºæ„å›¾</h4><p>å·¦ä¾§æ˜¯ä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚ï¼Œå³ä¾§æ˜¯å¦å¤–ä¸€ä¸ªåŸŸåä¸‹çš„å®¢æˆ·ç«¯è¯·æ±‚ï¼›<br>å·¦ä¾§å®¢æˆ·ç«¯è¦è¯·æ±‚å³ä¾§æœåŠ¡å™¨ï¼Œäº§ç”Ÿäº†è·¨åŸŸé—®é¢˜ï¼š<br>è§£å†³çš„æ–¹å¼æœ‰ä¸‹é¢ä¸¤ç§ï¼Œä¸è¿‡éƒ½æ˜¯åŸºäºä¸­é—´å±‚çš„å¤„ç†ï¼Œè€Œä¸ç”¨åŠ¨ä¸šåŠ¡ä»£ç ï¼Œä¿è¯äº†ä¸šåŠ¡ä»£ç çš„çº¯ç²¹æ€§ï¼Œä»ä¾§é¢è¯´æ˜äº†ä¸­é—´å±‚çš„é‡è¦æ€§ã€‚<br><figure class="image-box">                <img src="/image/proxy/controler.jpg" alt title class>                <p></p>            </figure></p><h4 id="è·¨åŸŸï¼æ™®é€š-è¯·æ±‚å¤´åŒºåˆ«"><a href="#è·¨åŸŸï¼æ™®é€š-è¯·æ±‚å¤´åŒºåˆ«" class="headerlink" title="è·¨åŸŸï¼æ™®é€š è¯·æ±‚å¤´åŒºåˆ«"></a>è·¨åŸŸï¼æ™®é€š è¯·æ±‚å¤´åŒºåˆ«</h4><p>ä»¥ä¸‹æ˜¯8081åŸŸåä¸‹ï¼Œè¯·æ±‚8080åŸŸåä¸‹çš„test/get1æ¥å£ï¼Œæ˜¯ä¸€ä¸ªè·¨åŸŸè¯·æ±‚ï¼Œ<br>å½“æµè§ˆå™¨å‘ç°æ˜¯è·¨åŸŸè¯·æ±‚æ—¶ï¼Œä¼šåœ¨è¯·æ±‚å¤´ä¸Šæ ‡è¯†ä¸€ä¸ªoriginï¼Œå¦‚ä¸‹å›¾ï¼Œæ™®é€šè¯·æ±‚å¤´æ˜¯æ²¡æœ‰originå­—æ®µçš„ï¼š<br><figure class="image-box">                <img src="/image/proxy/origin1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/proxy/origin2.jpg" alt title class>                <p></p>            </figure></p><p>å¦‚æœæµè§ˆå™¨è¯†åˆ«å‡ºæ˜¯è·¨åŸŸè¯·æ±‚ï¼Œå½“æ¥å£å“åº”æ—¶ï¼Œæµè§ˆå™¨ä¼šå»è¯»å–å“åº”å¤´ä¿¡æ¯ï¼Œçœ‹æœ‰æ²¡æœ‰è·¨åŸŸä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æŠ¥è·¨åŸŸå¼‚å¸¸ã€‚<br>ä¸€èˆ¬è·¨åŸŸä¿¡æ¯æœ‰å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/proxy/origin.jpg" alt title class>                <p></p>            </figure><br>å¦‚æœæœ‰ä¸Šé¢è¿™äº›ä¿¡æ¯ï¼Œå°±å…è®¸è·¨åŸŸæ­£å¸¸å“åº”å®¢æˆ·ç«¯ã€‚</p><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><ul><li><p>ä¸‹é¢æ˜¯æ­£å¸¸çš„è·¨åŸŸè¯·æ±‚ï¼Œå¹¶ä¸”è¢«æµè§ˆå™¨æ­£å¸¸å“åº”ï¼š</p><figure class="image-box">                <img src="/image/proxy/origin3.jpg" alt title class>                <p></p>            </figure></li><li><p>ä¸‹é¢æ˜¯æ­£å¸¸éè·¨åŸŸè¯·æ±‚ï¼Œä»¥æ­¤ä¸ä¸Šé¢è·¨åŸŸè¯·æ±‚åšå¯¹æ¯”ï¼š</p><figure class="image-box">                <img src="/image/proxy/origin4.jpg" alt title class>                <p></p>            </figure></li></ul><h3 id="è§£è¯»è·¨åŸŸå¼‚å¸¸ä¿¡æ¯"><a href="#è§£è¯»è·¨åŸŸå¼‚å¸¸ä¿¡æ¯" class="headerlink" title="è§£è¯»è·¨åŸŸå¼‚å¸¸ä¿¡æ¯"></a>è§£è¯»è·¨åŸŸå¼‚å¸¸ä¿¡æ¯</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸‹é¢æ˜¯ä¸€ä»½å¸¸è§è·¨åŸŸè¯·æ±‚çš„å¼‚å¸¸æç¤ºï¼Œç»†ç»†è§£è¯»è¿™ä¸ªè·¨åŸŸæç¤ºä¹Ÿæ˜¯å¾ˆå¥½ç©çš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at <span class="string">'http://test.com/upload.json'</span> <span class="keyword">from</span> </span><br><span class="line">origin <span class="string">'http://local123.com:8080'</span> has been blocked by CORS policy: </span><br><span class="line">Response to preflight request doesn<span class="string">'t pass access control check: </span></span><br><span class="line"><span class="string">No '</span>Access-Control-Allow-Origin<span class="string">' header is present on the requested resource.</span></span><br></pre></td></tr></table></figure></p><ul><li>Access to XMLHttpRequest :ä¾§é¢è¯æ˜äº†è·¨åŸŸåªé’ˆå¯¹ xhr(XMLHttpRequest)è¯·æ±‚</li><li>blocked by CORS policy : CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†,å…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€</li><li>Response to preflight request doesnâ€™t pass access control check ï¼š é¢„æ£€è¯·æ±‚(preflight request)å¾—åˆ°çš„å“åº”æ²¡æœ‰é€šè¿‡æƒé™æ§åˆ¶å®¡æ ¸,æ˜¯ä¸æ˜¯ä¾§é¢è¯æ˜äº† è·¨åŸŸè¯·æ±‚å¯èƒ½ä¼šå‘é€ä¸¤æ¬¡ï¼Œä¸€æ¬¡é¢„æ£€è¯·æ±‚ï¼Œä¸€æ¬¡æ­£å¼è¯·æ±‚ï¼Œå¦‚ä¸‹å°±æ˜¯å‘é€äº†ä¸¤æ¬¡ï¼š<br>å…³äºè¯·æ±‚å‘å‡ æ¬¡ï¼Œä¼šå•ç‹¬è®²è§£<figure class="image-box">                <img src="/image/proxy/origin5.jpg" alt title class>                <p></p>            </figure></li><li>No â€˜Access-Control-Allow-Originâ€™ header is present on the requested resource. ï¼š è¯·æ±‚çš„èµ„æºä¸Š(æœåŠ¡å™¨ä¸Š)æ²¡æœ‰è®¾ç½®â€™Access-Control-Allow-Originâ€™å“åº”å¤´ï¼Œ ä¾§é¢è¯´æ˜æœåŠ¡å™¨ä¸Šè®¾ç½® â€˜Access-Control-Allow-Originâ€™æ¥è§£é™¤è·¨åŸŸã€‚</li></ul><p>æœ‰ä¸Šé¢è§£è¯»çŸ¥é“è·¨åŸŸè‡³å°‘å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹å¾ï¼š</p><h4 id="åªé’ˆå¯¹xhr-XMLHttpRequest-è¯·æ±‚"><a href="#åªé’ˆå¯¹xhr-XMLHttpRequest-è¯·æ±‚" class="headerlink" title="åªé’ˆå¯¹xhr(XMLHttpRequest)è¯·æ±‚"></a>åªé’ˆå¯¹xhr(XMLHttpRequest)è¯·æ±‚</h4><p>å¦‚ä¸Šã€‚</p><h4 id="å¥—è·¯æ˜¯Access-Control-Allow-Origin"><a href="#å¥—è·¯æ˜¯Access-Control-Allow-Origin" class="headerlink" title="å¥—è·¯æ˜¯Access-Control-Allow-Origin"></a>å¥—è·¯æ˜¯Access-Control-Allow-Origin</h4><p>å¦‚ä¸Šã€‚</p><h4 id="é¢„æ£€è¯·æ±‚-preflight-request"><a href="#é¢„æ£€è¯·æ±‚-preflight-request" class="headerlink" title="é¢„æ£€è¯·æ±‚(preflight request)"></a>é¢„æ£€è¯·æ±‚(preflight request)</h4><p>è·¨åŸŸè¯·æ±‚å¯èƒ½ä¼šå‘ä¸¤æ¬¡<br>å¯èƒ½ä¼šå‘ä¸€æ¬¡é¢„æ£€è¯·æ±‚ï¼Œä¸€æ¬¡æ­£å¼è¯·æ±‚<br><figure class="image-box">                <img src="/image/proxy/origin5.jpg" alt title class>                <p></p>            </figure></p><h4 id="è¯·æ±‚å¯èƒ½ä¼šå‘ä¸¤æ¬¡"><a href="#è¯·æ±‚å¯èƒ½ä¼šå‘ä¸¤æ¬¡" class="headerlink" title="è¯·æ±‚å¯èƒ½ä¼šå‘ä¸¤æ¬¡"></a>è¯·æ±‚å¯èƒ½ä¼šå‘ä¸¤æ¬¡</h4><p>å¦‚ä¸Šã€‚æ˜¯å¦ä¼šå‘ä¸¤æ¬¡ï¼Œä¸‹é¢å•ç‹¬è¯´æ˜ã€‚</p><h4 id="CORSå°±æ˜¯è·¨åŸŸçš„ä»£åè¯"><a href="#CORSå°±æ˜¯è·¨åŸŸçš„ä»£åè¯" class="headerlink" title="CORSå°±æ˜¯è·¨åŸŸçš„ä»£åè¯"></a>CORSå°±æ˜¯è·¨åŸŸçš„ä»£åè¯</h4><p>CORSæ˜¯ä¸€ä¸ªW3Cæ ‡å‡†,å…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€</p><h3 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h3><h4 id="æµè§ˆå™¨æ˜¯å…ˆåˆ¤æ–­è¿˜æ˜¯å…ˆæ‰§è¡Œ"><a href="#æµè§ˆå™¨æ˜¯å…ˆåˆ¤æ–­è¿˜æ˜¯å…ˆæ‰§è¡Œ" class="headerlink" title="æµè§ˆå™¨æ˜¯å…ˆåˆ¤æ–­è¿˜æ˜¯å…ˆæ‰§è¡Œ"></a>æµè§ˆå™¨æ˜¯å…ˆåˆ¤æ–­è¿˜æ˜¯å…ˆæ‰§è¡Œ</h4><p>å¯¹äºè·¨åŸŸï¼Œä½ å‘çš„è·¨åŸŸè¯·æ±‚ï¼Œè¯·æ±‚ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¹Ÿä¼šæ­£å¸¸å“åº”ï¼Œåªæ˜¯æµè§ˆå™¨ä¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è·¨åŸŸï¼Œå¦‚æœæ˜¯è·¨åŸŸï¼Œ<br>æµè§ˆå™¨å°±ä¸ä¼šå°†æœåŠ¡ç«¯çš„å“åº”æ•°æ®ç»™å®¢æˆ·ç«¯ï¼Œå¹¶æŠ¥é”™æç¤ºè·¨åŸŸäº†ã€‚<br>å› æ­¤æµè§ˆå™¨æ˜¯å…ˆæ‰§è¡Œï¼Œååˆ¤æ–­ã€‚</p><h4 id="è¯·æ±‚ä¾ç„¶ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼Œä¸”æœåŠ¡ç«¯æ­£å¸¸è¿”å›"><a href="#è¯·æ±‚ä¾ç„¶ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼Œä¸”æœåŠ¡ç«¯æ­£å¸¸è¿”å›" class="headerlink" title="è¯·æ±‚ä¾ç„¶ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼Œä¸”æœåŠ¡ç«¯æ­£å¸¸è¿”å›"></a>è¯·æ±‚ä¾ç„¶ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼Œä¸”æœåŠ¡ç«¯æ­£å¸¸è¿”å›</h4><p>è·¨åŸŸçš„è¯·æ±‚ä¾ç„¶ä¼šæ­£å¸¸åˆ°æœåŠ¡ç«¯ï¼Œä¸”æœåŠ¡ç«¯æ­£å¸¸è¿”å›ï¼Œå‚è€ƒã€Šæµè§ˆå™¨æ˜¯å…ˆåˆ¤æ–­è¿˜æ˜¯å…ˆæ‰§è¡Œã€‹</p><h4 id="æ—¢ç„¶æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸ºä»€ä¹ˆè®¾ç½®æœåŠ¡å™¨å¯ä»¥è§£å†³è·¨åŸŸ"><a href="#æ—¢ç„¶æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸ºä»€ä¹ˆè®¾ç½®æœåŠ¡å™¨å¯ä»¥è§£å†³è·¨åŸŸ" class="headerlink" title="æ—¢ç„¶æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸ºä»€ä¹ˆè®¾ç½®æœåŠ¡å™¨å¯ä»¥è§£å†³è·¨åŸŸ"></a>æ—¢ç„¶æ˜¯æµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸ºä»€ä¹ˆè®¾ç½®æœåŠ¡å™¨å¯ä»¥è§£å†³è·¨åŸŸ</h4><p>åŸæ¥æœåŠ¡å™¨å¯ä»¥è®¾ç½®å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œæˆ‘å·²ç»å…è®¸äº†è¿™ä¸ªåŸŸåè·¨åŸŸï¼Œè¯·æµè§ˆå™¨ç»™äºˆæ•°æ®æ­£å¸¸å“åº”ã€‚<br>å› æ­¤æœåŠ¡å™¨å¯é€šè¿‡å“åº”å¤´ä¸æµè§ˆå™¨é€šè¯ã€‚</p><h4 id="åŸæ¥æœåŠ¡å™¨å¯é€šè¿‡å“åº”å¤´ä¸æµè§ˆå™¨è¿™ä¸ªå£³å¯¹è¯"><a href="#åŸæ¥æœåŠ¡å™¨å¯é€šè¿‡å“åº”å¤´ä¸æµè§ˆå™¨è¿™ä¸ªå£³å¯¹è¯" class="headerlink" title="åŸæ¥æœåŠ¡å™¨å¯é€šè¿‡å“åº”å¤´ä¸æµè§ˆå™¨è¿™ä¸ªå£³å¯¹è¯"></a>åŸæ¥æœåŠ¡å™¨å¯é€šè¿‡å“åº”å¤´ä¸æµè§ˆå™¨è¿™ä¸ªå£³å¯¹è¯</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="äº†ä¸èµ·çš„å“åº”å¤´"><a href="#äº†ä¸èµ·çš„å“åº”å¤´" class="headerlink" title="äº†ä¸èµ·çš„å“åº”å¤´"></a>äº†ä¸èµ·çš„å“åº”å¤´</h4><p>åŸæ¥å“åº”å¤´ä¸ä»…ç”¨äºç»™è½¯ä»¶è¿”å›æ•°æ®ï¼Œè¿˜å¯ä»¥ç”¨äºè·Ÿæµè§ˆå™¨é€šä¿¡ï¼Œå‘Šè¯‰æˆ–è®¾ç½®æµè§ˆå™¨å“ªäº›å¯åšï¼Œå“ªäº›ä¸å¯åšã€‚<br>æ¯”å¦‚å‘Šè¯‰æµè§ˆå™¨è·¨åŸŸè¡Œä¸ºï¼›<br>æ¯”å¦‚å‘Šè¯‰æµè§ˆå™¨æˆ‘è¿”å›äº†ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼šjsonã€jsã€text ç­‰ç­‰ï¼Œæµè§ˆå™¨å› æ­¤å°±æ ¹æ®ç›¸åº”ç±»å‹è§£æã€‚</p><h4 id="æ²¡æœ‰ã€å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ã€‘ï¼Œåªæœ‰ã€å®¢æˆ·ç«¯ï¼æµè§ˆå™¨ï¼æœåŠ¡å™¨ã€‘"><a href="#æ²¡æœ‰ã€å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ã€‘ï¼Œåªæœ‰ã€å®¢æˆ·ç«¯ï¼æµè§ˆå™¨ï¼æœåŠ¡å™¨ã€‘" class="headerlink" title="æ²¡æœ‰ã€å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ã€‘ï¼Œåªæœ‰ã€å®¢æˆ·ç«¯ï¼æµè§ˆå™¨ï¼æœåŠ¡å™¨ã€‘"></a>æ²¡æœ‰ã€å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ã€‘ï¼Œåªæœ‰ã€å®¢æˆ·ç«¯ï¼æµè§ˆå™¨ï¼æœåŠ¡å™¨ã€‘</h4><p>æˆ‘ä»¬è¯´æ¥å£è¯·æ±‚æ—¶ï¼Œå¾ˆå¤šäººåªè€ƒè™‘å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ï¼Œå…¶å®ä¸æ­£ç¡®ï¼Œ<br>åº”è¯¥æ˜¯å®¢æˆ·ç«¯ä¸æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´å…³ç³»ã€‚<br>æµè§ˆå™¨æ˜¯ä¸€å±‚å£³ï¼ŒæŠŠå®¢æˆ·ç«¯éš”å¼€äº†æœåŠ¡å™¨ï¼Œ<br>å› æ­¤å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨çš„é€šä¿¡ å—åˆ¶äºæµè§ˆå™¨ï¼Œ<br>å› æ­¤å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªæ¥å£è¯·æ±‚ï¼Œä¸ä»…è¦åŒ…å«ä¸æœåŠ¡å™¨çš„é€šä¿¡æ•°æ®ï¼Œè¿˜è¦è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯ä¸æµè§ˆå™¨é€šä¿¡ï¼›<br>å“åº”çš„ï¼ŒæœåŠ¡ç«¯å“åº”ä¸€ä¸ªæ¥å£è¯·æ±‚æ—¶ï¼Œä¸ä»…è¦åŒ…å«å“åº”æ•°æ®ï¼Œè¿˜è¦è®¾ç½®å“åº”å¤´å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•è§£æå“åº”æ•°æ®ï¼›</p><p>è¿™ä¹Ÿå°±è¯´æ˜äº† è®¾ç½®è¯·æ±‚å¤´ ä¸ å“åº”å¤´ çš„é‡è¦æ€§äº†ã€‚</p><h4 id="è¯·æ±‚ä¼šå‘å‡ æ¬¡"><a href="#è¯·æ±‚ä¼šå‘å‡ æ¬¡" class="headerlink" title="è¯·æ±‚ä¼šå‘å‡ æ¬¡"></a>è¯·æ±‚ä¼šå‘å‡ æ¬¡</h4><p>è¿™ç‚¹ä¸‹é¢å•ç‹¬è¯´æ˜ã€‚</p><h3 id="è¯·æ±‚ä¼šå‘å‡ æ¬¡-1"><a href="#è¯·æ±‚ä¼šå‘å‡ æ¬¡-1" class="headerlink" title="è¯·æ±‚ä¼šå‘å‡ æ¬¡"></a>è¯·æ±‚ä¼šå‘å‡ æ¬¡</h3><h4 id="å…ˆæ‰§è¡Œ-è¿˜æ˜¯-å…ˆåˆ¤æ–­"><a href="#å…ˆæ‰§è¡Œ-è¿˜æ˜¯-å…ˆåˆ¤æ–­" class="headerlink" title="å…ˆæ‰§è¡Œ è¿˜æ˜¯ å…ˆåˆ¤æ–­"></a>å…ˆæ‰§è¡Œ è¿˜æ˜¯ å…ˆåˆ¤æ–­</h4><p>è·¨åŸŸæ˜¯å…ˆæ‰§è¡Œè¿˜æ˜¯å…ˆåˆ¤æ–­ï¼Ÿ<br>å…ˆæ‰§è¡Œï¼Œè¯´æ˜è·¨åŸŸè¯·æ±‚åªåšä¸€æ¬¡è¯·æ±‚å°±å®Œæˆã€‚<br>å…ˆåˆ¤æ–­ï¼Œè¯´æ˜è·¨åŸŸè¯·æ±‚è¦åœ¨æ­£å¼è¯·æ±‚å‰ï¼Œå¤šå‘ä¸€æ¬¡ é¢„æ£€è¯·æ±‚ï¼Œäºæ˜¯ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ã€‚</p><h4 id="ç®€å•è¯·æ±‚-ä¸-éç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚-ä¸-éç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚ ä¸ éç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚ ä¸ éç®€å•è¯·æ±‚</h4><p>å¯¹äºç®€å•è·¨åŸŸè¯·æ±‚ï¼Œæµè§ˆå™¨å…ˆæ‰§è¡Œï¼Œæ­¤æ—¶åªå‘ä¸€æ¬¡è¯·æ±‚ï¼›<br>éç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨éœ€è¦å…ˆé¢„æ£€åˆ¤æ–­ï¼Œæ­¤æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ï¼Œä¸€æ¬¡é¢„æ£€ã€ä¸€æ¬¡æ­£å¼è¯·æ±‚ï¼›</p><p>ä»€ä¹ˆæ˜¯ç®€å•è¯·æ±‚ï¼š<br>æ–¹æ³•ä¸ºGETã€HEADã€POSTçš„è¯·æ±‚ï¼Œå¹¶ä¸”è¯·æ±‚å¤´ï¼ˆheaderï¼‰é‡Œé¢æ²¡æœ‰è‡ªå®šä¹‰å¤´ï¼›<br>è€Œä¸”æ»¡è¶³ï¼š<br>Content-Typeï¼š<br>text/plainã€<br>multipart/form-dataã€<br>application/x-www-form-urlencodedã€‚</p><p>ä»€ä¹ˆæ˜¯éç®€å•è¯·æ±‚ï¼š<br>é™¤ä¸Šä¹‹å¤–ï¼Œå°±æ˜¯éç®€å•è¯·æ±‚ï¼š<br>æ¯”å¦‚ï¼šæ–¹æ³•ä¸ºPUTã€DELETEçš„è¯·æ±‚ï¼Œå‘é€JSONæ ¼å¼çš„ajaxè¯·æ±‚ã€å¸¦è‡ªå®šä¹‰è¯·æ±‚å¤´çš„ajaxè¯·æ±‚ã€‚</p><p>ä»¥ä¸Šç®€å•ã€éç®€å•éœ€æ±‚ æ˜¯ç»éªŒæ€»ç»“ï¼Œä¸ä¸€å®šæ­£ç¡®ï¼Œåªå‚è€ƒã€‚</p><h4 id="é¢„æ£€è¯·æ±‚åŠå…¶ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–"><a href="#é¢„æ£€è¯·æ±‚åŠå…¶ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="é¢„æ£€è¯·æ±‚åŠå…¶ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–"></a>é¢„æ£€è¯·æ±‚åŠå…¶ç¼“å­˜ã€æ€§èƒ½ä¼˜åŒ–</h4><p>å¦‚æœè·¨åŸŸè¯·æ±‚æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œ è·¨åŸŸé¢„æ£€(preflight request)ï¼Œå‘ä¸¤æ¬¡è¯·æ±‚ï¼Œæœªå…æ€§èƒ½å½±å“ï¼Œ<br>ä¸ºæ­¤å¯ä»¥åœ¨æœåŠ¡ç«¯é’ˆå¯¹æ­¤æ¥å£ è®¾ç½® é¢„æ£€ç¼“å­˜ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œä¸è¿›è¡Œé¢„æ£€è¯·æ±‚ï¼Œä¸€æ¬¡è¯·æ±‚å³å¯å®Œæˆè·¨åŸŸå“åº”ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.addHeader(<span class="string">"Access-Control-Max-Age"</span>, <span class="string">"3600"</span>)ï¼Œè¡¨ç¤ºéš”<span class="number">60</span>åˆ†é’Ÿæ‰å‘èµ·é¢„æ£€è¯·æ±‚</span><br></pre></td></tr></table></figure></p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>ç®€å•è·¨åŸŸè¯·æ±‚åªå‘ä¸€æ¬¡ï¼Œéç®€å•è¯·æ±‚ä¼šå‘ä¸¤æ¬¡ï¼›<br>ä½†éç®€å•è¯·æ±‚ä¹Ÿä¸æ˜¯ä¸€å®šè¦å‘ä¸¤æ¬¡ï¼Œå¦‚æœåšäº†é¢„æ£€ç¼“å­˜ï¼Œä¸‹ä¸€æ¬¡å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶ï¼Œå¯èƒ½åªéœ€å‘é€ä¸€æ¬¡ã€‚</p><h3 id="åç«¯è§£å†³è·¨åŸŸçš„å¥—è·¯"><a href="#åç«¯è§£å†³è·¨åŸŸçš„å¥—è·¯" class="headerlink" title="åç«¯è§£å†³è·¨åŸŸçš„å¥—è·¯"></a>åç«¯è§£å†³è·¨åŸŸçš„å¥—è·¯</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>åç«¯è§£å†³è·¨åŸŸä¸€èˆ¬æ˜¯è®¾ç½® è¿™ä¸¤ä¸ªå“åº”å¤´ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œå…è®¸åŸŸåä¸ºhttp://localhost:8081çš„è¯·æ±‚è·¨åŸŸ</span></span><br><span class="line">res.addHeader(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"http://localhost:8081"</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œå…è®¸getè¯·æ±‚æ–¹å¼è·¨åŸŸ</span></span><br><span class="line">res.addHeader(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"GET"</span>);</span><br></pre></td></tr></table></figure></p><p>æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/proxy/origin.jpg" alt title class>                <p></p>            </figure></p><p>ä¸Šé¢æ˜¯é’ˆå¯¹ä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚ï¼Œå…è®¸è·¨åŸŸï¼Œå¦‚æœè¦é’ˆå¯¹æ‰€æœ‰åŸŸåï¼Œå¯è®¾ç½®ä¸ºå¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.addHeader(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"*"</span>);</span><br><span class="line">res.addHeader(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"*"</span>);</span><br></pre></td></tr></table></figure></p><h4 id="ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Origin"><a href="#ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Origin" class="headerlink" title="ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Origin"></a>ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Origin</h4><p>è¿™æ˜¯å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ å…è®¸è·¨åŸŸçš„åŸŸåã€‚<br>æ›´å¤šå‚è€ƒä¸Šé¢</p><h4 id="ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Methods"><a href="#ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Methods" class="headerlink" title="ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Methods"></a>ä¸è¿‡å¦‚æ­¤ï¼šAccess-Control-Allow-Methods</h4><p>è¿™æ˜¯å“åº”å¤´ï¼Œå‘Šè¯‰æµè§ˆå™¨ å…è®¸è·¨åŸŸçš„è¯·æ±‚æ–¹å¼ã€‚<br>æ›´å¤šå‚è€ƒä¸Šé¢</p><h3 id="å¸¦cookieçš„è·¨åŸŸ"><a href="#å¸¦cookieçš„è·¨åŸŸ" class="headerlink" title="å¸¦cookieçš„è·¨åŸŸ"></a>å¸¦cookieçš„è·¨åŸŸ</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  $.ajax(&#123;</span><br><span class="line">    type: &quot;get&quot;,</span><br><span class="line">    xhrFields: &#123;</span><br><span class="line">        widthCredentials: true // å‘Šè¯‰æœåŠ¡å™¨ï¼Œè¯·æ±‚è¦è¯»å–åå°è®¾ç½®çš„cookie</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">4ã€è·¨åŸŸæ¥å£å‘é€cookieæ—¶ï¼Œåå°ä»£ç æ³¨æ„ä»¥ä¸‹2ç‚¹ï¼š</span><br><span class="line">ï¼ˆ1ï¼‰å¸¦cookieäº†çš„æ—¶å€™ï¼ŒAccess-Control-Allow-Originï¼Œå¿…é¡»æ˜¯å…¨åŒ¹é…ï¼Œå¦‚http://localhost:8081ï¼Œ ä¸èƒ½æ˜¯ *</span><br><span class="line">ï¼ˆ2ï¼‰enable cookie</span><br><span class="line">res.addHeader(&quot;Access-Control-Allow-Credentials&quot;, &quot;true&quot;)</span><br><span class="line"></span><br><span class="line">ä¸ºäº†èƒ½å¤ŸåŒ¹é…å¤šä¸ªåŸŸï¼Œåç«¯ä»£ç ä¼šå†™æˆè¿™æ ·ï¼š</span><br><span class="line">String origin = req.getHeader(&quot;Origin&quot;);</span><br><span class="line">if (!org.springframework.util.StringUtils.isEmpty(origin)) &#123;</span><br><span class="line">    res.addHeader(&quot;Access-Control-Allow-Origin&quot;, origin)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h4><p>è¿™é‡Œè¯´çš„å¸¦cookieè·¨åŸŸåº”è¯¥æ˜¯ï¼Œæ¥å£å¦‚ä½•è¯»å– æœåŠ¡ç«¯åŸŸåä¸‹çš„cookieï¼›<br>è€Œä¸æ˜¯å°†å®¢æˆ·ç«¯åŸŸåä¸‹çš„cookieå‘é€ç»™ è·¨åŸŸä¸‹çš„æ¥å£ã€‚<br>è¿™é‡Œçš„cookieå¹¶ä¸æ˜¯æ¥å£å‘é€åŸŸä¸‹çš„ï¼Œå› ä¸ºæµè§ˆå™¨é»˜è®¤å‘é€çš„cookieéƒ½åªèƒ½æ˜¯æœ¬åŸŸåä¸‹çš„ã€‚</p><p>å¸¦cookieçš„è·¨åŸŸï¼Œæœ‰å¾ˆå¤šéœ€è¦å†ç ”ç©¶ï¼Œè¿™é‡Œåªæ˜¯ç¨å¾®ç¬”è®°ä¸‹ã€‚</p><h2 id="jsonp"><a href="#jsonp" class="headerlink" title="jsonp"></a>jsonp</h2><h3 id="è¯•ä¸€è¯•"><a href="#è¯•ä¸€è¯•" class="headerlink" title="è¯•ä¸€è¯•"></a>è¯•ä¸€è¯•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">https://www.imooc.com/activity/newcomer</span><br><span class="line"></span><br><span class="line">&#123;&quot;result&quot;:0,&quot;data&quot;:&#123;name:123&#125;,&quot;msg&quot;:&quot;\u6210\u529f&quot;&#125;</span><br><span class="line"></span><br><span class="line">æ”¹æˆjsonpå°±æ˜¯ï¼š</span><br><span class="line">https://www.imooc.com/activity/newcomer?callback=ddd</span><br><span class="line"></span><br><span class="line">è¿”å›ä¸ºï¼š</span><br><span class="line">ddd(&#123;&quot;result&quot;:0,&quot;data&quot;:&#123;name:123&#125;,&quot;msg&quot;:&quot;\u6210\u529f&quot;&#125;ï¼‰</span><br></pre></td></tr></table></figure><h3 id="JSONPçš„å®ç°åŸç†ä¸å·¥ä½œæœºåˆ¶"><a href="#JSONPçš„å®ç°åŸç†ä¸å·¥ä½œæœºåˆ¶" class="headerlink" title="JSONPçš„å®ç°åŸç†ä¸å·¥ä½œæœºåˆ¶"></a>JSONPçš„å®ç°åŸç†ä¸å·¥ä½œæœºåˆ¶</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä»€ä¹ˆæ˜¯JSONP â€”â€” æ˜¯ä¸€ä¸ªéå®˜æ–¹åè®®ï¼Œçº¦å®šå‘é€è¯·æ±‚çš„å‚æ•°ä¸­å¦‚æœåŒ…å«æŒ‡å®šçš„å‚æ•°ï¼Œé»˜è®¤ä¸ºcallback.å³JSONPè¯·æ±‚ã€‚</p><p>æœåŠ¡å™¨å‘ç°æ˜¯JSONPè¯·æ±‚çš„æ—¶å€™ï¼Œå°†è¿”å›å€¼ç”±åŸæ¥çš„JSONå¯¹è±¡æ”¹æˆjsä»£ç ã€‚</p><p>jsä»£ç çš„å†…å®¹æ˜¯å‡½æ•°è°ƒç”¨çš„å½¢å¼ï¼Œå®ƒçš„å‡½æ•°åæ˜¯callbackçš„å€¼ï¼Œå®ƒçš„å‡½æ•°çš„å‚æ•°æ˜¯åŸå…ˆjsonå¯¹è±¡ã€‚</p><h4 id="jsonpè¦æ±‚æœåŠ¡ç«¯ä¿®æ”¹"><a href="#jsonpè¦æ±‚æœåŠ¡ç«¯ä¿®æ”¹" class="headerlink" title="jsonpè¦æ±‚æœåŠ¡ç«¯ä¿®æ”¹"></a>jsonpè¦æ±‚æœåŠ¡ç«¯ä¿®æ”¹</h4><p>è¦æ¥å£æ”¯æŒjsonpï¼Œéœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹ï¼›<br>ä¸è¿‡å¾ˆå¤šæœåŠ¡å™¨é»˜è®¤è‡ªå·±ä¿®æ”¹äº†ï¼Œä¸éœ€è¦åç«¯äººå‘˜å»ä¿®æ”¹ï¼Œ æœåŠ¡å™¨ä¸€æ—¦è¯†åˆ«åˆ°è¯·æ±‚å‚æ•°ä¸­æœ‰callback å…³é”®å­—ï¼Œå°±è®¤ä¸ºæ˜¯jsonpï¼Œå°±ä»¥jsonpæ–¹å¼è¿”å›ã€‚<br>æœ¬èŠ‚è§‚ç‚¹å¾…è¿›ä¸€æ­¥ç¡®è®¤ã€‚</p><h4 id="æœåŠ¡å™¨é»˜è®¤ä¿®æ”¹"><a href="#æœåŠ¡å™¨é»˜è®¤ä¿®æ”¹" class="headerlink" title="æœåŠ¡å™¨é»˜è®¤ä¿®æ”¹"></a>æœåŠ¡å™¨é»˜è®¤ä¿®æ”¹</h4><p>å‚è€ƒã€Šjsonpè¦æ±‚æœåŠ¡ç«¯ä¿®æ”¹ã€‹</p><h4 id="callbackå…³é”®å­—"><a href="#callbackå…³é”®å­—" class="headerlink" title="callbackå…³é”®å­—"></a>callbackå…³é”®å­—</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="æœåŠ¡ç«¯çº¦å®šå¥½åï¼Œcallbackå…³é”®å­—å¯ä»¥ä»»æ„æ”¹"><a href="#æœåŠ¡ç«¯çº¦å®šå¥½åï¼Œcallbackå…³é”®å­—å¯ä»¥ä»»æ„æ”¹" class="headerlink" title="æœåŠ¡ç«¯çº¦å®šå¥½åï¼Œcallbackå…³é”®å­—å¯ä»¥ä»»æ„æ”¹"></a>æœåŠ¡ç«¯çº¦å®šå¥½åï¼Œcallbackå…³é”®å­—å¯ä»¥ä»»æ„æ”¹</h4><p>å¦‚é¢˜</p><h3 id="jquery-ajax-çš„jsonp-åŸç†"><a href="#jquery-ajax-çš„jsonp-åŸç†" class="headerlink" title="jquery ajax çš„jsonp åŸç†"></a>jquery ajax çš„jsonp åŸç†</h3><h4 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>jqueryçš„ajaxæ–¹æ³•æ”¯æŒjsonpï¼Œå…¶jqueryåº•å±‚åŸç†æ˜¯ åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾ï¼Œç„¶ååœ¨urlä¸ŠåŠ ä¸Šcallbackå…³é”®å­—ã€‚<br><figure class="image-box">                <img src="/image/proxy/cache.jpg" alt title class>                <p></p>            </figure></p><h4 id="ajax-jsonpè°ƒç”¨"><a href="#ajax-jsonpè°ƒç”¨" class="headerlink" title="ajax jsonpè°ƒç”¨"></a>ajax jsonpè°ƒç”¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url:base+<span class="string">'/test'</span>,</span><br><span class="line">  dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">  jsonp:<span class="string">'callback'</span>,<span class="comment">//jsonpé»˜è®¤å…³é”®å­—æ˜¯callbackï¼Œä¹Ÿå¯ä»¥æ”¹ä¸ºcallback123ä»»æ„åå­—</span></span><br><span class="line">  success:<span class="function"><span class="keyword">function</span>(<span class="params">json</span>)</span>&#123;</span><br><span class="line">    result = json</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="jsonpè¿”å›çš„æ˜¯jsä»£ç "><a href="#jsonpè¿”å›çš„æ˜¯jsä»£ç " class="headerlink" title="jsonpè¿”å›çš„æ˜¯jsä»£ç "></a>jsonpè¿”å›çš„æ˜¯jsä»£ç </h4><p>åˆ©ç”¨scriptçš„srcå‘è¯·æ±‚åï¼ŒæœåŠ¡å™¨é»˜è®¤æœåŠ¡å™¨ä¼šè¿”å›jsæ–‡ä»¶ï¼Œå› æ­¤å¦‚æœæœåŠ¡ç«¯ä¸ä½œå‡ºä¿®æ”¹ï¼Œç…§æ ·è¿”å›jsonæ•°æ®ï¼Œ<br>å°±ä¼šè®©æœåŠ¡å™¨å¤„ç†æ•°æ®æŠ¥é”™ï¼Œéœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹ã€‚</p><p>è€ŒæœåŠ¡å™¨é€šå¸¸æ˜¯æŠŠdata jsonå½“æˆ callbackçš„å…¥å‚ï¼Œè¿™æ ·æµè§ˆå™¨å°±èƒ½æ­£å¸¸å¤„ç†äº†</p><h4 id="ajax-jsonp-åŸç†åˆ†æ"><a href="#ajax-jsonp-åŸç†åˆ†æ" class="headerlink" title="ajax jsonp åŸç†åˆ†æ"></a>ajax jsonp åŸç†åˆ†æ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jqueryÂ ä¼šåœ¨å‰ç«¯é¡µé¢ä»»æ„ä¸€ä¸ªjsä¸Šå®šä¹‰ä¸€ä¸ªÂ å…¨å±€çš„Â callbackÂ getDataFnï¼›</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>Â <span class="title">getDataCallbackFn</span>(<span class="params">res</span>)</span>&#123;</span><br><span class="line">Â Â <span class="built_in">console</span>.log(<span class="string">'è¿™é‡Œæ˜¯åç«¯è¿”å›çš„jsonpæ•°æ®ï¼š'</span>,Â res)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;scriptÂ src=<span class="string">"/https://www.imooc.com/activity/newcomer?callback=ddd"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="comment">//https://www.imooc.com/activity/newcomer?callback=dddÂ è¿”å›ä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›ä¸ºï¼š</span></span><br><span class="line">getDataCallbackFn(&#123;<span class="string">"result"</span>:<span class="number">0</span>,<span class="string">"data"</span>:&#123;<span class="attr">name</span>:<span class="number">123</span>&#125;,<span class="string">"msg"</span>:<span class="string">"\u6210\u529f"</span>&#125;ï¼‰</span><br></pre></td></tr></table></figure><p>å› æ­¤å°±ç›¸å½“äºä¸€ä¸ªå‰ç«¯js å®šä¹‰äº†ä¸€ä¸ª callbackå‡½æ•°ï¼›<br>å¦å¤–ä¸€ä¸ªjs è°ƒç”¨äº† è¿™ä¸ªcallback å‡½æ•°ï¼›</p><p>å¾ˆå¤šäººåªç†Ÿæ‚‰è¿™ç§script å¼•å…¥js<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>Â <span class="attr">src</span>=<span class="string">"/abc.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä½†å´å¿½ç•¥äº† <code>/abc.js</code> ä¹Ÿæ˜¯ä¸€ä¸ª scriptè¯·æ±‚ï¼›</p><p>ç”¨äºjsonpçš„ <code>/https://www.imooc.com/activity/newcomer?callback=ddd</code> åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ª scriptè¯·æ±‚ï¼›</p><p>å› æ­¤è¿™äºŒè€…å½¢æˆçš„jsæ˜¯ä¸€ä¸ªé“ç†ï¼Œä¸€æ ·çš„æ²¡æœ‰ä»»ä½•åŒºåˆ«</p><h4 id="src-â€-abc-jsâ€-ä¸-src-â€-callback-dddâ€-éƒ½æ˜¯jsæ–‡ä»¶"><a href="#src-â€-abc-jsâ€-ä¸-src-â€-callback-dddâ€-éƒ½æ˜¯jsæ–‡ä»¶" class="headerlink" title="src=â€/abc.jsâ€ ä¸ src=â€/callback=dddâ€ éƒ½æ˜¯jsæ–‡ä»¶"></a>src=â€/abc.jsâ€ ä¸ src=â€/callback=dddâ€ éƒ½æ˜¯jsæ–‡ä»¶</h4><p>å¦‚ä¸Šã€Šajax jsonp åŸç†åˆ†æã€‹</p><h4 id="è²Œä¼¼å¥‡æ€ªçš„jsæ–‡ä»¶å¼•å…¥æ–¹å¼-src-â€-callback-dddâ€"><a href="#è²Œä¼¼å¥‡æ€ªçš„jsæ–‡ä»¶å¼•å…¥æ–¹å¼-src-â€-callback-dddâ€" class="headerlink" title="è²Œä¼¼å¥‡æ€ªçš„jsæ–‡ä»¶å¼•å…¥æ–¹å¼ src=â€/callback=dddâ€"></a>è²Œä¼¼å¥‡æ€ªçš„jsæ–‡ä»¶å¼•å…¥æ–¹å¼ src=â€/callback=dddâ€</h4><p>åˆšå¼€å§‹éƒ½ä»¥ä¸º src=â€/callback=dddâ€ è¿™ç§æ–¹å¼å¼•å…¥çš„jsç‰¹æ®Šï¼Œå…¶å®æ²¡æœ‰ä»»ä½•ç‰¹æ®Šçš„ï¼Œå®ƒè·Ÿâ€/abc.jsâ€ æ–¹å¼éƒ½æ˜¯jsæ–‡ä»¶çš„è¯·æ±‚ï¼›<br>æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚<br>å¦‚ä¸Šã€Šajax jsonp åŸç†åˆ†æã€‹</p><h4 id="éœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹-æœåŠ¡ç«¯é»˜è®¤ä½œå‡ºä¿®æ”¹äº†"><a href="#éœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹-æœåŠ¡ç«¯é»˜è®¤ä½œå‡ºä¿®æ”¹äº†" class="headerlink" title="éœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹(æœåŠ¡ç«¯é»˜è®¤ä½œå‡ºä¿®æ”¹äº†)"></a>éœ€è¦æœåŠ¡ç«¯ä½œå‡ºä¿®æ”¹(æœåŠ¡ç«¯é»˜è®¤ä½œå‡ºä¿®æ”¹äº†)</h4><p>å‚è€ƒä¸Šé¢ã€Šjsonpè¿”å›çš„æ˜¯jsä»£ç ã€‹ï¼›<br>ç®€å•è¯´ï¼Œå¦‚æœè¦æ¥å£æ”¯æŒjsonpï¼Œéœ€è¦åå°å®šä¹‰æ¥å£æ—¶ï¼Œå¦‚æœæ•è·åˆ°æ˜¯jsonpè¯·æ±‚ï¼Œå°±è¿”å›js å­—ç¬¦ä¸²ï¼Œè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥æ­£ç¡®å“åº”äº†ã€‚<br>è‡³äºæœåŠ¡å™¨æ˜¯å¦é»˜è®¤ä½œå‡ºä¿®æ”¹ï¼Œå¾…ç¡®è®¤ã€‚</p><h4 id="ç”¨jq-ajax-çš„jsonpè¯·æ±‚ä¸æ™®é€šè¯·æ±‚ä¸åŒ"><a href="#ç”¨jq-ajax-çš„jsonpè¯·æ±‚ä¸æ™®é€šè¯·æ±‚ä¸åŒ" class="headerlink" title="ç”¨jq ajax çš„jsonpè¯·æ±‚ä¸æ™®é€šè¯·æ±‚ä¸åŒ"></a>ç”¨jq ajax çš„jsonpè¯·æ±‚ä¸æ™®é€šè¯·æ±‚ä¸åŒ</h4><ul><li><p>è¯·æ±‚typeä¸åŒ<br>æ™®é€šè¯·æ±‚æ˜¯xhrï¼Œjsonp æ˜¯scriptè¯·æ±‚ï¼›</p><figure class="image-box">                <img src="/image/proxy/jsonp.jpg" alt title class>                <p></p>            </figure></li><li><p>è¿”å›çš„content-typeä¸ä¸€æ ·<br>æ™®é€šè¯·æ±‚æ˜¯jsonæˆ–å…¶ä»–ï¼›jsonp æ˜¯ jsã€‚å¦‚ä¸Šå›¾</p></li><li><p>urlä¸Šä¼šå¤šcallback<br>å¦‚ä¸Šå›¾ï¼ŒæœåŠ¡ç«¯è¿”å›æ—¶ï¼Œæ˜¯ç”¨callbackå…¥å‚åä½œä¸ºå‡½æ•°è¿”å›jsï¼Œå¦‚ä¸‹å›¾ï¼š</p><figure class="image-box">                <img src="/image/proxy/jsonp2.jpg" alt title class>                <p></p>            </figure></li></ul><h4 id="å½©è›‹ï¼šjqçš„jsonpé¿å…ç¼“å­˜åšæ³•"><a href="#å½©è›‹ï¼šjqçš„jsonpé¿å…ç¼“å­˜åšæ³•" class="headerlink" title="å½©è›‹ï¼šjqçš„jsonpé¿å…ç¼“å­˜åšæ³•"></a>å½©è›‹ï¼šjqçš„jsonpé¿å…ç¼“å­˜åšæ³•</h4><p>ç”¨jq çš„ajax jsonpï¼Œé»˜è®¤urlè¿˜ä¼šæœ‰ä¸€ä¸ªéšæœºæ•°ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…è¯·æ±‚è¢«ç¼“å­˜ï¼Œå¯ä¸ç”¨ã€‚<br><figure class="image-box">                <img src="/image/proxy/cache.jpg" alt title class>                <p></p>            </figure><br>å¯ä»¥è®¾ç½®éœ€è¦ç¼“å­˜ï¼Œå¦‚ä¸‹ï¼Œå†æ¬¡jsonpè¯·æ±‚æ—¶ï¼Œå°±ä¸ä¼šæœ‰éšæœºæ•°äº†ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result;</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url:base+<span class="string">'/test'</span>,</span><br><span class="line">  dataType:<span class="string">'jsonp'</span>,</span><br><span class="line">  cache:<span class="literal">true</span>,</span><br><span class="line">  success:<span class="function"><span class="keyword">function</span>(<span class="params">json</span>)</span>&#123;</span><br><span class="line">    result = json</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="jsonpçš„å¼Šç«¯"><a href="#jsonpçš„å¼Šç«¯" class="headerlink" title="jsonpçš„å¼Šç«¯"></a>jsonpçš„å¼Šç«¯</h3><ul><li>æœåŠ¡å™¨éœ€è¦æ”¹åŠ¨ä»£ç æ”¯æŒ</li><li>åªæ”¯æŒgetè¯·æ±‚ï¼Œå› ä¸ºjsonpæ˜¯é€šè¿‡scriptæ ‡ç­¾srcï¼Œå› æ­¤åªèƒ½åšgetè¯·æ±‚ï¼Œå¯¹postç­‰è¯·æ±‚æ— èƒ½ä¸ºåŠ›ï¼›</li><li>å‘é€å¯¹ä¸æ˜¯XHRè¯·æ±‚ï¼Œ XHRè¯·æ±‚æœ‰å¾ˆå¤šæœ‰ç‚¹ï¼Œæ¯”å¦‚å¼‚æ­¥å‘é€ï¼Œå„ç§äº‹ä»¶ï¼Œè€Œjsonpä¸æ˜¯xhrè¯·æ±‚ï¼Œå› æ­¤ä¸å…·å¤‡è¿™äº›æœ‰ç‚¹ã€‚</li></ul><h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><p>ä¸€äº›httpçš„çŸ¥è¯†ï¼Œæš‚æ—¶ç»Ÿè®¡åœ¨è¿™é‡Œ</p><h4 id="Access-Control-Allow-Headers"><a href="#Access-Control-Allow-Headers" class="headerlink" title="Access-Control-Allow-Headers"></a>Access-Control-Allow-Headers</h4><p>è¯´æ˜è¯·æ±‚éœ€è¦è¯¢é—®æœåŠ¡å™¨åå°æ˜¯å¦å…è®¸è¿™ä¸ªcontent-typeå¤´;<br><figure class="image-box">                <img src="/image/proxy/http.jpg" alt title class>                <p></p>            </figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä»£ç† </tag>
            
            <tag> è·¨åŸŸ </tag>
            
            <tag> hostä»£ç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å„¿ç«¥å…ç–«åŠ›</title>
      <link href="/2021/01/03/doctor_immunity/"/>
      <url>/2021/01/03/doctor_immunity/</url>
      
        <content type="html"><![CDATA[<h2 id="æé«˜å„¿ç«¥å…ç–«åŠ›"><a href="#æé«˜å„¿ç«¥å…ç–«åŠ›" class="headerlink" title="æé«˜å„¿ç«¥å…ç–«åŠ›"></a>æé«˜å„¿ç«¥å…ç–«åŠ›</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å…ç–«åŠ›çš„æ„æˆï¼š</p><ul><li>è¡¥å……è›‹ç™½è´¨ã€è¡¥å……é’™é“é”Œã€ç»´ç”Ÿç´ ï¼›</li><li>å°‘å‡ºæ±—</li></ul><h3 id="ç›—æ±—çš„åŸå› "><a href="#ç›—æ±—çš„åŸå› " class="headerlink" title="ç›—æ±—çš„åŸå› "></a>ç›—æ±—çš„åŸå› </h3><h4 id="å¤šä¸ç¼ºé’™æœ‰å…³"><a href="#å¤šä¸ç¼ºé’™æœ‰å…³" class="headerlink" title="å¤šä¸ç¼ºé’™æœ‰å…³"></a>å¤šä¸ç¼ºé’™æœ‰å…³</h4><h2 id="æé«˜å…ç–«åŠ›çš„è¯ç‰©"><a href="#æé«˜å…ç–«åŠ›çš„è¯ç‰©" class="headerlink" title="æé«˜å…ç–«åŠ›çš„è¯ç‰©"></a>æé«˜å…ç–«åŠ›çš„è¯ç‰©</h2><h3 id="è¡¥æ°”"><a href="#è¡¥æ°”" class="headerlink" title="è¡¥æ°”"></a>è¡¥æ°”</h3><p>é¦–å…ˆæ˜¯è¡¥æ°”çš„ä¸­è¯ï¼Œå…·æœ‰è¡¥æ°”åŠŸæ•ˆçš„ä¸­è¯ï¼Œå¾€å¾€èƒ½å¤Ÿèµ·åˆ°è‰¯å¥½çš„æé«˜å…ç–«åŠ›çš„ä½œç”¨ï¼Œæ¯”å¦‚é»„èŠªå£æœæ¶²æˆ–è€…ç‰å±é£é¢—ç²’ã€å››å›å­æ±¤ç­‰ç­‰ï¼Œè¿™äº›è¡¥æ°”çš„è¯ç‰©èƒ½å¤Ÿæœ‰æ•ˆåœ°è°ƒæ•´å„¿ç«¥å…ç–«åŠ›ä½ä¸‹çš„çŠ¶æ€ã€‚</p><p>é¾™ç‰¡å£®éª¨é¢—ç²’å’Œè™šæ±—åœé¢—ç²’</p><h3 id="æ”¹å–„è‚ é“"><a href="#æ”¹å–„è‚ é“" class="headerlink" title="æ”¹å–„è‚ é“"></a>æ”¹å–„è‚ é“</h3><p>å› ä¸ºå„¿ç«¥çš„è‚ é“ç§¯æ»è¢«æ¸…é™¤ä»¥åï¼Œè„¾èƒƒåŠŸèƒ½å°±ä¼šå¾—åˆ°å¥½è½¬ï¼Œä»è€Œå…ç–«åŠ›ä¹Ÿä¼šæ”¹å–„ï¼Œæ¯”å¦‚å¯ä»¥åº”ç”¨ç‹æ°ä¿èµ¤ä¸¸ã€ä¿å’Œä¸¸ç­‰ç­‰ã€‚</p><h3 id="å¾®é‡å…ƒç´ è¡¥å……"><a href="#å¾®é‡å…ƒç´ è¡¥å……" class="headerlink" title="å¾®é‡å…ƒç´ è¡¥å……"></a>å¾®é‡å…ƒç´ è¡¥å……</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¾®é‡å…ƒç´ çš„ç¼ºä¹ï¼Œå¦‚é’™é“é”Œçš„ä¸è¶³ï¼Œä¹Ÿä¼šå¯¼è‡´è‡ªèº«å…ç–«åŠ›çš„é™ä½ï¼Œåœ¨è¿åŠ¨ä¸Šéœ€è¦è¶³å¤Ÿæˆ·å¤–è¿åŠ¨ï¼Œä¿ƒè¿›æœºä½“å…ç–«åŠ›æé«˜ã€‚å¹¶ä¸”åŠæ—¶è¡¥å……é’™å‰‚å’Œç»´ç”Ÿç´ dï¼Œä¿ƒè¿›éª¨éª¼çš„ç”Ÿé•¿ï¼Œå› æ­¤æ‚£å„¿è‡ªèº«å…ç–«åŠ›æé«˜éœ€è¦ç»¼åˆæ€§çš„è°ƒç†ã€‚</p><p>åœ¨ç”Ÿæ´»å½“ä¸­å¾®é‡å…ƒç´ çš„å£æœä»¥åŠç»´ç”Ÿç´ Dçš„è¡¥å……ï¼Œå¯¹å°å„¿å…ç–«åŠ›ä¹Ÿæœ‰å¥½å¤„ï¼Œå¦‚è‘¡è„ç³–é…¸é”Œå£æœæ¶²ã€è‘¡è„ç³–é…¸é’™å£æœæ¶²ï¼Œæˆ–è€…å«é“çš„è¯ç‰©å¦‚ç¡«é…¸äºšé“å£æœæ¶²ï¼Œä»¥åŠç»´ç”Ÿç´ Dçš„è¡¥å……ï¼Œè¿™äº›å¯¹å°å„¿å…ç–«åŠŸèƒ½çš„æé«˜éƒ½æœ‰è¾…åŠ©ä½œç”¨ã€‚</p><p>å¾®é‡å…ƒç´ å½“ä¸­é’™ã€é“ã€é”Œç­‰å…ƒç´ çš„è¡¥å……å¯¹äºå…ç–«åŠ›ä¹Ÿæœ‰å¥½å¤„ï¼Œå¸¸ç”¨çš„æœ‰è‘¡è„ç³–é…¸é”Œå£æœæ¶²ã€è‘¡è„ç³–é…¸é’™å£æœæ¶²ã€ç¢³é…¸é’™é¢—ç²’æˆ–è€…ç¡«é…¸äºšé“å£æœæ¶²</p><p>é‡‘æ–½å°”åº·(ç»´ç”Ÿç´ ç‰‡)</p><h4 id="é’™-ä¸-ç»´ç”Ÿç´ D"><a href="#é’™-ä¸-ç»´ç”Ÿç´ D" class="headerlink" title="é’™ ä¸ ç»´ç”Ÿç´ D"></a>é’™ ä¸ ç»´ç”Ÿç´ D</h4><p>ç¢³é…¸é’™D3é¢—ç²’</p><h4 id="é“"><a href="#é“" class="headerlink" title="é“"></a>é“</h4><h4 id="é”Œ"><a href="#é”Œ" class="headerlink" title="é”Œ"></a>é”Œ</h4><p>æœè‘¡è„ç³–é…¸é”Œ</p><h3 id="è¥¿è¯ç±»"><a href="#è¥¿è¯ç±»" class="headerlink" title="è¥¿è¯ç±»"></a>è¥¿è¯ç±»</h3><p>å¸¸ç”¨çš„æœ‰è½¬ç§»å› å­å£æœæ¶²ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€åŒ¹å¤šè«å¾·å£æœæ¶²ï¼Œè¿™äº›éƒ½å¸¸ç”¨äºå°å„¿å‘¼å¸é“å…ç–«åŠ›çš„æé«˜ï¼Œæ•ˆæœéƒ½æ˜¯å¾ˆå¥½çš„ã€‚<br>è¥¿è¯æœ‰è½¬ç§»å› å­å£æœæ¶²ã€èƒ¸è…ºè‚½ã€åŒ¹å¤šè«å¾·ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€å…ç–«çƒè›‹ç™½ç­‰ï¼›<br>ç¬¬äºŒç±»ä¸ºç”Ÿç‰©åˆ¶å‰‚ï¼Œå¦‚è„¾æ°¨è‚½å£æœæ¶²æˆ–å¹²ç²‰å‰‚ï¼Œæˆ–è½¬ç§»å› å­å£æœæ¶²ï¼Œæˆ–åŒ¹å¤šè«å¾·å£æœæ¶²æˆ–é¢—ç²’å‰‚æˆ–ç‰‡å‰‚ç­‰</p><h3 id="ä¸­è¯ç±»"><a href="#ä¸­è¯ç±»" class="headerlink" title="ä¸­è¯ç±»"></a>ä¸­è¯ç±»</h3><p>å¸¸ç”¨çš„æœ‰é»„èŠªå£æœæ¶²ä»¥åŠç‰å±é£æ•£ç­‰è¯ç‰©ï¼Œå¯ä»¥ç»¼åˆè°ƒç†å°å„¿çš„ä½“è´¨ï¼Œå¯¹è„¾èƒƒåŠŸèƒ½çš„è°ƒæ•´æ•ˆæœéƒ½å¾ˆå¥½ã€‚<br>ä¸­è¯åŒ…æ‹¬ç‰å±é£æ•£å£æœæ¶²ã€é»„èŠªã€å…šå‚ç­‰<br>ç¬¬ä¸€ç±»æ˜¯ä¸­æˆè¯åˆ¶å‰‚ï¼Œå¦‚é»„èŠªé¢—ç²’ï¼Œæˆ–è€…æ§æé»„é¢—ç²’ï¼Œæˆ–è€…ç‰å±é£å£æœæ¶²æˆ–é¢—ç²’ã€‚</p><h3 id="ç»†èŒæº¶è§£äº§ç‰©"><a href="#ç»†èŒæº¶è§£äº§ç‰©" class="headerlink" title="ç»†èŒæº¶è§£äº§ç‰©"></a>ç»†èŒæº¶è§£äº§ç‰©</h3><p>æ³›ç¦èˆ’èƒ¶å›Š</p><h3 id="ç›Šç”ŸèŒ"><a href="#ç›Šç”ŸèŒ" class="headerlink" title="ç›Šç”ŸèŒ"></a>ç›Šç”ŸèŒ</h3><p>åˆç”Ÿå…ƒç›Šç”ŸèŒç­‰ä¿å¥å“ä¹Ÿæœ‰æé«˜å…ç–«åŠ›çš„ä½œç”¨ã€‚</p><h3 id="èµ–æ°¨é…¸"><a href="#èµ–æ°¨é…¸" class="headerlink" title="èµ–æ°¨é…¸"></a>èµ–æ°¨é…¸</h3><p>èµ–æ°¨é…¸ç»´B12é¢—ç²’</p><h3 id="ç»´ç”Ÿç´ D"><a href="#ç»´ç”Ÿç´ D" class="headerlink" title="ç»´ç”Ÿç´ D"></a>ç»´ç”Ÿç´ D</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><ul><li>ç§‰ç§‰ç›—æ±—è¿‡å¤šï¼ŒåŒè…¿è·Ÿæˆ‘ä¸€æ ·æœ‰äº›å¼¯æ›² è€ƒè™‘æ˜¯ç»´ç”Ÿç´ D ç¼ºä¹ å¯¼è‡´çš„ ä½å»ç—…è‹—å¤´ï¼Ÿ</li><li>å¤©å°º æ•ç§ƒ æ˜“æƒŠã€ä¸å¥½å…¥çœ  éƒ½æ˜¯ç»´ç”Ÿç´ D ç¼ºä¹çš„ç—‡çŠ¶ï¼›<br><a href="http://baijiahao.baidu.com/s?id=1667345262867994794&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">å‚è€ƒ</a></li></ul><h4 id="ç»´ç”Ÿç´ D-ä¸ç›—æ±—"><a href="#ç»´ç”Ÿç´ D-ä¸ç›—æ±—" class="headerlink" title="ç»´ç”Ÿç´ D ä¸ç›—æ±—"></a>ç»´ç”Ÿç´ D ä¸ç›—æ±—</h4><p>ç›—æ±—ä½œä¸ºä½å»ç—…åˆæœŸç—‡çŠ¶ä¹‹ä¸€ï¼Œæœ€ç›´æ¥çš„é˜²æ²»æ–¹æ³•å°±æ˜¯è¡¥å……ç»´ç”Ÿç´ Dï¼Œå®ƒå¯ä»¥å¢åŠ å®å®å¯¹é’™çš„æ‘„å–ï¼Œæ¢å¤è¡€é’™æ°´å¹³ï¼Œé™ä½å¤§è„‘ç¥ç»å…´å¥‹æ€§ï¼Œä»è€Œå‡å°‘ç›—æ±—çš„å‘ç”Ÿã€‚</p><h4 id="ç»´ç”Ÿç´ D-ä¸-ä½å»ç—…"><a href="#ç»´ç”Ÿç´ D-ä¸-ä½å»ç—…" class="headerlink" title="ç»´ç”Ÿç´ D ä¸ ä½å»ç—…"></a>ç»´ç”Ÿç´ D ä¸ ä½å»ç—…</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="ç»´ç”Ÿç´ D-ä¸-æ•ç§ƒ-æ˜“æƒŠã€ä¸å¥½å…¥çœ "><a href="#ç»´ç”Ÿç´ D-ä¸-æ•ç§ƒ-æ˜“æƒŠã€ä¸å¥½å…¥çœ " class="headerlink" title="ç»´ç”Ÿç´ D ä¸ æ•ç§ƒ æ˜“æƒŠã€ä¸å¥½å…¥çœ "></a>ç»´ç”Ÿç´ D ä¸ æ•ç§ƒ æ˜“æƒŠã€ä¸å¥½å…¥çœ </h4><p>å‚è€ƒä¸Šé¢ï¼Œ å¤©å°ºå°æ—¶å€™ æœ‰æ˜“æƒŠã€ä¸å¥½å…¥çœ ï¼Œæ•ç§ƒ ç°è±¡ã€‚</p><h3 id="å…ç–«è°ƒèŠ‚å‰‚"><a href="#å…ç–«è°ƒèŠ‚å‰‚" class="headerlink" title="å…ç–«è°ƒèŠ‚å‰‚"></a>å…ç–«è°ƒèŠ‚å‰‚</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¹Ÿå¯ä»¥è¯•è¯•æ³¨å°„æ–¯å¥‡åº·å¢å¼ºæŠµæŠ—åŠ›ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªå…ç–«è°ƒèŠ‚å‰‚ï¼Œæœ‰ä¸€å®šä½œç”¨ã€‚<br>å¦å¤–å¯ä»¥å£æœå¤šæŠ—ç”²ç´ (ç”˜éœ²èšç³–è‚½å£æœæº¶æ¶²)ã€‚<br>åŒ¹å¤šè«å¾·å£æœæ¶²<br>è„¾æ°¨è‚½</p><h4 id="å‘¼å¸é“å…ç–«åŠ›çš„æé«˜"><a href="#å‘¼å¸é“å…ç–«åŠ›çš„æé«˜" class="headerlink" title="å‘¼å¸é“å…ç–«åŠ›çš„æé«˜"></a>å‘¼å¸é“å…ç–«åŠ›çš„æé«˜</h4><p>è½¬ç§»å› å­å£æœæ¶²<br>è„¾æ°¨è‚½å£æœå†»å¹²ç²‰<br>åŒ¹å¤šè«å¾·å£æœæ¶²<br>è¿™äº›éƒ½å¸¸ç”¨äºå°å„¿å‘¼å¸é“å…ç–«åŠ›çš„æé«˜ï¼Œæ•ˆæœéƒ½æ˜¯å¾ˆå¥½çš„ã€‚</p><p>èƒ¸è…ºè‚½ã€å…ç–«çƒè›‹ç™½ç­‰ï¼›</p><h4 id="å…ç–«çƒè›‹ç™½"><a href="#å…ç–«çƒè›‹ç™½" class="headerlink" title="å…ç–«çƒè›‹ç™½"></a>å…ç–«çƒè›‹ç™½</h4><p>å¤šæ´»åŠ¨ï¼Œå¤šæ™’å¤ªé˜³ï¼Œä¿ƒè¿›é’™çš„å¸æ”¶ï¼Œå¢åŠ æœºä½“å…ç–«åŠ›ï¼Œä¹Ÿå¯ä»¥æ‰“å…ç–«çƒè›‹ç™½ã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>å„¿ç«¥å¢åŠ å…ç–«åŠ›çš„è¯ç‰©æ¯”è¾ƒå¤šï¼Œæœ‰ä¸­æˆè¯ä¹Ÿæœ‰è¥¿è¯ï¼Œå¸¸è§çš„æœ‰è„¾æ°¨è‚½å†»å¹²ç²‰ã€åŒ¹å¤šè«å¾·é¢—ç²’ã€ç‰å±é£é¢—ç²’ã€å¤å¯æ‰˜ã€æ³›ç¦èˆ’ç­‰ã€‚</p><p>å¢å¼ºå„¿ç«¥å…ç–«åŠ›çš„è¯ç‰©ï¼Œå£æœè¯ç‰©å¸¸ç”¨çš„æœ‰è½¬ç§»å› å­å£æœæ¶²ã€åŒ¹å¤šè«å¾·å£æœæ¶²ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€é»„èŠªå£æœæ¶²ã€‚å¦å¤–è‚Œè‚‰æ³¨å°„æé«˜å…ç–«åŠ›çš„è¯ç‰©æœ‰å¡ä»‹èŒå¤šç³–æ ¸é…¸æ³¨å°„æ¶²ï¼Œè¿˜å¯ä»¥é™è„‰è¾“å…¥å…ç–«çƒè›‹ç™½æ¥æé«˜å„¿ç«¥å…ç–«åŠ›</p><p>åŒ…æ‹¬ç‰å±é£æ•£å£æœæ¶²ã€è½¬ç§»å› å­å£æœæ¶²ã€èƒ¸è…ºè‚½ã€åŒ¹å¤šè«å¾·ã€å·¦æ—‹ç±³å”‘ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€å…ç–«çƒè›‹ç™½ã€ç‰›åˆä¹³ã€ç›Šç”ŸèŒåˆ¶å‰‚ã€å¤šç§ç»´ç”Ÿç´ ã€å¾®é‡å…ƒç´ åˆ¶å‰‚ç­‰ã€‚</p><h3 id="è¯è¡¥çš„å¼Šç«¯"><a href="#è¯è¡¥çš„å¼Šç«¯" class="headerlink" title="è¯è¡¥çš„å¼Šç«¯"></a>è¯è¡¥çš„å¼Šç«¯</h3><p>ä¸€èˆ¬å¢å¼ºå…ç–«åŠ›çš„è¯å¦‚æœåº”ç”¨è¿‡ä¹…æˆ–è€…å‰‚é‡è¿‡å¤§ï¼Œä¼šå¼•èµ·ä¸‹é¢çš„ä¸€äº›å±å®³ï¼š</p><ul><li>é€ æˆå„¿ç«¥å‡ºç°ä¸Šç«çš„ç—‡çŠ¶ï¼Œå› ä¸ºå¢å¼ºå„¿ç«¥å…ç–«åŠ›çš„è¯ç‰©ï¼Œå¤§å¤šæ˜¯å±äºè¡¥ç›Šç±»çš„è¯ç‰©ã€‚æ¯”å¦‚äººå‚ã€é»„èŠªç­‰ã€‚è¿™äº›è¯ç‰©å¦‚æœå‰‚é‡åå¤§ä»¥åï¼Œä¼šå¼•èµ·å„¿ç«¥å‡ºç°æµé¼»è¡€ã€å’½å–‰ç–¼ç—›ï¼Œç”šè‡³è…¹èƒ€ç­‰ç—‡çŠ¶ã€‚</li><li>ä¼šå¼•èµ·å„¿ç«¥å‡ºç°æ€§æ—©ç†Ÿï¼Œæœ‰äº›å¢å¼ºå…ç–«åŠ›çš„è¯ç‰©ä¼šæ”¹å–„å…ç–«åŠ›ï¼Œä½†æ˜¯åŒæ—¶ä¼šå¢åŠ æ€§æ—©ç†Ÿçš„é£é™©ï¼Œå°¤å…¶æ˜¯ç»™å„¿ç«¥é•¿æœŸåº”ç”¨è¯ç‰©çš„æƒ…å†µä¸‹ï¼Œä¼šå¼•èµ·å„¿ç«¥æå‰å‡ºç°ä¹³æˆ¿å¢å¤§ã€æœˆç»æ¥æ½®ç­‰ã€‚</li></ul><h2 id="æ–¹æ¡ˆ-ç§‰ç§‰"><a href="#æ–¹æ¡ˆ-ç§‰ç§‰" class="headerlink" title="æ–¹æ¡ˆ-ç§‰ç§‰"></a>æ–¹æ¡ˆ-ç§‰ç§‰</h2><h3 id="å…³äºç§‰ç§‰"><a href="#å…³äºç§‰ç§‰" class="headerlink" title="å…³äºç§‰ç§‰"></a>å…³äºç§‰ç§‰</h3><p>ä¸ç¼ºè›‹ç™½è´¨ã€ç»´ç”Ÿç´ ï¼›<br>è¡£æœåº”è¯¥ä¹Ÿè¿˜å¥½ï¼Œå› ä¸ºè·Ÿå¤©å°ºä¸€æ ·ï¼Œ<br>ä¸è¿‡è¦æ³¨æ„ å‡ºæ±—ã€‚<br>è‡³äºè¡¥å……è›‹ç™½è´¨ã€è¡¥å……é’™é“é”Œã€ç»´ç”Ÿç´ ï¼Œç›¸ä¿¡è¿™ç‚¹å®¶é‡Œé¥®é£Ÿä¸å·®ã€‚<br>è€Œä¸”ç§‰ç§‰æ¶ˆåŒ–ç³»ç»Ÿä¹Ÿä¸é”™ï¼Œ<br>æ‰€ä»¥ç§‰ç§‰å”¯ä¸€è¦è§£å†³çš„æ˜¯ç›—æ±—ã€‚</p><h3 id="å‡ºæ±—æ§åˆ¶"><a href="#å‡ºæ±—æ§åˆ¶" class="headerlink" title="å‡ºæ±—æ§åˆ¶"></a>å‡ºæ±—æ§åˆ¶</h3><h4 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æ±—æ°´ä¸€ä¸ªæ˜¯èº«ä½“çš„ç²¾æ°”ï¼Œæ±—æ°´å¤šï¼Œç²¾æ°”è™šï¼›<br>å¦å¤–ä¸€ä¸ªæ±—æ°´å¤šï¼Œå®¹æ˜“ç€å‡‰ï¼›</p><ul><li><p>åˆ¶æ­¢å¤ªå¤šæ˜æ±— ï¼š å°å„¿ä¸‰åˆ†é¥¥ä¸å¯’<br>å› ä¸ºå°å­©éœ€è¦è¿åŠ¨ï¼Œæ‰€ä»¥ï¼Œè®©è€å¦ˆæ³¨æ„ä¸è¦å¤ªç©¿å¤šï¼›</p></li><li><p>åˆ¶æ­¢ç›—æ±—<br>å› ä¸ºç§‰ç§‰ç›®å‰æœ‰è¿™ä¸ªç—‡çŠ¶äº†ï¼Œå› ä¸ºæœ‰å¿…è¦è¿›è¡Œè¯ç‰©è¡¥èº«ä½“ï¼›<br>ç”¨ç‰å±</p></li></ul><h4 id="ç›—æ±—ä¸ç¼ºé’™-ç»´ç”Ÿç´ d"><a href="#ç›—æ±—ä¸ç¼ºé’™-ç»´ç”Ÿç´ d" class="headerlink" title="ç›—æ±—ä¸ç¼ºé’™ ç»´ç”Ÿç´ d"></a>ç›—æ±—ä¸ç¼ºé’™ ç»´ç”Ÿç´ d</h4><p>ç—…æƒ…åˆ†æï¼š<br>å®å®çš„æƒ…å†µå…ˆå¤©æ€§è‚¾æ°”ä¸è¶³å¼•èµ·æ™šä¸Šç»å¸¸å‡ºç°ç›—æ±—å¤œå°¿å¤š<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®ä½ ç»™å®å®æœç”¨é¾™ç‰¡å£®éª¨é¢—ç²’å’Œè™šæ±—åœé¢—ç²’ï¼Œå¤šç»™å®å®åƒç‚¹é»‘è‰²çš„é£Ÿç‰©ï¼Œæ³¨æ„ä¼‘æ¯ä¸è¦ç†¬å¤œ</p><p>ç—…æƒ…åˆ†æï¼š<br>   æ‚¨å¥½ï¼Œæ ¹æ®ä½ è¯´çš„æƒ…å†µæ¥çœ‹ç›—æ±—ï¼Œä¸€èˆ¬å¯èƒ½æ˜¯ç¼ºé’™å¼•èµ·çš„ã€‚<br>   æŒ‡å¯¼æ„è§ï¼š<br>   å»ºè®®åˆ°åŒ»é™¢å„¿ç§‘çœ‹çœ‹ï¼Œå¯ä»¥é€‚å½“å–ç‚¹é¾™ç‰¡å£®éª¨é¢—ç²’ï¼Œå¤šæ™’æ™’å¤ªé˜³ï¼Œä¿ƒè¿›é’™å¸æ”¶ï¼Œç¥ä½ å¥åº·ã€‚</p><h3 id="å°å„¿ä¸‰åˆ†é¥¥ä¸å¯’-å‡ºæ±—å’Œé¥®é£Ÿ"><a href="#å°å„¿ä¸‰åˆ†é¥¥ä¸å¯’-å‡ºæ±—å’Œé¥®é£Ÿ" class="headerlink" title="å°å„¿ä¸‰åˆ†é¥¥ä¸å¯’(å‡ºæ±—å’Œé¥®é£Ÿ)"></a>å°å„¿ä¸‰åˆ†é¥¥ä¸å¯’(å‡ºæ±—å’Œé¥®é£Ÿ)</h3><p>è¿™ä¸€ç‚¹ç§‰ç§‰åšå¾—ä¸å¥½ï¼Œéœ€è¦è·Ÿè¿›çº æ­£ã€‚<br><a href="https://jingyan.baidu.com/article/ed2a5d1f0e110249f7be1729.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/ed2a5d1f0e110249f7be1729.html</a></p><h3 id="éªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ ad"><a href="#éªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ ad" class="headerlink" title="éªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ ad"></a>éªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ ad</h3><p>ä½ å¥½ï¼Œå°å­©å­åå¤å‘¼å¸é“æ„ŸæŸ“ï¼Œç—…å› å¾ˆå¤šï¼Œåº”è¯¥æ˜¯è¦å‡è¡¡çš„è¥å…»ï¼Œä¸èƒ½åé£Ÿï¼Œæ³¨æ„è´«è¡€ï¼Œç¼ºé”Œç­‰è¡¨ç°ï¼Œè¿˜æœ‰ç¼ºä¹ç»´ç”Ÿç´ adä¹Ÿå¯ä»¥å¼•èµ·å…ç–«åŠ›ä½ä¸‹ï¼ŒéªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ adï¼ŒåŒæ—¶å‘¢ä¹Ÿå¯ä»¥å£æœå¢å¼ºå…ç–«åŠ›çš„è¯åŒ¹å¤šè«å¾·ï¼Œç‰å±é£æ•£ã€‚</p><h3 id="åŸºæœ¬æ–¹æ¡ˆå¦‚ä¸‹"><a href="#åŸºæœ¬æ–¹æ¡ˆå¦‚ä¸‹" class="headerlink" title="åŸºæœ¬æ–¹æ¡ˆå¦‚ä¸‹"></a>åŸºæœ¬æ–¹æ¡ˆå¦‚ä¸‹</h3><h4 id="é’™-ç»´ç”Ÿç´ d"><a href="#é’™-ç»´ç”Ÿç´ d" class="headerlink" title="é’™ ç»´ç”Ÿç´ d"></a>é’™ ç»´ç”Ÿç´ d</h4><h4 id="ç‰å±è¡¥æ°”æ­¢æ±—"><a href="#ç‰å±è¡¥æ°”æ­¢æ±—" class="headerlink" title="ç‰å±è¡¥æ°”æ­¢æ±—"></a>ç‰å±è¡¥æ°”æ­¢æ±—</h4><h4 id="å…ç–«è›‹ç™½åˆ¶å‰‚"><a href="#å…ç–«è›‹ç™½åˆ¶å‰‚" class="headerlink" title="å…ç–«è›‹ç™½åˆ¶å‰‚"></a>å…ç–«è›‹ç™½åˆ¶å‰‚</h4><p>å¸¸ç”¨çš„æœ‰è½¬ç§»å› å­å£æœæ¶²ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€åŒ¹å¤šè«å¾·å£æœæ¶²ï¼Œè¿™äº›éƒ½å¸¸ç”¨äºå°å„¿å‘¼å¸é“å…ç–«åŠ›çš„æé«˜ï¼Œæ•ˆæœéƒ½æ˜¯å¾ˆå¥½çš„ã€‚<br>è¥¿è¯æœ‰è½¬ç§»å› å­å£æœæ¶²ã€èƒ¸è…ºè‚½ã€åŒ¹å¤šè«å¾·ã€è„¾æ°¨è‚½å£æœå†»å¹²ç²‰ã€å…ç–«çƒè›‹ç™½ç­‰ï¼›<br>ç¬¬äºŒç±»ä¸ºç”Ÿç‰©åˆ¶å‰‚ï¼Œå¦‚è„¾æ°¨è‚½å£æœæ¶²æˆ–å¹²ç²‰å‰‚ï¼Œæˆ–è½¬ç§»å› å­å£æœæ¶²ï¼Œæˆ–åŒ¹å¤šè«å¾·å£æœæ¶²æˆ–é¢—ç²’å‰‚æˆ–ç‰‡å‰‚ç­‰</p><p>è½¬ç§»å› å­å£æœæ¶² ä¸ åŒ¹å¤šè«å¾·å£æœæ¶² äºŒé€‰ä¸€ï¼›<br>å½“å‰é€‰ä¸­ åŒ¹å¤šè«å¾·å£æœæ¶² å› ä¸ºä»–åå‘äº åå¤æ„Ÿå†’æ„ŸæŸ“å’Œå…ç–«åŠ›å¢å¼º</p><h4 id="ä¸‹å•å¦‚ä¸‹"><a href="#ä¸‹å•å¦‚ä¸‹" class="headerlink" title="ä¸‹å•å¦‚ä¸‹"></a>ä¸‹å•å¦‚ä¸‹</h4><figure class="image-box">                <img src="/image/doctor/strong.jpg" alt title class>                <p></p>            </figure><h2 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h2><h3 id="é’™çš„å¸æ”¶"><a href="#é’™çš„å¸æ”¶" class="headerlink" title="é’™çš„å¸æ”¶"></a>é’™çš„å¸æ”¶</h3><p>çœ‹äº†åŒ»ç”Ÿçš„å»ºè®®ï¼Œå¾ˆå¤šæåŠé’™å¸æ”¶ï¼Œæ˜¯ä¸æ˜¯é’™å’Œç»´ç”Ÿç´ Då¾ˆé‡è¦ï¼Ÿ</p><h2 id="å…¶ä»–-1"><a href="#å…¶ä»–-1" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="å„¿ç«¥æ‰“é¼¾"><a href="#å„¿ç«¥æ‰“é¼¾" class="headerlink" title="å„¿ç«¥æ‰“é¼¾"></a>å„¿ç«¥æ‰“é¼¾</h3><p>å„¿ç«¥æ—¶æœŸæ˜“æ‚£æ€¥æ€§é¼»ç‚ã€æ€¥æ€§æ‰æ¡ƒä½“ç‚åŠæµè¡Œæ€§æ„Ÿå†’ç­‰ï¼Œ<br>è‹¥åå¤å‘ä½œï¼Œè…ºæ ·ä½“å¯è¿…é€Ÿå¢ç”Ÿè‚¥å¤§ï¼Œè‡´åŠ é‡é¼»é˜»å¡ï¼Œé˜»ç¢é¼»è…”å¼•æµï¼Œé¼»ç‚é¼»çª¦ç‚åˆ†æ³Œç‰©åˆåˆºæ¿€è…ºæ ·ä½“ä½¿ä¹‹ç»§ç»­å¢ç”Ÿï¼Œå½¢æˆäº’ä¸ºå› æœçš„æ¶æ€§å¾ªç¯ã€‚<br>è‹¥å­©å­å‡ºç°é¼»å µã€å¼ å£å‘¼å¸ï¼Œå°¤ä»¥å¤œé—´åŠ é‡ï¼Œç¡çœ æ‰“é¼¾ã€ä¸å®‰ï¼Œå¸¸ä¸æ—¶ç¿»èº«ï¼Œä»°å§æ—¶æ›´æ˜æ˜¾ï¼Œç”šè‡³å‘¼å¸æš‚åœç­‰ç—‡çŠ¶æ—¶ï¼Œéœ€åŠæ—¶åˆ°æ­£è§„åŒ»é™¢å°±åŒ»ã€‚</p><h3 id="å­©å­å¤œå°¿å¤šï¼Œç¡è§‰å‡ºæ±—"><a href="#å­©å­å¤œå°¿å¤šï¼Œç¡è§‰å‡ºæ±—" class="headerlink" title="å­©å­å¤œå°¿å¤šï¼Œç¡è§‰å‡ºæ±—"></a>å­©å­å¤œå°¿å¤šï¼Œç¡è§‰å‡ºæ±—</h3><h4 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h4><p><a href="https://www.bohe.cn/ask/view/103872773.html" target="_blank" rel="noopener">https://www.bohe.cn/ask/view/103872773.html</a></p><p>å­©å­è¶Šæ¥è¶Šå¤šï¼Œè¿˜è¦çœ‹ä¸€ä¸‹å­©å­æœ‰æ²¡æœ‰å‡ºæ±—çš„æƒ…å†µã€‚å¦‚æœå­©å­å¤œå°¿å¤šï¼Œç¡è§‰å‡ºæ±—æ˜¯ç¼ºé’™ï¼Œæ°”è™šç—‡çŠ¶ï¼Œå¤œé—´ä¼‘æ¯æ—¶å€™äº¤æ„Ÿç¥ç»å…´å¥‹å°±å®¹æ˜“å‡ºç°è™šæ±—çš„ç—‡çŠ¶è¿™ç§æƒ…å†µå¯ä»¥æœç”¨ç¢³é…¸é’™D3é¢—ç²’ï¼Œç‰å±é£é¢—ç²’ç­‰è¯ç‰©è¿›è¡Œè°ƒç†ã€‚å¹³æ—¶å¤šå–äº›é±¼æ±¤ï¼Œç‰›å¥¶ï¼Œè±†æµ†ï¼Œæ ¸æ¡ƒä¹³ç­‰é¥®å“ï¼Œå¤œé—´ä¼‘æ¯çš„æ—¶å€™ä¿æŒå®¤å†…ç©ºæ°”é€šé£ï¼Œå‡‰çˆ½ï¼Œé¿å…è¿‡åº¦é—·çƒ­çš„ç¯å¢ƒåˆºæ¿€ã€‚</p><h4 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h4><p>ç—…æƒ…åˆ†æï¼š<br>å®å®çš„æƒ…å†µå…ˆå¤©æ€§è‚¾æ°”ä¸è¶³å¼•èµ·æ™šä¸Šç»å¸¸å‡ºç°ç›—æ±—å¤œå°¿å¤š<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®ä½ ç»™å®å®æœç”¨é¾™ç‰¡å£®éª¨é¢—ç²’å’Œè™šæ±—åœé¢—ç²’ï¼Œå¤šç»™å®å®åƒç‚¹é»‘è‰²çš„é£Ÿç‰©ï¼Œæ³¨æ„ä¼‘æ¯ä¸è¦ç†¬å¤œ</p><p>ç—…æƒ…åˆ†æï¼š<br>æ‚¨å¥½ï¼Œæ ¹æ®ä½ è¯´çš„æƒ…å†µæ¥çœ‹ç›—æ±—ï¼Œä¸€èˆ¬å¯èƒ½æ˜¯ç¼ºé’™å¼•èµ·çš„ã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®åˆ°åŒ»é™¢å„¿ç§‘çœ‹çœ‹ï¼Œå¯ä»¥é€‚å½“å–ç‚¹é¾™ç‰¡å£®éª¨é¢—ç²’ï¼Œå¤šæ™’æ™’å¤ªé˜³ï¼Œä¿ƒè¿›é’™å¸æ”¶ï¼Œç¥ä½ å¥åº·ã€‚</p><h2 id="å…¶ä»–æ–¹æ¡ˆ"><a href="#å…¶ä»–æ–¹æ¡ˆ" class="headerlink" title="å…¶ä»–æ–¹æ¡ˆ"></a>å…¶ä»–æ–¹æ¡ˆ</h2><h3 id="å¸¸è§æ–¹æ¡ˆ"><a href="#å¸¸è§æ–¹æ¡ˆ" class="headerlink" title="å¸¸è§æ–¹æ¡ˆ"></a>å¸¸è§æ–¹æ¡ˆ</h3><h4 id="æ–¹æ¡ˆä¸€-1"><a href="#æ–¹æ¡ˆä¸€-1" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h4><p>å­©å­æŠµæŠ—åŠ›ä½ä¸‹ï¼Œå¾ˆå¤šå°å­©éƒ½æœ‰è¿™ä¸ªç°è±¡çš„å•Šï¼Œå»ºè®®å£æœè‘¡è„ç³–é…¸é”Œå’Œé€‚å½“å£æœåˆç”Ÿå…ƒã€‚<br>å¤šåƒè”¬èœæ°´æœï¼Œé˜²æ­¢åé£Ÿã€‚ä¸è¦åƒå‘³ç²¾å’Œé¸¡ç²¾ã€‚<br>ä¹Ÿå¯ä»¥è¯•è¯•æ³¨å°„æ–¯å¥‡åº·å¢å¼ºæŠµæŠ—åŠ›ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªå…ç–«è°ƒèŠ‚å‰‚ï¼Œæœ‰ä¸€å®šä½œç”¨ã€‚å¦å¤–å¯ä»¥å£æœå¤šæŠ—ç”²ç´ ã€‚</p><h4 id="æ–¹æ¡ˆäºŒ-1"><a href="#æ–¹æ¡ˆäºŒ-1" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h4><p>å¦‚æœå®å®å¹³æ—¶å…ç–«åŠ›æ¯”è¾ƒä½çš„è¯ï¼Œå¯ä»¥å£æœé’ˆæé«˜å…ç–«åŠ›çš„è¯ç‰©ï¼Œæˆ–è€…æ˜¯æ‰“æé«˜å…ç–«åŠ›çš„é’ˆã€‚</p><h4 id="æ–¹æ¡ˆä¸‰"><a href="#æ–¹æ¡ˆä¸‰" class="headerlink" title="æ–¹æ¡ˆä¸‰"></a>æ–¹æ¡ˆä¸‰</h4><p>å»ºè®®ä½ æ”¾æ¾å¿ƒæƒ…ï¼Œæ„‰å¿«çš„ç”Ÿæ´»ï¼Œè¿™ç§æƒ…å†µçš„è¯å¯ä»¥ç»™å­©å­ä¸ç”¨ä¸€äº›ï¼Œé‡‘æ–½å°”åº·æœ€é‡è¦çš„æ˜¯é¥®é£Ÿï¼Œå¯ä»¥è¡¥å……é”Œå’Œé’™ã€‚<br>ç§‘å­¦çš„ç”Ÿæ´»æ–¹å¼å¯ä»¥æé«˜å…ç–«åŠ›ï¼š1æé«˜ç¡çœ è´¨é‡ï¼Œ2ä¿æŒä¹è§‚çš„æƒ…ç»ªï¼Œ3é€‚å½“è¿åŠ¨ï¼Œ4è¡¥å……ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ï¼Œ5æ”¹å–„ä½“å†…ç”Ÿæ€ç¯å¢ƒï¼Œ6æŒ‰æ—¶åšæ¥ç§ç–«è‹—ã€‚</p><h4 id="æ–¹æ¡ˆå››"><a href="#æ–¹æ¡ˆå››" class="headerlink" title="æ–¹æ¡ˆå››"></a>æ–¹æ¡ˆå››</h4><p>å»ºè®®è¿™æ ·æƒ…å†µéœ€è¦å¤šæ³¨æ„ï¼Œå¯ä»¥é…åˆåŒ¹å¤šè«å¾·å£æœæ¶²è°ƒèŠ‚ï¼Œåˆ©äºæ”¹å–„å…ç–«åŠ›ä½ä¸‹æƒ…å†µï¼Œå¯ä»¥æŒ‰æ—¶æœç”¨æ²»ç–—ï¼ŒåŒæ—¶éœ€è¦å¤šæ³¨æ„åŠ å¼ºè¥å…»ï¼›<br>èµ–æ°¨é…¸ä¹Ÿæœ‰è°ƒèŠ‚ä½œç”¨ï¼Œ</p><h4 id="æ–¹æ¡ˆäº”"><a href="#æ–¹æ¡ˆäº”" class="headerlink" title="æ–¹æ¡ˆäº”"></a>æ–¹æ¡ˆäº”</h4><p> ä½ å¥½ï¼šå°å­©å­ç»å¸¸æ„Ÿå†’ï¼Œè¿™ä¸ªæ˜¯æŠµæŠ—åŠ›å·®ï¼Œå…ç–«åŠ›ä½ä¸‹çš„ç°è±¡ã€‚èµ–æ°¨é…¸ç»´B12é¢—ç²’ï¼Œèƒ½åŠ é€Ÿå„¿ç«¥ç”Ÿé•¿å‘è‚²ã€å¢è¿›é£Ÿæ¬²ã€‚æ¶ˆé™¤å¼‚é£Ÿç™–ã€‚æœ‰åŠ©äºå¤§è„‘å‘è‚²å’Œæé«˜æ™ºåŠ›ã€‚æœ‰æŠ—è´«è¡€ã€å¢å¼ºä½“è´¨å’ŒæŠ—ç—…çš„åŠŸæ•ˆã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®å£æœè‘¡è„ç³–é…¸é”Œå’Œé€‚å½“å£æœåˆç”Ÿå…ƒã€‚è¦è®©å®å®é˜²æ­¢åé£Ÿï¼Œå¤šå–æ°´ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œå¤šåƒç»´ç”Ÿç´ cçš„é£Ÿç‰©ï¼Œå¤šè¿åŠ¨ï¼Œå¤šæ™’æ™’å¤ªé˜³ï¼Œå¢åŠ æŠµæŠ—åŠ›ã€‚</p><h4 id="æ–¹æ¡ˆå…­"><a href="#æ–¹æ¡ˆå…­" class="headerlink" title="æ–¹æ¡ˆå…­"></a>æ–¹æ¡ˆå…­</h4><p> å­©å­å…ç–«åŠ›ä½å¯ä»¥ç»™ä»–åƒç‚¹æé«˜å…ç–«åŠ›çš„ä¸­è¯åˆ¶å‰‚çš„ç«¥åº·ç‰‡æˆ–ç‰å±é£é¢—ç²’ï¼Œå¹³å¸¸å°½é‡ç”¨å†·æ°´æ´—è„¸ã€çƒ­æ°´æ³¡è„šæ³•ï¼Œå¹³æ—¶å¤šåƒé«˜è›‹ç™½ï¼Œç»´ç”Ÿç´ ä¸°å¯Œçš„é£Ÿç‰©ï¼ŒåŠ å¼ºé”»ç‚¼ï¼Œæé«˜æœºä½“å…ç–«åŠ›ã€‚</p><h4 id="æ–¹æ¡ˆä¸ƒ"><a href="#æ–¹æ¡ˆä¸ƒ" class="headerlink" title="æ–¹æ¡ˆä¸ƒ"></a>æ–¹æ¡ˆä¸ƒ</h4><p>ç—…æƒ…åˆ†æï¼š<br>æ‚¨å¥½ï¼Œå­©å­å…ç–«åŠ›ä½ä¸‹ï¼Œè€æ˜¯çˆ±æ„Ÿå†’ç°è±¡ï¼Œè¦æ³¨æ„æŠ¤ç†çš„ï¼Œè¥å…»è¦å…¨é¢çš„ï¼Œè¦å¤šåƒæ°´æœè”¬èœæ¯”è¾ƒå¥½çš„ã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>åŒæ—¶ä¹Ÿè¦ä¿è¯å……è¶³çš„ç¡çœ çš„ï¼Œå†ä¸€ä¸ªä¹Ÿè¦å¤šåƒæ°´æœè”¬èœçš„ï¼Œç”¨ç‚¹ç»´Cï¼Œæœç”¨ç‰å±é£æ•£</p><h4 id="æ–¹æ¡ˆå…«"><a href="#æ–¹æ¡ˆå…«" class="headerlink" title="æ–¹æ¡ˆå…«"></a>æ–¹æ¡ˆå…«</h4><p>å¯¹äºå…ç–«åŠŸèƒ½ä½ä¸‹çš„å­©å­ï¼Œå¯ä»¥å£æœå…ç–«è°ƒèŠ‚å‰‚ï¼Œå¢åŠ æŠµæŠ—åŠ›ï¼Œå¯ä»¥é€‰æ‹©åŒ¹å¤šè«å¾·æˆ–è€…è„¾æ°¨è‚½ï¼Œ<br>å¦å¤–åœ¨é¥®é£Ÿæ–¹é¢ï¼Œå°½å¯èƒ½ç»™å­©å­åƒè›‹ç™½è´¨å’Œç»´ç”Ÿç´ ä¸°å¯Œçš„é£Ÿç‰©ã€‚<br>æœ€ä¸»è¦çš„å°±æ˜¯ç»™å­©å­å‡è¡¡çš„é¥®é£Ÿï¼Œåˆç†çš„è¥å…»ï¼Œé€‚å½“çš„è¿åŠ¨ï¼Œå…»æˆè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚è¿˜æœ‰å°±æ˜¯é¿å…å—å‡‰ï¼Œé¿å…å‘ç”Ÿå‘¼å¸é“æ„ŸæŸ“ã€‚</p><h4 id="æ–¹æ¡ˆä¹"><a href="#æ–¹æ¡ˆä¹" class="headerlink" title="æ–¹æ¡ˆä¹"></a>æ–¹æ¡ˆä¹</h4><p>å©´å„¿æ˜“æ‚£æ„Ÿå†’ï¼Œæ­¤ç—…åœ¨ä¸´åºŠä¸Šè¾ƒä¸ºå¸¸è§ï¼Œå…¶ç—…å› å°šä¸æ˜ç¡®ï¼Œä¸€èˆ¬ä¸å®å®å…ç–«åŠ›ä½ä¸‹æœ‰å…³ï¼Œéœ€è¿›è¡Œå…ç–«åŠ›è°ƒèŠ‚ï¼Œå¯ç»™äºˆå…ç–«çƒè›‹ç™½æˆ–æµæ„Ÿç–«è‹—ç§¯æé¢„é˜²å’Œæé«˜å®å®çš„å…ç–«åŠ›ï¼ŒåŒæ—¶å¯é€‚å½“å¢åŠ è¥å…»ï¼Œå¤šåƒé«˜è›‹ç™½ã€å¤šç»´ç”Ÿç´ ã€å¤šçŸ¿ç‰©è´¨çš„é£Ÿç‰©ï¼Œå¤šæ™’å¤ªé˜³ï¼Œå¤šå‚åŠ æˆ·å¤–æ´»åŠ¨ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡è¿™äº›æ–¹é¢çš„è°ƒæ•´ï¼Œå®å®çš„å…ç–«åŠ›å°±èƒ½è¾¾åˆ°æé«˜ï¼Œæ˜“æ‚£æ„Ÿå†’çš„æƒ…å†µå°±ä¼šé€æ­¥å¥½è½¬ã€‚</p><h4 id="æ–¹æ¡ˆå"><a href="#æ–¹æ¡ˆå" class="headerlink" title="æ–¹æ¡ˆå"></a>æ–¹æ¡ˆå</h4><p>ä½ å¥½ï¼Œå®å®å®¹æ˜“æ„Ÿå†’å¯èƒ½æ˜¯å­©å­æŠµæŠ—åŠ›ä½ä¸‹ï¼Œéœ€è¦åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹åˆç†ç”¨ç‰å±é£ï¼Œè¿˜å¯ä»¥ç”¨å…ç–«çƒè›‹ç™½ï¼Œå¯ä»¥å¢å¼ºå­©å­ä½“è´¨ï¼Œé¢„é˜²å­©å­æ„Ÿå†’ï¼Œå¹³æ—¶éœ€è¦ç»™å­©å­é¥®é£Ÿå¤šæ ·åŒ–ï¼ŒåŒæ—¶å»ºè®®å¤šåƒè”¬èœå’Œæ°´æœï¼Œåˆç†è¡¥å……ç»´ç”Ÿç´ Cï¼Œå¯ä»¥æ”¹å–„å­©å­çš„æƒ…å†µï¼Œå¹³æ—¶ç»™å­©å­é˜²å¯’ä¿æš–ï¼Œé¿å…å­©å­ç€å‡‰ã€‚</p><h4 id="æ–¹æ¡ˆåä¸€"><a href="#æ–¹æ¡ˆåä¸€" class="headerlink" title="æ–¹æ¡ˆåä¸€"></a>æ–¹æ¡ˆåä¸€</h4><p>ä½ å¥½ï¼Œå­©å­ä½“è´¨è™šå¼±ï¼Œç»å¸¸çˆ±ç”Ÿç—…çš„è¯ï¼Œå¯ä»¥ç»™å­©å­åŒ–éªŒä¸€ä¸‹å…ç–«çƒè›‹ç™½çœ‹çœ‹å…ç–«åŠ›ï¼Œå…ç–«åŠ›ä½çš„è¯å¯ä»¥åƒç‚¹è¯ç‰©è°ƒèŠ‚ä¸€ä¸‹å…ç–«åŠ›ï¼Œä¸´åºŠæ•ˆæœä¸é”™ã€‚</p><h4 id="æ–¹æ¡ˆåäºŒ"><a href="#æ–¹æ¡ˆåäºŒ" class="headerlink" title="æ–¹æ¡ˆåäºŒ"></a>æ–¹æ¡ˆåäºŒ</h4><p>ä½ å¥½ï¼Œå°å­©å­åå¤å‘¼å¸é“æ„ŸæŸ“ï¼Œç—…å› å¾ˆå¤šï¼Œåº”è¯¥æ˜¯è¦å‡è¡¡çš„è¥å…»ï¼Œä¸èƒ½åé£Ÿï¼Œæ³¨æ„è´«è¡€ï¼Œç¼ºé”Œç­‰è¡¨ç°ï¼Œè¿˜æœ‰ç¼ºä¹ç»´ç”Ÿç´ adä¹Ÿå¯ä»¥å¼•èµ·å…ç–«åŠ›ä½ä¸‹ï¼ŒéªŒå¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ adï¼ŒåŒæ—¶å‘¢ä¹Ÿå¯ä»¥å£æœå¢å¼ºå…ç–«åŠ›çš„è¯åŒ¹å¤šè«å¾·ï¼Œç‰å±é£æ•£ã€‚</p><h4 id="æ–¹æ¡ˆåä¸‰"><a href="#æ–¹æ¡ˆåä¸‰" class="headerlink" title="æ–¹æ¡ˆåä¸‰"></a>æ–¹æ¡ˆåä¸‰</h4><p>å¯ä»¥åœ¨åŒ»å¸ˆæŒ‡å¯¼ä¸‹é€‚å½“å£æœæé«˜å…ç–«åŠ›è¯ç‰©ï¼Œæˆ–è€…æ³¨å°„ä¸€äº›æé«˜å…ç–«åŠ›é’ˆå‰‚ã€‚</p><h3 id="æ–¹æ¡ˆåˆé›†"><a href="#æ–¹æ¡ˆåˆé›†" class="headerlink" title="æ–¹æ¡ˆåˆé›†"></a>æ–¹æ¡ˆåˆé›†</h3><ul><li>å„¿ç«¥æé«˜å…ç–«åŠ›çš„è¯ç‰©é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç±»ï¼šç¬¬ä¸€ç±»æ˜¯ä¸­æˆè¯åˆ¶å‰‚ï¼Œå¦‚é»„èŠªé¢—ç²’ï¼Œæˆ–è€…æ§æé»„é¢—ç²’ï¼Œæˆ–è€…ç‰å±é£å£æœæ¶²æˆ–é¢—ç²’ã€‚ç¬¬äºŒç±»ä¸ºç”Ÿç‰©åˆ¶å‰‚ï¼Œå¦‚è„¾æ°¨è‚½å£æœæ¶²æˆ–å¹²ç²‰å‰‚ï¼Œæˆ–è½¬ç§»å› å­å£æœæ¶²ï¼Œæˆ–åŒ¹å¤šè«å¾·å£æœæ¶²æˆ–é¢—ç²’å‰‚æˆ–ç‰‡å‰‚ç­‰ã€‚ç¬¬ä¸‰ç±»ä¸ºç»†èŒæº¶è§£äº§ç‰©ï¼Œå¦‚æ³›ç¦èˆ’èƒ¶å›Šã€‚</li><li>å­©å­æŠµæŠ—åŠ›ä½ä¸‹ï¼Œå¾ˆå¤šå°å­©éƒ½æœ‰è¿™ä¸ªç°è±¡çš„å•Šï¼Œå»ºè®®å£æœè‘¡è„ç³–é…¸é”Œå’Œé€‚å½“å£æœåˆç”Ÿå…ƒã€‚å¤šåƒè”¬èœæ°´æœï¼Œé˜²æ­¢åé£Ÿã€‚ä¸è¦åƒå‘³ç²¾å’Œé¸¡ç²¾ã€‚ä¹Ÿå¯ä»¥è¯•è¯•æ³¨å°„æ–¯å¥‡åº·å¢å¼ºæŠµæŠ—åŠ›ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªå…ç–«è°ƒèŠ‚å‰‚ï¼Œæœ‰ä¸€å®šä½œç”¨ã€‚å¦å¤–å¯ä»¥å£æœå¤šæŠ—ç”²ç´ ã€‚<br>ç—…æƒ…åˆ†æï¼š<br>ä½ å¥½ï¼Œå¦‚æœå®å®å¹³æ—¶å…ç–«åŠ›æ¯”è¾ƒä½çš„è¯ï¼Œå¯ä»¥å£æœé’ˆæé«˜å…ç–«åŠ›çš„è¯ç‰©ï¼Œæˆ–è€…æ˜¯æ‰“æé«˜å…ç–«åŠ›çš„é’ˆã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å¦‚æœå®å®å¹³æ—¶æ¯”è¾ƒå®¹æ˜“ç”Ÿç—…ï¼Œå¯ä»¥åƒå£æœä¸€äº›æé«˜å…ç–«åŠ›çš„è¯ç‰©ï¼Œæˆ–è€…æ˜¯æ‰“ä¸€äº›æé«˜å…ç–«çš„é’ˆï¼Œä½†æ˜¯è¦æ³¨æ„å¹³æ—¶å®å®èº«ä½“çš„é”»ç‚¼ï¼Œè¦è®©å®å®å¤šè¿åŠ¨ï¼Œä¿æŒå®å®è¥å…»çš„å‡è¡¡ã€‚<br>ä»¥ä¸Šæ˜¯å¯¹â€œå­©å­ç»å¸¸æ„Ÿå†’å’³å—½ï¼Œæ€æ ·æé«˜å…ç–«åŠ›â€è¿™ä¸ªé—®é¢˜çš„å»ºè®®ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œç¥æ‚¨å¥åº·ï¼</li></ul><ul><li>æ®æè¿°æƒ…å†µï¼Œå­©å­ç»å¸¸æ„Ÿå†’å’³å—½ï¼Œåº”å½“æ˜¯æŠµæŠ—åŠ›ä¸‹é™å¼•èµ·çš„ã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®ä½ å¹³æ—¶è®©å­©å­æ³¨æ„é¥®é£Ÿè¥å…»ï¼Œå¤šæ´»åŠ¨ï¼Œå¤šæ™’å¤ªé˜³ï¼Œä¿ƒè¿›é’™çš„å¸æ”¶ï¼Œå¢åŠ æœºä½“å…ç–«åŠ›ï¼Œä¹Ÿå¯ä»¥æ‰“å…ç–«çƒè›‹ç™½ã€‚</li></ul><ul><li><p>ç§‘å­¦çš„ç”Ÿæ´»æ–¹å¼å¯ä»¥æé«˜å…ç–«åŠ›ï¼š1æé«˜ç¡çœ è´¨é‡ï¼Œ2ä¿æŒä¹è§‚çš„æƒ…ç»ªï¼Œ3é€‚å½“è¿åŠ¨ï¼Œ4è¡¥å……ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ï¼Œ5æ”¹å–„ä½“å†…ç”Ÿæ€ç¯å¢ƒï¼Œ6æŒ‰æ—¶åšæ¥ç§ç–«è‹—ã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®ä½ æ”¾æ¾å¿ƒæƒ…ï¼Œæ„‰å¿«çš„ç”Ÿæ´»ï¼Œè¿™ç§æƒ…å†µçš„è¯å¯ä»¥ç»™å­©å­ä¸ç”¨ä¸€äº›ï¼Œé‡‘æ–½å°”åº·æœ€é‡è¦çš„æ˜¯é¥®é£Ÿï¼Œå¯ä»¥è¡¥å……é”Œå’Œé’™ã€‚</p></li><li><p>ä½ å¥½ç»“åˆå…·ä½“æƒ…å†µï¼Œæœ‰ç»å¸¸å¼•èµ·æ„Ÿå†’æƒ…å†µï¼Œå¤šæ˜¯æœ‰ä½“è™šå…ç–«åŠ›ä½ä¸‹ç­‰å½±å“å¼•èµ·<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®è¿™æ ·æƒ…å†µéœ€è¦å¤šæ³¨æ„ï¼Œå¯ä»¥é…åˆåŒ¹å¤šè«å¾·å£æœæ¶²è°ƒèŠ‚ï¼Œåˆ©äºæ”¹å–„å…ç–«åŠ›ä½ä¸‹æƒ…å†µï¼Œå¯ä»¥æŒ‰æ—¶æœç”¨æ²»ç–—ï¼ŒåŒæ—¶éœ€è¦å¤šæ³¨æ„åŠ å¼ºè¥å…»ï¼Œèµ–æ°¨é…¸ä¹Ÿæœ‰è°ƒèŠ‚ä½œç”¨ï¼Œ</p></li><li><p>ä½ å¥½ï¼šå°å­©å­ç»å¸¸æ„Ÿå†’ï¼Œè¿™ä¸ªæ˜¯æŠµæŠ—åŠ›å·®ï¼Œå…ç–«åŠ›ä½ä¸‹çš„ç°è±¡ã€‚èµ–æ°¨é…¸ç»´B12é¢—ç²’ï¼Œèƒ½åŠ é€Ÿå„¿ç«¥ç”Ÿé•¿å‘è‚²ã€å¢è¿›é£Ÿæ¬²ã€‚æ¶ˆé™¤å¼‚é£Ÿç™–ã€‚æœ‰åŠ©äºå¤§è„‘å‘è‚²å’Œæé«˜æ™ºåŠ›ã€‚æœ‰æŠ—è´«è¡€ã€å¢å¼ºä½“è´¨å’ŒæŠ—ç—…çš„åŠŸæ•ˆã€‚<br>æŒ‡å¯¼æ„è§ï¼š<br>å»ºè®®å£æœè‘¡è„ç³–é…¸é”Œå’Œé€‚å½“å£æœåˆç”Ÿå…ƒã€‚è¦è®©å®å®é˜²æ­¢åé£Ÿï¼Œå¤šå–æ°´ï¼Œå¤šåƒè”¬èœæ°´æœï¼Œå¤šåƒç»´ç”Ÿç´ cçš„é£Ÿç‰©ï¼Œå¤šè¿åŠ¨ï¼Œå¤šæ™’æ™’å¤ªé˜³ï¼Œå¢åŠ æŠµæŠ—åŠ›ã€‚</p></li><li><p>å°å­©æŠµæŠ—åŠ›ä½ä¸‹ï¼Œå¾ˆå¤šå°å­©éƒ½æœ‰è¿™ä¸ªç°è±¡çš„å•Šï¼Œå»ºè®®å£æœè‘¡è„ç³–é…¸é”Œå’Œé€‚å½“å£æœåˆç”Ÿå…ƒã€‚å¤šåƒè”¬èœæ°´æœï¼Œé˜²æ­¢åé£Ÿã€‚ä¸è¦åƒå‘³ç²¾å’Œé¸¡ç²¾ã€‚ ä¹Ÿå¯ä»¥è¯•è¯•æ³¨å°„æ–¯å¥‡åº·å¢å¼ºæŠµæŠ—åŠ›ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ªå…ç–«è°ƒèŠ‚å‰‚ï¼Œæœ‰ä¸€å®šä½œç”¨ã€‚ å¦å¤–å¯ä»¥å£æœå¤šæŠ—ç”²ç´ </p></li><li><p>å­©å­å…ç–«åŠ›ä½å¯ä»¥ç»™ä»–åƒç‚¹æé«˜å…ç–«åŠ›çš„ä¸­è¯åˆ¶å‰‚çš„ç«¥åº·ç‰‡æˆ–ç‰å±é£é¢—ç²’ï¼Œå¹³å¸¸å°½é‡ç”¨å†·æ°´æ´—è„¸ã€çƒ­æ°´æ³¡è„šæ³•ï¼Œå¹³æ—¶å¤šåƒé«˜è›‹ç™½ï¼Œç»´ç”Ÿç´ ä¸°å¯Œçš„é£Ÿç‰©ï¼ŒåŠ å¼ºé”»ç‚¼ï¼Œæé«˜æœºä½“å…ç–«åŠ›ã€‚</p></li><li><p>å­©å­å…ç–«åŠ›ä½ä¸‹ï¼Œè€æ˜¯çˆ±æ„Ÿå†’ç°è±¡ï¼Œè¦æ³¨æ„æŠ¤ç†çš„ï¼Œè¥å…»è¦å…¨é¢çš„ï¼Œè¦å¤šåƒæ°´æœè”¬èœæ¯”è¾ƒå¥½çš„<br>æŒ‡å¯¼æ„è§ï¼š<br>åŒæ—¶ä¹Ÿè¦ä¿è¯å……è¶³çš„ç¡çœ çš„ï¼Œå†ä¸€ä¸ªä¹Ÿè¦å¤šåƒæ°´æœè”¬èœçš„ï¼Œç”¨ç‚¹ç»´Cï¼Œæœç”¨ç‰å±é£æ•£</p></li><li><p>å¯¹äºå…ç–«åŠŸèƒ½ä½ä¸‹çš„å­©å­ï¼Œå¯ä»¥å£æœå…ç–«è°ƒèŠ‚å‰‚ï¼Œå¢åŠ æŠµæŠ—åŠ›ï¼Œå¯ä»¥é€‰æ‹©åŒ¹å¤šè«å¾·æˆ–è€…è„¾æ°¨è‚½ï¼Œå¦å¤–åœ¨é¥®é£Ÿæ–¹é¢ï¼Œå°½å¯èƒ½ç»™å­©å­åƒè›‹ç™½è´¨å’Œç»´ç”Ÿç´ ä¸°å¯Œçš„é£Ÿç‰©ã€‚æœ€ä¸»è¦çš„å°±æ˜¯ç»™å­©å­å‡è¡¡çš„é¥®é£Ÿï¼Œåˆç†çš„è¥å…»ï¼Œé€‚å½“çš„è¿åŠ¨ï¼Œå…»æˆè‰¯å¥½çš„ç”Ÿæ´»ä¹ æƒ¯ã€‚è¿˜æœ‰å°±æ˜¯é¿å…å—å‡‰ï¼Œé¿å…å‘ç”Ÿå‘¼å¸é“æ„ŸæŸ“ã€‚</p></li><li><p>æ ¹æ®ä½ ç—…æƒ…çš„æè¿°ï¼Œå¯ä»¥è·Ÿä»–å–ç‚¹å„¿è›‹ç™½ç²‰å•Šï¼Œç„¶ååƒç‚¹å„¿ç›Šç”ŸèŒï¼Œè¿™æ ·å°±å¯ä»¥æé«˜å…ç–«åŠ›ï¼Œæˆ–è€…ç°åœ¨æ­£æµè¡Œçš„ä¹³é“ç™½è›‹ç™½ä¹Ÿå¯ä»¥ï¼Œè¿™ä¸ªä¹Ÿæ˜¯è¡Œçš„ï¼Œç„¶åå»ºè®®å¹³æ—¶æ³¨æ„é¥®é£Ÿï¼Œå°‘åƒæ²¹è…»è¾›è¾£çš„é£Ÿç‰©ã€‚</p></li><li><p>ç»å¸¸å¸¦å®å®åˆ°é˜³å…‰å……è¶³çš„åœ°æ–¹æ™’å¤ªé˜³è¡¥å……é’™ï¼Œå…¶æ¬¡è®©å®å®å¤šåƒæ–°é²œçš„è”¬èœæ°´æœè¡¥å……ç»´ç”Ÿç´ ï¼Œç„¶åå¯ä»¥ç»™å®å®å†²æœè›‹ç™½è´¨ç²‰æˆ–è€…å£æœè½¬ç§»å› å­å£æœæ¶²æé«˜å…ç–«åŠ›ï¼Œæœ€åè§„å¾‹å®å®ä¸€æ—¥ä¸‰é¤ï¼Œå‡è¡¡è¥å…»ï¼</p></li><li><p>å©´å„¿æ˜“æ‚£æ„Ÿå†’ï¼Œæ­¤ç—…åœ¨ä¸´åºŠä¸Šè¾ƒä¸ºå¸¸è§ï¼Œå…¶ç—…å› å°šä¸æ˜ç¡®ï¼Œä¸€èˆ¬ä¸å®å®å…ç–«åŠ›ä½ä¸‹æœ‰å…³ï¼Œéœ€è¿›è¡Œå…ç–«åŠ›è°ƒèŠ‚ï¼Œå¯ç»™äºˆå…ç–«çƒè›‹ç™½æˆ–æµæ„Ÿç–«è‹—ç§¯æé¢„é˜²å’Œæé«˜å®å®çš„å…ç–«åŠ›ï¼ŒåŒæ—¶å¯é€‚å½“å¢åŠ è¥å…»ï¼Œå¤šåƒé«˜è›‹ç™½ã€å¤šç»´ç”Ÿç´ ã€å¤šçŸ¿ç‰©è´¨çš„é£Ÿç‰©ï¼Œå¤šæ™’å¤ªé˜³ï¼Œå¤šå‚åŠ æˆ·å¤–æ´»åŠ¨ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œé€šè¿‡è¿™äº›æ–¹é¢çš„è°ƒæ•´ï¼Œå®å®çš„å…ç–«åŠ›å°±èƒ½è¾¾åˆ°æé«˜ï¼Œæ˜“æ‚£æ„Ÿå†’çš„æƒ…å†µå°±ä¼šé€æ­¥å¥½è½¬ã€‚</p></li><li><p>ä½ å¥½ï¼Œå®å®å®¹æ˜“æ„Ÿå†’å¯èƒ½æ˜¯å­©å­æŠµæŠ—åŠ›ä½ä¸‹ï¼Œéœ€è¦åœ¨åŒ»ç”ŸæŒ‡å¯¼ä¸‹åˆç†ç”¨ç‰å±é£ï¼Œè¿˜å¯ä»¥ç”¨å…ç–«çƒè›‹ç™½ï¼Œå¯ä»¥å¢å¼ºå­©å­ä½“è´¨ï¼Œé¢„é˜²å­©å­æ„Ÿå†’ï¼Œå¹³æ—¶éœ€è¦ç»™å­©å­é¥®é£Ÿå¤šæ ·åŒ–ï¼ŒåŒæ—¶å»ºè®®å¤šåƒè”¬èœå’Œæ°´æœï¼Œåˆç†è¡¥å……ç»´ç”Ÿç´ Cï¼Œå¯ä»¥æ”¹å–„å­©å­çš„æƒ…å†µï¼Œå¹³æ—¶ç»™å­©å­é˜²å¯’ä¿æš–ï¼Œé¿å…å­©å­ç€å‡‰ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åŒ»è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å„¿ç«¥å…ç–«åŠ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssè¶£äº‹</title>
      <link href="/2020/11/28/css_deep/"/>
      <url>/2020/11/28/css_deep/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ç”¨äºè®°å½•cssçš„ä¸€äº›éš¾ç‚¹ã€é»‘çŸ¥è¯†ï¼Œäº†è§£å¹¶è§£å†³ä»–ä»¬æ˜¯ä¸€ä»¶å¾ˆæœ‰è¶£çš„äº‹æƒ…ã€‚<br>åœ¨ã€Šcssç¬”è®°ã€‹ä¸­ä¹Ÿæœ‰åˆ—ä¸¾é»‘çŸ¥è¯†ï¼Œä¸è¿‡è¯¥ç¯‡å¹…å·²ç»å¾ˆå¤šäº†ï¼Œå› æ­¤åˆå†™ä¸€ç¯‡ã€‚</p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="å¦‚ä½•absoluteçš„å­å…ƒç´ ä¸æ¢è¡Œ"><a href="#å¦‚ä½•absoluteçš„å­å…ƒç´ ä¸æ¢è¡Œ" class="headerlink" title="å¦‚ä½•absoluteçš„å­å…ƒç´ ä¸æ¢è¡Œ"></a>å¦‚ä½•absoluteçš„å­å…ƒç´ ä¸æ¢è¡Œ</h3><h4 id="absoluteçš„å­å…ƒç´ æ¢è¡Œçš„é—®é¢˜"><a href="#absoluteçš„å­å…ƒç´ æ¢è¡Œçš„é—®é¢˜" class="headerlink" title="absoluteçš„å­å…ƒç´ æ¢è¡Œçš„é—®é¢˜"></a>absoluteçš„å­å…ƒç´ æ¢è¡Œçš„é—®é¢˜</h4><p>ä¸è¿‡æˆ‘ä¸æƒ³è®©absoluteå­å…ƒç´ æ¢è¡Œï¼Œå¦‚ä½•å®ç°å‘¢ã€‚<br>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css_deep/ab.png" alt title class>                <p></p>            </figure><br>ä»£ç ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .wrap&#123;</span><br><span class="line">      width: 300px;</span><br><span class="line">      position: relative;</span><br><span class="line">      background-color: grey;</span><br><span class="line">    &#125;</span><br><span class="line">    .content&#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">    &#125;</span><br><span class="line">    .item&#123;</span><br><span class="line">      width: 110px;</span><br><span class="line">      border: 1px solid;</span><br><span class="line">      /* ä½¿ç”¨floatæ˜¯å› ä¸º floatå¯ä»¥å°†divå…ƒç´ è½¬ä¸º inline-blockï¼ŒåŒæ—¶æ¶ˆé™¤é—´éš™ */</span><br><span class="line">      float: left;</span><br><span class="line">      background-color: blueviolet;</span><br><span class="line">      height: 100px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="absoluteå®½åº¦é»˜è®¤ä¸è¶…è¿‡çˆ¶å…ƒç´ "><a href="#absoluteå®½åº¦é»˜è®¤ä¸è¶…è¿‡çˆ¶å…ƒç´ " class="headerlink" title="absoluteå®½åº¦é»˜è®¤ä¸è¶…è¿‡çˆ¶å…ƒç´ "></a>absoluteå®½åº¦é»˜è®¤ä¸è¶…è¿‡çˆ¶å…ƒç´ </h4><p>å¹¶ä¸æ˜¯absoluteå®½åº¦ä¸èƒ½è¶…è¿‡çˆ¶å…ƒç´ ï¼Œabsoluteè„±ç¦»æ–‡æ¡£æµï¼Œä½ å¯ä»¥ç›´æ¥è®¾ç½®absoluteå…ƒç´ å®½åº¦ä¸ºä»»ä½•å®½åº¦ã€‚<br>ä½†æ˜¯å¦‚æœä½ ä¸è®¾ç½®absoluteå®½åº¦ï¼Œabsoluteå°†ä½¿ç”¨é»˜è®¤å®½åº¦ï¼Œç”±ä»¥ä¸‹ä¸‰è€…å†³å®šï¼š</p><ul><li>çˆ¶å…ƒç´ å®½åº¦</li><li>leftå€¼ é»˜è®¤0</li><li>rightå€¼ é»˜è®¤0</li></ul><p>å› æ­¤å½“ä½ ä¸è®¾ç½®absoluteå®½åº¦æ—¶ï¼Œé»˜è®¤å°±æ˜¯çˆ¶å…ƒç´ å®½åº¦ã€‚<br>ä½†æ˜¯æ³¨æ„äº†ï¼Œå¦‚æœä½ è®¾ç½®äº†leftå€¼ 10pxï¼Œ å› ä¸ºæ²¡æœ‰è®¾ç½®rightï¼Œrighté»˜è®¤ä½¿ç”¨0ï¼Œé‚£ä¹ˆabsoluteå®½åº¦å°†ä¸º ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">absoluteå®½åº¦ = çˆ¶å…ƒç´ å®½åº¦ - 10px</span><br></pre></td></tr></table></figure></p><h4 id="æ¯è®¾ç½®leftå¤šå°‘ï¼Œè‡ªèº«å®½åº¦å‡å¤šå°‘"><a href="#æ¯è®¾ç½®leftå¤šå°‘ï¼Œè‡ªèº«å®½åº¦å‡å¤šå°‘" class="headerlink" title="æ¯è®¾ç½®leftå¤šå°‘ï¼Œè‡ªèº«å®½åº¦å‡å¤šå°‘"></a>æ¯è®¾ç½®leftå¤šå°‘ï¼Œè‡ªèº«å®½åº¦å‡å¤šå°‘</h4><p>å‚è€ƒã€Šabsoluteå®½åº¦é»˜è®¤ä¸è¶…è¿‡çˆ¶å…ƒç´ ã€‹</p><h4 id="è®¾ç½®absoluteå¤§äºçˆ¶å…ƒç´ æ–¹æ³•"><a href="#è®¾ç½®absoluteå¤§äºçˆ¶å…ƒç´ æ–¹æ³•" class="headerlink" title="è®¾ç½®absoluteå¤§äºçˆ¶å…ƒç´ æ–¹æ³•"></a>è®¾ç½®absoluteå¤§äºçˆ¶å…ƒç´ æ–¹æ³•</h4><ul><li>ç›´æ¥ç»™absolute è®¾ç½® widthå€¼ï¼›</li><li>è®¾ç½®left æˆ– right çˆ¶å€¼ï¼›</li><li>è®¾ç½®è‡ªå·±ä¸ºflexï¼›è¿™ä¸ªä¸‹é¢å½“è®²ï¼Œè§ ã€Šè®©absoluteæ°¸è¿œç­‰äºå­å…ƒç´ ä¹‹å’Œ(flex)ã€‹</li></ul><h4 id="è®©absoluteæ°¸è¿œç­‰äºå­å…ƒç´ ä¹‹å’Œ-flex"><a href="#è®©absoluteæ°¸è¿œç­‰äºå­å…ƒç´ ä¹‹å’Œ-flex" class="headerlink" title="è®©absoluteæ°¸è¿œç­‰äºå­å…ƒç´ ä¹‹å’Œ(flex)"></a>è®©absoluteæ°¸è¿œç­‰äºå­å…ƒç´ ä¹‹å’Œ(flex)</h4><p>è®©absoluteä¸‹çš„å­å…ƒç´ é«˜ä¿çœŸï¼Œä¸”ä¸æ¢è¡Œï¼Œabsoluteå…ƒç´ å®½åº¦ä¸å­å…ƒç´ ä¹‹å’Œçœ‹é½ï¼Œ<br>æ­¤æ—¶ç»™absoluteå…ƒç´  ï¼Œè®¾ç½® displayä¸ºflexã€‚<br>displayä¸ºflexçš„ä¸€å¤§ç‰¹æ€§å°±æ˜¯è®©æ‰€æœ‰å­å…ƒç´ æ°´å¹³æ’ä¸ºä¸€åˆ—ï¼Œ<br>åœ¨ä¸è®¾ç½®absoluteè‡ªèº«å®½åº¦ä¸‹ï¼Œabsoluteå®½åº¦ç­‰äºå­å…ƒç´ ä¹‹å’Œã€‚</p><h4 id="absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§"><a href="#absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§" class="headerlink" title="absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§"></a>absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§</h4><p>å½“ä¸€ä¸ªå…ƒç´ æ—¢ä½¿ç”¨absoluteåˆä½¿ç”¨flexæ—¶å€™ï¼Œ<br>å› ä¸ºflexæœ€å¤§ç‰¹æ€§æ˜¯ä¿è¯å­å…ƒç´ ä¸ºä¸€æ’ï¼Œä¸”å®½åº¦ä¸å˜ï¼›<br>å½“è‡ªèº«å®½åº¦ä¸å¤Ÿæ—¶ï¼Œcssç³»ç»Ÿä¼šç»™å…ƒç´ è®¾ç½®leftæˆ–rightè®¾ç½®ä¸€ä¸ªè´Ÿæ•°å€¼ï¼Œä¿è¯è‡ªèº«å®½åº¦å¤Ÿé•¿ï¼š<br>ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    .wrap&#123;</span><br><span class="line">      width: 300px;</span><br><span class="line">      position: relative;</span><br><span class="line">      background-color: grey;</span><br><span class="line">    &#125;</span><br><span class="line">    .content&#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      display: flex;</span><br><span class="line">    &#125;</span><br><span class="line">    .item&#123;</span><br><span class="line">      width: 110px;</span><br><span class="line">      border: 1px solid;</span><br><span class="line">      /* flexä¸‹floatæ— æ•ˆ; */</span><br><span class="line">      float: left;</span><br><span class="line">      background-color: blueviolet;</span><br><span class="line">      height: 150px;</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css_deep/flex.png" alt title class>                <p></p>            </figure><p>å½“absoluteè‡ªèº«åˆåŒæ—¶è®¾ç½®leftå’Œrightæ—¶ï¼Œå­å…ƒç´ è®¾ç½®flex-shrinkä¸º0æ—¶ï¼Œflexä¼˜å…ˆçº§æœ€é«˜ï¼Œä¾ç„¶èƒ½ä¿è¯å­å…ƒç´ ä¸ºä¸€æ’ï¼Œä¸”å®½åº¦ä¸å˜ï¼Œè¿™ä¸ªå¯è‡ªè¡Œè¯•éªŒã€‚</p><h4 id="è§£å†³æ–¹æ³•-flex"><a href="#è§£å†³æ–¹æ³•-flex" class="headerlink" title="è§£å†³æ–¹æ³•(flex)"></a>è§£å†³æ–¹æ³•(flex)</h4><p>æ–¹æ³•ä»£ç åŒ ã€Šabsoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§ã€‹</p><h3 id="ç”¨floatç»™å…ƒç´ è½¬inline-blockçš„ä¼˜ç‚¹"><a href="#ç”¨floatç»™å…ƒç´ è½¬inline-blockçš„ä¼˜ç‚¹" class="headerlink" title="ç”¨floatç»™å…ƒç´ è½¬inline-blockçš„ä¼˜ç‚¹"></a>ç”¨floatç»™å…ƒç´ è½¬inline-blockçš„ä¼˜ç‚¹</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä½¿ç”¨floatæ˜¯å› ä¸º floatå¯ä»¥å°†divå…ƒç´ è½¬ä¸º inline-blockï¼ŒåŒæ—¶æ¶ˆé™¤é—´éš™ã€‚<br>ä¼ ç»Ÿç›´æ¥ç»™å…ƒç´ è®¾ç½®displayä¸ºinline-blockï¼Œå¤šä¸ªå…ƒç´ å¹¶åˆ—æ—¶ï¼Œè¿˜è¦è€ƒè™‘æ¶ˆé™¤é—´éš™é—®é¢˜ã€‚<br>å¦‚æœçˆ¶å…ƒç´ æœ¬èº«æ˜¯ä¸€ä¸ªBFCï¼Œæ¯”å¦‚æœ¬èº«å®šä¹‰äº†postionä¸ºabsoluteæˆ– relative ç­‰ï¼Œæ›´åº”è¯¥ç”¨floatï¼Œå› æ­¤BFCå…ƒç´ è‡ªå¸¦æ¶ˆé™¤æµ®åŠ¨ã€‚</p><h4 id="postionä¸ºabsoluteæ›´åŠ æ¨èä½¿ç”¨"><a href="#postionä¸ºabsoluteæ›´åŠ æ¨èä½¿ç”¨" class="headerlink" title="postionä¸ºabsoluteæ›´åŠ æ¨èä½¿ç”¨"></a>postionä¸ºabsoluteæ›´åŠ æ¨èä½¿ç”¨</h4><p>å‚è€ƒã€Šæ¦‚è¿°ã€‹</p><h4 id="BFCå…ƒç´ æ›´åŠ æ¨èç”¨"><a href="#BFCå…ƒç´ æ›´åŠ æ¨èç”¨" class="headerlink" title="BFCå…ƒç´ æ›´åŠ æ¨èç”¨"></a>BFCå…ƒç´ æ›´åŠ æ¨èç”¨</h4><p>å‚è€ƒã€Šæ¦‚è¿°ã€‹ï¼Œæ‰€æœ‰BFCå…ƒç´ æ›´åº”è¯¥ä½¿ç”¨floatæ¥è½¬inline-blockã€‚</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueã€reactå¼‚åŒ</title>
      <link href="/2020/11/09/vue_react/"/>
      <url>/2020/11/09/vue_react/</url>
      
        <content type="html"><![CDATA[<h2 id="çˆ¶å­ä¼ å€¼ç›¸åŒ"><a href="#çˆ¶å­ä¼ å€¼ç›¸åŒ" class="headerlink" title="çˆ¶å­ä¼ å€¼ç›¸åŒ"></a>çˆ¶å­ä¼ å€¼ç›¸åŒ</h2><h2 id="é™¤äº†åŒå‘ç»‘å®šï¼Œvuexéƒ½ç±»ä¼¼"><a href="#é™¤äº†åŒå‘ç»‘å®šï¼Œvuexéƒ½ç±»ä¼¼" class="headerlink" title="é™¤äº†åŒå‘ç»‘å®šï¼Œvuexéƒ½ç±»ä¼¼"></a>é™¤äº†åŒå‘ç»‘å®šï¼Œvuexéƒ½ç±»ä¼¼</h2><h2 id="ç”Ÿå‘½å‘¨æœŸç±»ä¼¼"><a href="#ç”Ÿå‘½å‘¨æœŸç±»ä¼¼" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸç±»ä¼¼"></a>ç”Ÿå‘½å‘¨æœŸç±»ä¼¼</h2><h2 id="è·¯ç”±ç±»ä¼¼"><a href="#è·¯ç”±ç±»ä¼¼" class="headerlink" title="è·¯ç”±ç±»ä¼¼"></a>è·¯ç”±ç±»ä¼¼</h2>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
          <category> react </category>
          
          <category> vueåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vueç¬”è®°</title>
      <link href="/2020/10/28/vue/"/>
      <url>/2020/10/28/vue/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="å¼€å‘ä¸€ä¸ªé¡µé¢ç»“æ„ç¤ºèŒƒ"><a href="#å¼€å‘ä¸€ä¸ªé¡µé¢ç»“æ„ç¤ºèŒƒ" class="headerlink" title="å¼€å‘ä¸€ä¸ªé¡µé¢ç»“æ„ç¤ºèŒƒ"></a>å¼€å‘ä¸€ä¸ªé¡µé¢ç»“æ„ç¤ºèŒƒ</h3><p>ä¸»è¦éƒ½æ˜¯ç»„ä»¶å®Œæˆï¼š<br><figure class="image-box">                <img src="/image/vue/demo.png" alt title class>                <p></p>            </figure></p><h3 id="æŒ‚è½½ç‚¹ï¼Œæ¨¡ç‰ˆä¸å®ä¾‹"><a href="#æŒ‚è½½ç‚¹ï¼Œæ¨¡ç‰ˆä¸å®ä¾‹" class="headerlink" title="æŒ‚è½½ç‚¹ï¼Œæ¨¡ç‰ˆä¸å®ä¾‹"></a>æŒ‚è½½ç‚¹ï¼Œæ¨¡ç‰ˆä¸å®ä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"root"</span>&gt;&lt;<span class="regexp">/div&gt; /</span><span class="regexp">/æŒ‚è½½ç‚¹</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">new Vue(&#123;/</span><span class="regexp">/å®ä¾‹</span></span><br><span class="line"><span class="regexp">  el:"#root",</span></span><br><span class="line"><span class="regexp">  template:"&lt;h1&gt;hello &#123;&#123;msg&#125;&#125;&lt;/</span>h1&gt;<span class="string">", //æ¨¡ç‰ˆ //ä¹Ÿå«æ’å€¼è¡¨è¾¾å¼</span></span><br><span class="line"><span class="string">  data:&#123;</span></span><br><span class="line"><span class="string">  msg : "</span>world<span class="string">"</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ’å€¼è¡¨è¾¾å¼-ä¸-v-text-v-html"><a href="#æ’å€¼è¡¨è¾¾å¼-ä¸-v-text-v-html" class="headerlink" title="æ’å€¼è¡¨è¾¾å¼ ä¸ v-text v-html"></a>æ’å€¼è¡¨è¾¾å¼ ä¸ v-text v-html</h3><h4 id="æ’å€¼è¡¨è¾¾å¼"><a href="#æ’å€¼è¡¨è¾¾å¼" class="headerlink" title="æ’å€¼è¡¨è¾¾å¼"></a>æ’å€¼è¡¨è¾¾å¼</h4><p>å‚è€ƒä¸Šé¢ã€ŠæŒ‚è½½ç‚¹ï¼Œæ¨¡ç‰ˆä¸å®ä¾‹ã€‹</p><h4 id="æ’å€¼è¡¨è¾¾å¼ç›¸å½“äºv-text"><a href="#æ’å€¼è¡¨è¾¾å¼ç›¸å½“äºv-text" class="headerlink" title="æ’å€¼è¡¨è¾¾å¼ç›¸å½“äºv-text"></a>æ’å€¼è¡¨è¾¾å¼ç›¸å½“äºv-text</h4><p>v-text æ˜¯vueæ¡†æ¶ æ’å€¼å†™æ³•ä¸€ç§ï¼Œ<br>å¦å¤–è¿˜æœ‰ v-htmlã€‚<br><figure class="image-box">                <img src="/image/vue/values.jpg" alt title class>                <p></p>            </figure></p><h4 id="v-text-v-htmlå¯è®¤ä¸ºæ˜¯æ’å€¼è¡¨è¾¾å¼çš„å»¶ä¼¸"><a href="#v-text-v-htmlå¯è®¤ä¸ºæ˜¯æ’å€¼è¡¨è¾¾å¼çš„å»¶ä¼¸" class="headerlink" title="v-text v-htmlå¯è®¤ä¸ºæ˜¯æ’å€¼è¡¨è¾¾å¼çš„å»¶ä¼¸"></a>v-text v-htmlå¯è®¤ä¸ºæ˜¯æ’å€¼è¡¨è¾¾å¼çš„å»¶ä¼¸</h4><p>å¦‚é¢˜ã€‚</p><h4 id="å‡ ç§å†™æ³•"><a href="#å‡ ç§å†™æ³•" class="headerlink" title="å‡ ç§å†™æ³•"></a>å‡ ç§å†™æ³•</h4><figure class="image-box">                <img src="/image/vue/value2.png" alt title class>                <p></p>            </figure><h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>å‚è€ƒã€Šæ’å€¼è¡¨è¾¾å¼ã€‹çš„å›¾ç‰‡ã€‚</p><h3 id="å•å‘ç»‘å®šä¸åŒå‘ç»‘å®š"><a href="#å•å‘ç»‘å®šä¸åŒå‘ç»‘å®š" class="headerlink" title="å•å‘ç»‘å®šä¸åŒå‘ç»‘å®š"></a>å•å‘ç»‘å®šä¸åŒå‘ç»‘å®š</h3><p>å‚è€ƒã€Švueç‰¹æœ‰å†™æ³•  -  v-modelã€‹</p><h3 id="vueç‰¹æœ‰å†™æ³•"><a href="#vueç‰¹æœ‰å†™æ³•" class="headerlink" title="vueç‰¹æœ‰å†™æ³•"></a>vueç‰¹æœ‰å†™æ³•</h3><h4 id="v-text-v-html"><a href="#v-text-v-html" class="headerlink" title="v-text v-html"></a>v-text v-html</h4><p>æ˜¯ä¸€ç§æ’å€¼å†™æ³•ï¼Œè§ã€Šæ’å€¼è¡¨è¾¾å¼ã€‹ï¼Œä¸åŒèŠ±æ‹¬å·å†™æ³•å·®ä¸å¤šã€‚</p><h4 id="v-on-click-ä¸-click"><a href="#v-on-click-ä¸-click" class="headerlink" title="v-on:click ä¸ @click"></a>v-on:click ä¸ @click</h4><figure class="image-box">                <img src="/image/vue/values.jpg" alt title class>                <p></p>            </figure><h4 id="v-bind-ä¸-ï¼š"><a href="#v-bind-ä¸-ï¼š" class="headerlink" title="v-bind: ä¸ ï¼š"></a>v-bind: ä¸ ï¼š</h4><p>åè€…æ˜¯å‰è€…çš„ç¼©å†™ï¼Œç”¨äºhtmlå…ƒç´ å±æ€§ç»‘å®šã€‚<br>å½“è¢«ç»‘å®šåï¼Œå±æ€§ç­‰å·åé¢çš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªjsè¡¨è¾¾å¼ï¼Œjså†…è¡¨è¾¾å¼å˜é‡æŒ‡å‘å®ä¾‹ä¸­çš„dataä¸‹é¢çš„å±æ€§å€¼ï¼š<br><figure class="image-box">                <img src="/image/vue/bind.jpg" alt title class>                <p></p>            </figure></p><h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h4><p>ä¸€èˆ¬ç”¨äºå¯äº¤äº’çš„htmlå…ƒç´ ï¼Œæ¯”å¦‚inputï¼Œè€Œä¸æ˜¯å•çº¯çš„divï¼Œå®šä¹‰v-modelåï¼Œå°±æ˜¯æ•°æ®åŒå‘ç»‘å®šï¼Œ<br>inputå…ƒç´ å¯æ”¹å˜æ•°æ®ï¼Œæ•°æ®æ”¹å˜ä¹ŸåŒæ ·æ”¹å˜inputçš„æ˜¾ç¤ºã€‚<br>ä¸ä¹‹ç›¸å¯¹çš„æ˜¯å•å‘ç»‘å®šçš„v-bindï¼Œä¸€èˆ¬ç”¨äºçº¯å±•ç¤ºçš„htmlå…ƒç´ ï¼Œå¦‚divï¼Œåªç”¨äºæ•°æ®è·å–ï¼Œè€Œä¸èƒ½æ”¹å˜æ•°æ®ã€‚</p><h4 id="v-if-v-show-v-for-key"><a href="#v-if-v-show-v-for-key" class="headerlink" title="v-if v-show v-for :key"></a>v-if v-show v-for :key</h4><figure class="image-box">                <img src="/image/vue/for.jpg" alt title class>                <p></p>            </figure><p>å¦‚ä¸Šå›¾ï¼Œ v-if æ˜¾ç¤ºéšè—æ˜¯åˆ é™¤domï¼Œv-showï¼Œé€šè¿‡css display noneï¼Œ v-forç”¨äºéå†, :keyç”¨äºéå†å”¯ä¸€å€¼ï¼Œä¸reactä¸€è‡´ã€‚</p><h4 id="v-if-v-else-if-v-else"><a href="#v-if-v-else-if-v-else" class="headerlink" title="v-if v-else-if v-else"></a>v-if v-else-if v-else</h4><figure class="image-box">                <img src="/image/vue/if.jpg" alt title class>                <p></p>            </figure><h4 id="v-if-v-else-å¿…é¡»è¿ç€å†™"><a href="#v-if-v-else-å¿…é¡»è¿ç€å†™" class="headerlink" title="v-if v-else å¿…é¡»è¿ç€å†™"></a>v-if v-else å¿…é¡»è¿ç€å†™</h4><figure class="image-box">                <img src="/image/vue/if-err.jpg" alt title class>                <p></p>            </figure><h3 id="v-foråˆ—è¡¨æ¸²æŸ“"><a href="#v-foråˆ—è¡¨æ¸²æŸ“" class="headerlink" title="v-foråˆ—è¡¨æ¸²æŸ“"></a>v-foråˆ—è¡¨æ¸²æŸ“</h3><h4 id="ç»“åˆv-if"><a href="#ç»“åˆv-if" class="headerlink" title="ç»“åˆv-if"></a>ç»“åˆv-if</h4><figure class="image-box">                <img src="/image/vue/forif.jpg" alt title class>                <p></p>            </figure><h4 id="ç»“åˆv-show"><a href="#ç»“åˆv-show" class="headerlink" title="ç»“åˆv-show"></a>ç»“åˆv-show</h4><figure class="image-box">                <img src="/image/vue/for-show.jpg" alt title class>                <p></p>            </figure><h4 id="v-if-v-show-åˆ—è¡¨æ¸²æŸ“åŒºåˆ«"><a href="#v-if-v-show-åˆ—è¡¨æ¸²æŸ“åŒºåˆ«" class="headerlink" title="v-if v-show åˆ—è¡¨æ¸²æŸ“åŒºåˆ«"></a>v-if v-show åˆ—è¡¨æ¸²æŸ“åŒºåˆ«</h4><p>v-ifï¼Œæ›´åŠ çµæ´»ï¼›<br>v-showï¼Œå¦‚æœæ˜¯è¿‡æ»¤æ•ˆæœå¯ä»¥ä½¿ç”¨ã€‚</p><h4 id="ç»„ä»¶é©¼å³°å®šä¹‰ï¼Œå°æ–œæ ä½¿ç”¨"><a href="#ç»„ä»¶é©¼å³°å®šä¹‰ï¼Œå°æ–œæ ä½¿ç”¨" class="headerlink" title="ç»„ä»¶é©¼å³°å®šä¹‰ï¼Œå°æ–œæ ä½¿ç”¨"></a>ç»„ä»¶é©¼å³°å®šä¹‰ï¼Œå°æ–œæ ä½¿ç”¨</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»„ä»¶å®šä¹‰ï¼š --&gt;</span></span><br><span class="line">components:testOk</span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ï¼š --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">test-ok</span>&gt;</span><span class="tag">&lt;/<span class="name">test-ok</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="classç»‘å®š-ä¸-styleç»‘å®š"><a href="#classç»‘å®š-ä¸-styleç»‘å®š" class="headerlink" title="classç»‘å®š ä¸ styleç»‘å®š"></a>classç»‘å®š ä¸ styleç»‘å®š</h3><h4 id="classç»‘å®š"><a href="#classç»‘å®š" class="headerlink" title="classç»‘å®š"></a>classç»‘å®š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span>&gt;</span></span><br><span class="line">            å§“åï¼š&#123;&#123;item.name&#125;&#125;ï¼Œå¹´é¾„ï¼š&#123;&#123;item.age&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-show</span>=<span class="string">"item.age &gt; 24"</span> <span class="attr">:class</span>=<span class="string">"['banana','more',&#123;'another':item.age &lt; 26&#125;]"</span>&gt;</span></span><br><span class="line">                å¹´é¾„å¤§äº24çš„äººæœ‰ï¼š&#123;&#123;item.name&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="styleç»‘å®š"><a href="#styleç»‘å®š" class="headerlink" title="styleç»‘å®š"></a>styleç»‘å®š</h4><figure class="image-box">                <img src="/image/vue/style.jpg" alt title class>                <p></p>            </figure><h3 id="è®¡ç®—å±æ€§-åˆæˆå±æ€§-computed"><a href="#è®¡ç®—å±æ€§-åˆæˆå±æ€§-computed" class="headerlink" title="è®¡ç®—å±æ€§(åˆæˆå±æ€§)computed"></a>è®¡ç®—å±æ€§(åˆæˆå±æ€§)computed</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å½“æŸä¸€ä¸ªæ•°æ®æ¥æºäºå¤šä¸ªæ•°æ®è®¡ç®—è€Œæ¥æ—¶ï¼Œç”¨è¿™ä¸ªï¼Œå¹¶ä¸”ç±»ä¼¼reactçš„hooksåŠŸèƒ½ï¼Œæ­¤è®¡ç®—å…·æœ‰ç¼“å­˜è®¡ç®—æ€§èƒ½ä¼˜åŒ–èƒ½åŠ›ï¼Œ<br>åªæœ‰æ‰€ä¾èµ–çš„æ•°æ®å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ï¼Œå¦åˆ™å–ç¼“å­˜ã€‚<br>computedå¯ä»¥è¯´æ˜¯dataçš„å‡çº§ç‰ˆã€‚<br><figure class="image-box">                <img src="/image/vue/compd.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®è”åŠ¨"><a href="#ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®è”åŠ¨" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®è”åŠ¨"></a>ä½¿ç”¨åœºæ™¯ï¼šæ•°æ®è”åŠ¨</h4><p>æ•°æ®è”åŠ¨æ—¶ï¼Œä½¿ç”¨computedã€‚</p><h3 id="æ•°æ®ç›‘å¬å™¨-watch"><a href="#æ•°æ®ç›‘å¬å™¨-watch" class="headerlink" title="æ•°æ®ç›‘å¬å™¨ watch"></a>æ•°æ®ç›‘å¬å™¨ watch</h3><h4 id="å¯ç›‘å¬çš„æ•°æ®"><a href="#å¯ç›‘å¬çš„æ•°æ®" class="headerlink" title="å¯ç›‘å¬çš„æ•°æ®"></a>å¯ç›‘å¬çš„æ•°æ®</h4><p>å¯ä»¥ç›‘å¬ vueå®ä¾‹ä¸­çš„dataå’Œcomputedå†…çš„æ•°æ®å˜åŒ–ï¼Œå½“å˜åŒ–æ—¶ï¼Œå®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ã€‚</p><h4 id="ä½¿ç”¨åœºæ™¯ï¼šå¼‚æ­¥è¯·æ±‚"><a href="#ä½¿ç”¨åœºæ™¯ï¼šå¼‚æ­¥è¯·æ±‚" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼šå¼‚æ­¥è¯·æ±‚"></a>ä½¿ç”¨åœºæ™¯ï¼šå¼‚æ­¥è¯·æ±‚</h4><p>ç±»ä¼¼ react hooks ä¸­çš„effect ä¾èµ–ä¸€äº›å¦‚å‚ï¼Œæ ¹æ®å¦‚å‚æ˜¯å¦å˜åŒ–ï¼Œå†³å®šæ˜¯å¦é‡æ–°postè¯·æ±‚ã€‚</p><h4 id="å¦‚å‚åˆ†åˆ«ä¸ºnewValï¼ŒoldValue"><a href="#å¦‚å‚åˆ†åˆ«ä¸ºnewValï¼ŒoldValue" class="headerlink" title="å¦‚å‚åˆ†åˆ«ä¸ºnewValï¼ŒoldValue"></a>å¦‚å‚åˆ†åˆ«ä¸ºnewValï¼ŒoldValue</h4><p>å¦‚é¢˜</p><h4 id="computedä¸watchåŒºåˆ«"><a href="#computedä¸watchåŒºåˆ«" class="headerlink" title="computedä¸watchåŒºåˆ«"></a>computedä¸watchåŒºåˆ«</h4><p>å‰è€…å¯ç›‘å¬å¤šä¸ªå˜é‡ï¼Œåè€…åªèƒ½ç›‘å¬ä¸€ä¸ªå˜é‡å˜åŒ–ã€‚</p><h4 id="å¤åˆè®¡ç®—çš„ä¸‰ç§æ–¹æ³•-computed-watch-methods"><a href="#å¤åˆè®¡ç®—çš„ä¸‰ç§æ–¹æ³•-computed-watch-methods" class="headerlink" title="å¤åˆè®¡ç®—çš„ä¸‰ç§æ–¹æ³•(computed\watch\methods)"></a>å¤åˆè®¡ç®—çš„ä¸‰ç§æ–¹æ³•(computed\watch\methods)</h4><p>æ¨èç”¨computedï¼Œå…¶æ¬¡watchï¼Œæœ€æ¬¡methodsã€‚<br>å¦‚ä¸‹å›¾ï¼Œ<br>computed æ€§èƒ½æœ€å¥½ï¼Œæœ€ç®€æ´ï¼›<br>watch å› ä¸ºåªèƒ½ä¸€æ¬¡ç›‘å¬ä¸€ä¸ªå‚æ•°ï¼Œéœ€è¦å†™å¤šä¸ªç›‘å¬ï¼›<br>methods åªè¦vue renderæ—¶ï¼Œæ— è®ºä¾èµ–çš„å‚æ•°æ˜¯å¦å˜åŒ–ï¼Œéƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€æ¬¡ï¼Œæ€§èƒ½æœ€å·®ã€‚</p><figure class="image-box">                <img src="/image/vue/watch.jpg" alt title class>                <p></p>            </figure><h4 id="computedçš„getå’Œset"><a href="#computedçš„getå’Œset" class="headerlink" title="computedçš„getå’Œset"></a>computedçš„getå’Œset</h4><figure class="image-box">                <img src="/image/vue/setter.jpg" alt title class>                <p></p>            </figure><h3 id="thisæŒ‡å‘ä¸ä¼˜å…ˆçº§"><a href="#thisæŒ‡å‘ä¸ä¼˜å…ˆçº§" class="headerlink" title="thisæŒ‡å‘ä¸ä¼˜å…ˆçº§"></a>thisæŒ‡å‘ä¸ä¼˜å…ˆçº§</h3><p>thisæŒ‡å‘vueå®ä¾‹ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.namekey å…¶å®æ˜¯ this.$data.namekey</span><br></pre></td></tr></table></figure></p><p>vueåº•å±‚åšäº†å°è£…ï¼Œä¼˜å…ˆå»dataæ‰¾ç„¶åæ˜¯ computedï¼Œ ç„¶åæ˜¯ methodsã€‚</p><h2 id="åŸºç¡€çŸ¥è¯†äºŒ"><a href="#åŸºç¡€çŸ¥è¯†äºŒ" class="headerlink" title="åŸºç¡€çŸ¥è¯†äºŒ"></a>åŸºç¡€çŸ¥è¯†äºŒ</h2><h3 id="å‡¡äº‹å¸¦vçš„å±æ€§ï¼Œåé¢éƒ½æ˜¯jsè¡¨è¾¾å¼ï¼Œéå­—ç¬¦ä¸²"><a href="#å‡¡äº‹å¸¦vçš„å±æ€§ï¼Œåé¢éƒ½æ˜¯jsè¡¨è¾¾å¼ï¼Œéå­—ç¬¦ä¸²" class="headerlink" title="å‡¡äº‹å¸¦vçš„å±æ€§ï¼Œåé¢éƒ½æ˜¯jsè¡¨è¾¾å¼ï¼Œéå­—ç¬¦ä¸²"></a>å‡¡äº‹å¸¦vçš„å±æ€§ï¼Œåé¢éƒ½æ˜¯jsè¡¨è¾¾å¼ï¼Œéå­—ç¬¦ä¸²</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- v-modelä»¥ vå¼€å¤´ï¼Œè¯´æ˜æ˜¯vueä¸“æœ‰å±æ€§ï¼Œè¢«vueå°è£… namesæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œéå­—ç¬¦ä¸²ï¼Œæ˜¯ä¸€ä¸ªå˜é‡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">test-ok</span> <span class="attr">v-model</span>=<span class="string">"names"</span>&gt;</span><span class="tag">&lt;/<span class="name">test-ok</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ ·å¼ç»‘å®š"><a href="#æ ·å¼ç»‘å®š" class="headerlink" title="æ ·å¼ç»‘å®š"></a>æ ·å¼ç»‘å®š</h3><p>å¯é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼å®šä¹‰æ ·å¼ã€‚</p><h4 id="class"><a href="#class" class="headerlink" title=":class"></a>:class</h4><h4 id="style"><a href="#style" class="headerlink" title=":style"></a>:style</h4><h4 id="äºŒè€…æœ‰å¯¹è±¡å’Œæ•°ç»„ä¸¤ç§å®šä¹‰æ–¹å¼"><a href="#äºŒè€…æœ‰å¯¹è±¡å’Œæ•°ç»„ä¸¤ç§å®šä¹‰æ–¹å¼" class="headerlink" title="äºŒè€…æœ‰å¯¹è±¡å’Œæ•°ç»„ä¸¤ç§å®šä¹‰æ–¹å¼"></a>äºŒè€…æœ‰å¯¹è±¡å’Œæ•°ç»„ä¸¤ç§å®šä¹‰æ–¹å¼</h4><h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><h4 id="åœ¨domå…ƒç´ ä¸­refæŒ‡å‘dom"><a href="#åœ¨domå…ƒç´ ä¸­refæŒ‡å‘dom" class="headerlink" title="åœ¨domå…ƒç´ ä¸­refæŒ‡å‘dom"></a>åœ¨domå…ƒç´ ä¸­refæŒ‡å‘dom</h4><p>é€šè¿‡<code>this.$refs.refName</code>è·å–<br><figure class="image-box">                <img src="/image/vue/ref1.jpg" alt title class>                <p></p>            </figure></p><h4 id="åœ¨vueç»„ä»¶ä¸­refæŒ‡å‘ç»„ä»¶å®ä¾‹"><a href="#åœ¨vueç»„ä»¶ä¸­refæŒ‡å‘ç»„ä»¶å®ä¾‹" class="headerlink" title="åœ¨vueç»„ä»¶ä¸­refæŒ‡å‘ç»„ä»¶å®ä¾‹"></a>åœ¨vueç»„ä»¶ä¸­refæŒ‡å‘ç»„ä»¶å®ä¾‹</h4><p>è¿™ä¸ªå®ä¾‹å°±æ˜¯å­ç»„ä»¶å†…çš„thisï¼Œæ‹¥æœ‰ä¸€åˆ‡èƒ½åŠ›ï¼š<br><figure class="image-box">                <img src="/image/vue/ref2.jpg" alt title class>                <p></p>            </figure></p><h4 id="propsæ˜¯å¦å¸¦-çš„åŒºåˆ«"><a href="#propsæ˜¯å¦å¸¦-çš„åŒºåˆ«" class="headerlink" title="propsæ˜¯å¦å¸¦:çš„åŒºåˆ«"></a>propsæ˜¯å¦å¸¦:çš„åŒºåˆ«</h4><p>ç»™ç»„ä»¶test-okå®šä¹‰propsï¼Œ testå€¼æ˜¯jsè¡¨è¾¾å¼ï¼Œæ˜¯å˜é‡ï¼Œstrtestå€¼æ˜¯å­—ç¬¦ä¸²<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;test-ok :test=&quot;names&quot; strtest=&quot;names&quot;&gt;&lt;/test-ok&gt;</span><br></pre></td></tr></table></figure></p><h3 id="æ’æ§½slot"><a href="#æ’æ§½slot" class="headerlink" title="æ’æ§½slot"></a>æ’æ§½slot</h3><h4 id="slotå’Œé»˜è®¤å€¼"><a href="#slotå’Œé»˜è®¤å€¼" class="headerlink" title="slotå’Œé»˜è®¤å€¼"></a>slotå’Œé»˜è®¤å€¼</h4><figure class="image-box">                <img src="/image/vue/slot0.jpg" alt title class>                <p></p>            </figure><h4 id="sloté»˜è®¤å€¼å¯ä»¥æ˜¯htmlå…ƒç´ "><a href="#sloté»˜è®¤å€¼å¯ä»¥æ˜¯htmlå…ƒç´ " class="headerlink" title="sloté»˜è®¤å€¼å¯ä»¥æ˜¯htmlå…ƒç´ "></a>sloté»˜è®¤å€¼å¯ä»¥æ˜¯htmlå…ƒç´ </h4><figure class="image-box">                <img src="/image/vue/slot-default.jpg" alt title class>                <p></p>            </figure><h4 id="å…·åslot"><a href="#å…·åslot" class="headerlink" title="å…·åslot"></a>å…·åslot</h4><p>å¦‚ä¸‹ï¼Œçˆ¶å±‚å®šä¹‰æ’æ§½æ—¶ï¼Œå¯é€šè¿‡å®šä¹‰nameï¼Œæ­¤æ—¶å°±æ˜¯å…·åæ’æ§½ï¼Œå¯æœ‰å¤šä¸ªï¼Œå¦‚æœä¸å®šä¹‰nameï¼Œé‚£ä¹ˆæ­¤æ’æ§½åˆ™ä»£è¡¨çˆ¶å±‚æ•´ä¸ªæ‰€æœ‰æ’æ§½ï¼Œæ­¤åªæœ‰ä¸€ä¸ªã€‚<br><figure class="image-box">                <img src="/image/vue/slot.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸å…·åæ’æ§½åªæœ‰ä¸€ä¸ªï¼Œå…·åæ’æ§½å¯æœ‰å¤šä¸ª"><a href="#ä¸å…·åæ’æ§½åªæœ‰ä¸€ä¸ªï¼Œå…·åæ’æ§½å¯æœ‰å¤šä¸ª" class="headerlink" title="ä¸å…·åæ’æ§½åªæœ‰ä¸€ä¸ªï¼Œå…·åæ’æ§½å¯æœ‰å¤šä¸ª"></a>ä¸å…·åæ’æ§½åªæœ‰ä¸€ä¸ªï¼Œå…·åæ’æ§½å¯æœ‰å¤šä¸ª</h4><p>å‚è€ƒã€Šå…·åslotã€‹</p><h4 id="ä½œç”¨åŸŸæ’æ§½-render-propsæ¨¡å¼"><a href="#ä½œç”¨åŸŸæ’æ§½-render-propsæ¨¡å¼" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½(render propsæ¨¡å¼)"></a>ä½œç”¨åŸŸæ’æ§½(render propsæ¨¡å¼)</h4><p>æ²¡æœ‰ç”¨ä½œç”¨åŸŸæ’æ§½å‰ï¼š<br><figure class="image-box">                <img src="/image/vue/slot-pre.jpg" alt title class>                <p></p>            </figure><br>ç”¨ä¹‹åï¼š<br>template ä¸ slot-scope å±äºå›ºå®šå†™æ³•ã€‚è¿™ç§æ¨¡å¼å‘æäº†reactçš„render propsæ¨¡å¼ã€‚<br><figure class="image-box">                <img src="/image/vue/slot-fn.jpg" alt title class>                <p></p>            </figure></p><h3 id="templateç»„ä»¶ä¸v-once"><a href="#templateç»„ä»¶ä¸v-once" class="headerlink" title="templateç»„ä»¶ä¸v-once"></a>templateç»„ä»¶ä¸v-once</h3><p>templateæ˜¯vueè‡ªå¸¦æ ‡ç­¾ï¼Œå¯æ›¿æ¢ v-ifå†™æ³•ï¼Œå¦‚ä¸‹ï¼Œv-once ç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œè®©vueæ˜¾ç¤ºéšè—ç»„ä»¶æ—¶ä¸ç”¨å¸è½½ï¼Œå¯ä¸ç”¨ã€‚<br><figure class="image-box">                <img src="/image/vue/tep.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/vue/slot-pre1.jpg" alt title class>                <p></p>            </figure></p><h3 id="cssåŠ¨ç”»åŸç†"><a href="#cssåŠ¨ç”»åŸç†" class="headerlink" title="cssåŠ¨ç”»åŸç†"></a>cssåŠ¨ç”»åŸç†</h3><h4 id="vueè‡ªå¸¦çš„transition"><a href="#vueè‡ªå¸¦çš„transition" class="headerlink" title="vueè‡ªå¸¦çš„transition"></a>vueè‡ªå¸¦çš„transition</h4><p>å½“å…ƒç´ æ˜¾ç¤ºæ—¶ï¼Œå°†å…ƒç´ æ”¾åœ¨ transitionæ ‡ç­¾å†…ï¼Œvueä¼šç»™æ˜¾ç¤ºå½“å…ƒç´ ï¼Œåˆ†ä¸‰ä¸ªé˜¶æ®µï¼Œæ·»åŠ æˆ–åˆ é™¤ä¸åŒçš„classï¼Œä»¥ä¾¿å¤–éƒ¨åšcssåŠ¨ç”»ï¼Œè¿™å°±æ˜¯åŠ¨ç”»åŸç†ã€‚<br>å¦‚ä¸‹ï¼Œæ˜¯å…ƒç´ æ˜¾ç¤ºæ—¶ï¼Œvueç»™å…ƒç´ æ·»åŠ æˆ–åˆ é™¤classçš„è¿‡ç¨‹ï¼š</p><ul><li>å¼€å§‹æ—¶ ç»™å…ƒç´ æ·»åŠ  class fade-enter fade-enter-activeï¼Œ</li><li>æ¥ç€ åˆ é™¤ fade-enterï¼Œ æ·»åŠ  fade-enter-to class</li><li>æ˜¾ç¤ºåˆ°æœ€åï¼Œåˆ é™¤class fade-enter-to fade-enter-active</li></ul><p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼Œç»™ä¸åŒçš„classå®šä¹‰ä¸åŒçš„cssï¼Œå°±å¯ä»¥åšåŠ¨ç”»ã€‚<br><figure class="image-box">                <img src="/image/vue/css1.jpg" alt title class>                <p></p>            </figure></p><h4 id="æ˜¾ç¤ºæ—¶çš„è¿‡ç¨‹"><a href="#æ˜¾ç¤ºæ—¶çš„è¿‡ç¨‹" class="headerlink" title="æ˜¾ç¤ºæ—¶çš„è¿‡ç¨‹"></a>æ˜¾ç¤ºæ—¶çš„è¿‡ç¨‹</h4><p>å‚è€ƒä¸Šé¢ã€Švueè‡ªå¸¦çš„transitionã€‹</p><h4 id="éšè—æ—¶çš„è¿‡ç¨‹"><a href="#éšè—æ—¶çš„è¿‡ç¨‹" class="headerlink" title="éšè—æ—¶çš„è¿‡ç¨‹"></a>éšè—æ—¶çš„è¿‡ç¨‹</h4><figure class="image-box">                <img src="/image/vue/css3.jpg" alt title class>                <p></p>            </figure><h4 id="è‡ªå®šä¹‰class-name"><a href="#è‡ªå®šä¹‰class-name" class="headerlink" title="è‡ªå®šä¹‰class name"></a>è‡ªå®šä¹‰class name</h4><p>classnameå¯ä»¥æ ¹æ® transitionçš„nameæ¥å®šä¹‰ï¼Œå¦‚æœæœªå®šä¹‰nameï¼Œé»˜è®¤ä¸ºvï¼Œä¹Ÿå°±æ˜¯v-enterã€‚<br><figure class="image-box">                <img src="/image/vue/css2.jpg" alt title class>                <p></p>            </figure><br>é»˜è®¤class name ä»¥åŠåŠ¨ç”»æ ·å¼å¤„ç†ï¼š<br><figure class="image-box">                <img src="/image/vue/css4.jpg" alt title class>                <p></p>            </figure><br>å¦‚ä¸‹ï¼Œå®šä¹‰enter-active-class props å¯å®Œå…¨é‡å†™å¯¹åº”classï¼Œå¦‚ä¸‹æ˜¯ç»“åˆanimate.cssåº“åšçš„åŠ¨ç”»<br><figure class="image-box">                <img src="/image/vue/css5.jpg" alt title class>                <p></p>            </figure></p><h4 id="transitionæ ‡ç­¾è‡ªå¸¦çš„äº‹ä»¶"><a href="#transitionæ ‡ç­¾è‡ªå¸¦çš„äº‹ä»¶" class="headerlink" title="transitionæ ‡ç­¾è‡ªå¸¦çš„äº‹ä»¶"></a>transitionæ ‡ç­¾è‡ªå¸¦çš„äº‹ä»¶</h4><p>vueç»™transitionæ ‡ç­¾ç»‘å®šäº†ä¸€äº›æ—¶é—´ï¼Œç”¨äºæ›´å¥½çš„åšåŠ¨ç”»ï¼Œæ›´å¤šå¯ç½‘ä¸ŠæŸ¥é˜…ã€‚<br>å‚è€ƒä¸‹é¢ã€Šslotæ¥åŠ¨ç”»å°è£…ã€‹</p><h4 id="ç»“åˆanimate-cssåº“åšçš„åŠ¨ç”»"><a href="#ç»“åˆanimate-cssåº“åšçš„åŠ¨ç”»" class="headerlink" title="ç»“åˆanimate.cssåº“åšçš„åŠ¨ç”»"></a>ç»“åˆanimate.cssåº“åšçš„åŠ¨ç”»</h4><p>å‚è€ƒä¸Šé¢çš„ã€Šè‡ªå®šä¹‰class nameã€‹</p><h4 id="v-ifä¸v-showæ•ˆæœä¸€æ ·"><a href="#v-ifä¸v-showæ•ˆæœä¸€æ ·" class="headerlink" title="v-ifä¸v-showæ•ˆæœä¸€æ ·"></a>v-ifä¸v-showæ•ˆæœä¸€æ ·</h4><p>transitionçš„æ˜¾ç¤ºéšè—æ•ˆæœï¼Œä¸»è¦æ˜¯ç»“åˆ v-if æˆ– v-show æ¥ä½¿ç”¨ï¼ˆå¾…è¿›ä¸€æ­¥éªŒè¯ï¼‰ã€‚<br>æ­¤äºŒè€…éƒ½å¯ä»¥æ˜¾ç¤ºéšè—ï¼Œç”¨åœ¨åŠ¨ç”»ä¸Šæ•ˆæœä¸€è‡´ã€‚</p><h4 id="åˆ—è¡¨å¢åŠ ã€åˆ é™¤è¿‡æ¸¡åŠ¨ç”»-transition-group"><a href="#åˆ—è¡¨å¢åŠ ã€åˆ é™¤è¿‡æ¸¡åŠ¨ç”»-transition-group" class="headerlink" title="åˆ—è¡¨å¢åŠ ã€åˆ é™¤è¿‡æ¸¡åŠ¨ç”»(transition-group)"></a>åˆ—è¡¨å¢åŠ ã€åˆ é™¤è¿‡æ¸¡åŠ¨ç”»(transition-group)</h4><p>transition-group æ˜¯vueç”¨æ¥åšåˆ—è¡¨æ·»åŠ æˆ–åˆ é™¤æŸæ¡æ•°æ®æ—¶ï¼Œè¿‡æ¸¡åŠ¨ç”»ï¼Œå…¶åŸç†å¦‚ä¸‹å›¾ï¼š<br><figure class="image-box">                <img src="/image/vue/css6.jpg" alt title class>                <p></p>            </figure></p><h4 id="slotæ¥åŠ¨ç”»å°è£…-render-propsæ¨¡å¼"><a href="#slotæ¥åŠ¨ç”»å°è£…-render-propsæ¨¡å¼" class="headerlink" title="slotæ¥åŠ¨ç”»å°è£…(render propsæ¨¡å¼)"></a>slotæ¥åŠ¨ç”»å°è£…(render propsæ¨¡å¼)</h4><p>ä½¿ç”¨æ’æ§½render propsæ¨¡å¼ï¼Œæˆ–ç±»ä¼¼é«˜é˜¶ç»„ä»¶ï¼ŒåŒæ—¶ç”¨transitionè‡ªå¸¦çš„ç»‘å®šäº‹ä»¶æ¥å†™cssï¼š<br>è²Œä¼¼è¿™ä¸ªåŠ¨ç”»åªåœ¨v-ifæœ‰æ•ˆï¼Œåœ¨v-showä¸‹æ— æ•ˆï¼ŒåŸå› å¾…ç ”ç©¶ã€‚<br><figure class="image-box">                <img src="/image/vue/css-fn1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/vue/css-fn2.jpg" alt title class>                <p></p>            </figure></p><h3 id="keep-alive-ä¸-activated-æ€§èƒ½ä¼˜åŒ–"><a href="#keep-alive-ä¸-activated-æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="keep-alive ä¸ activated (æ€§èƒ½ä¼˜åŒ–)"></a>keep-alive ä¸ activated (æ€§èƒ½ä¼˜åŒ–)</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>keep-aliveå¯ç”¨äºé¡µé¢ç¼“å­˜æ¸²æŸ“ã€‚<br>keep-aliveå†…çš„ç»„ä»¶ï¼Œéƒ½ä¼šå¤šå‡ºä¸€ä¸ª activated ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</p><h4 id="activated-ä¸-mounted"><a href="#activated-ä¸-mounted" class="headerlink" title="activated ä¸ mounted"></a>activated ä¸ mounted</h4><p>å½“ä½¿ç”¨keep-aliveçš„æ—¶å€™ï¼Œç¬¬äºŒæ¬¡æ¸²æŸ“é¡µé¢ï¼Œä¸ä¼šè§¦å‘ mountedï¼Œä½†è§¦å‘ activatedï¼Œé™¤æ­¤ä¹‹å¤–äºŒè€…ä¸€è‡´ã€‚<br>activated å¯ç”¨äºé¡µé¢çš„ajaxæ˜¯å¦é‡æ–°è¯·æ±‚ã€‚</p><p>ä¸‹é¢è®²è§£keep-alive ä½¿ç”¨æ­¥éª¤ï¼š</p><h4 id="åŒ…è£¹çˆ¶èŠ‚ç‚¹"><a href="#åŒ…è£¹çˆ¶èŠ‚ç‚¹" class="headerlink" title="åŒ…è£¹çˆ¶èŠ‚ç‚¹"></a>åŒ…è£¹çˆ¶èŠ‚ç‚¹</h4><figure class="image-box">                <img src="/image/vue/keep1.png" alt title class>                <p></p>            </figure><h4 id="å­ç»„ä»¶-é¡µé¢-ä½¿ç”¨"><a href="#å­ç»„ä»¶-é¡µé¢-ä½¿ç”¨" class="headerlink" title="å­ç»„ä»¶(é¡µé¢)ä½¿ç”¨"></a>å­ç»„ä»¶(é¡µé¢)ä½¿ç”¨</h4><p>åœ¨é¡µé¢å†…ä¿å­˜ä¸€ä¸ªè£…è½½ç»„ä»¶æ—¶çš„keyï¼Œè‹¥keyä¸ä¸€æ ·ï¼Œå°±å‘èµ·æ–°è¯·æ±‚ã€‚<br><figure class="image-box">                <img src="/image/vue/keep2.png" alt title class>                <p></p>            </figure></p><h3 id="é€’å½’ç»„ä»¶"><a href="#é€’å½’ç»„ä»¶" class="headerlink" title="é€’å½’ç»„ä»¶"></a>é€’å½’ç»„ä»¶</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¦‚å›¾ï¼š<br><figure class="image-box">                <img src="/image/vue/digui.jpg" alt title class>                <p></p>            </figure></p><h4 id="è¿ç”¨åœºæ™¯"><a href="#è¿ç”¨åœºæ™¯" class="headerlink" title="è¿ç”¨åœºæ™¯"></a>è¿ç”¨åœºæ™¯</h4><p>é€’å½’ç»„ä»¶è¿ç”¨åœºæ™¯ï¼Œå¦‚ä¸€çº§ã€äºŒçº§åˆ—è¡¨çš„é€’å½’ï¼š<br><figure class="image-box">                <img src="/image/vue/digui1.jpg" alt title class>                <p></p>            </figure></p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="åˆ—è¡¨æ¸²æŸ“"><a href="#åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="åˆ—è¡¨æ¸²æŸ“"></a>åˆ—è¡¨æ¸²æŸ“</h3><h4 id="æ“ä½œæ•°ç»„è¿›è¡Œåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œå¿…é¡»ç”¨vueæŒ‡å®šæ–¹æ³•æˆ–æ”¹å˜å¼•ç”¨"><a href="#æ“ä½œæ•°ç»„è¿›è¡Œåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œå¿…é¡»ç”¨vueæŒ‡å®šæ–¹æ³•æˆ–æ”¹å˜å¼•ç”¨" class="headerlink" title="æ“ä½œæ•°ç»„è¿›è¡Œåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œå¿…é¡»ç”¨vueæŒ‡å®šæ–¹æ³•æˆ–æ”¹å˜å¼•ç”¨"></a>æ“ä½œæ•°ç»„è¿›è¡Œåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œå¿…é¡»ç”¨vueæŒ‡å®šæ–¹æ³•æˆ–æ”¹å˜å¼•ç”¨</h4><p>æŒ‡å®šçš„æ–¹æ³•æœ‰ä¸ƒç§ï¼Œå¯çœ‹vueå®˜ç½‘ï¼Œä¹Ÿå¯ä»¥æ”¹å˜æ•°ç»„çš„å¼•ç”¨ã€‚<br>å¦‚æœé€šè¿‡ä¸‹æ ‡æ”¹å˜æ•°ç»„ï¼Œæ˜¯ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œä¼°è®¡vueåº•å±‚ä¹Ÿæ˜¯é€šè¿‡æ¯”è¾ƒä¸¤æ¬¡propsæ˜¯å¦ç›¸åŒã€‚</p><h4 id="å ä½ç¬¦"><a href="#å ä½ç¬¦" class="headerlink" title="å ä½ç¬¦"></a>å ä½ç¬¦</h4><p>å¦‚æœåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œè¦åŒæ—¶æ¸²æŸ“å¤šç§æƒ…å†µï¼Œåˆä¸æƒ³åœ¨å¤–å±‚åŠ divï¼Œå¯ç”¨å ä½ç¬¦template<br><figure class="image-box">                <img src="/image/vue/template-list.jpg" alt title class>                <p></p>            </figure></p><h4 id="å¯é€šè¿‡å¯¹è±¡æ¸²æŸ“"><a href="#å¯é€šè¿‡å¯¹è±¡æ¸²æŸ“" class="headerlink" title="å¯é€šè¿‡å¯¹è±¡æ¸²æŸ“"></a>å¯é€šè¿‡å¯¹è±¡æ¸²æŸ“</h4><p>å¯ç›´æ¥é€šè¿‡æ”¹å˜å±æ€§å†…å®¹ï¼Œæ›´æ–°æ¸²æŸ“ï¼Œå¯èƒ½æ˜¯æ•°æ®åŠ«æŒçš„è¿ç”¨ï¼›<br><strong>å¦‚æœè¦æ–°å¢å±æ€§ï¼Œå¿…é¡»æ”¹å˜å¯¹è±¡å¼•ç”¨</strong></p><figure class="image-box">                <img src="/image/vue/list-obj.jpg" alt title class>                <p></p>            </figure><h4 id="Vue-set-ä¸-vm-set-è®¾ç½®å¯¹è±¡æˆ–æ•°ç»„"><a href="#Vue-set-ä¸-vm-set-è®¾ç½®å¯¹è±¡æˆ–æ•°ç»„" class="headerlink" title="Vue.set ä¸ vm.$set è®¾ç½®å¯¹è±¡æˆ–æ•°ç»„"></a>Vue.set ä¸ vm.$set è®¾ç½®å¯¹è±¡æˆ–æ•°ç»„</h4><p>é™¤ä¸Šé¢è¯´çš„æ–¹æ³•å¤–ï¼Œå¯é€šè¿‡Vue.set ä¸ vm.$setæ¥æ”¹å˜æ•°ç»„æˆ–å¯¹è±¡é‡æ–°æ¸²æŸ“ã€‚</p><h3 id="Vue-set-ä¸-vm-set"><a href="#Vue-set-ä¸-vm-set" class="headerlink" title="Vue.set ä¸ vm.$set"></a>Vue.set ä¸ vm.$set</h3><p>äºŒè€…æ˜¯ä¸€æ ·çš„ï¼Œä¸€èˆ¬ï¼Œå¦‚æœVueæä¾›äº†æŸæ–¹æ³•ï¼Œé‚£ä¹ˆvueçš„å®ä¾‹ä¸­ï¼Œä¹Ÿä¼šæœ‰æ­¤æ–¹æ³•ï¼Œä¸è¿‡æ–¹æ³•åå‰éœ€è¦åŠ $ã€‚</p><h3 id="Vueä¸­æœ‰çš„åœ¨å®ä¾‹ä¸­åŸºæœ¬ä¹Ÿæœ‰ï¼Œåå­—å‰åŠ "><a href="#Vueä¸­æœ‰çš„åœ¨å®ä¾‹ä¸­åŸºæœ¬ä¹Ÿæœ‰ï¼Œåå­—å‰åŠ " class="headerlink" title="Vueä¸­æœ‰çš„åœ¨å®ä¾‹ä¸­åŸºæœ¬ä¹Ÿæœ‰ï¼Œåå­—å‰åŠ $"></a>Vueä¸­æœ‰çš„åœ¨å®ä¾‹ä¸­åŸºæœ¬ä¹Ÿæœ‰ï¼Œåå­—å‰åŠ $</h3><p>Vueä¸­æœ‰çš„æ–¹æ³•åœ¨å®ä¾‹ä¸­åŸºæœ¬ä¹Ÿæœ‰ï¼Œåå­—å‰åŠ $ï¼Œ å¦‚ Vue.set ä¸ vm.$set</p><h3 id="ç”¨isé‡å‘½åè§£å†³æ¸²æŸ“å¼‚å¸¸"><a href="#ç”¨isé‡å‘½åè§£å†³æ¸²æŸ“å¼‚å¸¸" class="headerlink" title="ç”¨isé‡å‘½åè§£å†³æ¸²æŸ“å¼‚å¸¸"></a>ç”¨isé‡å‘½åè§£å†³æ¸²æŸ“å¼‚å¸¸</h3><h4 id="å¼‚å¸¸æè¿°"><a href="#å¼‚å¸¸æè¿°" class="headerlink" title="å¼‚å¸¸æè¿°"></a>å¼‚å¸¸æè¿°</h4><p>ä¸‹é¢æ¸²æŸ“å¼‚å¸¸ï¼Œæ¸²æŸ“ä½ç½®è·‘è·‘åäº†ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å¼‚å¸¸æ¸²æŸ“ï¼Œå› ä¸ºh5è§„èŒƒ è¦æ±‚tbodyä¸‹é¢å¿…é¡»æ˜¯træ ‡ç­¾ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">row</span>&gt;</span><span class="tag">&lt;/<span class="name">row</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">row</span>&gt;</span><span class="tag">&lt;/<span class="name">row</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">row</span>&gt;</span><span class="tag">&lt;/<span class="name">row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">        Vue.component(<span class="string">'row'</span>, &#123;</span></span><br><span class="line"><span class="xml">            template:'<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>this is wor<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>'</span></span><br><span class="line">        &#125;)</span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">            el:<span class="string">"#root"</span></span></span><br><span class="line">        &#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/vue/black.jpg" alt title class>                <p></p>            </figure><h4 id="ç”¨isé‡å‘½åè§£å†³"><a href="#ç”¨isé‡å‘½åè§£å†³" class="headerlink" title="ç”¨isé‡å‘½åè§£å†³"></a>ç”¨isé‡å‘½åè§£å†³</h4><p>å…¶ä»–ä»£ç ä¸å˜ï¼Œæ”¹å˜å¦‚ä¸‹éƒ¨åˆ†ï¼Œiså¾ˆç±»ä¼¼es6 çš„ import as æˆ–es6çš„é‡å‘½åï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">is</span>=<span class="string">"row"</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">is</span>=<span class="string">"row"</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tr</span> <span class="attr">is</span>=<span class="string">"row"</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="ol-ul-selecté—®é¢˜ä»¥æ­¤ç±»æ¨"><a href="#ol-ul-selecté—®é¢˜ä»¥æ­¤ç±»æ¨" class="headerlink" title="ol ul selecté—®é¢˜ä»¥æ­¤ç±»æ¨"></a>ol ul selecté—®é¢˜ä»¥æ­¤ç±»æ¨</h4><p>å¼‚å¸¸æ¸²æŸ“ï¼Œå› ä¸ºh5è§„èŒƒ è¦æ±‚tbodyä¸‹é¢å¿…é¡»æ˜¯træ ‡ç­¾ï¼Œol ul åå¯èƒ½ä¹Ÿå¿…é¡»ä½¿ç”¨liï¼Œselectåå¿…é¡»ä½¿ç”¨optionç­‰ç­‰ï¼Œé‡åˆ°é—®é¢˜å¯è¿™æ ·åˆ†æã€‚</p><h3 id="å­ç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°"><a href="#å­ç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°" class="headerlink" title="å­ç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°"></a>å­ç»„ä»¶dataå¿…é¡»æ˜¯å‡½æ•°</h3><p>å¦‚ä¸‹ï¼Œåœ¨æ ¹ç»„ä»¶ä¸Šdataå†™æˆå¯¹è±¡æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†å­ç»„ä»¶å¿…é¡»æ˜¯å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºå­ç»„ä»¶å¯èƒ½ä¼šè¢«çˆ¶ç»„ä»¶ä½¿ç”¨å¾ˆå¤šæ¬¡ï¼Œ<br>ä¸ºäº†é¿å…å¯¹è±¡å¼•ç”¨å¸¦æ¥çš„é—®é¢˜ï¼Œè¦æ±‚dataæ¯æ¬¡éƒ½æ˜¯æœ€æ–°çš„ï¼Œå› æ­¤é€šè¿‡æ‰§è¡Œå‡½æ•°ï¼Œæ¯æ¬¡è·å¾—çš„æ˜¯æ–°å¯¹è±¡ï¼Œé¿å…äº†åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨çš„é—®é¢˜ã€‚<br><figure class="image-box">                <img src="/image/vue/black-child.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç»„ä»¶å‚æ•°æ ¡éªŒ"><a href="#ç»„ä»¶å‚æ•°æ ¡éªŒ" class="headerlink" title="ç»„ä»¶å‚æ•°æ ¡éªŒ"></a>ç»„ä»¶å‚æ•°æ ¡éªŒ</h3><h4 id="å•ä¸ªç”¨å­—ç¬¦ä¸²"><a href="#å•ä¸ªç”¨å­—ç¬¦ä¸²" class="headerlink" title="å•ä¸ªç”¨å­—ç¬¦ä¸²"></a>å•ä¸ªç”¨å­—ç¬¦ä¸²</h4><h4 id="å¤šä¸ªç±»å‹ç”¨æ•°ç»„"><a href="#å¤šä¸ªç±»å‹ç”¨æ•°ç»„" class="headerlink" title="å¤šä¸ªç±»å‹ç”¨æ•°ç»„"></a>å¤šä¸ªç±»å‹ç”¨æ•°ç»„</h4><figure class="image-box">                <img src="/image/vue/props1.jpg" alt title class>                <p></p>            </figure><h4 id="å®šä¹‰requiredä¸defaultValue"><a href="#å®šä¹‰requiredä¸defaultValue" class="headerlink" title="å®šä¹‰requiredä¸defaultValue"></a>å®šä¹‰requiredä¸defaultValue</h4><figure class="image-box">                <img src="/image/vue/props2.jpg" alt title class>                <p></p>            </figure><h4 id="è‡ªå®šä¹‰éªŒè¯validatorè§„åˆ™"><a href="#è‡ªå®šä¹‰éªŒè¯validatorè§„åˆ™" class="headerlink" title="è‡ªå®šä¹‰éªŒè¯validatorè§„åˆ™"></a>è‡ªå®šä¹‰éªŒè¯validatorè§„åˆ™</h4><p>å¦‚ä¸Šé¢çš„å›¾ç‰‡</p><h3 id="propsç‰¹æ€§ä¸épropsç‰¹æ€§"><a href="#propsç‰¹æ€§ä¸épropsç‰¹æ€§" class="headerlink" title="propsç‰¹æ€§ä¸épropsç‰¹æ€§"></a>propsç‰¹æ€§ä¸épropsç‰¹æ€§</h3><p>åœ¨vueä¸­ï¼Œpropsä¸ä¼šæ˜¾ç¤ºåœ¨å­ç»„ä»¶çš„domä¸Šã€‚épropsä¼šæ˜¾ç¤ºåœ¨å­ç»„ä»¶æœ€å¤–å±‚çš„domå±æ€§ä¸Šã€‚<br>épropså±æ€§æ˜¯ï¼Œå®šä¹‰å­ç»„ä»¶æ—¶å®šä¹‰çš„å±æ€§ï¼Œä½†åœ¨å­ç»„ä»¶å†…æ²¡æœ‰å£°æ˜ä¸ºpropsçš„å±æ€§ï¼Œæ˜¯ä¸ºépropsã€‚<br>ä¸‹é¢contentå°±æ˜¯épropsã€‚<br><figure class="image-box">                <img src="/image/vue/noprops.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç»™ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶"><a href="#ç»™ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶" class="headerlink" title="ç»™ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶"></a>ç»™ç»„ä»¶ç»‘å®šåŸç”Ÿäº‹ä»¶</h3><p>å¦‚ä¸‹ï¼Œä¸æ˜¯åŸç”Ÿäº‹ä»¶ï¼Œå¦‚ä½•ç»‘å®šå‘¢ï¼Œä½¿ç”¨<a href="mailto:`@click.native" target="_blank" rel="noopener">`@click.native</a>=â€handleClickâ€`<br><figure class="image-box">                <img src="/image/vue/event-native.jpg" alt title class>                <p></p>            </figure></p><h3 id="éçˆ¶å­ç»„ä»¶ä¼ å€¼"><a href="#éçˆ¶å­ç»„ä»¶ä¼ å€¼" class="headerlink" title="éçˆ¶å­ç»„ä»¶ä¼ å€¼"></a>éçˆ¶å­ç»„ä»¶ä¼ å€¼</h3><h4 id="ä¸‰ç§æ–¹å¼"><a href="#ä¸‰ç§æ–¹å¼" class="headerlink" title="ä¸‰ç§æ–¹å¼"></a>ä¸‰ç§æ–¹å¼</h4><p>éçˆ¶å­ç»„ä»¶ä¼ å€¼æœ‰ä¸‰ç§æ–¹å¼ï¼Œ<br>ä¸€ä¸ªæ˜¯vuexï¼›<br>ä¸€ä¸ªæ˜¯æ€»çº¿æ–¹å¼ï¼›<br>ä¸€ä¸ªæ˜¯ä¼ ç»Ÿæ–¹å¼ï¼Œå°†å€¼ä¼ ç»™ä¸€ä¸ªå…±æœ‰çš„çˆ¶ç»„ä»¶ï¼Œè®©çˆ¶ç»„ä»¶åˆ†å‘ç»™éçˆ¶å­ç»„ä»¶ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨äºç®€å•çš„éçˆ¶å­ç»„ä»¶ä¼ å€¼ï¼Œæ¯”å¦‚å…„å¼Ÿç»„ä»¶ï¼›</p><h4 id="busæ€»çº¿æ–¹å¼-å¤æ‚"><a href="#busæ€»çº¿æ–¹å¼-å¤æ‚" class="headerlink" title="busæ€»çº¿æ–¹å¼(å¤æ‚)"></a>busæ€»çº¿æ–¹å¼(å¤æ‚)</h4><p>éçˆ¶å­ç»„ä»¶ä¼ å€¼ï¼Œå¯é€šè¿‡vuexï¼Œä¹Ÿå¯ä»¥é€šè¿‡é¢å‘å¯¹è±¡çš„ç»§æ‰¿æ¨¡å¼ï¼Œç»“åˆäº‹ä»¶ç»‘å®š(è§‚å¯Ÿè€…æ¨¡å¼)æ¥åšã€‚<br>è¿™ç§åšæ³•ä¹Ÿå« busï¼æ€»çº¿ ä¼ å€¼ã€‚</p><p>è¿™ç§æ–¹å¼ä¸windowçš„äº‹ä»¶ç›‘å¬ä¹Ÿç±»ä¼¼ï¼Œä¼°è®¡ç”¨vueè‡ªå¸¦çš„äº‹ä»¶ç›‘å¬æ–¹å¼ï¼Œåšäº†å¾ˆå¤šä¼˜åŒ–ã€‚<br><figure class="image-box">                <img src="/image/vue/value-event.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¼ ç»Ÿæ–¹å¼-ç®€å•"><a href="#ä¼ ç»Ÿæ–¹å¼-ç®€å•" class="headerlink" title="ä¼ ç»Ÿæ–¹å¼(ç®€å•)"></a>ä¼ ç»Ÿæ–¹å¼(ç®€å•)</h4><p>æ€æƒ³è·Ÿreactå…„å¼Ÿç»„ä»¶ä¼ å€¼æ˜¯ä¸€æ ·çš„ï¼Œè¯¦ç»†å‚è€ƒä¸Šé¢çš„ã€Šä¸‰ç§æ–¹å¼ã€‹ï¼Œé€‚ç”¨äºç®€å•çš„éçˆ¶å­å…³ç³»ï¼Œå¦‚å…„å¼Ÿç»„ä»¶ä¼ å€¼</p><h4 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h4><h4 id="å…„å¼Ÿç»„ä»¶ä¼ å€¼"><a href="#å…„å¼Ÿç»„ä»¶ä¼ å€¼" class="headerlink" title="å…„å¼Ÿç»„ä»¶ä¼ å€¼"></a>å…„å¼Ÿç»„ä»¶ä¼ å€¼</h4><p>å‚è€ƒã€Šä¼ ç»Ÿæ–¹å¼(ç®€å•)ã€‹</p><h3 id="è‹¥ä¸ºåˆ«åï¼Œå¿…é¡»åŠ ï½-styleå†…importå…¶ä»–css"><a href="#è‹¥ä¸ºåˆ«åï¼Œå¿…é¡»åŠ ï½-styleå†…importå…¶ä»–css" class="headerlink" title="è‹¥ä¸ºåˆ«åï¼Œå¿…é¡»åŠ ï½ (styleå†…importå…¶ä»–css)"></a>è‹¥ä¸ºåˆ«åï¼Œå¿…é¡»åŠ ï½ (styleå†…importå…¶ä»–css)</h3><p>styleå†…importå…¶ä»–cssï¼Œè‹¥ä¸ºåˆ«åï¼Œå¿…é¡»åŠ ï½ï¼Œjsæ²¡æœ‰è¿™ä¸ªé™å®šï¼Œå¦‚ä¸‹csså†…ï¼Œimportä¸€ä¸ªå…¨éƒ¨å˜é‡csså˜é‡æ–‡ä»¶ï¼Œstylæ–‡ä»¶ï¼š<br><figure class="image-box">                <img src="/image/vue/styl.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/vue/styl2.jpg" alt title class>                <p></p>            </figure></p><h3 id="å›¾ç‰‡åŠ è½½çš„æ–‡å­—æŠ–åŠ¨é—®é¢˜"><a href="#å›¾ç‰‡åŠ è½½çš„æ–‡å­—æŠ–åŠ¨é—®é¢˜" class="headerlink" title="å›¾ç‰‡åŠ è½½çš„æ–‡å­—æŠ–åŠ¨é—®é¢˜"></a>å›¾ç‰‡åŠ è½½çš„æ–‡å­—æŠ–åŠ¨é—®é¢˜</h3><h4 id="æ–‡å­—æŠ–åŠ¨åŸå› "><a href="#æ–‡å­—æŠ–åŠ¨åŸå› " class="headerlink" title="æ–‡å­—æŠ–åŠ¨åŸå› "></a>æ–‡å­—æŠ–åŠ¨åŸå› </h4><p>å½“å›¾ç‰‡è¯·æ±‚æœªå®Œæˆæ—¶ï¼Œæ–‡å­—åœ¨ä¸Šé¢ï¼Œå›¾ç‰‡åŠ è½½å®Œæ¯•ï¼Œæ–‡å­—è·‘åˆ°ä¸‹é¢æ¥ã€‚<br><figure class="image-box">                <img src="/image/vue/dou5.jpg" alt title class>                <p></p>            </figure></p><h4 id="è®¾ç½®overflow-hidden"><a href="#è®¾ç½®overflow-hidden" class="headerlink" title="è®¾ç½®overflow hidden"></a>è®¾ç½®overflow hidden</h4><p>è§£å†³åŸç†ï¼Œå·²çŸ¥å›¾ç‰‡çš„å®½åº¦æ˜¯æ‰‹æœºå±å¹•å®½åº¦ï¼Œä¸”é«˜åº¦ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œå®½é«˜æ¯”ä¸º31.25%.<br>é¢„å…ˆè®¾ç½®ä¸€ä¸ªå®½é«˜æ¯”ï¼Œç”±äºheightçš„ç™¾åˆ†æ¯”å‚è€ƒçš„æ˜¯çˆ¶å…ƒç´ é«˜åº¦ï¼Œå› æ­¤ä½¿ç”¨paddingï¼Œpaddingå‚ç…§è‡ªèº«å…ƒç´ çš„widthã€‚<br>æ¨èï¼š<br><figure class="image-box">                <img src="/image/vue/dou1.jpg" alt title class>                <p></p>            </figure><br>é”™è¯¯ï¼š<br><figure class="image-box">                <img src="/image/vue/dou3.jpg" alt title class>                <p></p>            </figure></p><h4 id="é¢„å…ˆè®¾ç½®å®½é«˜æ¯”"><a href="#é¢„å…ˆè®¾ç½®å®½é«˜æ¯”" class="headerlink" title="é¢„å…ˆè®¾ç½®å®½é«˜æ¯”"></a>é¢„å…ˆè®¾ç½®å®½é«˜æ¯”</h4><p>å‚è€ƒã€Šè®¾ç½®overflow hiddenã€‹</p><h4 id="ä½¿ç”¨paddingä¸ç”¨height"><a href="#ä½¿ç”¨paddingä¸ç”¨height" class="headerlink" title="ä½¿ç”¨paddingä¸ç”¨height"></a>ä½¿ç”¨paddingä¸ç”¨height</h4><p>å‚è€ƒã€Šè®¾ç½®overflow hiddenã€‹</p><h4 id="ä¹Ÿå¯ä½¿ç”¨vwï¼Œä¸è¿‡æœ‰å…¼å®¹é—®é¢˜"><a href="#ä¹Ÿå¯ä½¿ç”¨vwï¼Œä¸è¿‡æœ‰å…¼å®¹é—®é¢˜" class="headerlink" title="ä¹Ÿå¯ä½¿ç”¨vwï¼Œä¸è¿‡æœ‰å…¼å®¹é—®é¢˜"></a>ä¹Ÿå¯ä½¿ç”¨vwï¼Œä¸è¿‡æœ‰å…¼å®¹é—®é¢˜</h4><figure class="image-box">                <img src="/image/vue/dou2.jpg" alt title class>                <p></p>            </figure><h4 id="é€šè¿‡Onlineè®¾ç½®3G-çš„æŠ€å·§"><a href="#é€šè¿‡Onlineè®¾ç½®3G-çš„æŠ€å·§" class="headerlink" title="é€šè¿‡Onlineè®¾ç½®3G çš„æŠ€å·§"></a>é€šè¿‡Onlineè®¾ç½®3G çš„æŠ€å·§</h4><figure class="image-box">                <img src="/image/vue/dou4.jpg" alt title class>                <p></p>            </figure><h3 id="æ ·å¼ç©¿é€"><a href="#æ ·å¼ç©¿é€" class="headerlink" title="æ ·å¼ç©¿é€"></a>æ ·å¼ç©¿é€</h3><p>ä½¿ç”¨ <code>&gt;&gt;&gt;</code>åšæ ·å¼ç©¿é€ï¼Œä¸å— scopedé™åˆ¶ï¼Œä¸‹å›¾è¡¨ç¤º .wrapperä¸‹çš„ .swiperâ€¦ ç±»ç©¿é€ scopedï¼Œæ˜¯ä¸€ä¸ªå…¨å±€æ ·å¼ã€‚<br><figure class="image-box">                <img src="/image/vue/port.png" alt title class>                <p></p>            </figure></p><h3 id="é¡µé¢è·¯ç”±åˆ‡æ¢ï¼Œä¸åœ¨æœ€é¡¶å±‚"><a href="#é¡µé¢è·¯ç”±åˆ‡æ¢ï¼Œä¸åœ¨æœ€é¡¶å±‚" class="headerlink" title="é¡µé¢è·¯ç”±åˆ‡æ¢ï¼Œä¸åœ¨æœ€é¡¶å±‚"></a>é¡µé¢è·¯ç”±åˆ‡æ¢ï¼Œä¸åœ¨æœ€é¡¶å±‚</h3><p>vue-router å®˜ç½‘ç»™äº†è§£å†³æ–¹æ³•ï¼š<br><figure class="image-box">                <img src="/image/vue/route.jpg" alt title class>                <p></p>            </figure></p><h3 id="propsçš„å±æ€§åä¸èƒ½ç”¨é©¼å³°å‘½å"><a href="#propsçš„å±æ€§åä¸èƒ½ç”¨é©¼å³°å‘½å" class="headerlink" title="propsçš„å±æ€§åä¸èƒ½ç”¨é©¼å³°å‘½å"></a>propsçš„å±æ€§åä¸èƒ½ç”¨é©¼å³°å‘½å</h3><p>è¿™é‡Œè¯´çš„æ˜¯ä½ç‰ˆæœ¬ï¼Œå¯èƒ½å­˜åœ¨æ­¤é—®é¢˜ã€‚<br>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶å±æ€§åä¸èƒ½ç”¨é©¼å³°å‘½åã€‚è¿™æ—¶å°±å‘ç°ä¸¤ä¸ªç‰ˆæœ¬ä¸€ä¸ªæ˜¯2.4.2ï¼Œå¦ä¸€ä¸ª2.5.2ã€‚ 2.4.2ç«Ÿç„¶ä¸èƒ½ç”¨é©¼å³°å‘½åpropså±æ€§åã€‚</p><h2 id="vue-cli"><a href="#vue-cli" class="headerlink" title="vue-cli"></a>vue-cli</h2><h3 id="vue-cliçš„vueæ–‡ä»¶å†™æ³•"><a href="#vue-cliçš„vueæ–‡ä»¶å†™æ³•" class="headerlink" title="vue-cliçš„vueæ–‡ä»¶å†™æ³•"></a>vue-cliçš„vueæ–‡ä»¶å†™æ³•</h3><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="image-box">                <img src="/image/vue/use.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/vue/template.jpg" alt title class>                <p></p>            </figure><h4 id="dataè¦å†™æˆå‡½æ•°"><a href="#dataè¦å†™æˆå‡½æ•°" class="headerlink" title="dataè¦å†™æˆå‡½æ•°"></a>dataè¦å†™æˆå‡½æ•°</h4><p>åœ¨vue-cliå¼€å‘ä¸­dataéœ€è¦å®šä¹‰æˆä¸€ä¸ªå‡½æ•°ã€‚<br>åŸæ¥évue-cliå†™æ³•æ˜¯dataæ˜¯å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data : function() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        inputValue: &apos;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä¸¤ç§åˆ›å»ºå·¥ç¨‹çš„æ–¹æ³•"><a href="#ä¸¤ç§åˆ›å»ºå·¥ç¨‹çš„æ–¹æ³•" class="headerlink" title="ä¸¤ç§åˆ›å»ºå·¥ç¨‹çš„æ–¹æ³•"></a>ä¸¤ç§åˆ›å»ºå·¥ç¨‹çš„æ–¹æ³•</h3><h4 id="vue-createå‘½ä»¤"><a href="#vue-createå‘½ä»¤" class="headerlink" title="vue createå‘½ä»¤"></a>vue createå‘½ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create hello-world</span><br></pre></td></tr></table></figure><h4 id="vue-ui-ç•Œé¢"><a href="#vue-ui-ç•Œé¢" class="headerlink" title="vue ui ç•Œé¢"></a>vue ui ç•Œé¢</h4><p>è¿™æ˜¯å°†ä¸Šé¢ vue create å‘½ä»¤è¡Œæ“ä½œè¿›è¡Œå¯è§†åŒ–é…ç½®çš„æ”¹è¿›ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure></p><h3 id="staticç›®å½•ä¼šè¢«æ”¾åœ¨æœåŠ¡å™¨ä¸Š-mock"><a href="#staticç›®å½•ä¼šè¢«æ”¾åœ¨æœåŠ¡å™¨ä¸Š-mock" class="headerlink" title="staticç›®å½•ä¼šè¢«æ”¾åœ¨æœåŠ¡å™¨ä¸Š(mock)"></a>staticç›®å½•ä¼šè¢«æ”¾åœ¨æœåŠ¡å™¨ä¸Š(mock)</h3><p>vue-cliåˆ›å»ºçš„å·¥ç¨‹ï¼Œä¼šå°†saticç›®å½•æ”¾åœ¨æœåŠ¡ä¸­ï¼Œç±»ä¼¼ node çš„staticæ’ä»¶ã€‚<br>æ‰€æœ‰mock jsonå¯æ”¾ç½®å…¶ä¸­ã€‚<br><figure class="image-box">                <img src="/image/vue/static.png" alt title class>                <p></p>            </figure></p><h3 id="è®¾è®¡ajax"><a href="#è®¾è®¡ajax" class="headerlink" title="è®¾è®¡ajax"></a>è®¾è®¡ajax</h3><h4 id="ä¸šåŠ¡ä¸­ä½¿ç”¨"><a href="#ä¸šåŠ¡ä¸­ä½¿ç”¨" class="headerlink" title="ä¸šåŠ¡ä¸­ä½¿ç”¨"></a>ä¸šåŠ¡ä¸­ä½¿ç”¨</h4><p>åœ¨åå°æ²¡æœ‰æ¥å£ï¼Œä½¿ç”¨mockæ•°æ®å®Œæˆå¼€å‘åï¼Œä¸ºäº†è®©æ¥å…¥çœŸå®åå°apiåï¼Œä¸ç”¨é‡æ–°ä¿®æ”¹ä¸šåŠ¡ä¸­apiä»£ç ï¼Œ<br>é€šå¸¸åšæ³•ï¼šä¸šåŠ¡ä¸­ä½¿ç”¨æ ‡å‡†åå°APIï¼Œåˆ©ç”¨vue-cliç”Ÿæˆçš„configé…ç½®ä»£ç†ï¼Œä»£ç†åˆ°mockè·¯å¾„ã€‚<br><figure class="image-box">                <img src="/image/vue/ajax1.png" alt title class>                <p></p>            </figure></p><h4 id="configé…ç½®ä»£ç†-webpack"><a href="#configé…ç½®ä»£ç†-webpack" class="headerlink" title="configé…ç½®ä»£ç† (webpack)"></a>configé…ç½®ä»£ç† (webpack)</h4><p>vue-cliçš„ä»£ç†åº•å±‚åŸºäºwebpackå®ç°ã€‚<br><figure class="image-box">                <img src="/image/vue/ajax2.png" alt title class>                <p></p>            </figure></p><h4 id="ä¿è¯äº†ä¸šåŠ¡apiä¸ç”¨æ›´æ”¹"><a href="#ä¿è¯äº†ä¸šåŠ¡apiä¸ç”¨æ›´æ”¹" class="headerlink" title="ä¿è¯äº†ä¸šåŠ¡apiä¸ç”¨æ›´æ”¹"></a>ä¿è¯äº†ä¸šåŠ¡apiä¸ç”¨æ›´æ”¹</h4><p>å‚è€ƒä¸Šé¢ã€Šä¸šåŠ¡ä¸­ä½¿ç”¨ã€‹</p><h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><h3 id="ç®€å•ç¤ºä¾‹"><a href="#ç®€å•ç¤ºä¾‹" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><p>index.html:<br><figure class="image-box">                <img src="/image/vue/router-index.jpg" alt title class>                <p></p>            </figure><br>main.js:<br><figure class="image-box">                <img src="/image/vue/router-main.jpg" alt title class>                <p></p>            </figure><br>app.vue:<br><figure class="image-box">                <img src="/image/vue/router.jpg" alt title class>                <p></p>            </figure><br>router.js:<br><figure class="image-box">                <img src="/image/vue/router1.jpg" alt title class>                <p></p>            </figure><br>Info.vue:<br><figure class="image-box">                <img src="/image/vue/router2.jpg" alt title class>                <p></p>            </figure><br>é¡µé¢å±•ç¤ºï¼š<br><figure class="image-box">                <img src="/image/vue/router3.jpg" alt title class>                <p></p>            </figure></p><h3 id="åœ¨vueå®ä¾‹ä¸­ä½¿ç”¨routerèƒ½åŠ›"><a href="#åœ¨vueå®ä¾‹ä¸­ä½¿ç”¨routerèƒ½åŠ›" class="headerlink" title="åœ¨vueå®ä¾‹ä¸­ä½¿ç”¨routerèƒ½åŠ›"></a>åœ¨vueå®ä¾‹ä¸­ä½¿ç”¨routerèƒ½åŠ›</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.push(<span class="string">'./home'</span>)</span><br></pre></td></tr></table></figure><h2 id="vuex-1"><a href="#vuex-1" class="headerlink" title="vuex"></a>vuex</h2><h3 id="ç®€å•ç¤ºä¾‹-1"><a href="#ç®€å•ç¤ºä¾‹-1" class="headerlink" title="ç®€å•ç¤ºä¾‹"></a>ç®€å•ç¤ºä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸€ã€Vuexå…¨å±€çŠ¶æ€ç®¡ç†å®šä¹‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">//1.å¯¼å…¥vuex</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.use</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line"><span class="comment">//3.vuex çŠ¶æ€</span></span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//4.åªæœ‰ä½¿ç”¨mutations æ”¹å˜stateå€¼</span></span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increase: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//äºŒã€ä½¿ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.å¯¼å…¥store/index.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store/index.js'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'Info'</span>,</span><br><span class="line">  <span class="comment">//2.å¼•å…¥store</span></span><br><span class="line">  store,</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        msg: store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    add () &#123;</span><br><span class="line">    <span class="comment">//3.é€šè¿‡store.commit('mutationså†…æ–¹æ³•å')</span></span><br><span class="line">      store.commit(<span class="string">'increase'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="vuexçš„storeä¸€èˆ¬è·Ÿcomputedæˆ–watchä¸€èµ·ä½¿ç”¨ï¼Ÿ"><a href="#vuexçš„storeä¸€èˆ¬è·Ÿcomputedæˆ–watchä¸€èµ·ä½¿ç”¨ï¼Ÿ" class="headerlink" title="vuexçš„storeä¸€èˆ¬è·Ÿcomputedæˆ–watchä¸€èµ·ä½¿ç”¨ï¼Ÿ"></a>vuexçš„storeä¸€èˆ¬è·Ÿcomputedæˆ–watchä¸€èµ·ä½¿ç”¨ï¼Ÿ</h3><p>å› ä¸ºcomputedæˆ–watchä¼šç›‘å¬å˜åŒ–ã€‚<br>ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¹Ÿç”¨åœ¨dataä¸Šå‘¢ï¼Œtodo å¾…ç ”ç©¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.å¯¼å…¥store/index.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store/index.js'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">'Info'</span>,</span><br><span class="line">  <span class="comment">//2.å¼•å…¥store</span></span><br><span class="line">  store,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    msg()&#123;</span><br><span class="line">      <span class="keyword">return</span> store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><p>å¦‚æœä¸æƒ³ä½¿ç”¨vuex storeæ—¶å†™æ³•å•°å—¦ï¼Œä¹Ÿå¯é€šè¿‡ vuex æä¾›çš„APIåšåˆ«åmapæ˜ å°„ã€‚</p><h2 id="å®šä¹‰ç»„ä»¶"><a href="#å®šä¹‰ç»„ä»¶" class="headerlink" title="å®šä¹‰ç»„ä»¶"></a>å®šä¹‰ç»„ä»¶</h2><h3 id="å…¨å±€ç»„ä»¶"><a href="#å…¨å±€ç»„ä»¶" class="headerlink" title="å…¨å±€ç»„ä»¶"></a>å…¨å±€ç»„ä»¶</h3><figure class="image-box">                <img src="/image/vue/global.jpg" alt title class>                <p></p>            </figure><h3 id="å®šä¹‰props"><a href="#å®šä¹‰props" class="headerlink" title="å®šä¹‰props"></a>å®šä¹‰props</h3><h4 id="åœ¨åˆ›å»ºç»„ä»¶çš„åœ°æ–¹å£°æ˜æœ‰å“ªäº›props"><a href="#åœ¨åˆ›å»ºç»„ä»¶çš„åœ°æ–¹å£°æ˜æœ‰å“ªäº›props" class="headerlink" title="åœ¨åˆ›å»ºç»„ä»¶çš„åœ°æ–¹å£°æ˜æœ‰å“ªäº›props"></a>åœ¨åˆ›å»ºç»„ä»¶çš„åœ°æ–¹å£°æ˜æœ‰å“ªäº›props</h4><p>ååœ¨åˆ›å»ºç»„ä»¶çš„åœ°æ–¹ï¼Œé€šè¿‡å®šä¹‰propsæ•°ç»„ï¼Œå£°æ˜ä½¿ç”¨äº†å“ªäº›prop</p><h4 id="ç»„ä»¶templateå†…é€šè¿‡æ’å€¼æ–¹å¼ä½¿ç”¨props"><a href="#ç»„ä»¶templateå†…é€šè¿‡æ’å€¼æ–¹å¼ä½¿ç”¨props" class="headerlink" title="ç»„ä»¶templateå†…é€šè¿‡æ’å€¼æ–¹å¼ä½¿ç”¨props"></a>ç»„ä»¶templateå†…é€šè¿‡æ’å€¼æ–¹å¼ä½¿ç”¨props</h4><p>è¿™ä¸ªtemplateå°±æ˜¯ä¸€ä¸ªç»„ä»¶æ‰€æœ‰å†…å®¹æ–¹å¼ï¼Œæ¯ä¸ªç»„ä»¶åˆæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œæ‹¥æœ‰vueæ‰€æœ‰èƒ½åŠ›</p><h4 id="åœ¨è°ƒç”¨ç»„ä»¶åœ°æ–¹-propsæ–¹å¼ä½¿ç”¨å’Œä¼ å€¼"><a href="#åœ¨è°ƒç”¨ç»„ä»¶åœ°æ–¹-propsæ–¹å¼ä½¿ç”¨å’Œä¼ å€¼" class="headerlink" title="åœ¨è°ƒç”¨ç»„ä»¶åœ°æ–¹:propsæ–¹å¼ä½¿ç”¨å’Œä¼ å€¼"></a>åœ¨è°ƒç”¨ç»„ä»¶åœ°æ–¹:propsæ–¹å¼ä½¿ç”¨å’Œä¼ å€¼</h4><p>åœ¨è°ƒç”¨ç»„ä»¶åœ°æ–¹ï¼Œé€šè¿‡ :props ä¼ å€¼</p><h4 id="æ¯ä¸ªç»„ä»¶åˆæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œæ‹¥æœ‰vueæ‰€æœ‰èƒ½åŠ›"><a href="#æ¯ä¸ªç»„ä»¶åˆæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œæ‹¥æœ‰vueæ‰€æœ‰èƒ½åŠ›" class="headerlink" title="æ¯ä¸ªç»„ä»¶åˆæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œæ‹¥æœ‰vueæ‰€æœ‰èƒ½åŠ›"></a>æ¯ä¸ªç»„ä»¶åˆæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œæ‹¥æœ‰vueæ‰€æœ‰èƒ½åŠ›</h4><p>å‚è€ƒä¸Šé¢</p><h3 id="å®šä¹‰å„ç§å±æ€§çš„æ–¹å¼"><a href="#å®šä¹‰å„ç§å±æ€§çš„æ–¹å¼" class="headerlink" title="å®šä¹‰å„ç§å±æ€§çš„æ–¹å¼"></a>å®šä¹‰å„ç§å±æ€§çš„æ–¹å¼</h3><h4 id="å®šä¹‰æ™®é€špropsç”¨-props"><a href="#å®šä¹‰æ™®é€špropsç”¨-props" class="headerlink" title="å®šä¹‰æ™®é€špropsç”¨:props"></a>å®šä¹‰æ™®é€špropsç”¨:props</h4><h4 id="å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ç”¨-props"><a href="#å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ç”¨-props" class="headerlink" title="å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ç”¨@props"></a>å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ç”¨@props</h4><h3 id="å­ç»„ä»¶å¦‚ä½•æ”¹å˜çˆ¶ç»„ä»¶å€¼"><a href="#å­ç»„ä»¶å¦‚ä½•æ”¹å˜çˆ¶ç»„ä»¶å€¼" class="headerlink" title="å­ç»„ä»¶å¦‚ä½•æ”¹å˜çˆ¶ç»„ä»¶å€¼"></a>å­ç»„ä»¶å¦‚ä½•æ”¹å˜çˆ¶ç»„ä»¶å€¼</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>é€šè¿‡ç»™å­ç»„ä»¶å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶ï¼Œå°†çˆ¶ç»„ä»¶çš„æ–¹æ³•ä¼ ç»™è‡ªå®šä¹‰äº‹ä»¶ï¼Œæ–¹å¼ä¸reactç›¸åŒã€‚<br><figure class="image-box">                <img src="/image/vue/event.jpg" alt title class>                <p></p>            </figure></p><h4 id="emit"><a href="#emit" class="headerlink" title="$emit"></a>$emit</h4><p>ä½¿ç”¨$emitè§¦å‘äº‹ä»¶ã€‚</p><h3 id="å±€éƒ¨ç»„ä»¶"><a href="#å±€éƒ¨ç»„ä»¶" class="headerlink" title="å±€éƒ¨ç»„ä»¶"></a>å±€éƒ¨ç»„ä»¶</h3><figure class="image-box">                <img src="/image/vue/part.jpg" alt title class>                <p></p>            </figure><h3 id="templateã€domèŠ‚ç‚¹å…³ç³»ã€vueå®ä¾‹ã€ç»„ä»¶"><a href="#templateã€domèŠ‚ç‚¹å…³ç³»ã€vueå®ä¾‹ã€ç»„ä»¶" class="headerlink" title="templateã€domèŠ‚ç‚¹å…³ç³»ã€vueå®ä¾‹ã€ç»„ä»¶"></a>templateã€domèŠ‚ç‚¹å…³ç³»ã€vueå®ä¾‹ã€ç»„ä»¶</h3><p>æ¯ä¸ªvueå®ä¾‹éƒ½æœ‰ä¸€ä¸ªtemplateï¼Œ<br>å¦‚æœæ­¤å®ä¾‹æ²¡æœ‰templateï¼Œå®ä¾‹ä¼šå»æŒ‚è½½ç‚¹æ‰¾ï¼ŒæŒ‚è½½ç‚¹å†…éƒ¨æ‰€æœ‰çš„domèŠ‚ç‚¹å°±æ˜¯templateã€‚<br>ä¸€èˆ¬è¯´æ ¹vueå®ä¾‹å®šä¹‰äº†æŒ‚è½½ç‚¹ï¼Œæ‰€ä»¥ä¸ç”¨å®šä¹‰templateã€‚<br>ç»„ä»¶ä¸€èˆ¬ä¸å®šä¹‰æŒ‚è½½ç‚¹ï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰template</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="npm-scriptæ–¹å¼"><a href="#npm-scriptæ–¹å¼" class="headerlink" title="npm scriptæ–¹å¼"></a>npm scriptæ–¹å¼</h3><figure class="image-box">                <img src="/image/vue/npm.jpg" alt title class>                <p></p>            </figure><h3 id="vueè°ƒè¯•"><a href="#vueè°ƒè¯•" class="headerlink" title="vueè°ƒè¯•"></a>vueè°ƒè¯•</h3><h4 id="å®šä¹‰varï¼Œæ§åˆ¶å°æµ‹è¯•"><a href="#å®šä¹‰varï¼Œæ§åˆ¶å°æµ‹è¯•" class="headerlink" title="å®šä¹‰varï¼Œæ§åˆ¶å°æµ‹è¯•"></a>å®šä¹‰varï¼Œæ§åˆ¶å°æµ‹è¯•</h4><p>å¦‚å›¾ï¼Œå°†vueå®ä¾‹å®šä¹‰æˆä¸€ä¸ªå˜é‡ï¼Œç„¶ååœ¨æ§åˆ¶å°æ‹¿è¿™ä¸ªå˜é‡è¿›è¡Œä¸€ç³»åˆ—è®¾ç½®å€¼çš„æ“ä½œï¼š<br><figure class="image-box">                <img src="/image/vue/debug.jpg" alt title class>                <p></p>            </figure></p><h4 id="mounted-å†…å®šä¹‰-window-vue-this"><a href="#mounted-å†…å®šä¹‰-window-vue-this" class="headerlink" title="mounted å†…å®šä¹‰ window.vue=this;"></a>mounted å†…å®šä¹‰ window.vue=this;</h4><p>å¦‚é¢˜ï¼Œåœ¨æ§åˆ¶å°ä¸ç”¨æ–­ç‚¹ï¼Œå°±å¯ä»¥é€šè¿‡window.vueæ‹¿åˆ°vueå®ä¾‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
          <category> vueåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒ»è¯</title>
      <link href="/2020/10/21/doctor/"/>
      <url>/2020/10/21/doctor/</url>
      
        <content type="html"><![CDATA[<h2 id="éª¨åˆº"><a href="#éª¨åˆº" class="headerlink" title="éª¨åˆº"></a>éª¨åˆº</h2><h3 id="ç‰©ç†å¤–æ•·"><a href="#ç‰©ç†å¤–æ•·" class="headerlink" title="ç‰©ç†å¤–æ•·"></a>ç‰©ç†å¤–æ•·</h3><ul><li>ä¹°ä¸ªçƒ­æ•·å¹é£æœº(å±€éƒ¨çƒ­æ•·ä¸€ä¸‹)</li></ul><h3 id="è¯ç‰©å¤–æ•·"><a href="#è¯ç‰©å¤–æ•·" class="headerlink" title="è¯ç‰©å¤–æ•·"></a>è¯ç‰©å¤–æ•·</h3><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>ä¸­è¯æ²»ç–—ä»¥æ´»è¡€èˆ’ç­‹ä¸ºä¸»</p><h4 id="æ´»ç»œè¯ç‰©"><a href="#æ´»ç»œè¯ç‰©" class="headerlink" title="æ´»ç»œè¯ç‰©"></a>æ´»ç»œè¯ç‰©</h4><ul><li><p>ä»‹ç»<br>ä½¿ç”¨ä¸€äº›æ²»ç–—è‚Œè‚‰é…¸ç—›ã€å…³èŠ‚ç–¼ç—›çš„è¯è†ä¹Ÿæ¯”è¾ƒæœ‰ç–—æ•ˆ<br><a href="https://yp.120ask.com/detail/44258.html" target="_blank" rel="noopener">éª¨åˆºæ¶ˆç—›æ¶²</a><br>éª¨åˆºå¹³ï¼Œéª¨åˆºè´´è†<br>å±€éƒ¨çƒ­æ•·ä¸€ä¸‹<br>éª¨åˆºæ¶ˆç—›æ¶²æ²»ç–—<br>è´´æ•·æœæ¯”æ´›èŠ¬æ­¢è†è¯<br>å¥‡æ­£æ¶ˆç—›è´´</p></li><li><p>é€‰æ‹©ï¼š<br>åŠ²é€šåŒæ°¯èŠ¬é…¸é’ æ°”é›¾å‰‚<br>åŒæ°¯èŠ¬é…¸é’ è´´</p></li></ul><h3 id="å£æœ"><a href="#å£æœ" class="headerlink" title="å£æœ"></a>å£æœ</h3><h4 id="é•‡ç—›-å¸ƒè¯ºåˆ†"><a href="#é•‡ç—›-å¸ƒè¯ºåˆ†" class="headerlink" title="é•‡ç—› å¸ƒè¯ºåˆ†"></a>é•‡ç—› å¸ƒè¯ºåˆ†</h4><p>éç”¾ä½“æŠ—ç‚è¯ï¼éç±»å›ºé†‡æŠ—ç‚æ­¢ç—›å‰‚ æ¥è¾¾åˆ°ç¼“è§£ç–¼ç—›çš„ç›®çš„ (å¸ƒæ´›èŠ¬ã€åŒæ°¯èŠ¬é…¸é’ ã€é˜¿å¸åŒ¹æ—ã€å²å“šç¾è¾›ã€å¡æ¥æ˜”å¸ƒã€èŠ¬å¿…å¾—ã€ç¾æ´›æ˜”åº·ç­‰ï¼Œå…·æœ‰è§£çƒ­ã€é•‡ç—›ã€æ¶ˆç‚ä½œç”¨)<br>å¡æ¥è¥¿å¸ƒ<br>å¦‚æœç–¼ç—›ä¸¥é‡å£æœåŒæ°¯èŠ¬é…¸é’ ï¼Œ<br>åŒæ°¯èŠ¬é…¸é’ ç¼“é‡Šç‰‡<br>å£æœç¾æ´›æ˜”åº·æ¶ˆç‚æ­¢ç—›ã€‚</p><h4 id="æ²»ç–—-éª¨åˆºå¹³ç‰‡"><a href="#æ²»ç–—-éª¨åˆºå¹³ç‰‡" class="headerlink" title="æ²»ç–— éª¨åˆºå¹³ç‰‡"></a>æ²»ç–— éª¨åˆºå¹³ç‰‡</h4><p>éª¨åˆºå¹³ç‰‡ï¼Œæˆ–è€…æ˜¯å£®éª¨å…³èŠ‚ä¸¸æ²»ç–—<br>æŠ—éª¨è´¨å¢ç”Ÿä¸¸ï¼Œéª¨åˆºç‰‡<br>éª¨åˆºå¹³ç‰‡ç­‰<br>å£æœä»™çµéª¨è‘†èƒ¶å›Š<br>éª¨åˆºä¸¸</p><h4 id="æ¶ˆç‚-ï¼Ÿ"><a href="#æ¶ˆç‚-ï¼Ÿ" class="headerlink" title="æ¶ˆç‚ ï¼Ÿ"></a>æ¶ˆç‚ ï¼Ÿ</h4><h4 id="é€‰å®š"><a href="#é€‰å®š" class="headerlink" title="é€‰å®š"></a>é€‰å®š</h4><p>éª¨åˆºå¹³ç‰‡å’ŒåŒæ°¯èŠ¬é…¸é’ ç¼“é‡Šç‰‡</p><h3 id="è¥å…»"><a href="#è¥å…»" class="headerlink" title="è¥å…»"></a>è¥å…»</h3><ul><li>è¡¥é’™</li><li>ç»´ç”Ÿç´ bç±»çš„è¯ç‰©</li><li>å£æœæ°¨åŸºè‘¡è„ç³–ç­‰è½¯éª¨ä¿æŠ¤å‰‚</li><li>æ°¨åŸºè‘¡è„ç³–</li></ul><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="å¸ƒæ´›èŠ¬-ä¸-åŒæ°¯èŠ¬é…¸é’ "><a href="#å¸ƒæ´›èŠ¬-ä¸-åŒæ°¯èŠ¬é…¸é’ " class="headerlink" title="å¸ƒæ´›èŠ¬ ä¸ åŒæ°¯èŠ¬é…¸é’ "></a>å¸ƒæ´›èŠ¬ ä¸ åŒæ°¯èŠ¬é…¸é’ </h4><p>å¸ƒæ´›èŠ¬ã€åŒæ°¯èŠ¬é…¸é’  åŒå±äº éç”¾ä½“æŠ—ç‚è¯ï¼ŒäºŒé€‰ä¸€å³å¯ï¼Œä¸è¦ä¸€èµ·åƒï¼Œé¿å…é‡å åŠ ï¼Œè¿‡é‡ä½¿ç”¨ã€‚<br>åŒæ°¯èŠ¬é…¸é’ ç¼“é‡Šå‰‚å‹ï¼Œå…·æœ‰ç¼“æ…¢ã€é•¿æ—¶é—´é‡Šæ”¾æ´»æ€§æˆåˆ†çš„ç‰¹ç‚¹ã€‚è¯¥è¯å…·æœ‰æœè¯æ¬¡æ•°å°‘ï¼Œè¡€æ¶²è¯ç‰©æµ“åº¦å¹³ç¨³ï¼Œæ³¢åŠ¨å°ï¼ŒæŒç»­æ—¶é—´é•¿ç­‰ä¼˜ç‚¹ã€‚é€‚åˆç±»é£æ¹¿æ€§å…³èŠ‚ç‚æ‚£è€…è¾ƒé•¿æ—¶é—´æœç”¨ã€‚<br><a href="http://tag.120ask.com/jibing/fashao/1325248.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h3><figure class="image-box">                <img src="/image/doctor/test.png" alt title class>                <p></p>            </figure>]]></content>
      
      
      <categories>
          
          <category> åŒ»è¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŒ»è¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nextæ¡†æ¶åŠé¡¹ç›®ç¬”è®°</title>
      <link href="/2020/10/08/next/"/>
      <url>/2020/10/08/next/</url>
      
        <content type="html"><![CDATA[<h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="dialogè¦è€ƒè™‘çš„"><a href="#dialogè¦è€ƒè™‘çš„" class="headerlink" title="dialogè¦è€ƒè™‘çš„"></a>dialogè¦è€ƒè™‘çš„</h3><h4 id="è¦è€ƒè™‘å†…å®¹åŒºåŸŸä¸æŒ‰é’®è®¾è®¡"><a href="#è¦è€ƒè™‘å†…å®¹åŒºåŸŸä¸æŒ‰é’®è®¾è®¡" class="headerlink" title="è¦è€ƒè™‘å†…å®¹åŒºåŸŸä¸æŒ‰é’®è®¾è®¡"></a>è¦è€ƒè™‘å†…å®¹åŒºåŸŸä¸æŒ‰é’®è®¾è®¡</h4><h4 id="å†…å®¹åŒºåŸŸæ˜¯å¦æ»šåŠ¨"><a href="#å†…å®¹åŒºåŸŸæ˜¯å¦æ»šåŠ¨" class="headerlink" title="å†…å®¹åŒºåŸŸæ˜¯å¦æ»šåŠ¨"></a>å†…å®¹åŒºåŸŸæ˜¯å¦æ»šåŠ¨</h4><h4 id="æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºã€è¿˜æ˜¯æ»šåŠ¨æ˜¾ç¤º"><a href="#æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºã€è¿˜æ˜¯æ»šåŠ¨æ˜¾ç¤º" class="headerlink" title="æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºã€è¿˜æ˜¯æ»šåŠ¨æ˜¾ç¤º"></a>æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºã€è¿˜æ˜¯æ»šåŠ¨æ˜¾ç¤º</h4><h4 id="å†…å®¹æ›´æ–°æ—¶ï¼Œå¦‚ä½•è®¾è®¡"><a href="#å†…å®¹æ›´æ–°æ—¶ï¼Œå¦‚ä½•è®¾è®¡" class="headerlink" title="å†…å®¹æ›´æ–°æ—¶ï¼Œå¦‚ä½•è®¾è®¡"></a>å†…å®¹æ›´æ–°æ—¶ï¼Œå¦‚ä½•è®¾è®¡</h4><p>å½“dialogå†…çš„å†…å®¹é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¦‚ä½•é‡æ–°è®©dialogå¸ƒå±€ï¼Œä¿æŒå‚ç›´å±…ä¸­ã€‚</p><h4 id="nextçš„isFullScreenä¸shouldUpdatePositionæ¨¡å¼"><a href="#nextçš„isFullScreenä¸shouldUpdatePositionæ¨¡å¼" class="headerlink" title="nextçš„isFullScreenä¸shouldUpdatePositionæ¨¡å¼"></a>nextçš„isFullScreenä¸shouldUpdatePositionæ¨¡å¼</h4><h3 id="é¡¹ç›®ä¸­æ•°æ®è®¾è®¡"><a href="#é¡¹ç›®ä¸­æ•°æ®è®¾è®¡" class="headerlink" title="é¡¹ç›®ä¸­æ•°æ®è®¾è®¡"></a>é¡¹ç›®ä¸­æ•°æ®è®¾è®¡</h3><h4 id="ç”¨äºæ¸²æŸ“çš„-reduxæ•°æ®"><a href="#ç”¨äºæ¸²æŸ“çš„-reduxæ•°æ®" class="headerlink" title="ç”¨äºæ¸²æŸ“çš„ reduxæ•°æ®"></a>ç”¨äºæ¸²æŸ“çš„ reduxæ•°æ®</h4><h4 id="ç”¨äºæ¸²æŸ“çš„-stateæ•°æ®"><a href="#ç”¨äºæ¸²æŸ“çš„-stateæ•°æ®" class="headerlink" title="ç”¨äºæ¸²æŸ“çš„ stateæ•°æ®"></a>ç”¨äºæ¸²æŸ“çš„ stateæ•°æ®</h4><h4 id="ç”¨äºé€»è¾‘å¤„ç†-çš„å…¬å…±æ•°æ®-ç±»ä¼¼å•ä¾‹"><a href="#ç”¨äºé€»è¾‘å¤„ç†-çš„å…¬å…±æ•°æ®-ç±»ä¼¼å•ä¾‹" class="headerlink" title="ç”¨äºé€»è¾‘å¤„ç† çš„å…¬å…±æ•°æ®(ç±»ä¼¼å•ä¾‹)"></a>ç”¨äºé€»è¾‘å¤„ç† çš„å…¬å…±æ•°æ®(ç±»ä¼¼å•ä¾‹)</h4><p>è¿™ç§æ•°æ®ä¸ç”¨äºæ¸²æŸ“ï¼Œä¸åº”è¯¥æ”¾ç½®äº redux state æˆ–contextä¸Šï¼Œå› ä¸ºè¿™äº›éƒ½ä¼šå¼•èµ·renderã€‚<br>å¯ä»¥è€ƒè™‘å­˜å‚¨äºä¸€ä¸ªå•ä¾‹ä¸‹ã€‚</p><h4 id="ç”¨äºé€»è¾‘å¤„ç†-çš„æœ¬åœ°æ•°æ®-ref"><a href="#ç”¨äºé€»è¾‘å¤„ç†-çš„æœ¬åœ°æ•°æ®-ref" class="headerlink" title="ç”¨äºé€»è¾‘å¤„ç† çš„æœ¬åœ°æ•°æ®(ref)"></a>ç”¨äºé€»è¾‘å¤„ç† çš„æœ¬åœ°æ•°æ®(ref)</h4><p>ä¸€èˆ¬å­˜å‚¨äºthiså†…ï¼Œæˆ– useRefå†…ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> next </tag>
            
            <tag> é¡¹ç›® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æŒç»­é›†æˆçš„å®ç°</title>
      <link href="/2020/10/01/blog_flow/"/>
      <url>/2020/10/01/blog_flow/</url>
      
        <content type="html"><![CDATA[<h2 id="æŒç»­é›†æˆçš„éœ€æ±‚"><a href="#æŒç»­é›†æˆçš„éœ€æ±‚" class="headerlink" title="æŒç»­é›†æˆçš„éœ€æ±‚"></a>æŒç»­é›†æˆçš„éœ€æ±‚</h2><p>åŸºäºgithubçš„åšå®¢æŒç»­é›†æˆï¼Œåœ¨åšå®¢åˆ†æ”¯ä¸‹ï¼Œä»¥masterä½œä¸ºå‘å¸ƒåˆ†æ”¯ï¼›<br>blog_codeä½œä¸ºå¼€å‘åˆ†æ”¯ï¼›<br>å½“ç›‘å¬åˆ°blog_codeæäº¤commitæ—¶ï¼Œå°†è§¦å‘traviså·¥å…·ï¼Œæ‰§è¡Œ <code>hexo g</code>çš„ç¼–è¯‘ï¼Œå¹¶å°†ç¼–è¯‘åçš„ä»£ç åˆå¹¶åˆ°masteråˆ†æ”¯çš„è¿‡ç¨‹ã€‚</p><h2 id="github-token"><a href="#github-token" class="headerlink" title="github token"></a>github token</h2><p>åˆ›å»ºtokenï¼Œè·¯å¾„å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">settings / Developer settings / Personal access tokens</span><br></pre></td></tr></table></figure></p><p>ä»»æ„å®šä¹‰ä¸€ä¸ªtoken çš„åå­—ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå¯å…ˆå…¨éƒ¨å‹¾é€‰æ‰€æœ‰æƒé™ï¼š<br><figure class="image-box">                <img src="/image/blog_flow/token.jpg" alt title class>                <p></p>            </figure><br>tokenç±»ä¼¼ä¸€ä¸ªç§˜é’¥ï¼Œæˆæƒå…¶ä»–çš„åº”ç”¨æ¥æ“ä½œgithubçš„æƒé™ï¼Œæ¯”å¦‚åˆ›å»ºã€åˆ‡æ¢ã€æäº¤åˆ†æ”¯çš„æƒé™ã€‚</p><h2 id="travis-cli"><a href="#travis-cli" class="headerlink" title="travis-cli"></a>travis-cli</h2><h3 id="é€‰æ‹©è¦æ“ä½œçš„branch"><a href="#é€‰æ‹©è¦æ“ä½œçš„branch" class="headerlink" title="é€‰æ‹©è¦æ“ä½œçš„branch"></a>é€‰æ‹©è¦æ“ä½œçš„branch</h3><p>æ“ä½œåœ°å€<a href="https://travis-ci.org/account/repositoriesï¼Œ" target="_blank" rel="noopener">https://travis-ci.org/account/repositoriesï¼Œ</a><br>é€‰æ‹©è¦æ“ä½œçš„branchï¼Œç‚¹å‡»æ»‘åŠ¨å¼€å…³<br><figure class="image-box">                <img src="/image/blog_flow/branch.jpg" alt title class>                <p></p>            </figure></p><h3 id="å¡«å†™github-token"><a href="#å¡«å†™github-token" class="headerlink" title="å¡«å†™github token"></a>å¡«å†™github token</h3><p>ç‚¹å‡»æ—è¾¹çš„settingï¼Œè®¾ç½®settingï¼Œå°†gitbuh tokenå¡«å†™ä¸Šå°±è¡Œï¼Œå…¶ä»–é»˜è®¤ã€‚<br><figure class="image-box">                <img src="/image/blog_flow/setting.jpg" alt title class>                <p></p>            </figure><br>è‡³æ­¤ï¼Œtravis-cliè®¾ç½®å®Œæ¯•ï¼Œåœ¨é¦–é¡µå°†çœ‹åˆ°å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/blog_flow/view.jpg" alt title class>                <p></p>            </figure></p><h2 id="travis-sh"><a href="#travis-sh" class="headerlink" title="_travis.sh"></a>_travis.sh</h2><p>.shæ–‡ä»¶æ˜¯linuxå‘½ä»¤æ–‡ä»¶ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰æ—¶é—´</span></span><br><span class="line">time=`date +%Y-%m-%d\ %H:%M:%S`</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">success</span></span>()&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"success"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰§è¡Œå¤±è´¥</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">failure</span></span>()&#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="string">"failure"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#é»˜è®¤æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">default</span></span>()&#123;</span><br><span class="line"></span><br><span class="line">  git <span class="built_in">clone</span> https://<span class="variable">$&#123;GH_REF&#125;</span> .deploy_git</span><br><span class="line">  <span class="built_in">cd</span> .deploy_git</span><br><span class="line"></span><br><span class="line">  git checkout master</span><br><span class="line">  <span class="built_in">cd</span> ../</span><br><span class="line"></span><br><span class="line">  mv .deploy_git/.git/ ./public/</span><br><span class="line">  <span class="built_in">cd</span> ./public</span><br><span class="line"></span><br><span class="line">cat &lt;&lt;EOF &gt;&gt; README.md</span><br><span class="line">éƒ¨ç½²çŠ¶æ€ | é›†æˆç»“æœ | å‚è€ƒå€¼</span><br><span class="line">---|---|---</span><br><span class="line">å®Œæˆæ—¶é—´ | <span class="variable">$time</span> | yyyy-mm-dd hh:mm:ss</span><br><span class="line">éƒ¨ç½²ç¯å¢ƒ | <span class="variable">$TRAVIS_OS_NAME</span> + <span class="variable">$TRAVIS_NODE_VERSION</span> | window \| linux + stable</span><br><span class="line">éƒ¨ç½²ç±»å‹ | <span class="variable">$TRAVIS_EVENT_TYPE</span> | push \| pull_request \| api \| cron</span><br><span class="line">å¯ç”¨Sudo | <span class="variable">$TRAVIS_SUDO</span> | <span class="literal">false</span> \| <span class="literal">true</span></span><br><span class="line">ä»“åº“åœ°å€ | <span class="variable">$TRAVIS_REPO_SLUG</span> | owner_name/repo_name</span><br><span class="line">æäº¤åˆ†æ”¯ | <span class="variable">$TRAVIS_COMMIT</span> | <span class="built_in">hash</span> 16ä½</span><br><span class="line">æäº¤ä¿¡æ¯ | <span class="variable">$TRAVIS_COMMIT_MESSAGE</span> |</span><br><span class="line">Job ID   | <span class="variable">$TRAVIS_JOB_ID</span> |</span><br><span class="line">Job NUM  | <span class="variable">$TRAVIS_JOB_NUMBER</span> |</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">  git init</span><br><span class="line">  git config user.name <span class="string">"yeWills"</span></span><br><span class="line">  git config user.email <span class="string">"xxxx@qq.com"</span></span><br><span class="line">  git add .</span><br><span class="line">  git commit -m <span class="string">"Update Blog By TravisCI With Build <span class="variable">$TRAVIS_BUILD_NUMBER</span>"</span></span><br><span class="line">  <span class="comment"># Github Pages</span></span><br><span class="line">  git push --force --quiet <span class="string">"https://<span class="variable">$&#123;GH_TOKEN&#125;</span>@<span class="variable">$&#123;GH_REF&#125;</span>"</span> master:master</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Create Tag</span></span><br><span class="line">  git tag v1.2.<span class="variable">$TRAVIS_BUILD_NUMBER</span> -a -m <span class="string">"Auto Taged By TravisCI With Build <span class="variable">$TRAVIS_BUILD_NUMBER</span>"</span></span><br><span class="line">  <span class="comment"># Github Pages</span></span><br><span class="line">  git push --quiet <span class="string">"https://<span class="variable">$&#123;GH_TOKEN&#125;</span>@<span class="variable">$&#123;GH_REF&#125;</span>"</span> master:master --tags</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    <span class="string">"success"</span>)</span><br><span class="line">     success</span><br><span class="line">       ;;</span><br><span class="line">    <span class="string">"failure"</span>)</span><br><span class="line">     failure</span><br><span class="line">     ;;</span><br><span class="line">         *)</span><br><span class="line">       default</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure></p><h2 id="travis-yml"><a href="#travis-yml" class="headerlink" title=".travis.yml"></a>.travis.yml</h2><p>æè¿°æ–‡ä»¶ yml<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="comment"># è™šæ‹Ÿç¯å¢ƒä¸‹å®‰è£… 11.12.0ç‰ˆæœ¬node</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">"11.12.0"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">sudo:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#cache</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">"node_modules"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">notifications:</span></span><br><span class="line">  <span class="comment"># é‚®ä»¶å‘é€éƒ¨ç½²ç»“æœé€šçŸ¥</span></span><br><span class="line">  <span class="attr">email:</span></span><br><span class="line">    <span class="attr">recipients:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">xxxx@qq.com</span></span><br><span class="line">    <span class="attr">on_success:</span> <span class="string">change</span></span><br><span class="line">    <span class="attr">on_failure:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># S: Build Lifecycle</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sudo</span> <span class="string">apt-get</span> <span class="string">install</span> <span class="string">libnotify-bin</span></span><br><span class="line"></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="comment">#  - gem install travis</span></span><br><span class="line"><span class="comment">#  - travis login --pro --github-token $&#123;GH_TOKEN&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">before_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ='Asia/Shanghai'</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">chmod</span> <span class="string">+x</span> <span class="string">_travis.sh</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="comment"># - hexo clean &amp;&amp; hexo g</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_success:</span></span><br><span class="line"> <span class="comment"># - LAST_BUILD_NUMBER=68</span></span><br><span class="line"> <span class="comment"># - for i in $(seq 1 $LAST_BUILD_NUMBER ); do  travis logs $i --delete --force ; done</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./_travis.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># E: Build LifeCycle</span></span><br><span class="line"></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">blog_code</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"> <span class="attr">global:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">GH_REF:</span> <span class="string">github.com/YeWills/YeWills.github.io.git</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> travis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å·¥å…·</title>
      <link href="/2020/09/04/all/"/>
      <url>/2020/09/04/all/</url>
      
        <content type="html"><![CDATA[<h2 id="parcel"><a href="#parcel" class="headerlink" title="parcel"></a>parcel</h2><p><a href="https://zh.parceljs.org/recipes.html" target="_blank" rel="noopener">å®˜ç½‘ reacté…ç½®</a><br><a href="https://blog.jakoblind.no/react-parcel/" target="_blank" rel="noopener">å®˜ç½‘ åšå®¢ reactè¯¦ç»†é…ç½®</a><br><a href="https://github.com/YeWills/learns/tree/master/parcel" target="_blank" rel="noopener">parcel react demo</a></p><h2 id="å‡ ç§mockæ•°æ®çš„å·¥å…·"><a href="#å‡ ç§mockæ•°æ®çš„å·¥å…·" class="headerlink" title="å‡ ç§mockæ•°æ®çš„å·¥å…·"></a>å‡ ç§mockæ•°æ®çš„å·¥å…·</h2><h3 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h3><p><a href="https://api.github.com/search/users?q=è¾“å…¥ä½ è¦æœç´¢çš„å…³é”®å­—ï¼Œ" target="_blank" rel="noopener">https://api.github.com/search/users?q=è¾“å…¥ä½ è¦æœç´¢çš„å…³é”®å­—ï¼Œ</a> æ­¤æ¥å£å¯ä»¥è¿”å› æ•°ç»„listï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://api.github.com/search/users?q=vue</span><br></pre></td></tr></table></figure></p><p>ä¸è¿‡GitHubåªèƒ½åšgetè¯·æ±‚ã€‚</p><p>é…åˆfetchä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> fetch(<span class="string">`https://api.github.com/search/users?q=<span class="subst">$&#123;query&#125;</span>`</span>)</span><br><span class="line">   .then(<span class="function"><span class="params">res</span> =&gt;</span> res.json())</span><br><span class="line">   .then(<span class="function">(<span class="params">&#123; items &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(items)</span><br><span class="line">     <span class="keyword">return</span> items.slice(<span class="number">0</span>, <span class="number">10</span>).map(<span class="function">(<span class="params">item: any</span>) =&gt;</span> (&#123; <span class="attr">value</span>: item.login, ...item&#125;))</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><h3 id="jsonplaceholder"><a href="#jsonplaceholder" class="headerlink" title="jsonplaceholder"></a>jsonplaceholder</h3><p><a href="https://jsonplaceholder.typicode.com/" target="_blank" rel="noopener">https://jsonplaceholder.typicode.com/</a> è¿™ä¸ªå¯ä»¥åšå¾ˆå¤šä¸åŒç±»å‹è¯·æ±‚ï¼Œå¦‚post ç­‰ç­‰ï¼Œä½ è¦çš„è¯·æ±‚ï¼ŒåŸºæœ¬å®ƒéƒ½ç”¨ï¼Œç¡®å®šæ˜¯æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ ä¸å‹å¥½ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¦‚è®¿é—®ä»¥ä¸‹ï¼Œå°±å¯ä»¥è¿”å›json --&gt;</span><br><span class="line">https://jsonplaceholder.typicode.com/posts/1</span><br></pre></td></tr></table></figure><h3 id="mocky"><a href="#mocky" class="headerlink" title="mocky"></a>mocky</h3><p>å¯ä»¥åœ¨<a href="https://designer.mocky.io/" target="_blank" rel="noopener">å®˜ç½‘</a>ï¼Œè®¾ç½®å¥½ è¯·æ±‚ç±»å‹ï¼Œè¿”å›æ•°æ®ç”Ÿæˆ ä¸€ä¸ª mockyã€‚</p><p>è€Œä¸”è¿™ä¸ªè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥ä¸Šä¼ å¤§æ–‡ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">"https://www.mocky.io/v2/5cc8019d300000980a055e76"</span>, formData, &#123;</span><br><span class="line">     headers: &#123;</span><br><span class="line">       ...headers,</span><br><span class="line">       <span class="string">'Content-Type'</span>: <span class="string">'multipart/form-data'</span></span><br><span class="line">     &#125;,</span><br><span class="line">     withCredentials,</span><br><span class="line">     onUploadProgress: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">let</span> percentage = <span class="built_in">Math</span>.round((e.loaded * <span class="number">100</span>) / e.total) || <span class="number">0</span>;</span><br><span class="line">       <span class="keyword">if</span> (percentage &lt; <span class="number">100</span>) &#123;</span><br><span class="line">         updateFileList(_file, &#123; <span class="attr">percent</span>: percentage, <span class="attr">status</span>: <span class="string">'uploading'</span>&#125;)</span><br><span class="line">         <span class="keyword">if</span> (onProgress) &#123;</span><br><span class="line">           onProgress(percentage, file)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;).then(<span class="function"><span class="params">resp</span> =&gt;</span> &#123;</span><br><span class="line">    onSuccess(resp.data, file)</span><br><span class="line">   &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">     updateFileList(_file, &#123; <span class="attr">status</span>: <span class="string">'error'</span>, <span class="attr">error</span>: err&#125;)</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€’å½’åŠå…¶ä»–</title>
      <link href="/2020/09/03/recursion/"/>
      <url>/2020/09/03/recursion/</url>
      
        <content type="html"><![CDATA[<p>ä¸»è¦æ˜¯é€’å½’ä¸“é¡¹ç»ƒä¹ ç¬”è®°ï¼Œå¦å¤–é™„å¸¦å…¶ä»–ç®—æ³•ç»ƒä¹ ã€‚</p><h2 id="æœ‰å…³treeæ ‘çš„æ•°æ®å¤„ç†"><a href="#æœ‰å…³treeæ ‘çš„æ•°æ®å¤„ç†" class="headerlink" title="æœ‰å…³treeæ ‘çš„æ•°æ®å¤„ç†"></a>æœ‰å…³treeæ ‘çš„æ•°æ®å¤„ç†</h2><h3 id="éœ€æ±‚ï¼š"><a href="#éœ€æ±‚ï¼š" class="headerlink" title="éœ€æ±‚ï¼š"></a>éœ€æ±‚ï¼š</h3><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"id"</span>: <span class="number">19</span>,</span><br><span class="line">    <span class="string">"parentId"</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"id"</span>: <span class="number">18</span>,</span><br><span class="line">    <span class="string">"parentId"</span>: <span class="number">16</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"id"</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="string">"parentId"</span>: <span class="number">16</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"id"</span>: <span class="number">16</span>,</span><br><span class="line">    <span class="string">"parentId"</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"><span class="comment">// è½¬åŒ–ä¸º:</span></span><br><span class="line"><span class="keyword">const</span> tree = &#123;</span><br><span class="line">  <span class="string">"id"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">"children"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="number">19</span>,</span><br><span class="line">      <span class="string">"parentId"</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"id"</span>: <span class="number">16</span>,</span><br><span class="line">      <span class="string">"parentId"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="string">"children"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="number">18</span>,</span><br><span class="line">          <span class="string">"parentId"</span>: <span class="number">16</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">"id"</span>: <span class="number">17</span>,</span><br><span class="line">          <span class="string">"parentId"</span>: <span class="number">16</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> idInfoMap = list.reduce(<span class="function">(<span class="params">acc,item</span>)=&gt;</span>&#123;</span><br><span class="line">    acc[item[<span class="string">'id'</span>]]=item;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'idInfoMap..'</span>, idInfoMap)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> idChildsMap = list.reduce(<span class="function">(<span class="params">acc,item</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;id, parentId&#125; = item;</span><br><span class="line">    acc[parentId] = [...(acc[parentId]??[]), id]</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;,&#123;&#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'idChildsMap..'</span>, idChildsMap)</span><br><span class="line"><span class="keyword">const</span> getTree = <span class="function">(<span class="params">id, parentId</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> model = &#123;</span><br><span class="line">        id,</span><br><span class="line">        parentId</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> childs = idChildsMap[id];</span><br><span class="line">    <span class="keyword">if</span>(childs)&#123;</span><br><span class="line">        model.children=childs.map(<span class="function">(<span class="params">childId</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(idChildsMap[childId])&#123;</span><br><span class="line">                <span class="keyword">return</span> getTree(idInfoMap[childId].id, idInfoMap[childId].parentId)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> idInfoMap[childId]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> model;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> treeDatas = getTree(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'treeDatas..'</span>,treeDatas)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> recursion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gridå¸ƒå±€</title>
      <link href="/2020/08/20/css_grid/"/>
      <url>/2020/08/20/css_grid/</url>
      
        <content type="html"><![CDATA[<h2 id="ç½‘æ ¼é¡¹ä¸Šçš„å±æ€§"><a href="#ç½‘æ ¼é¡¹ä¸Šçš„å±æ€§" class="headerlink" title="ç½‘æ ¼é¡¹ä¸Šçš„å±æ€§"></a>ç½‘æ ¼é¡¹ä¸Šçš„å±æ€§</h2><h3 id="grid-area"><a href="#grid-area" class="headerlink" title="grid-area"></a>grid-area</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/grid/grid-area.jpg" alt title class>                <p></p>            </figure><h4 id="ç­‰æ•ˆå†™æ³•"><a href="#ç­‰æ•ˆå†™æ³•" class="headerlink" title="ç­‰æ•ˆå†™æ³•"></a>ç­‰æ•ˆå†™æ³•</h4><figure class="image-box">                <img src="/image/grid/area.jpg" alt title class>                <p></p>            </figure><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="justify-contentçš„start-stretchåŒºåˆ«"><a href="#justify-contentçš„start-stretchåŒºåˆ«" class="headerlink" title="justify-contentçš„start stretchåŒºåˆ«"></a>justify-contentçš„start stretchåŒºåˆ«</h3><p>åœ¨å›ºå®šå®½åº¦ä¸‹ï¼Œæ²¡æœ‰åŒºåˆ«ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* å›ºå®šå®½åº¦ä¸‹ï¼Œæ— åŒºåˆ«ï¼Œä¸­é—´å…ƒç´ å®½åº¦å§‹ç»ˆä¸º150px */</span></span><br><span class="line"><span class="selector-tag">grid-template-columns</span><span class="selector-pseudo">:150px</span> 150<span class="selector-tag">px</span> 150<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">justify-content</span><span class="selector-pseudo">:start</span>ï¼<span class="selector-tag">stretch</span>;</span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¸­é—´çš„å…ƒç´ èƒ½æœ‰å¤šçª„å°±æœ‰å¤šçª„ */</span></span><br><span class="line"><span class="selector-tag">grid-template-columns</span><span class="selector-pseudo">:150px</span> <span class="selector-tag">auto</span> 150<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">justify-content</span><span class="selector-pseudo">:start</span>;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¸­é—´çš„å…ƒç´ æœ‰å¤šå®½å°±æœ‰å¤šå®½ */</span></span><br><span class="line"><span class="selector-tag">grid-template-columns</span><span class="selector-pseudo">:150px</span> <span class="selector-tag">auto</span> 150<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">justify-content</span><span class="selector-pseudo">:stretch</span>;</span><br></pre></td></tr></table></figure><h3 id="repeat"><a href="#repeat" class="headerlink" title="repeat()"></a>repeat()</h3><h4 id="ç­‰æ•ˆå†™æ³•-1"><a href="#ç­‰æ•ˆå†™æ³•-1" class="headerlink" title="ç­‰æ•ˆå†™æ³•"></a>ç­‰æ•ˆå†™æ³•</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>:<span class="built_in">repeat</span>(<span class="number">3</span>, <span class="number">20px</span> [clo-start]) <span class="number">5%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>:<span class="number">20px</span> [col-start] <span class="number">20px</span> [col-start] <span class="number">20px</span> [col-start] <span class="number">5%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="auto-fill"><a href="#auto-fill" class="headerlink" title="auto-fill"></a>auto-fill</h4><p>auto-fillä¸èƒ½è·Ÿå…·ä½“çš„æ•°å€¼ä¸€èµ·ï¼Œå¦åˆ™å°†ä¸èµ·æ•ˆæœã€‚ä¸€èˆ¬ä¸minmaxä½¿ç”¨ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>:<span class="built_in">repeat</span>(auto-fill, minmax(<span class="number">100px</span>, <span class="number">150px</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>auto-fitä¸auto-fillç±»ä¼¼ã€‚</p><h3 id="fit-content"><a href="#fit-content" class="headerlink" title="fit-content"></a>fit-content</h3><p>fit-content ç»™å®šç½‘æ ¼é¡¹å®šä¹‰çš„å®½åº¦ï¼Œä½†ç½‘æ ¼é¡¹æŒ‰ç…§è‡ªèº«çš„å®½åº¦å±•ç¤ºã€‚<br>è¿™ä¸ªå±æ€§æœ‰ä¸ªä½œç”¨æ˜¯ï¼Œåœ¨å¤šè¡Œä¸­ï¼Œä¿è¯å®šä¹‰çš„åˆ—å®½åº¦æ˜¯ä¸€è‡´çš„ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grid-template-columns</span><span class="selector-pseudo">:100px</span> <span class="selector-tag">fit-content</span>(200<span class="selector-tag">px</span>) <span class="selector-tag">fit-content</span>(300<span class="selector-tag">px</span>) 10% 1<span class="selector-tag">fr</span> <span class="selector-tag">auto</span>;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/grid/fit.jpg" alt title class>                <p></p>            </figure><h3 id="åˆå¹¶å†™æ³•çš„æ”¹å"><a href="#åˆå¹¶å†™æ³•çš„æ”¹å" class="headerlink" title="åˆå¹¶å†™æ³•çš„æ”¹å"></a>åˆå¹¶å†™æ³•çš„æ”¹å</h3><h4 id="place-content"><a href="#place-content" class="headerlink" title="place-content"></a>place-content</h4><p>è¿™ä¸ªæ˜¯åˆå¹¶äº† justify-content align-content çš„å†™æ³•ã€‚<br>éšå¼è½¨é“</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gridå¸ƒå±€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeç¬”è®°</title>
      <link href="/2020/08/19/vscode/"/>
      <url>/2020/08/19/vscode/</url>
      
        <content type="html"><![CDATA[<h2 id="vscodeè°ƒè¯•"><a href="#vscodeè°ƒè¯•" class="headerlink" title="vscodeè°ƒè¯•"></a>vscodeè°ƒè¯•</h2><h3 id="æ™®é€šè°ƒè¯•"><a href="#æ™®é€šè°ƒè¯•" class="headerlink" title="æ™®é€šè°ƒè¯•"></a>æ™®é€šè°ƒè¯•</h3><h4 id="æ™®é€šæ–‡ä»¶"><a href="#æ™®é€šæ–‡ä»¶" class="headerlink" title="æ™®é€šæ–‡ä»¶"></a>æ™®é€šæ–‡ä»¶</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// workspaceFolder å…¶å®å°±æ˜¯é¡¹ç›®æ ¹ç›®å½•</span></span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"0.2.0"</span>,</span><br><span class="line">    <span class="attr">"configurations"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"nodemonå¯åŠ¨"</span>,</span><br><span class="line">            <span class="attr">"runtimeExecutable"</span>: <span class="string">"nodemon"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/src/app.js"</span>,</span><br><span class="line">            <span class="attr">"restart"</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">"console"</span>: <span class="string">"integratedTerminal"</span>,</span><br><span class="line">            <span class="attr">"internalConsoleOptions"</span>: <span class="string">"neverOpen"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"nodeå¯åŠ¨"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;workspaceFolder&#125;/src/app.js"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"node"</span>,</span><br><span class="line">            <span class="attr">"request"</span>: <span class="string">"launch"</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"è°ƒè¯•å½“å‰æ–‡ä»¶"</span>,</span><br><span class="line">            <span class="attr">"program"</span>: <span class="string">"$&#123;file&#125;"</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®å¥½åï¼Œdebugge ç•Œé¢ä¼šå˜æˆï¼š<br><figure class="image-box">                <img src="/image/node/pre.jpg" alt title class>                <p></p>            </figure><br>é¡¹ç›®ç›®å½•ï¼š<br><figure class="image-box">                <img src="/image/node/deb.jpg" alt title class>                <p></p>            </figure></p><h4 id="nodeè°ƒè¯•"><a href="#nodeè°ƒè¯•" class="headerlink" title="nodeè°ƒè¯•"></a>nodeè°ƒè¯•</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="nodemonè°ƒè¯•"><a href="#nodemonè°ƒè¯•" class="headerlink" title="nodemonè°ƒè¯•"></a>nodemonè°ƒè¯•</h4><p>å‚è€ƒä¸Šé¢</p><h3 id="inspertoræ–¹å¼"><a href="#inspertoræ–¹å¼" class="headerlink" title="inspertoræ–¹å¼"></a>inspertoræ–¹å¼</h3><p>å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨è·Ÿç§»åŠ¨ç«¯è°ƒè¯•ä¸€æ ·çš„ä¸€ç§æ–¹å¼ï¼Œå°±æ˜¯inspertor è°·æ­Œæ§åˆ¶å°æ–¹å¼ï¼Œè¯¦ç»†å‚è€ƒæ…•è¯¾ç½‘ä¸­çš„nodeè°ƒè¯•å…¥é—¨çš„è¯¾ç¨‹ã€‚</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href>æ…•è¯¾ nodeè°ƒè¯•å…¥é—¨</a><br><a href="https://coding.imooc.com/class/chapter/342.html#Anchor" target="_blank" rel="noopener">Node.js+Koa2+MySQLæ‰“é€ å‰åç«¯åˆ†ç¦»ç²¾å“é¡¹ç›®ã€Šæ—§å²›ã€‹ - vscode+nodemonè°ƒè¯•é…ç½®</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vscode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç«¯demo</title>
      <link href="/2020/08/17/end_demo/"/>
      <url>/2020/08/17/end_demo/</url>
      
        <content type="html"><![CDATA[<h2 id="eggç®€å•demo"><a href="#eggç®€å•demo" class="headerlink" title="eggç®€å•demo"></a>eggç®€å•demo</h2><p>è¿™æ˜¯ä¸€ä¸ªåç«¯demo<br>åŠŸèƒ½æœ‰ï¼š</p><h3 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><h3 id="view-æ¨¡ç‰ˆå¼•æ“æ–‡ä»¶-é…åˆæ’ä»¶-egg-view-ejs-ä¸€èµ·ç”¨"><a href="#view-æ¨¡ç‰ˆå¼•æ“æ–‡ä»¶-é…åˆæ’ä»¶-egg-view-ejs-ä¸€èµ·ç”¨" class="headerlink" title="view æ¨¡ç‰ˆå¼•æ“æ–‡ä»¶ é…åˆæ’ä»¶ egg-view-ejs ä¸€èµ·ç”¨"></a>view æ¨¡ç‰ˆå¼•æ“æ–‡ä»¶ é…åˆæ’ä»¶ egg-view-ejs ä¸€èµ·ç”¨</h3><h3 id="å­˜å‚¨é™æ€æ–‡ä»¶-public-ç›®å½•ä¸­"><a href="#å­˜å‚¨é™æ€æ–‡ä»¶-public-ç›®å½•ä¸­" class="headerlink" title="å­˜å‚¨é™æ€æ–‡ä»¶ - public ç›®å½•ä¸­"></a>å­˜å‚¨é™æ€æ–‡ä»¶ - public ç›®å½•ä¸­</h3><h3 id="ä¸‹è½½æ–‡ä»¶åŠŸèƒ½"><a href="#ä¸‹è½½æ–‡ä»¶åŠŸèƒ½" class="headerlink" title="ä¸‹è½½æ–‡ä»¶åŠŸèƒ½"></a>ä¸‹è½½æ–‡ä»¶åŠŸèƒ½</h3><h3 id="æŠ½å–service"><a href="#æŠ½å–service" class="headerlink" title="æŠ½å–service"></a>æŠ½å–service</h3><h3 id="æ¥å£è¿”å›å¿…é¡»åŠ ä¸Šawait"><a href="#æ¥å£è¿”å›å¿…é¡»åŠ ä¸Šawait" class="headerlink" title="æ¥å£è¿”å›å¿…é¡»åŠ ä¸Šawait"></a>æ¥å£è¿”å›å¿…é¡»åŠ ä¸Šawait</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HomeController</span> <span class="keyword">extends</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">  <span class="keyword">async</span> index() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> ctx.service.product.index();</span><br><span class="line">    <span class="comment">//await è¿™é‡Œå¿…é¡»åŠ ä¸Šawait ï¼Œä¸ç„¶è®¿é—®è·¯ç”±ä¼šæŠ¥é”™ 404 not found</span></span><br><span class="line">    <span class="keyword">await</span> ctx.render(<span class="string">'index.html'</span>, &#123; res &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="postè¯·æ±‚éœ€ç¦ç”¨csrfå®‰å…¨æ”»å‡»éªŒè¯"><a href="#postè¯·æ±‚éœ€ç¦ç”¨csrfå®‰å…¨æ”»å‡»éªŒè¯" class="headerlink" title="postè¯·æ±‚éœ€ç¦ç”¨csrfå®‰å…¨æ”»å‡»éªŒè¯"></a>postè¯·æ±‚éœ€ç¦ç”¨csrfå®‰å…¨æ”»å‡»éªŒè¯</h3><p>åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œä¸ç„¶ä¼šæŠ¥å¼‚å¸¸ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//egg-demo/config/config.default.js</span></span><br><span class="line"> <span class="comment">// ç¦æ­¢postå®‰å…¨æ”»å‡»éªŒè¯åŠŸèƒ½</span></span><br><span class="line">  config.security = &#123;</span><br><span class="line">    csrf: &#123;</span><br><span class="line">      enable: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure></p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><p><a href="https://github.com/YeWills/learns/tree/master/egg-demo" target="_blank" rel="noopener">demo</a></p><h2 id="egg-vueå…¥é—¨demo-å‰åç«¯å®æˆ˜"><a href="#egg-vueå…¥é—¨demo-å‰åç«¯å®æˆ˜" class="headerlink" title="egg+vueå…¥é—¨demo(å‰åç«¯å®æˆ˜)"></a>egg+vueå…¥é—¨demo(å‰åç«¯å®æˆ˜)</h2><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><p>å‰ç«¯å¯åŠ¨<code>npm run serve</code>,åç«¯å¯åŠ¨<code>npm run dev</code>.</p><h3 id="vant-çš„ä½¿ç”¨"><a href="#vant-çš„ä½¿ç”¨" class="headerlink" title="vant çš„ä½¿ç”¨"></a>vant çš„ä½¿ç”¨</h3><h3 id="babel-plugin-importæŒ‰éœ€åŠ è½½vant"><a href="#babel-plugin-importæŒ‰éœ€åŠ è½½vant" class="headerlink" title="babel-plugin-importæŒ‰éœ€åŠ è½½vant"></a>babel-plugin-importæŒ‰éœ€åŠ è½½vant</h3><p>(å‚è€ƒ)[<a href="https://youzan.github.io/vant/#/zh-CN/quickstart]" target="_blank" rel="noopener">https://youzan.github.io/vant/#/zh-CN/quickstart]</a></p><h3 id="è·¨åŸŸ-1"><a href="#è·¨åŸŸ-1" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        proxy: &#123; <span class="comment">// é…ç½®ä»£ç†ä¿¡æ¯</span></span><br><span class="line">            <span class="string">'/article'</span>: &#123;</span><br><span class="line">                target: <span class="string">'http://127.0.0.1:7001'</span>,</span><br><span class="line">                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">                ws: <span class="literal">true</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºåç«¯å·¥ç¨‹"><a href="#åˆ›å»ºåç«¯å·¥ç¨‹" class="headerlink" title="åˆ›å»ºåç«¯å·¥ç¨‹"></a>åˆ›å»ºåç«¯å·¥ç¨‹</h3><p>åˆ›å»ºé¡¹ç›®ï¼Œè¯¦ç»†å‚è€ƒeggå®˜ç½‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init egg --type=simple</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure></p><h3 id="ç¼–å†™mysql"><a href="#ç¼–å†™mysql" class="headerlink" title="ç¼–å†™mysql"></a>ç¼–å†™mysql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- egg-mysql-serve/vue_egg_test.sql</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`article`</span>  (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`title`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`summary`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`content`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`img`</span> MEDIUMTEXT <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`createTime`</span> <span class="built_in">timestamp</span>(<span class="number">0</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>) <span class="keyword">USING</span> BTREE</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆæ•°æ®åº“ã€è¡¨"><a href="#ç”Ÿæˆæ•°æ®åº“ã€è¡¨" class="headerlink" title="ç”Ÿæˆæ•°æ®åº“ã€è¡¨"></a>ç”Ÿæˆæ•°æ®åº“ã€è¡¨</h3><h4 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h4><p>æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§é€šè¿‡cmdå‘½ä»¤æ–¹å¼ï¼Œå¦å¤–ä¸€ç§é€šè¿‡navicateæ–¹å¼å›¾å½¢åŒ–ç”Ÿæˆã€‚<br>å…·ä½“å‚è€ƒã€Šåç«¯ç¬”è®° - sequlizeé›†æˆä½¿ç”¨ - æ–°å»ºæ•°æ®åº“ã€‹<br>ç”¨navicateåˆ›å»ºå¥½åï¼Œåœ¨cmdä¸­å†æ¬¡show databases;å³å¯æŸ¥çœ‹æ–°å¢æ•°æ®åº“ã€‚</p><h4 id="åˆ›å»ºè¡¨"><a href="#åˆ›å»ºè¡¨" class="headerlink" title="åˆ›å»ºè¡¨"></a>åˆ›å»ºè¡¨</h4><p>æœ‰ä»¥ä¸‹æ–¹å¼ï¼š</p><ul><li>ç›´æ¥å°†ä¸Šé¢çš„sql å†…å®¹æ”¾åœ¨cmdä¸­æ‰§è¡Œï¼Œç”Ÿæˆæ•°æ®åº“ã€‚</li><li>cmd ä¸­ source sqlæ–‡ä»¶ã€‚</li><li>åˆ©ç”¨navicateåˆ›å»ºè¡¨ï¼Œç„¶åå°†è¡¨æ•°æ®å¯¼å‡ºã€‚</li></ul><h3 id="egg-mysqlæ¡¥æ¥æ•°æ®åº“"><a href="#egg-mysqlæ¡¥æ¥æ•°æ®åº“" class="headerlink" title="egg-mysqlæ¡¥æ¥æ•°æ®åº“"></a>egg-mysqlæ¡¥æ¥æ•°æ®åº“</h3><p>egg-mysqlè·å–é…ç½®ä¿¡æ¯ä¸­çš„æ•°æ®åº“ç™»é™†ç”¨æˆ·ä¿¡æ¯ ç™»é™†è¿æ¥æ•°æ®åº“ã€‚<br>è®©åé€šè¿‡<code>this.app.mysql.select(&#39;article&#39;)</code>ç­‰è¿›è¡Œæ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ã€‚<br>æ›´å¤šæŸ¥çœ‹ç½‘ä¸Šã€‚</p><h3 id="eggå¼€å‘è§„èŒƒ"><a href="#eggå¼€å‘è§„èŒƒ" class="headerlink" title="eggå¼€å‘è§„èŒƒ"></a>eggå¼€å‘è§„èŒƒ</h3><ul><li>ä½¿ç”¨å‘½ä»¤ç”Ÿäº§eggé¡¹ç›®</li><li>å‘½åè§„èŒƒï¼šæ–‡ä»¶å°å†™ï¼Œæ–‡ä»¶å†…classå¤§å†™é©¼å³°ã€‚</li><li>eggçš„routerå†™æ³•ç­‰</li><li>æ¥å£æ•°æ®å¤„ç†ä½¿ç”¨ async await</li><li>controllerçš„æ¦‚å¿µ</li><li>serviceçš„æ¦‚å¿µ<h3 id="demoä¸å‚è€ƒ"><a href="#demoä¸å‚è€ƒ" class="headerlink" title="demoä¸å‚è€ƒ"></a>demoä¸å‚è€ƒ</h3></li></ul><p><a href="https://github.com/YeWills/learns/tree/master/egg-client" target="_blank" rel="noopener">å‰ç«¯demo</a></p><p><a href="https://github.com/YeWills/learns/tree/master/egg-mysql-serve" target="_blank" rel="noopener">åç«¯demo</a></p><p><a href="https://www.imooc.com/learn/1185" target="_blank" rel="noopener">æ…•è¯¾æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> egg </tag>
            
            <tag> demo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeç¬”è®°</title>
      <link href="/2020/08/13/node/"/>
      <url>/2020/08/13/node/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="è®¤è¯†nodeçš„é­”åŠ›å¾ˆé‡è¦"><a href="#è®¤è¯†nodeçš„é­”åŠ›å¾ˆé‡è¦" class="headerlink" title="è®¤è¯†nodeçš„é­”åŠ›å¾ˆé‡è¦"></a>è®¤è¯†nodeçš„é­”åŠ›å¾ˆé‡è¦</h3><h4 id="è„±ç¦»æµè§ˆå™¨ä¸‹è¿è¡Œjs"><a href="#è„±ç¦»æµè§ˆå™¨ä¸‹è¿è¡Œjs" class="headerlink" title="è„±ç¦»æµè§ˆå™¨ä¸‹è¿è¡Œjs"></a>è„±ç¦»æµè§ˆå™¨ä¸‹è¿è¡Œjs</h4><p>nodeæœ€å¤§çš„ä½œç”¨ä¹‹ä¸€ï¼Œå°±æ˜¯è®©ä½ åœ¨è„±ç¦»æµè§ˆå™¨çš„æƒ…å†µä¸‹è¿è¡Œjsã€‚ä¸€èˆ¬jsåªèƒ½è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šã€‚<br>ä½†nodeå¯ä»¥è®©ä½ åœ¨è„±ç¦»æµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼Œå†™jsï¼Œè¿™ç‚¹éå¸¸é‡è¦ã€‚</p><h4 id="æä¾›åº•å±‚æ“ä½œèƒ½åŠ›"><a href="#æä¾›åº•å±‚æ“ä½œèƒ½åŠ›" class="headerlink" title="æä¾›åº•å±‚æ“ä½œèƒ½åŠ›"></a>æä¾›åº•å±‚æ“ä½œèƒ½åŠ›</h4><p>é™¤æ­¤ä¹‹å¤–ï¼Œnodeè¿˜æä¾›äº†å¾ˆå¤šèƒ½åŠ›ï¼Œè®©ä½ é€šè¿‡jså°±å¯ä»¥æ“ä½œcpuï¼Œå†…å­˜ï¼Œè¯»å†™æ–‡ä»¶ è¿™äº›ä»¥å‰åç«¯æ‰èƒ½åšçš„åº•å±‚çš„æ“ä½œèƒ½åŠ›ã€‚</p><h4 id="ä¸­é—´å±‚ï¼šæœåŠ¡å™¨ä¸­è´Ÿè´£IOè¯»å†™çš„ä¸­é—´å±‚æœåŠ¡å™¨"><a href="#ä¸­é—´å±‚ï¼šæœåŠ¡å™¨ä¸­è´Ÿè´£IOè¯»å†™çš„ä¸­é—´å±‚æœåŠ¡å™¨" class="headerlink" title="ä¸­é—´å±‚ï¼šæœåŠ¡å™¨ä¸­è´Ÿè´£IOè¯»å†™çš„ä¸­é—´å±‚æœåŠ¡å™¨"></a>ä¸­é—´å±‚ï¼šæœåŠ¡å™¨ä¸­è´Ÿè´£IOè¯»å†™çš„ä¸­é—´å±‚æœåŠ¡å™¨</h4><p>å¾…å®Œå–„ã€‚</p><h3 id="æŠŠç©nodeçš„æŠ€å·§"><a href="#æŠŠç©nodeçš„æŠ€å·§" class="headerlink" title="æŠŠç©nodeçš„æŠ€å·§"></a>æŠŠç©nodeçš„æŠ€å·§</h3><h4 id="ä½¿ç”¨commonjsè€Œä¸ç”¨import"><a href="#ä½¿ç”¨commonjsè€Œä¸ç”¨import" class="headerlink" title="ä½¿ç”¨commonjsè€Œä¸ç”¨import"></a>ä½¿ç”¨commonjsè€Œä¸ç”¨import</h4><p>nodeå¯ä»¥è¯†åˆ«commonjsè§„èŒƒï¼Œä½†ä¸èƒ½è¯†åˆ«import es6ã€‚<br>åœ¨è‡ªå·±ç©ä¸€ç©nodeçš„æ—¶å€™ï¼Œä½¿ç”¨commonjsè€Œä¸ç”¨importï¼Œé¿å¼€webpack babel ts ç­‰ç­‰å¹²æ‰°ã€‚</p><h4 id="commonjsç•…é€šæ— é˜»"><a href="#commonjsç•…é€šæ— é˜»" class="headerlink" title="commonjsç•…é€šæ— é˜»"></a>commonjsç•…é€šæ— é˜»</h4><p>å¦‚æœç©ä¸€ç©nodeï¼Œä½¿ç”¨commonjså¯ä»¥ç”¨å¾—å¾ˆçˆ½ã€‚</p><h4 id="å¯ä»¥å†™ä¸ªå°jsæ‰“å°ä¸‹nodeçš„å„ç§æ¨¡å—å˜é‡"><a href="#å¯ä»¥å†™ä¸ªå°jsæ‰“å°ä¸‹nodeçš„å„ç§æ¨¡å—å˜é‡" class="headerlink" title="å¯ä»¥å†™ä¸ªå°jsæ‰“å°ä¸‹nodeçš„å„ç§æ¨¡å—å˜é‡"></a>å¯ä»¥å†™ä¸ªå°jsæ‰“å°ä¸‹nodeçš„å„ç§æ¨¡å—å˜é‡</h4><p>æ’é™¤å…¶ä»–æ¯”å¦‚ webpack babel ç­‰å¹²æ‰°ï¼Œå†™ä¸€ä¸ªå°jsï¼Œjsä¸­æ‰“å°ä»¥ä¸‹nodeçš„å„ç§æ¨¡å—ï¼Œæ¯”å¦‚ __dirnameç­‰ç­‰ã€‚</p><h3 id="å…¨å±€æ¨¡å—"><a href="#å…¨å±€æ¨¡å—" class="headerlink" title="å…¨å±€æ¨¡å—"></a>å…¨å±€æ¨¡å—</h3><h4 id="å¥½ç”¨çš„process-argv"><a href="#å¥½ç”¨çš„process-argv" class="headerlink" title="å¥½ç”¨çš„process.argv"></a>å¥½ç”¨çš„process.argv</h4><p>process.argvå¯ä»¥è·å–æ§åˆ¶å°å‘½ä»¤çš„å‚æ•°ã€‚<br>æ¯”å¦‚åœ¨æ§åˆ¶å°è¾“å…¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node ./src/app.js node -v</span><br></pre></td></tr></table></figure></p><p>jsä¸­ console.log(process.argv) å°±æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[ &apos;/usr/local/bin/node&apos;,</span><br><span class="line">  &apos;/Users/js/Desktop/work/git/learns/sequelize-demo/src/app.js&apos;,</span><br><span class="line">  &apos;node&apos;,</span><br><span class="line">  &apos;-v&apos; ]</span><br></pre></td></tr></table></figure></p><p>ä½ åœ¨jsä¸­è·å–åˆ°å‘½ä»¤ä¸­æœ€åä¸¤ä¸ªå‚æ•°æ˜¯node å’Œ -v åï¼Œå°±åˆ¤å®šç”¨æˆ·æƒ³çŸ¥é“ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆå°±åœ¨jsä¸­console.logçš„æ–¹å¼æ‰“å°ç‰ˆæœ¬å·å‡ºæ¥ï¼Œåœ¨cmdä¸­å°†ä¼šçœ‹åˆ°æ‰“å°å‡ºæ¥çš„ç‰ˆæœ¬å·ã€‚<br>è¿™åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¾‹å­ï¼Œ<strong>ä½ å¯ä»¥ä»¥æ­¤ç±»æ¨ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€äº›å‘½ä»¤å·¥å…·ã€‚</strong></p><h4 id="dirnameåœ¨ç¼–è¯‘å’Œæœªç¼–è¯‘çš„jsä¸­çš„åŒºåˆ«"><a href="#dirnameåœ¨ç¼–è¯‘å’Œæœªç¼–è¯‘çš„jsä¸­çš„åŒºåˆ«" class="headerlink" title="__dirnameåœ¨ç¼–è¯‘å’Œæœªç¼–è¯‘çš„jsä¸­çš„åŒºåˆ«"></a>__dirnameåœ¨ç¼–è¯‘å’Œæœªç¼–è¯‘çš„jsä¸­çš„åŒºåˆ«</h4><p>åœ¨æ²¡æœ‰ç¼–è¯‘çš„åœ°æ–¹<strong>dirnameå°±æ˜¯æ–‡ä»¶å½“å‰çš„ç›®å½•ï¼›<br>å¦‚æœè¿™ä¸ªæ–‡ä»¶æ˜¯webpackå°†ä¼šè¢«ç¼–è¾‘çš„ï¼Œä¸€èˆ¬æ˜¯å‰ç«¯ä¸šåŠ¡jsï¼Œæ­¤æ—¶çš„</strong>dirnameæ˜¯webpackç¼–è¯‘å®Œæˆåçš„jsæ‰€å¤„æ–‡ä»¶çš„ç›®å½•ï¼Œä¹Ÿå¯èƒ½è¿™ä¸ªjsç»è¿‡webpackç¼–è¯‘åï¼Œè¢«åˆå¹¶åˆ°ä¸€ä¸ªç»Ÿä¸€çš„versor.jsæ–‡ä»¶ä¸­ï¼Œæ­¤æ—¶__dirnameå°±æ˜¯æ­¤æ–‡ä»¶ç›®å½•ã€‚</p><h3 id="ç³»ç»Ÿæ¨¡å—"><a href="#ç³»ç»Ÿæ¨¡å—" class="headerlink" title="ç³»ç»Ÿæ¨¡å—"></a>ç³»ç»Ÿæ¨¡å—</h3><p>æŒ‡çš„æ˜¯éœ€è¦requireï¼Œä½†ä¸éœ€è¦ä¸‹è½½çš„æ¨¡å—ï¼Œæ¯”å¦‚pathæ¨¡å—ã€‚</p><h3 id="exports-ä¸-module-exports"><a href="#exports-ä¸-module-exports" class="headerlink" title="exports ä¸ module.exports"></a>exports ä¸ module.exports</h3><h4 id="ä¼˜å…ˆç”¨module-exports"><a href="#ä¼˜å…ˆç”¨module-exports" class="headerlink" title="ä¼˜å…ˆç”¨module.exports"></a>ä¼˜å…ˆç”¨module.exports</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">exports.a = <span class="number">1</span>;</span><br><span class="line">exports.b = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰æ•ˆäº</span></span><br><span class="line"><span class="built_in">module</span>.exports=&#123;</span><br><span class="line">  a:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡å¯¼å‡ºæ—¶ä¸€èˆ¬ç”¨ module.exports;</p><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">girl</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  love(u) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"ä½ æ˜¯ä¸ªå¥½äºº!"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŠŠå¥¹å¯¼å‡ºå»</span></span><br><span class="line">exports = girl  <span class="comment">// å‡ºé”™ï¼ ä¸èƒ½é‡å†™exportsï¼</span></span><br><span class="line"><span class="comment">// æ­£ç¡®åšæ³•</span></span><br><span class="line"><span class="built_in">module</span>.exports = girl</span><br></pre></td></tr></table></figure><h3 id="http-createServer"><a href="#http-createServer" class="headerlink" title="http.createServer"></a>http.createServer</h3><h4 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h4><p>http.createServerè¡¨æ˜å¯äº†ä¸€ä¸ªæœåŠ¡ï¼Œå…‰ä¸€ä¸ªæœåŠ¡è¿˜ä¸è¡Œï¼Œä½ éœ€è¦å‘Šè¯‰æˆ‘ç«¯å£ï¼Œå› ä¸ºæœåŠ¡çš„å®Œæ•´åœ°å€è‚¯å®šåŒ…æ‹¬ç«¯å£ã€‚<br>ä¸‹é¢çš„listençš„æ„æ€<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line">http.createServer(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æˆ‘æ¥äº†'</span>)</span><br><span class="line">&#125;).listen(<span class="number">8000</span>)</span><br></pre></td></tr></table></figure></p><h4 id="res-req"><a href="#res-req" class="headerlink" title="res req"></a>res req</h4><p>æ¥ç€ä¸Šé¢ï¼Œæ—¢ç„¶è®¿é—®äº†æœåŠ¡å™¨ï¼Œé‚£ä¹ˆè‚¯å®šè¦ç»™ä¸€å®šå“åº”,ä¸ç„¶è®¿é—®è€…å°±ä¼šä¸€è‡´è®¿é—®ä¸”ç­‰å¾…ã€‚<br>å› æ­¤å°±æœ‰äº†reqï¼Œresã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> file = req.url.replace(<span class="string">'/'</span>,<span class="string">''</span>) || <span class="string">'test.html'</span></span><br><span class="line">    fs.readFile(path.resolve(__dirname,file), (err, data)=&gt;&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.writeHead(<span class="number">404</span>);</span><br><span class="line">            res.end(<span class="string">'404 not found'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        res.end(data)<span class="comment">//å¯ä»¥è¯»å–å›¾ç‰‡æˆ–html</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).listen(port, ()=&gt;<span class="built_in">console</span>.log(<span class="string">`open port <span class="subst">$&#123;port&#125;</span>`</span>))</span><br></pre></td></tr></table></figure></p><h4 id="åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºhtmlæˆ–å›¾ç‰‡"><a href="#åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºhtmlæˆ–å›¾ç‰‡" class="headerlink" title="åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºhtmlæˆ–å›¾ç‰‡"></a>åœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤ºhtmlæˆ–å›¾ç‰‡</h4><p>å‚è€ƒã€Šres reqã€‹ï¼Œdemoçœ‹å‚è€ƒé‡Œé¢ã€‚</p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p><a href>å›¾ç‰‡å’Œhtml æµè§ˆå™¨æ˜¾ç¤º</a></p><h3 id="è®¾ç½®ä¸åŒå“åº”å¤´ç±»å‹ï¼Œhtmlæ˜¾ç¤ºä¸ä¸€æ ·"><a href="#è®¾ç½®ä¸åŒå“åº”å¤´ç±»å‹ï¼Œhtmlæ˜¾ç¤ºä¸ä¸€æ ·" class="headerlink" title="è®¾ç½®ä¸åŒå“åº”å¤´ç±»å‹ï¼Œhtmlæ˜¾ç¤ºä¸ä¸€æ ·"></a>è®¾ç½®ä¸åŒå“åº”å¤´ç±»å‹ï¼Œhtmlæ˜¾ç¤ºä¸ä¸€æ ·</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> file = req.url.replace(<span class="string">'/'</span>,<span class="string">''</span>) || <span class="string">'test.html'</span></span><br><span class="line">    fs.readFile(path.resolve(__dirname,file), (err, data)=&gt;&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.writeHead(<span class="number">404</span>);</span><br><span class="line">            res.end(<span class="string">'404 not found'</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.writeHead(<span class="number">200</span>,&#123;</span><br><span class="line">                <span class="comment">// "Content-Type":"text/plain;charset=utf-8"//ä½œä¸ºtxtæ–‡ä»¶è¿”å›</span></span><br><span class="line">                <span class="string">"Content-Type"</span>:<span class="string">"text/html;charset=utf-8"</span><span class="comment">//ä½œä¸ºhtmlæ–‡ä»¶è¿”å›</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.end(data)</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;).listen(port, ()=&gt;<span class="built_in">console</span>.log(<span class="string">`open port <span class="subst">$&#123;port&#125;</span>`</span>))</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯ä¸€ä¸ª<a href>demo  å‚çœ‹ typeApp.js</a>ï¼Œè¡¨ç°äº†ä¸åŒå“åº”å¤´ç±»å‹åï¼Œhtmlåœ¨æµè§ˆå™¨ä¸Šæ˜¾ç¤ºæ•ˆæœä¸ä¸€æ ·ï¼Œä¸€ä¸ªä»¥txtæ–‡ä»¶æ¸²æŸ“ï¼Œä¸€ä¸ªä»¥htmlå®é™…è§£ææ•ˆæœæ¸²æŸ“</p><h3 id="res-writeHeadè®¾ç½®å“åº”å¤´"><a href="#res-writeHeadè®¾ç½®å“åº”å¤´" class="headerlink" title="res.writeHeadè®¾ç½®å“åº”å¤´"></a>res.writeHeadè®¾ç½®å“åº”å¤´</h3><p>å‚è€ƒã€Šè®¾ç½®ä¸åŒå“åº”å¤´ç±»å‹ï¼Œhtmlæ˜¾ç¤ºä¸ä¸€æ ·ã€‹</p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="è·¯å¾„ä¸­çš„-ä¸"><a href="#è·¯å¾„ä¸­çš„-ä¸" class="headerlink" title="è·¯å¾„ä¸­çš„ ** ä¸ *"></a>è·¯å¾„ä¸­çš„ <code>**</code> ä¸ <code>*</code></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">"src/**/*.test.tsx",// ä¸¤ä¸ª**åŒ¹é…ä»»æ„é•¿åº¦ä»»æ„è·¯å¾„ä¸‹</span><br><span class="line">"src/**/*.stories.tsx",// ä¸€ä¸ª* æ˜¯é€šé…ç¬¦</span><br></pre></td></tr></table></figure><h3 id="ç¥å¥‡çš„ç›¸å¯¹è·¯å¾„"><a href="#ç¥å¥‡çš„ç›¸å¯¹è·¯å¾„" class="headerlink" title="ç¥å¥‡çš„ç›¸å¯¹è·¯å¾„"></a>ç¥å¥‡çš„ç›¸å¯¹è·¯å¾„</h3><h4 id="æŠ¥é”™not-suce-file"><a href="#æŠ¥é”™not-suce-file" class="headerlink" title="æŠ¥é”™not suce file"></a>æŠ¥é”™not suce file</h4><p>å·²çŸ¥ test.mdçš„è·¯å¾„ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sequelize-demo/src/test.md</span><br></pre></td></tr></table></figure></p><p>å·²çŸ¥ app.jsçš„è·¯å¾„ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sequelize-demo/src/app.js</span><br></pre></td></tr></table></figure></p><p>app.jsçš„ä»£ç ä¸ºï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line">fs.readFile(<span class="string">'./test.md'</span>,(err,data)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆåœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node ./sequelize-demo/src/app.js</span><br></pre></td></tr></table></figure></p><p>ä¼šæŠ¥é”™ æ‰¾ä¸åˆ° ./test.md è¿™ä¸ªæ–‡ä»¶ã€‚</p><h4 id="è§£å†³æ–¹å¼ä¸€"><a href="#è§£å†³æ–¹å¼ä¸€" class="headerlink" title="è§£å†³æ–¹å¼ä¸€"></a>è§£å†³æ–¹å¼ä¸€</h4><p>åŸæ¥æ˜¯å› ä¸ºreadFileçš„ç›¸å¯¹åœ°å€ï¼Œä¸æ˜¯ä»¥ app.jsæ‰€åœ¨ç›®å½•ä½œä¸ºå‚è€ƒçš„ï¼Œè€Œæ˜¯ä»¥æ‰§è¡Œnodeå‘½ä»¤çš„ç›®å½•ä¸ºå‚è€ƒçš„ã€‚<br>å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œnodeå‘½ä»¤ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹readFileåœ°å€å¦‚ä¸‹ï¼Œå°±å¯ä»¥æ­£å¸¸äº†ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">'./sequelize-demo/src/test.md'</span>,(err,data)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="è§£å†³æ–¹å¼äºŒ-æ¨è"><a href="#è§£å†³æ–¹å¼äºŒ-æ¨è" class="headerlink" title="è§£å†³æ–¹å¼äºŒ(æ¨è)"></a>è§£å†³æ–¹å¼äºŒ(æ¨è)</h4><p>ä¸Šé¢çš„ç›¸å¯¹åœ°å€å®¹æ˜“å‡ºé—®é¢˜ï¼Œåœ¨æ­¤æ¨èä»¥ç»å¯¹è·¯å¾„æ¥å¤„ç†ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(path.resolve(__dirname,<span class="string">'test.md'</span>),(err,data)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="å¦‚æœåŒåœ¨æ ¹ç›®å½•å°±æ²¡æœ‰æ­¤å¼‚å¸¸"><a href="#å¦‚æœåŒåœ¨æ ¹ç›®å½•å°±æ²¡æœ‰æ­¤å¼‚å¸¸" class="headerlink" title="å¦‚æœåŒåœ¨æ ¹ç›®å½•å°±æ²¡æœ‰æ­¤å¼‚å¸¸"></a>å¦‚æœåŒåœ¨æ ¹ç›®å½•å°±æ²¡æœ‰æ­¤å¼‚å¸¸</h4><p>å¦‚æœä¸Šé¢çš„app.jsåœ¨æ ¹ç›®å½•ä¸‹ï¼Œå°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ï¼ŒåŸå› å‚è€ƒã€Šè§£å†³æ–¹å¼ä¸€ã€‹</p><h3 id="JSON-stringifyä¸toStringä½¿ç”¨"><a href="#JSON-stringifyä¸toStringä½¿ç”¨" class="headerlink" title="JSON.stringifyä¸toStringä½¿ç”¨"></a>JSON.stringifyä¸toStringä½¿ç”¨</h3><h4 id="JSON-stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶"><a href="#JSON-stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶" class="headerlink" title="JSON.stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶"></a>JSON.stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(pa,(err,data)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(data))<span class="comment">//&#123;"type":"Buffer","data":[97,98,99]&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())<span class="comment">//abc</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="toStringå¯è¾“å‡ºå­—ç¬¦ä¸²çš„BufferäºŒè¿›åˆ¶æµ"><a href="#toStringå¯è¾“å‡ºå­—ç¬¦ä¸²çš„BufferäºŒè¿›åˆ¶æµ" class="headerlink" title="toStringå¯è¾“å‡ºå­—ç¬¦ä¸²çš„BufferäºŒè¿›åˆ¶æµ"></a>toStringå¯è¾“å‡ºå­—ç¬¦ä¸²çš„BufferäºŒè¿›åˆ¶æµ</h4><p>å¦‚æœæˆ‘ä»¬çŸ¥é“è¿™ä¸ªäºŒè¿›åˆ¶æµBufferæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨toStringæ¥è§£ææˆå­—ç¬¦ä¸²ã€‚</p><h4 id="toStringè¾“å‡ºæ­£å¸¸å†…å®¹"><a href="#toStringè¾“å‡ºæ­£å¸¸å†…å®¹" class="headerlink" title="toStringè¾“å‡ºæ­£å¸¸å†…å®¹"></a>toStringè¾“å‡ºæ­£å¸¸å†…å®¹</h4><p>å‚è€ƒä¸Šé¢ã€ŠJSON.stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶ã€‹ã€ŠtoStringå¯è¾“å‡ºå­—ç¬¦ä¸²çš„BufferäºŒè¿›åˆ¶æµã€‹</p><h4 id="è¯»å–æ–‡ä»¶å†…å®¹æ¨ètoString"><a href="#è¯»å–æ–‡ä»¶å†…å®¹æ¨ètoString" class="headerlink" title="è¯»å–æ–‡ä»¶å†…å®¹æ¨ètoString"></a>è¯»å–æ–‡ä»¶å†…å®¹æ¨ètoString</h4><p>å‚è€ƒä¸Šé¢ã€ŠJSON.stringifyè¾“å‡ºå†…å®¹çš„äºŒè¿›åˆ¶ã€‹</p><h3 id="requireçš„è·¯å¾„"><a href="#requireçš„è·¯å¾„" class="headerlink" title="requireçš„è·¯å¾„"></a>requireçš„è·¯å¾„</h3><ul><li>å¦‚æœæœ‰è·¯å¾„ï¼Œå°±å»è·¯å¾„é‡Œé¢æ‰¾   â€“ require(â€˜./ph.jsâ€™)</li><li>æ²¡æœ‰è·¯å¾„å°±å» node_modulesé‡Œé¢æ‰¾  â€“ require(â€˜./reactâ€™)</li><li>å¦‚æœnode_modulesæ²¡æœ‰ï¼Œå°±å»nodeçš„å…¨å±€å®‰è£…ç›®å½•æ‰¾</li></ul><h3 id="webpackç¼–è¯‘æ—¶å¯ä½¿ç”¨fsï¼Œé¡µé¢jsä¸­ä¸è¡Œï¼Œwhyï¼Ÿ"><a href="#webpackç¼–è¯‘æ—¶å¯ä½¿ç”¨fsï¼Œé¡µé¢jsä¸­ä¸è¡Œï¼Œwhyï¼Ÿ" class="headerlink" title="webpackç¼–è¯‘æ—¶å¯ä½¿ç”¨fsï¼Œé¡µé¢jsä¸­ä¸è¡Œï¼Œwhyï¼Ÿ"></a>webpackç¼–è¯‘æ—¶å¯ä½¿ç”¨fsï¼Œé¡µé¢jsä¸­ä¸è¡Œï¼Œwhyï¼Ÿ</h3><p>åŸæ¥ï¼Œnode script è¿›è¡Œwebpackç¼–è¯‘çš„æ—¶å€™ï¼Œå…¶å®æ˜¯åŸºäºnodeç¯å¢ƒçš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"start"</span>: <span class="string">"npx webpack-dev-server --config webpack.dev.js"</span></span><br></pre></td></tr></table></figure></p><p>node script æœ¬èº«å°±æ˜¯åŸºäºnodeç¯å¢ƒçš„ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨webpack.dev.jsä¸­ä½¿ç”¨nodeçš„å„ç§æ¨¡å—ã€‚<br>ç”±webpackç¼–è¯‘å‡ºæ¥çš„htmlï¼Œæ”¾åœ¨webpackçš„devServeæœåŠ¡å™¨ä¸Šï¼Œæˆ‘ä»¬æ‰å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ã€‚<br>webpackç¼–è¯‘å®Œåä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡ï¼Œå› æ­¤ä»æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®é¡µé¢å¼€å§‹ï¼Œæˆ‘ä»¬æ‰€ä½¿ç”¨çš„ç¯å¢ƒå·²ç»ä¸æ˜¯nodeäº†ï¼Œä»ç¼–è¯‘å®Œåï¼Œnodeçš„å·¥ä½œåŸºæœ¬ä¸Šå°±ç»“æŸäº†ã€‚<br>è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„htmlï¼Œå…¶è¿è¡Œç¯å¢ƒæ˜¯æµè§ˆå™¨ï¼Œénodeç¯å¢ƒï¼Œå› æ­¤htmlä¸èƒ½è·å–nodeæ¨¡å—çš„å„ç§åŒ…ï¼Œå½“ç„¶äº†ï¼Œä¹Ÿä¸æ’é™¤webpackå°†nodeçš„ä¸€äº›åŒ…å†…ç½®ç»™htmlï¼Œ<br>ä¸è¿‡ä»ç›®å‰çœ‹ï¼Œfsæ˜¯æ²¡æœ‰å†…ç½®åˆ°htmlä¸Šçš„ã€‚</p><p>å°ç»“ä¸‹ï¼šç¼–è¯‘ç¯å¢ƒæ˜¯è¿è¡Œåœ¨nodeä¸Šï¼Œhtmlæ–‡ä»¶æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šï¼Œå‰è€…å…·å¤‡nodeå„ä¸ªæ¨¡å—ï¼Œåè€…ä¸å…·å¤‡ã€‚</p><h3 id="ä¸ºä»€ä¹ˆå‰ç«¯å·¥ç¨‹åŒ–éƒ½ä½¿ç”¨node"><a href="#ä¸ºä»€ä¹ˆå‰ç«¯å·¥ç¨‹åŒ–éƒ½ä½¿ç”¨node" class="headerlink" title="ä¸ºä»€ä¹ˆå‰ç«¯å·¥ç¨‹åŒ–éƒ½ä½¿ç”¨node"></a>ä¸ºä»€ä¹ˆå‰ç«¯å·¥ç¨‹åŒ–éƒ½ä½¿ç”¨node</h3><h4 id="nodeè®©jsè„±ç¦»æµè§ˆå™¨è¿è¡Œæˆä¸ºå¯èƒ½"><a href="#nodeè®©jsè„±ç¦»æµè§ˆå™¨è¿è¡Œæˆä¸ºå¯èƒ½" class="headerlink" title="nodeè®©jsè„±ç¦»æµè§ˆå™¨è¿è¡Œæˆä¸ºå¯èƒ½"></a>nodeè®©jsè„±ç¦»æµè§ˆå™¨è¿è¡Œæˆä¸ºå¯èƒ½</h4><p>å‰ç«¯å·¥ç¨‹åŒ–éœ€è¦å¯¹å‰ç«¯æ–‡ä»¶è¿›è¡Œå‹ç¼©æ‰“åŒ…ï¼Œéœ€è¦æä¾›å‰ç«¯å¼€å‘ç¯å¢ƒæˆ–å®æ—¶ç¼–è¯‘çš„å¼€å‘æ¨¡å¼ã€‚<br>è¦å®ç°ä¸Šé¢çš„æ–‡ä»¶å‹ç¼©æ‰“åŒ…ï¼Œå°±å¿…ç„¶ç”¨åˆ°å¯¹æ–‡ä»¶çš„è¯»å†™èƒ½åŠ›ï¼›<br>è¦æä¾›å¼€å‘ç¯å¢ƒæˆ–æ¨¡å¼ï¼Œå°±å¿…ç„¶éœ€è¦å¯åŠ¨æœåŠ¡ï¼›<br>å¯¹æ–‡ä»¶çš„è¯»å†™ï¼Œä½ å¯ä»¥ä½¿ç”¨å¾ˆå¤šå…¶ä»–è¯­è¨€ï¼Œæ¯”å¦‚javaç­‰ç­‰ã€‚<br>ä½†ä¸€ä¸ªå‰ç«¯äººå‘˜è‚¯å®šå¸Œæœ›jsèƒ½å¤Ÿåšåˆ°åº•å±‚æ“ä½œï¼Œè€Œnodeæ»¡è¶³äº†è¿™ç‚¹ã€‚<br>åŸæœ¬jsæ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„ä¸€é—¨è¯­è¨€ï¼Œè„±ç¦»æµè§ˆå™¨å°±èƒ½è¿è¡Œäº†ã€‚<br>è€Œä¸Šé¢çš„ç¼–è¯‘æˆ–è€…æä¾›æœåŠ¡å™¨åŠŸèƒ½ï¼Œéƒ½æ˜¯åœ¨éæµè§ˆå™¨ç¯å¢ƒä¸‹çš„ã€‚<br>å› æ­¤åœ¨nodeå‡ºç°å‰ï¼Œä¸Šé¢çš„è¿™äº›åŠŸèƒ½è‹¥ä½¿ç”¨jså®Œå…¨æ˜¯ä¸å¯èƒ½ã€‚</p><h4 id="nodeä¸ºjsæä¾›äº†å¾ˆå¤šåº•å±‚æ“ä½œèƒ½åŠ›"><a href="#nodeä¸ºjsæä¾›äº†å¾ˆå¤šåº•å±‚æ“ä½œèƒ½åŠ›" class="headerlink" title="nodeä¸ºjsæä¾›äº†å¾ˆå¤šåº•å±‚æ“ä½œèƒ½åŠ›"></a>nodeä¸ºjsæä¾›äº†å¾ˆå¤šåº•å±‚æ“ä½œèƒ½åŠ›</h4><p>nodeæä¾›äº†fsæ–‡ä»¶æ“ä½œèƒ½åŠ›ï¼Œæä¾›äº†httpæœåŠ¡å™¨èƒ½åŠ›ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œå¦‚æ“ä½œç³»ç»Ÿå†…å­˜ç­‰ç­‰ã€‚<br>åœ¨nodeç¯å¢ƒä¸‹ï¼Œjså…·å¤‡äº†æ“ä½œåº•å±‚çš„èƒ½åŠ›ï¼Œè€Œè¿™äº›åœ¨æµè§ˆå™¨ä¸‹jsæ‰€ä¸å…·å¤‡çš„ã€‚</p><h4 id="å¼ºå¤§çš„npmç”Ÿæ€"><a href="#å¼ºå¤§çš„npmç”Ÿæ€" class="headerlink" title="å¼ºå¤§çš„npmç”Ÿæ€"></a>å¼ºå¤§çš„npmç”Ÿæ€</h4><p>nodeæä¾›äº†å¼ºå¤§çš„npmç”Ÿæ€ï¼Œå„ç§é«˜æ‰‹å¯ä»¥å¼€å‘ä¸€ä¸ªnpmåŒ…ï¼Œç„¶ååœ¨nodeæˆ–jsä¸­è¿è¡Œã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>åŸºäºä»¥ä¸Šï¼Œæ‰€ä»¥ä¸€èˆ¬å‰ç«¯å·¥ç¨‹åŒ–ï¼ˆç¼–è¯‘é˜¶æ®µï¼‰ï¼ŒåŒ…æ‹¬jsçš„åç«¯å·¥ç¨‹åŒ–åŸºæœ¬ä¸Šéƒ½æ˜¯åŸºäºnode(åŸºäºnpm)</p><h4 id="nodeåç«¯å·¥ç¨‹çš„ä¸šåŠ¡jséƒ½æœ‰nodeåŠŸèƒ½"><a href="#nodeåç«¯å·¥ç¨‹çš„ä¸šåŠ¡jséƒ½æœ‰nodeåŠŸèƒ½" class="headerlink" title="nodeåç«¯å·¥ç¨‹çš„ä¸šåŠ¡jséƒ½æœ‰nodeåŠŸèƒ½"></a>nodeåç«¯å·¥ç¨‹çš„ä¸šåŠ¡jséƒ½æœ‰nodeåŠŸèƒ½</h4><p>ä¸å‰ç«¯å·¥ç¨‹åŒ–ä¸ä¸€æ ·çš„æ˜¯ï¼Œå‰ç«¯ä¸€èˆ¬åªæœ‰ç¼–è¯‘é˜¶æ®µçš„ä»£ç å…·æœ‰nodeçš„ç¯å¢ƒã€‚<br>nodeåç«¯å·¥ç¨‹ï¼ŒåŒ…æ‹¬åç«¯å·¥ç¨‹çš„ç¼–è¯‘ä»¥åŠåç«¯å·¥ç¨‹çš„æ¥å£ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œéƒ½æ˜¯è¿è¡Œåœ¨nodeç¯å¢ƒä¸‹çš„ï¼Œéƒ½èƒ½ä½¿ç”¨nodeæ¨¡å—ã€‚<br><strong>åç«¯å·¥ç¨‹ä¸­çš„ä»£ç ï¼Œæ— è®ºç¼–è¯‘å’Œè¿è¡Œéƒ½æ˜¯åœ¨nodeç¯å¢ƒå†…ï¼Œéƒ½å…·æœ‰nodeæ¨¡å—èƒ½åŠ›</strong>ï¼Œå¦‚æœä¸æ˜¯è¿™æ ·ï¼Œä¸ºä»€ä¹ˆåç«¯èƒ½å¤Ÿåˆ°å¤„ä½¿ç”¨expressæˆ–koaæ¥å†™æ¥å£é€»è¾‘å‘¢ã€‚å› ä¸ºexpressæ˜¯ä¸€ä¸ªæŠ½è±¡äº†åŸç”Ÿnodejsçš„æ¡†æ¶ã€‚</p><h2 id="nodeè°ƒè¯•"><a href="#nodeè°ƒè¯•" class="headerlink" title="nodeè°ƒè¯•"></a>nodeè°ƒè¯•</h2><p>å‚è€ƒå¦å¤–ä¸€ç¯‡åšå®¢ã€Švscodeç¬”è®° - vscodeè°ƒè¯•ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0åˆ°1å¿«é€Ÿæ„å»ºè‡ªå·±çš„åå°ç®¡ç†ç³»ç»Ÿ</title>
      <link href="/2020/07/28/end/"/>
      <url>/2020/07/28/end/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºæœ¬ä¿¡æ¯"><a href="#åŸºæœ¬ä¿¡æ¯" class="headerlink" title="åŸºæœ¬ä¿¡æ¯"></a>åŸºæœ¬ä¿¡æ¯</h2><h3 id="mysqlå®‰è£…å’Œä½¿ç”¨"><a href="#mysqlå®‰è£…å’Œä½¿ç”¨" class="headerlink" title="mysqlå®‰è£…å’Œä½¿ç”¨"></a>mysqlå®‰è£…å’Œä½¿ç”¨</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>å®‰è£…çš„è¿‡ç¨‹å¯ä»¥å‚ç…§ç½‘ä¸Šï¼Œä¸è¿‡å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œmysqlä¼šç»™ä½ ä¸€ä¸ªåˆå§‹å¯†ç ï¼Œéœ€è¦è®°ä½ã€‚<br><figure class="image-box">                <img src="/image/end/pd.png" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@localhost: xxxxxxxxx   //root è¶…çº§ç”¨æˆ·ï¼Œ localhost æœ¬åœ°ç¯å¢ƒï¼Œ æœ¬åœ°ç¯å¢ƒä¸‹çš„è¶…çº§ç”¨æˆ·å¯†ç </span><br></pre></td></tr></table></figure></p><h4 id="not-found-æŠ¥é”™"><a href="#not-found-æŠ¥é”™" class="headerlink" title="not found æŠ¥é”™"></a>not found æŠ¥é”™</h4><p>æœ‰ä¸€ä¸ªnot found æŠ¥é”™ï¼Œå¯èƒ½æ˜¯mysqlæ­£åœ¨è¿è¡Œï¼Œåˆ‡æ‰mysqlè¿›ç¨‹å³å¯ï¼Œï¼ˆmacä¸‹ï¼Œæ‰“å¼€åå¥½è®¾ç½®é…ç½®ï¼Œåœ¨åº•éƒ¨å°±ä¼šå‡ºç°mysqlå›¾æ ‡ï¼Œç‚¹å‡»è¿›å»ï¼Œæ‰‹åŠ¨åœæ­¢ï¼‰</p><h4 id="show-databases-æŠ¥é”™é‡ç½®å¯†ç "><a href="#show-databases-æŠ¥é”™é‡ç½®å¯†ç " class="headerlink" title="show databases æŠ¥é”™é‡ç½®å¯†ç "></a>show databases æŠ¥é”™é‡ç½®å¯†ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.</span><br><span class="line">ä¿®æ”¹</span><br></pre></td></tr></table></figure><p>è§£å†³å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/end/1820.jpg" alt title class>                <p></p>            </figure><br><a href="https://www.youtube.com/watch?v=q1UNz5eisN8" target="_blank" rel="noopener">å‚è€ƒ</a></p><h4 id="è®¾ç½®-æ–°-å¯†ç ç›¸å…³"><a href="#è®¾ç½®-æ–°-å¯†ç ç›¸å…³" class="headerlink" title="è®¾ç½®(æ–°)å¯†ç ç›¸å…³"></a>è®¾ç½®(æ–°)å¯†ç ç›¸å…³</h4><p>åƒä¸Šé¢çš„å¯†ç è®¾ç½®å¥½åï¼Œéœ€è¦è®¾ç½®å¯†ç çš„ä½¿ç”¨æœŸé™ï¼Œå¹¶ä¸”åˆ·æ–°mysqlå¯†ç ä¿¡æ¯ï¼Œæ‰èƒ½ä½¿å¾—æ–°å¯†ç ç”Ÿæ•ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD = PASSWORD(&apos;æ–°å¯†ç &apos;);  //ä¸Šé¢çš„è®¾ç½®æ–°å¯†ç </span><br><span class="line">ALTER USER &apos;root&apos;@&apos;localhost&apos; PASSWORD EXPIRE NEVER; //è®¾ç½®æœ¬åœ°ç¯å¢ƒä¸‹çš„è¶…çº§ç”¨æˆ·root å¯†ç çš„ä½¿ç”¨æœŸé™æ˜¯æ°¸è¿œä¸è¿‡æœŸ(never)ã€‚</span><br><span class="line">FLUSH PRIVILEGES;//åˆ·æ–°ç‰¹æƒï¼Œè®©åˆšæ‰è®¾ç½®çš„å¯†ç ç›¸å…³ç”Ÿæ•ˆ</span><br></pre></td></tr></table></figure></p><h4 id="mysqlå‘½ä»¤ä»¥åˆ†å·ç»“å°¾"><a href="#mysqlå‘½ä»¤ä»¥åˆ†å·ç»“å°¾" class="headerlink" title="mysqlå‘½ä»¤ä»¥åˆ†å·ç»“å°¾"></a>mysqlå‘½ä»¤ä»¥åˆ†å·ç»“å°¾</h4><p>å¦‚æœä¸ä»¥åˆ†å·ç»“å°¾ï¼Œmysqlåˆ™ä¼šè®¤ä¸ºå‘½ä»¤è¿˜æœªæ‰§è¡Œå®Œæˆï¼Œå°†ä¸äºˆæ‰§è¡Œã€‚</p><h4 id="ç™»é™†mysqlè´¦æˆ·-root"><a href="#ç™»é™†mysqlè´¦æˆ·-root" class="headerlink" title="ç™»é™†mysqlè´¦æˆ·(root)"></a>ç™»é™†mysqlè´¦æˆ·(root)</h4><p>mysqlé‡Œé¢å¯èƒ½æœ‰å¾ˆå¤šè´¦å·ï¼Œå› æ­¤éœ€è¦ç™»é™†mysqlè´¦å·ã€‚<br>å‘½ä»¤å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p  //user root ä½¿ç”¨-på¯†ç ç™»é™†</span><br><span class="line">//è¾“å…¥ä¸Šé¢è®¾ç½®çš„ rootçš„è´¦æˆ·å¯†ç </span><br></pre></td></tr></table></figure></p><h3 id="ä¿®æ”¹koaé¡¹ç›®ä¸‹çš„secure-jsç”¨æˆ·åå’Œå¯†ç "><a href="#ä¿®æ”¹koaé¡¹ç›®ä¸‹çš„secure-jsç”¨æˆ·åå’Œå¯†ç " class="headerlink" title="ä¿®æ”¹koaé¡¹ç›®ä¸‹çš„secure.jsç”¨æˆ·åå’Œå¯†ç "></a>ä¿®æ”¹koaé¡¹ç›®ä¸‹çš„secure.jsç”¨æˆ·åå’Œå¯†ç </h3><p>å¦‚æœä¸ä¿®æ”¹ï¼Œnpmå¯åŠ¨lin-cms-koa-masterå°±ä¼šæŠ¥é”™ã€‚æ— æ³•ä¸æ•°æ®åº“é“¾æ¥ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lin-cms-koa-master/app/config/secure.js</span></span><br><span class="line">    database: <span class="string">'lin_cms'</span>,<span class="comment">//éœ€è¦å°†ä¸­æ–œæ æ”¹æˆä¸‹æ–œæ </span></span><br><span class="line">    host: <span class="string">'localhost'</span>,</span><br><span class="line">    dialect: <span class="string">'mysql'</span>,</span><br><span class="line">    port: <span class="number">3306</span>,</span><br><span class="line">    username: <span class="string">'root'</span>,</span><br><span class="line">    password: <span class="string">'xxx'</span>, <span class="comment">//æ•°æ®åº“ä¸­å¯†ç </span></span><br><span class="line">    logging: <span class="literal">false</span>,</span><br><span class="line">    timezone: <span class="string">'+08:00'</span></span><br></pre></td></tr></table></figure></p><h3 id="é¡¹ç›®å¯¼å…¥æ•°æ®åº“"><a href="#é¡¹ç›®å¯¼å…¥æ•°æ®åº“" class="headerlink" title="é¡¹ç›®å¯¼å…¥æ•°æ®åº“"></a>é¡¹ç›®å¯¼å…¥æ•°æ®åº“</h3><h4 id="mysqlçš„sourceå‘½ä»¤"><a href="#mysqlçš„sourceå‘½ä»¤" class="headerlink" title="mysqlçš„sourceå‘½ä»¤"></a>mysqlçš„sourceå‘½ä»¤</h4><p><a href="https://doc.cms.talelin.com/start/koa/" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒ</a><br>ä¸»è¦ä½¿ç”¨mysqlçš„sourceå‘½ä»¤æ¥åšï¼ŒåæœŸå¯ä»¥äº†è§£ä¸‹<br><figure class="image-box">                <img src="/image/end/db.png" alt title class>                <p></p>            </figure></p><h3 id="navicat-mysqlå›¾å½¢åŒ–å·¥å…·"><a href="#navicat-mysqlå›¾å½¢åŒ–å·¥å…·" class="headerlink" title="navicat - mysqlå›¾å½¢åŒ–å·¥å…·"></a>navicat - mysqlå›¾å½¢åŒ–å·¥å…·</h3><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p><a href="https://www.macwk.com/soft/navicat-premium" target="_blank" rel="noopener">ç ´è§£ç‰ˆå®‰è£…</a><br><figure class="image-box">                <img src="/image/end/db.png" alt title class>                <p></p>            </figure></p><h4 id="æ“ä½œmysql"><a href="#æ“ä½œmysql" class="headerlink" title="æ“ä½œmysql"></a>æ“ä½œmysql</h4><p>å¯é€šè¿‡è¿™ä¸ªå›¾å½¢åŒ–å·¥å…·ï¼Œå¯¹mysqlè¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œå®æ—¶ç”Ÿæ•ˆã€‚</p><h3 id="sequelize-æ¡¥æ¥koaä¸mysqlçš„å·¥å…·"><a href="#sequelize-æ¡¥æ¥koaä¸mysqlçš„å·¥å…·" class="headerlink" title="sequelize - æ¡¥æ¥koaä¸mysqlçš„å·¥å…·"></a>sequelize - æ¡¥æ¥koaä¸mysqlçš„å·¥å…·</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">"dependencies": &#123;</span><br><span class="line">   "@koa/cors": "^2.2.3",</span><br><span class="line">   "koa": "^2.7.0",</span><br><span class="line">   "koa-bodyparser": "^4.2.1",</span><br><span class="line">   "koa-mount": "^4.0.0",</span><br><span class="line">   "koa-static": "^5.0.0",</span><br><span class="line">   "lin-mizar": "^0.3.5",</span><br><span class="line">   "mysql2": "^2.1.0",</span><br><span class="line">   "sequelize": "^5.21.13",//</span><br><span class="line">   "validator": "^13.1.1"</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="postè¯·æ±‚çš„æ¼”å˜"><a href="#postè¯·æ±‚çš„æ¼”å˜" class="headerlink" title="postè¯·æ±‚çš„æ¼”å˜"></a>postè¯·æ±‚çš„æ¼”å˜</h2><h3 id="ä¼ ç»Ÿéæƒé™æ–¹å¼"><a href="#ä¼ ç»Ÿéæƒé™æ–¹å¼" class="headerlink" title="ä¼ ç»Ÿéæƒé™æ–¹å¼"></a>ä¼ ç»Ÿéæƒé™æ–¹å¼</h3><p>ä»£ç ä¸»è¦æ”¾ç½®äº <code>default-post</code>åˆ†æ”¯ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddContentValidator</span> <span class="keyword">extends</span> <span class="title">LinValidator</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">this</span>.image = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å†…å®¹å°é¢ä¸èƒ½ä¸ºç©º'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.type = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å†…å®¹ç±»å‹ä¸èƒ½ä¸ºç©º'</span>),</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isInt'</span>, <span class="string">'å†…å®¹ç±»å‹idå¿…é¡»æ˜¯æ•°å­—'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.title = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å†…å®¹æ ‡é¢˜ä¸èƒ½ä¸ºç©º'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.content = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å†…å®¹ä»‹ç»ä¸èƒ½ä¸ºç©º'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.url = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isOptional'</span>),</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isURL'</span>, <span class="string">'å†…å®¹å¤–é“¾å¿…é¡»æ˜¯åˆæ³•urlåœ°å€'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.pubdate = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å‘å¸ƒä¸èƒ½ä¸ºç©º'</span>),</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isISO8601'</span>, <span class="string">'å‘å¸ƒæ—¥æœŸæ ¼å¼ä¸æ­£ç¡®'</span>)</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">this</span>.status = [</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isNotEmpty'</span>, <span class="string">'å†…å®¹æœ‰æ•ˆçŠ¶æ€æœªæŒ‡å®š'</span>),</span><br><span class="line">      <span class="keyword">new</span> Rule(<span class="string">'isInt'</span>, <span class="string">'å†…å®¹æœ‰æ•ˆçŠ¶æ€æ ‡è¯†ä¸æ­£ç¡®'</span>)</span><br><span class="line">    ];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AddContentValidator&#125; <span class="keyword">from</span> <span class="string">'../../validator/content'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> contentApi = <span class="keyword">new</span> LinRouter(&#123;</span><br><span class="line">  prefix: <span class="string">'/v1/content'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">contentApi.post(<span class="string">'/'</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> v = <span class="keyword">await</span> <span class="keyword">new</span> AddContentValidator().validate(ctx);</span><br><span class="line">  <span class="keyword">return</span> ctx.json(v.get(<span class="string">'body'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>postè¯·æ±‚<br>url:<code>http://localhost:5000/v1/content</code><br>bodyï¼š<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        <span class="attr">"image"</span>: <span class="string">"https://www.imooc.com/video/21672"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="string">"100"</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"ä¸ƒæœˆ"</span>,</span><br><span class="line">        <span class="attr">"content"</span>: <span class="string">"ä¸ƒæœˆçš„ä¸‰ä¼å¤©"</span>,</span><br><span class="line">        <span class="attr">"pubdate"</span>: <span class="string">"2020-05-20"</span>,</span><br><span class="line">        <span class="attr">"status"</span>: <span class="string">"1"</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/end/post.jpg" alt title class>                <p></p>            </figure><h3 id="æƒé™éªŒè¯æ–¹å¼"><a href="#æƒé™éªŒè¯æ–¹å¼" class="headerlink" title="æƒé™éªŒè¯æ–¹å¼"></a>æƒé™éªŒè¯æ–¹å¼</h3><h4 id="é…ç½®è¯´æ˜"><a href="#é…ç½®è¯´æ˜" class="headerlink" title="é…ç½®è¯´æ˜"></a>é…ç½®è¯´æ˜</h4><p>lin-cmsæ¡†æ¶å°è£…å¥½äº†æƒé™éªŒè¯ï¼Œåªéœ€è¦å°†ä¸Šé¢è¯·æ±‚çš„postæ”¹ä¸ºlinPostå³å¯ã€‚<br>ä»¥ä¸‹è¯´æ˜ï¼Œå¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> contentApi = <span class="keyword">new</span> LinRouter(&#123;</span><br><span class="line">  prefix: <span class="string">'/v1/content'</span></span><br><span class="line">&#125;);</span><br><span class="line">contentApi.linPost(</span><br><span class="line">  <span class="string">'addContent'</span>,   <span class="comment">//è¯·æ±‚è¿™ä¸ªäº‹ä»¶çš„å”¯ä¸€idï¼Œå¯éšæ„å®šä¹‰ï¼Œä¿æŒå”¯ä¸€å³å¯</span></span><br><span class="line">  <span class="string">'/'</span>,   <span class="comment">//è¯·æ±‚çš„è·¯ç”±</span></span><br><span class="line">  &#123;</span><br><span class="line">    permission: <span class="string">'æ·»åŠ æœŸåˆŠå†…å®¹'</span>,     <span class="comment">// éœ€è¦ä»€ä¹ˆæƒé™</span></span><br><span class="line">    <span class="built_in">module</span>: <span class="string">'å†…å®¹ç®¡ç†'</span>,   <span class="comment">//æ˜¯å“ªä¸ªæ¨¡å—çš„æƒé™</span></span><br><span class="line">    mount: <span class="literal">true</span>   <span class="comment">//æƒé™æ˜¯å¦æŒ‚è½½åˆ°å…¨å±€</span></span><br><span class="line">  &#125;,</span><br><span class="line">  groupRequired,   <span class="comment">//å®ˆå«å‡½æ•°  éœ€ç™»é™†ä¸”è¢«æˆäºˆç›¸åº”çš„æƒé™åæ‰å¯è®¿é—®</span></span><br><span class="line">  logger(<span class="string">'&#123;user.username&#125;æ–°å¢äº†æœŸåˆŠå†…å®¹'</span>),   <span class="comment">//ç”¨æˆ·æ“ä½œæ—¥å¿—</span></span><br><span class="line">  <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> v = <span class="keyword">await</span> <span class="keyword">new</span> AddContentValidator().validate(ctx);</span><br><span class="line">    <span class="keyword">await</span> ContentService.addContent(v.get(<span class="string">'body'</span>));</span><br><span class="line">    ctx.success(&#123;</span><br><span class="line">      msg: <span class="string">'æœŸåˆŠå†…å®¹æ–°å¢æˆåŠŸ'</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="ç™»é™†å‰ç«¯é¡µé¢è·å–ä»¤ç‰Œ"><a href="#ç™»é™†å‰ç«¯é¡µé¢è·å–ä»¤ç‰Œ" class="headerlink" title="ç™»é™†å‰ç«¯é¡µé¢è·å–ä»¤ç‰Œ"></a>ç™»é™†å‰ç«¯é¡µé¢è·å–ä»¤ç‰Œ</h4><p>æ‰“å¼€å‰ç«¯é¡µé¢ï¼Œç™»é™†è¿›å»åï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œè·å– è¯·æ±‚å¤´ä¸­çš„Authorizationï¼Œè¿™é‡Œçš„å†…å®¹å°±æ˜¯token ä»¤ç‰Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1OTYzNTkxMzcsImlkZW50aXR5IjoxLCJzY29wZSI6ImxpbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE1OTYzNTU1Mzd9.HYrFWNES78tMGYd6O-Wdb_PBnp7XFGRy1boNIAb1Rkk</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢ä»¤ç‰Œç ä¸­ Bearer æ˜¯å®šä¹‰ä»¤ç‰Œçš„ç±»å‹ï¼Œå› æ­¤ä¸æ˜¯ä»¤ç‰Œç æœ¬èº«ï¼Œå› æ­¤çœŸæ­£çš„ä»¤ç‰Œæ˜¯å»æ‰Beareråçš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1OTYzNTkxMzcsImlkZW50aXR5IjoxLCJzY29wZSI6ImxpbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE1OTYzNTU1Mzd9.HYrFWNES78tMGYd6O-Wdb_PBnp7XFGRy1boNIAb1Rkk</span><br></pre></td></tr></table></figure></p><h4 id="postmanä½¿ç”¨ä»¤ç‰Œè¯·æ±‚"><a href="#postmanä½¿ç”¨ä»¤ç‰Œè¯·æ±‚" class="headerlink" title="postmanä½¿ç”¨ä»¤ç‰Œè¯·æ±‚"></a>postmanä½¿ç”¨ä»¤ç‰Œè¯·æ±‚</h4><p>å¦‚ä¸‹å›¾ï¼Œpostmanä¸­ï¼Œå¸¦ä»¤ç‰Œçš„å’Œä¸å¸¦ä»¤ç‰Œçš„åŒºåˆ«ä¸å¤§ï¼Œå…¶ä»–ç…§æ—§ï¼Œå°±å¢åŠ äº†ä¸€ä¸ªå¦‚ä¸‹çš„tokenï¼Œç”±ä¸Šé¢å¯çŸ¥ï¼Œlin-cmsç”¨çš„æ˜¯bearerç±»å‹tokenï¼Œå› æ­¤å°±ç”¨bearer Token<br><figure class="image-box">                <img src="/image/end/token.jpg" alt title class>                <p></p>            </figure></p><h4 id="æ™®é€šç”¨æˆ·ä¸è¶…çº§ç”¨æˆ·"><a href="#æ™®é€šç”¨æˆ·ä¸è¶…çº§ç”¨æˆ·" class="headerlink" title="æ™®é€šç”¨æˆ·ä¸è¶…çº§ç”¨æˆ·"></a>æ™®é€šç”¨æˆ·ä¸è¶…çº§ç”¨æˆ·</h4><p>å¯ä»¥ä½¿ç”¨è¶…çº§ç”¨æˆ·rootï¼Œåˆ›å»ºä¸€äº›æ™®é€šç”¨æˆ·æµ‹è¯•ç›¸å…³æƒé™çš„é—®é¢˜ï¼Œæ™®é€šç”¨æˆ·ç™»é™†åï¼Œå°†ä»¤ç‰Œç»™postmanï¼Œä¼šå‘ç°ä»¤ç‰Œæƒé™ä¸è¶³ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å‰ç«¯æ¥ç®¡ç†ç”¨æˆ·æƒé™ã€‚<br>å…·ä½“çš„æƒé™ç®¡ç†ï¼Œåœ¨å‰ç«¯é¡¹ç›®ä¸­çš„åˆ†ç»„ç®¡ç†ä¸­ã€‚</p><h2 id="æ—¥å¿—ç®¡ç†"><a href="#æ—¥å¿—ç®¡ç†" class="headerlink" title="æ—¥å¿—ç®¡ç†"></a>æ—¥å¿—ç®¡ç†</h2><p>ä¸ºäº†æŸ¥çœ‹ç”¨æˆ·åšäº†å“ªäº›æ›¾åˆ æ”¹æŸ¥çš„æ“ä½œï¼Œåœ¨æ¯ä¸ªè¯·æ±‚ä¸­ï¼Œä½¿ç”¨loggerï¼Œè¿™æ ·çš„è¯ï¼Œåœ¨å‰ç«¯é¡µé¢ä¸­å°±å¯ä»¥æŸ¥çœ‹åˆ°æ—¥å¿—ä¿¡æ¯ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> contentApi = <span class="keyword">new</span> LinRouter(&#123;</span><br><span class="line">  prefix: <span class="string">'/v1/content'</span></span><br><span class="line">&#125;);</span><br><span class="line">contentApi.linPost(</span><br><span class="line">  <span class="string">'addContent'</span>,   <span class="comment">//è¯·æ±‚è¿™ä¸ªäº‹ä»¶çš„å”¯ä¸€idï¼Œå¯éšæ„å®šä¹‰ï¼Œä¿æŒå”¯ä¸€å³å¯</span></span><br><span class="line">  <span class="string">'/'</span>,   <span class="comment">//è¯·æ±‚çš„è·¯ç”±</span></span><br><span class="line">  &#123;</span><br><span class="line">    permission: <span class="string">'æ·»åŠ æœŸåˆŠå†…å®¹'</span>,     <span class="comment">// éœ€è¦ä»€ä¹ˆæƒé™</span></span><br><span class="line">    <span class="built_in">module</span>: <span class="string">'å†…å®¹ç®¡ç†'</span>,   <span class="comment">//æ˜¯å“ªä¸ªæ¨¡å—çš„æƒé™</span></span><br><span class="line">    mount: <span class="literal">true</span>   <span class="comment">//æƒé™æ˜¯å¦æŒ‚è½½åˆ°å…¨å±€</span></span><br><span class="line">  &#125;,</span><br><span class="line">  groupRequired,   <span class="comment">//å®ˆå«å‡½æ•°  éœ€ç™»é™†ä¸”è¢«æˆäºˆç›¸åº”çš„æƒé™åæ‰å¯è®¿é—®</span></span><br><span class="line">  logger(<span class="string">'&#123;user.username&#125;æ–°å¢äº†æœŸåˆŠå†…å®¹'</span>),   <span class="comment">//ç”¨æˆ·æ“ä½œæ—¥å¿—</span></span><br><span class="line">  <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> v = <span class="keyword">await</span> <span class="keyword">new</span> AddContentValidator().validate(ctx);</span><br><span class="line">    <span class="keyword">await</span> ContentService.addContent(v.get(<span class="string">'body'</span>));</span><br><span class="line">    ctx.success(&#123;</span><br><span class="line">      msg: <span class="string">'æœŸåˆŠå†…å®¹æ–°å¢æˆåŠŸ'</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/end/log.jpg" alt title class>                <p></p>            </figure><h2 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h2><p>lin-cmsæ¡†æ¶ä½¿ç”¨äº†ç»„ä»¶<code>NotFound</code>åšé”™è¯¯å¤„ç†ï¼Œåªè¦ä½¿ç”¨äº†è¿™ä¸ªé”™è¯¯ç ï¼Œæ¡†æ¶å±‚é¢å°±ä¼šç»™ä½ å¤„ç†å¥½æŠ¥é”™ä¿¡æ¯<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">async</span> editMovie (id, params) &#123;</span><br><span class="line">  <span class="keyword">const</span> movie = <span class="keyword">await</span> MovieModel.findByPk(id);</span><br><span class="line">  <span class="keyword">if</span> (!movie) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> NotFound();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> movie.update(&#123; ...params &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;code&quot;: 10040,</span><br><span class="line">    &quot;message&quot;: &quot;ä»¤ç‰Œå¤±æ•ˆ&quot;,</span><br><span class="line">    &quot;request&quot;: &quot;PUT /v1/content/3&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¯·æ±‚æµç¨‹ä¸ç›®å½•"><a href="#è¯·æ±‚æµç¨‹ä¸ç›®å½•" class="headerlink" title="è¯·æ±‚æµç¨‹ä¸ç›®å½•"></a>è¯·æ±‚æµç¨‹ä¸ç›®å½•</h2><h3 id="å‘èµ·è¯·æ±‚ä¸æœ€åç»“æœ"><a href="#å‘èµ·è¯·æ±‚ä¸æœ€åç»“æœ" class="headerlink" title="å‘èµ·è¯·æ±‚ä¸æœ€åç»“æœ"></a>å‘èµ·è¯·æ±‚ä¸æœ€åç»“æœ</h3><p>ä¸‹é¢ä¸¤ç§å›¾æ˜¯å‘èµ·è¯·æ±‚çš„å‚æ•°å’Œæœ€åæ•°æ®åº“ç»“æœã€‚<br>ä¸‹é¢ä¸€å°èŠ‚ä¼šè®²å¦‚ä½•å¤„ç†è¿™ä¸ªè¯·æ±‚æµç¨‹ã€‚<br><figure class="image-box">                <img src="/image/end/post1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/end/post2.jpg" alt title class>                <p></p>            </figure></p><h3 id="å¤„ç†è¯·æ±‚çš„æµç¨‹"><a href="#å¤„ç†è¯·æ±‚çš„æµç¨‹" class="headerlink" title="å¤„ç†è¯·æ±‚çš„æµç¨‹"></a>å¤„ç†è¯·æ±‚çš„æµç¨‹</h3><p>å¦‚ä¸‹å›¾ï¼Œä»å·¦è‡³å³ï¼Œ<br>ä¸šåŠ¡æ¨¡å—ç›®å½•ä¸‹çš„çš„jsä¸­æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè½¬å‘ç»™æœåŠ¡å±‚ç›®å½•ä¸‹çš„jsï¼Œ<br>æœåŠ¡å±‚æœ¬è¯¥è½¬å‘ç»™æ¨¡å‹å±‚ç›®å½•ï¼Œä½†ä¸ºäº†åæœŸæ˜“ç»´æŠ¤æ€§ï¼Œå°†æ¨¡å‹å±‚çš„ä¸šåŠ¡åˆ†å‰²å±‚daoç›®å½•å’Œä¸“é—¨å†™æ¨¡å‹çš„æ¨¡å‹å±‚ã€‚<br>å› æ­¤æœåŠ¡å±‚å°†è¯·æ±‚è½¬å‘ç»™ daoç›®å½•ï¼Œdaoç›®å½•å†è½¬å‘ç»™æ¨¡å‹å±‚ã€‚<br>æ¨¡å‹å±‚è¿æ¥æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„å†™å…¥ã€‚<br><figure class="image-box">                <img src="/image/end/db_flow.jpg" alt title class>                <p></p>            </figure></p><h3 id="service-æœåŠ¡å±‚"><a href="#service-æœåŠ¡å±‚" class="headerlink" title="service æœåŠ¡å±‚"></a>service æœåŠ¡å±‚</h3><p>å¦‚ä¸Šå›¾</p><h3 id="model-æ¨¡å‹"><a href="#model-æ¨¡å‹" class="headerlink" title="model æ¨¡å‹"></a>model æ¨¡å‹</h3><p>æ¨¡å‹éƒ½æ”¾åœ¨ modelç›®å½•ï¼Œä¸€ä¸ªæ¨¡å‹å¯¹åº”ä¸€å¼ è¡¨ã€‚<br>æ¨¡å‹ç›¸å…³çš„é€»è¾‘ï¼Œä¸ºäº†ç»´æŠ¤æ–¹ä¾¿ï¼Œéƒ¨åˆ†å†™åœ¨daoç›®å½•ä¸‹ã€‚</p><h3 id="dao-æ¨¡å‹é€»è¾‘çš„åˆ†å‰²"><a href="#dao-æ¨¡å‹é€»è¾‘çš„åˆ†å‰²" class="headerlink" title="dao æ¨¡å‹é€»è¾‘çš„åˆ†å‰²"></a>dao æ¨¡å‹é€»è¾‘çš„åˆ†å‰²</h3><p>æ¨¡å‹ç›¸å…³çš„é€»è¾‘ï¼Œä¸ºäº†ç»´æŠ¤æ–¹ä¾¿ï¼Œéƒ¨åˆ†å†™åœ¨daoç›®å½•ä¸‹ã€‚</p><h3 id="å…¨å±€æ•°æ®åº“å®ä¾‹ç›®å½•"><a href="#å…¨å±€æ•°æ®åº“å®ä¾‹ç›®å½•" class="headerlink" title="å…¨å±€æ•°æ®åº“å®ä¾‹ç›®å½•"></a>å…¨å±€æ•°æ®åº“å®ä¾‹ç›®å½•</h3><p>å¦‚ä¸Šå›¾ï¼Œæœ€å³ä¾§çš„ db.jsï¼Œé…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ã€‚</p><h2 id="æƒé™ç®¡ç†"><a href="#æƒé™ç®¡ç†" class="headerlink" title="æƒé™ç®¡ç†"></a>æƒé™ç®¡ç†</h2><p>ä¸»è¦çœ‹<a href="https://doc.cms.talelin.com/client/authority.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a><br>å‰ç«¯ä¸»è¦å¯¹èœå•è·¯ç”±ã€æŒ‰é’®åšäº†æƒé™æ§åˆ¶ï¼Œè¡¨ç°å½¢å¼å°±æ˜¯æ˜¾éšä¸disabledç­‰ï¼›<br>åç«¯åŒæ—¶ä¹Ÿå¯¹ç›¸åº”æƒé™å¤„ç†ï¼Œä¸»è¦å¯¹è¯·æ±‚çš„æ¥å£åšæƒé™æ§åˆ¶ã€‚<br>æ³¨æ„çš„æ˜¯å‰åç«¯çš„æƒé™åå­—éœ€è¦çº¦å®šæˆä¸€è‡´ã€‚<br>è¯¦ç»†å¯å‚è€ƒ ä¸Šé¢çš„å®˜æ–¹æ–‡æ¡£ ä»¥åŠ <a href="https://www.imooc.com/video/21690" target="_blank" rel="noopener">æ…•è¯¾ç½‘ - æ ¸å¿ƒæœºåˆ¶æƒé™æ§åˆ¶è”è°ƒ</a></p><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="è¿”å›çš„æ•°æ®ä¸­åŒ…å«æ—¥æœŸæ ¼å¼æ—¶æŠ¥é”™å¤„ç†"><a href="#è¿”å›çš„æ•°æ®ä¸­åŒ…å«æ—¥æœŸæ ¼å¼æ—¶æŠ¥é”™å¤„ç†" class="headerlink" title="è¿”å›çš„æ•°æ®ä¸­åŒ…å«æ—¥æœŸæ ¼å¼æ—¶æŠ¥é”™å¤„ç†"></a>è¿”å›çš„æ•°æ®ä¸­åŒ…å«æ—¥æœŸæ ¼å¼æ—¶æŠ¥é”™å¤„ç†</h3><p>æ¯”å¦‚åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚ä¸‹çš„getè¯·æ±‚ä¼šæŠ¥é”™ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">async</span> getContentList () &#123;</span><br><span class="line">  <span class="keyword">const</span> movieList = <span class="keyword">await</span> MovieDao.getMovieList();</span><br><span class="line">  <span class="keyword">const</span> musicList = <span class="keyword">await</span> MusicDao.getMusicList();</span><br><span class="line">  <span class="keyword">const</span> sentenceList = <span class="keyword">await</span> SentenceDao.getSentenceList();</span><br><span class="line">  <span class="keyword">let</span> res = [];</span><br><span class="line">  res.push.apply(res, movieList);</span><br><span class="line">  res.push.apply(res, musicList);</span><br><span class="line">  res.push.apply(res, sentenceList);</span><br><span class="line">  res.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b.created_at.localeCompare(a.created_at));<span class="comment">//æŠ¥é”™</span></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è§£å†³æ–¹æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//lin-cms-koa-master/app/config/secure.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  db: &#123;</span><br><span class="line">    database: <span class="string">'lin_cms'</span>, <span class="comment">// éœ€è¦ä¸åŸæ¥è§†é¢‘ä¿®æ”¹</span></span><br><span class="line">   ...</span><br><span class="line">   <span class="comment">//å¤„ç†æ—¥æœŸæ ¼å¼</span></span><br><span class="line">    dialectOptions: &#123;</span><br><span class="line">      dateStrings: <span class="literal">true</span>,</span><br><span class="line">      typeCast: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  secret:</span><br><span class="line">    <span class="string">'\x88W\xf09\x91\x07\x98\x89\x87\x96\xa0A\xc68\xf9\xecJJU\x17\xc5V\xbe\x8b\xef\xd7\xd8\xd3\xe6\x95*4'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="postmanä½¿ç”¨"><a href="#postmanä½¿ç”¨" class="headerlink" title="postmanä½¿ç”¨"></a>postmanä½¿ç”¨</h2><h3 id="postè¯·æ±‚"><a href="#postè¯·æ±‚" class="headerlink" title="postè¯·æ±‚"></a>postè¯·æ±‚</h3><figure class="image-box">                <img src="/image/end/post.jpg" alt title class>                <p></p>            </figure><h2 id="navicatä½¿ç”¨"><a href="#navicatä½¿ç”¨" class="headerlink" title="navicatä½¿ç”¨"></a>navicatä½¿ç”¨</h2><h3 id="é€†å‘è¡¨åˆ°æ¨¡å‹"><a href="#é€†å‘è¡¨åˆ°æ¨¡å‹" class="headerlink" title="é€†å‘è¡¨åˆ°æ¨¡å‹"></a>é€†å‘è¡¨åˆ°æ¨¡å‹</h3><p>å¯ä»¥çœ‹è¡¨çš„ç»“æ„<br><figure class="image-box">                <img src="/image/end/navicat_dir.jpg" alt title class>                <p></p>            </figure></p><h2 id="å‰ç«¯éƒ¨åˆ†"><a href="#å‰ç«¯éƒ¨åˆ†" class="headerlink" title="å‰ç«¯éƒ¨åˆ†"></a>å‰ç«¯éƒ¨åˆ†</h2><h3 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><p>é€šè¿‡è®¾ç½®å¦‚ä¸‹æ–‡ä»¶ï¼Œç„¶ååœ¨axiosä¸­ç›´æ¥ä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//lin-cms-vue-demo/.env.development</span><br><span class="line">VUE_APP_BASE_URL = &apos;http://localhost:5000/&apos;</span><br></pre></td></tr></table></figure></p><h2 id="githubä¸å‚è€ƒèµ„æ–™"><a href="#githubä¸å‚è€ƒèµ„æ–™" class="headerlink" title="githubä¸å‚è€ƒèµ„æ–™"></a>githubä¸å‚è€ƒèµ„æ–™</h2><p><a href="https://github.com/demopark/sequelize-docs-Zh-CN/tree/v5" target="_blank" rel="noopener">sequelizeä¸­æ–‡æ–‡æ¡£</a><br><a href="https://www.imooc.com/learn/1247" target="_blank" rel="noopener">æ…•è¯¾ç½‘æ•™ç¨‹</a><br><a href="https://doc.cms.talelin.com/" target="_blank" rel="noopener">lin-cmså®˜æ–¹æ–‡æ¡£</a><br><a href="https://github.com/YeWills/lin-cms-vue-demo" target="_blank" rel="noopener">å‰ç«¯github</a><br><a href="https://github.com/YeWills/lin-cms-koa" target="_blank" rel="noopener">åç«¯github</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackç¬”è®°æ–°</title>
      <link href="/2020/05/09/webpack_new/"/>
      <url>/2020/05/09/webpack_new/</url>
      
        <content type="html"><![CDATA[<h2 id="webpackå¸¸ç”¨çŸ¥è¯†"><a href="#webpackå¸¸ç”¨çŸ¥è¯†" class="headerlink" title="webpackå¸¸ç”¨çŸ¥è¯†"></a>webpackå¸¸ç”¨çŸ¥è¯†</h2><h3 id="webpackå‡ ç§ä½¿ç”¨æ–¹å¼"><a href="#webpackå‡ ç§ä½¿ç”¨æ–¹å¼" class="headerlink" title="webpackå‡ ç§ä½¿ç”¨æ–¹å¼"></a>webpackå‡ ç§ä½¿ç”¨æ–¹å¼</h3><h4 id="cmd-é€šè¿‡æŒ‡ä»¤ç›´æ¥ç¼–è¯‘"><a href="#cmd-é€šè¿‡æŒ‡ä»¤ç›´æ¥ç¼–è¯‘" class="headerlink" title="cmd (é€šè¿‡æŒ‡ä»¤ç›´æ¥ç¼–è¯‘)"></a>cmd (é€šè¿‡æŒ‡ä»¤ç›´æ¥ç¼–è¯‘)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//å¯ç”¨ç”µè„‘å…¨å±€ä¸‹çš„webpack</span><br><span class="line">webpack src/js/index.js -o build/js/built.js --mode=development </span><br><span class="line">//ä½¿ç”¨webpackå¼€å‘æ¨¡å¼ï¼Œwebpack ä»¥ src/js/index.jsä¸ºå…¥å£æ–‡ä»¶æ‰“åŒ…ï¼Œæ‰“åŒ…åè¾“å‡ºåˆ°  build/js/built.js</span><br><span class="line"></span><br><span class="line">//ä½¿ç”¨é¡¹ç›®ä¸‹å®‰è£…çš„webpack</span><br><span class="line">(node) ./node_modules/.bin/webpack ./src/test.js -o build/js/built.js --mode=production</span><br></pre></td></tr></table></figure><h4 id="npm-script"><a href="#npm-script" class="headerlink" title="npm script"></a>npm script</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  //æ‰“å°gitæ—¥å¿—</span><br><span class="line">  &quot;lookGitLog&quot;: &quot;git log -2&quot;,</span><br><span class="line">  //å¯ç”¨ç”µè„‘å…¨å±€ä¸‹çš„webpack</span><br><span class="line">  &quot;startWithGlobal&quot;: &quot;webpack --config webpack.config.js&quot;,</span><br><span class="line">  //é¡¹ç›®ä¸‹å®‰è£…çš„webpack</span><br><span class="line">  &quot;startWithLocal&quot;: &quot;./node_modules/.bin/webpack --config webpack.config.js&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„åŒºåˆ«å…¨å±€ä¸‹webpackä¸é¡¹ç›®ä¸‹webpack"><a href="#æ³¨æ„åŒºåˆ«å…¨å±€ä¸‹webpackä¸é¡¹ç›®ä¸‹webpack" class="headerlink" title="æ³¨æ„åŒºåˆ«å…¨å±€ä¸‹webpackä¸é¡¹ç›®ä¸‹webpack"></a>æ³¨æ„åŒºåˆ«å…¨å±€ä¸‹webpackä¸é¡¹ç›®ä¸‹webpack</h4><p>å¦‚ä¸Šï¼Œä¸åŒçš„webpackä½¿ç”¨æ–¹å¼ä¼šå¼•ç”¨æœ¬åœ°webpackæˆ–è€…é¡¹ç›®ä¸‹webpackï¼Œä»è€Œå¯¼è‡´ä½ æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œå› æ­¤æ³¨æ„å¥½ã€‚</p><h4 id="webpack-dev-server-å¯åŠ¨"><a href="#webpack-dev-server-å¯åŠ¨" class="headerlink" title="webpack-dev-server å¯åŠ¨"></a>webpack-dev-server å¯åŠ¨</h4><p>æ­¤æ—¶ä¸éœ€è¦ä½¿ç”¨webpackï¼Œåªéœ€è¦webpack-dev-serverå³å¯ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">   <span class="string">"start"</span>: <span class="string">"node ./node_modules/.bin/webpack-dev-server --config ./æ‰“åŒ…æ ·å¼/webpack.config.js"</span>,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="npxå¯åŠ¨ï¼ˆç»ˆææ–¹æ¡ˆï¼‰"><a href="#npxå¯åŠ¨ï¼ˆç»ˆææ–¹æ¡ˆï¼‰" class="headerlink" title="npxå¯åŠ¨ï¼ˆç»ˆææ–¹æ¡ˆï¼‰"></a>npxå¯åŠ¨ï¼ˆç»ˆææ–¹æ¡ˆï¼‰</h4><p>ä¸Šé¢æ‰€æœ‰å…³äº <code>./node_modules/.bin/webpack-dev-server</code>éƒ½å¯ä»¥é€šè¿‡npxæ¥ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">   <span class="string">"start"</span>: <span class="string">"npx webpack-dev-server --config ./æ‰“åŒ…æ ·å¼/webpack.config.js"</span>,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><p>npxæ˜¯npmä»5.xç‰ˆæœ¬åè‡ªå¸¦çš„åŠŸèƒ½ï¼Œç”¨äºè¿è¡ŒåŒ…ï¼Œå…ˆæ‰¾é¡¹ç›®ä¸‹çš„åŒ…ï¼Œè‹¥æ— ï¼Œå†æ‰¾å…¨å±€ä¸‹çš„åŒ…ï¼Œè‹¥æ— ï¼Œå°±ä¼šå®‰è£…ã€‚<br>ä½ ä¹Ÿå¯ä»¥ç¦æ­¢è‹¥æ— å°±å®‰è£…çš„è¡Œä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx some-package --no-install</span><br></pre></td></tr></table></figure></p><h3 id="â€“watch-ä¸-webpack-dev-serveråŒºåˆ«"><a href="#â€“watch-ä¸-webpack-dev-serveråŒºåˆ«" class="headerlink" title="â€“watch ä¸ webpack-dev-serveråŒºåˆ«"></a>â€“watch ä¸ webpack-dev-serveråŒºåˆ«</h3><p>â€“watch æ˜¯webpackè‡ªå¸¦çš„ï¼Œä¸€æ—¦ä¿®æ”¹äº†ç›¸å…³æ–‡ä»¶ï¼Œå°±ä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘ï¼Œä½†ä¸webpack-dev-serverä¸åŒçš„æ˜¯ï¼Œå®ƒå¹¶ä¸èƒ½æä¾›æœåŠ¡å™¨ç­‰åŠŸèƒ½ï¼Œ<br>æ— æ³•é€šè¿‡æœåŠ¡å™¨æ¥è®¿é—®htmlã€‚</p><h3 id="ä¼˜åŒ–è¾“å‡ºè·¯å¾„"><a href="#ä¼˜åŒ–è¾“å‡ºè·¯å¾„" class="headerlink" title="ä¼˜åŒ–è¾“å‡ºè·¯å¾„"></a>ä¼˜åŒ–è¾“å‡ºè·¯å¾„</h3><h4 id="outputPath-åŸºäº-output-path"><a href="#outputPath-åŸºäº-output-path" class="headerlink" title="outputPath åŸºäº output.path"></a>outputPath åŸºäº output.path</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  filename: <span class="string">'js/built.js'</span>, <span class="comment">//åŸºäºä¸‹é¢çš„path</span></span><br><span class="line">  path: resolve(__dirname, <span class="string">'build'</span>)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// å¤„ç†å›¾ç‰‡èµ„æº</span></span><br><span class="line">      test: <span class="regexp">/\.(jpg|png|gif)$/</span>,</span><br><span class="line">      loader: <span class="string">'url-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        name: <span class="string">'[hash:10].[ext]'</span>,<span class="comment">//ä¹Ÿå¯é€šè¿‡nameæ¥ç”Ÿäº§æ–‡ä»¶ç›®å½•ï¼Œå¯èƒ½åŸºäºä¸‹é¢çš„outputPath</span></span><br><span class="line">        outputPath: <span class="string">'imgs'</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="é€šè¿‡nameåˆ›å»ºç›®å½•"><a href="#é€šè¿‡nameåˆ›å»ºç›®å½•" class="headerlink" title="é€šè¿‡nameåˆ›å»ºç›®å½•"></a>é€šè¿‡nameåˆ›å»ºç›®å½•</h4><p>å¦‚ä¸Šã€‚</p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><ul><li>hash ext<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// [hash:10]å–å›¾ç‰‡çš„hashçš„å‰10ä½</span></span><br><span class="line">  <span class="comment">// [ext]å–æ–‡ä»¶åŸæ¥æ‰©å±•å</span></span><br><span class="line">  name: <span class="string">'[hash:10].[ext]'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="æƒ³ä¸åˆ°çš„ä¾èµ–å…³ç³»"><a href="#æƒ³ä¸åˆ°çš„ä¾èµ–å…³ç³»" class="headerlink" title="æƒ³ä¸åˆ°çš„ä¾èµ–å…³ç³»"></a>æƒ³ä¸åˆ°çš„ä¾èµ–å…³ç³»</h3><h4 id="less-loader-ä¾èµ–-less"><a href="#less-loader-ä¾èµ–-less" class="headerlink" title="less-loader ä¾èµ– less"></a>less-loader ä¾èµ– less</h4><p>å¦‚æœè¦ä½¿ç”¨ï¼Œå°±è¦å®‰è£…äºŒè€…ã€‚</p><h4 id="url-loader-ä¾èµ–-file-loader"><a href="#url-loader-ä¾èµ–-file-loader" class="headerlink" title="url-loader ä¾èµ– file-loader"></a>url-loader ä¾èµ– file-loader</h4><p>å¦‚æœè¦ä½¿ç”¨ï¼Œå°±è¦å®‰è£…äºŒè€…ã€‚</p><h3 id="nodeç¯å¢ƒå˜é‡ä¸webpack-modeåŒºåˆ«"><a href="#nodeç¯å¢ƒå˜é‡ä¸webpack-modeåŒºåˆ«" class="headerlink" title="nodeç¯å¢ƒå˜é‡ä¸webpack modeåŒºåˆ«"></a>nodeç¯å¢ƒå˜é‡ä¸webpack modeåŒºåˆ«</h3><p>å‚è€ƒä¸‹é¢çš„ã€Šnodeç¯å¢ƒå˜é‡ä¸webpack modeåŒºåˆ«ã€‹</p><h3 id="å›¾ç‰‡çš„ä½¿ç”¨"><a href="#å›¾ç‰‡çš„ä½¿ç”¨" class="headerlink" title="å›¾ç‰‡çš„ä½¿ç”¨"></a>å›¾ç‰‡çš„ä½¿ç”¨</h3><h4 id="cssä¸­å¼•ç”¨æ²¡æœ‰é—®é¢˜"><a href="#cssä¸­å¼•ç”¨æ²¡æœ‰é—®é¢˜" class="headerlink" title="cssä¸­å¼•ç”¨æ²¡æœ‰é—®é¢˜"></a>cssä¸­å¼•ç”¨æ²¡æœ‰é—®é¢˜</h4><p>cssä¸­ç›´æ¥ä½¿ç”¨url-loaderå³å¯ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p><h4 id="htmlä¸­å¼•ç”¨éœ€å¦å¤–å¤„ç†"><a href="#htmlä¸­å¼•ç”¨éœ€å¦å¤–å¤„ç†" class="headerlink" title="htmlä¸­å¼•ç”¨éœ€å¦å¤–å¤„ç†"></a>htmlä¸­å¼•ç”¨éœ€å¦å¤–å¤„ç†</h4><p>å¦‚ä¸‹ï¼Œurl-loaderé»˜è®¤å¤„ç†ä¸äº†htmlä¸­imgå¼•ç”¨ï¼Œéœ€è¦é…åˆhtml-loaderä¸€èµ·ä½¿ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">       <span class="comment">// é—®é¢˜ï¼šé»˜è®¤å¤„ç†ä¸äº†htmlä¸­imgå›¾ç‰‡</span></span><br><span class="line">       <span class="comment">// å¤„ç†å›¾ç‰‡èµ„æº</span></span><br><span class="line">       test: <span class="regexp">/\.(jpg|png|gif)$/</span>,</span><br><span class="line">       loader: <span class="string">'url-loader'</span>,</span><br><span class="line">       options: &#123;</span><br><span class="line">         <span class="comment">// é—®é¢˜ï¼šå› ä¸ºurl-loaderé»˜è®¤ä½¿ç”¨es6æ¨¡å—åŒ–è§£æï¼Œè€Œhtml-loaderå¼•å…¥å›¾ç‰‡æ˜¯commonjs</span></span><br><span class="line">         <span class="comment">// è§£ææ—¶ä¼šå‡ºé—®é¢˜ï¼š[object Module]</span></span><br><span class="line">         <span class="comment">// è§£å†³ï¼šå…³é—­url-loaderçš„es6æ¨¡å—åŒ–ï¼Œä½¿ç”¨commonjsè§£æ</span></span><br><span class="line">         esModule: <span class="literal">false</span>,</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.html$/</span>,</span><br><span class="line">       <span class="comment">// å¤„ç†htmlæ–‡ä»¶çš„imgå›¾ç‰‡ï¼ˆè´Ÿè´£å¼•å…¥imgï¼Œä»è€Œèƒ½è¢«url-loaderè¿›è¡Œå¤„ç†ï¼‰</span></span><br><span class="line">       loader: <span class="string">'html-loader'</span></span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p><h3 id="å¦‚ä½•å¤„ç†å‰©ä¸‹çš„æ‰€æœ‰ç±»å‹æ–‡ä»¶"><a href="#å¦‚ä½•å¤„ç†å‰©ä¸‹çš„æ‰€æœ‰ç±»å‹æ–‡ä»¶" class="headerlink" title="å¦‚ä½•å¤„ç†å‰©ä¸‹çš„æ‰€æœ‰ç±»å‹æ–‡ä»¶"></a>å¦‚ä½•å¤„ç†å‰©ä¸‹çš„æ‰€æœ‰ç±»å‹æ–‡ä»¶</h3><p>å¦‚æœæˆ‘ä»¬çŸ¥é“é¡¹ç›®ä¸­åªæœ‰js css html less ã€‚<br>å…¶ä»–çš„æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå›¾æ ‡å­—ä½“æ–‡ä»¶ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡file-loaderæ¥é›†ä¸­å¤„ç†è¿™äº›ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">   &#123;</span><br><span class="line">     test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">     use: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>]</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// æ‰“åŒ…å…¶ä»–èµ„æº(é™¤äº†html/js/cssèµ„æºä»¥å¤–çš„èµ„æº)</span></span><br><span class="line">   &#123;</span><br><span class="line">     <span class="comment">// æ’é™¤css/js/htmlèµ„æº</span></span><br><span class="line">     exclude: <span class="regexp">/\.(css|js|html|less)$/</span>,</span><br><span class="line">     loader: <span class="string">'file-loader'</span>,</span><br><span class="line">     options: &#123;</span><br><span class="line">       name: <span class="string">'[hash:10].[ext]'</span></span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure></p><h2 id="ç”Ÿäº§ç¯å¢ƒé…ç½®"><a href="#ç”Ÿäº§ç¯å¢ƒé…ç½®" class="headerlink" title="ç”Ÿäº§ç¯å¢ƒé…ç½®"></a>ç”Ÿäº§ç¯å¢ƒé…ç½®</h2><h3 id="è¦è§£å†³çš„é—®é¢˜"><a href="#è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="è¦è§£å†³çš„é—®é¢˜"></a>è¦è§£å†³çš„é—®é¢˜</h3><ul><li>js css åˆ†ç¦» ï¼ˆé—ªå±ç°è±¡ï¼‰<br>å‚è€ƒä¸‹é¢çš„ã€Šjs css åˆ†ç¦» ï¼ˆé—ªå±ç°è±¡ï¼‰ã€‹</li><li>ä»£ç å‹ç¼©<h3 id="js-css-åˆ†ç¦»-ï¼ˆé—ªå±ç°è±¡ï¼‰"><a href="#js-css-åˆ†ç¦»-ï¼ˆé—ªå±ç°è±¡ï¼‰" class="headerlink" title="js css åˆ†ç¦» ï¼ˆé—ªå±ç°è±¡ï¼‰"></a>js css åˆ†ç¦» ï¼ˆé—ªå±ç°è±¡ï¼‰</h3>å¦‚æœcsså†…åµŒåœ¨jså†…ï¼Œé‚£ä¹ˆé¡µé¢è§£ææ—¶ï¼Œå¿…é¡»è¦ç­‰jsåŠ è½½å®Œæˆäº†ï¼Œå†æ¥è§£æcssï¼Œé€ æˆé—ªå±ç°è±¡ã€‚<br>å› æ­¤è¦é€šè¿‡<code>const MiniCssExtractPlugin = require(&#39;mini-css-extract-plugin&#39;);</code>åˆ†ç¦»cssã€‚<h3 id="cssæµè§ˆå™¨å…¼å®¹å¤„ç†"><a href="#cssæµè§ˆå™¨å…¼å®¹å¤„ç†" class="headerlink" title="cssæµè§ˆå™¨å…¼å®¹å¤„ç†"></a>cssæµè§ˆå™¨å…¼å®¹å¤„ç†</h3><h4 id="postcss-loader-postcss-preset-env-browserslist"><a href="#postcss-loader-postcss-preset-env-browserslist" class="headerlink" title="postcss-loader postcss-preset-env browserslist"></a>postcss-loader postcss-preset-env browserslist</h4>postcss-preset-env æ˜¯ postcss-loaderçš„ä¸€ä¸ªæ’ä»¶ï¼Œå¸®åŠ©postcss-loaderæ‰¾åˆ°åœ¨package.jsonä¸­browserslistå†…å®šä¹‰çš„è§„åˆ™ã€‚<br>ä»¥ä¸Šæ˜¯å¤„ç†cssæµè§ˆå™¨å…¼å®¹çš„å¸¸è§„ç”¨æ³•ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="string">'css-loader'</span>,</span><br><span class="line">         </span><br><span class="line">          <span class="comment">// ä½¿ç”¨loaderçš„é»˜è®¤é…ç½®</span></span><br><span class="line">          <span class="comment">// 'postcss-loader',</span></span><br><span class="line">          <span class="comment">// ä¿®æ”¹loaderçš„é…ç½®</span></span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">'postcss-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: <span class="string">'postcss'</span>,</span><br><span class="line">              plugins: <span class="function"><span class="params">()</span> =&gt;</span> [</span><br><span class="line">                <span class="comment">// postcssçš„æ’ä»¶</span></span><br><span class="line">                <span class="built_in">require</span>(<span class="string">'postcss-preset-env'</span>)()</span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//package.json</span></span><br><span class="line"><span class="comment">// csså…¼å®¹æ€§å¤„ç†ï¼špostcss --&gt; postcss-loader postcss-preset-env</span></span><br><span class="line"><span class="comment">// å¸®postcssæ‰¾åˆ°package.jsonä¸­browserslisté‡Œé¢çš„é…ç½®ï¼Œé€šè¿‡é…ç½®åŠ è½½æŒ‡å®šçš„csså…¼å®¹æ€§æ ·å¼</span></span><br><span class="line">"browserslist": &#123;</span><br><span class="line">  <span class="comment">// å¼€å‘ç¯å¢ƒ --&gt; è®¾ç½®nodeç¯å¢ƒå˜é‡ï¼šprocess.env.NODE_ENV = development</span></span><br><span class="line">  "development": [</span><br><span class="line">    "last 1 chrome version",//å…¼å®¹æœ€æ–°ä¸€ä¸ªç‰ˆæœ¬</span><br><span class="line">    "last 1 firefox version",//å…¼å®¹æœ€æ–°ä¸€ä¸ªç‰ˆæœ¬</span><br><span class="line">    <span class="string">"last 1 safari version"</span><span class="comment">//å…¼å®¹æœ€æ–°ä¸€ä¸ªç‰ˆæœ¬</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// ç”Ÿäº§ç¯å¢ƒï¼šé»˜è®¤æ˜¯çœ‹ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line">  "production": [</span><br><span class="line">    "&gt;0.2%",//å…¼å®¹99.8çš„ç‰ˆæœ¬</span><br><span class="line">    "not dead",//å¼ƒç”¨çš„ç‰ˆæœ¬ä¸å…¼å®¹</span><br><span class="line">    <span class="string">"not op_mini all"</span><span class="comment">//op_mini allæ˜¯ä¸€ä¸ªä¸Šå¤ç‰ˆæœ¬ï¼Œæ—©å°±å¼ƒç”¨ï¼Œæ‰€æœ‰ä¸ç”¨å…¼å®¹</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ›´å¤šé…ç½®å¯æŸ¥çœ‹browsersliståŒ…"><a href="#æ›´å¤šé…ç½®å¯æŸ¥çœ‹browsersliståŒ…" class="headerlink" title="æ›´å¤šé…ç½®å¯æŸ¥çœ‹browsersliståŒ…"></a>æ›´å¤šé…ç½®å¯æŸ¥çœ‹browsersliståŒ…</h4><p>GitHubä¸Šæœ‰ä¸ªåº“browserslistï¼Œå¯æŸ¥çœ‹æ›´å¤šé…ç½®</p><h4 id="è®¾ç½®nodeç¯å¢ƒå˜é‡"><a href="#è®¾ç½®nodeç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®nodeç¯å¢ƒå˜é‡"></a>è®¾ç½®nodeç¯å¢ƒå˜é‡</h4><p>nodeç¯å¢ƒå˜é‡é€šè¿‡å›ºå®šåå­—process.env.NODE_ENVè®¾ç½®ï¼Œå¦‚æœæœªè®¾ç½®nodeç¯å¢ƒå˜é‡ï¼Œé»˜è®¤ä½¿ç”¨ç”Ÿäº§é…ç½®ã€‚<br>è®¾ç½®ä¸åŒç”Ÿäº§ç¯å¢ƒï¼Œå°†å¯åŠ¨postcssä½¿ç”¨browserslistå†…developmentã€productionä¸åŒé…ç½®ã€‚</p><h4 id="nodeç¯å¢ƒå˜é‡ä¸webpack-modeåŒºåˆ«-1"><a href="#nodeç¯å¢ƒå˜é‡ä¸webpack-modeåŒºåˆ«-1" class="headerlink" title="nodeç¯å¢ƒå˜é‡ä¸webpack modeåŒºåˆ«"></a>nodeç¯å¢ƒå˜é‡ä¸webpack modeåŒºåˆ«</h4><p>nodeç¯å¢ƒå˜é‡æ˜¯é€šè¿‡process.env.NODE_ENVè®¾ç½®ã€‚<br>ä¸webpack modeæ— å…³ã€‚<br>è™½ç„¶webpack mode çš„å€¼ä¸nodeç¯å¢ƒå˜é‡å€¼ä¸€æ ·ï¼Œéƒ½æ˜¯ developmentã€productionã€‚</p><h3 id="å‹ç¼©css"><a href="#å‹ç¼©css" class="headerlink" title="å‹ç¼©css"></a>å‹ç¼©css</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> OptimizeCssAssetsWebpackPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>)</span><br></pre></td></tr></table></figure><h3 id="eslint-æ£€æŸ¥å’Œä¿®å¤"><a href="#eslint-æ£€æŸ¥å’Œä¿®å¤" class="headerlink" title="eslint æ£€æŸ¥å’Œä¿®å¤"></a>eslint æ£€æŸ¥å’Œä¿®å¤</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>eslint é¦–é€‰éœ€è¦ eslint-loader  eslintï¼Œ<br>ä¸è€ƒè™‘reactï¼Œåªè€ƒè™‘å•çº¯çš„es6+ä»£ç æ£€æŸ¥ï¼Œé€‰ç”¨è§„åˆ™eslint-config-airbnb-baseï¼Œ<br>æ­¤è§„åˆ™ä¾èµ– eslint-config-airbnb-base  eslint-plugin-importã€‚<br>å¦‚ä¸‹é…ç½®å¥½åï¼Œæ‰§è¡Œwebpackç¼–è¯‘å‘½ä»¤ å°†åˆ—ä¸¾æœ‰å¼‚å¸¸çš„é¡µé¢ï¼Œå¹¶è‡ªåŠ¨ä¿®å¤ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>,<span class="comment">//ä¸€å®šè¦æ’é™¤node_modulesï¼Œå¦åˆ™ä¼šæ£€æŸ¥node_modules</span></span><br><span class="line">       loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">       options: &#123;</span><br><span class="line">         <span class="comment">// webpackæ„å»ºæ—¶ è‡ªåŠ¨ä¿®å¤eslintçš„é”™è¯¯</span></span><br><span class="line">         fix: <span class="literal">true</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//package.json</span></span><br><span class="line"> "eslintConfig": &#123;</span><br><span class="line">   "extends": "airbnb-base"//airbnb-baseæ˜¯æ£€æŸ¥ä¸å«reactçš„es6+ï¼Œå¦‚æœæ˜¯reactï¼Œè¯·ä½¿ç”¨airbnb</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸€å®šè¦æ’é™¤node-modules"><a href="#ä¸€å®šè¦æ’é™¤node-modules" class="headerlink" title="ä¸€å®šè¦æ’é™¤node_modules"></a>ä¸€å®šè¦æ’é™¤node_modules</h4><p>å¦‚ä¸Šã€‚</p><h4 id="è‡ªåŠ¨ä¿®å¤é…ç½®"><a href="#è‡ªåŠ¨ä¿®å¤é…ç½®" class="headerlink" title="è‡ªåŠ¨ä¿®å¤é…ç½®"></a>è‡ªåŠ¨ä¿®å¤é…ç½®</h4><p>å¦‚ä¸Šã€‚</p><h4 id="æ£€æŸ¥reactå’Œéreactä»£ç "><a href="#æ£€æŸ¥reactå’Œéreactä»£ç " class="headerlink" title="æ£€æŸ¥reactå’Œéreactä»£ç "></a>æ£€æŸ¥reactå’Œéreactä»£ç </h4><p>airbnb-base åªåŒ…å«äº†å•çº¯çš„es6+æ£€æŸ¥ï¼Œå¦‚æœè¦åŒ…å«reactä»£ç æ£€æŸ¥ï¼Œä½¿ç”¨ airbnbï¼Œè¯¦ç»†å‚è€ƒairbnbå®˜ç½‘ã€‚</p><h4 id="eslint-ä¸jså…¼å®¹å¤„ç†-æ‰§è¡Œé¡ºåº"><a href="#eslint-ä¸jså…¼å®¹å¤„ç†-æ‰§è¡Œé¡ºåº" class="headerlink" title="eslint ä¸jså…¼å®¹å¤„ç† æ‰§è¡Œé¡ºåº"></a>eslint ä¸jså…¼å®¹å¤„ç† æ‰§è¡Œé¡ºåº</h4><p>å‚è€ƒåé¢çš„ã€ŠFAQ - eslint ä¸jså…¼å®¹å¤„ç† æ‰§è¡Œé¡ºåºã€‹</p><h4 id="ç¦ç”¨æŸä¸€è¡Œeslint"><a href="#ç¦ç”¨æŸä¸€è¡Œeslint" class="headerlink" title="ç¦ç”¨æŸä¸€è¡Œeslint"></a>ç¦ç”¨æŸä¸€è¡Œeslint</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//eslint-disable-next-line</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h3 id="jså…¼å®¹å¤„ç†"><a href="#jså…¼å®¹å¤„ç†" class="headerlink" title="jså…¼å®¹å¤„ç†"></a>jså…¼å®¹å¤„ç†</h3><h4 id="åŸºæœ¬ä¾èµ–"><a href="#åŸºæœ¬ä¾èµ–" class="headerlink" title="åŸºæœ¬ä¾èµ–"></a>åŸºæœ¬ä¾èµ–</h4><p>å¤„ç†jsçš„åŸºæœ¬ä¾èµ–åŒ… babel-loader @babel/coreã€‚</p><h4 id="jsåŸºæœ¬è¯­æ³•å¤„ç†"><a href="#jsåŸºæœ¬è¯­æ³•å¤„ç†" class="headerlink" title="jsåŸºæœ¬è¯­æ³•å¤„ç†"></a>jsåŸºæœ¬è¯­æ³•å¤„ç†</h4><p>å¦‚ä¸‹ @babel/preset-env åšåŸºæœ¬è¯­æ³•å¤„ç†ï¼Œä½†æ— æ³•å¤„ç†promiseé«˜çº§è¯­æ³•<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">      jså…¼å®¹æ€§å¤„ç†ï¼šbabel-loader @babel/core </span></span><br><span class="line"><span class="comment">        1. åŸºæœ¬jså…¼å®¹æ€§å¤„ç† --&gt; @babel/preset-env</span></span><br><span class="line"><span class="comment">          é—®é¢˜ï¼šåªèƒ½è½¬æ¢åŸºæœ¬è¯­æ³•ï¼Œå¦‚promiseé«˜çº§è¯­æ³•ä¸èƒ½è½¬æ¢</span></span><br><span class="line"><span class="comment">    */</span>  </span><br><span class="line">    &#123;</span><br><span class="line">      test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">      exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">      options: &#123;</span><br><span class="line">        <span class="comment">// é¢„è®¾ï¼šæŒ‡ç¤ºbabelåšæ€ä¹ˆæ ·çš„å…¼å®¹æ€§å¤„ç†</span></span><br><span class="line">        presets: [</span><br><span class="line">          [<span class="string">'@babel/preset-env'</span>]</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h4 id="å…¨é‡å…¼å®¹å¤„ç†-babel-polyfill-ï¼ˆä¸æ¨èï¼‰"><a href="#å…¨é‡å…¼å®¹å¤„ç†-babel-polyfill-ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="å…¨é‡å…¼å®¹å¤„ç† @babel/polyfill ï¼ˆä¸æ¨èï¼‰"></a>å…¨é‡å…¼å®¹å¤„ç† @babel/polyfill ï¼ˆä¸æ¨èï¼‰</h4><p>è¿™ç§ä¸ç”¨é…ç½®webpackï¼Œåªéœ€è¦åœ¨ä¸šåŠ¡jsä¸­ç›´æ¥å¼•ç”¨,ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œæ— æ³•æŒ‰éœ€åŠ è½½ï¼Œé™¤äº†æœ‰promiseä¾èµ–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–é¡¹ç›®æœªç”¨åˆ°çš„è¿è¡Œä¾èµ–ï¼Œå¯¼è‡´ç¼–è¯‘çš„åŒ…å¾ˆå¤§ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'@babel/polyfill'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve();</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="æŒ‰éœ€åŠ è½½å…¼å®¹core-js-ï¼ˆæ¨èï¼‰"><a href="#æŒ‰éœ€åŠ è½½å…¼å®¹core-js-ï¼ˆæ¨èï¼‰" class="headerlink" title="æŒ‰éœ€åŠ è½½å…¼å®¹core-js ï¼ˆæ¨èï¼‰"></a>æŒ‰éœ€åŠ è½½å…¼å®¹core-js ï¼ˆæ¨èï¼‰</h4><p>åœ¨ä¸Šé¢å…¼å®¹åŸºæœ¬è¯­æ³•çš„åŸºç¡€ä¸Šï¼Œè¿›è¡ŒæŒ‰éœ€åŠ è½½é…ç½®ï¼Œæ­¤æ—¶éœ€è¦å®‰è£… core-jsåŒ…ï¼Œå¹¶é…ç½®ç›¸å…³ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  éœ€è¦åšå…¼å®¹æ€§å¤„ç†çš„å°±åšï¼šæŒ‰éœ€åŠ è½½  --&gt; éœ€è¦å®‰è£…åŒ… core-js</span></span><br><span class="line"><span class="comment">     */</span>  </span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">       loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">       options: &#123;</span><br><span class="line">         <span class="comment">// é¢„è®¾ï¼šæŒ‡ç¤ºbabelåšæ€ä¹ˆæ ·çš„å…¼å®¹æ€§å¤„ç†</span></span><br><span class="line">         presets: [</span><br><span class="line">           [</span><br><span class="line">             <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">             &#123;</span><br><span class="line">               <span class="comment">// usage æ˜¯ æŒ‰éœ€åŠ è½½ çš„æ„æ€</span></span><br><span class="line">               useBuiltIns: <span class="string">'usage'</span>,</span><br><span class="line">               <span class="comment">// æŒ‡å®šcore-jsç‰ˆæœ¬ï¼Œä¸€èˆ¬æŒ‡å®š3</span></span><br><span class="line">               corejs: &#123;</span><br><span class="line">                 version: <span class="number">3</span> </span><br><span class="line">               &#125;,</span><br><span class="line">               <span class="comment">// æŒ‡å®šå…¼å®¹æ€§åšåˆ°å“ªä¸ªç‰ˆæœ¬æµè§ˆå™¨</span></span><br><span class="line">               targets: &#123;</span><br><span class="line">                 chrome: <span class="string">'60'</span>,</span><br><span class="line">                 firefox: <span class="string">'60'</span>,</span><br><span class="line">                 ie: <span class="string">'9'</span>,</span><br><span class="line">                 safari: <span class="string">'10'</span>,</span><br><span class="line">                 edge: <span class="string">'17'</span></span><br><span class="line">               &#125;</span><br><span class="line">             &#125;</span><br><span class="line">           ]</span><br><span class="line">         ]</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç¼“å­˜å¤„ç†"><a href="#ç¼“å­˜å¤„ç†" class="headerlink" title="ç¼“å­˜å¤„ç†"></a>ç¼“å­˜å¤„ç†</h3><h4 id="æ„å»ºç¼“å­˜å¤„ç†"><a href="#æ„å»ºç¼“å­˜å¤„ç†" class="headerlink" title="æ„å»ºç¼“å­˜å¤„ç†"></a>æ„å»ºç¼“å­˜å¤„ç†</h4><p>ä¸€ä¸ªé¡¹ç›®ä¸­jsæ˜¯æœ€å¤šçš„ï¼Œæ„å»ºç¼“å­˜ä¸€èˆ¬åªå¤„ç†jsæ–‡ä»¶ã€‚<br>å¼€å¯ä¸‹é¢cacheDirectoryç¼“å­˜åï¼Œç¬¬äºŒæ¬¡æ„å»ºæ—¶ï¼Œwebpackåªä¼šé‡æ–°ç¼–è¯‘ä¿®æ”¹è¿‡çš„jsï¼Œæœªä¿®æ”¹çš„ä½¿ç”¨ä¸Šæ¬¡ç¼“å­˜ï¼Œæé«˜æ„å»ºé€Ÿåº¦ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">  loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">  options: &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">// å¼€å¯babelç¼“å­˜</span></span><br><span class="line">    <span class="comment">// ç¬¬äºŒæ¬¡æ„å»ºæ—¶ï¼Œä¼šè¯»å–ä¹‹å‰çš„ç¼“å­˜</span></span><br><span class="line">    cacheDirectory: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h4 id="ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†"><a href="#ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†" class="headerlink" title="ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†"></a>ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†</h4><p>å†…å­˜è¾ƒå¤šï¼Œå•ç‹¬åœ¨ä¸‹é¢ã€Šä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†ã€‹è§è§£ã€‚</p><h3 id="ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†-1"><a href="#ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†-1" class="headerlink" title="ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†"></a>ä»£ç ä¸Šçº¿è¿è¡Œç¼“å­˜ä¼˜åŒ–å¤„ç†</h3><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>åç«¯å¤„ç†ï¼š<br>ç»™htmlå¼•ç”¨çš„jsï¼Œcssé™æ€æ–‡ä»¶ è®¾ç½®å¼ºåˆ¶ç¼“å­˜ï¼Œä¾‹å¦‚å¼ºåˆ¶ç¼“å­˜ä¸‰ä¸ªæœˆã€‚<br>ä¸‰ä¸ªæœˆå†…æµè§ˆå™¨ç›´æ¥ä»æœ¬åœ°è¯»å–ï¼Œä¸ç”¨è¯·æ±‚æœåŠ¡å™¨ã€‚<br>å‰ç«¯å¤„ç†ï¼š<br>ç»™jsã€cssç­‰æ–‡ä»¶æŒ‡å®šä¸€ä¸ªhashå€¼çš„æ–‡ä»¶åã€‚<br>åˆ©ç”¨html-webpack-pluginåµŒå…¥ä¸Šé¢jsã€cssç­‰å¼•ç”¨åˆ°htmlã€‚<br>å½“hashç æœªæ”¹å˜æ—¶ï¼Œhtmlå“åº”é€Ÿåº¦éå¸¸å¿«ï¼Œå› ä¸ºç›´æ¥è¯»å–æµè§ˆå™¨ç¼“å­˜ã€‚<br>å½“hashç æ”¹å˜æ—¶ï¼Œåªä¼šä»æœåŠ¡å™¨ä»æ–°è¯»å–æœ€æ–°hashå€¼æ–‡ä»¶ï¼Œæœªæ”¹å˜çš„é™æ€æ–‡ä»¶ä¾ç„¶ä»æµè§ˆå™¨ç¼“å­˜è¯»å–ã€‚</p><h4 id="webpackä¸­çš„hashå€¼å¤„ç†æ–¹å¼"><a href="#webpackä¸­çš„hashå€¼å¤„ç†æ–¹å¼" class="headerlink" title="webpackä¸­çš„hashå€¼å¤„ç†æ–¹å¼"></a>webpackä¸­çš„hashå€¼å¤„ç†æ–¹å¼</h4><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hash: æ¯æ¬¡wepackæ„å»ºæ—¶ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„hashå€¼ã€‚</span><br><span class="line">   é—®é¢˜: å› ä¸ºjså’ŒcssåŒæ—¶ä½¿ç”¨ä¸€ä¸ªhashå€¼ã€‚</span><br><span class="line"><span class="code">     å¦‚æœé‡æ–°æ‰“åŒ…ï¼Œä¼šå¯¼è‡´æ‰€æœ‰ç¼“å­˜å¤±æ•ˆã€‚ï¼ˆå¯èƒ½æˆ‘å´åªæ”¹åŠ¨ä¸€ä¸ªæ–‡ä»¶ï¼‰</span></span><br><span class="line"> chunkhashï¼šæ ¹æ®chunkç”Ÿæˆçš„hashå€¼ã€‚å¦‚æœæ‰“åŒ…æ¥æºäºåŒä¸€ä¸ªchunkï¼Œé‚£ä¹ˆhashå€¼å°±ä¸€æ ·</span><br><span class="line">   é—®é¢˜: jså’Œcssçš„hashå€¼è¿˜æ˜¯ä¸€æ ·çš„</span><br><span class="line"><span class="code">     å› ä¸ºcssæ˜¯åœ¨jsä¸­è¢«å¼•å…¥çš„ï¼Œæ‰€ä»¥åŒå±äºä¸€ä¸ªchunk</span></span><br><span class="line"> contenthash: æ ¹æ®æ–‡ä»¶çš„å†…å®¹ç”Ÿæˆhashå€¼ã€‚ä¸åŒæ–‡ä»¶hashå€¼ä¸€å®šä¸ä¸€æ ·</span><br></pre></td></tr></table></figure><h4 id="æ¨ècontenthash"><a href="#æ¨ècontenthash" class="headerlink" title="æ¨ècontenthash"></a>æ¨ècontenthash</h4><p>å‚è€ƒä¸Šé¢æ‰€è®²</p><h4 id="å¯¹chunkåŠchunkhashçš„è¯´æ˜"><a href="#å¯¹chunkåŠchunkhashçš„è¯´æ˜" class="headerlink" title="å¯¹chunkåŠchunkhashçš„è¯´æ˜"></a>å¯¹chunkåŠchunkhashçš„è¯´æ˜</h4><p>chunkçš„å®šä¹‰åœ¨entryä¸Š,ä¸‹é¢å°±æ˜¯ä¸¤ä¸ªchunkï¼Œ<br>chunk1:<code>./src/js/index.js</code>,<br>chunk2:<code>./src/js/test.js</code>ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: [<span class="string">'./src/js/index.js'</span>, <span class="string">'./src/js/test.js'</span>],</span><br></pre></td></tr></table></figure></p><p>å¯¹åº”ä¸Šé¢ä¸¤ä¸ªchunkç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶ï¼ŒåŒä¸€ä¸ªchunkï¼Œå…¶æ— è®ºæ˜¯cssï¼Œjsç­‰çš„æ–‡ä»¶è¾“å‡ºï¼Œå…¶chunkhashéƒ½ä¸€æ ·ã€‚</p><h3 id="tree-shaking"><a href="#tree-shaking" class="headerlink" title="tree shaking"></a>tree shaking</h3><p>tree shaking æ˜¯å¾ˆå½¢è±¡ä¸€ä¸ªæ¯”å–»ï¼Œæ¯”å–»ä½ æ‘‡ä¸€æ£µæ ‘ï¼Œå°†æ ‘ä¸Šæ— ç”¨çš„ä¸€äº›æ®‹æè´¥å¶æ‘‡æ‰ã€‚ä»è€Œå°†æ ‘è½»è£…ä¸Šé˜µã€‚<br>webpackè‡ªå¸¦åŠŸèƒ½ï¼Œ</p><ul><li>åªè¦è®¾ç½® webpack mode ä¸ºproductionå³å¯</li><li>åœ¨é¡¹ç›® package.json æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸€ä¸ª â€œsideEffectsâ€ å…¥å£ã€‚</li><li>å¼•å…¥ä¸€ä¸ªèƒ½å¤Ÿåˆ é™¤æœªå¼•ç”¨ä»£ç (dead code)çš„å‹ç¼©å·¥å…·(minifier)ï¼ˆä¾‹å¦‚ UglifyJSPluginï¼‰</li><li>ä½¿ç”¨ ES2015 æ¨¡å—è¯­æ³•ï¼ˆå³ import å’Œ exportï¼‰<br>è¯¦ç»†å‚è€ƒå®˜ç½‘ã€‚<h3 id="ä»£ç åˆ†å‰²"><a href="#ä»£ç åˆ†å‰²" class="headerlink" title="ä»£ç åˆ†å‰²"></a>ä»£ç åˆ†å‰²</h3><h4 id="åˆ†å‰²æ–¹å¼"><a href="#åˆ†å‰²æ–¹å¼" class="headerlink" title="åˆ†å‰²æ–¹å¼"></a>åˆ†å‰²æ–¹å¼</h4>æ— è®ºæ˜¯å•å…¥å£è¿˜æ˜¯å¤šå…¥å£ç¼–è¯‘ï¼Œéƒ½æ˜¯é€šè¿‡optimizationè¿›è¡Œä»£ç åˆ†å‰²ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   1. å¯ä»¥å°†node_modulesä¸­ä»£ç å•ç‹¬æ‰“åŒ…ä¸€ä¸ªchunkæœ€ç»ˆè¾“å‡ºã€‚(å¯ä»¥è®¾ç½®å¤šå°‘å¤§å°çš„åŒ…è¿›è¡ŒchunkæŠ½å–æ‰“åŒ…)</span></span><br><span class="line"><span class="comment">   2. è‡ªåŠ¨åˆ†æå¤šå…¥å£chunkä¸­ï¼Œæœ‰æ²¡æœ‰å…¬å…±çš„æ–‡ä»¶ã€‚å¦‚æœæœ‰ä¼šæ‰“åŒ…æˆå•ç‹¬ä¸€ä¸ªchunk //æ­¤åŠŸèƒ½å¯¹å•å…¥å£å·¥ç¨‹å¤±æ•ˆ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> optimization: &#123;</span><br><span class="line">   splitChunks: &#123;</span><br><span class="line">     chunks: <span class="string">'all'</span></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></li></ul><h4 id="å¤šå…¥å£å¤šchunkæ¨¡å¼"><a href="#å¤šå…¥å£å¤šchunkæ¨¡å¼" class="headerlink" title="å¤šå…¥å£å¤šchunkæ¨¡å¼"></a>å¤šå…¥å£å¤šchunkæ¨¡å¼</h4><p>å¦‚ä¸‹ï¼Œæ‰“åŒ…å‡ºæ¥çš„ä»£ç è‡ªç„¶å°±æ˜¯å¤šæ–‡ä»¶ï¼Œå®ç°äº†ä»£ç åˆ†å‰²ï¼Œå†ç»“åˆä¸Šé¢è¯´çš„optimizationï¼Œè¿˜å¯ä»¥optimizationè‡ªå¸¦çš„åˆ†å‰²èƒ½åŠ›ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: [<span class="string">'./src/js/index.js'</span>, <span class="string">'./src/js/test.js'</span>],</span><br></pre></td></tr></table></figure></p><h4 id="å•å…¥å£åˆ†å‰²ï¼ˆimportåŠ¨æ€å¯¼å…¥è¯­æ³•çš„è¿è¡Œï¼‰"><a href="#å•å…¥å£åˆ†å‰²ï¼ˆimportåŠ¨æ€å¯¼å…¥è¯­æ³•çš„è¿è¡Œï¼‰" class="headerlink" title="å•å…¥å£åˆ†å‰²ï¼ˆimportåŠ¨æ€å¯¼å…¥è¯­æ³•çš„è¿è¡Œï¼‰"></a>å•å…¥å£åˆ†å‰²ï¼ˆimportåŠ¨æ€å¯¼å…¥è¯­æ³•çš„è¿è¡Œï¼‰</h4><p>å¯¹äºä½†å…¥å£åˆ†å‰²ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªchunkï¼Œå› æ­¤optimizationçš„ç¬¬äºŒä¸ªåŠŸèƒ½ï¼ˆå°†å…¬å…±çš„æ–‡ä»¶å•ç‹¬æ‰“åŒ…ä¸€ä¸ªchunkï¼‰å¯¹å•å…¥å£é¡¹ç›®æ— æ•ˆã€‚<br>ä½†æˆ‘ä»¬åˆæƒ³å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œ<br>åªèƒ½å¯¹jsè¿›è¡Œå¤„ç†äº†ï¼Œè¿™é‡Œä½¿ç”¨importåŠ¨æ€å¯¼å…¥è¯­æ³•ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//index.js</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  é€šè¿‡jsä»£ç ï¼Œè®©æŸä¸ªæ–‡ä»¶è¢«å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªchunk</span></span><br><span class="line"><span class="comment">  importåŠ¨æ€å¯¼å…¥è¯­æ³•ï¼šèƒ½å°†æŸä¸ªæ–‡ä»¶å•ç‹¬æ‰“åŒ…</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'test' */</span><span class="string">'./test'</span>)</span><br><span class="line">  .then(<span class="function">(<span class="params">&#123; mul, count &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ–‡ä»¶åŠ è½½æˆåŠŸ~</span></span><br><span class="line">    <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">    <span class="built_in">console</span>.log(mul(<span class="number">2</span>, <span class="number">5</span>));</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// eslint-disable-next-line</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ–‡ä»¶åŠ è½½å¤±è´¥~'</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="ä»£ç åˆ†å‰²ä¸dllpluginåŒºåˆ«"><a href="#ä»£ç åˆ†å‰²ä¸dllpluginåŒºåˆ«" class="headerlink" title="ä»£ç åˆ†å‰²ä¸dllpluginåŒºåˆ«"></a>ä»£ç åˆ†å‰²ä¸dllpluginåŒºåˆ«</h4><p>ä»£ç åˆ†å‰²ï¼Œæ¯”å¦‚node module å†…æ‰“åŒ…æˆä¸€ä¸ªchunkï¼Œå¥½åƒä¸dllpluginç±»ä¼¼ã€‚<br>äºŒè€…ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†è§£å†³çš„é—®é¢˜ä¸ä¸€æ ·ã€‚<br>ä»£ç åˆ†å‰²ï¼Œç›®çš„åœ¨äºåŠ é€Ÿé¡µé¢æ¸²æŸ“ã€‚<br>ä¸»è¦ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œå°†ä¸€ä¸ªå¤§jsåˆ†å‰²æˆå°jsï¼ŒåŠ é€Ÿé¡µé¢æ¸²æŸ“ã€‚<br>dllplugin ï¼Œç›®çš„åœ¨äºæå¿«æé«˜webpackæ„å»ºé€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¯è¿›ä¸€æ­¥åˆ†å‰²node moduleä»£ç ï¼Œå¯è¿ç”¨äºé¡µé¢ä¼˜åŒ–ã€‚<br>å¯ç”¨äºå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼Œç¬¬ä¸€æ¬¡æ‰“åŒ…å¥½çš„ä»£ç ï¼Œä¸‹æ¬¡æ‰“åŒ…ä¸ç”¨é‡æ–°ç¼–è¯‘ã€‚</p><h4 id="ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½çš„è”ç³»-importåŠ¨æ€å¯¼å…¥è¯­æ³•"><a href="#ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½çš„è”ç³»-importåŠ¨æ€å¯¼å…¥è¯­æ³•" class="headerlink" title="ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½çš„è”ç³»(importåŠ¨æ€å¯¼å…¥è¯­æ³•)"></a>ä»£ç åˆ†å‰²ä¸æ‡’åŠ è½½çš„è”ç³»(importåŠ¨æ€å¯¼å…¥è¯­æ³•)</h4><p>importåŠ¨æ€å¯¼å…¥è¯­æ³•ä¼šå¯¼è‡´ä»£ç è¿›è¡Œä»£ç åˆ†å‰²ã€‚<br>ç„¶åç­‰å¾…æ¸²æŸ“æŸä¸€é¡µé¢æ—¶ï¼Œå†è°ƒç”¨importåŠ¨æ€å¯¼å…¥è¯­æ³•ï¼Œå°±æ˜¯ä¸€ç§æ‡’åŠ è½½è®¾è®¡æ¨¡å¼ã€‚</p><h4 id="optimizationç”¨äºç”Ÿäº§ç¯å¢ƒ"><a href="#optimizationç”¨äºç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="optimizationç”¨äºç”Ÿäº§ç¯å¢ƒ"></a>optimizationç”¨äºç”Ÿäº§ç¯å¢ƒ</h4><p>optimizationä¸€èˆ¬ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œç”¨åœ¨å¼€å‘ç¯å¢ƒçš„è¯ï¼Œæ„ä¹‰ä¸å¤§ã€‚</p><h3 id="æ‡’åŠ è½½-é¢„åŠ è½½"><a href="#æ‡’åŠ è½½-é¢„åŠ è½½" class="headerlink" title="æ‡’åŠ è½½ é¢„åŠ è½½"></a>æ‡’åŠ è½½ é¢„åŠ è½½</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>).onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‡’åŠ è½½~ï¼šå½“æ–‡ä»¶éœ€è¦ä½¿ç”¨æ—¶æ‰åŠ è½½~</span></span><br><span class="line">  <span class="comment">// é¢„åŠ è½½ prefetchï¼šä¼šåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæå‰åŠ è½½jsæ–‡ä»¶ </span></span><br><span class="line">  <span class="comment">// æ­£å¸¸åŠ è½½å¯ä»¥è®¤ä¸ºæ˜¯å¹¶è¡ŒåŠ è½½ï¼ˆåŒä¸€æ—¶é—´åŠ è½½å¤šä¸ªæ–‡ä»¶ï¼‰  </span></span><br><span class="line">  <span class="comment">// é¢„åŠ è½½ prefetchï¼šç­‰å…¶ä»–èµ„æºåŠ è½½å®Œæ¯•ï¼Œæµè§ˆå™¨ç©ºé—²äº†ï¼Œå†å·å·åŠ è½½èµ„æº</span></span><br><span class="line">  <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'test', webpackPrefetch: true */</span><span class="string">'./test'</span>).then(<span class="function">(<span class="params">&#123; mul &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(mul(<span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="webpackPrefetch-åšé¢„åŠ è½½"><a href="#webpackPrefetch-åšé¢„åŠ è½½" class="headerlink" title="webpackPrefetch åšé¢„åŠ è½½"></a>webpackPrefetch åšé¢„åŠ è½½</h4><p>pcç«¯ç”¨å¾—å¤šï¼Œè°·æ­Œå…¼å®¹è¾ƒå¥½ï¼Œä½†ieæ¯”è¾ƒå·®ï¼Œç§»åŠ¨ç«¯å¯èƒ½å…¼å®¹ä¼šæœ‰äº›é—®é¢˜ã€‚<br>ä¸Šé¢çš„é¢„åŠ è½½ï¼Œæ˜¯é¡¹ç›®ä¸€å¯åŠ¨ï¼Œç­‰httpè¯·æ±‚å®Œæ¯•åï¼Œåˆç©ºé—²äº†ï¼Œå†æ¥åŠ è½½åŠ¨æ€å¯¼å…¥çš„æ–‡ä»¶ã€‚<br>ä¸è¿‡æ­¤æ—¶é¡¹ç›®å¹¶ä¸ä¼šå¼•å…¥è¯¥æ–‡ä»¶æ‰§è¡Œï¼Œåªæœ‰ç‚¹å‡»ä¸Šé¢çš„æŒ‰é’®æ—¶ï¼Œæ‰æ‰§è¡Œæ–‡ä»¶é‡Œé¢çš„ä»£ç ã€‚</p><h3 id="å…¶ä»–å¤„ç†"><a href="#å…¶ä»–å¤„ç†" class="headerlink" title="å…¶ä»–å¤„ç†"></a>å…¶ä»–å¤„ç†</h3><h4 id="jsã€htmlå‹ç¼©"><a href="#jsã€htmlå‹ç¼©" class="headerlink" title="jsã€htmlå‹ç¼©"></a>jsã€htmlå‹ç¼©</h4><p>webpack è‡ªå¸¦jså‹ç¼©ï¼Œåªè¦å°†webpack çš„mode æ”¹æˆ production æ¨¡å¼ï¼Œå°±è‡ªåŠ¨å‹ç¼©jsã€‚<br>htmlçš„å‹ç¼©å¯é€šè¿‡htmlæ’ä»¶æ¥åšï¼š<code>const HtmlWebpackPlugin = require(&#39;html-webpack-plugin&#39;);</code></p><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><h4 id="eslint-ä¸jså…¼å®¹å¤„ç†-æ‰§è¡Œé¡ºåº-1"><a href="#eslint-ä¸jså…¼å®¹å¤„ç†-æ‰§è¡Œé¡ºåº-1" class="headerlink" title="eslint ä¸jså…¼å®¹å¤„ç† æ‰§è¡Œé¡ºåº"></a>eslint ä¸jså…¼å®¹å¤„ç† æ‰§è¡Œé¡ºåº</h4><p>åº”è¯¥å…ˆæ‰§è¡Œeslintï¼Œåæ‰§è¡Œjs babel-loaderã€‚<br>ä¸€æ—¦eslintæŠ¥é”™ï¼Œå°±æ²¡å¿…è¦å†æ‰§è¡Œ babel-loaderæ¥äº†ï¼Œ<br>åè¿‡æ¥ï¼Œä¸€æ—¦babel-loaderç¼–è¯‘åï¼Œå…¶ç¼–è¯‘ä»£ç è‚¯å®šæŠ¥ä¸€å¤§å †eslinté”™è¯¯ã€‚</p><p>å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œé…ç½®ï¼Œä¿è¯eslintå…ˆæ‰§è¡Œå‘¢ï¼Ÿ<br>é¦–å…ˆæ’ä»¶é¡ºåºä¸Šï¼Œeslintåœ¨å‰ï¼Œè€Œä¸”ç»™é…ç½®ä¸€ä¸ªå‚æ•°å³å¯ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  enforce: <span class="string">'pre'</span>,<span class="comment">// ä¼˜å…ˆæ‰§è¡Œ</span></span><br><span class="line">  loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><p><a href="https://github.com/YeWills/webpack-code/tree/web4.4/webpack%E6%95%99%E7%A8%8B%E4%BB%A3%E7%A0%81/3.webpack%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/16.%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE" target="_blank" rel="noopener">åŸºç¡€ç”Ÿäº§é…ç½® demo</a></p><h2 id="æ„å»ºä¼˜åŒ–"><a href="#æ„å»ºä¼˜åŒ–" class="headerlink" title="æ„å»ºä¼˜åŒ–"></a>æ„å»ºä¼˜åŒ–</h2><h3 id="HMR"><a href="#HMR" class="headerlink" title="HMR"></a>HMR</h3><p>HMR: ç§°ä¹‹ä¸º çƒ­æ¨¡å—æ›¿æ¢ / æ¨¡å—çƒ­æ›¿æ¢<br>ä½œç”¨ï¼šä¸€ä¸ªæ¨¡å—å‘ç”Ÿå˜åŒ–ï¼Œåªä¼šé‡æ–°æ‰“åŒ…è¿™ä¸€ä¸ªæ¨¡å—ï¼ˆè€Œä¸æ˜¯æ‰“åŒ…æ‰€æœ‰æ¨¡å—ï¼‰ï¼Œæå¤§æå‡æ„å»ºé€Ÿåº¦ï¼ŒåŒæ—¶æå‡é¡µé¢æ¸²æŸ“é€Ÿåº¦ï¼Œå› ä¸ºä¸ç”¨é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚</p><h4 id="å¼€å¯HMRï¼š"><a href="#å¼€å¯HMRï¼š" class="headerlink" title="å¼€å¯HMRï¼š"></a>å¼€å¯HMRï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="comment">// å¼€å¯HMRåŠŸèƒ½</span></span><br><span class="line">  hot: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸åŒç§ç±»æ–‡ä»¶HMR"><a href="#ä¸åŒç§ç±»æ–‡ä»¶HMR" class="headerlink" title="ä¸åŒç§ç±»æ–‡ä»¶HMR"></a>ä¸åŒç§ç±»æ–‡ä»¶HMR</h4><ul><li>æ ·å¼æ–‡ä»¶ï¼šå¯ä»¥ä½¿ç”¨HMRåŠŸèƒ½ï¼Œä¸ç”¨å†è¿›è¡Œé…ç½®ï¼šå› ä¸ºstyle-loaderå†…éƒ¨å®ç°äº†ï¼Œå› æ­¤å¼€å‘æ¨¡å¼ä¸‹ï¼Œcssè¯·ä½¿ç”¨style-loaderå¤„ç†ã€‚</li><li>jsæ–‡ä»¶ï¼šé»˜è®¤ä¸èƒ½ä½¿ç”¨HMRåŠŸèƒ½ â€“&gt; éœ€è¦ä¿®æ”¹jsä»£ç ï¼Œæ·»åŠ æ”¯æŒHMRåŠŸèƒ½çš„ä»£ç <br>  æ³¨æ„ï¼šHMRåŠŸèƒ½å¯¹jsçš„å¤„ç†ï¼Œåªèƒ½å¤„ç†éå…¥å£jsæ–‡ä»¶çš„å…¶ä»–æ–‡ä»¶ã€‚</li><li>htmlæ–‡ä»¶: é»˜è®¤ä¸èƒ½ä½¿ç”¨HMRåŠŸèƒ½.å¦‚æœå®åœ¨æƒ³åšHMRï¼Œè§£å†³æ–¹æ³•ï¼šä¿®æ”¹entryå…¥å£ï¼Œå°†htmlæ–‡ä»¶å¼•å…¥ã€‚ä¸è¿‡spaåº”ç”¨ä¸ç”¨åšhtmlçš„HMRã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">entry: [<span class="string">'./src/js/index.js'</span>, <span class="string">'./src/index.html'</span>],</span><br></pre></td></tr></table></figure></li></ul><h4 id="jsçš„HMR"><a href="#jsçš„HMR" class="headerlink" title="jsçš„HMR"></a>jsçš„HMR</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> print <span class="keyword">from</span> <span class="string">'./print'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'index.jsæ–‡ä»¶è¢«åŠ è½½äº†~'</span>);</span><br><span class="line">print(); <span class="comment">// è¿™é‡Œå†™ä¸€é</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">3</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="comment">// ä¸€æ—¦ module.hot ä¸ºtrueï¼Œè¯´æ˜å¼€å¯äº†HMRåŠŸèƒ½ã€‚ --&gt; è®©HMRåŠŸèƒ½ä»£ç ç”Ÿæ•ˆ</span></span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">'./print.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ–¹æ³•ä¼šç›‘å¬ print.js æ–‡ä»¶çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä»–æ¨¡å—ä¸ä¼šé‡æ–°æ‰“åŒ…æ„å»ºã€‚</span></span><br><span class="line">    <span class="comment">// ä¼šæ‰§è¡Œåé¢çš„å›è°ƒå‡½æ•°</span></span><br><span class="line">    print(); <span class="comment">// è¿™é‡Œé‡å¤å†™ä¸€é</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>jsçš„HMRä¸»è¦åˆ©ç”¨ module.hot.acceptæ–¹æ³•çš„ç¬¬äºŒå‚æ•°callbackï¼Œæ­¤æ–¹æ³•ä¼šç›‘å¬ print.js æ–‡ä»¶çš„å˜åŒ–ï¼Œä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä»–æ¨¡å—ä¸ä¼šé‡æ–°æ‰“åŒ…æ„å»ºã€‚<br>è¦æ³¨æ„çš„æ˜¯<strong>HMRåŠŸèƒ½å¯¹jsçš„å¤„ç†ï¼Œåªèƒ½å¤„ç†éå…¥å£jsæ–‡ä»¶çš„å…¶ä»–æ–‡ä»¶ã€‚</strong>åœ¨éå…¥å£æ–‡ä»¶ä¹Ÿå¯ä»¥ï¼Œä½†å¤±å»æ„ä¹‰ã€‚</p><h4 id="demo-1"><a href="#demo-1" class="headerlink" title="demo"></a>demo</h4><p><a href="https://github.com/YeWills/webpack-code/tree/web4.4/webpack%E6%95%99%E7%A8%8B%E4%BB%A3%E7%A0%81/4.webpack%E4%BC%98%E5%8C%96%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/18.HMR" target="_blank" rel="noopener">demo</a></p><h3 id="source-map"><a href="#source-map" class="headerlink" title="source map"></a>source map</h3><p>source mapä¸»è¦åœ¨ æ„å»ºé€Ÿåº¦ è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º æ˜¯å¦éšè—æºç  ä¸‰æ–¹é¢åšå¹³è¡¡ã€‚<br>åœ¨é€‰æ‹©å“ªä¸€ç§æ—¶ï¼ŒåŸºæœ¬ä¸ŠåŸºäºä»¥ä¸Šä¸‰æ–¹é¢è¿›è¡Œå¹³è¡¡ã€‚<br>æ˜¯å¦éšè—æºç ä¸»è¦ç”¨äºç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œä¸è¿‡ä¹Ÿä¸ä¸€å®šï¼Œæœ‰äº›ç”Ÿäº§ç¯å¢ƒä¸‹ä¹Ÿä¸è¦æ±‚éšè—æºç ã€‚<br>å°±reactè€Œè¨€ï¼Œ<br>å¼€å‘æ¨¡å¼ä¸‹ é€‰æ‹©eval-source-map<br>ç”Ÿäº§æ¨¡å¼æ ¹æ®æ˜¯å¦éšè—æºç  é€‰æ‹© nosources-source-map hidden-source-map source-map æˆ–ä¸source mapã€‚<br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">source-map: ä¸€ç§ æä¾›æºä»£ç åˆ°æ„å»ºåä»£ç æ˜ å°„ æŠ€æœ¯ ï¼ˆå¦‚æœæ„å»ºåä»£ç å‡ºé”™äº†ï¼Œé€šè¿‡æ˜ å°„å¯ä»¥è¿½è¸ªæºä»£ç é”™è¯¯ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="code">    [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</span></span><br><span class="line"></span><br><span class="line"><span class="code">    source-mapï¼šå¤–éƒ¨</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</span></span><br><span class="line"><span class="code">    inline-source-mapï¼šå†…è”</span></span><br><span class="line"><span class="code">      åªç”Ÿæˆä¸€ä¸ªå†…è”source-map</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</span></span><br><span class="line"><span class="code">    hidden-source-mapï¼šå¤–éƒ¨</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç é”™è¯¯åŸå› ï¼Œä½†æ˜¯æ²¡æœ‰é”™è¯¯ä½ç½®</span></span><br><span class="line"><span class="code">      ä¸èƒ½è¿½è¸ªæºä»£ç é”™è¯¯ï¼Œåªèƒ½æç¤ºåˆ°æ„å»ºåä»£ç çš„é”™è¯¯ä½ç½®</span></span><br><span class="line"><span class="code">    eval-source-mapï¼šå†…è”</span></span><br><span class="line"><span class="code">      æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ç”Ÿæˆå¯¹åº”çš„source-mapï¼Œéƒ½åœ¨eval</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½®</span></span><br><span class="line"><span class="code">    nosources-source-mapï¼šå¤–éƒ¨</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯, ä½†æ˜¯æ²¡æœ‰ä»»ä½•æºä»£ç ä¿¡æ¯</span></span><br><span class="line"><span class="code">    cheap-source-mapï¼šå¤–éƒ¨</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½® </span></span><br><span class="line"><span class="code">      åªèƒ½ç²¾ç¡®çš„è¡Œ</span></span><br><span class="line"><span class="code">    cheap-module-source-mapï¼šå¤–éƒ¨</span></span><br><span class="line"><span class="code">      é”™è¯¯ä»£ç å‡†ç¡®ä¿¡æ¯ å’Œ æºä»£ç çš„é”™è¯¯ä½ç½® </span></span><br><span class="line"><span class="code">      moduleä¼šå°†loaderçš„source mapåŠ å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="code">    å†…è” å’Œ å¤–éƒ¨çš„åŒºåˆ«ï¼š1. å¤–éƒ¨ç”Ÿæˆäº†æ–‡ä»¶ï¼Œå†…è”æ²¡æœ‰ 2. å†…è”æ„å»ºé€Ÿåº¦æ›´å¿«</span></span><br><span class="line"></span><br><span class="line"><span class="code">    å¼€å‘ç¯å¢ƒï¼šé€Ÿåº¦å¿«ï¼Œè°ƒè¯•æ›´å‹å¥½</span></span><br><span class="line"><span class="code">      é€Ÿåº¦å¿«(eval&gt;inline&gt;cheap&gt;...)</span></span><br><span class="line"><span class="code">        eval-cheap-souce-map</span></span><br><span class="line"><span class="code">        eval-source-map</span></span><br><span class="line"><span class="code">      è°ƒè¯•æ›´å‹å¥½  </span></span><br><span class="line"><span class="code">        souce-map</span></span><br><span class="line"><span class="code">        cheap-module-souce-map</span></span><br><span class="line"><span class="code">        cheap-souce-map</span></span><br><span class="line"></span><br><span class="line"><span class="code">      --&gt; eval-source-map  / eval-cheap-module-souce-map</span></span><br><span class="line"></span><br><span class="line"><span class="code">    ç”Ÿäº§ç¯å¢ƒï¼šæºä»£ç è¦ä¸è¦éšè—? è°ƒè¯•è¦ä¸è¦æ›´å‹å¥½</span></span><br><span class="line"><span class="code">      å†…è”ä¼šè®©ä»£ç ä½“ç§¯å˜å¤§ï¼Œæ‰€ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸ç”¨å†…è”</span></span><br><span class="line"><span class="code">      nosources-source-map å…¨éƒ¨éšè—</span></span><br><span class="line"><span class="code">      hidden-source-map åªéšè—æºä»£ç ï¼Œä¼šæç¤ºæ„å»ºåä»£ç é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="code">      --&gt; source-map / cheap-module-souce-map</span></span><br></pre></td></tr></table></figure></p><h3 id="oneof-åªè®©ä¸€ä¸ªloaderå¤„ç†"><a href="#oneof-åªè®©ä¸€ä¸ªloaderå¤„ç†" class="headerlink" title="oneof(åªè®©ä¸€ä¸ªloaderå¤„ç†)"></a>oneof(åªè®©ä¸€ä¸ªloaderå¤„ç†)</h3><p>å¸¸è§„çš„loaderå†™æ³•ä¼šå°†æ‰€æœ‰æ–‡ä»¶ç»™æ¯ä¸ªloaderéƒ½è¿‡ä¸€éï¼Œåªæ˜¯æœ‰äº›èƒ½è¢«loaderå¤„ç†ï¼Œæœ‰äº›ä¸èƒ½ï¼Œä½†éƒ½ä¼šè¢«è¿‡ä¸€éï¼Œè¿™æ ·ä¸åˆ©äºæ„å»ºé€Ÿåº¦ï¼Œoneofè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸€æ—¦æ–‡ä»¶è¢«å‘½ä¸­ï¼Œå°±ä¸ä¼šè¿‡ä¸‹é¢çš„loaderï¼Œæé«˜äº†æ„å»ºé€Ÿåº¦ã€‚</p><p>å¦‚æœä¸€ä¸ªç±»å‹æ–‡ä»¶ è¢«å¤šä¸ªloader åŒæ—¶å¤„ç†ï¼Œç•™ä¸€ä¸ªloaderåœ¨oneofé‡Œé¢å°±è¡Œã€‚</p><h3 id="å¤šçº¿ç¨‹"><a href="#å¤šçº¿ç¨‹" class="headerlink" title="å¤šçº¿ç¨‹"></a>å¤šçº¿ç¨‹</h3><p>thread-loader ï¼Œå¦‚æœé¡¹ç›®æ¯”è¾ƒå°ï¼Œå¯ä¸ç”¨å¯åŠ¨å¤šçº¿ç¨‹ï¼Œå› æ­¤å¤šçº¿ç¨‹çš„å¯åŠ¨ä¹Ÿéœ€è¦1ç§’æ—¶é—´ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">            test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">            exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">            use: [</span><br><span class="line">              <span class="comment">/* </span></span><br><span class="line"><span class="comment">                å¼€å¯å¤šè¿›ç¨‹æ‰“åŒ…ã€‚ </span></span><br><span class="line"><span class="comment">                è¿›ç¨‹å¯åŠ¨å¤§æ¦‚ä¸º600msï¼Œè¿›ç¨‹é€šä¿¡ä¹Ÿæœ‰å¼€é”€ã€‚</span></span><br><span class="line"><span class="comment">                åªæœ‰å·¥ä½œæ¶ˆè€—æ—¶é—´æ¯”è¾ƒé•¿ï¼Œæ‰éœ€è¦å¤šè¿›ç¨‹æ‰“åŒ…</span></span><br><span class="line"><span class="comment">              */</span></span><br><span class="line">              &#123;</span><br><span class="line">                loader: <span class="string">'thread-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  workers: <span class="number">2</span> <span class="comment">// è¿›ç¨‹2ä¸ª</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              &#123;</span><br><span class="line">                loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">                options: &#123;</span><br><span class="line">                  presets: [</span><br><span class="line">                    [</span><br><span class="line">                      <span class="string">'@babel/preset-env'</span>,</span><br><span class="line">                    ]</span><br><span class="line">                  ],</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="cdn-ä¸-external"><a href="#cdn-ä¸-external" class="headerlink" title="cdn ä¸ external"></a>cdn ä¸ external</h3><p>ä¸€æ—¦ä½¿ç”¨äº†cdnï¼Œå°±éœ€è¦ä½¿ç”¨externalï¼Œä»¥æ­¤å‘Šè¯‰webpackï¼Œä¸è¦æ‰“åŒ…é€šè¿‡cdnä¾èµ–çš„åŒ…ã€‚</p><h3 id="dll"><a href="#dll" class="headerlink" title="dll"></a>dll</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ç”¨åˆ°çš„åŒ…ï¼š</p><ul><li>webpack.DllPlugin</li><li>webpack.DllReferencePlugin</li><li>require(â€˜add-asset-html-webpack-pluginâ€™)<br>åŸç†ï¼š<br>webpack.dll.jsï¼š</li><li>å®šä¹‰ç¼–è¯‘åçš„åŒ…çš„è¾“å‡ºè·¯å¾„å’Œåå­—</li><li>é€šè¿‡webpack.DllPluginç”Ÿæˆmanifest.jsonæ˜ å°„æ–‡ä»¶ï¼Œå¹¶å®šä¹‰ç”Ÿæˆè·¯å¾„<br>webpack.config.js</li><li>DllReferencePlugin åˆ©ç”¨manifest.json å‘Šè¯‰webpackä¸è¦ç¼–è¯‘å“ªäº›ä¾èµ–åŒ…</li><li>AddAssetHtmlWebpackPlugin å°†webpack.dll.jsä¸­ç”Ÿæˆçš„ç¼–è¯‘åŒ…å¼•å…¥åˆ°htmlä¸­ï¼Œå¹¶å®šä¹‰å¥½scriptæ ‡ç­¾ã€‚</li></ul><h4 id="webpack-dll-js"><a href="#webpack-dll-js" class="headerlink" title="webpack.dll.js"></a>webpack.dll.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  ä½¿ç”¨dllæŠ€æœ¯ï¼Œå¯¹æŸäº›åº“ï¼ˆç¬¬ä¸‰æ–¹åº“ï¼šjqueryã€reactã€vue...ï¼‰è¿›è¡Œå•ç‹¬æ‰“åŒ…</span></span><br><span class="line"><span class="comment">    å½“ä½ è¿è¡Œ webpack æ—¶ï¼Œé»˜è®¤æŸ¥æ‰¾ webpack.config.js é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">    éœ€æ±‚ï¼šéœ€è¦è¿è¡Œ webpack.dll.js æ–‡ä»¶</span></span><br><span class="line"><span class="comment">      --&gt; webpack --config webpack.dll.js</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="comment">// æœ€ç»ˆæ‰“åŒ…ç”Ÿæˆçš„[name] --&gt; jquery</span></span><br><span class="line">    <span class="comment">// ['jquery'] --&gt; è¦æ‰“åŒ…çš„åº“æ˜¯jquery</span></span><br><span class="line">    jquery: [<span class="string">'jquery'</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].js'</span>,</span><br><span class="line">    path: resolve(__dirname, <span class="string">'dll'</span>),</span><br><span class="line">    library: <span class="string">'[name]_[hash]'</span> <span class="comment">// æ‰“åŒ…çš„åº“é‡Œé¢å‘å¤–æš´éœ²å‡ºå»çš„å†…å®¹å«ä»€ä¹ˆåå­—</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="comment">// æ‰“åŒ…ç”Ÿæˆä¸€ä¸ª manifest.json --&gt; æä¾›å’Œjqueryæ˜ å°„</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">      name: <span class="string">'[name]_[hash]'</span>, <span class="comment">// æ˜ å°„åº“çš„æš´éœ²çš„å†…å®¹åç§°</span></span><br><span class="line">      path: resolve(__dirname, <span class="string">'dll/manifest.json'</span>) <span class="comment">// è¾“å‡ºæ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  mode: <span class="string">'production'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h4 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; resolve &#125; = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> AddAssetHtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'add-asset-html-webpack-plugin'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'built.js'</span>,</span><br><span class="line">    path: resolve(__dirname, <span class="string">'build'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// å‘Šè¯‰webpackå“ªäº›åº“ä¸å‚ä¸æ‰“åŒ…ï¼ŒåŒæ—¶ä½¿ç”¨æ—¶çš„åç§°ä¹Ÿå¾—å˜~</span></span><br><span class="line">    <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">      manifest: resolve(__dirname, <span class="string">'dll/manifest.json'</span>)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// å°†æŸä¸ªæ–‡ä»¶æ‰“åŒ…è¾“å‡ºå»ï¼Œå¹¶åœ¨htmlä¸­è‡ªåŠ¨å¼•å…¥è¯¥èµ„æº</span></span><br><span class="line">    <span class="keyword">new</span> AddAssetHtmlWebpackPlugin(&#123;</span><br><span class="line">      filepath: resolve(__dirname, <span class="string">'dll/jquery.js'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  mode: <span class="string">'production'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>å¼€å‘ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–ï¼š</p><ul><li>ä¼˜åŒ–æ‰“åŒ…æ„å»ºé€Ÿåº¦<ul><li>HMR</li></ul></li><li>ä¼˜åŒ–ä»£ç è°ƒè¯•<ul><li>source-map</li></ul></li></ul><p>ç”Ÿäº§ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–ï¼š</p><ul><li>ä¼˜åŒ–æ‰“åŒ…æ„å»ºé€Ÿåº¦<ul><li>oneof</li><li>babelç¼“å­˜</li><li>å¤šè¿›ç¨‹æ‰“åŒ…</li><li>externals</li><li>dll</li></ul></li><li>ä¼˜åŒ–ä»£ç è¿è¡Œæ€§èƒ½<ul><li>ç¼“å­˜ï¼ˆhashç ï¼‰</li><li>tree shaking</li><li>code split</li><li>æ‡’åŠ è½½ï¼é¢„åŠ è½½</li><li>pwa</li></ul></li></ul><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><h4 id="publicPath"><a href="#publicPath" class="headerlink" title="publicPath"></a>publicPath</h4><p>å®šä¹‰æœåŠ¡å™¨ä¸­è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡æ’ä»¶ï¼Œç¼–è¯‘ååœ¨htmlä¸­çœ‹åˆ°å˜åŒ–ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Webpack App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- publicPathï¼š'/test/' --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/test/built.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="chunkFilename"><a href="#chunkFilename" class="headerlink" title="chunkFilename"></a>chunkFilename</h4><p>å®šä¹‰échunkå…¥å£æ–‡ä»¶åï¼Œå¦‚importåŠ¨æ€å†™æ³•çš„ï¼Œoptimization ç”Ÿæˆçš„ã€‚</p><h3 id="module"><a href="#module" class="headerlink" title="module"></a>module</h3><h4 id="enfore"><a href="#enfore" class="headerlink" title="enfore"></a>enfore</h4><p>å¯ä»¥è®©loaderæå‰æˆ–å»¶è¿Ÿæ‰§è¡Œã€‚</p><h4 id="oneOf"><a href="#oneOf" class="headerlink" title="oneOf"></a>oneOf</h4><p>å‚çœ‹æœ¬æ–‡å…¶ä»–åœ°æ–¹æåˆ°éƒ½ oneOf</p><h3 id="optimization"><a href="#optimization" class="headerlink" title="optimization"></a>optimization</h3><h4 id="runtimeChunk"><a href="#runtimeChunk" class="headerlink" title="runtimeChunk"></a>runtimeChunk</h4><p>å¦‚æœæœ‰importåŠ¨æ€å¼•å…¥å†™æ³•ï¼ŒruntimeChunkå¿…é¡»é…ç½®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">   splitChunks: &#123;</span><br><span class="line">     chunks: <span class="string">'all'</span></span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="comment">// å°†å½“å‰æ¨¡å—çš„è®°å½•å…¶ä»–æ¨¡å—çš„hashå•ç‹¬æ‰“åŒ…ä¸ºä¸€ä¸ªæ–‡ä»¶ runtime</span></span><br><span class="line">   <span class="comment">// è§£å†³ï¼šä¿®æ”¹aæ–‡ä»¶å¯¼è‡´bæ–‡ä»¶çš„contenthashå˜åŒ–</span></span><br><span class="line">   runtimeChunk: &#123;</span><br><span class="line">     name: <span class="function"><span class="params">entrypoint</span> =&gt;</span> <span class="string">`runtime-<span class="subst">$&#123;entrypoint.name&#125;</span>`</span></span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><h2 id="FAQ-1"><a href="#FAQ-1" class="headerlink" title="FAQ"></a>FAQ</h2><h4 id="webpack-ä¸-webpack-cli"><a href="#webpack-ä¸-webpack-cli" class="headerlink" title="webpack ä¸ webpack-cli"></a>webpack ä¸ webpack-cli</h4><p>è¿™å…³ç³»å°±å¥½æ¯” umi ä¸ create umi çš„å…³ç³»ã€‚</p><h4 id="é…ç½®æ–‡ä»¶ä¸ºä»€ä¹ˆä½¿ç”¨commonjs"><a href="#é…ç½®æ–‡ä»¶ä¸ºä»€ä¹ˆä½¿ç”¨commonjs" class="headerlink" title="é…ç½®æ–‡ä»¶ä¸ºä»€ä¹ˆä½¿ç”¨commonjs"></a>é…ç½®æ–‡ä»¶ä¸ºä»€ä¹ˆä½¿ç”¨commonjs</h4><p>æ‰€æœ‰çš„æ„å»ºå·¥å…·éƒ½æ˜¯åŸºäºnodeè¿è¡Œï¼Œnodeæ¨¡å—åŒ–é»˜è®¤é‡‡ç”¨commonjsã€‚</p><h4 id="loaderåšçš„äº‹æƒ…å°‘-pluginåšçš„äº‹æƒ…å¤š"><a href="#loaderåšçš„äº‹æƒ…å°‘-pluginåšçš„äº‹æƒ…å¤š" class="headerlink" title="loaderåšçš„äº‹æƒ…å°‘ pluginåšçš„äº‹æƒ…å¤š"></a>loaderåšçš„äº‹æƒ…å°‘ pluginåšçš„äº‹æƒ…å¤š</h4><p>loaderä¸€èˆ¬å°±è½¬ä¹‰ï¼Œå’Œå…¼å®¹cssï¼Œå‹ç¼©ç»™pluginã€‚</p><h4 id="importåŠ¨æ€å¯¼å…¥è¯­æ³•"><a href="#importåŠ¨æ€å¯¼å…¥è¯­æ³•" class="headerlink" title="importåŠ¨æ€å¯¼å…¥è¯­æ³•"></a>importåŠ¨æ€å¯¼å…¥è¯­æ³•</h4><p>importåŠ¨æ€å¯¼å…¥è¯­æ³•å†™æ³•å¿…ç„¶ä¼šå¯¼è‡´webpackè¿›è¡Œä»£ç åˆ†å‰²ã€‚</p><p>é€šè¿‡å¦‚ä¸‹çš„æ³¨é‡Šå†™æ³•ï¼Œè®©webpackä»£ç åˆ†å‰²æ—¶ï¼Œè®¾ç½®è¾“å‡ºæ–‡ä»¶åç§°ï¼Œ<br>é€šè¿‡webpackPrefetchè®¾ç½®é¢„åŠ è½½ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="comment">/* webpackChunkName: 'test', webpackPrefetch: true */</span><span class="string">'./test'</span>).then(<span class="function">(<span class="params">&#123; mul &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(mul(<span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="dllä¸ä»£ç åˆ†å‰²çš„è”ç³»ä¸åˆ†å·¥"><a href="#dllä¸ä»£ç åˆ†å‰²çš„è”ç³»ä¸åˆ†å·¥" class="headerlink" title="dllä¸ä»£ç åˆ†å‰²çš„è”ç³»ä¸åˆ†å·¥"></a>dllä¸ä»£ç åˆ†å‰²çš„è”ç³»ä¸åˆ†å·¥</h4><p>ä»£ç åˆ†å‰²è¯´çš„æ˜¯optimizationä¸importåŠ¨æ€å†™æ³•<br>é¡¹ç›®ä»£ç åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li>node module<br>å¯é€šè¿‡optimizationè¿›è¡Œåˆ†å‰²ï¼Œç¼ºç‚¹æ˜¯æ‰€æœ‰çš„node moduleåŒ…åªèƒ½æ‰“åŒ…æˆä¸€ä¸ªï¼›<br>ä¹Ÿå¯é€šè¿‡dllè¿›è¡Œåˆ†å‰²ï¼Œä¼˜ç‚¹åœ¨äºå¯å°†node moduleåŒ…è¿›è¡Œä¸€ä¸ªä¸ªåˆ†å‰²æ‰“åŒ…æˆå¤šä¸ªï¼›</li><li>ä¸šåŠ¡js<br>å¯é€šè¿‡importåŠ¨æ€å†™æ³•æ‰“åŒ…ã€‚<h4 id="4-26ç‰ˆæœ¬åä½¿ç”¨terser-webpack-pluginä½œå‹ç¼©"><a href="#4-26ç‰ˆæœ¬åä½¿ç”¨terser-webpack-pluginä½œå‹ç¼©" class="headerlink" title="4.26ç‰ˆæœ¬åä½¿ç”¨terser-webpack-pluginä½œå‹ç¼©"></a>4.26ç‰ˆæœ¬åä½¿ç”¨terser-webpack-pluginä½œå‹ç¼©</h4>æ–°çš„webpackç‰ˆæœ¬ä½¿ç”¨terser-webpack-pluginæ¥ä½œå‹ç¼©ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvas demo</title>
      <link href="/2020/05/01/canvas-demo/"/>
      <url>/2020/05/01/canvas-demo/</url>
      
        <content type="html"><![CDATA[<h2 id="å†™ä¸€ä¸ªå­—"><a href="#å†™ä¸€ä¸ªå­—" class="headerlink" title="å†™ä¸€ä¸ªå­—"></a>å†™ä¸€ä¸ªå­—</h2><h3 id="demo-åœ°å€"><a href="#demo-åœ°å€" class="headerlink" title="demo åœ°å€"></a>demo åœ°å€</h3><p><a href>demoåœ°å€</a></p><h3 id="æ ¹æ®é€Ÿåº¦è®¾ç½®çº¿æ¡ç²—ç»†"><a href="#æ ¹æ®é€Ÿåº¦è®¾ç½®çº¿æ¡ç²—ç»†" class="headerlink" title="æ ¹æ®é€Ÿåº¦è®¾ç½®çº¿æ¡ç²—ç»†"></a>æ ¹æ®é€Ÿåº¦è®¾ç½®çº¿æ¡ç²—ç»†</h3><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lastLineWidth = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">var</span> maxLineWidth = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">var</span> minLineWidth = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> maxStrokeV = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> minStrokeV = <span class="number">0.1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcLineWidth</span>(<span class="params"> time , distance </span>)</span>&#123;</span><br><span class="line">   <span class="comment">//v é€Ÿåº¦ ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŠ é€Ÿåº¦ï¼‰</span></span><br><span class="line">    <span class="keyword">var</span> v = distance / time;</span><br><span class="line">    <span class="keyword">var</span> resultLineWidth;</span><br><span class="line">    <span class="keyword">if</span>( v &lt;= minStrokeV )</span><br><span class="line">        resultLineWidth = maxLineWidth;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( v &gt;= maxStrokeV )</span><br><span class="line">        resultLineWidth = minLineWidth;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        resultLineWidth = maxLineWidth -</span><br><span class="line">        (v-minStrokeV)/(maxStrokeV-minStrokeV)*(maxLineWidth-minLineWidth);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//lastLineWidth == -1 è¯´æ˜æ˜¯åˆšå¼€å§‹ç”»å›¾ï¼Œæ­¤æ—¶lastLineWidthä¸å­˜åœ¨ï¼Œç›´æ¥å–resultLineWidth</span></span><br><span class="line">    <span class="keyword">if</span>( lastLineWidth == <span class="number">-1</span> )</span><br><span class="line">        <span class="keyword">return</span> resultLineWidth;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ‰äººè¯´ç›´æ¥ return resultLineWidthï¼Œè¿™æ ·çš„ç¼ºç‚¹æ˜¯ï¼Œçº¿æ¡è¿‡æ¸¡ä¸å¹³æ»‘ï¼›</span></span><br><span class="line"><span class="comment">//ä¸ºäº†è®©çº¿æ¡å¹³æ»‘è¿‡æ¸¡ï¼Œä½¿ç”¨åŸæ¥çš„å®½åº¦2/3ï¼ŒåŠ ä¸Šæ–°çš„å®½åº¦1/3</span></span><br><span class="line">    <span class="keyword">return</span> resultLineWidth*<span class="number">1</span>/<span class="number">3</span> + lastLineWidth*<span class="number">2</span>/<span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åˆšå¼€å§‹ç”»å›¾å®½åº¦å–å€¼"><a href="#åˆšå¼€å§‹ç”»å›¾å®½åº¦å–å€¼" class="headerlink" title="åˆšå¼€å§‹ç”»å›¾å®½åº¦å–å€¼"></a>åˆšå¼€å§‹ç”»å›¾å®½åº¦å–å€¼</h4><p>å‚è§ä¸Šé¢ä»£ç çš„<code>lastLineWidth == -1</code>æƒ…å†µã€‚</p><h4 id="2-3ä¸1-3çš„å¹³æ»‘è¿‡æ¸¡æŠ€å·§"><a href="#2-3ä¸1-3çš„å¹³æ»‘è¿‡æ¸¡æŠ€å·§" class="headerlink" title="2/3ä¸1/3çš„å¹³æ»‘è¿‡æ¸¡æŠ€å·§"></a>2/3ä¸1/3çš„å¹³æ»‘è¿‡æ¸¡æŠ€å·§</h4><p>å‚è€ƒä¸Šé¢ä»£ç ï¼Œå…¶å®ä¹Ÿä¸ä¸€å®šè¦è®¾ç½®æˆ1/3 2/3ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å€¼ï¼Œå¯ä»¥è‡ªå·±è¯•éªŒï¼Œåªè¦å£ç”»çœ‹èµ·æ¥å¹³æ»‘è¿‡æ¸¡å³å¯ã€‚</p><h3 id="ç¬”ç”»çš„ä¸»ä½“æ–¹æ³•"><a href="#ç¬”ç”»çš„ä¸»ä½“æ–¹æ³•" class="headerlink" title="ç¬”ç”»çš„ä¸»ä½“æ–¹æ³•"></a>ç¬”ç”»çš„ä¸»ä½“æ–¹æ³•</h3><h4 id="ä»onmousedownå¼€å§‹"><a href="#ä»onmousedownå¼€å§‹" class="headerlink" title="ä»onmousedownå¼€å§‹"></a>ä»onmousedownå¼€å§‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">beginStroke</span>(<span class="params">point</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    isMouseDown = <span class="literal">true</span></span><br><span class="line">    <span class="comment">//è®¾ç½®æŒ‰ä¸‹é¼ æ ‡æ—¶çš„é¼ æ ‡åæ ‡ ä¸ æ­¤æ—¶çš„æ—¶é—´æˆ³</span></span><br><span class="line">    lastLoc = windowToCanvas(point.x, point.y)</span><br><span class="line">    lastTimestamp = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åªåœ¨isMouseDown-trueæ—¶æ‰ç”»å›¾"><a href="#åªåœ¨isMouseDown-trueæ—¶æ‰ç”»å›¾" class="headerlink" title="åªåœ¨isMouseDown trueæ—¶æ‰ç”»å›¾"></a>åªåœ¨isMouseDown trueæ—¶æ‰ç”»å›¾</h4><p>onmousedownæ—¶è®¾ç½®isMouseDownä¸ºtrueï¼Œåœ¨é¼ æ ‡æ¾å¼€(onmouseup)ã€é¼ æ ‡ç¦»å¼€domæ—¶(onmouseout)è®¾ç½®isMouseDownä¸ºfalseï¼Œ<br>onmousemoveæ—¶ä¸è®¾ç½® å€¼ï¼Œæ­¤äº‹ä»¶åªè´Ÿè´£ç”»å›¾ã€‚</p><h4 id="åœ¨onmousemoveäº‹ä»¶ä¸­ç”»å›¾"><a href="#åœ¨onmousemoveäº‹ä»¶ä¸­ç”»å›¾" class="headerlink" title="åœ¨onmousemoveäº‹ä»¶ä¸­ç”»å›¾"></a>åœ¨onmousemoveäº‹ä»¶ä¸­ç”»å›¾</h4><p>æ‰€ä»¥çš„ç»˜åˆ¶æ–¹æ³•éƒ½åœ¨æ­¤äº‹ä»¶ä¸­å†™ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">canvas.onmousemove = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">if</span>( isMouseDown )&#123;</span><br><span class="line">        moveStroke(&#123;<span class="attr">x</span>: e.clientX , <span class="attr">y</span>: e.clientY&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">moveStroke</span>(<span class="params">point</span>)</span>&#123;</span><br><span class="line"><span class="comment">//è·å–å½“å‰åæ ‡</span></span><br><span class="line">    <span class="keyword">var</span> curLoc = windowToCanvas( point.x , point.y );</span><br><span class="line">    <span class="keyword">var</span> curTimestamp = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    <span class="keyword">var</span> s = calcDistance( curLoc , lastLoc )</span><br><span class="line">    <span class="keyword">var</span> t = curTimestamp - lastTimestamp</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> lineWidth = calcLineWidth( t , s );</span><br><span class="line"></span><br><span class="line">    <span class="comment">//draw</span></span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.moveTo( lastLoc.x , lastLoc.y );</span><br><span class="line">    context.lineTo( curLoc.x , curLoc.y );</span><br><span class="line"></span><br><span class="line">    context.strokeStyle = strokeColor</span><br><span class="line">    context.lineWidth = lineWidth</span><br><span class="line">    <span class="comment">// lineCap lineJoin è®©çº¿æ¡æ›´åŠ å¹³æ»‘</span></span><br><span class="line">    context.lineCap = <span class="string">"round"</span></span><br><span class="line">    context.lineJoin = <span class="string">"round"</span></span><br><span class="line">    context.stroke()</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é‡ç½®ä¸Šä¸€æ¬¡çš„çŠ¶æ€</span></span><br><span class="line">    lastLoc = curLoc</span><br><span class="line">    lastTimestamp = curTimestamp</span><br><span class="line">    lastLineWidth = lineWidth</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="onmousedownã€onmousemoveä¹‹é—´è®¡ç®—è·ç¦»"><a href="#onmousedownã€onmousemoveä¹‹é—´è®¡ç®—è·ç¦»" class="headerlink" title="onmousedownã€onmousemoveä¹‹é—´è®¡ç®—è·ç¦»"></a>onmousedownã€onmousemoveä¹‹é—´è®¡ç®—è·ç¦»</h4><p>å¦‚ä¸Šé¢ã€Šç”»å›¾æ–¹æ³•ã€‹ä»£ç ï¼Œç¬”ç”»çš„ç§»åŠ¨å°±æ˜¯é€šè¿‡è®¡ç®—äºŒè€…ä¹‹é—´çš„ä½ç½®ç®—å‡ºæ¥çš„è·ç¦»ã€‚</p><h4 id="onmousemoveã€onmousemove-ä¹‹é—´è®¡ç®—è·ç¦»"><a href="#onmousemoveã€onmousemove-ä¹‹é—´è®¡ç®—è·ç¦»" class="headerlink" title="onmousemoveã€onmousemove ä¹‹é—´è®¡ç®—è·ç¦»"></a>onmousemoveã€onmousemove ä¹‹é—´è®¡ç®—è·ç¦»</h4><p>å¦‚ä¸Šé¢ã€Šç”»å›¾æ–¹æ³•ã€‹ä»£ç ä¸­çš„ä¸‹é¢å†…å®¹è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é‡ç½®ä¸Šä¸€æ¬¡çš„çŠ¶æ€</span></span><br><span class="line">    lastLoc = curLoc</span><br><span class="line">    lastTimestamp = curTimestamp</span><br><span class="line">    lastLineWidth = lineWidth</span><br></pre></td></tr></table></figure></p><h3 id="lineCap-lineJoin-è®©çº¿æ¡æ›´åŠ å¹³æ»‘"><a href="#lineCap-lineJoin-è®©çº¿æ¡æ›´åŠ å¹³æ»‘" class="headerlink" title="lineCap lineJoin è®©çº¿æ¡æ›´åŠ å¹³æ»‘"></a>lineCap lineJoin è®©çº¿æ¡æ›´åŠ å¹³æ»‘</h3><p>åœ¨æ²¡æœ‰åŠ ä¸‹é¢æ—¶ï¼Œæ•ˆæœå›¾å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">context.lineCap = <span class="string">"round"</span></span><br><span class="line">context.lineJoin = <span class="string">"round"</span></span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/canvas/canvas_demo/font.jpg" alt title class>                <p></p>            </figure><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿæˆ‘ä»¬ç”»çš„çº¿å…¶å®æ˜¯æœ‰å¾ˆå¤šæ®µçŸ©å½¢æ‹¼æ¥è€Œæˆï¼Œå¦‚æ­¤å•Šï¼Œåœ¨æ‹¼æ¥å¤„å°±ä¼šæœ‰ç¼éš™ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨çº¿æ®µçš„å¸½å­lineCapï¼Œå†åŠ ä¸€ä¸ªlineJoinï¼ŒåŒä¿é™©ï¼Œå¹³æ»‘è¿‡æ¸¡ï¼š<br><figure class="image-box">                <img src="/image/canvas/canvas_demo/line.jpg" alt title class>                <p></p>            </figure></p><h2 id="å›¾åƒå¤„ç†-ç¼©æ”¾å›¾ç‰‡"><a href="#å›¾åƒå¤„ç†-ç¼©æ”¾å›¾ç‰‡" class="headerlink" title="å›¾åƒå¤„ç†-ç¼©æ”¾å›¾ç‰‡"></a>å›¾åƒå¤„ç†-ç¼©æ”¾å›¾ç‰‡</h2><h3 id="æ”¾å¤§æˆ–ç¼©å°çš„æ˜¾ç¤º"><a href="#æ”¾å¤§æˆ–ç¼©å°çš„æ˜¾ç¤º" class="headerlink" title="æ”¾å¤§æˆ–ç¼©å°çš„æ˜¾ç¤º"></a>æ”¾å¤§æˆ–ç¼©å°çš„æ˜¾ç¤º</h3><p>æ”¾å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›å›¾åƒæ˜¾ç¤ºçš„ä¸­å¿ƒç‚¹ä¸åŸæ¥å›¾ç‰‡ä¸­å¿ƒç‚¹æ˜¯é‡åˆçš„ï¼Œä¸ºäº†ä¿è¯ä¸­å¿ƒç‚¹ä¸åŠ¨ï¼Œå°±å¿…é¡»æ‰¾å‡†æˆªå–å›¾ç‰‡çš„åæ ‡ç‚¹ï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/canvas/canvas_demo/scale.jpg" alt title class>                <p></p>            </figure></p><h4 id="æ€è·¯ä¸€-å¸¸è§„æ€è·¯ï¼šè¯¯åŒº"><a href="#æ€è·¯ä¸€-å¸¸è§„æ€è·¯ï¼šè¯¯åŒº" class="headerlink" title="æ€è·¯ä¸€(å¸¸è§„æ€è·¯ï¼šè¯¯åŒº)"></a>æ€è·¯ä¸€(å¸¸è§„æ€è·¯ï¼šè¯¯åŒº)</h4><p>å¸¸è§„çš„æ€æƒ³æ˜¯ä»åŸæ¥å›¾ç‰‡é€‰æ‹©ä¸€ä¸ªç‚¹ï¼Œç„¶åæˆªå–ä¸€ä¸ªåŒºåŸŸï¼Œæ”¾åˆ°ç”»å¸ƒä¸Šï¼Œè¿›è¡Œæ˜¾ç¤ºï¼Œå¦‚ä¸‹ï¼Œä¸‹é¢çš„è®¡ç®—æ–¹å¼æ— æ³•è¾¾åˆ°è‡ªåŠ¨ç¼©æ”¾è¦æ±‚ã€‚<br>è¿™ç§æ€è·¯ä¹Ÿå¯ä»¥è¾¾åˆ°ç¼©æ”¾ï¼Œä½†æ˜¯éœ€è¦å¤§é‡çš„è®¡ç®—ï¼Œéå¸¸éº»çƒ¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var imageWidth = 1152 * scale</span><br><span class="line">var imageHeight = 768 * scale</span><br><span class="line">var sx = imageWidth / 2 - canvas.width / 2</span><br><span class="line">var sy = imageHeight / 2 - canvas.height / 2</span><br><span class="line">context.drawImage( image , sx , sy , canvas.width , canvas.height </span><br><span class="line">    , 0 , 0 , canvas.width , canvas.height )</span><br></pre></td></tr></table></figure></p><h4 id="æ€è·¯äºŒ-æ¨è"><a href="#æ€è·¯äºŒ-æ¨è" class="headerlink" title="æ€è·¯äºŒ(æ¨è)"></a>æ€è·¯äºŒ(æ¨è)</h4><p>å‚è€ƒã€Šç»å…¸çš„ç¼©æ”¾å¤„ç†æ–¹æ¡ˆã€‹</p><h3 id="ç»å…¸çš„ç¼©æ”¾å¤„ç†ç®—æ³•"><a href="#ç»å…¸çš„ç¼©æ”¾å¤„ç†ç®—æ³•" class="headerlink" title="ç»å…¸çš„ç¼©æ”¾å¤„ç†ç®—æ³•"></a>ç»å…¸çš„ç¼©æ”¾å¤„ç†ç®—æ³•</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ç¼©æ”¾æ—¶å¿…é¡»ä¿è¯ ä¸­å¿ƒç‚¹ä¸åŠ¨ã€‚<br>æ”¾å¤§çš„æ—¶å€™ï¼Œxä¸ºè´Ÿæ•°ï¼Œè¾¾åˆ°æ”¾å¤§æ•ˆæœï¼Œç¼©å°æ—¶ï¼Œxä¸ºæ­£å€¼ï¼Œè¾¾åˆ°ç¼©å°æ•ˆæœï¼Œå®Œç¾å…¼å®¹æ”¾å¤§å’Œç¼©å°ä¸¤ç§æƒ…å†µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var imageWidth = 1152 * scale</span><br><span class="line">var imageHeight = 768 * scale</span><br><span class="line"></span><br><span class="line">x = canvas.width /2 - imageWidth / 2 </span><br><span class="line">y = canvas.height / 2 - imageHeight / 2</span><br><span class="line"></span><br><span class="line">context.clearRect( 0 , 0 , canvas.width , canvas.height )</span><br><span class="line">context.drawImage( image , x , y , imageWidth , imageHeight )</span><br></pre></td></tr></table></figure></p><h4 id="ä¿è¯ä¸­å¿ƒç‚¹ä¸åŠ¨"><a href="#ä¿è¯ä¸­å¿ƒç‚¹ä¸åŠ¨" class="headerlink" title="ä¿è¯ä¸­å¿ƒç‚¹ä¸åŠ¨"></a>ä¿è¯ä¸­å¿ƒç‚¹ä¸åŠ¨</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="é€‰å–åæ ‡ç‚¹æŠ€å·§"><a href="#é€‰å–åæ ‡ç‚¹æŠ€å·§" class="headerlink" title="é€‰å–åæ ‡ç‚¹æŠ€å·§"></a>é€‰å–åæ ‡ç‚¹æŠ€å·§</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="æ”¾å¤§æˆ–ç¼©æ”¾å¤„ç†å›¾ç‰‡"><a href="#æ”¾å¤§æˆ–ç¼©æ”¾å¤„ç†å›¾ç‰‡" class="headerlink" title="æ”¾å¤§æˆ–ç¼©æ”¾å¤„ç†å›¾ç‰‡"></a>æ”¾å¤§æˆ–ç¼©æ”¾å¤„ç†å›¾ç‰‡</h4><p>å‚è€ƒä¸Šé¢ï¼Œä¸ºäº†ç¼©æ”¾æ˜¾ç¤ºå›¾ç‰‡ï¼Œåœ¨drawImageçš„æœ€åä¸¤ä¸ªå‚æ•°æ—¶ï¼Œéƒ½è¿›è¡Œæ”¾å¤§æˆ–ç¼©æ”¾å¤„ç†ã€‚</p><h3 id="onmousemove-ä»£æ›¿-onchange"><a href="#onmousemove-ä»£æ›¿-onchange" class="headerlink" title="onmousemove ä»£æ›¿ onchange"></a>onmousemove ä»£æ›¿ onchange</h3><p>ä¸ºäº†è¾¾åˆ°é¼ æ ‡ç§»åŠ¨æ—¶å°±è§¦å‘ç»˜å›¾ï¼Œéœ€è¦ä½¿ç”¨onmousemoveï¼Œå› ä¸ºonchangeåªæœ‰åœ¨åœæ­¢æ»‘åŠ¨æ—¶æ‰è§¦å‘äº‹ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//  slider.onchange = function()&#123;</span><br><span class="line">//      scale = slider.value</span><br><span class="line">//      drawImage( image , scale )</span><br><span class="line">//  &#125;</span><br><span class="line"></span><br><span class="line">slider.onmousemove = function()&#123;</span><br><span class="line">    scale = slider.value</span><br><span class="line">    drawImageByScale( scale )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ç¦»å±canvasæŠ€æœ¯"><a href="#ç¦»å±canvasæŠ€æœ¯" class="headerlink" title="ç¦»å±canvasæŠ€æœ¯"></a>ç¦»å±canvasæŠ€æœ¯</h2><h3 id="æ°´å°demo"><a href="#æ°´å°demo" class="headerlink" title="æ°´å°demo"></a>æ°´å°demo</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å®šä¹‰ä¸€ä¸ªæ°´å°çš„canvasï¼Œdisplay è®¾ç½®ä¸ºä¸å¯è§ï¼Œè®©åå°†æ­¤canvasä½œä¸º drawImage çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç»˜åˆ¶åˆ°ç”»å¸ƒå½“ä¸­ã€‚<br>å› ä¸ºæ°´å°çš„canvasæœ¬èº«ä¸è¢«æ˜¾ç¤ºï¼Œè€Œåªå°†å…¶æŠ•å½±æ˜¾ç¤ºåˆ°ç”»å¸ƒå½“ä¸­ï¼Œå› æ­¤ç§°ä¹‹ä¸ºç¦»å±canvasã€‚<br><figure class="image-box">                <img src="/image/canvas/canvas_demo/go_canvas.jpg" alt title class>                <p></p>            </figure></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŸæ¥çš„canvaså°†ä¼šè¢«codyåˆ°ä¸Šä¸€ä¸ªå›¾ç‰‡ç”»å¸ƒä¸­ä½œä¸ºæ°´å°å±•ç¤ºï¼Œä¸éœ€è¦å±•ç¤ºåŸæ¥çš„canvasï¼Œå› æ­¤éšè—åŸæœ‰çš„canvas --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"watermark-canvas"</span> <span class="attr">style</span>=<span class="string">"display:none;margin:0 auto;border:1px solid #aaa;"</span>&gt;</span></span><br><span class="line">        æ‚¨çš„æµè§ˆå™¨å°šä¸æ”¯æŒcanvas</span><br><span class="line">    <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setup watermark canvas</span></span><br><span class="line">   watermarkCanvas.width = <span class="number">600</span></span><br><span class="line">   watermarkCanvas.height = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">   watermarkContext.font = <span class="string">"bold 50px Arial"</span></span><br><span class="line">   watermarkContext.lineWidth = <span class="string">"1"</span></span><br><span class="line">   watermarkContext.fillStyle = <span class="string">"rgba( 255 , 255 , 255 , 0.5 )"</span></span><br><span class="line">   watermarkContext.textBaseline = <span class="string">"middle"</span>;</span><br><span class="line">   watermarkContext.fillText( <span class="string">"== liuyubobobo.com =="</span> , <span class="number">20</span> , <span class="number">50</span> )</span><br><span class="line">   </span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">drawImage</span>(<span class="params"> image , scale </span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">           imageWidth = <span class="number">1152</span> * scale</span><br><span class="line">           imageHeight = <span class="number">768</span> * scale</span><br><span class="line">           x = canvas.width /<span class="number">2</span> - imageWidth / <span class="number">2</span></span><br><span class="line">           y = canvas.height / <span class="number">2</span> - imageHeight / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">           context.clearRect( <span class="number">0</span> , <span class="number">0</span> , canvas.width , canvas.height )</span><br><span class="line">           context.drawImage( image , x , y , imageWidth , imageHeight )</span><br><span class="line">           context.drawImage( watermarkCanvas , canvas.width - watermarkCanvas.width ,</span><br><span class="line">                                                 canvas.height - watermarkCanvas.height )</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure><h4 id="å°†canvasä½œä¸ºdrawImageå‚æ•°"><a href="#å°†canvasä½œä¸ºdrawImageå‚æ•°" class="headerlink" title="å°†canvasä½œä¸ºdrawImageå‚æ•°"></a>å°†canvasä½œä¸ºdrawImageå‚æ•°</h4><p>åˆ©ç”¨äº†drawImage å¯ä»¥å°†å›¾ç‰‡å’Œcanvasä½œä¸ºå‚æ•°è¿›è¡Œå¤„ç†ã€‚</p><h3 id="æ”¾å¤§é•œ"><a href="#æ”¾å¤§é•œ" class="headerlink" title="æ”¾å¤§é•œ"></a>æ”¾å¤§é•œ</h3><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>åªä½¿ç”¨ä¸€å¼ é«˜æ¸…å›¾ç‰‡ã€‚<br>ç¦»å±canvasç»˜åˆ¶åŸå°ºå¯¸å›¾ç‰‡ï¼Œå¹¶ä¸”display noneã€‚<br>åŸå±canvasç»˜åˆ¶ç¼©æ”¾åå›¾ç‰‡ï¼Œ<br>è®¡ç®—ç¦»å±ä¸ç¼©æ”¾åå›¾ç‰‡çš„ å€ç‡ï¼Œä»¥æ­¤ä½œä¸ºç¼©æ”¾å‚æ•°ã€‚<br>åŸå±ç»˜åˆ¶å¥½åå°±ä¸åŠ¨å®ƒäº†ï¼Œ<br>æ¯æ¬¡æ”¾å¤§é•œæ—¶ï¼Œéƒ½ä½¿ç”¨clipå‰ªåˆ‡åŒºæ˜¾ç¤ºç¦»å±æŠ•å°„ã€‚<br>å¯ä»¥å‚è€ƒä¸Šé¢ä»£ç ã€‚<br><figure class="image-box">                <img src="/image/canvas/canvas_demo/big.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä»£ç -å’Œ-demoåœ°å€"><a href="#ä»£ç -å’Œ-demoåœ°å€" class="headerlink" title="ä»£ç  å’Œ demoåœ°å€"></a>ä»£ç  å’Œ demoåœ°å€</h4><p><a href="http://127.0.0.1:3000/canvas-image/04-image-magnifier/index.html" target="_blank" rel="noopener">demoåœ°å€</a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">style</span>=<span class="string">"display:block;margin:0 auto;border:1px solid #aaa;"</span>&gt;</span></span><br><span class="line">      æ‚¨çš„æµè§ˆå™¨å°šä¸æ”¯æŒcanvas</span><br><span class="line">  <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"offCanvas"</span> <span class="attr">style</span>=<span class="string">"display: none"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">"canvas"</span>)</span><br><span class="line">      <span class="keyword">var</span> context = canvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> offCanvas = <span class="built_in">document</span>.getElementById(<span class="string">"offCanvas"</span>)</span><br><span class="line">      <span class="keyword">var</span> offContext = offCanvas.getContext(<span class="string">"2d"</span>)</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> image = <span class="keyword">new</span> Image()</span><br><span class="line">      <span class="keyword">var</span> isMouseDown = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">var</span> scale</span><br><span class="line"></span><br><span class="line">      <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">          canvas.width = <span class="number">1152</span></span><br><span class="line">          canvas.height = <span class="number">768</span></span><br><span class="line"></span><br><span class="line">          image.src = <span class="string">"img-lg.jpg"</span></span><br><span class="line">          image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">              offCanvas.width = image.width</span><br><span class="line">              offCanvas.height = image.height</span><br><span class="line">              scale = offCanvas.width / canvas.width</span><br><span class="line"></span><br><span class="line">              context.drawImage( image , <span class="number">0</span> , <span class="number">0</span> , canvas.width , canvas.height )</span><br><span class="line">              offContext.drawImage( image , <span class="number">0</span> , <span class="number">0</span> )</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">drawMagnifier</span>(<span class="params"> point </span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">         <span class="comment">//è®¾ç½®æ”¾å¤§é•œåœ†åŠå¾„</span></span><br><span class="line">          <span class="keyword">var</span> mr = <span class="number">200</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> imageLG_cx = point.x * scale</span><br><span class="line">          <span class="keyword">var</span> imageLG_cy = point.y * scale</span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> sx = imageLG_cx - mr</span><br><span class="line">          <span class="keyword">var</span> sy = imageLG_cy - mr</span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> dx = point.x - mr</span><br><span class="line">          <span class="keyword">var</span> dy = point.y - mr</span><br><span class="line"></span><br><span class="line">          context.save()</span><br><span class="line"></span><br><span class="line">          context.lineWidth = <span class="number">10.0</span></span><br><span class="line">          context.strokeStyle = <span class="string">"#069"</span></span><br><span class="line">          <span class="comment">//ä½¿ç”¨å‰ªåˆ‡ clip æ¥åšæ”¾å¤§é•œ</span></span><br><span class="line">          context.beginPath()</span><br><span class="line">          context.arc( point.x , point.y , mr , <span class="number">0</span> , <span class="built_in">Math</span>.PI*<span class="number">2</span> , <span class="literal">true</span> )</span><br><span class="line">          context.stroke()</span><br><span class="line">          context.clip()</span><br><span class="line">          context.drawImage( offCanvas , sx , sy , <span class="number">2</span>*mr , <span class="number">2</span>*mr , dx , dy , <span class="number">2</span>*mr , <span class="number">2</span>*mr )</span><br><span class="line">          context.restore()</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h4 id="è®¡ç®—ç¦»å±ä¿¡æ¯"><a href="#è®¡ç®—ç¦»å±ä¿¡æ¯" class="headerlink" title="è®¡ç®—ç¦»å±ä¿¡æ¯"></a>è®¡ç®—ç¦»å±ä¿¡æ¯</h4><p>è¿™é‡Œéœ€è¦è®¡ç®—ç¦»å±canvasçš„è¿™äº›ä¿¡æ¯ï¼ˆsx , sy , 2<em>mr , 2</em>mrï¼‰ï¼ŒåŸç†è§ä¸‹å›¾ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.drawImage( offCanvas , sx , sy , 2*mr , 2*mr , dx , dy , 2*mr , 2*mr )</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/canvas/canvas_demo/go_canvas1.jpg" alt title class>                <p></p>            </figure><h4 id="è®¡ç®—åŸå±ä¿¡æ¯"><a href="#è®¡ç®—åŸå±ä¿¡æ¯" class="headerlink" title="è®¡ç®—åŸå±ä¿¡æ¯"></a>è®¡ç®—åŸå±ä¿¡æ¯</h4><p>è¿™é‡Œéœ€è¦è®¡ç®—ç¦»å±canvasçš„è¿™äº›ä¿¡æ¯ï¼ˆdx , dy , 2<em>mr , 2</em>mrï¼‰ï¼ŒåŸç†è§ä¸‹å›¾ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.drawImage( offCanvas , sx , sy , 2*mr , 2*mr , dx , dy , 2*mr , 2*mr )</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/canvas/canvas_demo/go_canvas2.jpg" alt title class>                <p></p>            </figure><h4 id="ä½¿ç”¨å‰ªåˆ‡-clip-æ¥åšæ”¾å¤§é•œ"><a href="#ä½¿ç”¨å‰ªåˆ‡-clip-æ¥åšæ”¾å¤§é•œ" class="headerlink" title="ä½¿ç”¨å‰ªåˆ‡ clip æ¥åšæ”¾å¤§é•œ"></a>ä½¿ç”¨å‰ªåˆ‡ clip æ¥åšæ”¾å¤§é•œ</h4><p>è§ä¸Šé¢ä»£ç ã€‚</p><h4 id="ä¸ºä»€ä¹ˆclipä¸éšè—åŸå±å›¾ç‰‡"><a href="#ä¸ºä»€ä¹ˆclipä¸éšè—åŸå±å›¾ç‰‡" class="headerlink" title="ä¸ºä»€ä¹ˆclipä¸éšè—åŸå±å›¾ç‰‡"></a>ä¸ºä»€ä¹ˆclipä¸éšè—åŸå±å›¾ç‰‡</h4><p>åˆšå¼€å§‹ä»¥ä¸ºclipå¯èƒ½ä¼šéšè—åŸå±å›¾ç‰‡ï¼Œç»“æœæ²¡æœ‰ï¼Œç©¶å…¶åŸå› ï¼Œä¼°è®¡æ˜¯åŸå±å›¾ç‰‡æ˜¯åœ¨clipä¹‹å‰å°±ç»˜åˆ¶å¥½äº†ï¼Œæ‰€ä»¥ä¸å—å½±å“ï¼ŒåæœŸç»˜åˆ¶çš„ç¦»å±æŠ•å°„å°±å—å½±å“äº†</p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvasç¬”è®°</title>
      <link href="/2020/05/01/canvas/"/>
      <url>/2020/05/01/canvas/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="html5ã€canvasã€svgã€WebGLå†å²"><a href="#html5ã€canvasã€svgã€WebGLå†å²" class="headerlink" title="html5ã€canvasã€svgã€WebGLå†å²"></a>html5ã€canvasã€svgã€WebGLå†å²</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>html5çš„è‰æ¡ˆå¤§æ¦‚æ˜¯2008å¹´å¼€å§‹åˆ¶å®šï¼Œç”¨æ¥å–ä»£1999åˆ¶å®šçš„html 4.1ï¼Œç»å†äº†html5è‰æ¡ˆåˆ¶å®šï¼Œåˆ°2014å¹´æœ€ç»ˆæ ‡å‡†å‘å¸ƒã€‚<br>canvas <a href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics" target="_blank" rel="noopener">ç”±è‹¹æœå…¬å¸åœ¨ 2004 å¹´å‰åå‘æ˜è¿ç”¨äºSafariï¼Œåæ¥å…¶ä»–çš„æµè§ˆå™¨å¼€å§‹è·Ÿè¿›</a>ï¼Œåæ¥canvasè¢«æ”¶å…¥åˆ°html5è‰æ¡ˆä¸­ï¼Œä¹‹åå¤§å®¶å¯¹canvaså…³æ³¨è¶Šæ¥è¶Šå¤š(canvasè¢«å¤§å®¶è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ï¼Œæˆ‘æ¨æµ‹åº”è¯¥åœ¨2008å·¦å³)ï¼Œä¸€ç›´åˆ°2014å¹´éšç€html5ï¼Œä½œä¸ºæ ‡å‡†å‘å¸ƒã€‚<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG" target="_blank" rel="noopener">SVG æ˜¯ç”±ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆW3Cï¼‰è‡ª 1999 å¹´å¼€å§‹å¼€å‘çš„å¼€æ”¾æ ‡å‡†</a>ï¼Œä¸canvasä½¿ç”¨jsç»˜å›¾ä¸åŒï¼Œsvgä½¿ç”¨xmlæ¥ç”»å›¾ã€‚</p><h4 id="canvasæ˜¯html5"><a href="#canvasæ˜¯html5" class="headerlink" title="canvasæ˜¯html5"></a>canvasæ˜¯html5</h4><p>canvasæ˜¯html5.0çš„æ ‡å‡†ï¼Œåœ¨æ­¤å‰çš„æ ‡å‡†(W3Cæ ‡å‡†,html4.1)ä¸­ä»æœªæœ‰è¿‡canvasï¼Œåœ¨html5.0æ ‡å‡†äº2014å¹´è¢«å…¬å¸ƒä»¥å‰ï¼Œcanvasä¸€ç›´å­˜åœ¨äºhtml5.0çš„è‰æ¡ˆå½“ä¸­ã€‚</p><h4 id="svgä¸æ˜¯html5æ–°åˆ›çš„æ ‡ç­¾"><a href="#svgä¸æ˜¯html5æ–°åˆ›çš„æ ‡ç­¾" class="headerlink" title="svgä¸æ˜¯html5æ–°åˆ›çš„æ ‡ç­¾"></a>svgä¸æ˜¯html5æ–°åˆ›çš„æ ‡ç­¾</h4><p>svgä¸æ˜¯html5æ‰å‡ºç°çš„æ–°æ ‡ç­¾ï¼Œå®ƒåœ¨1999å¹´å°±è¢«å¼€å§‹åˆ¶å®šï¼Œå½¼æ—¶è¿˜æ²¡æœ‰æ‰€è°“çš„html5ï¼Œä½†è¿™ä¸å¦¨ç¢svgä¸html5çš„è”ç³»ï¼Œå› ä¸ºåœ¨html5.0ä¸­ï¼Œsvgè¢«ä¸°å¯Œäº†æ›´å¤šçš„åŠŸèƒ½ã€‚<br>æ‰€ä»¥åœ¨html5ä¹‹å‰ä¸ä¹‹åçš„svgï¼Œå…¶åŠŸèƒ½è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><h4 id="canvasä¸svgçš„å‘å±•å’ŒåŒºåˆ«"><a href="#canvasä¸svgçš„å‘å±•å’ŒåŒºåˆ«" class="headerlink" title="canvasä¸svgçš„å‘å±•å’ŒåŒºåˆ«"></a>canvasä¸svgçš„å‘å±•å’ŒåŒºåˆ«</h4><p>svgä¸æ˜¯ä»€ä¹ˆæ–°çš„æŠ€æœ¯äº†ï¼Œäº1999å¹´è¢«åˆ›é€ åï¼Œä¸€ç›´åˆ°ç°åœ¨ï¼Œsvgå¹¶æ²¡æœ‰å¤ªå¤šçš„çªç ´å‘å±•ã€‚<br>ç›¸æ¯”è€Œè¨€ï¼Œcanvasæ˜¯æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œäº2008å¹´(å¹´ä»½åŸºäºä¸Šé¢çš„æ¨æµ‹)è¢«å¤§å®¶å…³æ³¨ä»¥æ¥ï¼Œåˆ°ç°åœ¨ï¼Œå…ˆåè¢«ç”¨äº2Dï¼Œ3Dçš„ä½å›¾ç»˜åˆ¶ã€‚</p><h5 id="ä»å‘å±•é€Ÿåº¦è€Œè¨€ï¼š"><a href="#ä»å‘å±•é€Ÿåº¦è€Œè¨€ï¼š" class="headerlink" title="ä»å‘å±•é€Ÿåº¦è€Œè¨€ï¼š"></a>ä»å‘å±•é€Ÿåº¦è€Œè¨€ï¼š</h5><p>ä»è¿™ä¸€ç‚¹æ¥çœ‹ï¼Œcanvasè¦æ¯”svgå‘å±•æ›´å¿«ã€‚</p><h5 id="ä»è¿ç”¨çš„è§’åº¦æ¥è®²ï¼š"><a href="#ä»è¿ç”¨çš„è§’åº¦æ¥è®²ï¼š" class="headerlink" title="ä»è¿ç”¨çš„è§’åº¦æ¥è®²ï¼š"></a>ä»è¿ç”¨çš„è§’åº¦æ¥è®²ï¼š</h5><p>svgç”¨äºçŸ¢é‡å›¾ç»˜åˆ¶ï¼Œcanvasç”¨äºä½å›¾ç»˜åˆ¶ï¼Œæ‰€ä»¥äºŒè€…ä¸æ˜¯çº¯ç²¹çš„æ›¿ä»£ç«äº‰å…³ç³»ï¼›</p><ul><li>åªè¦ä½ å¯¹çŸ¢é‡å›¾æœ‰éœ€æ±‚ï¼Œsvgæ°¸è¿œä¸ä¼šè¢«æ¶ˆå¤±ï¼›</li><li>åªè¦ä½ å¯¹ä½å›¾æœ‰éœ€æ±‚ï¼Œcanvasæ°¸è¿œä¸ä¼šè¢«æ¶ˆå¤±ï¼›</li><li>åªè¦ä½ å¯¹å›¾æœ‰éœ€æ±‚ï¼Œsvgå’Œcanvaséƒ½æ˜¯ä½ çš„é€‰æ‹©ï¼›<h5 id="å°±å…¼å®¹æ€§è€Œè¨€ï¼š"><a href="#å°±å…¼å®¹æ€§è€Œè¨€ï¼š" class="headerlink" title="å°±å…¼å®¹æ€§è€Œè¨€ï¼š"></a>å°±å…¼å®¹æ€§è€Œè¨€ï¼š</h5>svgã€canvas æ‰€æœ‰çš„æµè§ˆå™¨éƒ½å…¼å®¹ï¼Œä¸åŒçš„æ˜¯ï¼Œsvgå› ä¸ºå¾ˆæ—©å°±å‡ºç°äº†ï¼Œå°±ç®—æ˜¯ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¹Ÿéƒ½å…¼å®¹ï¼›<br>è€Œcanvasç›¸å¯¹è€Œè¨€æ¯”è¾ƒæ–°ï¼Œä¸€äº›ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸æ”¯æŒï¼Œå¥½æ¶ˆæ¯æ˜¯ï¼Œéƒ½9102äº†ï¼Œå¸‚é¢ä¸Šçš„æµè§ˆå™¨çš„ç‰ˆæœ¬åŸºæœ¬éƒ½æ”¯æŒcanvasï¼Œä¸ç”¨å¤ªæ‹…å¿ƒå…¼å®¹é—®é¢˜ã€‚<h4 id="WebGLä¸canvasçš„å…³ç³»"><a href="#WebGLä¸canvasçš„å…³ç³»" class="headerlink" title="WebGLä¸canvasçš„å…³ç³»"></a>WebGLä¸canvasçš„å…³ç³»</h4>WebGLæ˜¯åŸºäºcanvaså…ƒç´ ç»˜åˆ¶3Då›¾çš„js APIã€‚</li></ul><h3 id="canvasåŸºäºçŠ¶æ€ç»˜å›¾çš„ç‰¹æ€§"><a href="#canvasåŸºäºçŠ¶æ€ç»˜å›¾çš„ç‰¹æ€§" class="headerlink" title="canvasåŸºäºçŠ¶æ€ç»˜å›¾çš„ç‰¹æ€§"></a>canvasåŸºäºçŠ¶æ€ç»˜å›¾çš„ç‰¹æ€§</h3><h4 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å…ˆè®¾ç½®å¥½è·¯å¾„ä½œä¸ºç»˜å›¾çŠ¶æ€ï¼Œå†ä½¿ç”¨ç»˜åˆ¶çš„apiç»˜å›¾ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//è®¾ç½®çŠ¶æ€</span><br><span class="line">context.moveTo(100,100)</span><br><span class="line">context.lineTo(700,700)</span><br><span class="line">context.lineWidth = 10</span><br><span class="line">context.strokeStyle = â€œ#058â€</span><br><span class="line"></span><br><span class="line">//ç»˜å›¾</span><br><span class="line">context.stroke()</span><br></pre></td></tr></table></figure></p><h4 id="ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€"><a href="#ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€" class="headerlink" title="ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€"></a>ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€</h4><p>å¦‚ä¸Šé¢ä»£ç ï¼Œcanvasä¸é’ˆå¯¹æŸä¸€ä¸ªå½¢çŠ¶è¿›è¡ŒçŠ¶æ€è®¾ç½®ï¼Œå› æ­¤è®¾ç½®çš„çŠ¶æ€éƒ½æ˜¯é’ˆå¯¹å…¨å±€çš„ï¼Œå‡å¦‚æˆ‘ä»¬è¦å¯¹ç”»å¸ƒå†…å‡ ä¸ªå›¾å½¢åˆ†åˆ«è®¾ç½®çŠ¶æ€å¦‚é¢œè‰²ï¼Œ<br>æ­¤æ—¶éœ€é…åˆbeginPathä½¿ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line">context.moveTo(100,100)</span><br><span class="line">context.lineTo(700,700)</span><br><span class="line">context.lineWidth = 10</span><br><span class="line">context.strokeStyle = â€œ#058â€</span><br><span class="line"></span><br><span class="line">context.beginPath()</span><br><span class="line">context.moveTo(1100,1100)</span><br><span class="line">context.lineTo(1700,1700)</span><br><span class="line">context.lineWidth = 15</span><br><span class="line">context.strokeStyle = â€œredâ€</span><br><span class="line"></span><br><span class="line">//ç»˜å›¾</span><br><span class="line">context.stroke()</span><br></pre></td></tr></table></figure></p><h3 id="moveTo-ä¸-lineTo"><a href="#moveTo-ä¸-lineTo" class="headerlink" title="moveTo ä¸ lineTo"></a>moveTo ä¸ lineTo</h3><h4 id="beginPathä¸lineToä¸€èµ·ï¼ŒlineToç›¸å½“äº-moveTo"><a href="#beginPathä¸lineToä¸€èµ·ï¼ŒlineToç›¸å½“äº-moveTo" class="headerlink" title="beginPathä¸lineToä¸€èµ·ï¼ŒlineToç›¸å½“äº moveTo"></a>beginPathä¸lineToä¸€èµ·ï¼ŒlineToç›¸å½“äº moveTo</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line">context.moveTo(100,100)</span><br><span class="line">context.lineTo(700,700)</span><br></pre></td></tr></table></figure><p>ç­‰åŒäºï¼Œå› ä¸ºbeginPathç›¸å½“äºä»æ–°å¼€å§‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()</span><br><span class="line">context.lineTo(100,100)</span><br><span class="line">context.lineTo(700,700)</span><br></pre></td></tr></table></figure></p><h3 id="å…ˆå¡«å……åæè¾¹ï¼šå…ˆfillåstroke"><a href="#å…ˆå¡«å……åæè¾¹ï¼šå…ˆfillåstroke" class="headerlink" title="å…ˆå¡«å……åæè¾¹ï¼šå…ˆfillåstroke"></a>å…ˆå¡«å……åæè¾¹ï¼šå…ˆfillåstroke</h3><p>å¦‚æœä½ è¦å¯¹ä¸€ä¸ªçŸ©å½¢å¡«å……ï¼Œå¹¶ä¸”ç»˜åˆ¶æ ·å¼å¤šæ ·çš„è¾¹çº¿ï¼Œé‚£ä¹ˆè¯·å…ˆfillï¼Œåstrokeï¼Œåä¹‹ å¡«å……çš„æ•ˆæœå°±è¦†ç›–äº†çº¿æ¡çš„æ•ˆæœã€‚</p><h3 id="æ¥å£æ±‡é›†"><a href="#æ¥å£æ±‡é›†" class="headerlink" title="æ¥å£æ±‡é›†"></a>æ¥å£æ±‡é›†</h3><h4 id="çŸ©å½¢"><a href="#çŸ©å½¢" class="headerlink" title="çŸ©å½¢"></a>çŸ©å½¢</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rect( x , y , width , height )</span><br><span class="line">fillRect( x , y , width , height )</span><br><span class="line">strokeRect( x , y , width , height )</span><br></pre></td></tr></table></figure><h4 id="å¡«å……ä¸ç»˜åˆ¶"><a href="#å¡«å……ä¸ç»˜åˆ¶" class="headerlink" title="å¡«å……ä¸ç»˜åˆ¶"></a>å¡«å……ä¸ç»˜åˆ¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stroke()</span><br><span class="line">fill()</span><br></pre></td></tr></table></figure><h3 id="beginPathã€-closePath"><a href="#beginPathã€-closePath" class="headerlink" title="beginPathã€ closePath"></a>beginPathã€ closePath</h3><h4 id="ä»‹ç»-2"><a href="#ä»‹ç»-2" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>ç”»ä¸€ä¸ªå½¢çŠ¶æ—¶ï¼Œéœ€è¦cxt.beginPath()ï¼Œä½†closePathä¸æ˜¯å¿…é¡»ï¼Œå¯ä»¥ä¸ä½¿ç”¨ï¼Œä¸‹æ¬¡å†ä½¿ç”¨cxt.beginPath()æ—¶ï¼Œä¼šé»˜è®¤è‡ªåŠ¨closePathä¸Šä¸€ä¸ªè·¯å¾„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cxt.beginPath();</span><br><span class="line">cxt.arc( x+j*2*(RADIUS+1)+(RADIUS+1) , y+i*2*(RADIUS+1)+(RADIUS+1) , RADIUS , 0 , 2*Math.PI )</span><br><span class="line">cxt.closePath()</span><br><span class="line">cxt.fill()</span><br></pre></td></tr></table></figure></p><h4 id="closePathä¸æ˜¯å¿…é¡»"><a href="#closePathä¸æ˜¯å¿…é¡»" class="headerlink" title="closePathä¸æ˜¯å¿…é¡»"></a>closePathä¸æ˜¯å¿…é¡»</h4><p>å‚è€ƒä¸Šé¢åˆ†æ</p><h4 id="ç¬¬ä¸€ä¸ªbeginPathå¯ä»¥çœç•¥"><a href="#ç¬¬ä¸€ä¸ªbeginPathå¯ä»¥çœç•¥" class="headerlink" title="ç¬¬ä¸€ä¸ªbeginPathå¯ä»¥çœç•¥"></a>ç¬¬ä¸€ä¸ªbeginPathå¯ä»¥çœç•¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath()//å¯çœç•¥</span><br><span class="line">context.moveTo(100,100)</span><br><span class="line">context.lineTo(700,700)</span><br><span class="line"></span><br><span class="line">context.beginPath()</span><br><span class="line">context.moveTo(1100,1100)</span><br><span class="line">context.lineTo(1700,1700)</span><br></pre></td></tr></table></figure><h4 id="å°é—­å›¾å½¢æ¨èä½¿ç”¨closePath"><a href="#å°é—­å›¾å½¢æ¨èä½¿ç”¨closePath" class="headerlink" title="å°é—­å›¾å½¢æ¨èä½¿ç”¨closePath"></a>å°é—­å›¾å½¢æ¨èä½¿ç”¨closePath</h4><p>å°é—­å›¾å½¢ä½¿ç”¨closePathçš„å¥½å¤„åœ¨äºï¼Œè‡ªåŠ¨å°é—­ä¸¥å¯†ï¼Œä¸€äº›å°é—­ä¸é½ï¼Œæœ‰å‡¹è§’ç­‰ç­‰é—®é¢˜ï¼Œéƒ½ä¼šè¢«è‡ªåŠ¨è§£å†³ã€‚</p><h4 id="ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€-1"><a href="#ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€-1" class="headerlink" title="ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€"></a>ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€</h4><p>å‚è€ƒã€ŠcanvasåŸºäºçŠ¶æ€ç»˜å›¾çš„ç‰¹æ€§ â€“ ä½¿ç”¨beginPathæ¥åˆ†åˆ«è®¾ç½®çŠ¶æ€ã€‹</p><h3 id="ç”Ÿæˆ-2d-ç”»å¸ƒä¸Šä¸‹æ–‡çš„è¦ç´ "><a href="#ç”Ÿæˆ-2d-ç”»å¸ƒä¸Šä¸‹æ–‡çš„è¦ç´ " class="headerlink" title="ç”Ÿæˆ(2d)ç”»å¸ƒä¸Šä¸‹æ–‡çš„è¦ç´ "></a>ç”Ÿæˆ(2d)ç”»å¸ƒä¸Šä¸‹æ–‡çš„è¦ç´ </h3><p>æ³¨æ„çš„æ˜¯canvas.widthï¼Œä¸è¦ä½¿ç”¨cssçš„æ–¹å¼åµŒå…¥ï¼Œå…·ä½“åŸå› å¾…å†™ï¼Œæœ€å¥½ç›´æ¥ä»¥styleå±æ€§æˆ–jsç›´æ¥å†™å…¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var canvas = document.getElementById(&apos;canvas&apos;);</span><br><span class="line">var context = canvas.getContext(&quot;2d&quot;);</span><br><span class="line">canvas.width = WINDOW_WIDTH;</span><br><span class="line">canvas.height = WINDOW_HEIGHT;</span><br></pre></td></tr></table></figure></p><h3 id="çº¿æ¡å±æ€§"><a href="#çº¿æ¡å±æ€§" class="headerlink" title="çº¿æ¡å±æ€§"></a>çº¿æ¡å±æ€§</h3><h4 id="lineCap-çº¿æ¡çš„å¸½å­"><a href="#lineCap-çº¿æ¡çš„å¸½å­" class="headerlink" title="lineCap çº¿æ¡çš„å¸½å­"></a>lineCap çº¿æ¡çš„å¸½å­</h4><p>çº¿æ¡ä¸¤ç«¯çš„å€’è§’è®¾ç½®ã€‚</p><h4 id="lineJoin-æŠ˜çº¿çš„å¸½å­"><a href="#lineJoin-æŠ˜çº¿çš„å¸½å­" class="headerlink" title="lineJoin æŠ˜çº¿çš„å¸½å­"></a>lineJoin æŠ˜çº¿çš„å¸½å­</h4><p>è®¾ç½®æŠ˜çº¿ä¸¤æ¡çº¿ç›¸äº¤å¤„çš„å€’è§’ã€‚</p><h4 id="miterLimit-æŠ˜çº¿äº¤ç‚¹è·ç¦»"><a href="#miterLimit-æŠ˜çº¿äº¤ç‚¹è·ç¦»" class="headerlink" title="miterLimit æŠ˜çº¿äº¤ç‚¹è·ç¦»"></a>miterLimit æŠ˜çº¿äº¤ç‚¹è·ç¦»</h4><p>miterLimit æ˜¯æŠ˜çº¿ä¸­å¿ƒçº¿äº¤ç‚¹ä¸æŠ˜çº¿å¤–è¾¹çº¿äº¤ç‚¹è·ç¦»<br>æ­¤å±äºé€šå¸¸ä¸lineJoinä¸€èµ·ä½¿ç”¨ï¼Œç”¨æ¥è®¾ç½®æŠ˜çº¿çš„å°–è§’çš„å°–é”åº¦,ä¸‹é¢æ˜¯åŸç†å›¾ï¼š<br><figure class="image-box">                <img src="/image/canvas/miter.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç”»äº”è§’æ˜Ÿ"><a href="#ç”»äº”è§’æ˜Ÿ" class="headerlink" title="ç”»äº”è§’æ˜Ÿ"></a>ç”»äº”è§’æ˜Ÿ</h3><figure class="image-box">                <img src="/image/canvas/five_star.jpg" alt title class>                <p></p>            </figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line">          canvas.width = <span class="number">800</span>;</span><br><span class="line">          canvas.height = <span class="number">800</span>;</span><br><span class="line">          <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line">          context.lineWidth = <span class="number">10</span>;</span><br><span class="line">          drawStar(context, <span class="number">150</span>, <span class="number">300</span>, <span class="number">400</span>, <span class="number">400</span>)</span><br><span class="line">          <span class="comment">//rotateæ—‹è½¬è§’åº¦</span></span><br><span class="line">          <span class="comment">//r,R,x,y å°åœ†ï¼Œå¤§åœ†ï¼Œxæ–¹å‘åç§»é‡ï¼Œyæ–¹å‘åç§»é‡</span></span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">drawStar</span>(<span class="params">cxt,r,R,x,y,rotate=<span class="number">0</span></span>)</span>&#123;</span><br><span class="line">          cxt.beginPath();</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</span><br><span class="line">              cxt.lineTo(<span class="built_in">Math</span>.cos((<span class="number">18</span> + i*<span class="number">72</span> - rotate)/<span class="number">180</span> * <span class="built_in">Math</span>.PI) * R + x,</span><br><span class="line">              -<span class="built_in">Math</span>.sin((<span class="number">18</span> + i*<span class="number">72</span> - rotate)/<span class="number">180</span> * <span class="built_in">Math</span>.PI) * R + y);</span><br><span class="line">              cxt.lineTo(<span class="built_in">Math</span>.cos((<span class="number">54</span> + i*<span class="number">72</span> - rotate)/<span class="number">180</span> * <span class="built_in">Math</span>.PI) * r + x,</span><br><span class="line">              -<span class="built_in">Math</span>.sin((<span class="number">54</span> + i*<span class="number">72</span> - rotate)/<span class="number">180</span> * <span class="built_in">Math</span>.PI) * r + y);</span><br><span class="line">          &#125;</span><br><span class="line">          context.closePath();</span><br><span class="line">          context.stroke();</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="é˜´å½±çš„ç†è§£"><a href="#é˜´å½±çš„ç†è§£" class="headerlink" title="é˜´å½±çš„ç†è§£"></a>é˜´å½±çš„ç†è§£</h3><p>é˜´å½±æ˜¯å›´ç»•å›¾å½¢çš„ä¸€å±‚é˜´å½±å›¾å½¢ï¼Œè¿™ä¸ªé˜´å½±å›¾å½¢æ˜¯å›ºå®šçš„ï¼Œå½“ä½ å¯¹è¿™ä¸ªé˜´å½±å›¾å½¢è¿›è¡Œå‘å³åç§»æ—¶ï¼Œ<strong>é˜´å½±å›¾å½¢å¤§å°ä¸å˜ï¼Œå›¾å½¢å°†æ•´ä½“å¹³ç§»</strong>ï¼Œè¿™æ ·é˜´å½±å›¾å½¢çš„å·¦ä¾§å°±ä¼šè¢«åŸå›¾å½¢ç»™<strong>é®æŒ¡</strong>ï¼Œå¯¼è‡´çœ‹èµ·æ¥åªçœ‹åˆ°å›¾å½¢åªæœ‰å³ä¾§æ‰æœ‰é˜´å½±ã€‚</p><h4 id="shadowOffsetX"><a href="#shadowOffsetX" class="headerlink" title="shadowOffsetX"></a>shadowOffsetX</h4><p>ä¸‹é¢ä¸¤å¼ å›¾ç‰‡åˆ†åˆ«å±•ç¤ºäº† é˜´å½±å›¾å½¢å¹³ç§»åŸç†ï¼Œå…·ä½“æ˜¯ é˜´å½±å›¾å½¢ä¸å˜ï¼Œæ•´ä½“åç§»è¢«é®æŒ¡ã€‚<br><figure class="image-box">                <img src="/image/canvas/shadow1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/canvas/shadow2.jpg" alt title class>                <p></p>            </figure></p><h4 id="shadowBlur-æ¨¡ç³Šç¨‹åº¦"><a href="#shadowBlur-æ¨¡ç³Šç¨‹åº¦" class="headerlink" title="shadowBlur æ¨¡ç³Šç¨‹åº¦"></a>shadowBlur æ¨¡ç³Šç¨‹åº¦</h4><p>ä¸€èˆ¬çš„äººè¯´è¿™ä¸ªæ˜¯æ¨¡ç³Šç¨‹åº¦ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªè¯´æ³•ä¸å¤ªå‡†ç¡®ï¼ŒshadowBluræ˜¯æ‰©æ•£å¹¶æ¨¡ç³Šæ‰å¯¹ï¼Œå› ä¸ºshadowBlurä¼šå¯¼è‡´é˜´å½±æ‰©æ•£çš„é•¿åº¦ï¼Œæ¯”å¦‚å®šä¹‰ä¸º10çš„æ—¶å€™ï¼Œé˜´å½±å°†æ‰©æ•£é•¿åº¦10pxï¼Œç„¶åé’ˆå¯¹è¿™10pxè¿›è¡Œæ¨¡ç³Šï¼Œä¼šå¯¼è‡´é˜´å½±çš„ã€‚<br>æ­¤æ—¶ï¼Œå¦‚æœå®šä¹‰ shadowBlur ä¸º30ï¼Œç„¶ååç§»é‡ shadowOffsetXä¸º10ï¼Œä¼šå‡ºç°å›¾å½¢å››å‘¨éƒ½æœ‰é˜´å½±ï¼Œä½†å·¦ä¾§é˜´å½±é•¿åº¦ä¸º20ï¼Œå³ä¾§ä¸º40ï¼Œä¸Šä¸‹ä¸º30.<br><figure class="image-box">                <img src="/image/canvas/shadowblur.jpg" alt title class>                <p></p>            </figure></p><h3 id="globalAlpha-é€æ˜åº¦"><a href="#globalAlpha-é€æ˜åº¦" class="headerlink" title="globalAlpha é€æ˜åº¦"></a>globalAlpha é€æ˜åº¦</h3><p>è®¾ç½®canvasçš„é€æ˜åº¦</p><h3 id="å›¾å½¢å åŠ çš„é®ç›–è®¾ç½®"><a href="#å›¾å½¢å åŠ çš„é®ç›–è®¾ç½®" class="headerlink" title="å›¾å½¢å åŠ çš„é®ç›–è®¾ç½®"></a>å›¾å½¢å åŠ çš„é®ç›–è®¾ç½®</h3><p>å¯ä»¥é€šè¿‡globleCompositeOperation è®¾ç½®å›¾å½¢å åŠ æ—¶ï¼Œå¦‚ä½•é®ç›–çš„é—®é¢˜ï¼š<br><figure class="image-box">                <img src="/image/canvas/shadowblur.jpg" alt title class>                <p></p>            </figure></p><h3 id="å‰ªè¾‘åŒºåŸŸ-clip"><a href="#å‰ªè¾‘åŒºåŸŸ-clip" class="headerlink" title="å‰ªè¾‘åŒºåŸŸ clip"></a>å‰ªè¾‘åŒºåŸŸ clip</h3><p>ä¸è·¯å¾„è§„åˆ’å‡½æ•°(å¦‚arc)ç­‰ç­‰å…±åŒä½¿ç”¨ï¼Œclipå…ˆä½¿ç”¨ï¼Œä½¿canvasç»˜åˆ¶åŒºåŸŸåªæ˜¾ç¤ºåœ¨clipçš„è·¯å¾„å†…ï¼Œå…¶ä»–åŒºåŸŸåªæ˜¾ç¤ºæ•´ä¸ªcontext.fillStyleã€‚<br><figure class="image-box">                <img src="/image/canvas/clip.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> context.beginPath();</span><br><span class="line">context.fillStyle=&apos;yellow&apos;</span><br><span class="line">context.fillRect(0,0,w,h);</span><br><span class="line">context.beginPath(); </span><br><span class="line">//æŒ‡å®šclipè·¯å¾„    </span><br><span class="line">context.arc(ball.x,ball.y,ball.r,0,2*Math.PI);</span><br><span class="line">context.fillStyle=&apos;blue&apos;;</span><br><span class="line">context.fill();</span><br><span class="line">context.clip();</span><br><span class="line">context.beginPath();</span><br><span class="line">context.font=&apos;bold 120px Arial&apos;;</span><br><span class="line">context.textAlign=&apos;center&apos;;</span><br><span class="line">context.fillStyle=&apos;#ff55cc&apos;;</span><br><span class="line">context.fillText(&apos;å¤©è‹¥æœ‰æƒ…&apos;,w/2,h/1.6);</span><br></pre></td></tr></table></figure></p><h4 id="æ¢ç…§ç¯åŠ¨ç”»-demo"><a href="#æ¢ç…§ç¯åŠ¨ç”»-demo" class="headerlink" title="æ¢ç…§ç¯åŠ¨ç”» demo"></a>æ¢ç…§ç¯åŠ¨ç”» demo</h4><p>ä»£ç å¦‚ä¸‹ï¼Œæ–°é¢–çš„æ€æƒ³æ˜¯ï¼š</p><ul><li>æ¯ä¸€æ¬¡è½®è¯¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–¹æ³• update æ¥æ›´æ–°è·¯å¾„ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–¹æ³•ä½¿ç”¨æ–°çš„è·¯å¾„è¿›è¡Œç»˜åˆ¶ã€‚</li><li>å…ˆç»˜åˆ¶ï¼Œç´§æ¥ç€æ›´æ–°è·¯å¾„ï¼Œç„¶åè½®è¯¢è¿™ä¸ªåŠ¨ä½œã€‚</li><li>è¿™ä¸ªä¾‹å­å†ä¸€æ¬¡å°è¯äº†canvasçš„ è§„åˆ’è·¯å¾„ å’Œ ç»˜åˆ¶æ˜¯åˆ†å¼€çš„ã€‚<br><a href="/Users/js/Desktop/work/git/canvas-demo/pages/canvas-master/ç»˜å›¾/æ¢ç…§ç¯.html">demoåœ°å€</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = $(<span class="string">'#canvas'</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="keyword">var</span> context=c.getContext(<span class="string">'2d'</span>);<span class="comment">//ç”¨contextè¿›è¡Œç»˜åˆ¶</span></span><br><span class="line">   <span class="keyword">var</span> w =canvas.width;</span><br><span class="line">   <span class="keyword">var</span> h =canvas.height</span><br><span class="line">   <span class="keyword">var</span> ball=&#123;</span><br><span class="line">     x:w/<span class="number">2</span>,</span><br><span class="line">     y:h/<span class="number">2</span>,</span><br><span class="line">     r:<span class="number">100</span>,</span><br><span class="line">     vx:<span class="number">20</span>,</span><br><span class="line">     vy:<span class="number">15</span></span><br><span class="line">   &#125;</span><br><span class="line">   setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     draw();</span><br><span class="line">     update();</span><br><span class="line">   &#125;,<span class="number">50</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">draw</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     context.clearRect(<span class="number">0</span>,<span class="number">0</span>,w,h);</span><br><span class="line">     context.save(); <span class="comment">//////////</span></span><br><span class="line">     context.beginPath();</span><br><span class="line">     context.fillStyle=<span class="string">'black'</span></span><br><span class="line">     context.fillRect(<span class="number">0</span>,<span class="number">0</span>,w,h);</span><br><span class="line">     context.beginPath();     </span><br><span class="line">     context.arc(ball.x,ball.y,ball.r,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI);</span><br><span class="line">      context.fillStyle=<span class="string">'white'</span>;</span><br><span class="line">      context.fill();</span><br><span class="line">      context.clip();</span><br><span class="line">      context.beginPath();</span><br><span class="line">      context.font=<span class="string">'bold 120px Arial'</span>;</span><br><span class="line">      context.textAlign=<span class="string">'center'</span>;</span><br><span class="line">      context.fillStyle=<span class="string">'#ff55cc'</span>;</span><br><span class="line">      context.fillText(<span class="string">'å¤©è‹¥æœ‰æƒ…'</span>,w/<span class="number">2</span>,h/<span class="number">3</span>);</span><br><span class="line">      context.fillText(<span class="string">'æ²§æµ·æ¡‘ç”°'</span>,w/<span class="number">2</span>,h/<span class="number">4</span>*<span class="number">3</span>);</span><br><span class="line">      context.restore();</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     ball.x+=ball.vx;</span><br><span class="line">     ball.y+=ball.vy;</span><br><span class="line">     <span class="keyword">if</span>(ball.x&lt;=ball.r)&#123;</span><br><span class="line">       ball.x=ball.r;</span><br><span class="line">       ball.vx=-ball.vx;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(ball.x&gt;=w-ball.r)&#123;</span><br><span class="line">       ball.x=w-ball.r;</span><br><span class="line">        ball.vx=-ball.vx;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(ball.y&lt;=ball.r)&#123;</span><br><span class="line">       ball.y=ball.r;</span><br><span class="line">        ball.vy=-ball.vy;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(ball.y&gt;=h-ball.r)&#123;</span><br><span class="line">       ball.y=h-ball.r;</span><br><span class="line">        ball.vy=-ball.vy;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="clearRect"><a href="#clearRect" class="headerlink" title="clearRect"></a>clearRect</h3><p>å¸¸ç”¨äºåŠ¨ç”»ï¼Œå½“é‡æ–°ç»˜åˆ¶å›¾å½¢æ—¶ï¼Œä½¿ç”¨æ­¤APIæ¸…ç©ºç”»å¸ƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.clearRect(x,y width, height);</span><br></pre></td></tr></table></figure></p><h3 id="isPointInPath"><a href="#isPointInPath" class="headerlink" title="isPointInPath"></a>isPointInPath</h3><p>æ˜¯å¦å¤„äºå›¾å½¢ä¹‹å†…ï¼Œ<a href="/Users/js/Desktop/work/git/canvas-demo/pages/canvas-master/ç»˜å›¾/äº¤äº’.html">æŸ¥çœ‹demo</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.isPointInPath( x , y )</span><br></pre></td></tr></table></figure></p><h3 id="è·å–canvasåæ ‡"><a href="#è·å–canvasåæ ‡" class="headerlink" title="è·å–canvasåæ ‡"></a>è·å–canvasåæ ‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>);</span><br><span class="line">  canvas.mousemove(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">      <span class="comment">//canvasç”»å¸ƒå†…çš„xåæ ‡ = ç›¸å¯¹äºæ•´ä¸ªè§†å£xè½´çš„å€¼-ç”»å¸ƒç¦»è§†å£å·¦ä¾§çš„è·ç¦»</span></span><br><span class="line">      <span class="keyword">var</span> x1= e.clientX-canvas.getBoundingClientRect().left;</span><br><span class="line">      <span class="keyword">var</span> y1= e.clientY-canvas.getBoundingClientRect().top;     </span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h3 id="é˜´å½±-shadowColorç›¸å…³"><a href="#é˜´å½±-shadowColorç›¸å…³" class="headerlink" title="é˜´å½± shadowColorç›¸å…³"></a>é˜´å½± shadowColorç›¸å…³</h3><p>å‚è€ƒã€Šå¯¹é˜´å½±çš„å½±å“ã€‹</p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="éé›¶ç¯ç»•åŸåˆ™"><a href="#éé›¶ç¯ç»•åŸåˆ™" class="headerlink" title="éé›¶ç¯ç»•åŸåˆ™"></a>éé›¶ç¯ç»•åŸåˆ™</h3><p>éé›¶ç¯ç»•åŸåˆ™ ç”¨æ¥ç¡®è®¤æŸä¸€åŒºåŸŸå¤„äºå›¾å½¢å¤–é¢æˆ–é‡Œé¢ï¼›<br>å¦‚ä¸‹å›¾ï¼ŒA Cå¤„äºå›¾å½¢é‡Œé¢ï¼ŒBå¤„äºå›¾å½¢å¤–é¢ï¼Œåˆ¤æ–­åŸåˆ™ä¸ºï¼š<br>åŒºåŸŸå†…å‘å¤–ç”»ä¸€æ¡çº¿ï¼Œè¿™æ¡çº¿ç©¿è¿‡Næ¡çº¿ï¼ŒæŒ‡å®šä¸€ç§æ–¹å‘ä¸º-1ï¼Œç›¸åæ–¹å‘ä¸º1ï¼ŒNæ¡çº¿åŠ èµ·æ¥çš„å€¼ï¼Œ<br>è‹¥ä¸º0ï¼Œè¯´æ˜è¯¥åŒºåŸŸå¤„äºå›¾å½¢å¤–éƒ¨ï¼›<br>è‹¥ä¸ºé0ï¼Œè¯´æ˜å¤„äºå†…éƒ¨ã€‚<br><figure class="image-box">                <img src="/image/canvas/zero.jpg" alt title class>                <p></p>            </figure></p><h3 id="åœ†åœˆå†…å¤–åœ†é¡º-é€†æ—¶é’ˆå½±å“åˆ°çš„"><a href="#åœ†åœˆå†…å¤–åœ†é¡º-é€†æ—¶é’ˆå½±å“åˆ°çš„" class="headerlink" title="åœ†åœˆå†…å¤–åœ†é¡º\é€†æ—¶é’ˆå½±å“åˆ°çš„"></a>åœ†åœˆå†…å¤–åœ†é¡º\é€†æ—¶é’ˆå½±å“åˆ°çš„</h3><h4 id="å†…å¤–ä¸¤ä¸ªåœ†ä¸æŒ‡å®šæ–¹å‘"><a href="#å†…å¤–ä¸¤ä¸ªåœ†ä¸æŒ‡å®šæ–¹å‘" class="headerlink" title="å†…å¤–ä¸¤ä¸ªåœ†ä¸æŒ‡å®šæ–¹å‘"></a>å†…å¤–ä¸¤ä¸ªåœ†ä¸æŒ‡å®šæ–¹å‘</h4><p>å¦‚ä¸‹ï¼Œä¸æŒ‡å®šæ–¹å‘çš„æ—¶å€™ï¼Œç”»å‡ºæ¥çš„å›¾æ˜¯ä¸€ä¸ªå¤§çš„å®å¿ƒåœ†ï¼Œå¹¶éå¸Œæœ›çš„é•‚ç©ºåœ†åœˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var c = $(&apos;#canvas&apos;)[0];</span><br><span class="line"> var context=c.getContext(&apos;2d&apos;);</span><br><span class="line"> context.arc(400,250,100,0,2*Math.PI);//ä¸æŒ‡å®šæ–¹å‘</span><br><span class="line"> context.arc(400,250,50,0,2*Math.PI);//ä¸æŒ‡å®šæ–¹å‘</span><br><span class="line"> context.fillStyle=&apos;blue&apos;;</span><br><span class="line"> context.fill();</span><br></pre></td></tr></table></figure></p><h4 id="å†…å¤–åœ†æŒ‡å®šä¸åŒæ–¹å‘"><a href="#å†…å¤–åœ†æŒ‡å®šä¸åŒæ–¹å‘" class="headerlink" title="å†…å¤–åœ†æŒ‡å®šä¸åŒæ–¹å‘"></a>å†…å¤–åœ†æŒ‡å®šä¸åŒæ–¹å‘</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var c = $(&apos;#canvas&apos;)[0];</span><br><span class="line">   var context=c.getContext(&apos;2d&apos;);</span><br><span class="line">   context.arc(400,250,100,0,2*Math.PI, false);//é¡ºæ—¶é’ˆ</span><br><span class="line">   context.arc(400,250,50,0,2*Math.PI, true);//é€†æ—¶é’ˆ</span><br><span class="line">   context.fillStyle=&apos;blue&apos;;</span><br><span class="line">   context.fill();</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/canvas/ring.jpg" alt title class>                <p></p>            </figure></p><h4 id="éé›¶ç¯ç»•åŸåˆ™-1"><a href="#éé›¶ç¯ç»•åŸåˆ™-1" class="headerlink" title="éé›¶ç¯ç»•åŸåˆ™"></a>éé›¶ç¯ç»•åŸåˆ™</h4><p>å½“æŒ‡å®šä¸åŒæ–¹å‘æ—¶ï¼Œåˆ©ç”¨éé›¶ç¯ç»•åŸåˆ™ï¼Œå†…åœ†çš„åŒºåŸŸç›¸å¯¹äºæ•´ä¸ªå›¾å½¢è€Œè¨€å¤„äºå›¾å½¢ä¹‹å¤–ï¼Œæ­¤æ—¶fillæ–¹æ³•ä¸ä¼šå¡«å……æ­¤åŒºåŸŸï¼Œäº§ç”Ÿé•‚ç©ºæ•ˆæœã€‚</p><h4 id="å¯¹é˜´å½±çš„å½±å“"><a href="#å¯¹é˜´å½±çš„å½±å“" class="headerlink" title="å¯¹é˜´å½±çš„å½±å“"></a>å¯¹é˜´å½±çš„å½±å“</h4><p>ä»£ç å’Œæ•ˆæœå¦‚ä¸‹ï¼Œæ­£å¸¸çš„æƒ…å†µï¼Œé˜´å½±é»˜è®¤éƒ½åº”è¯¥ä½äºå›¾å½¢å¤–ä¾§ï¼Œå¦‚Bçš„ä½ç½®ï¼Œ<br>å› æ­¤å¦‚æœç»™å†…åœ†å®šä¹‰é˜´å½±çš„ç”»ï¼Œé˜´å½±åº”è¯¥ä½äºAçš„ä½ç½®ï¼Œä½†å®é™…æƒ…å†µå´ä½äºå›¾ä¸­æ‰€ç¤ºä½†Cä½ç½®ã€‚<br>åˆä¸€çœ‹è§‰å¾—ä¸åˆç†ï¼Œä½†æ˜¯æˆ‘ä»¬ç”¨éé›¶ç¯ç»•åŸåˆ™æ—¶ï¼Œå‘ç°å†…åœ†çš„ç¡®å¤„äºå›¾å½¢å¤–ä¾§ï¼Œå› æ­¤é˜´å½±å¤„äºCçš„ä½ç½®æ˜¯å¯¹çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = $(<span class="string">'#canvas'</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> context=c.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  context.arc(<span class="number">400</span>,<span class="number">250</span>,<span class="number">100</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI, <span class="literal">true</span>);</span><br><span class="line">  context.arc(<span class="number">400</span>,<span class="number">250</span>,<span class="number">50</span>,<span class="number">0</span>,<span class="number">2</span>*<span class="built_in">Math</span>.PI, <span class="literal">false</span>);</span><br><span class="line">  </span><br><span class="line">  context.fillStyle=<span class="string">'rebeccapurple'</span>;</span><br><span class="line">  context.shadowColor = <span class="string">'blue'</span>;</span><br><span class="line">  context.shadowOffsetX = <span class="number">10</span>;</span><br><span class="line">  context.shadowOffsetY = <span class="number">10</span>;</span><br><span class="line">  context.shadowBlur = <span class="number">10</span>;</span><br><span class="line">  context.fill();</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/canvas/ring2.jpg" alt title class>                <p></p>            </figure><h3 id="CanvasRenderingContext2D"><a href="#CanvasRenderingContext2D" class="headerlink" title="CanvasRenderingContext2D"></a>CanvasRenderingContext2D</h3><h4 id="ä»‹ç»-3"><a href="#ä»‹ç»-3" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å¯¹canvasæ‰©å±•ä½¿ç”¨ CanvasRenderingContext2D è¿›è¡Œæ‰©å±•ã€‚å¯ä»¥æ‰©å±•æ–°APIï¼Œå¯æ‰©å±•ç°åœ¨API(è°¨æ…),å¯æ‰©å±•ä¸€ä¸ªå¯¹è±¡ï¼Œå­˜æ”¾æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> c = $(<span class="string">'#canvas'</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="keyword">var</span> context=c.getContext(<span class="string">'2d'</span>);<span class="comment">//ç”¨contextè¿›è¡Œç»˜åˆ¶</span></span><br><span class="line">   <span class="comment">//æ‰©å±•å¯¹è±¡</span></span><br><span class="line">   CanvasRenderingContext2D.prototype.lastMoveToLoc = &#123;&#125;;</span><br><span class="line">   <span class="comment">//æ‰©å±•ç°æœ‰æ–¹æ³•</span></span><br><span class="line">   <span class="keyword">var</span> originMoveto = CanvasRenderingContext2D.prototype.moveTo;</span><br><span class="line">   CanvasRenderingContext2D.prototype.moveTo = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;</span><br><span class="line">     originMoveto.apply(context, [x, y]);</span><br><span class="line">     <span class="keyword">this</span>.lastMoveToLoc.x = x;</span><br><span class="line">     <span class="keyword">this</span>.lastMoveToLoc.y = y;</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//æ‰©å±•æ–°æ–¹æ³•</span></span><br><span class="line">   CanvasRenderingContext2D.prototype.drawStar = <span class="function"><span class="keyword">function</span>(<span class="params">r,R,rot</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">this</span>.beginPath();</span><br><span class="line">     <span class="keyword">var</span> x = <span class="keyword">this</span>.lastMoveToLoc.x;</span><br><span class="line">     <span class="keyword">var</span> y = <span class="keyword">this</span>.lastMoveToLoc.y;</span><br><span class="line">     <span class="keyword">var</span> rot1 = rot || <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">var</span> i =<span class="number">0</span>;i&lt;=<span class="number">5</span>;i++)&#123;</span><br><span class="line">       <span class="keyword">this</span>.lineTo(<span class="built_in">Math</span>.cos((<span class="number">18</span>+i*<span class="number">72</span>-rot1)/<span class="number">180</span>*<span class="built_in">Math</span>.PI)*R+x,</span><br><span class="line">       -<span class="built_in">Math</span>.sin((<span class="number">18</span>+i*<span class="number">72</span>-rot1)/<span class="number">180</span>*<span class="built_in">Math</span>.PI)*R+y)</span><br><span class="line">       <span class="keyword">this</span>.lineTo(<span class="built_in">Math</span>.cos((<span class="number">54</span>+i*<span class="number">72</span>-rot1)/<span class="number">180</span>*<span class="built_in">Math</span>.PI)*r+x,</span><br><span class="line">       -<span class="built_in">Math</span>.sin((<span class="number">54</span>+i*<span class="number">72</span>-rot1)/<span class="number">180</span>*<span class="built_in">Math</span>.PI)*r+y)</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">this</span>.closePath();</span><br><span class="line">     <span class="keyword">this</span>.fill();</span><br><span class="line">   &#125;</span><br><span class="line">   context.fillStyle = <span class="string">'blue'</span>;</span><br><span class="line">   context.moveTo(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">   context.drawStar(<span class="number">150</span>,<span class="number">300</span>,<span class="number">30</span>);</span><br></pre></td></tr></table></figure></p><h4 id="æ‰©å±•æ–¹æ³•"><a href="#æ‰©å±•æ–¹æ³•" class="headerlink" title="æ‰©å±•æ–¹æ³•"></a>æ‰©å±•æ–¹æ³•</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="æ‰©å±•å¯¹è±¡"><a href="#æ‰©å±•å¯¹è±¡" class="headerlink" title="æ‰©å±•å¯¹è±¡"></a>æ‰©å±•å¯¹è±¡</h4><p>å‚è€ƒä¸Šé¢</p><h2 id="å›¾å½¢å˜æ¢"><a href="#å›¾å½¢å˜æ¢" class="headerlink" title="å›¾å½¢å˜æ¢"></a>å›¾å½¢å˜æ¢</h2><h3 id="å›¾å½¢å˜æ¢çš„API"><a href="#å›¾å½¢å˜æ¢çš„API" class="headerlink" title="å›¾å½¢å˜æ¢çš„API"></a>å›¾å½¢å˜æ¢çš„API</h3><ul><li>ä½ç§» translate( x , y )</li><li>æ—‹è½¬ rotate( deg )</li><li>ç¼©æ”¾ scale( sx , sy )</li></ul><h3 id="å˜æ¢çŸ©é˜µ"><a href="#å˜æ¢çŸ©é˜µ" class="headerlink" title="å˜æ¢çŸ©é˜µ"></a>å˜æ¢çŸ©é˜µ</h3><figure class="image-box">                <img src="/image/canvas/transform_matrix.jpg" alt title class>                <p></p>            </figure><h3 id="transform-ä¸-å˜æ¢é‡ç½®"><a href="#transform-ä¸-å˜æ¢é‡ç½®" class="headerlink" title="transform ä¸ å˜æ¢é‡ç½®"></a>transform ä¸ å˜æ¢é‡ç½®</h3><p>å½“å¯¹contextå¤šæ¬¡transformåï¼Œæƒ³ä¸¢å¼ƒã€é‡ç½®ä¹‹å‰æ‰€æœ‰çš„transformçš„å½±å“ï¼Œå¯ä½¿ç”¨setTransformã€‚<br>transform( a , b , c , d , e , f )<br>setTransform( a , b , c , d , e , f ) </p><h3 id="çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤-save-restore"><a href="#çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤-save-restore" class="headerlink" title="çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤(save\restore)"></a>çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤(save\restore)</h3><p>ç”»ä¸¤ä¸ªçŸ©å½¢ï¼Œç¬¬ä¸€ä¸ªçŸ©å½¢å‘å·¦åç§»100ï¼Œç¬¬äºŒä¸ªçŸ©å½¢å‘å·¦åç§»200ï¼Œ<br>ç”±äºåç§»éƒ½æ˜¯å¯¹æ•´ä¸ªä¸Šä¸‹æ–‡æ‰§è¡Œçš„ï¼Œä¸ºäº†å…é™¤ç¬¬ä¸€æ¬¡åç§»çš„å½±å“ï¼Œåœ¨ç¬¬ä¸€æ¬¡åç§»ä¹‹å‰ï¼Œæ‰§è¡Œsaveï¼Œä¿å­˜å½“æ—¶çš„çŠ¶æ€ï¼›<br>åœ¨ç»™ç¬¬äºŒä¸ªçŸ©å½¢åç§»ä¹‹å‰ï¼Œæ‰§è¡Œrestoreï¼Œå°†çŠ¶æ€æ¢å¤åˆ°saveæ—¶çš„çŠ¶æ€ã€‚</p><h3 id="scaleçš„å‰¯ä½œç”¨"><a href="#scaleçš„å‰¯ä½œç”¨" class="headerlink" title="scaleçš„å‰¯ä½œç”¨"></a>scaleçš„å‰¯ä½œç”¨</h3><p>scaleä¼šå¯¹åæ ‡ç‚¹çš„ xyå€¼ã€å›¾å½¢å®½åº¦ã€çº¿æ¡å®½åº¦éƒ½äº§ç”Ÿæ”¾å¤§ç¼©å°æ•ˆæœã€‚è¿™æ˜¯scaleçš„ç‰¹ç‚¹ï¼Œä½†ä¹Ÿæ˜¯å‰¯ä½œç”¨ï¼Œç”¨çš„æ—¶å€™éœ€æ³¨æ„ã€‚</p><h3 id="fillStyle"><a href="#fillStyle" class="headerlink" title="fillStyle"></a>fillStyle</h3><h4 id="color"><a href="#color" class="headerlink" title="color"></a>color</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.fillStyle=&apos;red&apos;;</span><br></pre></td></tr></table></figure><h4 id="çº¿æ€§æ¸å˜color"><a href="#çº¿æ€§æ¸å˜color" class="headerlink" title="çº¿æ€§æ¸å˜color"></a>çº¿æ€§æ¸å˜color</h4><p>çº¿æ€§æ¸å˜é¢œè‰²åˆ›å»ºcontext.createLinearGradientã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//èµ·å§‹ç‚¹åæ ‡100 100ï¼Œ ç»ˆç‚¹ 100 300ï¼›</span><br><span class="line">   var linear = context.createLinearGradient(100,100,100,300);</span><br><span class="line">   //addColorStop ç¬¬ä¸€å‚æ•°æ˜¯æµ®ç‚¹æ•°ï¼Œå–å€¼èŒƒå›´ä¸º0-1ï¼Œ0è¡¨ç¤ºèµ·ç‚¹ï¼Œ1è¡¨ç¤ºç»ˆç‚¹</span><br><span class="line">   linear.addColorStop(0.0,&apos;green&apos;);</span><br><span class="line">   linear.addColorStop(0.5,&apos;yellow&apos;);</span><br><span class="line">   linear.addColorStop(1.0,&apos;blue&apos;);</span><br><span class="line">   context.fillStyle=linear;</span><br><span class="line">   context.fillRect(100,100,300,200);</span><br></pre></td></tr></table></figure></p><h4 id="å¾„å‘æ¸å˜color"><a href="#å¾„å‘æ¸å˜color" class="headerlink" title="å¾„å‘æ¸å˜color"></a>å¾„å‘æ¸å˜color</h4><p>ç”¨æ³•ä¸çº¿æ€§æ¸å˜ä¸€è‡´ï¼Œå¯ç½‘ä¸ŠæŸ¥é˜…ï¼Œè¿™é‡Œä¸åˆ—å‡ºã€‚</p><h4 id="å›¾ç‰‡å¡«å……"><a href="#å›¾ç‰‡å¡«å……" class="headerlink" title="å›¾ç‰‡å¡«å……"></a>å›¾ç‰‡å¡«å……</h4><p>ä½¿ç”¨API createPattern åˆ›å»ºå¡«å……å›¾ç‰‡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bi=<span class="keyword">new</span> Image();</span><br><span class="line">bi.src=<span class="string">'autumn.jpg'</span>;</span><br><span class="line"><span class="keyword">var</span> pattern = context.createPattern(bi,<span class="string">'repeat'</span>);</span><br><span class="line">context.beginPath();</span><br><span class="line">context.fillStyle=pattern;</span><br><span class="line">context.fillRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">400</span>,<span class="number">300</span>);</span><br></pre></td></tr></table></figure></p><h3 id="createLinearGradient-çº¿æ€§æ¸å˜å¡«å……è‰²"><a href="#createLinearGradient-çº¿æ€§æ¸å˜å¡«å……è‰²" class="headerlink" title="createLinearGradient çº¿æ€§æ¸å˜å¡«å……è‰²"></a>createLinearGradient çº¿æ€§æ¸å˜å¡«å……è‰²</h3><p>æ­¤apiç”¨äºåˆ›å»ºçº¿æ€§æ¸å˜é¢œè‰²ï¼Œè¯¦ç»†å‚è€ƒã€Šçº¿æ€§æ¸å˜colorã€‹</p><h3 id="createPattern-å›¾ç‰‡å¡«å……"><a href="#createPattern-å›¾ç‰‡å¡«å……" class="headerlink" title="createPattern å›¾ç‰‡å¡«å……"></a>createPattern å›¾ç‰‡å¡«å……</h3><p>æ­¤APIåˆ›å»ºå¡«å……å›¾ç‰‡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å—å›¾ç‰‡</span></span><br><span class="line">  context.createPattern(img,<span class="string">'repeat'</span>)</span><br><span class="line"><span class="comment">//æ¥å—canvasç”»å¸ƒ</span></span><br><span class="line">  context.createPattern(canvas,<span class="string">'repeat'</span>)</span><br></pre></td></tr></table></figure></p><h3 id="æ–‡å­—æ¸²æŸ“API"><a href="#æ–‡å­—æ¸²æŸ“API" class="headerlink" title="æ–‡å­—æ¸²æŸ“API"></a>æ–‡å­—æ¸²æŸ“API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">context.font = &quot;bold 40px Arial&quot;</span><br><span class="line">context.fillText( string , x , y , [maxlen] );</span><br><span class="line">context.strokeText( string , x , y  , [maxlen] );</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›å‡ ä½•æ€è·¯"><a href="#ä¸€äº›å‡ ä½•æ€è·¯" class="headerlink" title="ä¸€äº›å‡ ä½•æ€è·¯"></a>ä¸€äº›å‡ ä½•æ€è·¯</h3><h4 id="å¸¦å€’è§’çš„çŸ©å½¢"><a href="#å¸¦å€’è§’çš„çŸ©å½¢" class="headerlink" title="å¸¦å€’è§’çš„çŸ©å½¢"></a>å¸¦å€’è§’çš„çŸ©å½¢</h4><figure class="image-box">                <img src="/image/canvas/rect.jpg" alt title class>                <p></p>            </figure><h4 id="åœ†çš„piæ¦‚å¿µ"><a href="#åœ†çš„piæ¦‚å¿µ" class="headerlink" title="åœ†çš„piæ¦‚å¿µ"></a>åœ†çš„piæ¦‚å¿µ</h4><figure class="image-box">                <img src="/image/canvas/arc.jpg" alt title class>                <p></p>            </figure><h4 id="æœˆäº®"><a href="#æœˆäº®" class="headerlink" title="æœˆäº®"></a>æœˆäº®</h4><figure class="image-box">                <img src="/image/canvas/moon.jpg" alt title class>                <p></p>            </figure><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸¤æ®µé—­åˆçš„åœ†å¼§çº¿æ¥æ„å»ºä¸€ä¸ªåœ†ï¼Œ<a href>å‚è€ƒdemo</a></p><h2 id="å›¾åƒå¤„ç†API"><a href="#å›¾åƒå¤„ç†API" class="headerlink" title="å›¾åƒå¤„ç†API"></a>å›¾åƒå¤„ç†API</h2><h3 id="drawImage-å›¾åƒå¤„ç†"><a href="#drawImage-å›¾åƒå¤„ç†" class="headerlink" title="drawImage å›¾åƒå¤„ç†"></a>drawImage å›¾åƒå¤„ç†</h3><h4 id="image-onloadæ—¶åŠ è½½"><a href="#image-onloadæ—¶åŠ è½½" class="headerlink" title="image.onloadæ—¶åŠ è½½"></a>image.onloadæ—¶åŠ è½½</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">image.src = &quot;img.jpg&quot;</span><br><span class="line">image.onload = function()&#123;</span><br><span class="line">    context.drawImage( image , 0, 0)</span><br><span class="line">&#125;</span><br><span class="line">context.drawImage( image , 300 , 100, 800, 300, 300, 300 ,200,200 )</span><br></pre></td></tr></table></figure><p>å¦å¤– drawImageæœ‰ä¸‰ç§èµ‹å€¼æ¨¡å¼ï¼š</p><h4 id="drawImage-image-0-0-â€“æ­¤æ¨¡å¼ä¸ä¼šç¼©æ”¾å›¾ç‰‡"><a href="#drawImage-image-0-0-â€“æ­¤æ¨¡å¼ä¸ä¼šç¼©æ”¾å›¾ç‰‡" class="headerlink" title="drawImage(image,0,0) â€“æ­¤æ¨¡å¼ä¸ä¼šç¼©æ”¾å›¾ç‰‡"></a>drawImage(image,0,0) â€“æ­¤æ¨¡å¼ä¸ä¼šç¼©æ”¾å›¾ç‰‡</h4><p>åœ¨ç”»å¸ƒçš„åæ ‡ 0ï¼Œ0çš„ä½ç½®ä¸Šå¼€å§‹ç”»å›¾ç‰‡ï¼Œå›¾ç‰‡ä»¥åŸåƒç´ å’Œæ¯”ä¾‹å±•ç¤ºã€‚</p><h4 id="drawImage-image-0-0-100-100"><a href="#drawImage-image-0-0-100-100" class="headerlink" title="drawImage(image,0,0,100,100)"></a>drawImage(image,0,0,100,100)</h4><p>åœ¨ç”»å¸ƒçš„åæ ‡0ï¼Œ0ä¸Šå¼€å§‹ç”»å›¾ç‰‡ï¼Œå¹¶ä¸”å°†æ•´ä¸ªå›¾ç‰‡æ”¾ç½®äºå®½é«˜éƒ½ä¸º100çš„åŒºåŸŸå†…ï¼Œå›¾ç‰‡ä¼šæ ¹æ®åŒºåŸŸå¤§å°ç¼©æ”¾ã€‚</p><h4 id="drawImage-image-0-0-100-100-0-0-200-200"><a href="#drawImage-image-0-0-100-100-0-0-200-200" class="headerlink" title="drawImage(image,0,0,100,100,0,0,200,200)"></a>drawImage(image,0,0,100,100,0,0,200,200)</h4><p>å‚æ•°å«ä¹‰ä¾æ¬¡ä¸ºï¼šå›¾ç‰‡ï¼ŒåŸå›¾ç‰‡ä¿¡æ¯(0,0,100,100)ï¼Œç›®çš„å›¾ç‰‡ä¿¡æ¯(0,0,200,200);<br>åŸºæœ¬å«ä¹‰ä¸ºï¼šæˆªå–åŸå›¾ç‰‡åæ ‡ç‚¹ä¸º0ï¼Œ0èµ·ç‚¹å®½é«˜å„100çš„åŒºåŸŸï¼Œç»˜åˆ¶åˆ°ç”»å¸ƒçš„åæ ‡ç‚¹0ï¼Œ0ä¸ºèµ·ç‚¹ï¼Œå®½é«˜å„200çš„åŒºåŸŸä¸Šã€‚<br>æˆªå›¾çš„å›¾ç‰‡ä¼šæŒ‰ç…§ç›®çš„åŒºåŸŸå¤§å°ç¼©æ”¾<br><figure class="image-box">                <img src="/image/canvas/drawImage.jpg" alt title class>                <p></p>            </figure></p><h3 id="getImageData-è·å–å›¾ç‰‡ä¿¡æ¯"><a href="#getImageData-è·å–å›¾ç‰‡ä¿¡æ¯" class="headerlink" title="getImageData è·å–å›¾ç‰‡ä¿¡æ¯"></a>getImageData è·å–å›¾ç‰‡ä¿¡æ¯</h3><h4 id="ä»‹ç»-4"><a href="#ä»‹ç»-4" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>getImageData æ¥å—å››ä¸ªå‚æ•°ï¼Œè¿™å››ä¸ªå‚æ•°æ„é€ äº†ä¸€ä¸ªçŸ©å½¢åŒºåŸŸï¼Œåˆ†åˆ«æ˜¯åæ ‡ç‚¹ï¼Œå®½é«˜ã€‚è¡¨ç¤ºè·å–è¯¥åŒºåŸŸå†…æ‰€ä»¥å›¾ç‰‡çš„ä¿¡æ¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const imageData = getImageData( x , y , width , height )</span><br><span class="line">imageDataå¯¹è±¡ï¼š</span><br><span class="line">width</span><br><span class="line">height</span><br><span class="line">data(å›¾ç‰‡åƒç´ ç­‰ä¿¡æ¯,ä»¥å¤šç»´æ•°ç»„çš„æ–¹å¼å±•ç¤º)</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢æ˜¯imageData.dataçš„ä¿¡æ¯ï¼Œæ›´å¤šä¿¡æ¯å‚è€ƒã€ŠputImageData æ’å…¥å›¾åƒã€‹ï¼š<br><figure class="image-box">                <img src="/image/canvas/put_data.jpg" alt title class>                <p></p>            </figure></p><h4 id="è·¨åŸŸé—®é¢˜"><a href="#è·¨åŸŸé—®é¢˜" class="headerlink" title="è·¨åŸŸé—®é¢˜"></a>è·¨åŸŸé—®é¢˜</h4><p>å›¾ç‰‡å­˜å‚¨åœ¨æœ¬åœ°æ—¶ï¼Œæ˜¯é»˜è®¤æ²¡æœ‰åŸŸåçš„ï¼Œå¦‚æœä¸å¯åŠ¨æœåŠ¡ç›´æ¥æ‰“å¼€htmlï¼Œç”¨getImageDataæ–¹æ³•æ—¶ï¼Œæµè§ˆå™¨ä¼šåˆ¤å®šä¸ºè·¨åŸŸè€ŒæŠ¥é”™ï¼è§£å†³æ–¹æ³•æ˜¯å¯åŠ¨æœ¬åœ°æœåŠ¡æ‰“å¼€htmlã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;Uncaught DOMException: Failed to execute &apos;getImageData&apos; on &apos;CanvasRenderingContext2D&apos;: The canvas has been tainted by cross-origin data.</span><br><span class="line">at HTMLImageElement.document.getElementById.onload&quot;</span><br></pre></td></tr></table></figure></p><h3 id="putImageData-æ’å…¥å›¾åƒ"><a href="#putImageData-æ’å…¥å›¾åƒ" class="headerlink" title="putImageData æ’å…¥å›¾åƒ"></a>putImageData æ’å…¥å›¾åƒ</h3><p>å…¶7ä¸ªå‚æ•°æ„æ€ä¾æ¬¡ä¸ºï¼šgetImageDataè·å–çš„å›¾ç‰‡imageDataå¯¹è±¡ï¼Œåæ ‡ç‚¹x(ä¹Ÿæ˜¯ç›¸å¯¹äºcanvasçš„ç›¸å¯¹ä½ç§»ï¼Œæ•…å†™æˆdx)ï¼Œåæ ‡ç‚¹yï¼Œè„ä½ç§»x(è„æ˜¯å› ä¸ºé€šè¿‡putImageDataè·å–çš„å›¾ç‰‡ä¿¡æ¯ï¼Œä¸æ˜¯çº¯æ­£çš„åŸå›¾ç‰‡ä¿¡æ¯ï¼Œæ˜¯â€œè¢«æ±¡æŸ“äº†çš„â€æ•°æ®)ï¼Œè„ä½ç§»yï¼Œè„å›¾ç‰‡å®½åº¦ï¼Œè„å›¾ç‰‡é«˜åº¦ã€‚<br><figure class="image-box">                <img src="/image/canvas/put.jpg" alt title class>                <p></p>            </figure></p><p>è¦ä¸ getImageData ä¸€èµ·ä½¿ç”¨ï¼Œ<a href="http://127.0.0.1:3000/canvas-image/05-image-copy/index.html" target="_blank" rel="noopener">demo åœ°å€</a>ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> canvasa = <span class="built_in">document</span>.getElementById(<span class="string">"canvasa"</span>)</span><br><span class="line">       <span class="keyword">var</span> contexta = canvasa.getContext(<span class="string">"2d"</span>)</span><br><span class="line"></span><br><span class="line">       <span class="keyword">var</span> canvasb = <span class="built_in">document</span>.getElementById(<span class="string">"canvasb"</span>)</span><br><span class="line">       <span class="keyword">var</span> contextb = canvasb.getContext(<span class="string">"2d"</span>)</span><br><span class="line"></span><br><span class="line">       <span class="keyword">var</span> image = <span class="keyword">new</span> Image()</span><br><span class="line"></span><br><span class="line">       <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">           image.src = <span class="string">"autumn.jpg"</span></span><br><span class="line">           image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">               contexta.drawImage( image , <span class="number">0</span> , <span class="number">0</span> , canvasa.width , canvasa.height )</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">copyImage</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">var</span> imageData = contexta.getImageData( <span class="number">0</span> , <span class="number">0</span> , canvasa.width , canvasa.height )</span><br><span class="line">           <span class="keyword">var</span> pixelData = imageData.data</span><br><span class="line">           <span class="comment">//æ”¹å˜å›¾ç‰‡åƒç´ ï¼Œè®©æ–°copyå‡ºæ¥çš„å›¾ç‰‡ç½®ç°</span></span><br><span class="line">           <span class="comment">// for( var i = 0 ; i &lt; canvasb.width * canvasb.height ; i ++ )&#123;</span></span><br><span class="line">           <span class="comment">//     var r = pixelData[i*4+0]</span></span><br><span class="line">           <span class="comment">//     var g = pixelData[i*4+1]</span></span><br><span class="line">           <span class="comment">//     var b = pixelData[i*4+2]</span></span><br><span class="line">           <span class="comment">//     var grey = r*0.3+g*0.59+b*0.11</span></span><br><span class="line">           <span class="comment">//     pixelData[i*4+0] = grey</span></span><br><span class="line">           <span class="comment">//     pixelData[i*4+1] = grey</span></span><br><span class="line">           <span class="comment">//     pixelData[i*4+2] = grey</span></span><br><span class="line">           <span class="comment">// &#125;</span></span><br><span class="line">           contextb.putImageData( imageData , <span class="number">0</span> , <span class="number">0</span> , <span class="number">0</span> , <span class="number">0</span> , canvasb.width , canvasb.height )</span><br><span class="line">           context.putImageData()</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h2 id="æ›²çº¿ç»˜åˆ¶"><a href="#æ›²çº¿ç»˜åˆ¶" class="headerlink" title="æ›²çº¿ç»˜åˆ¶"></a>æ›²çº¿ç»˜åˆ¶</h2><h3 id="arc-ç»˜åˆ¶åœ†å¼§"><a href="#arc-ç»˜åˆ¶åœ†å¼§" class="headerlink" title="arc ç»˜åˆ¶åœ†å¼§"></a>arc ç»˜åˆ¶åœ†å¼§</h3><p>æ³¨æ„ï¼Œarcç»˜åˆ¶çš„æ˜¯ä¸€æ¡å¼§çº¿ï¼Œå¹¶éé—­åˆçš„ä¸è§„åˆ™åœ†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.arc(</span><br><span class="line">centerx, centery, radius,</span><br><span class="line">startingAngle, endingAngle,</span><br><span class="line">anticlockwise = false</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><h3 id="arcTo-éœ€ä¸-moveTo-çš„ä¸€èµ·ä½¿ç”¨"><a href="#arcTo-éœ€ä¸-moveTo-çš„ä¸€èµ·ä½¿ç”¨" class="headerlink" title="arcTo(éœ€ä¸ moveTo çš„ä¸€èµ·ä½¿ç”¨)"></a>arcTo(éœ€ä¸ moveTo çš„ä¸€èµ·ä½¿ç”¨)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context.moveTo( x0 , y0 )   å¼€å§‹ç‚¹ï¼›</span><br><span class="line">context.arcTo( </span><br><span class="line">x1 , y1 ,               æ§åˆ¶ç‚¹ï¼›</span><br><span class="line">x2 , y2 ,               æ§åˆ¶ç‚¹ï¼›</span><br><span class="line">radius );               ç»“æŸç‚¹ï¼›</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/canvas/arcTo.jpg" alt title class>                <p></p>            </figure><h3 id="è´å¡å°”æ›²çº¿-Bezier"><a href="#è´å¡å°”æ›²çº¿-Bezier" class="headerlink" title="è´å¡å°”æ›²çº¿ Bezier"></a>è´å¡å°”æ›²çº¿ Bezier</h3><h4 id="ä»‹ç»-5"><a href="#ä»‹ç»-5" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>è´å¡å°”æ›²çº¿ç±»ä¼¼äºpsç”»å›¾è½¯ä»¶ä¸­çš„é’¢ç¬”å·¥å…·ç”»å‡ºçš„çº¿ï¼Œæ— è®ºä¸‹é¢ä»‹ç»çš„äºŒæ¬¡è¿˜æ˜¯ä¸‰æ¬¡æ›²çº¿ï¼Œå®ƒä»¬éƒ½éœ€è¦ç»“åˆmoveToç»˜åˆ¶å¼€å§‹ç‚¹ã€‚</p><h4 id="éœ€è¦moveToé…åˆç»˜åˆ¶å¼€å§‹ç‚¹"><a href="#éœ€è¦moveToé…åˆç»˜åˆ¶å¼€å§‹ç‚¹" class="headerlink" title="éœ€è¦moveToé…åˆç»˜åˆ¶å¼€å§‹ç‚¹"></a>éœ€è¦moveToé…åˆç»˜åˆ¶å¼€å§‹ç‚¹</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="äºŒæ¬¡è´å¡å°”æ›²çº¿"><a href="#äºŒæ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="äºŒæ¬¡è´å¡å°”æ›²çº¿"></a>äºŒæ¬¡è´å¡å°”æ›²çº¿</h4><p>äºŒæ¬¡è´å¡å°”æ›²çº¿APIæ˜¯quadraticCurveToï¼ŒäºŒæ¬¡è´å¡å°”æ›²çº¿ä¸ä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„åŒºåˆ«åœ¨äºï¼ŒäºŒæ¬¡ä¸èƒ½ç”»æ³¢æµªçº¿ï¼Œä¸‰æ¬¡å¯ä»¥ï¼š<br><figure class="image-box">                <img src="/image/canvas/bezeirinfo.jpg" alt title class>                <p></p>            </figure><br>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¼”ç¤ºäº†å¼€å§‹ç‚¹ã€æ§åˆ¶ç‚¹ã€ç»“æŸç‚¹ã€‚<br><figure class="image-box">                <img src="/image/canvas/bezeir.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸‰æ¬¡è´å¡å°”æ›²çº¿"><a href="#ä¸‰æ¬¡è´å¡å°”æ›²çº¿" class="headerlink" title="ä¸‰æ¬¡è´å¡å°”æ›²çº¿"></a>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</h4><p>ä¸‰æ¬¡è´å¡å°”æ›²çº¿APIæ˜¯ bezierCurveTo æ›´å¤šä¿¡æ¯å‚è€ƒã€ŠäºŒæ¬¡è´å¡å°”æ›²çº¿ Bezierã€‹ï¼š<br><figure class="image-box">                <img src="/image/canvas/bezeircurve.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç”»çº¿æ¡åªèƒ½ç”¨stroke"><a href="#ç”»çº¿æ¡åªèƒ½ç”¨stroke" class="headerlink" title="ç”»çº¿æ¡åªèƒ½ç”¨stroke"></a>ç”»çº¿æ¡åªèƒ½ç”¨stroke</h3><p>å¦‚é¢˜ï¼Œçº¿æ¡ä½¿ç”¨fillå°†æ— æ³•ç»˜åˆ¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context.beginPath();</span><br><span class="line">context.moveTo(2,2)</span><br><span class="line">context.lineTo(300,400)</span><br><span class="line">context.lineWidth=5;</span><br><span class="line">context.fillStyle=&apos;yellow&apos;;</span><br><span class="line">context.stroke();</span><br></pre></td></tr></table></figure></p><h2 id="ç‚«ä¸½çš„å€’è®¡æ—¶æ•ˆæœdemo"><a href="#ç‚«ä¸½çš„å€’è®¡æ—¶æ•ˆæœdemo" class="headerlink" title="ç‚«ä¸½çš„å€’è®¡æ—¶æ•ˆæœdemo"></a>ç‚«ä¸½çš„å€’è®¡æ—¶æ•ˆæœdemo</h2><h3 id="æ•°æ®å»ºæ¨¡â€“å¤šç»´æ•°ç»„çŸ©é˜µåˆ›å»ºæ•°å­—æ¨¡å‹"><a href="#æ•°æ®å»ºæ¨¡â€“å¤šç»´æ•°ç»„çŸ©é˜µåˆ›å»ºæ•°å­—æ¨¡å‹" class="headerlink" title="æ•°æ®å»ºæ¨¡â€“å¤šç»´æ•°ç»„çŸ©é˜µåˆ›å»ºæ•°å­—æ¨¡å‹"></a>æ•°æ®å»ºæ¨¡â€“å¤šç»´æ•°ç»„çŸ©é˜µåˆ›å»ºæ•°å­—æ¨¡å‹</h3><p>ç”¨ä¸€ä¸ªåªæœ‰0å’Œ1çš„æ•°ç»„ï¼Œ1è¡¨ç¤ºæœ‰è·¯å¾„ï¼Œ0è¡¨ç¤ºå¡«å……ä¸ºç©ºã€‚<br><figure class="image-box">                <img src="/image/canvas/digit.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/canvas/cell.png" alt title class>                <p></p>            </figure></p><h3 id="è®¡ç®—æ•°å­—çŸ©é˜µæ¨¡å‹å†…çš„å…ƒç´ åæ ‡"><a href="#è®¡ç®—æ•°å­—çŸ©é˜µæ¨¡å‹å†…çš„å…ƒç´ åæ ‡" class="headerlink" title="è®¡ç®—æ•°å­—çŸ©é˜µæ¨¡å‹å†…çš„å…ƒç´ åæ ‡"></a>è®¡ç®—æ•°å­—çŸ©é˜µæ¨¡å‹å†…çš„å…ƒç´ åæ ‡</h3><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåªè¦æˆ‘ä»¬èƒ½çŸ¥é“çŸ©é˜µå·¦ä¸Šè§’çš„åæ ‡å€¼xyï¼Œå°±å¯ä»¥è®¡ç®—å‡ºçŸ©é˜µå†…æ‰€æœ‰çš„å…ƒç´ åæ ‡å€¼ï¼›<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„iå’Œjåˆ†åˆ«æ˜¯äºŒç»´æ•°ç»„çš„iå’Œjï¼Œå®ƒä»¬å¯¹åº”çš„åˆå§‹å€¼éƒ½æ˜¯0ï¼Œå…·ä½“å…¬å¼ï¼Œå‚è€ƒä¸Šå›¾ã€‚</p><h3 id="æ¨¡æ‹ŸæŠ›ç‰©çº¿è·¯å¾„"><a href="#æ¨¡æ‹ŸæŠ›ç‰©çº¿è·¯å¾„" class="headerlink" title="æ¨¡æ‹ŸæŠ›ç‰©çº¿è·¯å¾„"></a>æ¨¡æ‹ŸæŠ›ç‰©çº¿è·¯å¾„</h3><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> aBall = &#123;</span><br><span class="line">       x:x+j*<span class="number">2</span>*(RADIUS+<span class="number">1</span>)+(RADIUS+<span class="number">1</span>),</span><br><span class="line">       y:y+i*<span class="number">2</span>*(RADIUS+<span class="number">1</span>)+(RADIUS+<span class="number">1</span>),</span><br><span class="line">       <span class="comment">//gæ˜¯é‡åŠ›åŠ é€Ÿåº¦ï¼Œåªå½±å“åœ¨å‚ç›´æ–¹å‘çš„é€Ÿåº¦ï¼ŒMath.random() åˆ›é€ æ¯ä¸ªä¸åŒå°çƒä¸åŒçš„é‡åŠ›åŠ é€Ÿåº¦ï¼Œäº§ç”Ÿä¸åŒçš„é€Ÿåº¦ï¼Œè®©æ¯ä¸ªå°çƒè¿åŠ¨æ›´åŠ è‡ªç„¶</span></span><br><span class="line">       g:<span class="number">1.5</span>+<span class="built_in">Math</span>.random(),</span><br><span class="line">       <span class="comment">//vxå°çƒåœ¨x æ°´å¹³æ–¹å‘çš„é€Ÿåº¦ï¼ŒMath.pow( -1 , Math.ceil( Math.random()*1000 ) ) * 4 å…¶å®å°±æ˜¯éšæœºç”Ÿæˆ-4å’Œ4</span></span><br><span class="line">       vx:<span class="built_in">Math</span>.pow( <span class="number">-1</span> , <span class="built_in">Math</span>.ceil( <span class="built_in">Math</span>.random()*<span class="number">1000</span> ) ) * <span class="number">4</span>,</span><br><span class="line">       <span class="comment">//vxå°çƒåœ¨y å‚ç›´æ–¹å‘çš„é€Ÿåº¦ï¼Œè®©å°çƒæœ‰ä¸€ä¸ªå‘ä¸ŠæŠ›çš„åŠ¨ä½œã€‚</span></span><br><span class="line">       vy:<span class="number">-5</span>,</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; balls.length ; i ++ )&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//æ¨¡æ‹ŸæŠ›ç‰©çº¿è·¯å¾„</span></span><br><span class="line">       balls[i].x += balls[i].vx;</span><br><span class="line">       balls[i].y += balls[i].vy;</span><br><span class="line">       balls[i].vy += balls[i].g;</span><br><span class="line">   <span class="comment">//0.75æ˜¯ç©ºæ°”é˜»åŠ›ï¼Œå½“çƒé¢è½åˆ°åœ°é¢æ—¶ï¼Œå°çƒåº”è¯¥åå¼¹åŸæ¥é«˜åº¦çš„0.75</span></span><br><span class="line">       <span class="keyword">if</span>( balls[i].y &gt;= WINDOW_HEIGHT-RADIUS )&#123;</span><br><span class="line">           balls[i].y = WINDOW_HEIGHT-RADIUS;</span><br><span class="line">           balls[i].vy = - balls[i].vy*<span class="number">0.75</span>;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="xã€yåæ ‡å€¼"><a href="#xã€yåæ ‡å€¼" class="headerlink" title="xã€yåæ ‡å€¼"></a>xã€yåæ ‡å€¼</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="g-é‡åŠ›åŠ é€Ÿåº¦"><a href="#g-é‡åŠ›åŠ é€Ÿåº¦" class="headerlink" title="g é‡åŠ›åŠ é€Ÿåº¦"></a>g é‡åŠ›åŠ é€Ÿåº¦</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="vx-æ°´å¹³æ–¹å‘é€Ÿåº¦"><a href="#vx-æ°´å¹³æ–¹å‘é€Ÿåº¦" class="headerlink" title="vx æ°´å¹³æ–¹å‘é€Ÿåº¦"></a>vx æ°´å¹³æ–¹å‘é€Ÿåº¦</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="vy-å‚ç›´æ–¹å‘é€Ÿåº¦"><a href="#vy-å‚ç›´æ–¹å‘é€Ÿåº¦" class="headerlink" title="vy å‚ç›´æ–¹å‘é€Ÿåº¦"></a>vy å‚ç›´æ–¹å‘é€Ÿåº¦</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="ç©ºæ°”é˜»åŠ›"><a href="#ç©ºæ°”é˜»åŠ›" class="headerlink" title="ç©ºæ°”é˜»åŠ›"></a>ç©ºæ°”é˜»åŠ›</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h3 id="ç¢°æ’æ£€æµ‹"><a href="#ç¢°æ’æ£€æµ‹" class="headerlink" title="ç¢°æ’æ£€æµ‹"></a>ç¢°æ’æ£€æµ‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//åªå–å±å¹•å†…çš„å…ƒç´ </span><br><span class="line">    var cnt = 0</span><br><span class="line">    for( var i = 0 ; i &lt; balls.length ; i ++ )&#123;</span><br><span class="line">        //ç¢°æ’æ£€æµ‹--æ»¡è¶³ä¸‹é¢æƒ…å†µè¯´æ˜åœ¨å±å¹•ä¸Š</span><br><span class="line">        if( balls[i].x + RADIUS &gt; 0 &amp;&amp; balls[i].x -RADIUS &lt; WINDOW_WIDTH )&#123;</span><br><span class="line">            balls[cnt++] = balls[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">//ballsæ•°ç»„å‰é¢çš„å…ƒç´ ï¼Œéƒ½æ˜¯æœ€å…ˆç”Ÿæˆçš„ï¼Œå› æ­¤ï¼Œä¹Ÿåº”è¯¥æœ€å…ˆè¢«åˆ é™¤</span><br><span class="line">    while( balls.length &gt; cnt )&#123;</span><br><span class="line">        balls.pop();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æº¢å‡ºåˆ é™¤çš„ä¼˜åŒ–å¤„ç†"><a href="#æº¢å‡ºåˆ é™¤çš„ä¼˜åŒ–å¤„ç†" class="headerlink" title="æº¢å‡ºåˆ é™¤çš„ä¼˜åŒ–å¤„ç†"></a>æº¢å‡ºåˆ é™¤çš„ä¼˜åŒ–å¤„ç†</h3><p>å‚è€ƒã€Šç¢°æ’æ£€æµ‹ã€‹</p><h3 id="ç”¨50æ¯«ç§’è½®è¯¢æ¨¡æ‹Ÿ1ç§’çš„åŠ¨ä½œ"><a href="#ç”¨50æ¯«ç§’è½®è¯¢æ¨¡æ‹Ÿ1ç§’çš„åŠ¨ä½œ" class="headerlink" title="ç”¨50æ¯«ç§’è½®è¯¢æ¨¡æ‹Ÿ1ç§’çš„åŠ¨ä½œ"></a>ç”¨50æ¯«ç§’è½®è¯¢æ¨¡æ‹Ÿ1ç§’çš„åŠ¨ä½œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setInterval(</span><br><span class="line">       <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="comment">//æ¸²æŸ“æ—¶é—´çš„æ˜¾ç¤º</span></span><br><span class="line">           renderTimes( context );</span><br><span class="line">           <span class="comment">//æ¸²æŸ“å°çƒçš„æ˜¾ç¤º</span></span><br><span class="line">           renderBall( context );</span><br><span class="line">           <span class="comment">//æ›´æ–°æ—¶é—´ å’Œ å°çƒæ•°æ®ï¼Œä»¥å¤‡ä¸‹æ¬¡æ—¶é—´å’Œå°çƒæ¸²æŸ“ä½¿ç”¨</span></span><br><span class="line">           updateBallDatas();</span><br><span class="line">       &#125; , <span class="number">50</span></span><br><span class="line">   );</span><br></pre></td></tr></table></figure><p>å½“æ—¶åœ¨æƒ³ï¼Œæ—¢ç„¶åšä¸€ä¸ªå®šæ—¶å™¨ï¼Œé‚£ä¹ˆå°±å†™ä¸€ä¸ª1ç§’çš„è½®è¯¢ï¼Œè¿™æ ·æ‰æœ‰é“ç†ï¼Œå…¶å®ä¸ç„¶ï¼Œå¦‚æœå†™ä¸€ä¸ª1ç§’çš„è½®è¯¢å°±ä¼šæœ‰å»¶è¿Ÿçš„ç°è±¡ï¼›<br>å¦‚æœä½ ç”¨ä¸€ä¸ª50æ¯«ç§’çš„è½®è¯¢ï¼Œå¦‚æœç§’é’Ÿæ²¡æœ‰åˆ°è¾¾ä¸‹ä¸€ç§’ï¼Œç”»é¢å…¶å®ä¹Ÿä¸ä¼šè·³è½¬ï¼Œå› ä¸º50æ¯«ç§’å†…æ‹¿åˆ°ä»€ä¹ˆç”»é¢ï¼Œå°±æ˜¾ç¤ºä»€ä¹ˆç”»é¢ï¼Œåœ¨ä¸€ç§’å†…ï¼Œæœ‰20ä¸ª50æ¯«ç§’ï¼Œ<br>è¿™20ä¸ª50æ¯«ç§’å†…æ‹¿åˆ°çš„æ—¶é—´è‚¯å®šéƒ½æ˜¯ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆæ¸²æŸ“å‡ºæ¥çš„å€¼è‚¯å®šä¹Ÿæ˜¯ä¸€ä¸ªå€¼ï¼Œå°±ä¸ä¼šæœ‰è·³è½¬ï¼Œä¹Ÿä¸ä¼šå‡ºç°å»¶æ—¶ï¼Œå°±ç®—å‡ºç°å»¶æ—¶ä¹Ÿåªæ˜¯50æ¯«ç§’å†…ï¼Œå¯ä»¥æ¥å—ã€‚<br>æ‰€ä»¥ï¼Œè¦æƒ³åšä¸€ä¸ªå“åº”å¿«é€Ÿçš„ï¼Œåº”è¯¥å°†è½®è¯¢å€¼æ”¹å¾—æ›´å°ï¼Œè€Œä¸æ˜¯æ”¾å¤§ã€‚</p><h4 id="è¯¯åŒºä¸€ï¼šä»¥ä¸º1ç§’çš„å®šæ—¶å™¨å°±åº”è¯¥ä½¿ç”¨1ç§’çš„è½®è¯¢"><a href="#è¯¯åŒºä¸€ï¼šä»¥ä¸º1ç§’çš„å®šæ—¶å™¨å°±åº”è¯¥ä½¿ç”¨1ç§’çš„è½®è¯¢" class="headerlink" title="è¯¯åŒºä¸€ï¼šä»¥ä¸º1ç§’çš„å®šæ—¶å™¨å°±åº”è¯¥ä½¿ç”¨1ç§’çš„è½®è¯¢"></a>è¯¯åŒºä¸€ï¼šä»¥ä¸º1ç§’çš„å®šæ—¶å™¨å°±åº”è¯¥ä½¿ç”¨1ç§’çš„è½®è¯¢</h4><p>å‚è€ƒä¸Šé¢è®²è§£</p><h4 id="è¯¯åŒºä¸€ï¼šä»¥ä¸º50ç§’çš„è½®è¯¢ä¼šè®©å®šæ—¶å™¨åŠ é€Ÿè·³è½¬"><a href="#è¯¯åŒºä¸€ï¼šä»¥ä¸º50ç§’çš„è½®è¯¢ä¼šè®©å®šæ—¶å™¨åŠ é€Ÿè·³è½¬" class="headerlink" title="è¯¯åŒºä¸€ï¼šä»¥ä¸º50ç§’çš„è½®è¯¢ä¼šè®©å®šæ—¶å™¨åŠ é€Ÿè·³è½¬"></a>è¯¯åŒºä¸€ï¼šä»¥ä¸º50ç§’çš„è½®è¯¢ä¼šè®©å®šæ—¶å™¨åŠ é€Ÿè·³è½¬</h4><p>å‚è€ƒä¸Šé¢è®²è§£</p><h4 id="ä¸€ç§’çš„å®šæ—¶å™¨ï¼Œå¿…é¡»ä½¿ç”¨å°äºä¸€ç§’çš„è½®è¯¢"><a href="#ä¸€ç§’çš„å®šæ—¶å™¨ï¼Œå¿…é¡»ä½¿ç”¨å°äºä¸€ç§’çš„è½®è¯¢" class="headerlink" title="ä¸€ç§’çš„å®šæ—¶å™¨ï¼Œå¿…é¡»ä½¿ç”¨å°äºä¸€ç§’çš„è½®è¯¢"></a>ä¸€ç§’çš„å®šæ—¶å™¨ï¼Œå¿…é¡»ä½¿ç”¨å°äºä¸€ç§’çš„è½®è¯¢</h4><p>å‚è€ƒä¸Šé¢è®²è§£</p><h4 id="è½®è¯¢æ—¶é—´è¶Šå°ï¼Œå»¶æ—¶æ›´å°ï¼Œå“åº”æ›´å¿«"><a href="#è½®è¯¢æ—¶é—´è¶Šå°ï¼Œå»¶æ—¶æ›´å°ï¼Œå“åº”æ›´å¿«" class="headerlink" title="è½®è¯¢æ—¶é—´è¶Šå°ï¼Œå»¶æ—¶æ›´å°ï¼Œå“åº”æ›´å¿«"></a>è½®è¯¢æ—¶é—´è¶Šå°ï¼Œå»¶æ—¶æ›´å°ï¼Œå“åº”æ›´å¿«</h4><p>å‚è€ƒä¸Šé¢è®²è§£</p><h4 id="è½®è¯¢æ—¶é—´éœ€è¦å¹³è¡¡jsä»£ç æ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½"><a href="#è½®è¯¢æ—¶é—´éœ€è¦å¹³è¡¡jsä»£ç æ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½" class="headerlink" title="è½®è¯¢æ—¶é—´éœ€è¦å¹³è¡¡jsä»£ç æ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½"></a>è½®è¯¢æ—¶é—´éœ€è¦å¹³è¡¡jsä»£ç æ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½</h4><p>ä»£ç è½®è¯¢æ—¶ï¼Œæ‰§è¡Œäº†å¾ˆå¤šjsï¼Œè¿™äº›jså¦‚æœéå¸¸å¤§é‡ï¼Œä¹Ÿæ˜¯éœ€è¦æ—¶é—´æ‰èƒ½æ‰§è¡Œå®Œï¼Œæ‰€ä»¥è½®è¯¢æ—¶é—´è¦è€ƒè™‘æ˜¯å¦å¤§é‡æ‰§è¡Œjsä¼šå»¶è¿Ÿè½®è¯¢æ—¶é—´ï¼Œä¹Ÿè¦è€ƒè™‘æ€§èƒ½ã€‚</p><h3 id="demoåœ°å€"><a href="#demoåœ°å€" class="headerlink" title="demoåœ°å€"></a>demoåœ°å€</h3><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/index.html" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹demo</a></p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> canvas </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssçŸ¥è¯†ç‚¹æ±‡</title>
      <link href="/2020/05/01/css_big/"/>
      <url>/2020/05/01/css_big/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡çš„cssçŸ¥è¯†ç‚¹ï¼Œéƒ½åœ¨ã€Šcssç¬”è®°ã€‹ä¸­æœ‰åˆ—ä¸¾ï¼Œç”±äºçŸ¥è¯†ç‚¹ç¯‡å¹…è¾ƒå¤§ï¼Œå•ç‹¬å°†çŸ¥è¯†ç‚¹æ”¾ç½®äºæœ¬ç¯‡è¯¦ç»†æè¿°ã€‚</p><h2 id="floatæµ®åŠ¨å®šä½"><a href="#floatæµ®åŠ¨å®šä½" class="headerlink" title="floatæµ®åŠ¨å®šä½"></a>floatæµ®åŠ¨å®šä½</h2><p>æµ®åŠ¨å®šä½æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><h3 id="æ”¶ç¼©ä¸ºæœ€å°å®½åº¦"><a href="#æ”¶ç¼©ä¸ºæœ€å°å®½åº¦" class="headerlink" title="æ”¶ç¼©ä¸ºæœ€å°å®½åº¦"></a>æ”¶ç¼©ä¸ºæœ€å°å®½åº¦</h3><p>é™¤éå·²ç»å®šä¹‰äº†æµ®åŠ¨å…ƒç´ çš„å®½åº¦ï¼Œå¦åˆ™æµ®åŠ¨å…ƒç´ æ”¶ç¼©ä¸ºé€‚åº”å…ƒç´ å†…å®¹çš„æœ€å°å®½åº¦ã€‚</p><h3 id="é‡åˆ°å—çº§å…ƒç´ å°†åœæ­¢"><a href="#é‡åˆ°å—çº§å…ƒç´ å°†åœæ­¢" class="headerlink" title="é‡åˆ°å—çº§å…ƒç´ å°†åœæ­¢"></a>é‡åˆ°å—çº§å…ƒç´ å°†åœæ­¢</h3><p>å¯¹äºè‡ªèº«è€Œè¨€ï¼Œæµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµåï¼Œé‡åˆ°å—çº§å…ƒç´ å°†åœæ­¢ï¼Œ</p><h3 id="è„±ç¦»æ–‡æ¡£æµï¼Œä½†ä¸è„±ç¦»æ–‡æœ¬æµ"><a href="#è„±ç¦»æ–‡æ¡£æµï¼Œä½†ä¸è„±ç¦»æ–‡æœ¬æµ" class="headerlink" title="è„±ç¦»æ–‡æ¡£æµï¼Œä½†ä¸è„±ç¦»æ–‡æœ¬æµ"></a>è„±ç¦»æ–‡æ¡£æµï¼Œä½†ä¸è„±ç¦»æ–‡æœ¬æµ</h3><p>å½“ä¸€ä¸ªå…ƒç´ å˜ä¸ºæµ®åŠ¨å…ƒç´ æ—¶ï¼Œå¯¹ä¸åŒç±»å‹çš„ç›¸é‚»å…ƒç´ å½±å“å¦‚ä¸‹ï¼š</p><h4 id="ä¸è¡Œå†…å…ƒç´ ç›¸é‚»"><a href="#ä¸è¡Œå†…å…ƒç´ ç›¸é‚»" class="headerlink" title="ä¸è¡Œå†…å…ƒç´ ç›¸é‚»"></a>ä¸è¡Œå†…å…ƒç´ ç›¸é‚»</h4><p>ä¼šè®©è¡Œå†…å…ƒç´ ç´§è´´æµ®åŠ¨å…ƒç´ ï¼Œå…¸å‹çš„åœºæ™¯â€“å›¾ç‰‡æ–‡å­—ç¯ç»•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">img&#123;</span><br><span class="line">  float: left;</span><br><span class="line">&#125;</span><br><span class="line">&lt;img src=&quot;./aa.jpg&quot; alt=&quot;aa&quot;&gt;</span><br><span class="line">&lt;span&gt;è¡Œå†…å…ƒç´ æ–‡å­—è¡Œå†…å…ƒç´ æ–‡å­—&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><h4 id="ä¸å—çº§å…ƒç´ ç›¸é‚»"><a href="#ä¸å—çº§å…ƒç´ ç›¸é‚»" class="headerlink" title="ä¸å—çº§å…ƒç´ ç›¸é‚»"></a>ä¸å—çº§å…ƒç´ ç›¸é‚»</h4><p>æµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œæ­¤æ—¶æ•ˆæœç±»ä¼¼positionï¼šabsoluteï¼Œç›¸å½“äºæµ®åŠ¨å…ƒç´ ä¸å­˜åœ¨ï¼Œä¸ä¹‹ç›¸é‚»çš„å—çº§å…ƒç´ å°†å é¢†æµ®åŠ¨å…ƒç´ ä½ç½®ï¼›<br><strong>ä½†æ˜¯å—çº§å…ƒç´ å†…çš„è¡Œå†…å…ƒç´ ï¼Œå°†ç¯ç»•æµ®åŠ¨å…ƒç´ </strong>ï¼Œè¿™æ˜¯å› ä¸ºfloatä¸è„±ç¦»æ–‡æœ¬æµ<br>æµ®åŠ¨ä¹‹å‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    .float &#123;</span><br><span class="line">        height: 60px;</span><br><span class="line">        background: rebeccapurple;</span><br><span class="line">    &#125;</span><br><span class="line">    .test &#123;</span><br><span class="line">        border: 45px solid #00BCD4;</span><br><span class="line">        background: blue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;float&quot;&gt;æµ®åŠ¨ä¹‹å‰&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;test&quot;&gt;ç›¸é‚»å—çº§å…ƒç´ &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css/float-before.jpg" alt title class>                <p></p>            </figure><p>æµ®åŠ¨ä¹‹åï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    .float &#123;</span><br><span class="line">      /* å…¶ä»–ä»£ç çœç•¥ */</span><br><span class="line">        float: left;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;div class=&quot;float&quot;&gt;æµ®åŠ¨ä¹‹å&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;test&quot;&gt;ç›¸é‚»å—çº§å…ƒç´ ç›¸é‚»å—çº§å…ƒç´ ç›¸é‚»å—çº§å…ƒç´ ...&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css/float-after.jpg" alt title class>                <p></p>            </figure><h4 id="ä¸æµ®åŠ¨å…ƒç´ ç›¸é‚»"><a href="#ä¸æµ®åŠ¨å…ƒç´ ç›¸é‚»" class="headerlink" title="ä¸æµ®åŠ¨å…ƒç´ ç›¸é‚»"></a>ä¸æµ®åŠ¨å…ƒç´ ç›¸é‚»</h4><p>æµ®åŠ¨å…ƒç´ ä¸æµ®åŠ¨å…ƒç´  å°†å¹¶åˆ—å¹¶æ’ï¼›<br>æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæµ®åŠ¨å…ƒç´ çš„é«˜åº¦ä¸åŒï¼Œå½“æµ®åŠ¨å…ƒç´ è¢«æŒ¤åˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œå°†ä¼šå¡ä½ï¼š<br><figure class="image-box">                <img src="/image/css/float-pading.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.triangle&#123;</span><br><span class="line">     float: left;</span><br><span class="line">     width: 150px;</span><br><span class="line">     height: 60px;</span><br><span class="line"> &#125;</span><br><span class="line"> .it1&#123;</span><br><span class="line">     height: 80px;</span><br><span class="line">     background:rebeccapurple;</span><br><span class="line"> &#125;</span><br><span class="line"> .it2&#123;</span><br><span class="line">     background:blue;</span><br><span class="line"> &#125;</span><br><span class="line"> .it3&#123;</span><br><span class="line">     background:#00BCD4;</span><br><span class="line"> &#125;</span><br><span class="line"> &lt;div class=&quot;triangle it1&quot;&gt;æµ®åŠ¨å…ƒç´ &lt;/div&gt;</span><br><span class="line"> &lt;div class=&quot;triangle it2&quot;&gt;æµ®åŠ¨å…ƒç´ &lt;/div&gt;</span><br><span class="line"> &lt;div class=&quot;triangle it3&quot;&gt;æµ®åŠ¨å…ƒç´ &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="æ¶ˆé™¤ä¸ç›¸é‚»å…ƒç´ çš„é—´éš™"><a href="#æ¶ˆé™¤ä¸ç›¸é‚»å…ƒç´ çš„é—´éš™" class="headerlink" title="æ¶ˆé™¤ä¸ç›¸é‚»å…ƒç´ çš„é—´éš™"></a>æ¶ˆé™¤ä¸ç›¸é‚»å…ƒç´ çš„é—´éš™</h3><p>å½“è¢«å®šä¹‰ä¸ºæµ®åŠ¨å…ƒç´ æ—¶ï¼Œå®ƒè·ŸåŸæ¥ç›¸é‚»å…ƒç´ å¯èƒ½ç”±äºç³»ç»Ÿä¸­è‡ªå¸¦çš„ç¼éš™ï¼Œä¸€æ—¦å˜æˆæµ®åŠ¨å…ƒç´ ï¼Œæ­¤ç¼éš™å°†æ²¡æœ‰äº†ï¼Œå‚åŠ ã€Šfloatæ¸…ç©ºæ ¼(é—´éš™)çš„åŸå› ã€‹ï¼›<br>æ¶ˆé™¤é—´éš™è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨å¼€å‘ä¸­ç»å¸¸è¢«è¿ç”¨.</p><h3 id="ä¸ç»å¯¹å®šä½åŒºåˆ«"><a href="#ä¸ç»å¯¹å®šä½åŒºåˆ«" class="headerlink" title="ä¸ç»å¯¹å®šä½åŒºåˆ«"></a>ä¸ç»å¯¹å®šä½åŒºåˆ«</h3><p>æµ®åŠ¨å®šä½äºç»å¯¹å®šä½éƒ½ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œä½†äºŒè€…è¡¨ç°ä¸ä¸€æ ·ï¼›<br>ç»å¯¹å®šä½æ˜¯å®Œå…¨è„±ç¦»æ–‡æ¡£æµï¼Œç›¸å½“äºæ–‡æ¡£ä¸­ä¸å­˜åœ¨æ­¤å…ƒç´ äº†ï¼Œè€Œæµ®åŠ¨å®šä½è„±ç¦»æ–‡æ¡£æµè¦åŒºåˆ«è¡Œå†…å…ƒç´ ï¼ŒåŸå› å¦‚ä¸Šã€‚</p><h3 id="floatæ¸…ç©ºæ ¼-é—´éš™-çš„åŸå› "><a href="#floatæ¸…ç©ºæ ¼-é—´éš™-çš„åŸå› " class="headerlink" title="floatæ¸…ç©ºæ ¼(é—´éš™)çš„åŸå› "></a>floatæ¸…ç©ºæ ¼(é—´éš™)çš„åŸå› </h3><p>æ ¹æœ¬åŸå› æ˜¯ç”±äºfloatä¼šå¯¼è‡´èŠ‚ç‚¹è„±ç¦»æ–‡æ¡£æµç»“æ„ã€‚å®ƒéƒ½ä¸å±äºæ–‡æ¡£æµç»“æ„äº†ï¼Œé‚£ä¹ˆå®ƒèº«è¾¹çš„ä»€ä¹ˆæ¢è¡Œã€ç©ºæ ¼å°±éƒ½å’Œå®ƒæ²¡å…³ç³»çš„ï¼Œå®ƒå°±å°½é‡çš„å¾€ä¸€è¾¹å»é æ‹¢ï¼Œèƒ½é å¤šè¿‘å°±é å¤šè¿‘ï¼Œè¿™å°±æ˜¯æ¸…ç©ºæ ¼çš„æœ¬è´¨ã€‚</p><h3 id="å‡ ä¸ªç›¸é‚»floatå…ƒç´ å¡ä½ç°è±¡"><a href="#å‡ ä¸ªç›¸é‚»floatå…ƒç´ å¡ä½ç°è±¡" class="headerlink" title="å‡ ä¸ªç›¸é‚»floatå…ƒç´ å¡ä½ç°è±¡"></a>å‡ ä¸ªç›¸é‚»floatå…ƒç´ å¡ä½ç°è±¡</h3><p>å‚è€ƒã€Šè„±ç¦»æ–‡æ¡£æµï¼Œä½†ä¸è„±ç¦»æ–‡æœ¬æµ  â€“ ä¸æµ®åŠ¨å…ƒç´ ç›¸é‚»ã€‹</p><h3 id="floatå¯¹è‡ªèº«çš„å½±å“"><a href="#floatå¯¹è‡ªèº«çš„å½±å“" class="headerlink" title="floatå¯¹è‡ªèº«çš„å½±å“"></a>floatå¯¹è‡ªèº«çš„å½±å“</h3><h4 id="å½¢æˆâ€œå—â€ï¼ˆBFCï¼‰ï¼Œä»è€Œå¯ä»¥è®¾ç½®heightç­‰ç­‰"><a href="#å½¢æˆâ€œå—â€ï¼ˆBFCï¼‰ï¼Œä»è€Œå¯ä»¥è®¾ç½®heightç­‰ç­‰" class="headerlink" title="å½¢æˆâ€œå—â€ï¼ˆBFCï¼‰ï¼Œä»è€Œå¯ä»¥è®¾ç½®heightç­‰ç­‰"></a>å½¢æˆâ€œå—â€ï¼ˆBFCï¼‰ï¼Œä»è€Œå¯ä»¥è®¾ç½®heightç­‰ç­‰</h4><p>floatå¯ä»¥å½¢æˆä¸€ä¸ªbfcï¼Œbfcç›¸å½“äºä¸€ä¸ªå—çº§å…ƒç´ ï¼Œå¯ä»¥è®¾ç½®å¤§å°ï¼Œæ¶ˆé™¤å¤–è¾¹è·æŠ˜å ã€‚</p><h3 id="floatå¯¹çˆ¶å…ƒç´ å½±å“"><a href="#floatå¯¹çˆ¶å…ƒç´ å½±å“" class="headerlink" title="floatå¯¹çˆ¶å…ƒç´ å½±å“"></a>floatå¯¹çˆ¶å…ƒç´ å½±å“</h3><h4 id="çˆ¶å…ƒç´ çš„é«˜åº¦åå¡Œ"><a href="#çˆ¶å…ƒç´ çš„é«˜åº¦åå¡Œ" class="headerlink" title="çˆ¶å…ƒç´ çš„é«˜åº¦åå¡Œ"></a>çˆ¶å…ƒç´ çš„é«˜åº¦åå¡Œ</h4><p>floatå…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œè®©çˆ¶å…ƒç´ é«˜åº¦ä¸º0ï¼›</p><h3 id="æ¶ˆé™¤æµ®åŠ¨çš„æ–¹æ³•"><a href="#æ¶ˆé™¤æµ®åŠ¨çš„æ–¹æ³•" class="headerlink" title="æ¶ˆé™¤æµ®åŠ¨çš„æ–¹æ³•"></a>æ¶ˆé™¤æµ®åŠ¨çš„æ–¹æ³•</h3><h4 id="æ–¹æ³•ä¸€-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-BFC-â€“-æ¶ˆé™¤æµ®åŠ¨ã€‹"><a href="#æ–¹æ³•ä¸€-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-BFC-â€“-æ¶ˆé™¤æµ®åŠ¨ã€‹" class="headerlink" title="æ–¹æ³•ä¸€ å‚è€ƒ ã€Šcssç¬”è®°  â€“ BFC  â€“ æ¶ˆé™¤æµ®åŠ¨ã€‹"></a>æ–¹æ³•ä¸€ å‚è€ƒ ã€Šcssç¬”è®°  â€“ BFC  â€“ æ¶ˆé™¤æµ®åŠ¨ã€‹</h4><h4 id="æ–¹æ³•äºŒ-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹"><a href="#æ–¹æ³•äºŒ-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹" class="headerlink" title="æ–¹æ³•äºŒ å‚è€ƒ ã€Šcssç¬”è®°  â€“ æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹"></a>æ–¹æ³•äºŒ å‚è€ƒ ã€Šcssç¬”è®°  â€“ æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹</h4><h4 id="æ¶ˆé™¤æµ®åŠ¨æ–¹æ³•ä¼˜ç¼ºç‚¹-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹"><a href="#æ¶ˆé™¤æµ®åŠ¨æ–¹æ³•ä¼˜ç¼ºç‚¹-å‚è€ƒ-ã€Šcssç¬”è®°-â€“-æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹" class="headerlink" title="æ¶ˆé™¤æµ®åŠ¨æ–¹æ³•ä¼˜ç¼ºç‚¹  å‚è€ƒ ã€Šcssç¬”è®°  â€“ æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹"></a>æ¶ˆé™¤æµ®åŠ¨æ–¹æ³•ä¼˜ç¼ºç‚¹  å‚è€ƒ ã€Šcssç¬”è®°  â€“ æ¨èä½¿ç”¨ä¼ªç±»æ¥æ¶ˆé™¤æµ®åŠ¨ã€‹</h4><h2 id="transformä¸åæ ‡å˜æ¢"><a href="#transformä¸åæ ‡å˜æ¢" class="headerlink" title="transformä¸åæ ‡å˜æ¢"></a>transformä¸åæ ‡å˜æ¢</h2><h3 id="transform-origin"><a href="#transform-origin" class="headerlink" title="transform-origin"></a>transform-origin</h3><h4 id="å‚è€ƒå¤–ç½‘-mdnä¸w3c"><a href="#å‚è€ƒå¤–ç½‘-mdnä¸w3c" class="headerlink" title="å‚è€ƒå¤–ç½‘ mdnä¸w3c"></a>å‚è€ƒå¤–ç½‘ mdnä¸w3c</h4><p>åŸºç¡€çŸ¥è¯†è¯·ç§»æ­¥å‚è€ƒä¸Šé¢ä¸¤ä¸ªåœ°å€ã€‚è®°ä½æ˜¯å¤–æ–‡çš„ï¼Œå…¶ä»–ç‰ˆæœ¬å¯èƒ½æ˜¯é˜‰å‰²åçš„å†…å®¹ã€‚</p><h3 id="ä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ"><a href="#ä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ" class="headerlink" title="ä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ"></a>ä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ</h3><h4 id="ä¸¤ç§å†™æ³•"><a href="#ä¸¤ç§å†™æ³•" class="headerlink" title="ä¸¤ç§å†™æ³•"></a>ä¸¤ç§å†™æ³•</h4><p>ä¸‹é¢ä¸¤ç§è¿è¡Œæ•ˆæœä¸ºä»€ä¹ˆä¸€æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//å†™æ³•ä¸€</span><br><span class="line">transform-origin: -100% 50%;</span><br><span class="line">transform: rotate(45deg);</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//å†™æ³•äºŒ</span><br><span class="line">transform-origin: 0 0;</span><br><span class="line">transform: translate(-100%, 50%) rotate(45deg) translate(100%, -50%);</span><br></pre></td></tr></table></figure><h4 id="å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜"><a href="#å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜" class="headerlink" title="å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜"></a>å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜</h4><p>å½“å…ƒç´ å‘ç”Ÿä½ç§»æˆ–è€…æ—‹è½¬åï¼Œè‡ªå¸¦åæ ‡ç³»ä¹Ÿéšç€æ”¹å˜ï¼Œä¸Šé¢å†™æ³•ä¸­çš„transform-originåé¢è·Ÿçš„åæ ‡å°±æ˜¯å…ƒç´ è‡ªå¸¦çš„åæ ‡ç³»ï¼Œä¸€ä¸ªå…ƒç´ å‘ç”Ÿå¹³ç§»å‰åï¼Œå¦‚æœtransform-originéƒ½æŒ‡å‘(0 0),å…¶ç›¸å¯¹äºä¸–ç•Œåæ ‡æ˜¯ä¸åŒä½ç½®ï¼š</p><h4 id="ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨"><a href="#ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨" class="headerlink" title="ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨"></a>ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨</h4><p>å½“è‡ªèº«åæ ‡ç³»æ”¹å˜æ—¶ï¼Œæ¯”å¦‚å‘ç”Ÿæ—‹è½¬åï¼Œå¯¹å…ƒç´ è¿›è¡Œæ°´å¹³æˆ–å‚ç›´åç§»ï¼Œéƒ½æ˜¯æ²¿ç€æ—‹è½¬åçš„è‡ªèº«åæ ‡ç³»è€Œè¨€çš„ã€‚</p><h4 id="äºŒè€…transform-originä¸–ç•Œåæ ‡ä½ç½®ç›¸åŒ"><a href="#äºŒè€…transform-originä¸–ç•Œåæ ‡ä½ç½®ç›¸åŒ" class="headerlink" title="äºŒè€…transform-originä¸–ç•Œåæ ‡ä½ç½®ç›¸åŒ"></a>äºŒè€…transform-originä¸–ç•Œåæ ‡ä½ç½®ç›¸åŒ</h4><p><strong>å‡å¦‚ä¸–ç•Œåæ ‡çš„åŸç‚¹ä¸å…ƒç´ è‡ªå¸¦åæ ‡ç³»ä½ç§»å‰çš„å³ä¸Šè§’åæ ‡é‡åˆ</strong>ï¼š<br>å…ˆåˆ†æä¸Šé¢å†™æ³•äºŒï¼š<br>å…ƒç´ ä½ç§»å‰åæ ‡ 0 0ï¼Œ<br>ä½ç§»-100% 50%åï¼Œ<br>åŸæ¥çš„0 0ç‚¹å°†è¢«ç§»åˆ°ä¸–ç•Œåæ ‡çš„ -100% 50%;<br>æ­¤æ—¶è‡ªå¸¦åæ ‡ç³»çš„0 0ï¼Œä¸ä¸–ç•Œåæ ‡ -100% 50%é‡åˆï¼Œä¸ºåŒä¸€ä½ç½®ã€‚</p><p>å¯¹äºå†™æ³•ä¸€ï¼Œå…¶transform-originçš„ä¸–ç•Œåæ ‡å½“ç„¶ä¸º -100% 50%ï¼›<br>å› æ­¤ä¸Šé¢å†™æ³•ä¸€å’ŒäºŒï¼Œå…¶ransform-originä½ç½®æ˜¯ç›¸åŒçš„ã€‚</p><h4 id="å…ƒç´ å‘ç”Ÿçš„æ—‹è½¬è§’åº¦ä¸transform-originæ— å…³"><a href="#å…ƒç´ å‘ç”Ÿçš„æ—‹è½¬è§’åº¦ä¸transform-originæ— å…³" class="headerlink" title="å…ƒç´ å‘ç”Ÿçš„æ—‹è½¬è§’åº¦ä¸transform-originæ— å…³"></a>å…ƒç´ å‘ç”Ÿçš„æ—‹è½¬è§’åº¦ä¸transform-originæ— å…³</h4><p>ä¸‹é¢å†™æ³•ä¸­ï¼Œæ—‹è½¬çš„åŸç‚¹ä½ç½®å°½ç®¡ä¸ä¸€æ ·ï¼Œå…ƒç´ æ—‹è½¬å‰ä¸æ—‹è½¬åï¼Œå‘ç”Ÿçš„è§’åº¦åç§»å¤§å°æ˜¯ä¸€æ ·çš„ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘ç”Ÿä¸‹é¢ä¸¤ç§åç§»åï¼Œè™½ç„¶å…ƒç´ åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„ä½ç§»ä¸åŒï¼Œä½†æ˜¯å…¶æ—‹è½¬çš„è§’åº¦å¤§å°æ˜¯ä¸€æ ·çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä¸‹é¢ä¸¤ç§åç§»åï¼Œ æ—‹è½¬è§’åº¦è¿˜æ˜¯ä¸€æ ·</span><br><span class="line"></span><br><span class="line">//å†™æ³•ä¸€</span><br><span class="line">transform-origin: -100px 50%;</span><br><span class="line">transform: rotate(45deg);</span><br><span class="line"></span><br><span class="line">//å†™æ³•äºŒ</span><br><span class="line">transform-origin: -200px 50%;</span><br><span class="line">transform: rotate(45deg);</span><br></pre></td></tr></table></figure></p><h4 id="ç›¸åŒtransform-originå‘ç”Ÿåç§»"><a href="#ç›¸åŒtransform-originå‘ç”Ÿåç§»" class="headerlink" title="ç›¸åŒtransform-originå‘ç”Ÿåç§»"></a>ç›¸åŒtransform-originå‘ç”Ÿåç§»</h4><p>ä¸‹é¢ä¸¤ç§å†™æ³•ï¼Œå…¶transform-originåœ¨ä¸–ç•Œåæ ‡ä¸Šå±äºåŒä¸€ä¸ªåæ ‡ç‚¹ï¼Œæ­¤æ—¶å†™æ³•äºŒç›¸å¯¹äºå†™æ³•ä¸€å‘ç”Ÿçš„åç§»ä¸º -100% 50%ï¼Œå› æ­¤æ— è®ºä¹‹åä¸¤ç§å†™æ³•ä¸‹ï¼Œéƒ½å‘ç”ŸåŒæ ·éƒ½åç§»ï¼Œè¦è®©æœ€åä½ç½®ä¸€æ ·ï¼Œåªéœ€åœ¨å†™æ³•äºŒä¸­ æŠ¹å¹³è¿™ä¸ªåç§»å·® -100% 50%å³å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹äºåŒä¸€å…ƒç´ ä½¿ç”¨ä¸‹é¢ä¸¤ç§å†™æ³•</span><br><span class="line"></span><br><span class="line">//å†™æ³•ä¸€</span><br><span class="line">transform-origin: -100% 50%;</span><br><span class="line">transform: rotate(45deg);</span><br><span class="line"></span><br><span class="line">//å†™æ³•äºŒ</span><br><span class="line">transform-origin: 0 0;</span><br><span class="line">transform: translate(-100%, 50%) ;</span><br><span class="line"></span><br><span class="line">//å†™æ³•äºŒ å»¶ä¼¸ï¼ˆæŠ¹å¹³åç§»å·®ï¼‰</span><br><span class="line">transform-origin: 0 0;</span><br><span class="line">transform: translate(-100%, 50%) rotate(45deg) translate(100%, -50%);</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸‹ä¹Ÿæ˜¯ç›¸åŒæ•ˆæœï¼ˆä¸‹é¢äºŒè€…ï¼Œ transform-origin ç›¸åŒï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//ä¸‹é¢ä¸¤ç§å†™æ³•æ˜¯ä¸€ä¸ªæ„æ€</span><br><span class="line">//å†™æ³•A</span><br><span class="line">transform-origin: 20px -50px;</span><br><span class="line">transform: translate(-120px, 100px) rotate(110deg) translate(120px, -100px);</span><br><span class="line"></span><br><span class="line">//å†™æ³•B</span><br><span class="line">transform-origin: -100px 50px;</span><br><span class="line">transform: rotate(110deg);</span><br></pre></td></tr></table></figure></p><h4 id="ç›¸åŒtransform-originçš„ç»“è®º"><a href="#ç›¸åŒtransform-originçš„ç»“è®º" class="headerlink" title="ç›¸åŒtransform-originçš„ç»“è®º"></a>ç›¸åŒtransform-originçš„ç»“è®º</h4><p>åŒä¸€ä¸ªå…ƒç´ ï¼Œå½“ä½¿ç”¨åŒä¸€ä¸ªä¸–ç•Œä½ç½®çš„transform-originæ—¶ï¼Œå½¢å¦‚å¦‚ä¸‹æ—¶ï¼Œè¦æƒ³å†™æ³•Aè¾¾åˆ°å†™æ³•Bçš„æ•ˆæœï¼Œå†™æ³•Aåªéœ€å°†transformå®šä¹‰çš„translate(-120px, 100px)ç­‰å€¼åå‘ä»¥ä¸‹ï¼Œå³å¯æŠ¹å¹³åç§»å·®ï¼ŒäºŒè€…å¾—åˆ°ç›¸åŒæ•ˆæœï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å†™æ³•A</span><br><span class="line">transform-origin: 20px -50px;</span><br><span class="line">transform: translate(-120px, 100px) rotate(110deg);</span><br><span class="line">//transform: translate(-120px, 100px) rotate(110deg) translate(120px, -100px);</span><br><span class="line"></span><br><span class="line">//å†™æ³•B</span><br><span class="line">transform-origin: -100px 50px;</span><br><span class="line">transform: rotate(110deg);</span><br></pre></td></tr></table></figure></p><h4 id="ä¸æ‡‚å°±çœ‹demo"><a href="#ä¸æ‡‚å°±çœ‹demo" class="headerlink" title="ä¸æ‡‚å°±çœ‹demo"></a>ä¸æ‡‚å°±çœ‹demo</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/transform-origin-rect.html" target="_blank" rel="noopener">é•¿æ–¹å½¢åŠ¨ç”»æ•ˆæœdemo</a><br><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/transform-origin-point.html" target="_blank" rel="noopener">ç‚¹åŠ¨ç”»æ•ˆæœdemo</a></p><h3 id="å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜-1"><a href="#å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜-1" class="headerlink" title="å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜"></a>å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜</h3><p>å‚è€ƒã€Šä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ  â€“ å…ƒç´ ä½ç§»ï¼Œè‡ªå¸¦åæ ‡ç³»è·Ÿç€æ”¹å˜ã€‹</p><h3 id="ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨-1"><a href="#ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨-1" class="headerlink" title="ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨"></a>ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨</h3><p>å‚è€ƒã€Šä¸¤ä¸ªç›¸åŒå†™æ³•å¼•å‘çš„æ€è€ƒ  â€“ ä½ç§»åªæŒ‰è‡ªèº«åæ ‡ç³»è¿åŠ¨ã€‹</p><h2 id="cssåŠ¨ç”»"><a href="#cssåŠ¨ç”»" class="headerlink" title="cssåŠ¨ç”»"></a>cssåŠ¨ç”»</h2><h3 id="25å¸§"><a href="#25å¸§" class="headerlink" title="25å¸§"></a>25å¸§</h3><p>æŒ‡çš„æ˜¯ä¸€ç§’å†…æœ‰25å¼ é™æ­¢çš„å›¾ç‰‡ï¼Œä¸€èˆ¬è¾¾åˆ°25å¸§ï¼Œåœ¨è§†è§‰ä¸Šå¯å½¢æˆæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>æ›´å¤šå‚è€ƒã€Šå‰ç«¯demoè®²è§£ â€“ åŠ¨ç”»demo åŠ cssåŠ¨ç”»çŸ¥è¯†ç‚¹ã€‹</p><h2 id="scss"><a href="#scss" class="headerlink" title="scss"></a>scss</h2><h3 id="ä»¥ä¸‹æ ‡å¼€å¤´çš„æ–‡ä»¶ä¸èƒ½ç›´æ¥ç¼–è¯‘-åªèƒ½è¢«import"><a href="#ä»¥ä¸‹æ ‡å¼€å¤´çš„æ–‡ä»¶ä¸èƒ½ç›´æ¥ç¼–è¯‘-åªèƒ½è¢«import" class="headerlink" title="ä»¥ä¸‹æ ‡å¼€å¤´çš„æ–‡ä»¶ä¸èƒ½ç›´æ¥ç¼–è¯‘ åªèƒ½è¢«import"></a>ä»¥ä¸‹æ ‡å¼€å¤´çš„æ–‡ä»¶ä¸èƒ½ç›´æ¥ç¼–è¯‘ åªèƒ½è¢«import</h3><p>è¿™æ˜¯ scssçš„è§„åˆ™ï¼Œå¦‚æœæ–‡ä»¶ ä»¥ä¸‹æ ‡å¼€å¤´å‘½ä»¤ï¼Œ å°†ä¸èƒ½ç›´æ¥è¢«ç¼–è¯‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#è¢«ç¼–è¯‘çš„scssæ–‡ä»¶ï¼Œ ç¼–è¯‘åè¾“å‡ºçš„æ–‡ä»¶ï¼Œ å‘ç°è¾“å‡ºæ–‡ä»¶ var.css ä¸ºç©ºï¼›</span><br><span class="line">npx node-sass _variables.scss var.css</span><br></pre></td></tr></table></figure></p><p><code>index.scss</code> å¼•å…¥ <code>_variables.scss</code>, ç„¶å npx ç¼–è¯‘index.scss å³å¯ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.scssï¼› */</span></span><br><span class="line"><span class="keyword">@import</span> <span class="string">"_variables"</span>;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssç¬”è®°</title>
      <link href="/2020/05/01/css/"/>
      <url>/2020/05/01/css/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å¯¹ä»ä¸šä»¥æ¥çš„cssçŸ¥è¯†ä»æ–°æ¢³ç†ï¼Œæ•´ç†æˆå››ç¯‡åšå®¢ï¼Œé™¤æœ¬ç¯‡åšå®¢å¤–ï¼Œè¿˜æœ‰ï¼š<br><a href="http://127.0.0.1:4000/2019/04/06/css_vertical_align/" target="_blank" rel="noopener">ã€Švertical-alignã€è¡Œç›’å­ã€baselineã€‹</a><br><a href="http://127.0.0.1:4000/2019/04/13/css_mobile/" target="_blank" rel="noopener">ã€Šcssä¹‹ç§»åŠ¨å¼€å‘ã€‹</a><br><a href="http://127.0.0.1:4000/2019/04/14/css_layout/" target="_blank" rel="noopener">ã€Šcssä¹‹å¸ƒå±€ã€‹</a></p><h2 id="csséœ€æ±‚æ–¹æ¡ˆ"><a href="#csséœ€æ±‚æ–¹æ¡ˆ" class="headerlink" title="csséœ€æ±‚æ–¹æ¡ˆ"></a>csséœ€æ±‚æ–¹æ¡ˆ</h2><h3 id="ä¸‰è§’"><a href="#ä¸‰è§’" class="headerlink" title="ä¸‰è§’"></a>ä¸‰è§’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;triangle&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">.triangle&#123;</span><br><span class="line">  height: 0;</span><br><span class="line">  width: 0;</span><br><span class="line">  border: 40px solid;</span><br><span class="line">  border-color: red #00ff37 #1b00ff #673AB7;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹,è¾¹æ¡†çš„å››è¾¹å¹¶éæˆ‘ä»¬æƒ³è±¡çš„å››ä¸ªçŸ©å½¢ï¼Œè€Œæ˜¯å››ä¸ªä¸‰è§’å½¢ï¼š<br><figure class="image-box">                <img src="/image/css/block.jpg" alt title class>                <p></p>            </figure></p><p>border-colorå¯ä»¥æ¥å—é€æ˜è‰²ï¼štransparent</p><p>å°†ä¸Šé¢ä»£ç çš„border-coloræ”¹æˆå¦‚ä¸‹ï¼Œå³å¯å¾—åˆ°ä¸€ä¸ªä¸‰è§’ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">border-color: transparent transparent #1b00ff transparent;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css/triangle.jpg" alt title class>                <p></p>            </figure><h3 id="é˜´å½±box-shadow"><a href="#é˜´å½±box-shadow" class="headerlink" title="é˜´å½±box-shadow"></a>é˜´å½±box-shadow</h3><h4 id="å‚æ•°ä»‹ç»"><a href="#å‚æ•°ä»‹ç»" class="headerlink" title="å‚æ•°ä»‹ç»"></a>å‚æ•°ä»‹ç»</h4><p>box-shadow: none|h-offset v-offset blur spread color |inset|initial|inherit;<br>            æ˜¯å¦éœ€è¦é˜´å½±|ç«–ç›´åç§» æ°´å¹³åç§» æ¨¡ç³Šåº¦ æ‰©å±•åº¦ é¢œè‰²|æ–¹å‘|åŸºæœ¬ä¸ç”¨|åŸºæœ¬ä¸ç”¨<br>æ¨¡ç³Šåº¦ å…¶å®å°±æ˜¯å¯¹é˜´å½±çš„è¾¹ç¼˜è¿›è¡Œæ¨¡ç³Šå¤„ç†ï¼Œè®©é˜´å½±ä¸å¤–ç•Œé¢œè‰²è¿‡æ¸¡è‡ªç„¶ï¼›<br>æ‰©å±•åº¦ åœ¨é˜´å½±çš„åŸºç¡€ä¸Šï¼Œå¯¹é˜´å½±è¿›è¡Œç­‰é•¿åº¦åŠ é•¿ï¼Œå¦‚å›¾ã€‚<br><figure class="image-box">                <img src="/image/css/shadow6.jpg" alt title class>                <p></p>            </figure></p><p>æ–¹å‘ é˜´å½±é»˜è®¤å‘å¤–æ‰©æ•£ï¼Œå¯ä»¥è®¾ç½®å‘å†…ï¼›<br>ä¸‹é¢é€šè¿‡ä¸€ç»„å›¾ç‰‡å±•ç¤ºæ¯é¡¹å‚æ•°æ„ä¹‰ï¼š<br><figure class="image-box">                <img src="/image/css/shadow1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/shadow2.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/shadow3.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/shadow4.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/shadow5.jpg" alt title class>                <p></p>            </figure></p><h4 id="ç«–ç›´ã€æ°´å¹³åç§»éƒ½è®¾ç½®ä¸º0"><a href="#ç«–ç›´ã€æ°´å¹³åç§»éƒ½è®¾ç½®ä¸º0" class="headerlink" title="ç«–ç›´ã€æ°´å¹³åç§»éƒ½è®¾ç½®ä¸º0"></a>ç«–ç›´ã€æ°´å¹³åç§»éƒ½è®¾ç½®ä¸º0</h4><p>äºŒè€…éƒ½è®¾ç½®ä¸º0ï¼Œå¯ä»¥è¾¾åˆ°outlineçš„æ•ˆæœï¼Œå¹¶ä¸”è¿˜æœ‰æ¨¡ç³Šåº¦<br><figure class="image-box">                <img src="/image/css/shadow7.jpg" alt title class>                <p></p>            </figure></p><h4 id="å¤šä¸ªé˜´å½±"><a href="#å¤šä¸ªé˜´å½±" class="headerlink" title="å¤šä¸ªé˜´å½±"></a>å¤šä¸ªé˜´å½±</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">height: 80px;</span><br><span class="line">width: 180px;</span><br><span class="line">background: gainsboro;</span><br><span class="line">box-shadow: 5px 5px blue, 10px 10px red, 15px 15px green;</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/css/shadow8.jpg" alt title class>                <p></p>            </figure><h4 id="box-shadowè„±ç¦»æ–‡æ¡£æµ"><a href="#box-shadowè„±ç¦»æ–‡æ¡£æµ" class="headerlink" title="box-shadowè„±ç¦»æ–‡æ¡£æµ"></a>box-shadowè„±ç¦»æ–‡æ¡£æµ</h4><p>box-shadow æ˜¯è„±ç¦»æ–‡æ¡£æµçš„ï¼Œç»™å…ƒç´ è®¾ç½®box-shadowï¼Œæ— è®ºæ•°å€¼å¤šå°‘ï¼Œéƒ½ä¸ä¼šè®©å…ƒç´ ç§»åŠ¨ï¼Œè¿™ç‚¹å¾ˆå¥½</p><h4 id="box-shadow-ä¸-filter"><a href="#box-shadow-ä¸-filter" class="headerlink" title="box-shadow ä¸ filter"></a>box-shadow ä¸ filter</h4><p>filterä¹Ÿå¯ä»¥ç”¨æ¥å†™ä¸€ä¸ªé˜´å½±æ•ˆæœã€‚filterè¿˜æœ‰å…¶ä»–å¾ˆå¤šåŠŸèƒ½ã€‚<br>ä»¥ä¸‹ä¸¤ä¸ªå†™æ³•ï¼Œéƒ½å¯ä»¥è¾¾åˆ°å…ƒç´ é˜´å½±çš„æ•ˆæœï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">filter: drop-shadow(0px 0px 10px gray);</span><br><span class="line">box-shadow:0px 0px 10px gray;</span><br></pre></td></tr></table></figure></p><h3 id="outline-è½®å»Šçº¿"><a href="#outline-è½®å»Šçº¿" class="headerlink" title="outline è½®å»Šçº¿"></a>outline è½®å»Šçº¿</h3><h4 id="outlineèƒ½åšåˆ°çš„æ•ˆæœï¼š"><a href="#outlineèƒ½åšåˆ°çš„æ•ˆæœï¼š" class="headerlink" title="outlineèƒ½åšåˆ°çš„æ•ˆæœï¼š"></a>outlineèƒ½åšåˆ°çš„æ•ˆæœï¼š</h4><figure class="image-box">                <img src="/image/css/outline.jpg" alt title class>                <p></p>            </figure><h4 id="outline-ç›¸å…³å±æ€§ï¼š"><a href="#outline-ç›¸å…³å±æ€§ï¼š" class="headerlink" title="outline ç›¸å…³å±æ€§ï¼š"></a>outline ç›¸å…³å±æ€§ï¼š</h4><p>outline-width/outline-style/outline-color/outline-offse;</p><h4 id="outline-styleçš„ç›¸åå€¼ï¼š"><a href="#outline-styleçš„ç›¸åå€¼ï¼š" class="headerlink" title="outline-styleçš„ç›¸åå€¼ï¼š"></a>outline-styleçš„ç›¸åå€¼ï¼š</h4><ul><li><p>ridge groove</p></li><li><p>inset outset</p></li></ul><h4 id="outline-å†™æ³•"><a href="#outline-å†™æ³•" class="headerlink" title="outline å†™æ³•"></a>outline å†™æ³•</h4><p>outline æ˜¯ outline-width outline-style outline-color çš„ç®€å†™ï¼Œå¦‚ï¼š<br>outline: 15px solid grey;<br>ä¹Ÿå¯ç®€å†™ï¼šoutline: solid;</p><h4 id="outline-offse"><a href="#outline-offse" class="headerlink" title="outline-offse"></a>outline-offse</h4><p>outline-offse æ˜¯ outlineç›¸å…³çš„å¦å¤–ä¸€ä¸ªæ ·å¼ï¼Œä½†ä¸åŒ…å«åœ¨outlineçš„ç®€å†™å½“ä¸­ã€‚</p><h4 id="outlineä¸box-shadowåŒºåˆ«"><a href="#outlineä¸box-shadowåŒºåˆ«" class="headerlink" title="outlineä¸box-shadowåŒºåˆ«"></a>outlineä¸box-shadowåŒºåˆ«</h4><p>outline ä¸ box-shadowæœ‰æ—¶å€™å¯ä»¥è¾¾åˆ°ç›¸åŒæ•ˆæœï¼Œä¸åŒçš„æ˜¯ï¼Œå½“å…ƒç´ æœ‰border-rediusï¼Œoutlineä¼šæœ‰ç¼éš™ï¼Œbox-shadowä¸ä¼šã€‚</p><h3 id="å……æ»¡çˆ¶çº§æˆ–å±å¹•"><a href="#å……æ»¡çˆ¶çº§æˆ–å±å¹•" class="headerlink" title="å……æ»¡çˆ¶çº§æˆ–å±å¹•"></a>å……æ»¡çˆ¶çº§æˆ–å±å¹•</h3><h4 id="å……æ»¡çˆ¶çº§ï¼š"><a href="#å……æ»¡çˆ¶çº§ï¼š" class="headerlink" title="å……æ»¡çˆ¶çº§ï¼š"></a>å……æ»¡çˆ¶çº§ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  left: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å……æ»¡å±å¹•ï¼š"><a href="#å……æ»¡å±å¹•ï¼š" class="headerlink" title="å……æ»¡å±å¹•ï¼š"></a>å……æ»¡å±å¹•ï¼š</h4><p>åœ¨cssä¸­position: fixedæ˜¯ç”±position: absoluteå‘å±•è€Œæ¥ï¼Œç›¸å¯¹äºå±å¹•å®šä½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">position: fixed;</span><br><span class="line">left: 0;</span><br><span class="line">right: 0;</span><br><span class="line">top: 0;</span><br><span class="line">bottom: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="0-5pxçš„ä¸‹è¾¹æ¡†"><a href="#0-5pxçš„ä¸‹è¾¹æ¡†" class="headerlink" title="0.5pxçš„ä¸‹è¾¹æ¡†"></a>0.5pxçš„ä¸‹è¾¹æ¡†</h3><h4 id="0-5pxçš„å…ƒç´ "><a href="#0-5pxçš„å…ƒç´ " class="headerlink" title="0.5pxçš„å…ƒç´ "></a>0.5pxçš„å…ƒç´ </h4><p>å®šä¹‰é«˜åº¦ä¸º1pxï¼Œç„¶åç¼©å°é«˜åº¦ä¸€åŠï¼Œå¾—åˆ°0.5px;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> .small&#123;</span><br><span class="line">     width: 200px;</span><br><span class="line">     background: blue;</span><br><span class="line">     height: 1px;</span><br><span class="line">     transform: scaleY(0.5);</span><br><span class="line"> &#125;</span><br><span class="line">&lt;div class=&quot;small&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h4 id="0-5pxçš„ä¸‹è¾¹æ¡†-1"><a href="#0-5pxçš„ä¸‹è¾¹æ¡†-1" class="headerlink" title="0.5pxçš„ä¸‹è¾¹æ¡†"></a>0.5pxçš„ä¸‹è¾¹æ¡†</h4><p>ç»™è¦å®šä¹‰ä¸‹è¾¹æ¡†çš„å…ƒç´ å®šä¹‰ä¸€ä¸ªä¼ªç±»ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ä¸ç”¨å¦å¤–å†™htmlï¼›<br>ä¼ªç±»ç›¸å½“äºä¸€ä¸ªå…ƒç´ ï¼Œåœ¨ä¼ªç±»ä¸­ï¼Œå†™ä¸€ä¸ª0.5pxçš„å…ƒç´ ;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.item::after &#123;</span><br><span class="line">    content: &apos;&apos;;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    background: blue;</span><br><span class="line">    height: 1px;</span><br><span class="line">    transform: scaleY(0.5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;item&quot;&gt;1&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="æ¸å˜"><a href="#æ¸å˜" class="headerlink" title="æ¸å˜"></a>æ¸å˜</h3><p>å…³äºæ¸å˜çš„ä¸œè¥¿å¤ªå¤šï¼Œè¿™é‡Œåªå†™ç‚¹ä¸œè¥¿ï¼Œç•™ä¸ªå°è±¡ã€‚</p><h4 id="çº¿æ€§æ¸å˜"><a href="#çº¿æ€§æ¸å˜" class="headerlink" title="çº¿æ€§æ¸å˜"></a>çº¿æ€§æ¸å˜</h4><p>çº¿æ€§æ¸å˜ç”±linear-gradientå®šä¹‰ï¼Œlinear-gradientæ˜¯ä¸€ä¸ªcsså‡½æ•°,</p><h5 id="åŒä½ç½®å®šä¹‰ä¸¤ä¸ªé¢œè‰²"><a href="#åŒä½ç½®å®šä¹‰ä¸¤ä¸ªé¢œè‰²" class="headerlink" title="åŒä½ç½®å®šä¹‰ä¸¤ä¸ªé¢œè‰²"></a>åŒä½ç½®å®šä¹‰ä¸¤ä¸ªé¢œè‰²</h5><p>åŒä½ç½®å®šä¹‰ä¸¤ä¸ªé¢œè‰²ä¼šå½¢æˆä¸€ä¸ªåˆ†å‰²çº¿ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: linear-gradient(blue, green 30%, red 50%);</span><br></pre></td></tr></table></figure><p>ä»ä¸Šåˆ°ä¸‹ï¼Œè“è‰²å¼€å§‹ï¼Œåˆ°30%çš„ä½ç½®æ—¶æ˜¯ç»¿è‰²å¼€å§‹ï¼Œåˆ°50%æ˜¯çº¢è‰²å¼€å§‹ï¼Œä»¥åéƒ½æ˜¯çº¢è‰²ï¼Œæ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css/linear1.jpg" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: linear-gradient(blue, green 50%, red 50%);</span><br></pre></td></tr></table></figure><p>åŒä½ç½®å®šä¹‰äº†ç»¿è‰²å’Œçº¢è‰² 50%ï¼›å‘ç°ç»¿è‰²å’Œçº¢è‰²é‡åˆäº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¸€ä¸ªå°æŠ€å·§ï¼Œæ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css/linear2.jpg" alt title class>                <p></p>            </figure></p><h5 id="å…¶ä»–å€¼"><a href="#å…¶ä»–å€¼" class="headerlink" title="å…¶ä»–å€¼"></a>å…¶ä»–å€¼</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/* æ¸å˜è½´ä¸º45åº¦ï¼Œä»è“è‰²æ¸å˜åˆ°çº¢è‰² */</span><br><span class="line">linear-gradient(45deg, blue, red);</span><br><span class="line">/* ä»å³ä¸‹åˆ°å·¦ä¸Šã€ä»è“è‰²æ¸å˜åˆ°çº¢è‰² */</span><br><span class="line">linear-gradient(to left top, blue, red);</span><br></pre></td></tr></table></figure><h4 id="å¾„å‘æ¸å˜"><a href="#å¾„å‘æ¸å˜" class="headerlink" title="å¾„å‘æ¸å˜"></a>å¾„å‘æ¸å˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-image: radial-gradient(circle, red, yellow, green);</span><br></pre></td></tr></table></figure><h4 id="æ¸å˜çš„åº”ç”¨åœºæ™¯"><a href="#æ¸å˜çš„åº”ç”¨åœºæ™¯" class="headerlink" title="æ¸å˜çš„åº”ç”¨åœºæ™¯"></a>æ¸å˜çš„åº”ç”¨åœºæ™¯</h4><p>æ¸å˜çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå¾ˆå¤šcssæŠ€å·§ï¼Œå¾ˆå¤šå›¾å½¢ï¼Œå¦‚å››è¾¹å½¢ï¼Œè±å½¢ï¼Œæ¢¯å½¢ï¼Œå¤šè¾¹å½¢ï¼Œæ ¼å­èƒŒæ™¯ï¼ŒèƒŒæ™¯å›¾æ¡ˆ ç­‰ç­‰ï¼Œéƒ½å¯ä»¥æœ‰æ¸å˜å®Œæˆï¼›<br>åœ¨ã€Šcss æ­ç§˜ã€‹è¿™è¾¹ä¹¦ä¸­ï¼Œæœ‰å¾ˆå¤šæŠ€å·§éƒ½åŸºäºæ¸å˜å®Œæˆ</p><h3 id="ä¼ªå…ƒç´ åšè¾¹æ¡†"><a href="#ä¼ªå…ƒç´ åšè¾¹æ¡†" class="headerlink" title="ä¼ªå…ƒç´ åšè¾¹æ¡†"></a>ä¼ªå…ƒç´ åšè¾¹æ¡†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">        height: 100px;</span><br><span class="line">        width: 100px;</span><br><span class="line">        position: relative;</span><br><span class="line">    &#125;</span><br><span class="line">    .text::after&#123;</span><br><span class="line">        content: &apos;&apos;;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 0;</span><br><span class="line">        bottom: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        right: 0;</span><br><span class="line">        border: 1px solid;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;item&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;text&quot;&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>è¿™å…¶å®åˆ©ç”¨äº†ç»å¸¸ä½¿ç”¨çš„é®ç½©æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ä»¥æ­¤è¾¾åˆ°ç™¾åˆ†ä¹‹ç™¾æ’‘æ»¡bodyï¼Œè¿™æ¯”widthï¼š100%è¦å°‘å¾ˆå¤šæƒ³ä¸åˆ°çš„é—®é¢˜</span><br><span class="line">.mask&#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    bottom: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">    background: grey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="cursor-å…‰æ ‡å›¾æ ‡"><a href="#cursor-å…‰æ ‡å›¾æ ‡" class="headerlink" title="cursor å…‰æ ‡å›¾æ ‡"></a>cursor å…‰æ ‡å›¾æ ‡</h3><p>è®¾ç½®å…‰æ ‡å›¾å½¢ï¼Œå‡ ä¹ä½ é¡µé¢ä¸Šçœ‹åˆ°çš„æ‰€æœ‰å…‰æ ‡å›¾æ ·ï¼Œéƒ½å¯ä»¥è®¾ç½®ï¼Œå‚è€ƒMDNï¼Œå¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cursor: wait;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css/cursor.jpg" alt title class>                <p></p>            </figure><h3 id="è·Ÿéšç¥å™¨"><a href="#è·Ÿéšç¥å™¨" class="headerlink" title="è·Ÿéšç¥å™¨"></a>è·Ÿéšç¥å™¨</h3><p>js å‡½æ•°ï¼Œè‡ªé€‚åº”æ–¹å‘ä¸Šä¸‹å·¦å³æµ®åŠ¨</p><h3 id="æ–‡å­—æ•ˆæœ"><a href="#æ–‡å­—æ•ˆæœ" class="headerlink" title="æ–‡å­—æ•ˆæœ"></a>æ–‡å­—æ•ˆæœ</h3><p>E:\css-mastery-16-master\chapter-04\04-33-experimenting-with-shadows.html</p><h3 id="å¹³ç§»å’ŒåŠ¨ç”»"><a href="#å¹³ç§»å’ŒåŠ¨ç”»" class="headerlink" title="å¹³ç§»å’ŒåŠ¨ç”»"></a>å¹³ç§»å’ŒåŠ¨ç”»</h3><p>å¯æŸ¥çœ‹<a href="https://github.com/YeWills/css_demo" target="_blank" rel="noopener">GitHubä¸Šçš„demo</a><br>æˆ–æŸ¥çœ‹<a href="https://github.com/YeWills/css_demo/tree/master/chapter-10" target="_blank" rel="noopener">GitHubä¸Šçš„demo</a></p><h3 id="å››ç§å±…ä¸­æ–¹å¼"><a href="#å››ç§å±…ä¸­æ–¹å¼" class="headerlink" title="å››ç§å±…ä¸­æ–¹å¼"></a>å››ç§å±…ä¸­æ–¹å¼</h3><h4 id="flexå±…ä¸­"><a href="#flexå±…ä¸­" class="headerlink" title="flexå±…ä¸­"></a>flexå±…ä¸­</h4><p> flexä¸ºæ°´å¹³å’Œå‚ç›´å±…ä¸­è€Œç”Ÿï¼Œæ˜¯å½“ä»£å±…ä¸­æœ€ä½³æ–¹æ¡ˆï¼Œè¿™é‡Œæ˜¯å±•ç¤ºç›¸å¯¹å±å¹•å±…ä¸­ï¼Œå¦‚æœæ˜¯å…ƒç´ å±…ä¸­æ›´åŠ ç®€å•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">body&#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    position: fixed;</span><br><span class="line">    left: 0;</span><br><span class="line">    right: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    bottom: 0;</span><br><span class="line">   &#125;</span><br><span class="line">.wrap &#123;</span><br><span class="line">width: 18em;</span><br><span class="line">height: 18em;</span><br><span class="line">box-sizing: border-box;</span><br><span class="line">background: #00BCD4;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;wrap&quot;&gt; &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><h4 id="translateå±…ä¸­"><a href="#translateå±…ä¸­" class="headerlink" title="translateå±…ä¸­"></a>translateå±…ä¸­</h4><p> flexæ²¡æœ‰å‡ºæ¥ä¹‹å‰ï¼Œè¯¥æ–¹æ³•æœ€å¥½ï¼Œå› ä¸ºä¸éœ€è¦çŸ¥é“å…ƒç´ å®½åº¦ï¼›<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//é™¤flexå¤–ï¼Œæœ€å¥½çš„å±…ä¸­æœ€å¥½æ–¹æ³•</span><br><span class="line"> .wrap &#123;</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          transform: translate(-50%, -50%)</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h4 id="marginè´Ÿæ•°"><a href="#marginè´Ÿæ•°" class="headerlink" title="marginè´Ÿæ•°"></a>marginè´Ÿæ•°</h4><p> è¯¥æ–¹æ³•æœ‰ç‚¹ï¼Œå…¼å®¹æ€§æœ€å¼ºï¼Œå¼Šç«¯ï¼Œéœ€è¦çŸ¥é“å…ƒç´ å®½åº¦ï¼›<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//å±…ä¸­æœ€å¥½æ–¹æ³•</span><br><span class="line"> .wrap &#123;</span><br><span class="line">          position: absolute;</span><br><span class="line">          top: 50%;</span><br><span class="line">          left: 50%;</span><br><span class="line">          margin-top: -3em;</span><br><span class="line">          margin-left: -9em;</span><br><span class="line">          width:18em;</span><br><span class="line">          height:6eml</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h4 id="è§†å£vhæ–¹æ³•"><a href="#è§†å£vhæ–¹æ³•" class="headerlink" title="è§†å£vhæ–¹æ³•"></a>è§†å£vhæ–¹æ³•</h4><p> è¯¥æ–¹æ³•å±€é™æ€§å¾ˆå¤§ï¼Œåªèƒ½ç›¸å¯¹äºè§†å£ï¼Œä¹Ÿå°±æ˜¯ç›¸å¯¹äºå±å¹•å±…ä¸­ï¼Œæ— æ³•ç›¸å¯¹å…ƒç´ å±…ä¸­ï¼›<a href="http://dabblet.com/gist/bf12b39d8f5da2b6e5b6" target="_blank" rel="noopener">demo</a><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.wrap &#123;</span><br><span class="line">width: 18em;</span><br><span class="line">height: 18em;</span><br><span class="line">margin: 50vh auto 0;</span><br><span class="line">transform: translateY(-50%);</span><br><span class="line">box-sizing: border-box;</span><br><span class="line">background: #00BCD4;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;wrap&quot;&gt; &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="è‡ªå®šä¹‰CheckBox"><a href="#è‡ªå®šä¹‰CheckBox" class="headerlink" title="è‡ªå®šä¹‰CheckBox"></a>è‡ªå®šä¹‰CheckBox</h3><p>ä¸»è¦æ˜¯å®šä¹‰å¥½è¿™å‡ ä¸ªçŠ¶æ€çš„æ ·å¼ï¼š focus hover  åŒæ—¶focuså’Œhoverï¼›<br>ä¸»è¦é€šè¿‡ä»¥ä¸‹æ­¥éª¤ï¼š</p><h4 id="å®šä¹‰-label-for-å’Œid"><a href="#å®šä¹‰-label-for-å’Œid" class="headerlink" title="å®šä¹‰ label[for]å’Œid"></a>å®šä¹‰ label[for]å’Œid</h4><h4 id="éšè—å…ƒç´ input"><a href="#éšè—å…ƒç´ input" class="headerlink" title="éšè—å…ƒç´ input"></a>éšè—å…ƒç´ input</h4><h4 id="åˆ©ç”¨é€‰æ‹©å™¨-input-type-â€checkboxâ€-label"><a href="#åˆ©ç”¨é€‰æ‹©å™¨-input-type-â€checkboxâ€-label" class="headerlink" title="åˆ©ç”¨é€‰æ‹©å™¨ input[type=â€checkboxâ€] + label"></a>åˆ©ç”¨é€‰æ‹©å™¨ input[type=â€checkboxâ€] + label</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;input type=&quot;checkbox&quot; name=&quot;lang-as&quot; id=&quot;lang-as&quot;&gt;</span><br><span class="line">  &lt;label for=&quot;lang-as&quot;&gt;ActionScript&lt;/label&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">input[type=&quot;checkbox&quot;] &#123;</span><br><span class="line">      position: absolute;</span><br><span class="line">      overflow: hidden;</span><br><span class="line">      width: 1px;</span><br><span class="line">      height: 1px;</span><br><span class="line">      clip: rect(0 0 0 0);</span><br><span class="line">    &#125;</span><br><span class="line">input[type=&quot;checkbox&quot;] + label &#123;</span><br><span class="line">  line-height: 1.5;</span><br><span class="line">  color: #333;</span><br><span class="line">  padding-left: 1.5em;</span><br><span class="line">  background-position: .125em 36%;</span><br><span class="line">  background-repeat: no-repeat;</span><br><span class="line">  background-size: 18px 18px;</span><br><span class="line">&#125;</span><br><span class="line">input[type=&quot;checkbox&quot;] + label &#123;</span><br><span class="line">  background-image: url(images/checkbox-unchecked.png);</span><br><span class="line">&#125;</span><br><span class="line">input[type=&quot;checkbox&quot;]:checked + label &#123;</span><br><span class="line">  background-image: url(images/checkbox-checked.png);</span><br><span class="line">&#125;</span><br><span class="line">input[type=&quot;checkbox&quot;]:focus + label &#123;</span><br><span class="line">  background-image: url(images/checkbox-unchecked-focus.png);</span><br><span class="line">&#125;</span><br><span class="line">input[type=&quot;checkbox&quot;]:focus:checked + label &#123;</span><br><span class="line">  background-image: url(images/checkbox-checked-focus.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/YeWills/css_demo/blob/master/chapter-09/09-checkbox.html" target="_blank" rel="noopener">demo</a></p><h3 id="å¦‚ä½•é€‚é…ç§»åŠ¨ç«¯é¡µé¢"><a href="#å¦‚ä½•é€‚é…ç§»åŠ¨ç«¯é¡µé¢" class="headerlink" title="å¦‚ä½•é€‚é…ç§»åŠ¨ç«¯é¡µé¢"></a>å¦‚ä½•é€‚é…ç§»åŠ¨ç«¯é¡µé¢</h3><h4 id="viewport"><a href="#viewport" class="headerlink" title="viewport"></a>viewport</h4><p>è®¾ç½®viewportè®©é¡µé¢å®½åº¦ä¸å±å¹•å®½åº¦é€‚é…ï¼Œå¦åˆ™åœ¨ç§»åŠ¨ç«¯ä¸Šæ˜¾ç¤ºæ—¶å­—ä½“å°†å˜å°</p><h4 id="remï¼viewportï¼media-query"><a href="#remï¼viewportï¼media-query" class="headerlink" title="remï¼viewportï¼media query"></a>remï¼viewportï¼media query</h4><p>é€šè¿‡remã€viewportã€åª’ä½“æŸ¥è¯¢ç­‰è¿›è¡Œå“åº”å¼è®¾è®¡</p><h4 id="è®¾è®¡ä¸Šï¼šéšè—-æŠ˜è¡Œ-è‡ªé€‚åº”"><a href="#è®¾è®¡ä¸Šï¼šéšè—-æŠ˜è¡Œ-è‡ªé€‚åº”" class="headerlink" title="è®¾è®¡ä¸Šï¼šéšè— æŠ˜è¡Œ è‡ªé€‚åº”"></a>è®¾è®¡ä¸Šï¼šéšè— æŠ˜è¡Œ è‡ªé€‚åº”</h4><p>åŠŸèƒ½è®¾è®¡ä¸Šï¼Œpcç«¯æœ‰çš„åŠŸèƒ½ï¼Œç§»åŠ¨ç«¯å¯ä»¥å»æ‰éšè—ï¼›<br>pcç«¯ä¸€è¡Œæ˜¾ç¤ºçš„ï¼Œç§»åŠ¨ç«¯å¤šè¡Œæ˜¾ç¤ºï¼›<br>ç»™ä¸€äº›å…ƒç´ ç•™ä¸‹è‡ªé€‚åº”çš„ç©ºé—´ï¼Œè®©ä¸€äº›å…ƒç´ å¯å¤§å¯å°ã€‚</p><h3 id="æ‰‘å…‹ç‰Œå¼å±•å¼€å›¾ç‰‡-transform-origin"><a href="#æ‰‘å…‹ç‰Œå¼å±•å¼€å›¾ç‰‡-transform-origin" class="headerlink" title="æ‰‘å…‹ç‰Œå¼å±•å¼€å›¾ç‰‡(transform-origin)"></a>æ‰‘å…‹ç‰Œå¼å±•å¼€å›¾ç‰‡(transform-origin)</h3><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cardfan</span> &gt; <span class="selector-tag">img</span>&#123;</span><br><span class="line">  <span class="attribute">transform-origin</span>: center <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cardfan</span> <span class="selector-tag">img</span><span class="selector-pseudo">:first-child</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">rotate</span>(<span class="number">5deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cardfan</span> <span class="selector-tag">img</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">  <span class="attribute">transform</span>:<span class="built_in">rotate</span>(-<span class="number">5deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="transform-origin"><a href="#transform-origin" class="headerlink" title="transform-origin"></a>transform-origin</h4><p>transform-origin é»˜è®¤å€¼ä¸º centerï¼Œå¦‚æœç›´æ¥æ—‹è½¬ä¼šè¾¾ä¸åˆ°æ­¤æ•ˆæœï¼Œéœ€è¦è®¾ç½®åœ†å¿ƒï¼Œæ­¤æ—¶å¯è¾¾åˆ°æ‰‘å…‹ç‰Œå¼æ ·å±•å¼€æ•ˆæœï¼Œæ­¤æ—¶è®¾ç½®ä½ç½®å¦‚ä¸‹ï¼Œæ›´å¤šç”¨æ³•å‚è€ƒmdnï¼Œ<br><figure class="image-box">                <img src="/image/css/transform-origin.jpg" alt title class>                <p></p>            </figure></p><p>å¦å¤–ä¹Ÿå¯ä»¥è®¾ç½®transform-origin: center -400px;æ˜¾ç¤ºç›¸åæ•ˆæœã€‚</p><h3 id="æŠ˜è§’ä¸ç¿»é¡µåŠ¨ç”»"><a href="#æŠ˜è§’ä¸ç¿»é¡µåŠ¨ç”»" class="headerlink" title="æŠ˜è§’ä¸ç¿»é¡µåŠ¨ç”»"></a>æŠ˜è§’ä¸ç¿»é¡µåŠ¨ç”»</h3><h4 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h4><figure class="image-box">                <img src="/image/css/page.jpg" alt title class>                <p></p>            </figure><h4 id="æŠ˜è§’æ–¹æ¡ˆ-ä¸¤è¾¹borderå€¼ä¸º0"><a href="#æŠ˜è§’æ–¹æ¡ˆ-ä¸¤è¾¹borderå€¼ä¸º0" class="headerlink" title="æŠ˜è§’æ–¹æ¡ˆ-ä¸¤è¾¹borderå€¼ä¸º0"></a>æŠ˜è§’æ–¹æ¡ˆ-ä¸¤è¾¹borderå€¼ä¸º0</h4><p>å¦‚ä¸‹ï¼Œborderä¸¤é¢ä¸º0ä¸¤é¢æœ‰å€¼ï¼Œå½¢çŠ¶å¦‚ä¸‹ï¼Œåœ¨ä¸Šå›¾å›¾ç‰‡çš„divä¸Šè®¾ç½®ä¸€ä¸ªbeforeä¼ªå…ƒç´ ï¼Œ<br>ä¼ªå…ƒç´ contentä¸º0ï¼Œåªæœ‰ä¸¤ä¸ªborderæœ‰widthï¼ŒåŠè¾¹ç™½è‰²ï¼ŒåŠè¾¹æ˜¯å¸¦é€æ˜åº¦çš„é¢œè‰²(è¾¾åˆ°ä¸å®Œå…¨é®ä½å›¾ç‰‡æ•ˆæœ)ï¼š<br><figure class="image-box">                <img src="/image/css/page0.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div class=&quot;image-layer&quot; id=&quot;image-layer&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">.image-layer:before &#123;</span><br><span class="line">  content: &apos;&apos;;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 0;</span><br><span class="line">  right: 0;</span><br><span class="line">  border-style: solid;</span><br><span class="line">  border-width: 0;</span><br><span class="line">  border-color: rgba(0,0,0,0.2) #fff;</span><br><span class="line">  border-radius: 0 0 0 4px;</span><br><span class="line">  transition:all 0.4s ease-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.image-layer:hover:before&#123;</span><br><span class="line">  border-right-width:80px;</span><br><span class="line">  border-bottom-width:80px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="ç¿»é¡µåŠ¨ç”»æ–¹æ¡ˆ-è®¾ç½®border-widthä¸ºè¾ƒå¤§å€¼"><a href="#ç¿»é¡µåŠ¨ç”»æ–¹æ¡ˆ-è®¾ç½®border-widthä¸ºè¾ƒå¤§å€¼" class="headerlink" title="ç¿»é¡µåŠ¨ç”»æ–¹æ¡ˆ-è®¾ç½®border-widthä¸ºè¾ƒå¤§å€¼"></a>ç¿»é¡µåŠ¨ç”»æ–¹æ¡ˆ-è®¾ç½®border-widthä¸ºè¾ƒå¤§å€¼</h4><p>ç¿»é¡µæ˜¯ä¸€ä¸ªé¡µé¢å‘ˆä¸‰è§’å½¢çŠ¶ç›´è‡³ä¸‰è§’ä¸º0çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ¡ˆï¼Œåªæœ‰ä¸¤ä¸ªborderæœ‰widthï¼ŒåŠè¾¹ç™½è‰²ï¼ŒåŠè¾¹æ˜¯å¸¦é€æ˜åº¦çš„é¢œè‰²ï¼Œ<br>å½“border-widthè¶³å¤Ÿå¤§æ—¶ï¼Œç™½è‰²åŒºåŸŸè¶³å¤Ÿå¤§ï¼Œå½¢æˆç¿»é¡µæ•ˆæœã€‚</p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/3-3/border-width.html" target="_blank" rel="noopener">demo1</a><br><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/3-3/border-width-more.html" target="_blank" rel="noopener">demo2</a></p><h3 id="ç»•-æ¤­-åœ†è¡Œé©¶åŠ¨ç”»-transform-origin"><a href="#ç»•-æ¤­-åœ†è¡Œé©¶åŠ¨ç”»-transform-origin" class="headerlink" title="ç»•(æ¤­)åœ†è¡Œé©¶åŠ¨ç”» (transform-origin)"></a>ç»•(æ¤­)åœ†è¡Œé©¶åŠ¨ç”» (transform-origin)</h3><h4 id="ç»•åœ†è¡Œé©¶åŠ¨ç”»"><a href="#ç»•åœ†è¡Œé©¶åŠ¨ç”»" class="headerlink" title="ç»•åœ†è¡Œé©¶åŠ¨ç”»"></a>ç»•åœ†è¡Œé©¶åŠ¨ç”»</h4><p>è¿™ä¸ªæœ€ç®€å•ï¼Œç»•è‡ªèº«æ—‹è½¬å°±æ˜¯,åŸåœ°æ‰“è½¬ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform:rotate(1turn)</span><br></pre></td></tr></table></figure></p><p>è®¾ç½®å¦‚ä¸‹å°±å¯ä»¥ç»•åœ†è¡Œé©¶äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transform-origin:center 150%;</span><br></pre></td></tr></table></figure></p><h4 id="ç»•æ¤­åœ†è¡Œé©¶-translate"><a href="#ç»•æ¤­åœ†è¡Œé©¶-translate" class="headerlink" title="ç»•æ¤­åœ†è¡Œé©¶(translate)"></a>ç»•æ¤­åœ†è¡Œé©¶(translate)</h4><p>æ¤­åœ†çš„è·¯å¾„å°±è¦ç»“åˆåç§»äº†transform:translateY(200px);å¦‚ä¸‹å›¾ï¼Œ<br>æ¯æ¬¡è¡Œé©¶åˆ°ä¸Šä¸‹ä¸¤ä¸ªé¡¶ç‚¹æ—¶å€™ï¼Œè®©çˆ¶èŠ‚ç‚¹è·Ÿç€åç§»ï¼š<br><figure class="image-box">                <img src="/image/css/circle-ani.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;figure&gt;</span><br><span class="line">  &lt;div class=&quot;butterfly&quot;&gt;</span><br><span class="line">    &lt;img src=&quot;http://p7.qhimg.com/t01a4c54ef5309e561c.png&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/figure&gt;</span><br><span class="line"></span><br><span class="line">  .butterfly&#123;</span><br><span class="line">  width:150px;</span><br><span class="line">  height:142px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  transform-origin:center 150%;</span><br><span class="line">  animation:circle 2s infinite linear;</span><br><span class="line">&#125;</span><br><span class="line">.butterfly img&#123;</span><br><span class="line">  width:100%;</span><br><span class="line">  height:auto;</span><br><span class="line">&#125;</span><br><span class="line">figure&#123;</span><br><span class="line">  margin-left: 200px;</span><br><span class="line">  animation:updown 1s infinite ease-in-out alternate;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes updown&#123;</span><br><span class="line">    to&#123;</span><br><span class="line">      transform:translateY(200px);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@keyframes circle&#123;</span><br><span class="line">  to&#123;</span><br><span class="line">    transform:rotate(-1turn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="demo-1"><a href="#demo-1" class="headerlink" title="demo"></a>demo</h4><p><a href="https://github.com/YeWills/canvas-demo/tree/master/pages/multy/css-animation/3-4" target="_blank" rel="noopener">demo</a></p><h2 id="cssçŸ¥è¯†"><a href="#cssçŸ¥è¯†" class="headerlink" title="cssçŸ¥è¯†"></a>cssçŸ¥è¯†</h2><h3 id="è¡Œå†…ç›’å­-åŒ¿åç›’å­"><a href="#è¡Œå†…ç›’å­-åŒ¿åç›’å­" class="headerlink" title="è¡Œå†…ç›’å­ åŒ¿åç›’å­"></a>è¡Œå†…ç›’å­ åŒ¿åç›’å­</h3><p>å…·ä½“å‚è€ƒ å¦å¤–ä¸€ç¯‡åšå®¢ã€Švertical-alignã€è¡Œç›’å­ã€baselineã€‹<br>åŒ¿åç›’å­è¯´çš„æ˜¯æ²¡æœ‰ä»»ä½•æ ‡ç­¾çš„æ–‡æœ¬ï¼Œå¦‚ä¸‹ï¼Œ prity girl è¿™ä¸¤ä¸ªæ–‡æœ¬å°±æ˜¯ä¸€ä¸ªåŒ¿åç›’å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">     prity girl</span><br><span class="line">     &lt;p&gt;can you liu one qq&lt;/p&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="floatæµ®åŠ¨å®šä½"><a href="#floatæµ®åŠ¨å®šä½" class="headerlink" title="floatæµ®åŠ¨å®šä½"></a>floatæµ®åŠ¨å®šä½</h3><p>å‚è€ƒ ã€ŠcssçŸ¥è¯†ç‚¹æ±‡ â€“ floatæµ®åŠ¨å®šä½ã€‹</p><h3 id="æœ‰å…³em"><a href="#æœ‰å…³em" class="headerlink" title="æœ‰å…³em"></a>æœ‰å…³em</h3><h4 id="font-sizeçš„emå åŠ "><a href="#font-sizeçš„emå åŠ " class="headerlink" title="font-sizeçš„emå åŠ "></a>font-sizeçš„emå åŠ </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.it1&#123;</span><br><span class="line">  font-size:1.314em;</span><br><span class="line">&#125;</span><br><span class="line">.it2&#123;</span><br><span class="line">  font-size:1.314em;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;it1&quot;&gt;</span><br><span class="line">  &lt;!-- å…ƒç´ 1  font-size å°†ä¸º16px*1.314 =21px --&gt;</span><br><span class="line">  å…ƒç´ 1</span><br><span class="line">  &lt;!-- å…ƒç´ 2  font-size å°†ä¸º16px*1.314*1.314 =28px --&gt;</span><br><span class="line">  &lt;div class=&quot;it2&quot;&gt;å…ƒç´ 2&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="font-size-1-314em-ä¸-height-1-314em-åŒºåˆ«"><a href="#font-size-1-314em-ä¸-height-1-314em-åŒºåˆ«" class="headerlink" title="font-size:1.314em ä¸ height: 1.314em åŒºåˆ«"></a>font-size:1.314em ä¸ height: 1.314em åŒºåˆ«</h4><p>ç”±ä¸‹é¢ä»£ç å¯çŸ¥ï¼Œfont-size ä¸ height\margin\paddingè¿™äº›å±æ€§ä¸ä¸€æ ·ï¼›<br>font-sizeçš„emçš„åŸºå‡†æ˜¯çˆ¶font-size;<br>height\margin\paddingç­‰çš„emåŸºå‡†æ˜¯è‡ªèº«çš„font-sizeï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.it1&#123;</span><br><span class="line">  font-size:1.314em;</span><br><span class="line">&#125;</span><br><span class="line">.it2&#123;</span><br><span class="line">  font-size:1.314em;</span><br><span class="line">  height: 1.314em;</span><br><span class="line">&#125;</span><br><span class="line">&lt;div class=&quot;it1&quot;&gt;</span><br><span class="line">  &lt;!-- å…ƒç´ 1  font-size å°†ä¸º16px*1.314 =21px --&gt;</span><br><span class="line">  å…ƒç´ 1</span><br><span class="line">  &lt;!-- å…ƒç´ 2  font-size å°†ä¸º16px*1.314*1.314 =28px --&gt;</span><br><span class="line">  &lt;!-- å…ƒç´ 2  height  å°†ä¸ºè‡ªå·±çš„font-size*1.314 =36px --&gt;</span><br><span class="line">  &lt;div class=&quot;it2&quot;&gt;å…ƒç´ 2&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h4 id="emçš„ä½¿ç”¨åœºæ™¯"><a href="#emçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="emçš„ä½¿ç”¨åœºæ™¯"></a>emçš„ä½¿ç”¨åœºæ™¯</h4><p>font-size<br>padding<br>border-radius (ä¸åŒ…å«border-with)<br>margin</p><h4 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨em"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨em" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨em"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨em</h4><p>å½“ä½ æƒ³è¦å½“å‰å…ƒç´ çš„ padding\padding\border-radius\box-shadow\text-shadow\margin\line-height ç­‰å€¼ï¼Œä¸å½“å‰å­—ä½“å¤§å°æˆæ¯”ä¾‹çš„æ—¶å€™ï¼Œä½¿ç”¨ em å•ä½ã€‚</p><h3 id="remçš„ä½¿ç”¨åœºæ™¯"><a href="#remçš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="remçš„ä½¿ç”¨åœºæ™¯"></a>remçš„ä½¿ç”¨åœºæ™¯</h3><p>rem ä¸»è¦ç”¨äºç§»åŠ¨ç«¯é€‚é…ï¼Œpcç«¯ç”¨å¾—å°‘.</p><h3 id="display-noneä¸visibility-hidden"><a href="#display-noneä¸visibility-hidden" class="headerlink" title="display:noneä¸visibility:hidden"></a>display:noneä¸visibility:hidden</h3><p>display:none ä¸ä¸ºè¢«éšè—çš„å¯¹è±¡ä¿ç•™å…¶ç‰©ç†ç©ºé—´<br>visibilityï¼šhidden ä¸ºè¢«éšè—çš„å¯¹è±¡ä¿ç•™å…¶ç‰©ç†ç©ºé—´</p><h3 id="ä¼ªç±»ä¸ä¼ªå…ƒç´ "><a href="#ä¼ªç±»ä¸ä¼ªå…ƒç´ " class="headerlink" title="ä¼ªç±»ä¸ä¼ªå…ƒç´ "></a>ä¼ªç±»ä¸ä¼ªå…ƒç´ </h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">::before  //ä¼ªå…ƒç´ </span><br><span class="line">:focus  //ä¼ªç±»</span><br></pre></td></tr></table></figure><h4 id="äºŒè€…åŒºåˆ«"><a href="#äºŒè€…åŒºåˆ«" class="headerlink" title="äºŒè€…åŒºåˆ«"></a>äºŒè€…åŒºåˆ«</h4><p>ä¼ªå…ƒç´ æ˜¯çœŸçš„æœ‰å…ƒç´ ï¼Œä¼ªç±»åªæ˜¯å…ƒç´ çš„çŠ¶æ€ã€‚</p><h4 id="content-attr-url-counter"><a href="#content-attr-url-counter" class="headerlink" title="content - attr\url\counter"></a>content - attr\url\counter</h4><h5 id="é…åˆatträ½¿ç”¨"><a href="#é…åˆatträ½¿ç”¨" class="headerlink" title="é…åˆatträ½¿ç”¨"></a>é…åˆatträ½¿ç”¨</h5><p>attræ˜¯css3çš„ä¸€ä¸ªå±æ€§ã€‚<br>attræ˜¯ç”¨æ¥contentä¸å…ƒç´ è¿›è¡Œé€šä¿¡çš„ä¸€ä¸ªæ¥å£ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.text&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.text[show-tip]:hover::before&#123;</span><br><span class="line">    content: attr(show-tip);</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: -150%;</span><br><span class="line">    left: 50%;</span><br><span class="line">    transform: translateX(-50%);</span><br><span class="line">    white-space: nowrap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;span class=&quot;text&quot; show-tip=&quot;6666&quot;&gt; prity girl&lt;/span&gt;</span><br></pre></td></tr></table></figure></p><h5 id="é…åˆurlä½¿ç”¨"><a href="#é…åˆurlä½¿ç”¨" class="headerlink" title="é…åˆurlä½¿ç”¨"></a>é…åˆurlä½¿ç”¨</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h1:after &#123;content:url(/i/w3school_logo_white.gif)&#125;</span><br></pre></td></tr></table></figure><h5 id="é…åˆcounterä½¿ç”¨"><a href="#é…åˆcounterä½¿ç”¨" class="headerlink" title="é…åˆcounterä½¿ç”¨"></a>é…åˆcounterä½¿ç”¨</h5><p>ç”¨å¾—è¾ƒå°‘ï¼Œç”¨æ¥è®¡æ•°ï¼Œæ›´å¤šè¯·-&gt;Google<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.conter p:before&#123;</span><br><span class="line">                   content: counter(count,decimal) &quot;.&quot; /*è°ƒç”¨è®¡æ•°å™¨ å¹¶åœ¨æ•°å­—åæ·»åŠ .*/</span><br><span class="line">                   counter-increment: count;</span><br><span class="line">              &#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä¼ªå…ƒç´ ç›¸å½“äºçˆ¶çº§å†…çš„å†…è”spanå…ƒç´ "><a href="#ä¼ªå…ƒç´ ç›¸å½“äºçˆ¶çº§å†…çš„å†…è”spanå…ƒç´ " class="headerlink" title="ä¼ªå…ƒç´ ç›¸å½“äºçˆ¶çº§å†…çš„å†…è”spanå…ƒç´ "></a>ä¼ªå…ƒç´ ç›¸å½“äºçˆ¶çº§å†…çš„å†…è”spanå…ƒç´ </h4><p>ä¼ªç±»å…¶å®ç›¸å½“äºå®šä¹‰åœ¨çˆ¶çº§å…ƒç´ å†…çš„å†…è”spanå…ƒç´ æˆ–åŒ¿åè¡Œå†…å…ƒç´ ï¼Œå¯ä»¥é€šè¿‡displayæ”¹å˜å…¶å±æ€§ã€‚<br>æŠŠä¼ªç±»å½“æˆçˆ¶çº§å…ƒç´ å†…çš„å…ƒç´ çœ‹å³å¯ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸åŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   .father::after&#123;</span><br><span class="line">            content: &apos;afterä¼ªç±» content&apos;</span><br><span class="line">        &#125;</span><br><span class="line">        .father::before&#123;</span><br><span class="line">            content: &apos;beforeä¼ªç±» content&apos;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;father&quot;&gt;çˆ¶å…ƒç´ çš„text&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>ç›¸å½“äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;span&gt;beforeä¼ªç±» content&lt;/span&gt;</span><br><span class="line">    çˆ¶å…ƒç´ çš„text</span><br><span class="line">    &lt;span&gt;afterä¼ªç±» content&lt;/span&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>ç”±ä¸Šå¾—å‡ºï¼š</p><ul><li>before ç›¸å½“äº ç´§è·Ÿçˆ¶å…ƒç´ ä¹‹å‰çš„è¡Œå†…å—ï¼›</li><li>after ç›¸å½“äº ç´§è·Ÿçˆ¶å…ƒç´ ä¹‹åçš„è¡Œå†…å—</li></ul><h4 id="hover-before"><a href="#hover-before" class="headerlink" title=":hover::before"></a>:hover::before</h4><p>ä¼ªç±»ç»“åˆä¼ªå…ƒç´ ä¸€èµ·ä½¿ç”¨<br>å‚è€ƒã€Šcontentå‡ ç§ç”¨æ³•ã€‹<br>å‚è€ƒã€Šè‡ªå®šä¹‰CheckBoxã€‹</p><h4 id="hover-active-focus-onblur-ç»å…¸åº”ç”¨"><a href="#hover-active-focus-onblur-ç»å…¸åº”ç”¨" class="headerlink" title="hover active focus onblur ç»å…¸åº”ç”¨"></a>hover active focus onblur ç»å…¸åº”ç”¨</h4><p>ä¸€ä¸ªæŒ‰é’®çš„hover active focus onblurè¿™ä¸‰ä¸ªçŠ¶æ€è§¦å‘æ—¶å€™å…ˆåé¡ºåºçš„<br>hover  é¼ æ ‡æ‚¬æµ®æŒ‰é’®ä¸Šï¼›<br>active  å·¦é”®æŒ‰ä½æŒ‰é’®ï¼›<br>focus  å·¦é”®æ¾å¼€åï¼Œæ¿€æ´»æŒ‰é’®çŠ¶æ€ä¸ºfocusï¼›<br>onblur å·¦é”®ç‚¹å‡»ä»»æ„ä½ç½®ï¼Œå˜ä¸ºéfocusçŠ¶æ€</p><p>ç†è§£ä¸Šé¢å››ä¸ªçŠ¶æ€éå¸¸å…³é”®ï¼Œå¾ˆå¤šåŸºæœ¬çš„æ ·å¼éƒ½æ˜¯åŸºäºä¸Šé¢å¼€å‘çš„ï¼Œä¸€ä¸ªå‰ç«¯ä¸æ—©å¼„æ‡‚ä¸Šé¢å››ä¸ªçŠ¶æ€ï¼Œå“­éƒ½æ²¡åœ°æ–¹å»ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.btn:hover&#123;</span><br><span class="line">    background: blueviolet;</span><br><span class="line">&#125;</span><br><span class="line">.btn:active:focus&#123;</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line">.btn:focus&#123;</span><br><span class="line">    color: blue;</span><br><span class="line">    outline: 2px solid yellow</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> &lt;button class=&quot;btn&quot;&gt;9999999&lt;/button&gt;</span><br></pre></td></tr></table></figure></p><h4 id="focus-ä¸-tabindex"><a href="#focus-ä¸-tabindex" class="headerlink" title="focus ä¸ tabindex"></a>focus ä¸ tabindex</h4><p>tabindex æ˜¯html5å±æ€§ ï¼Œéå¸¸å¥½ç”¨ï¼Œ æŒ‡ç¤ºå…¶å…ƒç´ æ˜¯å¦å¯ä»¥èšç„¦<br>åœ¨html4ä¸­ï¼Œä¸æ˜¯æ¯ä¸ªæ ‡ç­¾éƒ½æ‹¥æœ‰focuså±æ€§ï¼Œåœ¨html5ä¸­ï¼Œé€šè¿‡tabindexï¼Œæ¯ä¸ªæ ‡ç­¾éƒ½å¯ä»¥å®šä¹‰focuså±æ€§ã€‚<br>å‚è€ƒã€Šåšå®¢â€”htmlç¬”è®°â€”tabindexã€‹</p><h4 id="ä¼ªå…ƒç´ åšè¾¹æ¡†-1"><a href="#ä¼ªå…ƒç´ åšè¾¹æ¡†-1" class="headerlink" title="ä¼ªå…ƒç´ åšè¾¹æ¡†"></a>ä¼ªå…ƒç´ åšè¾¹æ¡†</h4><p>å‚è€ƒã€Šä¼ªå…ƒç´ åšè¾¹æ¡†ã€‹</p><h3 id="å¤§æ±‡é›†"><a href="#å¤§æ±‡é›†" class="headerlink" title="å¤§æ±‡é›†"></a>å¤§æ±‡é›†</h3><p>font-weight é»˜è®¤ä¸ºnormalï¼Œnormalå¯¹åº”æ•°å€¼ä¸º400ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— normalã€boldç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ•°å€¼ï¼Œéƒ½æ˜¯100çš„æ•´æ•°ï¼š100ã€200ã€300ã€400ç­‰ç­‰<br>text-transform å¯ä»¥ä½¿è‹±æ–‡å•è¯é¦–å­—æ¯å¤§å†™æˆ–è€…æ‰€æœ‰å­—æ¯å¤§å†™ï¼Œæˆ–è€…æ‰€æœ‰å­—ç¬¦å°å†™çš„åŠŸèƒ½ï¼›<br>word-spacing: 0.1em; è‹±æ–‡å•è¯é—´è·<br>letter-spacing: 0.1em; è‹±æ–‡å­—æ¯é—´è·<br>text-shadow ï¼š å­—ä½“é˜´å½±æ•ˆæœ<br>text-overflow: ellipsisæˆ–clip<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">clip : ä¸æ˜¾ç¤ºçœç•¥æ ‡è®°ï¼ˆ...ï¼‰ï¼Œè€Œæ˜¯ç®€å•çš„è£åˆ‡</span><br><span class="line">ellipsis : å½“å¯¹è±¡å†…æ–‡æœ¬æº¢å‡ºæ—¶æ˜¾ç¤ºçœç•¥æ ‡è®°ï¼ˆ...ï¼‰</span><br></pre></td></tr></table></figure></p><p>columns å¯ç”¨æ¥æ–‡æœ¬åˆ†å¤šæ æ˜¾ç¤ºï¼›<br>pointer-events å¯ç”¨æ¥æ‰“å¼€çš„ç¦æ­¢å…ƒç´ çš„äº‹ä»¶å“åº”ï¼Œè®¾ç½®ä¸ºnoneçš„æ—¶å€™ï¼Œä¸ä¼šè§¦å‘è¯¥å…ƒç´ çš„hoverå’Œclickäº‹ä»¶ï¼›</p><h3 id="font-faceå†™æ³•"><a href="#font-faceå†™æ³•" class="headerlink" title="@font-faceå†™æ³•"></a>@font-faceå†™æ³•</h3><p>format ç»™æµè§ˆå™¨æç¤ºï¼Œsrcå†…çš„æ–‡ä»¶ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ–¹ä¾¿æµè§ˆå™¨é˜…è¯»ï¼›<br>font-faceç”¨çš„æ˜¯åå¤‡æœºåˆ¶å†™æ³•ï¼Œå¦‚ä¸‹srcå†™äº†å¾ˆå¤šï¼Œå°±æ˜¯ç»™ä¸åŒè®¾å¤‡çš„æµè§ˆå™¨è§£æï¼Œå¢åŠ å…¼å®¹æ€§ï¼›<br>font-weightå’Œfont-styleä½œä¸ºå¯é€‰é…ç½®ï¼Œå¦‚æœé…ç½®äº†ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨æ­¤å­—ä½“æ—¶ï¼Œå¿…é¡»è®¾ç½®ä¸<strong>è¿™é‡Œä¸€æ ·çš„font-weightå’Œfont-styleå€¼æ—¶æ‰èµ·ä½œç”¨,è¿™ç‚¹å¾ˆå®¹æ˜“è®©äººå¿½è§†</strong><br>è§P84ã€Šç²¾é€šcss é«˜çº§webæ ‡å‡†è§£å†³æ–¹æ¡ˆã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  @font-face &#123;</span><br><span class="line">font-family: &apos;YourWebFontName&apos;;</span><br><span class="line">   font-weight: &apos;400&apos;;</span><br><span class="line">src: url(&apos;YourWebFontName.eot&apos;); /* IE9 Compat Modes */</span><br><span class="line">src: url(&apos;YourWebFontName.eot?#iefix&apos;) format(&apos;embedded-opentype&apos;), /* IE6-IE8 */</span><br><span class="line">            url(&apos;YourWebFontName.woff&apos;) format(&apos;woff&apos;), /* Modern Browsers */</span><br><span class="line">            url(&apos;YourWebFontName.ttf&apos;)  format(&apos;truetype&apos;), /* Safari, Android, iOS */</span><br><span class="line">            url(&apos;YourWebFontName.svg#YourWebFontName&apos;) format(&apos;svg&apos;); /* Legacy iOS */</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="positionå®šä½ç›¸å…³"><a href="#positionå®šä½ç›¸å…³" class="headerlink" title="positionå®šä½ç›¸å…³"></a>positionå®šä½ç›¸å…³</h3><p>position:relactive:<br>ç›¸å¯¹å®šä½ï¼šç›¸å¯¹äºè‡ªèº«åŸä½ç½®åç§»ï¼›<br>ä»å¤„äºæ ‡å‡†æ–‡æ¡£æµä¸­ï¼›<br>éšå³æ‹¥æœ‰åç§»å±æ€§å’Œz-indexå±æ€§ï¼›</p><p>position:absolute:<br>ç»å¯¹å®šä½ï¼š<br>å®Œå…¨è„±ç¦»äº†æ ‡å‡†æ–‡æ¡£æµï¼›<br>éšå³æ‹¥æœ‰åç§»å±æ€§å’Œz-indexå±æ€§ï¼›<br>å…ƒç´ å…·æœ‰äº†åŒ…è£¹æ€§ï¼Œä¸floatç±»ä¼¼ï¼›</p><h3 id="é¢œè‰²å€¼å‡½æ•°-rgb-rgba-hsla"><a href="#é¢œè‰²å€¼å‡½æ•°-rgb-rgba-hsla" class="headerlink" title="é¢œè‰²å€¼å‡½æ•°-rgb/rgba/hsla"></a>é¢œè‰²å€¼å‡½æ•°-rgb/rgba/hsla</h3><p>rgbaæ˜¯rgbçš„è¿›åŒ–ç‰ˆï¼Œå¸¦æœ‰é€æ˜åº¦ï¼›</p><p>#ffffff å…­ä½æ•°æ˜¯æ²¡æœ‰é€æ˜åº¦çš„ï¼›</p><p>#00000000 å…«ä½æ•°çš„æ˜¯æœ‰é€æ˜åº¦çš„ï¼›<br>hslaæ˜¯hslçš„è¿›åŒ–ç‰ˆï¼Œå¸¦æœ‰é€æ˜åº¦ï¼›<br>hslaå…¶å®æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œä¹Ÿå°±è·Ÿrgbaä¸€æ ·æ˜¯ä¸ªé¢œè‰²å•ä½ï¼Œè²Œä¼¼å®ƒä¸rgbaåŒºåˆ«çš„æ˜¯ï¼Œhslaå†™æ³•æ›´åŠ ç®€æ´ã€‚</p><h3 id="background"><a href="#background" class="headerlink" title="background"></a>background</h3><h4 id="å…³äºbackgroundæœ¬èº«"><a href="#å…³äºbackgroundæœ¬èº«" class="headerlink" title="å…³äºbackgroundæœ¬èº«"></a>å…³äºbackgroundæœ¬èº«</h4><p>backgroundæ˜¯ä¸ªç®€å†™å±æ€§ï¼Œä¼šé‡ç½®ä»¥å‰å®šä¹‰çš„å¾ˆå¤šbackgroundå±æ€§ï¼Œå› æ­¤å®šä¹‰çš„æ—¶å€™ï¼ŒæŠŠå®ƒæ”¾åœ¨æœ€ä¸Šé¢ï¼Œç„¶åä½¿ç”¨background-colorç­‰ç­‰å±æ€§å åŠ å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//ä¸æ¨èï¼Œbackgroundä¼šé‡ç½®background-repeatå±æ€§ï¼Œè¾¾ä¸åˆ°no-repeatæ•ˆæœ</span><br><span class="line">background-repeat: no-repeat;</span><br><span class="line">background: url(../image/css/vertical-align/column.png);</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æ¨èè¿™ç§å†™æ³•</span><br><span class="line">  background: url(../image/css/vertical-align/column.png);</span><br><span class="line">  background-repeat: no-repeat;</span><br></pre></td></tr></table></figure><h4 id="backgroundå¤šé‡èƒŒæ™¯"><a href="#backgroundå¤šé‡èƒŒæ™¯" class="headerlink" title="backgroundå¤šé‡èƒŒæ™¯"></a>backgroundå¤šé‡èƒŒæ™¯</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">background: url(./column.png), url(./column1.png), url(./column2.png), url(./column3.png);</span><br><span class="line">background-position: left top, right top, left bottom, right bottom;</span><br><span class="line">background-repeat: no-repeat, no-repeat, no-repeat, no-repeat;</span><br><span class="line">background-color: pink;</span><br></pre></td></tr></table></figure><h4 id="å¸¦é¢œè‰²-å›¾ç‰‡-å®šä½çš„èƒŒæ™¯"><a href="#å¸¦é¢œè‰²-å›¾ç‰‡-å®šä½çš„èƒŒæ™¯" class="headerlink" title="å¸¦é¢œè‰²\å›¾ç‰‡\å®šä½çš„èƒŒæ™¯"></a>å¸¦é¢œè‰²\å›¾ç‰‡\å®šä½çš„èƒŒæ™¯</h4><p>è“è‰²èƒŒæ™¯ã€èƒŒæ™¯å›¾ç‰‡ã€èƒŒæ™¯å›¾ç‰‡è·ç¦»çˆ¶çº§å³è¾¹19pxåº•éƒ¨å‘ä¸Š10px.<a href="http://dabblet.com/gist/0f226e63595d1bef88cb" target="_blank" rel="noopener">demo</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.wrap &#123;</span><br><span class="line">           background: url(../image/css/outLine.jpg)  no-repeat  blue;</span><br><span class="line">         background-position: right 19px bottom 10px;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h4 id="background-size"><a href="#background-size" class="headerlink" title="background-size"></a>background-size</h4><p>å¦‚æœè¦è®©èƒŒæ™¯å›¾ç‰‡å……æ»¡æ•´ä¸ªå…ƒç´ ï¼Œåˆ™åŸºæœ¬ä¸Šè¦ç”¨åˆ°è¿™ä¸ªå±æ€§<br>background-size: 100% 100%  èƒŒæ™¯å›¾ç‰‡çš„å®½åº¦ä¸ºå…ƒç´ å®½åº¦100%ï¼Œé«˜åº¦ä¸ºå…ƒç´ é«˜åº¦100% ï¼ˆæ­¤ç§å†™æ³•ä¼šè®©å›¾ç‰‡å……æ»¡å…ƒç´ ï¼Œä½†ä¼šå¤±çœŸï¼‰<br>background-size: 100% auto  èƒŒæ™¯å›¾ç‰‡çš„å®½åº¦ä¸ºå…ƒç´ å®½åº¦100%ï¼Œé«˜åº¦ç”±æµè§ˆå™¨è‡ªåŠ¨è®¡ç®—ä¸€ä¸ªå€¼ï¼Œä¿æŒä¸å¤±çœŸ(æ¨è)<br>å…¶ä»–å¯å–å€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">background-size:auto;</span><br><span class="line">background-size:cover;</span><br><span class="line">background-size:contain;</span><br><span class="line">background-size:auto;</span><br><span class="line">background-size:50px;</span><br><span class="line">background-size:50%;</span><br></pre></td></tr></table></figure></p><h4 id="backgroundç›¸å…³å±æ€§"><a href="#backgroundç›¸å…³å±æ€§" class="headerlink" title="backgroundç›¸å…³å±æ€§"></a>backgroundç›¸å…³å±æ€§</h4><p><a href="https://www.jianshu.com/p/e377c0bebfd0" target="_blank" rel="noopener">background-originï¼šbackground-origin å±æ€§è§„å®š background-position å±æ€§ç›¸å¯¹äºä»€ä¹ˆä½ç½®æ¥å®šä½ã€‚</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-origin: padding-box|border-box|content-box;</span><br></pre></td></tr></table></figure></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-clip" target="_blank" rel="noopener">background-clip è§„å®šèƒŒæ™¯çš„ç»˜åˆ¶åŒºåŸŸ;</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">background-clip: padding-box|border-box|content-box;</span><br></pre></td></tr></table></figure><h3 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>æ³¨æ„ï¼Œè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearå’Œvertical-alignå±æ€§å°†å¤±æ•ˆã€‚<br>ä¸¤ä¸ªæ¦‚å¿µï¼šä¸»è½´ã€è¾…è½´(äº¤å‰è½´)ï¼›</p><h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Š</p><ul><li>flex-direction</li><li>flex-wrap  â€”æ˜¯å¦æ¢è¡Œ</li><li><strong>flex-flow ä¸Šé¢äºŒè€…ç¼©å†™</strong></li><li>justify-content</li><li>align-items</li><li>align-content å¤šè¡Œï¼ˆå¤šè½´ï¼‰å¦‚ä½•å¯¹é½ï¼Œä¸align-itemsæ„ä¹‰ä¸€æ ·ï¼Œå‰è€…æ˜¯å•è¡Œï¼Œåè€…å¤šè¡Œï¼›</li></ul><ul><li>order å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºï¼Œå®é™…ä¸­ç”¨å¾—å°‘ï¼›</li><li>flex-grow æ”¾å¤§</li><li>flex-shrink æ”¶ç¼©</li><li>flex-basis å±æ€§å®šä¹‰äº†åœ¨<strong>åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰</strong>ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼Œå®¹å™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ï¼Œç„¶åå†³å®šå¦‚ä½•æ‰§è¡Œ- flex-growæˆ–flex-shrinkï¼Œè¿™ä¸ªå±æ€§æ˜¯flexä¸­æ¯”è¾ƒéš¾ç†è§£çš„ï¼ŒåŒæ—¶è®¾ç½®widthå’Œflex-basicæ—¶ï¼Œflex-basicè¦†ç›–widthï¼Œåœ¨flexå­é¡¹ä¸­ï¼Œå»ºè®®ä½¿ç”¨flex-basicï¼Œå°‘ç”¨widthï¼Œæœ‰äº›äººè¯´ï¼Œflex-basicæ˜¯ç”¨æ¥ä»£æ›¿widthçš„ã€‚</li><li><strong>flex ä¸Šé¢ä¸‰è€…çš„ç®€å†™</strong>  flex: none | [ &lt;â€™flex-growâ€™&gt; &lt;â€™flex-shrinkâ€™&gt;? || &lt;â€™flex-basisâ€™&gt; ]</li><li>align-self  å•ç‹¬å‚ç›´å¯¹é½ï¼Œå¯è¦†ç›–align-itemså±æ€§</li></ul><h4 id="è¿ç”¨æŠ€å·§"><a href="#è¿ç”¨æŠ€å·§" class="headerlink" title="è¿ç”¨æŠ€å·§"></a>è¿ç”¨æŠ€å·§</h4><h5 id="è¡Œå†…è‡ªé€‚åº”å®½åº¦"><a href="#è¡Œå†…è‡ªé€‚åº”å®½åº¦" class="headerlink" title="è¡Œå†…è‡ªé€‚åº”å®½åº¦"></a>è¡Œå†…è‡ªé€‚åº”å®½åº¦</h5><p>ä¸€è¡Œå½“ä¸­ï¼ŒæŸå‡ ä¸ªè¡Œå…ƒç´ å›ºå®šé«˜åº¦ï¼Œç»™å‰©ä¸‹ä¸€ä¸ªå…ƒç´ éšæ„å®šä¹‰ä¸€ä¸ªflexå€¼ï¼Œæ¯”å¦‚1ã€2ã€3â€¦éƒ½å¯ä»¥ï¼Œè®©è¿™ä¸ªå…ƒç´ è‡ªé€‚åº”ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">         display: flex;</span><br><span class="line">     &#125;</span><br><span class="line">     .box-item1&#123;</span><br><span class="line">         width: 80px;</span><br><span class="line">         background: rebeccapurple;</span><br><span class="line">     &#125;</span><br><span class="line">     .box-item2&#123;</span><br><span class="line">         flex: 1;</span><br><span class="line">         background: red;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     &lt;div class=&quot;box box-2&quot;&gt;</span><br><span class="line">             &lt;div class=&quot;box-item1&quot;&gt;2&lt;/div&gt;</span><br><span class="line">             &lt;div class=&quot;box-item2&quot;&gt;3&lt;/div&gt;</span><br><span class="line">         &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css/flex1.jpg" alt title class>                <p></p>            </figure></p><h4 id="flex-shrink-IEä¸è°·æ­Œå·®å¼‚"><a href="#flex-shrink-IEä¸è°·æ­Œå·®å¼‚" class="headerlink" title="flex-shrink IEä¸è°·æ­Œå·®å¼‚"></a>flex-shrink IEä¸è°·æ­Œå·®å¼‚</h4><p>flexboxçš„è§„èŒƒæ˜¯ å½“ç©ºé—´å°æ˜¯ï¼Œå…ƒç´ å®½åº¦éšä¹‹å‡å°‘ï¼Œå½“å‡å°‘åˆ°å…ƒç´ çš„widthæ—¶ï¼Œå°†ä¸å†å‡å°‘ã€‚<br>ç›®å‰è°·æ­Œå’Œç«ç‹ä»¥åŠOpæµè§ˆå™¨å¿½ç•¥ä¸Šé¢è¿™ä¸ªè§„èŒƒï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™äº›æµè§ˆå™¨ä¸­ï¼Œå…ƒç´ å¯ä»¥å‡å°‘åˆ°0pxå®½åº¦ï¼›<br>IEéµå®ˆä»¥ä¸Šè§„èŒƒï¼Œå½“å…ƒç´ å‡å°‘åˆ°widthæ—¶ï¼Œå°†ä¸å†å‡å°‘ã€‚</p><h4 id="absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§"><a href="#absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§" class="headerlink" title="absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§"></a>absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§</h4><p>è§å¦å¤–ä¸€ç¯‡åšå®¢ã€Šcssè¶£äº‹ - å¦‚ä½•absoluteçš„å­å…ƒç´ ä¸æ¢è¡Œ - absoluteä¸flexåŒæ—¶ä½¿ç”¨çš„é»‘ç‰¹æ€§ã€‹</p><h3 id="åª’ä½“æŸ¥è¯¢-ä¸-å“åº”å¼å¸ƒå±€"><a href="#åª’ä½“æŸ¥è¯¢-ä¸-å“åº”å¼å¸ƒå±€" class="headerlink" title="åª’ä½“æŸ¥è¯¢ ä¸ å“åº”å¼å¸ƒå±€"></a>åª’ä½“æŸ¥è¯¢ ä¸ å“åº”å¼å¸ƒå±€</h3><h4 id="åª’ä½“æŸ¥è¯¢èƒ½æŸ¥çš„ç‰¹æ€§"><a href="#åª’ä½“æŸ¥è¯¢èƒ½æŸ¥çš„ç‰¹æ€§" class="headerlink" title="åª’ä½“æŸ¥è¯¢èƒ½æŸ¥çš„ç‰¹æ€§"></a>åª’ä½“æŸ¥è¯¢èƒ½æŸ¥çš„ç‰¹æ€§</h4><p>å¯ä»¥å°ºåº¦æŸ¥è¯¢ï¼Œå¦‚max-widthï¼›<br>å¯ä»¥å®½é«˜æ¯”æŸ¥è¯¢ï¼š<br>å¯ä»¥æ¨ªç«–å±æ–¹å‘æŸ¥è¯¢ï¼›<br>å¯ä»¥è®¾å¤‡åƒç´ æ¯”æŸ¥è¯¢ min-resolution<br>è§P220</p><h4 id="åª’ä½“æŸ¥è¯¢çš„æŠ€å·§"><a href="#åª’ä½“æŸ¥è¯¢çš„æŠ€å·§" class="headerlink" title="åª’ä½“æŸ¥è¯¢çš„æŠ€å·§"></a>åª’ä½“æŸ¥è¯¢çš„æŠ€å·§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/* è¿™ç§åª’ä½“æŸ¥è¯¢çš„å†™æ³•ï¼Œå¾ˆå¦™ï¼Œç”±ä¸Šåˆ°ä¸‹è¿›è¡Œå±‚å ï¼Œä¸‹é¢çš„è¦†ç›–ä¸Šé¢çš„ï¼Œè¾¾åˆ°ä¸ç”¨å†™ è¿™ç§å½¢å¼ï¼š30em&lt;width&lt;56em ,ä½¿ç”¨ä¸€ä¸ªmin-widthå°±è¾¾åˆ°æ•ˆæœ*/</span><br><span class="line"></span><br><span class="line">    @media only screen and (min-width: 35em) &#123;</span><br><span class="line">      .row-quartet &gt; * &#123;</span><br><span class="line">        width: 50%;</span><br><span class="line">      &#125;</span><br><span class="line">      .subcategory-featured &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    @media only screen and (min-width: 50em) &#123;</span><br><span class="line">      .row-quartet &gt; * &#123;</span><br><span class="line">        width: 25%;</span><br><span class="line">      &#125;</span><br><span class="line">      .subcategory-featured &#123;</span><br><span class="line">        width: 50%;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    @media only screen and (min-width: 70em) &#123;</span><br><span class="line">      .subcategory-header &#123;</span><br><span class="line">        width: 20%;</span><br><span class="line">      &#125;</span><br><span class="line">      .subcategory-content &#123;</span><br><span class="line">        width: 80%;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="å¾ˆå¦™çš„å“åº”å¼å¸ƒå±€ç®€å•èŒƒä¾‹"><a href="#å¾ˆå¦™çš„å“åº”å¼å¸ƒå±€ç®€å•èŒƒä¾‹" class="headerlink" title="å¾ˆå¦™çš„å“åº”å¼å¸ƒå±€ç®€å•èŒƒä¾‹"></a>å¾ˆå¦™çš„å“åº”å¼å¸ƒå±€ç®€å•èŒƒä¾‹</h4><p>GitHub 08-05-responsive-news.html</p><h4 id="æ„Ÿå—ä¸‹æœ€ç®€å•çš„å“åº”å¼è®¾è®¡demo"><a href="#æ„Ÿå—ä¸‹æœ€ç®€å•çš„å“åº”å¼è®¾è®¡demo" class="headerlink" title="æ„Ÿå—ä¸‹æœ€ç®€å•çš„å“åº”å¼è®¾è®¡demo"></a>æ„Ÿå—ä¸‹æœ€ç®€å•çš„å“åº”å¼è®¾è®¡demo</h4><p>E:\css-mastery-16-master\chapter-08\08-05-responsive-news.html</p><h4 id="å“åº”å¼è®¾è®¡-çš„ä¸€äº›åº”ç”¨"><a href="#å“åº”å¼è®¾è®¡-çš„ä¸€äº›åº”ç”¨" class="headerlink" title="å“åº”å¼è®¾è®¡ çš„ä¸€äº›åº”ç”¨"></a>å“åº”å¼è®¾è®¡ çš„ä¸€äº›åº”ç”¨</h4><p>å¯¹å­—ä½“çš„è®¾è®¡ï¼š<br>  body {<br>      font-family: â€˜Open Sansâ€™, â€˜Helvetica Neueâ€™, Arial, sans-serif;<br>      line-height: 1.5;<br>    }<br>    @media only screen and (max-width: 37.5em) {<br>      h1,h2,h3,h4,h5,h6 {<br>        font-family: â€˜Open Sans Condensedâ€™, â€˜Arial Narrowâ€™, Arial, sans-serif;<br>      }<br>    }<br>é«˜æ¸…å›¾æˆ–å¤šå€å›¾æˆ–å¤§å°å›¾æŸ¥è¯¢ï¼š<br> .profile-box {<br>      position: relative;<br>      height: 300px;<br>      background-size: cover;<br>      background-position: 50% 50%;<br>      background-image: url(img/small-cat.jpg);<br>    }<br>    @media only screen and (min-width: 600px) {<br>      .profile-box {<br>        height: 600px;<br>        background-image: url(img/big-cat.jpg);<br>      }<br>    }</p><h4 id="æ›´å¤šå“åº”å¸ƒå±€çŸ¥è¯†"><a href="#æ›´å¤šå“åº”å¸ƒå±€çŸ¥è¯†" class="headerlink" title="æ›´å¤šå“åº”å¸ƒå±€çŸ¥è¯†"></a>æ›´å¤šå“åº”å¸ƒå±€çŸ¥è¯†</h4><p>å‚è€ƒåšå®¢ã€Šcssä¹‹å¸ƒå±€ã€‹</p><h3 id="calc"><a href="#calc" class="headerlink" title="calc"></a>calc</h3><h4 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>calcèƒ½è¯†åˆ« pxã€ç™¾åˆ†æ¯”ã€emï¼Œä¸”å¯ä»¥æ··å†™ï¼Œå¦‚ä¸‹æœ‰æ•ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">width: calc(50% + 20px*4 - 1em);</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼Œcalcå€¼å†…ï¼Œè¿ç®—ç¬¦ä¸¤è¾¹éœ€è¦ç©ºæ ¼ï¼Œå¦åˆ™æ— æ•ˆã€‚</p><h4 id="calcå±…ä¸­-50-xx"><a href="#calcå±…ä¸­-50-xx" class="headerlink" title="calcå±…ä¸­__50%-xx"></a>calcå±…ä¸­__50%-xx</h4><p>ä»¥ä¸‹æ˜¯å¸¸è§„åˆ©ç”¨margin autoè®©imgå›¾ç‰‡å±…ä¸­çš„æ–¹æ³•ï¼Œå¼Šç«¯æ˜¯éœ€è¦ç»™å›¾ç‰‡è®¾ç½®display: block;,åŸå› å‚è€ƒã€Šmargin:0 autoåœ¨inline-blockå¤±æ•ˆã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.wrap &#123;</span><br><span class="line">        background: rebeccapurple;</span><br><span class="line">    &#125;</span><br><span class="line">img&#123;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    display: block;</span><br><span class="line">&#125;</span><br><span class="line"> &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">        &lt;img class=&quot;dd&quot; src=&quot;http://csssecrets.io/images/adamcatlace.jpg&quot; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥ä½¿ç”¨calcæ¥å®ç°ï¼Œå¯ä»¥è®©ä»£ç æ›´ç®€æ´ï¼Œåˆ©ç”¨çš„æ˜¯æ•°å­¦åŸç†ï¼Œå‡è®¾å›¾ç‰‡é•¿åº¦å·²çŸ¥ä¸º400pxï¼›<br>é‚£ä¹ˆ 100%- (50%-200px)*2 = 400px ;è¿™ä¸ª400pxå°±æ˜¯å›¾ç‰‡é•¿åº¦ï¼Œ100%æ˜¯çˆ¶çº§å®½åº¦50%-200pxæ˜¯å†…è¾¹è·æˆ–å¤–è¾¹è·ã€‚<br>è®°ä½ 50%-xx æ˜¯calcå±…ä¸­çš„å¥—è·¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€</span><br><span class="line"> .wrap &#123;</span><br><span class="line">        background: rebeccapurple;</span><br><span class="line">        padding: 0 calc(50% - 200px);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹æ³•ä¸€</span><br><span class="line">img&#123;</span><br><span class="line">    margin: 0 calc(50% - 200px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="css3è¾ƒå¥½ç‰¹æ€§"><a href="#css3è¾ƒå¥½ç‰¹æ€§" class="headerlink" title="css3è¾ƒå¥½ç‰¹æ€§"></a>css3è¾ƒå¥½ç‰¹æ€§</h3><h4 id="max-width-min-content"><a href="#max-width-min-content" class="headerlink" title="max-width: min-content"></a>max-width: min-content</h4><p> min-contentæ˜¯css3å…³é”®å­—ï¼Œ<br> ä¼—æ‰€å‘¨çŸ¥ï¼Œå¦‚æœä¸ç»™å…ƒç´ ä¸€ä¸ªå…·ä½“çš„height,å®ƒå°±ä¼šè‡ªåŠ¨é€‚åº”å†…å®¹çš„é«˜åº¦ã€‚å‡å¦‚æˆ‘ä»¬å¸Œæœ›widthä¹Ÿå…·æœ‰åŒæ ·çš„ç±»ä¼¼è¡Œä¸ºï¼Œå¦‚ä½•è¾¾åˆ°ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨min-contentã€‚<br> min-content è¿™ä¸ªå…³é”®å­—å°†è§£æä¸ºè¿™ä¸ªå®¹å™¨å†…éƒ¨æœ€å¤§çš„ä¸å¯çŸ­è¡Œå…ƒç´ é«˜åº¦ï¼ˆå³æœ€å®½çš„å•è¯ã€å›¾ç‰‡æˆ–å…·æœ‰å›ºå®šå®½åº¦çš„ç›’å…ƒç´ ï¼‰<br><a href="https://www.jianshu.com/p/b7c929fce368" target="_blank" rel="noopener">ç›´æ¥å‚è€ƒè¿™é‡Œ</a><br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> .wrap &#123;</span><br><span class="line">max-width: min-content;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;http://csssecrets.io/images/adamcatlace.jpg&quot; /&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          The great Sir Adam Catlace was named after Countess Ada Lovelace, the first programmer ever.</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="base64å›¾ç‰‡"><a href="#base64å›¾ç‰‡" class="headerlink" title="base64å›¾ç‰‡"></a>base64å›¾ç‰‡</h3><p>base64æ¥ä»£æ›¿pngå›¾ç‰‡ï¼Œåˆ©äºå‡å°‘httpè¯·æ±‚ï¼Œæé«˜æ€§èƒ½ï¼Œä½†æ˜¯å›¾ç‰‡ç»è¿‡ç¼–è¯‘å˜æˆbase64æ–‡æœ¬æ—¶ï¼Œå…¶ä½“ç§¯å¤§å°å¢åŠ äº†ä¸‰åˆ†ä¹‹ä¸€ï¼Œå¢åŠ äº†cssæˆ–htmlä½“ç§¯ã€‚<br>å› æ­¤base64ä¸€èˆ¬ç”¨äºå°å›¾ç‰‡ï¼Œç”±äºbase64æ–‡æœ¬ä¸åˆ©äºåæœŸä¿®æ”¹å’Œç»´æŠ¤ï¼Œæ‰€ä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨base64ï¼Œè€Œæ˜¯é€šè¿‡webpackç­‰ç¼–è¯‘çš„æ–¹å¼ï¼Œå°†pngå½¢å¼çš„å›¾ç‰‡ç¼–è¯‘æˆbase64.<br>å› æ­¤æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><h4 id="base64æ˜¯æ–‡æœ¬"><a href="#base64æ˜¯æ–‡æœ¬" class="headerlink" title="base64æ˜¯æ–‡æœ¬"></a>base64æ˜¯æ–‡æœ¬</h4><h4 id="base64è¦æ¯”åŸæ¥å›¾ç‰‡ä½“ç§¯å¢åŠ 1-3"><a href="#base64è¦æ¯”åŸæ¥å›¾ç‰‡ä½“ç§¯å¢åŠ 1-3" class="headerlink" title="base64è¦æ¯”åŸæ¥å›¾ç‰‡ä½“ç§¯å¢åŠ 1/3"></a>base64è¦æ¯”åŸæ¥å›¾ç‰‡ä½“ç§¯å¢åŠ 1/3</h4><h4 id="base64ç”¨äºå°å›¾ç‰‡"><a href="#base64ç”¨äºå°å›¾ç‰‡" class="headerlink" title="base64ç”¨äºå°å›¾ç‰‡"></a>base64ç”¨äºå°å›¾ç‰‡</h4><h4 id="é€šè¿‡æ‰“åŒ…ç”Ÿæˆbase64"><a href="#é€šè¿‡æ‰“åŒ…ç”Ÿæˆbase64" class="headerlink" title="é€šè¿‡æ‰“åŒ…ç”Ÿæˆbase64"></a>é€šè¿‡æ‰“åŒ…ç”Ÿæˆbase64</h4><h4 id="base64çš„ä½¿ç”¨å‡å°‘äº†httpè¯·æ±‚"><a href="#base64çš„ä½¿ç”¨å‡å°‘äº†httpè¯·æ±‚" class="headerlink" title="base64çš„ä½¿ç”¨å‡å°‘äº†httpè¯·æ±‚"></a>base64çš„ä½¿ç”¨å‡å°‘äº†httpè¯·æ±‚</h4><h3 id="cssåŠ¨ç”»ç›¸å…³çŸ¥è¯†"><a href="#cssåŠ¨ç”»ç›¸å…³çŸ¥è¯†" class="headerlink" title="cssåŠ¨ç”»ç›¸å…³çŸ¥è¯†"></a>cssåŠ¨ç”»ç›¸å…³çŸ¥è¯†</h3><p>å‚è€ƒã€ŠcssçŸ¥è¯†ç‚¹æ±‡ â€“ cssåŠ¨ç”»ã€‹</p><h2 id="cssé»‘çŸ¥è¯†"><a href="#cssé»‘çŸ¥è¯†" class="headerlink" title="cssé»‘çŸ¥è¯†"></a>cssé»‘çŸ¥è¯†</h2><h3 id="css-è¦†ç›–åŸåˆ™"><a href="#css-è¦†ç›–åŸåˆ™" class="headerlink" title="css è¦†ç›–åŸåˆ™"></a>css è¦†ç›–åŸåˆ™</h3><p>ç®€å†™çš„æ–¹å¼ï¼Œæœ€å®¹æ˜“è¦†ç›–åŸæ¥å®šä¹‰å¥½çš„è§„åˆ™ï¼Œä¿®æ”¹å·²æœ‰ä»£ç æ—¶ï¼Œä¸è¦†ç›–ä»¥å‰æ ·å¼çš„æ–¹å¼å°±æ˜¯ä¸è¦å†™ç®€å†™ã€‚<br>ä¾‹å¦‚outlineï¼Œbackgroundçš„ç­‰ç­‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">outline-width: 15px;</span><br><span class="line">outline-color: #00BCD4;</span><br><span class="line">outline: solid; //è¦†ç›–äº†ä»¥ä¸Šä¸¤å¥cssæ ·å¼ï¼Œå®é™…å±•ç¤ºçš„è½®å»Šçº¿å°†ä¸º é»˜è®¤çš„sizeï¼Œå’Œé»‘è‰²</span><br></pre></td></tr></table></figure></p><h3 id="font-family-å¤šå€¼å†™æ³•"><a href="#font-family-å¤šå€¼å†™æ³•" class="headerlink" title="font-family å¤šå€¼å†™æ³•"></a>font-family å¤šå€¼å†™æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//Times new Roman ä½¿ç”¨äº†å¼•å·ï¼Œå› ä¸ºå®ƒæœ‰ç©ºæ ¼ï¼Œå½“æœ‰ç©ºæ ¼æ—¶ï¼Œæœ€å¥½åŠ ä¸Šå¼•å·ï¼Œä¹Ÿå¯ä»¥ä¸åŠ </span><br><span class="line">font-family: Georgia, Times, &quot;Times new Roman&quot;, sefif;</span><br></pre></td></tr></table></figure><p>åå¤‡æœºåˆ¶æ˜¯font-familyçš„é‡è¦ç‰¹æ€§ã€‚<br>ä»¥ä¸Šæ˜¯ä¸€ç§åå¤‡å†™æ³•ï¼Œä»å·¦åˆ°å³ï¼Œä¼˜å…ˆçº§å·¦è¾¹æœ€é«˜ï¼Œå½“æ­¤å€¼åœ¨æµè§ˆå™¨ä¸­æ— æ³•è¯†åˆ«æ—¶ï¼Œå¾€å³é¡ºå»¶ã€‚</p><h3 id="å‚ç…§çš„æ˜¯çˆ¶çº§çš„ä»€ä¹ˆå±æ€§"><a href="#å‚ç…§çš„æ˜¯çˆ¶çº§çš„ä»€ä¹ˆå±æ€§" class="headerlink" title="% å‚ç…§çš„æ˜¯çˆ¶çº§çš„ä»€ä¹ˆå±æ€§"></a>% å‚ç…§çš„æ˜¯çˆ¶çº§çš„ä»€ä¹ˆå±æ€§</h3><h4 id="position"><a href="#position" class="headerlink" title="position"></a>position</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    top: 10%;</span><br><span class="line">    left: 10%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>left å‚ç…§çˆ¶çº§çš„ widthï¼›<br>top å‚ç…§çˆ¶çº§çš„ heightï¼›</p><h4 id="margin-å‚ç…§çˆ¶width"><a href="#margin-å‚ç…§çˆ¶width" class="headerlink" title="margin å‚ç…§çˆ¶width"></a>margin å‚ç…§çˆ¶width</h4><p>margin ç™¾åˆ†æ¯”åªå‚ç…§çˆ¶çº§çš„å®½åº¦ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    margin-left: 10%;//çˆ¶çº§çš„å®½åº¦</span><br><span class="line">    margin-top: 10%;//çˆ¶çº§çš„å®½åº¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="margin-0-autoåœ¨inline-blockå¤±æ•ˆ"><a href="#margin-0-autoåœ¨inline-blockå¤±æ•ˆ" class="headerlink" title="margin:0 autoåœ¨inline-blockå¤±æ•ˆ"></a>margin:0 autoåœ¨inline-blockå¤±æ•ˆ</h3><p>å¦‚ä¸‹ï¼Œchildå°†ä¸å±…ä¸­ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    .wrap&#123;</span><br><span class="line">            background: #00bcd4b5;</span><br><span class="line">            height: 90px;</span><br><span class="line">        &#125;</span><br><span class="line">        .child&#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            height: 50px; </span><br><span class="line">            width: 100px;</span><br><span class="line">            background: rebeccapurple;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><p>è§£å†³çš„æ–¹æ³•å°±æ˜¯ä»æ–°è®¾ç½® child çš„display: block;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.child&#123;</span><br><span class="line">    &lt;!-- å…¶ä»–ä¸å˜ --&gt;</span><br><span class="line">     display: block;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆmargin: 0 autoå¯¹inline-blockæ— æ•ˆå‘¢ï¼Œå¯¹äºmarginæ¥è¯´ï¼Œautoæ˜¯ä¸€ä¸ªç‰¹æ®Šå…³é”®å­—ï¼Œåœ¨<a href="https://www.w3schools.com/css/css_margin.asp" target="_blank" rel="noopener">ä»¥ä¸‹æ˜¯w3cå…³äºmarginçš„autoå…³é”®å­—æ‰§è¡Œæœºåˆ¶çš„è§£é‡Š</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">You can set the margin property to auto to horizontally center the element within its container.</span><br><span class="line">The element will then take up the specified width, and the remaining space will be split equally between the left and right margins:</span><br><span class="line">å¯ä»¥å°†Marginå±æ€§è®¾ç½®ä¸ºAutoï¼Œä½¿å…ƒç´ åœ¨å…¶å®¹å™¨å†…æ°´å¹³å±…ä¸­ã€‚</span><br><span class="line">å…ƒç´ å°†å ç”¨æŒ‡å®šçš„å®½åº¦(å°±æ˜¯è‡ªå·±çš„width)ï¼Œå‰©ä½™çš„ç©ºé—´å°†åœ¨å·¦å³é¡µè¾¹è·ä¹‹é—´å¹³å‡åˆ†é…ï¼š</span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šé¢çš„è¯ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè¦æƒ³autoæœ‰æ•ˆï¼Œå¿…é¡»æä¾›å¦‚ä¸‹æ¡ä»¶â€”</p><ul><li>å¿…é¡»ç»™å…ƒç´ è®¾ç½®å®½åº¦<br>æµè§ˆå™¨è¦å°†å…ƒç´ æ‰€å¤„çš„è¡Œçš„å®½åº¦å‡å»å…ƒç´ å®½åº¦ï¼Œè·å¾—å‰©ä½™å®½åº¦ï¼Œç„¶åå¹³å‡åˆ†é…ï¼›</li><li>å¿…é¡»æ˜¯å—çº§å…ƒç´ <br>å¿…é¡»æ˜¯blockå…ƒç´ ï¼Œå› ä¸ºåœ¨blockå…ƒç´ ä¸­ï¼Œè¿™ä¸€è¡Œåªæœ‰è¿™ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœä¸æ˜¯blockï¼Œä¾‹å¦‚æ˜¯inline-blockæ—¶ï¼Œå°±ç®—æµè§ˆå™¨å¯ä»¥è®©å…ƒç´ å±…ä¸­ï¼Œä½†æ˜¯è¯¥è¡Œä¸­è¿˜æœ‰å…¶ä»–è¡Œå†…å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªå±…ä¸­å…ƒç´ æ˜¯è¦†ç›–è¿˜æ˜¯å°†å…¶ä»–è¡Œå†…å…ƒç´ ä¸€èµ·å±…ä¸­å‘¢ã€‚<br>æ‰€ä»¥éblockå…ƒç´ ï¼Œautoå…³é”®å­—æ— æ•ˆã€‚<h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4></li><li>è¿™é‡Œè¯´çš„æ˜¯autoå…³é”®å­—æ— æ•ˆï¼Œè€Œä¸æ˜¯marginè¿™ä¸ªå±æ€§å¤±æ•ˆï¼Œautoæ— æ•ˆï¼Œä½ ä¹Ÿå¯ä»¥ç»™å®šä¸€ä¸ªå…·ä½“å€¼ï¼Œmarginéƒ½æ˜¯æœ‰æ•ˆçš„ï¼›</li><li>å¯¹äºimgï¼Œbuttonè¿™äº›å…ƒç´ æœ¬èº«æ˜¯æœ‰å®½åº¦çš„ï¼Œå¯ä»¥ä¸ç”¨è®¾ç½®å®½åº¦ï¼Œåªéœ€æŒ‡å®šdisplay: block;å°±å¯ä»¥ä½¿ç”¨ margin:0 autoå±…ä¸­ï¼›</li><li>å¯¹äºè¡Œå†…å…ƒç´ ï¼Œå«inline-blockï¼Œè¦è®©ä»–ä»¬å±…ä¸­çš„æœ€å¥½æ–¹æ³•æ˜¯text-align,æ¯•ç«Ÿtext-alignæ˜¯é’ˆå¯¹è¡Œå†…å…ƒç´ å±…ä¸­è€Œåˆ›é€ çš„ï¼Œè¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºä¸åŒç±»å‹çš„å±…ä¸­ï¼Œè™½ç„¶å¾ˆå¤šç§æ–¹æ³•éƒ½å¯ä»¥å±…ä¸­ï¼Œä½†è¦é€‰å¯¹è§„èŒƒçš„çŠ¯æ³•;<br>ç®€å•ç‚¹å°±æ˜¯ï¼Œå—çº§å…ƒç´  ä½¿ç”¨ margin: 0 autoå±…ä¸­ï¼Œè¡Œå†…å…ƒç´ ä½¿ç”¨text-alignå±…ä¸­ï¼› <h4 id="æ•²é»‘æ¿"><a href="#æ•²é»‘æ¿" class="headerlink" title="æ•²é»‘æ¿"></a>æ•²é»‘æ¿</h4>åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œå¦‚æœè¦æŠŠä¸€äº›ä¸œè¥¿æ°´å¹³å±…ä¸­ï¼Œä½¿ç”¨ display:flex; å¯¹äºä¸å…¼å®¹flexçš„æµè§ˆå™¨å¦‚IE8-9 æ‰å»ºè®®ä½¿ç”¨ margin: 0 auto;</li></ul><h3 id="å¤–è¾¹è·æŠ˜å "><a href="#å¤–è¾¹è·æŠ˜å " class="headerlink" title="å¤–è¾¹è·æŠ˜å "></a>å¤–è¾¹è·æŠ˜å </h3><p>å¤–è¾¹è·æŠ˜å åªå‘ç”Ÿåœ¨marginå‚ç›´æ–¹å‘ï¼Œæ°´å¹³æ–¹å‘æ²¡æœ‰æ­¤ç°è±¡ï¼Œæ‰€ä»¥å¤–è¾¹è·æŠ˜å ï¼ŒæŒ‡çš„å°±æ˜¯margin-topä¸margin-bottomä¸¤ä¸ªæ–¹å‘ã€‚</p><h4 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">  .wrap&#123;</span><br><span class="line">            background: red;</span><br><span class="line">            height: 150px;</span><br><span class="line">        &#125;</span><br><span class="line">        .chilid&#123;</span><br><span class="line">            margin-top: 80px;</span><br><span class="line">            height: 50px; </span><br><span class="line">            background: blue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;chilid&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/margin1.jpg" alt title class>                <p></p>            </figure></p><p>è¿™é‡Œçš„æ•ˆæœå¹¶æ²¡æœ‰è¾¾åˆ°æˆ‘ä»¬çš„é¢„æœŸï¼Œæˆ‘ä»¬å¯¹chilidåšäº†margin-topï¼Œé‚£ä¹ˆchildç†åº”æ˜¯ç›¸å¯¹çˆ¶wrapè¿›è¡Œmarginï¼Œè€Œå®é™…ä¸­ï¼Œchildå´ç›¸å¯¹æµè§ˆå™¨è¾¹ç¼˜è¿›è¡Œäº†margin-topï¼›<br>è¿™å°±æ˜¯å¤–è¾¹è·æŠ˜å çš„ç°è±¡ä¹‹ä¸€ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼Œå°±æ˜¯åœ¨wrapä¸­å†™ä¸€ä¸ªborderæˆ–è€…å†™ä¸€ä¸ªpaddingï¼Œå°±å¯ä»¥è¾¾åˆ°é¢„æœŸæ•ˆæœäº†ï¼›</p><h4 id="å…¶ä»–å¤–è¾¹è·æŠ˜å ç°è±¡ï¼š"><a href="#å…¶ä»–å¤–è¾¹è·æŠ˜å ç°è±¡ï¼š" class="headerlink" title="å…¶ä»–å¤–è¾¹è·æŠ˜å ç°è±¡ï¼š"></a>å…¶ä»–å¤–è¾¹è·æŠ˜å ç°è±¡ï¼š</h4><figure class="image-box">                <img src="/image/css/margin2.png" alt title class>                <p></p>            </figure><h4 id="å‡ºç°å¤–è¾¹è·æŠ˜å çš„æ¡ä»¶"><a href="#å‡ºç°å¤–è¾¹è·æŠ˜å çš„æ¡ä»¶" class="headerlink" title="å‡ºç°å¤–è¾¹è·æŠ˜å çš„æ¡ä»¶"></a>å‡ºç°å¤–è¾¹è·æŠ˜å çš„æ¡ä»¶</h4><p>å¤–è¾¹è·æŠ˜è´´<strong>åªå‘ç”Ÿåœ¨æ­£å¸¸æ–‡æ¡£æµä¸­çš„å—çº§å…ƒç´ çš„ margin å‚ç›´æ–¹å‘ä¸Šï¼›</strong><br>marginæ°´å¹³æ–¹å‘æ— æ­¤ç°è±¡ï¼›<br>è¡Œå†…ç›’å­ï¼Œæµ®åŠ¨ç›’å­ï¼Œç»å¯¹å®šä½æ— æ­¤ç°è±¡ï¼›<br>è€Œä¸”å—çº§å…ƒç´ å‘ç”Ÿæ­¤ç°è±¡çš„å¦å¤–é‡è¦æ¡ä»¶æ˜¯ï¼Œçˆ¶å…ƒç´ <strong>æ—¢æ²¡æœ‰borderåˆæ²¡æœ‰paddingæ‰ä¼šå‘ç”Ÿæ­¤ç°è±¡</strong>ã€‚å‚è€ƒä¸Šé¢çš„ä¾‹å­ã€‚<br>æ‰€ä»¥æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€è¦å¯¹headerè¿›è¡Œmargin-topå¤„ç†æ—¶ï¼Œä¸è¦ä½¿ç”¨margin-topï¼Œä½¿ç”¨padding-topä»£æ›¿ï¼Œå› ä¸ºå¯èƒ½ä¼šå‘ç”ŸæŠ˜å ç°è±¡ï¼›<br>å¤–è¾¹è·æŠ˜å ç°è±¡å…¶å®æ˜¯æœ‰å¾ˆå¤šå¥½å¤„çš„ï¼Œå¯ä»¥é¿å…å¾ˆå¤šå¤šä½™çš„marginï¼Œå¯å‚è€ƒ ã€Šç²¾é€šcssã€‹P45é¡µï¼Œ<a href="https://www.w3schools.com/css/css_margin.asp" target="_blank" rel="noopener">å¤–ç½‘w3cä¹Ÿæåˆ°äº†margin å‚ç›´æ–¹å‘ä¸Šçš„æŠ˜å ç°è±¡</a>;</p><h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><p>å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå…¨ç§°Block Formatting Contextï¼Œä½ ä¹Ÿå¯ä»¥å«å®ƒè‚¯å¾·åŸºï¼›ç›¸å…³æ¦‚å¿µå»mdnæˆ–w3cæŸ¥ã€‚</p><h4 id="BFCç‰¹å¾"><a href="#BFCç‰¹å¾" class="headerlink" title="BFCç‰¹å¾"></a>BFCç‰¹å¾</h4><p>BFCæœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚</li><li>Boxå‚ç›´æ–¹å‘çš„è·ç¦»ç”±marginå†³å®šã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿé‡å </li><li>æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹ç¼˜ï¼ˆmargin-left)ï¼Œ ä¸åŒ…å«å—çš„å·¦è¾¹ï¼ˆcontain box leftï¼‰ç›¸æ¥è§¦(å¯¹äºä»å·¦å¾€å³çš„æ ¼å¼åŒ–ï¼Œå¦åˆ™ç›¸å)ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é™¤éè¿™ä¸ªå…ƒç´ è‡ªå·±å½¢æˆäº†ä¸€ä¸ªæ–°çš„BFCã€‚</li><li>BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ï¼ˆå¯é˜»æ­¢å› æµ®åŠ¨å…ƒç´ å¼•å‘çš„æ–‡å­—ç¯ç»•ç°è±¡ï¼‰ã€‚</li><li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚ (åˆ©ç”¨æ­¤ç‰¹æ€§ï¼Œè§£å†³å¤–è¾¹è·æŠ˜å é—®é¢˜)</li><li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— ï¼ˆåˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œä½¿ç”¨overflowæ¶ˆé™¤æµ®åŠ¨ï¼‰<br><a href="https://segmentfault.com/a/1190000009545742" target="_blank" rel="noopener">å‚è€ƒ1</a><br><a href="https://www.jianshu.com/p/11e764268c0d" target="_blank" rel="noopener">å‚è€ƒ2</a></li></ul><h4 id="åˆ›å»ºä¸€ä¸ªBFC"><a href="#åˆ›å»ºä¸€ä¸ªBFC" class="headerlink" title="åˆ›å»ºä¸€ä¸ªBFC"></a>åˆ›å»ºä¸€ä¸ªBFC</h4><p>æ ¹å…ƒç´ æˆ–å…¶å®ƒåŒ…å«å®ƒçš„å…ƒç´ <br>æµ®åŠ¨ (å…ƒç´ çš„ float ä¸æ˜¯ none)<br>ç»å¯¹å®šä½çš„å…ƒç´  (å…ƒç´ å…·æœ‰ position ä¸º absolute æˆ– fixed)<br>å—çº§å…ƒç´ å…·æœ‰overflow ï¼Œä¸”å€¼ä¸æ˜¯ visible<br>éå—çº§å…ƒç´ å…·æœ‰ display: inline-blockï¼Œtable-cell, table-caption, flex, inline-flex<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context" target="_blank" rel="noopener">æ›´å¤šåˆ›å»ºæ–¹å¼</a></p><h4 id="ä¸ºä»€ä¹ˆè¦åˆ›å»ºBFC"><a href="#ä¸ºä»€ä¹ˆè¦åˆ›å»ºBFC" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ›å»ºBFC"></a>ä¸ºä»€ä¹ˆè¦åˆ›å»ºBFC</h4><p>åœ¨MDNä¸­å•ç‹¬è®²äº†BFCçš„ä¸¤ä¸ªä½œç”¨ï¼šæ¶ˆé™¤æµ®åŠ¨ä¸é¿å…å¤–è¾¹è·æŠ˜å ï¼›<br>æ‰€ä»¥ï¼Œåœ¨æ­£å¸¸ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ç”¨åˆ»æ„å»å…³å¿ƒä»€ä¹ˆæ˜¯BFCï¼Œä¸è¿‡å½“é‡åˆ°æ¶ˆé™¤æµ®åŠ¨ï¼Œæ¶ˆé™¤æµ®åŠ¨ç¯ç»•ï¼Œæ¶ˆé™¤å¤–è¾¹è·æŠ˜å é—®é¢˜æ—¶ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<br>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªBFCæ¥è§£å†³ï¼Œä¸ºä»€ä¹ˆBFCèƒ½è§£å†³ï¼Ÿ<br>å› ä¸ºBFCæœ‰è‡ªå·±çš„ç‰¹å¾ï¼Œä¸€æ—¦å…ƒç´ å˜æˆäº†ä¸€ä¸ªBFCï¼Œå®ƒå°±å…·å¤‡äº†BFCèµ‹ç»™å®ƒçš„ç‰¹å¾ï¼Œè€Œè¿™äº›ç‰¹å¾å¯ä»¥è§£å†³ä¸Šé¢è¯´çš„é—®é¢˜ã€‚</p><h4 id="æ¶ˆé™¤æµ®åŠ¨"><a href="#æ¶ˆé™¤æµ®åŠ¨" class="headerlink" title="æ¶ˆé™¤æµ®åŠ¨"></a>æ¶ˆé™¤æµ®åŠ¨</h4><p>å­å…ƒç´ å®šä¹‰floatåï¼Œçˆ¶å…ƒç´ çš„é«˜åº¦å˜æˆå¾ˆå°æˆ–è€…0äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†çˆ¶å…ƒç´ å˜æˆä¸€ä¸ªBFCï¼Œè€Œåˆ©ç”¨BFCä¸Šé¢çš„ç‰¹å¾6ï¼Œè®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— ï¼Œè¿™ä¸ªæ—¶å€™çˆ¶å…ƒç´ çš„é«˜åº¦å°†åŒ…å«æµ®åŠ¨çš„å­å…ƒç´ é«˜åº¦ï¼Œè§£å†³æµ®åŠ¨äº†ã€‚<br>ç”±ä¸Šé¢å¯çŸ¥ï¼Œå°†å…ƒç´ å®šä¹‰ä¸€ä¸ªoverflowï¼Œå¯ä»¥å°†è¯¥å…ƒç´ ç¼–ç¨‹BFCã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">    background: red;</span><br><span class="line">    width: 100%;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">.chilid&#123;</span><br><span class="line">    float: left;</span><br><span class="line">    width: 100%;</span><br><span class="line">    height: 50px; </span><br><span class="line">    background: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;chilid&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h4 id="è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"><a href="#è‡ªé€‚åº”ä¸¤æ å¸ƒå±€" class="headerlink" title="è‡ªé€‚åº”ä¸¤æ å¸ƒå±€"></a>è‡ªé€‚åº”ä¸¤æ å¸ƒå±€</h4><p><a href="https://segmentfault.com/a/1190000009545742" target="_blank" rel="noopener">ä¸å¤šå†™äº†ï¼Œç›´æ¥å‚è€ƒè¿™é‡Œçš„â€”&lt;2. å¸ƒå±€ï¼šè‡ªé€‚åº”ä¸¤æ å¸ƒå±€&gt;</a>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/margin3.jpg" alt title class>                <p></p>            </figure></p><h4 id="æ¶ˆé™¤å¤–è¾¹è·æŠ˜å "><a href="#æ¶ˆé™¤å¤–è¾¹è·æŠ˜å " class="headerlink" title="æ¶ˆé™¤å¤–è¾¹è·æŠ˜å "></a>æ¶ˆé™¤å¤–è¾¹è·æŠ˜å </h4><p>è¿™é‡Œæœ‰ä¸¤ä¸ªä¾‹å­<br><a href="https://segmentfault.com/a/1190000009545742" target="_blank" rel="noopener">ä¸€ä¸ªä¾‹å­ï¼Œè§æ–‡ä¸­çš„â€“é˜²æ­¢å‚ç›´marginåˆå¹¶</a><br>ç¬¬äºŒä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ”¹å†™ä¸‹ ã€Šå¤–è¾¹è·æŠ˜å ã€‹ç« èŠ‚çš„ã€Šç°è±¡ã€‹ä¾‹å­ï¼Œç»™wrapæ·»åŠ ä¸€ä¸ªfloatå±æ€§ï¼Œå°†.wrapå˜æˆä¸€ä¸ªBFCï¼Œåˆ©ç”¨BFCç‰¹å¾5ï¼šBFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œmarginæ˜¯wrapçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥marginä¸å—å¤–éƒ¨å½±å“ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">    width: 100%;</span><br><span class="line">    float: right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ¨èä½¿ç”¨ä¼ªå…ƒç´ æ¥æ¶ˆé™¤æµ®åŠ¨"><a href="#æ¨èä½¿ç”¨ä¼ªå…ƒç´ æ¥æ¶ˆé™¤æµ®åŠ¨" class="headerlink" title="æ¨èä½¿ç”¨ä¼ªå…ƒç´ æ¥æ¶ˆé™¤æµ®åŠ¨"></a>æ¨èä½¿ç”¨ä¼ªå…ƒç´ æ¥æ¶ˆé™¤æµ®åŠ¨</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å‚è€ƒã€Šç²¾é€šcssã€‹P181ï¼Œ<br>å¯¹äºå°çš„å…ƒç´ ï¼Œä½¿ç”¨overflowæ˜¯æ¯”è¾ƒæ–¹ä¾¿ï¼Œå¯ä»¥ä½¿ç”¨overflowï¼›<br>å¯¹äºå¤§çš„å…ƒç´ ï¼Œå¯èƒ½å…ƒç´ éœ€è¦æ˜¾ç¤ºæ»šåŠ¨æ¡ï¼Œæˆ–è€…æœ‰äº›å®šä½å…ƒç´ éœ€è¦æ”¾åœ¨è¿™ä¸ªå¤§çš„å…ƒç´ ä¹‹å¤–ï¼Œè¿™æ—¶å€™ä½¿ç”¨overflowå¯èƒ½äº§ç”Ÿä¸åˆ©å½±å“ï¼Œæ‰€ä»¥å¤§çš„å…ƒç´ ï¼Œæ¨èä½¿ç”¨ä¼ªå…ƒç´ æ¥å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.row&#123;</span><br><span class="line">    content:&apos;&apos;,</span><br><span class="line">    display:block,</span><br><span class="line">    clear:both,</span><br><span class="line">    height:0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="clearä¸ºä»€ä¹ˆèƒ½æ¶ˆé™¤æµ®åŠ¨"><a href="#clearä¸ºä»€ä¹ˆèƒ½æ¶ˆé™¤æµ®åŠ¨" class="headerlink" title="clearä¸ºä»€ä¹ˆèƒ½æ¶ˆé™¤æµ®åŠ¨"></a>clearä¸ºä»€ä¹ˆèƒ½æ¶ˆé™¤æµ®åŠ¨</h4><p>å‚è€ƒclear åœ¨mdnå®˜ç½‘çš„è§£é‡Šï¼š æŒ‡å®šä¸€ä¸ªå…ƒç´ æ˜¯å¦å¿…é¡»ç§»åŠ¨(æ¸…é™¤æµ®åŠ¨å)åˆ°åœ¨å®ƒä¹‹å‰çš„æµ®åŠ¨å…ƒç´ ä¸‹é¢ã€‚<br>å› æ­¤åœ¨çˆ¶å…ƒç´ å†…ï¼Œæ”¾ç½®ä¸€ä¸ªå—çº§å…ƒç´ ï¼Œå¹¶ä¸”æ”¾ç½®åœ¨æµ®åŠ¨å…ƒç´ åé¢ï¼Œè®¾ç½®clearï¼šleftï¼rightï¼bothï¼›<br>æ­¤æ—¶æ­¤clearå…ƒç´ å°†ç§»åŠ¨åˆ°æµ®åŠ¨å…ƒç´ ä¸‹æ–¹ï¼Œç”±äºæ­¤clearå…ƒç´ å¤„äºçˆ¶å…ƒç´ æ–‡æ¡£æµå†…ï¼Œå°†è®©çˆ¶å…ƒç´ é«˜åº¦æ’‘å¼€åˆ°ä¸æµ®åŠ¨å…ƒç´ ä¸€æ ·é«˜ã€‚<br>è¾¾åˆ°æ¶ˆé™¤æµ®åŠ¨æ•ˆæœã€‚<br>è¯¦ç»†å‚è€ƒ<a href="https://juejin.im/post/59e7190bf265da4307025d91" target="_blank" rel="noopener">æ¸…é™¤æµ®åŠ¨çš„å››ç§æ–¹å¼åŠå…¶åŸç†ç†è§£</a></p><p><strong>clearæ¶ˆé™¤æµ®åŠ¨æ–¹å¼çš„æ­¥éª¤</strong></p><h4 id="åœ¨çˆ¶å…ƒç´ æœ€åº•éƒ¨æ”¾ç½®ä¸€ä¸ªå…ƒç´ "><a href="#åœ¨çˆ¶å…ƒç´ æœ€åº•éƒ¨æ”¾ç½®ä¸€ä¸ªå…ƒç´ " class="headerlink" title="åœ¨çˆ¶å…ƒç´ æœ€åº•éƒ¨æ”¾ç½®ä¸€ä¸ªå…ƒç´ "></a>åœ¨çˆ¶å…ƒç´ æœ€åº•éƒ¨æ”¾ç½®ä¸€ä¸ªå…ƒç´ </h4><h4 id="è®¾ç½®æ­¤å…ƒç´ clearå±æ€§"><a href="#è®¾ç½®æ­¤å…ƒç´ clearå±æ€§" class="headerlink" title="è®¾ç½®æ­¤å…ƒç´ clearå±æ€§"></a>è®¾ç½®æ­¤å…ƒç´ clearå±æ€§</h4><h4 id="è®¾ç½®æ­¤å…ƒç´ ä¸ºå—çº§å…ƒç´ "><a href="#è®¾ç½®æ­¤å…ƒç´ ä¸ºå—çº§å…ƒç´ " class="headerlink" title="è®¾ç½®æ­¤å…ƒç´ ä¸ºå—çº§å…ƒç´ "></a>è®¾ç½®æ­¤å…ƒç´ ä¸ºå—çº§å…ƒç´ </h4><h3 id="å…¼å®¹å†™æ³•-åé€€æœºåˆ¶"><a href="#å…¼å®¹å†™æ³•-åé€€æœºåˆ¶" class="headerlink" title="å…¼å®¹å†™æ³•(åé€€æœºåˆ¶)"></a>å…¼å®¹å†™æ³•(åé€€æœºåˆ¶)</h3><p>background-imageå†™ä¸¤éï¼Œæ˜¯ä¸ºäº†å…¼å®¹åé€€æœºåˆ¶å†™æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.item&#123;</span><br><span class="line">    background-image:url(./column.png); </span><br><span class="line">    background-image:url(./column.png), url(./column1.png), url(./column2.png); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="z-indexåªç”¨äºå®šä½å…ƒç´ "><a href="#z-indexåªç”¨äºå®šä½å…ƒç´ " class="headerlink" title="z-indexåªç”¨äºå®šä½å…ƒç´ "></a>z-indexåªç”¨äºå®šä½å…ƒç´ </h3><p>Z-index ä»…èƒ½åœ¨å®šä½å…ƒç´ ä¸Šå¥æ•ˆï¼ˆä¾‹å¦‚ position:absolute;ï¼‰ï¼<br>å¾ˆå¤šäººå°†å®ƒç”¨äºæ™®é€šå…ƒç´ ï¼Œæ²¡æ¯›ç—…ï¼Œå±äºç»å…¸åœ°çŠ¯é”™ã€‚</p><h3 id="ä¸ºä»€ä¹ˆline-heightè¢«é»˜è®¤æˆå…ƒç´ çš„heightäº†"><a href="#ä¸ºä»€ä¹ˆline-heightè¢«é»˜è®¤æˆå…ƒç´ çš„heightäº†" class="headerlink" title="ä¸ºä»€ä¹ˆline-heightè¢«é»˜è®¤æˆå…ƒç´ çš„heightäº†"></a>ä¸ºä»€ä¹ˆline-heightè¢«é»˜è®¤æˆå…ƒç´ çš„heightäº†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;wills-react-pro&lt;/title&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    .wrap&#123;</span><br><span class="line">      height: 30px;</span><br><span class="line">      background: blue;</span><br><span class="line">    &#125;</span><br><span class="line">    .test&#123;</span><br><span class="line">      line-height: 60px;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      background: red;</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;wrap&quot;&gt; </span><br><span class="line">      &lt;span style=&quot;line-height:20px;&quot;&gt;</span><br><span class="line">        test&lt;span class=&quot;test&quot;&gt;æœ€é«˜1&lt;/span&gt;çš„å€¼</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/css/line-height1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/css/line-height2.jpg" alt title class>                <p></p>            </figure><p>å¯ä»¥çœ‹åˆ°.test çš„spançš„é«˜åº¦å®Œå…¨è¢«å…¶line-heightæ‰€ç¡®å®šäº†ï¼Œå˜æˆ60pxï¼›<br>å…¶ä»–å®éªŒç»“æœæœ‰ï¼Œå½“ç»™.test çš„spanè®¾ç½®display: inline;spanä¸ºè¡Œå†…å…ƒç´ ï¼Œspanæ²¡æœ‰é«˜åº¦ï¼Œå…¶é«˜åº¦å˜æˆçˆ¶å±‚é«˜åº¦30px,ä½†æ˜¯spanä¾ç„¶ä¼šæ’‘å¼€60pxçš„ç©ºé—´ï¼š<br><figure class="image-box">                <img src="/image/css/line-height3.jpg" alt title class>                <p></p>            </figure></p><p>å°ç»“ï¼šå¯¹inlineè¿˜æ˜¯inline-blockï¼Œåœ¨æ²¡æœ‰å®šä¹‰å®ƒå¯¹heightæ—¶ï¼Œline-heightä¼šè¢«é»˜è®¤ä¸ºå…ƒç´ é«˜åº¦ï¼›<br>æ­¤æ—¶å¯ä»¥é€šè¿‡ç»™å…ƒç´ å®šä¹‰heightè¾¾åˆ°æŒ‡å®šé«˜åº¦çš„ç›®çš„ï¼Œä½†æ˜¯line-heightæ¯”heighté«˜çš„æƒ…å†µä¸‹ï¼Œä¾ç„¶ä¼šè®©å…ƒç´ å æ»¡line-heightçš„é«˜åº¦ã€‚</p><p>æ‰€ä»¥åœ¨å¼€å‘æ—¶ï¼Œé‡åˆ°å¾ˆå¤šå¥‡è‘©çš„å…ƒç´ é«˜åº¦ä»ä½•è€Œæ¥æ—¶ï¼Œä¸è¦æŒ‡æƒ³ç€heightï¼Œè®¤ä¸ºåœ¨è°·æ­Œæµè§ˆå™¨ä¸Šæ‰¾ä¸åˆ°heightå°±å¾ˆå¥‡æ€ªè¿™ä¸ªé«˜åº¦æ˜¯æ€ä¹ˆæ¥çš„ï¼Œä½ è¿˜éœ€æŸ¥çœ‹æ˜¯å¦æ˜¯å…¶line-heightç”Ÿæˆçš„heightã€‚<br>å¦å¤–ï¼Œä¸è¦éšæ„å®šä¹‰line-heightï¼Œå¯èƒ½ä¼šå¯¼è‡´æ„æƒ³ä¸åˆ°é—®é¢˜ã€‚</p><h3 id="è§†å£"><a href="#è§†å£" class="headerlink" title="è§†å£"></a>è§†å£</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>å‚è€ƒ åšå®¢ã€Šcsså¸ƒå±€ã€‹<br>è§†å£çš„ç‹¬æœ‰å°ºå¯¸ï¼Œvhï¼Œvwï¼Œ</p><h4 id="vh-vw-è¿ç”¨"><a href="#vh-vw-è¿ç”¨" class="headerlink" title="vh/vw è¿ç”¨"></a>vh/vw è¿ç”¨</h4><p>vhå…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ç›¸å¯¹è§†å£çš„1%çš„é•¿åº¦æ„æ€ã€‚<br>å‚è€ƒã€Šå››ç§å±…ä¸­æ–¹å¼ â€” è§†å£vhæ–¹æ³•ã€‹<br>å‚è€ƒã€Šåˆ†è¾¨ç‡\åƒç´ \è§†å£ ä¸ ç§»åŠ¨å¼€å‘ã€‹</p><h3 id="cssç¼–å†™çš„å»ºè®®"><a href="#cssç¼–å†™çš„å»ºè®®" class="headerlink" title="cssç¼–å†™çš„å»ºè®®"></a>cssç¼–å†™çš„å»ºè®®</h3><h4 id="å…³äºåª’ä½“æŸ¥è¯¢çš„ä½¿ç”¨"><a href="#å…³äºåª’ä½“æŸ¥è¯¢çš„ä½¿ç”¨" class="headerlink" title="å…³äºåª’ä½“æŸ¥è¯¢çš„ä½¿ç”¨"></a>å…³äºåª’ä½“æŸ¥è¯¢çš„ä½¿ç”¨</h4><p>å°†åª’ä½“æŸ¥è¯¢å½“åšæœ€åé€‰æ‹©ï¼Œå¦‚æœä½ é¡µé¢å¸ƒå±€è¶³å¤Ÿçµæ´»ï¼Œå¯èƒ½åªéœ€è¦å°‘é‡çš„åª’ä½“æŸ¥è¯¢å³å¯ï¼Œæ‰€ä»¥è§£å†³é—®é¢˜æ—¶ï¼Œä¼˜å…ˆçµæ´»è§£å†³ï¼Œç„¶åå†è€ƒè™‘åª’ä½“æŸ¥è¯¢ã€‚</p><h4 id="css-ä¹¦å†™åŸåˆ™"><a href="#css-ä¹¦å†™åŸåˆ™" class="headerlink" title="css ä¹¦å†™åŸåˆ™"></a>css ä¹¦å†™åŸåˆ™</h4><p>å°½é‡ä¸è¦ä½¿ç”¨id</p><h3 id="æµè½¬å—çš„ä¸‰ç§æ–¹å¼"><a href="#æµè½¬å—çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="æµè½¬å—çš„ä¸‰ç§æ–¹å¼"></a>æµè½¬å—çš„ä¸‰ç§æ–¹å¼</h3><ul><li>è®¾ç½®ï¼šdisplay:blockï¼›</li><li>å¯¹inlineå…ƒç´ è®¾ç½®floatï¼›</li><li>å¯¹inlineå…ƒç´ è®¾ç½®position:absolute/fixedï¼›<br>å¤§å®¶å¯¹ç¬¬ä¸€ç§ç†Ÿæ‚‰ï¼Œä½†æ²¡æƒ³åˆ°åé¢ä¸¤ç§ä¹Ÿå¯ä»¥æµè½¬å—ï¼›</li></ul><h3 id="vertical-alignã€è¡Œç›’å­ã€baseline"><a href="#vertical-alignã€è¡Œç›’å­ã€baseline" class="headerlink" title="vertical-alignã€è¡Œç›’å­ã€baseline"></a>vertical-alignã€è¡Œç›’å­ã€baseline</h3><p>å‚è€ƒåšå®¢ã€Švertical-alignã€è¡Œç›’å­ã€baselineã€‹</p><h3 id="åˆ†è¾¨ç‡-åƒç´ -è§†å£-ä¸-ç§»åŠ¨å¼€å‘"><a href="#åˆ†è¾¨ç‡-åƒç´ -è§†å£-ä¸-ç§»åŠ¨å¼€å‘" class="headerlink" title="åˆ†è¾¨ç‡\åƒç´ \è§†å£ ä¸ ç§»åŠ¨å¼€å‘"></a>åˆ†è¾¨ç‡\åƒç´ \è§†å£ ä¸ ç§»åŠ¨å¼€å‘</h3><p>å‚è€ƒåšå®¢ã€Šcssä¹‹ç§»åŠ¨å¼€å‘ã€‹</p><h3 id="cssä¹‹å¸ƒå±€"><a href="#cssä¹‹å¸ƒå±€" class="headerlink" title="cssä¹‹å¸ƒå±€"></a>cssä¹‹å¸ƒå±€</h3><p>å‚è€ƒåšå®¢ã€Šcssä¹‹å¸ƒå±€ã€‹</p><h3 id="inline-blockå…ƒç´ ä¹‹é—´çš„é—´éš™"><a href="#inline-blockå…ƒç´ ä¹‹é—´çš„é—´éš™" class="headerlink" title="inline-blockå…ƒç´ ä¹‹é—´çš„é—´éš™"></a>inline-blockå…ƒç´ ä¹‹é—´çš„é—´éš™</h3><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ä¸¤ä¸ªå…ƒç´ ä¹‹é—´ä¹¦å†™çš„æ—¶å€™æ²¡æœ‰ç´§æŒ¨ä¸€èµ·ï¼Œæˆ–è€…æœ‰æ¢è¡Œï¼Œä»è€Œå¯¼è‡´é—´éš™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;inline-block&quot;&gt;abc&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;inline-block&quot;&gt;abc&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h4 id="è®¾ç½®çˆ¶å…ƒç´ font-sizeï¼š0"><a href="#è®¾ç½®çˆ¶å…ƒç´ font-sizeï¼š0" class="headerlink" title="è®¾ç½®çˆ¶å…ƒç´ font-sizeï¼š0"></a>è®¾ç½®çˆ¶å…ƒç´ font-sizeï¼š0</h4><p>åœ¨çˆ¶äº²å…ƒç´ è®¾ç½®font-sizeä¸º0ï¼Œç„¶ååœ¨è‡ªå·±å…ƒç´ å†…è®¾ç½®å›æ¥ã€‚</p><h4 id="å°†å…ƒç´ ä¹¦å†™æ—¶ç´§æŒ¨ä¸€èµ·"><a href="#å°†å…ƒç´ ä¹¦å†™æ—¶ç´§æŒ¨ä¸€èµ·" class="headerlink" title="å°†å…ƒç´ ä¹¦å†™æ—¶ç´§æŒ¨ä¸€èµ·"></a>å°†å…ƒç´ ä¹¦å†™æ—¶ç´§æŒ¨ä¸€èµ·</h4><h4 id="è®¾ç½®å…ƒç´ ä¸ºfloat"><a href="#è®¾ç½®å…ƒç´ ä¸ºfloat" class="headerlink" title="è®¾ç½®å…ƒç´ ä¸ºfloat"></a>è®¾ç½®å…ƒç´ ä¸ºfloat</h4><p>åˆ©ç”¨floatå…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµçš„ç‰¹æ€§ã€‚</p><h3 id="transformä¸åæ ‡å˜æ¢"><a href="#transformä¸åæ ‡å˜æ¢" class="headerlink" title="transformä¸åæ ‡å˜æ¢"></a>transformä¸åæ ‡å˜æ¢</h3><p>å‚è€ƒã€ŠcssçŸ¥è¯†ç‚¹æ±‡ â€“ transformä¸åæ ‡å˜æ¢ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>d3çš„ä¸‰ç§æ¨¡å¼ åŠ appendã€dataã€selectAll</title>
      <link href="/2020/05/01/d3_basics/"/>
      <url>/2020/05/01/d3_basics/</url>
      
        <content type="html"><![CDATA[<p>è¿™é‡Œè®²è§£d3çš„ enter update exitä¸‰ç§æ¨¡å¼ï¼Œä»¥åŠ appendã€dataã€selectAllã€‚</p><h2 id="åŸºæœ¬ä»£ç "><a href="#åŸºæœ¬ä»£ç " class="headerlink" title="åŸºæœ¬ä»£ç "></a>åŸºæœ¬ä»£ç </h2><p>ä¸‹é¢ä»£ç éƒ½åŸºäºä»¥ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var svg = d3.select(&quot;body&quot;)</span><br><span class="line">                .append(&apos;svg&apos;)</span><br><span class="line">                .attr(&apos;width&apos;, 800)</span><br><span class="line">                .attr(&apos;height&apos;, 800);</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šæ˜¯d3å¸¸ç”¨å†™æ³•ï¼Œä¸‹é¢ç¤ºä¾‹çš†ä»¥æ­¤ä¸ºåŸºç¡€å±•å¼€ï¼š</p><h2 id="append"><a href="#append" class="headerlink" title="append"></a>append</h2><h3 id="å•ä¸ªä½¿ç”¨"><a href="#å•ä¸ªä½¿ç”¨" class="headerlink" title="å•ä¸ªä½¿ç”¨"></a>å•ä¸ªä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var new_circle = svg.append(&apos;circle&apos;)</span><br><span class="line">            .attr(&apos;cx&apos;, 250)</span><br><span class="line">            .attr(&apos;cy&apos;, 50)</span><br><span class="line">            .attr(&apos;r&apos;, 25)</span><br><span class="line">            .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/d3/circle1.jpg" alt title class>                <p></p>            </figure></p><h3 id="å¤šä¸ªä½¿ç”¨"><a href="#å¤šä¸ªä½¿ç”¨" class="headerlink" title="å¤šä¸ªä½¿ç”¨"></a>å¤šä¸ªä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 50)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br><span class="line">   svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 150)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line">   svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 250)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;orange&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle4.jpg" alt title class>                <p></p>            </figure></p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ç”±ä¸Šå¯çŸ¥appendå…¶å®å°±æ˜¯ç”¨æ¥æ·»åŠ å®é™…æ•ˆæœçš„ã€‚</p><h2 id="selectAll"><a href="#selectAll" class="headerlink" title="selectAll"></a>selectAll</h2><h3 id="åœ¨ä¸Šé¢ã€Šappendã€‹çš„ä»£ç ä¸Šå¢åŠ ï¼š"><a href="#åœ¨ä¸Šé¢ã€Šappendã€‹çš„ä»£ç ä¸Šå¢åŠ ï¼š" class="headerlink" title="åœ¨ä¸Šé¢ã€Šappendã€‹çš„ä»£ç ä¸Šå¢åŠ ï¼š"></a>åœ¨ä¸Šé¢ã€Šappendã€‹çš„ä»£ç ä¸Šå¢åŠ ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var new_circle = svg.selectAll(&apos;circle&apos;)</span><br><span class="line">        .attr(&apos;cx&apos;, 250)</span><br><span class="line">        .attr(&apos;cy&apos;, 100)</span><br><span class="line">        .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line">        .attr(&apos;r&apos;, 25)</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/d3/circle2.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç¤ºä¾‹äºŒ"><a href="#ç¤ºä¾‹äºŒ" class="headerlink" title="ç¤ºä¾‹äºŒ"></a>ç¤ºä¾‹äºŒ</h3><h4 id="åœ¨åŸºæœ¬ä»£ç ä¸Šå¢åŠ å¦‚ä¸‹ä»£ç "><a href="#åœ¨åŸºæœ¬ä»£ç ä¸Šå¢åŠ å¦‚ä¸‹ä»£ç " class="headerlink" title="åœ¨åŸºæœ¬ä»£ç ä¸Šå¢åŠ å¦‚ä¸‹ä»£ç "></a>åœ¨åŸºæœ¬ä»£ç ä¸Šå¢åŠ å¦‚ä¸‹ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 50)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br><span class="line">   svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 150)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;green&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle3.jpg" alt title class>                <p></p>            </figure></p><h4 id="å¢åŠ selectAllåï¼š"><a href="#å¢åŠ selectAllåï¼š" class="headerlink" title="å¢åŠ selectAllåï¼š"></a>å¢åŠ selectAllåï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">svg.selectAll(&apos;circle&apos;)</span><br><span class="line">             .attr(&apos;cx&apos;, 250)</span><br><span class="line">             .attr(&apos;cy&apos;, 350)</span><br><span class="line">             .attr(&apos;r&apos;, 25)</span><br><span class="line">             .attr(&apos;fill&apos;, &apos;yellowgreen&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle5.jpg" alt title class>                <p></p>            </figure></p><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ä¸Šé¢çš„ä¾‹å­éƒ½æ˜¯å•ç‹¬ä½¿ç”¨selectAllï¼Œæ²¡æœ‰ä½¿ç”¨data()ï¼Œæ­¤æ—¶selectAllé€‰ä¸­æ‰€æœ‰çš„åŒ¹é…ï¼Œè¿›è¡Œupdateï¼Œæ­¤æ—¶selectAllå°±æ˜¯ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¯¹selectAllè¿›è¡Œé“¾å¼æ“ä½œï¼Œå¯å°†æ‰€æœ‰è¢«å‘½ä¸­çš„æ”¹å†™ï¼ˆå¯ç§°ä¹‹ä¸ºupdateï¼‰</p><h2 id="data"><a href="#data" class="headerlink" title="data()"></a>data()</h2><h3 id="åœ¨åŸºæœ¬ä»£ç ä¸Šï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š"><a href="#åœ¨åŸºæœ¬ä»£ç ä¸Šï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š" class="headerlink" title="åœ¨åŸºæœ¬ä»£ç ä¸Šï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š"></a>åœ¨åŸºæœ¬ä»£ç ä¸Šï¼Œå¢åŠ å¦‚ä¸‹ä»£ç ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">                .attr(&apos;cx&apos;, 250)</span><br><span class="line">                .attr(&apos;cy&apos;, 50)</span><br><span class="line">                .attr(&apos;r&apos;, 25)</span><br><span class="line">                .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br><span class="line">    svg.append(&apos;circle&apos;)</span><br><span class="line">                .attr(&apos;cx&apos;, 250)</span><br><span class="line">                .attr(&apos;cy&apos;, 150)</span><br><span class="line">                .attr(&apos;r&apos;, 25)</span><br><span class="line">                .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line"></span><br><span class="line">var data = [10, 20];</span><br><span class="line">svg.selectAll(&apos;circle&apos;)</span><br><span class="line">                .data(data)</span><br><span class="line">                .attr(&apos;cx&apos;, 250)</span><br><span class="line">                .attr(&apos;cy&apos;, 350)</span><br><span class="line">                .attr(&apos;r&apos;, 25)</span><br><span class="line">                .attr(&apos;fill&apos;, &apos;yellowgreen&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle5.jpg" alt title class>                <p></p>            </figure></p><h3 id="ä¿®æ”¹dataæ•°ç»„-length-1"><a href="#ä¿®æ”¹dataæ•°ç»„-length-1" class="headerlink" title="ä¿®æ”¹dataæ•°ç»„ length=1"></a>ä¿®æ”¹dataæ•°ç»„ length=1</h3><p>ä¿®æ”¹ä»¥ä¸Šä»£ç ä¸­çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var data = [10];</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle8.jpg" alt title class>                <p></p>            </figure></p><h3 id="ä¿®æ”¹dataæ•°ç»„-length-0"><a href="#ä¿®æ”¹dataæ•°ç»„-length-0" class="headerlink" title="ä¿®æ”¹dataæ•°ç»„ length=0"></a>ä¿®æ”¹dataæ•°ç»„ length=0</h3><p>ä¿®æ”¹ä»¥ä¸Šä»£ç ä¸­çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var data = [];</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle3.jpg" alt title class>                <p></p>            </figure></p><h3 id="selectAll-ä¸-data-çš„å…³ç³»"><a href="#selectAll-ä¸-data-çš„å…³ç³»" class="headerlink" title="selectAll ä¸ data çš„å…³ç³»"></a>selectAll ä¸ data çš„å…³ç³»</h3><p>ç”±ä¸Šå¯çŸ¥ï¼ŒselectAll æ˜¯ä¸€æ¬¡æ€§å‘½ä¸­äº†æ‰€æœ‰ï¼Œå¦‚æœè¦å¯¹è¿™æ‰€æœ‰å¯¹å‘½ä¸­è¿›è¡Œè¿‡æ»¤ç­‰æ“ä½œï¼Œå°±ä½¿ç”¨data();<br>ä¸”ç»è¿‡data()æ“ä½œåï¼Œå°±æ‹¥æœ‰äº†enteræˆ–exitæ“ä½œæ–¹æ³•ï¼Œå½“ç„¶ä½ å¯ä»¥ä¸ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚<br>å› æ­¤è¯´ç™½äº†ï¼Œenterå’Œexitæ— éæ˜¯data()\selectAll()é€‰æ‹©æ•°æ®èƒ½åŠ›çš„å»¶ä¼¸ã€‚</p><h3 id="selectAll-data-enter-exit-çš„è”ç³»"><a href="#selectAll-data-enter-exit-çš„è”ç³»" class="headerlink" title="selectAll data enter exit çš„è”ç³»"></a>selectAll data enter exit çš„è”ç³»</h3><p>å‚è€ƒã€ŠselectAll ä¸ data çš„å…³ç³»ã€‹ï¼ŒselectAll data enter exitéƒ½æ˜¯æ•°æ®çš„é‡‡é›†å‘½ä¸­åŒ¹é…ã€‚</p><h2 id="enter"><a href="#enter" class="headerlink" title="enter"></a>enter</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><p>enter åŒ¹é… æ•°æ®å¤§äºå·²å­˜åœ¨æ—¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> var svg = d3.select(&quot;body&quot;)</span><br><span class="line">                 .append(&apos;svg&apos;)</span><br><span class="line">                 .attr(&apos;width&apos;, 800)</span><br><span class="line">                 .attr(&apos;height&apos;, 800);</span><br><span class="line">      </span><br><span class="line">var data = [10];</span><br><span class="line">svg.selectAll(&apos;circle&apos;)</span><br><span class="line">                .data(data)</span><br><span class="line">                .enter()</span><br><span class="line">                .append(&apos;circle&apos;)</span><br><span class="line">                .attr(&apos;cx&apos;, 250)</span><br><span class="line">                .attr(&apos;cy&apos;, 350)</span><br><span class="line">                .attr(&apos;r&apos;, 25)</span><br><span class="line">                .attr(&apos;fill&apos;, &apos;yellowgreen&apos;)</span><br></pre></td></tr></table></figure></p><h3 id="enter-è¦ä¸appendæ­é…ä½¿ç”¨"><a href="#enter-è¦ä¸appendæ­é…ä½¿ç”¨" class="headerlink" title="enter()è¦ä¸appendæ­é…ä½¿ç”¨"></a>enter()è¦ä¸appendæ­é…ä½¿ç”¨</h3><p>è§ä¸Šé¢ã€ŠåŸºæœ¬ç”¨æ³•ã€‹</p><h3 id="enter-ä¸ä¼š-æ”¹å˜å·²å­˜åœ¨çš„"><a href="#enter-ä¸ä¼š-æ”¹å˜å·²å­˜åœ¨çš„" class="headerlink" title="enter ä¸ä¼š æ”¹å˜å·²å­˜åœ¨çš„"></a>enter ä¸ä¼š æ”¹å˜å·²å­˜åœ¨çš„</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var new_circle = svg.append(&apos;circle&apos;)</span><br><span class="line">            .attr(&apos;cx&apos;, 250)</span><br><span class="line">            .attr(&apos;cy&apos;, 50)</span><br><span class="line">            .attr(&apos;r&apos;, 25)</span><br><span class="line">            .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br><span class="line">var data = [10, 20];</span><br><span class="line">var new_circle = svg.selectAll(&apos;circle&apos;)</span><br><span class="line">        .data(data)</span><br><span class="line">        .enter()</span><br><span class="line">        .append(&apos;circle&apos;)</span><br><span class="line">        .attr(&apos;cx&apos;, 250)</span><br><span class="line">        .attr(&apos;cy&apos;, 100)</span><br><span class="line">        .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line">        .attr(&apos;r&apos;, 25)</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/d3/circle3.jpg" alt title class>                <p></p>            </figure></p><h3 id="æ¯”è¾ƒå¥½çš„exitdemo"><a href="#æ¯”è¾ƒå¥½çš„exitdemo" class="headerlink" title="æ¯”è¾ƒå¥½çš„exitdemo"></a>æ¯”è¾ƒå¥½çš„exitdemo</h3><ul><li><a href="https://github.com/YeWills/nodemon-server-template/blob/d3-demo/pages/wangjingzhi/fifth.html" target="_blank" rel="noopener">demo 1</a>ï¼Œæ­¤demoæ˜¯ä¸€ä¸ªç®€å•æ•£ç‚¹å›¾ï¼Œå…¶ä¸­çš„å»æ‰å›¾ä¸­æ•£ç‚¹åŠŸèƒ½éå¸¸æ£’ã€‚</li></ul><h2 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h2><h3 id="ä¸ä½¿ç”¨exit"><a href="#ä¸ä½¿ç”¨exit" class="headerlink" title="ä¸ä½¿ç”¨exit"></a>ä¸ä½¿ç”¨exit</h3><p>åœ¨ä¸Šé¢ä»£ç ä¸Šå¢åŠ ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">            .attr(&apos;cx&apos;, 250)</span><br><span class="line">            .attr(&apos;cy&apos;, 50)</span><br><span class="line">            .attr(&apos;r&apos;, 25)</span><br><span class="line">            .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">            .attr(&apos;cx&apos;, 250)</span><br><span class="line">            .attr(&apos;cy&apos;, 150)</span><br><span class="line">            .attr(&apos;r&apos;, 25)</span><br><span class="line">            .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line">svg.append(&apos;circle&apos;)</span><br><span class="line">            .attr(&apos;cx&apos;, 250)</span><br><span class="line">            .attr(&apos;cy&apos;, 250)</span><br><span class="line">            .attr(&apos;r&apos;, 25)</span><br><span class="line">            .attr(&apos;fill&apos;, &apos;orange&apos;)</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle4.jpg" alt title class>                <p></p>            </figure></p><h3 id="ä½¿ç”¨exit"><a href="#ä½¿ç”¨exit" class="headerlink" title="ä½¿ç”¨exit"></a>ä½¿ç”¨exit</h3><p>åœ¨ä¸Šé¢ä»£ç ä¸ŠåŠ å…¥ä»¥ä¸‹ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var data = [10];</span><br><span class="line"> svg.selectAll(&apos;circle&apos;)</span><br><span class="line">             .data(data)</span><br><span class="line">             .exit()</span><br><span class="line">             //exitä¸ä¸appendä¸€èµ·ä½¿ç”¨,æ­¤å¤„ä¸èƒ½ä½¿ç”¨append</span><br><span class="line">             //.append(&apos;circle&apos;)</span><br><span class="line">             .attr(&apos;cx&apos;, 250)</span><br><span class="line">             .attr(&apos;cy&apos;, 350)</span><br><span class="line">             .attr(&apos;r&apos;, 25)</span><br><span class="line">             .attr(&apos;fill&apos;, &apos;yellowgreen&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle7.jpg" alt title class>                <p></p>            </figure></p><h3 id="exitä¸ä¸appendä¸€èµ·ä½¿ç”¨"><a href="#exitä¸ä¸appendä¸€èµ·ä½¿ç”¨" class="headerlink" title="exitä¸ä¸appendä¸€èµ·ä½¿ç”¨"></a>exitä¸ä¸appendä¸€èµ·ä½¿ç”¨</h3><p>ä½¿ç”¨ã€Šä½¿ç”¨exitã€‹ä»£ç ä¸­ï¼Œæ³¨é‡Šçš„éƒ¨åˆ†è§£æ³¨ï¼Œæ•ˆæœå°†æ˜¯ï¼š<br><figure class="image-box">                <img src="/image/d3/circle4.jpg" alt title class>                <p></p>            </figure><br>æ­¤æ—¶exitæ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚</p><h3 id="exitå°†ä¼šæ”¹å˜å·²å­˜åœ¨çš„"><a href="#exitå°†ä¼šæ”¹å˜å·²å­˜åœ¨çš„" class="headerlink" title="exitå°†ä¼šæ”¹å˜å·²å­˜åœ¨çš„"></a>exitå°†ä¼šæ”¹å˜å·²å­˜åœ¨çš„</h3><p>å‚è€ƒã€Šä½¿ç”¨exitã€‹</p><h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><h3 id="ç¤ºä¾‹ä¸€"><a href="#ç¤ºä¾‹ä¸€" class="headerlink" title="ç¤ºä¾‹ä¸€"></a>ç¤ºä¾‹ä¸€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> var svg = d3.select(&quot;body&quot;)</span><br><span class="line">                 .append(&apos;svg&apos;)</span><br><span class="line">                 .attr(&apos;width&apos;, 800)</span><br><span class="line">                 .attr(&apos;height&apos;, 800);</span><br><span class="line">    svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 50)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;green&apos;)</span><br><span class="line">   svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 150)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;orange&apos;)</span><br><span class="line">   svg.append(&apos;circle&apos;)</span><br><span class="line">               .attr(&apos;cx&apos;, 250)</span><br><span class="line">               .attr(&apos;cy&apos;, 250)</span><br><span class="line">               .attr(&apos;r&apos;, 25)</span><br><span class="line">               .attr(&apos;fill&apos;, &apos;black&apos;)</span><br><span class="line">      </span><br><span class="line">var data = [10];</span><br><span class="line">svg.selectAll(&apos;circle&apos;)</span><br><span class="line">                .data(data)</span><br><span class="line">                .attr(&apos;fill&apos;, &apos;blue&apos;)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/circle9.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç¤ºä¾‹äºŒ-1"><a href="#ç¤ºä¾‹äºŒ-1" class="headerlink" title="ç¤ºä¾‹äºŒ"></a>ç¤ºä¾‹äºŒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;default&lt;/p&gt;</span><br><span class="line">&lt;p&gt;default&lt;/p&gt;</span><br><span class="line">&lt;p&gt;default&lt;/p&gt;</span><br><span class="line">&lt;p&gt;default&lt;/p&gt;</span><br><span class="line">&lt;p&gt;default&lt;/p&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var data = [10, 20, 30];</span><br><span class="line">d3.selectAll(&apos;p&apos;)</span><br><span class="line">  .data(data)</span><br><span class="line">  .text(t=&gt;t)</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/update.jpg" alt title class>                <p></p>            </figure></p><h3 id="update-p-data-arr"><a href="#update-p-data-arr" class="headerlink" title="update = p.data(arr)"></a>update = p.data(arr)</h3><p>æ¯”å¦‚ç¤ºä¾‹äºŒå¯å†™æˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var data = [10, 20, 30];</span><br><span class="line">var update = d3.selectAll(&apos;p&apos;);</span><br><span class="line"></span><br><span class="line">update.data(data)</span><br><span class="line">  .text(t=&gt;t)</span><br></pre></td></tr></table></figure></p><p>å› æ­¤å¯è®¤ä¸º  update ç­‰äº data()æ–¹æ³•çš„ä¿®æ”¹ã€‚</p><h3 id="å°ç»“-2"><a href="#å°ç»“-2" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>é€šè¿‡ä¸Šé¢ä¾‹å­ï¼Œupdateå®é™…ä¸Šæ˜¯å…ƒç´ ä¸æ•°æ®ç»‘å®šæ—¶ï¼Œå…ƒç´ ä¸æ•°æ® çš„äº¤é›†éƒ¨åˆ†çš„æ›´æ–°ã€‚<br>è¿™ç§æƒ…å†µå°‘ã€‚</p><h2 id="å¤§è¯å„è€…ä¹‹é—´å…³ç³»"><a href="#å¤§è¯å„è€…ä¹‹é—´å…³ç³»" class="headerlink" title="å¤§è¯å„è€…ä¹‹é—´å…³ç³»"></a>å¤§è¯å„è€…ä¹‹é—´å…³ç³»</h2><h3 id="é€‰æ‹©é›†-select-selectAll"><a href="#é€‰æ‹©é›†-select-selectAll" class="headerlink" title="é€‰æ‹©é›† - select selectAll"></a>é€‰æ‹©é›† - select selectAll</h3><h3 id="æ•°æ®ç»‘å®š-selection-data"><a href="#æ•°æ®ç»‘å®š-selection-data" class="headerlink" title="æ•°æ®ç»‘å®š - selection.data()"></a>æ•°æ®ç»‘å®š - selection.data()</h3><h3 id="æ•°æ®ç»‘å®šçš„é€‰æ‹©é›†-enter-exit"><a href="#æ•°æ®ç»‘å®šçš„é€‰æ‹©é›†-enter-exit" class="headerlink" title="æ•°æ®ç»‘å®šçš„é€‰æ‹©é›† - enter exit"></a>æ•°æ®ç»‘å®šçš„é€‰æ‹©é›† - enter exit</h3><h3 id="DOMæ“ä½œ-attr-append-insert"><a href="#DOMæ“ä½œ-attr-append-insert" class="headerlink" title="DOMæ“ä½œ - attr append insert"></a>DOMæ“ä½œ - attr append insert</h3><h3 id="è¿œç¨‹åŠ è½½æ•°æ®-d3-josn"><a href="#è¿œç¨‹åŠ è½½æ•°æ®-d3-josn" class="headerlink" title="è¿œç¨‹åŠ è½½æ•°æ® d3.josn()"></a>è¿œç¨‹åŠ è½½æ•°æ® d3.josn()</h3><h2 id="åº”ç”¨demo"><a href="#åº”ç”¨demo" class="headerlink" title="åº”ç”¨demo"></a>åº”ç”¨demo</h2><h3 id="æŸ±çŠ¶å›¾demo"><a href="#æŸ±çŠ¶å›¾demo" class="headerlink" title="æŸ±çŠ¶å›¾demo"></a><a href="https://github.com/YeWills/nodemon-server-template/blob/d3-demo/pages/d3-jt-book/chapter4/4.8/4-8-2-update-data.html" target="_blank" rel="noopener">æŸ±çŠ¶å›¾demo</a></h3><p>æ­¤demoéå¸¸ç®€çŸ­ï¼Œå¯¹enter update exitç†è§£éå¸¸æœ‰å¸®åŠ©ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://v.youku.com/v_show/id_XNDE3MTEwNDE4OA==.html?refer=seo_operation.liuxiao.liux_00003303_3000_Qzu6ve_19042900" target="_blank" rel="noopener">å½»åº•å¼„æ‡‚ D3js enter update exit æ˜¯å’‹å›äº‹</a></p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> d3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssä¹‹ç§»åŠ¨å¼€å‘</title>
      <link href="/2020/05/01/css_mobile/"/>
      <url>/2020/05/01/css_mobile/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†è¾¨ç‡ä¸åƒç´ "><a href="#åˆ†è¾¨ç‡ä¸åƒç´ " class="headerlink" title="åˆ†è¾¨ç‡ä¸åƒç´ "></a>åˆ†è¾¨ç‡ä¸åƒç´ </h2><p>è¿™æ˜¯ä¸‰æ˜Ÿ GALAXY S5 æ‰‹æœº<br><figure class="image-box">                <img src="/image/css_mobile/mobile1.jpg" alt title class>                <p></p>            </figure></p><h3 id="pixelså•è¯å«ä¹‰"><a href="#pixelså•è¯å«ä¹‰" class="headerlink" title="pixelså•è¯å«ä¹‰"></a>pixelså•è¯å«ä¹‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pixels //æ­¤å•è¯å«ä¹‰ä¸ºï¼šåƒç´ </span><br></pre></td></tr></table></figure><p>æ‰€ä»¥pxï¼ŒæŒ‡å¾—å°±æ˜¯åƒç´ ã€‚</p><h3 id="ç‰©ç†åƒç´ -ä¸-åˆ†è¾¨ç‡"><a href="#ç‰©ç†åƒç´ -ä¸-åˆ†è¾¨ç‡" class="headerlink" title="ç‰©ç†åƒç´  ä¸ åˆ†è¾¨ç‡"></a>ç‰©ç†åƒç´  ä¸ åˆ†è¾¨ç‡</h3><h4 id="ç‰©ç†åƒç´ "><a href="#ç‰©ç†åƒç´ " class="headerlink" title="ç‰©ç†åƒç´ "></a>ç‰©ç†åƒç´ </h4><p>ä¸Šå›¾ä¸­1920X1080åƒç´ ï¼Œå…¶å®å°±æ˜¯1920pxX1080pxï¼›å¦‚ä¸‹å›¾ï¼š<br><figure class="image-box">                <img src="/image/css_mobile/mobile2.jpg" alt title class>                <p></p>            </figure><br>æ²¡é”™ï¼Œè¿™ä¸ªåƒç´ å°±æ˜¯(è®¾å¤‡)ç‰©ç†åƒç´ (physical pixels)ï¼Œå®ƒçš„å•ä½ä¹Ÿæ˜¯pxã€‚(æ³¨æ„ï¼Œè¿™ä¸ªpx é cssä¸­ä½¿ç”¨çš„pxï¼Œåé¢æœ‰è®²è§£)ã€‚<br>ä¸Šå›¾è¡¨é¢ï¼Œè¿™ä¸ªæ‰‹æœº æ¨ªå‘çš„ç‰©ç†åƒç´ ä¸º 1080px; ç«–å‘çš„ç‰©ç†åƒç´ ä¸º 1920pxï¼›<br>ç‰©ç†åƒç´ æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„å•ä½ï¼Œä¸ç°å®å½“ä¸­çš„å˜ç±³ï¼Œæ¯«ç±³æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼Œç‰©ç†åƒç´ ï¼Œèƒ½å¤§èƒ½å°ï¼Œéšä¸åŒè®¾å¤‡å˜åŒ–ã€‚<br>(è®¾å¤‡)ç‰©ç†åƒç´ ï¼Œ1pxè¡¨ç¤ºå¦‚ä¸‹å›¾çš„ä¸€ä¸ªå°æ–¹å—ï¼š<br><figure class="image-box">                <img src="/image/css_mobile/img.jpg" alt title class>                <p></p>            </figure><br>ä¸Šå›¾ä¸­Device pixelsè¯´çš„å°±æ˜¯ç‰©ç†åƒç´  (ç‰©ç†åƒç´ è‹±æ–‡åè‚¯å®šæ˜¯physical pixelsï¼Œè¿™æ¯«æ— ç–‘é—®ï¼Œä½†å¯¹æ˜¯å¦æ˜¯Device pixelsè¿˜å­˜ä¸€äº›è€ƒè¯ï¼Œä¸‹é¢ç« èŠ‚åšäº†ä¸€äº›è¡¥å……ã€Šåˆ«å â€“ Device pixelsã€‹)ã€‚</p><h4 id="åˆ†è¾¨ç‡"><a href="#åˆ†è¾¨ç‡" class="headerlink" title="åˆ†è¾¨ç‡"></a>åˆ†è¾¨ç‡</h4><p>å±å¹•åˆ†è¾¨ç‡ä¸ºï¼š1920*1080pxï¼›å±å¹•åˆ†è¾¨ç‡å…¶å®å°±æ˜¯æ¨ªå‘å’Œç«–å‘ç‰©ç†åƒç´ çš„ç»„åˆè¡¨è¾¾çš„ã€‚å› æ­¤ï¼š<br>(å±å¹•)åˆ†è¾¨ç‡æ˜¯ç”±æ¨ªå‘å’Œç«–å‘çš„ç‰©ç†åƒç´ å€¼è¡¨ç¤ºçš„ä¸€ç§å±å¹•å‚è€ƒã€‚</p><h4 id="åˆ†è¾¨ç‡ä¸ç­‰åŒäºç‰©ç†åƒç´ "><a href="#åˆ†è¾¨ç‡ä¸ç­‰åŒäºç‰©ç†åƒç´ " class="headerlink" title="åˆ†è¾¨ç‡ä¸ç­‰åŒäºç‰©ç†åƒç´ "></a>åˆ†è¾¨ç‡ä¸ç­‰åŒäºç‰©ç†åƒç´ </h4><p>ç”±ä¸Šåˆ†è¾¨ç‡çš„æ¦‚å¿µï¼Œå±å¹•åˆ†è¾¨ç‡ä¸ç­‰åŒäºç‰©ç†åƒç´ ã€‚</p><h3 id="dpr-ä¸-cssåƒç´ "><a href="#dpr-ä¸-cssåƒç´ " class="headerlink" title="dpr ä¸ cssåƒç´ "></a>dpr ä¸ cssåƒç´ </h3><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>dpr (devicePixelRatio)ï¼Œè®¾å¤‡åƒç´ æ¯”ã€‚<br>æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¼šå‘ç°GALAXY S5çš„å±å¹•æ˜¯ 360pxX640pxï¼š<br><figure class="image-box">                <img src="/image/css_mobile/dpr.jpg" alt title class>                <p></p>            </figure></p><p>GALAXY S5 çš„æ¨ªå‘ç‰©ç†åƒç´ æ˜¯1080px,ä¸ºä»€ä¹ˆåœ¨ä¸Šå›¾ä¸­å°±å˜æˆ360pxäº†å‘¢ï¼Ÿ<br>åŸæ¥ï¼Œæ‰‹æœºå‚å•†åœ¨æ‰‹æœºå‡ºå‚æ—¶ï¼Œä¸ºæ¯ä¸ªæ‰‹æœºæä¾›äº†ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯dprï¼Œé€šè¿‡window.devicePixelRatioè·å–ã€‚<br>æ ¹æ®MDNçš„è§£é‡Šï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpr = ç‰©ç†åƒç´ /cssåƒç´ </span><br></pre></td></tr></table></figure></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio" target="_blank" rel="noopener">MDNçš„è§£é‡ŠåŸæ–‡</a>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The Window property devicePixelRatio returns the ratio of the resolution in physical pixels (ç‰©ç†åƒç´ ) to the resolution in CSS pixels (cssåƒç´ ) for the current display device.</span><br></pre></td></tr></table></figure></p><p>å› æ­¤ï¼Œæ‹¿åˆ°ä¸€ä¸ªæ‰‹æœºçš„åˆ†è¾¨ç‡åï¼Œå†é€šè¿‡window.devicePixelRatio è·å–dpråï¼Œå°±çŸ¥é“è¿™ä¸ªæ‰‹æœºåœ¨å‰ç«¯å¼€å‘æ—¶ï¼Œå®ƒçš„cssåƒç´ çš„ å®½é«˜ã€‚</p><h4 id="dpræ˜¯è”ç³»åˆ†è¾¨ç‡ä¸cssåƒç´ çš„æ¡¥æ¢"><a href="#dpræ˜¯è”ç³»åˆ†è¾¨ç‡ä¸cssåƒç´ çš„æ¡¥æ¢" class="headerlink" title="dpræ˜¯è”ç³»åˆ†è¾¨ç‡ä¸cssåƒç´ çš„æ¡¥æ¢"></a>dpræ˜¯è”ç³»åˆ†è¾¨ç‡ä¸cssåƒç´ çš„æ¡¥æ¢</h4><p>ç”±ä¸Šå¯çŸ¥ï¼Œå¦‚ä½•è®©åˆ†è¾¨ç‡ä¸ºå‰ç«¯æŠ€æœ¯æ‰€ç”¨ï¼Œå°±æ˜¯é€šè¿‡æ‰‹æœºå‚å•†å®šä¹‰çš„dprï¼ŒæŠŠåˆ†è¾¨ç‡å˜æˆæˆ‘ä»¬å‰ç«¯å¯ä»¥ç†è§£çš„cssåƒç´ ã€‚</p><h4 id="cssåƒç´ "><a href="#cssåƒç´ " class="headerlink" title="cssåƒç´ "></a>cssåƒç´ </h4><p>ä»¥ä¸Šä»€ä¹ˆåˆ†è¾¨ç‡ï¼Œç‰©ç†åƒç´ ï¼Œé€šé€šæˆ‘ä»¬éƒ½ä¸ç†Ÿæ‚‰ï¼Œéƒ½ä¸å‰ç«¯å¼€å‘æ— å…³ï¼Œå› ä¸ºä»–ä»¬ä¸æ˜¯å‰ç«¯æŠ€æœ¯çš„åº¦é‡èŒƒç•´ï¼Œæ­¤æ—¶è¯´åˆ°cssåƒç´ ï¼Œæ˜¯ä¸æ˜¯å€æ„Ÿäº²åˆ‡äº†ï¼Œ<br>å®ƒå°±æ˜¯æˆ‘ä»¬æ—¥å¸¸ç”¨çš„pxï¼Œä¸Šé¢éƒ¨åˆ†è¯´çš„cssåƒç´ å°±æ˜¯è¿™ä¸ªä¸œè¥¿ã€‚<br>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸ª100pxå°±æ˜¯cssåƒç´ </span><br><span class="line">.wrap&#123;</span><br><span class="line">    width:100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="dprä¸cssåƒç´ å…³ç³»"><a href="#dprä¸cssåƒç´ å…³ç³»" class="headerlink" title="dprä¸cssåƒç´ å…³ç³»"></a>dprä¸cssåƒç´ å…³ç³»</h4><p>åœ¨iPhone4ä¹‹å‰ï¼Œæ‰‹æœºçš„dprä¸€èˆ¬éƒ½æ˜¯1ï¼Œé‚£æ—¶å€™æ‰‹æœºçš„ç‰©ç†åƒç´ å°±æ˜¯cssåƒç´ ã€‚<br>éšç€iPhone4åŠä»¥åé«˜æ¸…å±çš„å‡ºç°ï¼Œdprå¼€å§‹å¤§äº1ï¼Œç›®å‰dpråœºæ™¯å€¼ä¸º 1ã€1.5ã€2ã€3ã€‚</p><h4 id="iPhone4æ˜¯Retinaå±"><a href="#iPhone4æ˜¯Retinaå±" class="headerlink" title="iPhone4æ˜¯Retinaå±"></a>iPhone4æ˜¯Retinaå±</h4><p>ä»iPhone4å¼€å§‹ï¼ŒåŠä»¥åçš„iPhoneéƒ½æ˜¯Retinaå±ã€‚<a href="https://baike.baidu.com/item/Retina/4616695?fr=aladdin" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="æ”¾å¤§2å€è¿˜æ˜¯4å€ï¼Ÿ"><a href="#æ”¾å¤§2å€è¿˜æ˜¯4å€ï¼Ÿ" class="headerlink" title="æ”¾å¤§2å€è¿˜æ˜¯4å€ï¼Ÿ"></a>æ”¾å¤§2å€è¿˜æ˜¯4å€ï¼Ÿ</h3><p>ä¸‹å›¾ å·¦ä¾§æ˜¯dpr=1ï¼Œå³ä¾§dpr=2ï¼›<br>è¿™é‡Œçš„æ”¾å¤§å‡ å€åŸºäºç‰©ç†åƒç´ (è‹±æ–‡å¯ä»¥æ˜¯physical pixels æˆ– Device pixels )è€Œè¨€ï¼Œ<br>ä¸€ä¸ªcssåƒç´ ä¸º2X2pxçš„å…ƒç´ ã€‚<br>dpr=1ä¸‹ï¼Œç‰©ç†åƒç´ æ˜¯ 2X2pxï¼›<br>dpr=2ä¸‹ï¼Œç‰©ç†åƒç´ æ˜¯ 4X4pxï¼›<br><figure class="image-box">                <img src="/image/css_mobile/img.jpg" alt title class>                <p></p>            </figure><br>dpr=2ä¸‹ï¼ŒåŸæ¥çš„1å°æ–¹å—å˜æˆ4ä¸ªæ–¹å—è¡¨ç¤ºï¼Œå¥½åƒæ˜¯æ”¾å¤§äº†å››å€ï¼Œå…¶å®ä¸ç„¶ï¼Œ<br>1ä¸ªæ–¹å—å¯ä»¥å†™æˆï¼š1X1px;<br>4ä¸ªæ–¹å—å¯ä»¥å†™æˆï¼š2X2pxï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å…¶å®å°±æ˜¯æ”¾å¤§2å€</span><br><span class="line">(2*2px)/(1*1px) === 2</span><br><span class="line"></span><br><span class="line">//å…¶å®è¿˜æ˜¯æ”¾å¤§2å€</span><br><span class="line">(4*4px)/(2*2px) === 2</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥dpr=2æ—¶ç›¸æ¯”dpr=1æ—¶ï¼Œåªæ˜¯æ”¾å¤§äº†ä¸¤å€ã€‚<br>ä¸‹é¢è®²åˆ°çš„å“åº”å¼è®¾è®¡æ—¶ï¼Œç”¨åˆ°åª’ä½“æŸ¥è¯¢ï¼Œéœ€è¦UIæ ¹æ®dprè®¾è®¡ä¸åŒå€ç‡çš„å›¾ç‰‡ï¼Œéœ€è¦å¤šå°‘å€çš„å›¾ç‰‡ï¼Œç”±ä¸Šé¢å°±çŸ¥é“äº†ã€‚</p><h3 id="å¤šå€å›¾å“åº”å¼è®¾è®¡"><a href="#å¤šå€å›¾å“åº”å¼è®¾è®¡" class="headerlink" title="å¤šå€å›¾å“åº”å¼è®¾è®¡"></a>å¤šå€å›¾å“åº”å¼è®¾è®¡</h3><p>å½“dprå¤§äº1æ˜¯ï¼Œå®¹æ˜“å‡ºç°å›¾ç‰‡æ¨¡ç³Šçš„é—®é¢˜ï¼Œä»¥iPhone6ä¸ºä¾‹:<br>iPnone6å‚æ•°ï¼š<br><figure class="image-box">                <img src="/image/css_mobile/flex.jpg" alt title class>                <p></p>            </figure><br>iPnone6 çš„ dprä¸º2ï¼Œå¯¹åº”çš„å±å¹•çš„cssåƒç´ å°ºå¯¸ä¸ºï¼š375X667pxï¼›<br>ç”±å›¾ç‰‡å¯çŸ¥ï¼Œi6çš„æ¨ªå‘ç‰©ç†åƒç´ ä¸º750pxï¼Œæ­¤æ—¶ï¼Œå¦‚æœåœ¨htmlé¡µé¢å®šä¹‰å±•ç¤ºä¸€ä¸ªimg{width:375px}çš„å›¾ç‰‡ï¼Œ<br>i6åœ¨å±•ç¤ºæ—¶å› ä¸ºä¼šå°†æ­¤å›¾ç‰‡æ‹‰ä¼¸ä¸¤å€ï¼Œå¯¼è‡´å›¾ç‰‡å¤±çœŸã€‚è§£å†³çš„æ–¹æ³•æ˜¯ï¼Œè®©UIè®¾è®¡ä¸€ä¸ª750pxçš„å›¾ç‰‡ï¼Œé¿å…å¤±çœŸï¼Œ<br>è¿™é‡Œè§£é‡Šå¤±çœŸå¯èƒ½æœ‰äº›ç‰µå¼ºï¼Œå§‘ä¸”è¿™æ ·ç†è§£å§ï¼Œä¹Ÿæˆ–è€…ç®€å•ç†è§£æˆï¼Œå‡¡æ˜¯dprå¤§äº1çš„æ‰‹æœºï¼Œ<strong>åªè¦æä¾›ä¸æ‰‹æœºç‰©ç†åƒç´ ä¸ä¸€è‡´çš„å›¾ç‰‡,æ˜¾ç¤ºæ—¶éƒ½ä¼šå¤±çœŸï¼›</strong><br>ä¸ç”¨å¤ªç©·ç©¶ä¸ºä»€ä¹ˆè¦å¤±çœŸï¼ŒçŸ¥é“è¿™æ ·ä¼šå¤±çœŸå°±è¡Œã€‚å¦‚æœå¯¹å¤±çœŸæœ‰å…´è¶£ï¼Œå»ç½‘ä¸Šæœç´¢ï¼Œå¾ˆå¤šèµ„æºã€‚</p><p>é«˜æ¸…æ—¶ï¼Œä¸€èˆ¬ä¹Ÿå°±å›¾ç‰‡è¿™ç§å¤±çœŸçš„æƒ…å†µï¼Œå…¶ä»–è¿˜å¥½ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªå›¾ç‰‡å¤±çœŸï¼Œä¸€èˆ¬é‡‡ç”¨åª’ä½“æŸ¥è¯¢æ–¹å¼ã€‚</p><h4 id="å¦‚ä½•æ‰å›¾ç‰‡ä¸å¤±çœŸ"><a href="#å¦‚ä½•æ‰å›¾ç‰‡ä¸å¤±çœŸ" class="headerlink" title="å¦‚ä½•æ‰å›¾ç‰‡ä¸å¤±çœŸ"></a>å¦‚ä½•æ‰å›¾ç‰‡ä¸å¤±çœŸ</h4><p>ç”±ä¸Šé¢æ¨æµ‹å¯çŸ¥ï¼Œ<strong>åªæœ‰UIç»™çš„å›¾ç‰‡ä¸æ‰‹æœºçš„ç‰©ç†åƒç´ ç›¸ç­‰æ—¶æ‰ä¸å¤±çœŸ</strong>ï¼Œ<br>æ¯”å¦‚ï¼Œæˆ‘åœ¨htmlä¸Šå®šä¹‰äº†ä¸€ä¸ª100px cssåƒç´ çš„å›¾ç‰‡ï¼›<br>æ‰‹æœºçš„dprä¸º2ï¼›<br>æ­¤æ—¶è¿™ä¸ª100px cssåƒç´ ï¼Œå¯¹åº”çš„æ˜¯ 100*2=200px çš„ç‰©ç†åƒç´ å°ºå¯¸ã€‚<br>æ­¤æ—¶åªæœ‰UIæä¾›200pxçš„å›¾ç‰‡æ”¾åœ¨ä¸Šé¢çš„HTMlä¸Šæ‰ä¸å¤±çœŸã€‚</p><h4 id="åª’ä½“æŸ¥è¯¢"><a href="#åª’ä½“æŸ¥è¯¢" class="headerlink" title="åª’ä½“æŸ¥è¯¢"></a>åª’ä½“æŸ¥è¯¢</h4><p>è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼Œè¯¦ç»†çš„å¯ç½‘ä¸Šæœç´¢ï¼š<br>ä¸»è¦æ€è·¯ï¼Œå°±æ˜¯è®©UIæä¾›å‡ ç§ä¸åŒå°ºå¯¸çš„å›¾ç‰‡ï¼Œé€šè¿‡åª’ä½“æŸ¥è¯¢æ–¹å¼çµæ´»ä½¿ç”¨ã€‚<a href="https://www.cnblogs.com/sese/p/5977486.html" target="_blank" rel="noopener">å‚è€ƒ</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.css&#123;/* æ™®é€šæ˜¾ç¤ºå±(è®¾å¤‡åƒç´ æ¯”ä¾‹å°äºç­‰äº1.3)ä½¿ç”¨1å€çš„å›¾ */ </span><br><span class="line">    background-image: url(img_1x.png);</span><br><span class="line">&#125;</span><br><span class="line">@media only screen and (-webkit-min-device-pixel-ratio:1.5),</span><br><span class="line">       (min-resolution: 1.5dppx)&#123;</span><br><span class="line">            .css&#123;/* é«˜æ¸…æ˜¾ç¤ºå±(è®¾å¤‡åƒç´ æ¯”ä¾‹å¤§äºç­‰äº1.5)ä½¿ç”¨2å€å›¾  */</span><br><span class="line">                background-image: url(img_2x.png);</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åª’ä½“æŸ¥è¯¢è®¾å¤‡åƒç´ æ¯”ä¸»è¦æŸ¥è¯¢ min-resolution,è€Œwebkit-min-device-pixel-ratioæ˜¯ä¸€ä¸ªæ„æ€ï¼Œä¸ºäº†å…¼å®¹safariã€‚è§ã€Šç²¾é€šcssã€‹P233<br>å½“ç„¶ï¼Œè§£å†³å¤±çœŸçš„æ–¹å¼è¿˜æœ‰jsæˆ–svgçŸ¢é‡å›¾çš„æ–¹å¼ã€‚</p><h3 id="ppi"><a href="#ppi" class="headerlink" title="ppi"></a>ppi</h3><p>ppi:å±å¹•åƒç´ å¯†åº¦,è¿™ä¸ªæ¦‚å¿µå…¶å®ä¸å‰ç«¯å¼€å‘æ— å…³ï¼Œå¯ä»¥ä¸ç”¨è¿‡å¤šäº†è§£ã€‚<br>åªæ˜¯æœ€ä¸Šé¢çš„å›¾ç‰‡ä¸­æåˆ°äº†GALAXY S5 çš„åƒç´ å¯†åº¦ï¼Œå…·ä½“å…¬å¼å¦‚ä¸‹ï¼Œ<a href="https://www.jianshu.com/p/c3387bcc4f6e" target="_blank" rel="noopener">è¯¦ç»†äº†è§£ç‚¹å‡»è¿™é‡Œ</a>ï¼š<br><figure class="image-box">                <img src="/image/css_mobile/ppi.jpg" alt title class>                <p></p>            </figure></p><h3 id="åˆ«å"><a href="#åˆ«å" class="headerlink" title="åˆ«å"></a>åˆ«å</h3><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>ä¸‹é¢åˆ—ä¸¾äº†å¦‚ è®¾å¤‡ç‹¬ç«‹åƒç´ ã€ä»€ä¹ˆå…¶ä»–åƒç´ â€¦è¿™äº›ç»Ÿç»Ÿä¸è¦ç®¡ï¼Œä¸å‰ç«¯å¼€å‘æ— å…³ï¼Œä¸å‰ç«¯å¼€å‘æœ‰å…³çš„ä¸œè¥¿ï¼Œä¸Šé¢å·²ç»å•ç‹¬åˆ—å‡ºè®²è§£ã€‚<br>åœ¨è¿™é‡Œå†™ä¸€äº›åˆ«åï¼Œåªæ˜¯ä¸ºäº†åœ¨é˜…è¯»åˆ«äººçš„æ–‡æ–‡ç« æ—¶ï¼Œä»–ä»¬å†™å‡ºè¿™äº›åè¯ä½ çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œé¿å…çœ‹ä¸æ‡‚å…¶ä»–äººçš„æ–‡ç« ã€‚</p><h4 id="è®¾å¤‡ç‹¬ç«‹åƒç´ "><a href="#è®¾å¤‡ç‹¬ç«‹åƒç´ " class="headerlink" title="è®¾å¤‡ç‹¬ç«‹åƒç´ "></a>è®¾å¤‡ç‹¬ç«‹åƒç´ </h4><p>æœ‰å¾ˆå¤šåœ°æ–¹å°† dpr = ç‰©ç†åƒç´  /è®¾å¤‡ç‹¬ç«‹åƒç´ ;<br>æ˜¾ç„¶è¿™é‡Œ å°†è®¾å¤‡ç‹¬ç«‹åƒç´ çœ‹æˆæ˜¯cssåƒç´ äº†ã€‚æˆ‘è¿™é‡Œä¸è¯´å¯¹ä¸å¯¹ï¼Œè¿™é‡Œåªæ˜¯è®©å¤§å®¶çŸ¥é“<strong>è®¾å¤‡ç‹¬ç«‹åƒç´  æŠŠå®ƒç®€å•è®¤ä¸ºæ˜¯ cssåƒç´ å°±å¥½ï¼Œä¸å¿…æ·±ç©¶ã€‚</strong>å…³äºdprçš„å®šä¹‰è¿˜æ˜¯ä»¥MDNç½‘å€å®šä¹‰ä¸ºå‡†ï¼Œè¯·çœ‹ä¸Šæ–‡ã€Šdpr ä¸ cssåƒç´ ã€‹<br><a href="https://www.jianshu.com/p/3d28f4959c5a?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">å‚è§</a></p><p>æˆ‘ä»¬å†çœ‹ å®ƒçš„å®šä¹‰ï¼š<br><a href="https://www.cnblogs.com/jiangzilong/p/6700023.html" target="_blank" rel="noopener">è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼ˆDevice Independent Pixelï¼‰ï¼šä¸è®¾å¤‡æ— å…³çš„é€»è¾‘åƒç´ ï¼Œä»£è¡¨å¯ä»¥é€šè¿‡ç¨‹åºæ§åˆ¶ä½¿ç”¨çš„è™šæ‹Ÿåƒç´ ï¼Œæ˜¯ä¸€ä¸ªæ€»ä½“æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†CSSåƒç´ </a></p><h4 id="è®¾å¤‡æ— å…³çš„åƒç´ "><a href="#è®¾å¤‡æ— å…³çš„åƒç´ " class="headerlink" title="è®¾å¤‡æ— å…³çš„åƒç´ "></a>è®¾å¤‡æ— å…³çš„åƒç´ </h4><p>å‚è€ƒã€Šè®¾å¤‡ç‹¬ç«‹åƒç´ ã€‹ã€‚<br>è®¾å¤‡æ— å…³çš„åƒç´  å…¶å®å°±æ˜¯ è®¾å¤‡ç‹¬ç«‹åƒç´  çš„è¯´æ³•ï¼Œä¸‹é¢å…¬å¼æ˜¯ç›¸ç­‰çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CSSåƒç´  =è®¾å¤‡ç‹¬ç«‹åƒç´  = è®¾å¤‡æ— å…³çš„åƒç´ </span><br></pre></td></tr></table></figure></p><h4 id="é€»è¾‘åƒç´ "><a href="#é€»è¾‘åƒç´ " class="headerlink" title="é€»è¾‘åƒç´ "></a>é€»è¾‘åƒç´ </h4><p><a href="https://www.jianshu.com/p/3d28f4959c5a?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">è¿™ç¯‡æ–‡ç« æåˆ°:</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CSSåƒç´  =è®¾å¤‡ç‹¬ç«‹åƒç´  = é€»è¾‘åƒç´ </span><br></pre></td></tr></table></figure></p><h4 id="è®¾å¤‡åƒç´ "><a href="#è®¾å¤‡åƒç´ " class="headerlink" title="è®¾å¤‡åƒç´ "></a>è®¾å¤‡åƒç´ </h4><p>è®¾å¤‡åƒç´ ä¹Ÿæ˜¯ç‰©ç†åƒç´ ï¼Œç‰©ç†åƒç´ å…¨ç§°ï¼Œè®¾å¤‡ç‰©ç†åƒç´ ï¼Œä¸‹é¢å…¬å¼æˆç«‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç‰©ç†åƒç´ ===è®¾å¤‡åƒç´ ===è®¾å¤‡ç‰©ç†åƒç´ ===physical pixels====Device pixels</span><br></pre></td></tr></table></figure></p><h4 id="è™šæ‹Ÿåƒç´ "><a href="#è™šæ‹Ÿåƒç´ " class="headerlink" title="è™šæ‹Ÿåƒç´ "></a>è™šæ‹Ÿåƒç´ </h4><p>å…¶å® ç‰©ç†åƒç´ ã€cssåƒç´ ã€è¿™äº›éƒ½æ˜¯è™šæ‹Ÿåƒç´ ã€‚(ä¸ªäººè®¤ä¸ºï¼Œæœªä½è¯)</p><h4 id="Device-pixels"><a href="#Device-pixels" class="headerlink" title="Device pixels"></a>Device pixels</h4><p>Device pixelsåº”è¯¥å°±æ˜¯ç‰©ç†åƒç´ çš„è‹±æ–‡åç§°ï¼Œ<a href="https://www.w3schools.com/cssref/css_units.asp" target="_blank" rel="noopener">æ ¹æ®å¤–æ–‡W3c â€“ CSS Units ä¸­å…³äº pxçš„è§£é‡Š</a>ï¼ŒåŸæ–‡å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* Pixels (px) ã€cssåƒç´ ã€‘ are relative to the viewing device. For low-dpi devices, 1px is one device pixel (dot) of the display. For printers and high resolution screens 1px implies multiple device pixelsã€å¤šå€çš„è®¾å¤‡åƒç´ ã€‘.</span><br></pre></td></tr></table></figure></p><p>ç»“åˆä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå±å¹•ä¸­ä¸€èˆ¬åªæœ‰ä¸€ç§è®¾å¤‡åƒç´ ï¼Œé‚£å°±æ˜¯ç‰©ç†åƒç´ ï¼Œå› æ­¤ç‰©ç†åƒç´ çš„å¦å¤–è‹±æ–‡åç§°ä¸º device pixels.</p><h3 id="ç‰©ç†åƒç´ çš„pxä¸cssåƒç´ pxåŒºåˆ«"><a href="#ç‰©ç†åƒç´ çš„pxä¸cssåƒç´ pxåŒºåˆ«" class="headerlink" title="ç‰©ç†åƒç´ çš„pxä¸cssåƒç´ pxåŒºåˆ«"></a>ç‰©ç†åƒç´ çš„pxä¸cssåƒç´ pxåŒºåˆ«</h3><p>è™½ç„¶é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“ç‰©ç†åƒç´ ä¸cssåƒç´ ï¼Œæœ‰æœ¬è´¨ä¸Šçš„ä¸åŒã€‚<br>ä¸è¿‡é€šè¿‡åˆ†æå¤šå€dprå›¾ç‰‡å¤±çœŸé—®é¢˜ï¼Œè§£å†³å¤±çœŸï¼Œå°±è¦æ”¾ä¸ç‰©ç†åƒç´ ç›¸åŒçš„pxå›¾ç‰‡æ—¶æ‰ä¸å¤±çœŸã€‚æˆ‘ä»¬çŸ¥å¦å¯å¤§èƒ†æ¨æµ‹ç‰©ç†åƒç´ çš„pxå¯èƒ½ä¸cssåƒç´ çš„pxæ˜¯ä¸€å›äº‹ã€‚<br>ä»¥ä¸Šä»…ä»£è¡¨ä¸ªäººæ£æµ‹ã€‚<br>ç„¶è€Œç‰©ç†åƒç´ ç¡®å®åˆä¸cssåƒç´ æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p><h2 id="è§†å£"><a href="#è§†å£" class="headerlink" title="è§†å£"></a>è§†å£</h2><p>è§†å£éƒ¨åˆ†ï¼Œå‚è€ƒã€Šç²¾é€šcssã€‹è¿™è¾¹ä¹¦ï¼Œè‹¥æœ‰é—®é¢˜ï¼ŒæŸ¥è¯¢è¿™è¾¹ä¹¦çš„ç¬¬å…«ç« ã€‚</p><h3 id="ç†æƒ³è§†å£"><a href="#ç†æƒ³è§†å£" class="headerlink" title="ç†æƒ³è§†å£"></a>ç†æƒ³è§†å£</h3><p>ç†æƒ³è§†å£å°±æ˜¯æ¯ä¸ªæ‰‹æœºçš„å±å¹•cssåƒç´ å°ºå¯¸ï¼Œä¾‹å¦‚GALAXY S5å±å¹•360pxX640pxï¼Œå®ƒçš„ç†æƒ³è§†å£å°±æ˜¯360pxX640px çš„cssåƒç´ å°ºå¯¸ã€‚ è§ã€Šdpr ä¸ cssåƒç´ ã€‹ã€‚</p><h3 id="é»˜è®¤è§†å£"><a href="#é»˜è®¤è§†å£" class="headerlink" title="é»˜è®¤è§†å£"></a>é»˜è®¤è§†å£</h3><p>æ‰‹æœºè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤è§†å£ï¼Œä¸”ä¸åŒç±»å‹çš„æ‰‹æœºè®¾å¤‡ï¼Œå…¶é»˜è®¤è§†å£éƒ½æ˜¯ä¸€æ ·çš„å°ºå¯¸ï¼Œä¸åŒç±»å‹æ‰‹æœºè®¾å¤‡çš„é»˜è®¤è§†å£ï¼Œå®½çº¦ä¸º1000px cssåƒç´ ã€‚<br>æ¯æƒ³åˆ°å§ï¼Œé»˜è®¤è§†å£å±…ç„¶è¿˜æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å®½åº¦ï¼šçº¦ä¸º1000px cssåƒç´ ï¼Œè€Œä¸”ä¸åŒç±»å‹çš„æ‰‹æœºå®½åº¦ä¸€æ ·ã€‚</p><h3 id="æ˜¾ç¤º"><a href="#æ˜¾ç¤º" class="headerlink" title="æ˜¾ç¤º"></a>æ˜¾ç¤º</h3><h4 id="ç†æƒ³è§†å£æ˜¾ç¤º"><a href="#ç†æƒ³è§†å£æ˜¾ç¤º" class="headerlink" title="ç†æƒ³è§†å£æ˜¾ç¤º"></a>ç†æƒ³è§†å£æ˜¾ç¤º</h4><p>ä½¿ç”¨ ç†æƒ³è§†å£æ˜¾ç¤ºï¼Œè®¾ç½®metaå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br></pre></td></tr></table></figure></p><h4 id="é»˜è®¤è§†å£æ˜¾ç¤º"><a href="#é»˜è®¤è§†å£æ˜¾ç¤º" class="headerlink" title="é»˜è®¤è§†å£æ˜¾ç¤º"></a>é»˜è®¤è§†å£æ˜¾ç¤º</h4><p>å¦‚æœä¸è®¾ç½®metaï¼Œé‚£ä¹ˆæ‰‹æœºå°†é‡‡ç”¨é»˜è®¤è§†å£æ˜¾ç¤ºï¼Œå°†htmlå†™çš„é¡µé¢æŒ‰ç…§å±å¹•å®½å¤§çº¦1000pxæ’åˆ—å¸ƒå±€å¥½ï¼Œç„¶åæŠŠå®ƒç¼©å°æ˜¾ç¤ºåˆ°æ‰‹æœºä¸­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;vs_test&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        .wrap &#123;</span><br><span class="line">            background: rebeccapurple;</span><br><span class="line">            word-break: break-word;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">        &#125;</span><br><span class="line">        .cell&#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            height: 50px;</span><br><span class="line">            width: 100px;</span><br><span class="line">            font-size: 40px;</span><br><span class="line">        &#125;</span><br><span class="line">        .cell:nth-child(even)&#123;</span><br><span class="line">            background: #FF9800</span><br><span class="line">        &#125;</span><br><span class="line">        .cell:nth-child(odd)&#123;</span><br><span class="line">            background: #00BCD4</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;2&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;3&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;4&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;5&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;6&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;7&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;8&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;9&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;0&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;cell&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p> GALAXY S5æ‰‹æœºç«¯æ˜¾ç¤ºå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css_mobile/view-port.jpg" alt title class>                <p></p>            </figure></p><h4 id="é»˜è®¤è§†å£-ä¸-qqæˆªå›¾å·¥å…·é‡å…ƒç´ å°ºå¯¸"><a href="#é»˜è®¤è§†å£-ä¸-qqæˆªå›¾å·¥å…·é‡å…ƒç´ å°ºå¯¸" class="headerlink" title="é»˜è®¤è§†å£ ä¸ qqæˆªå›¾å·¥å…·é‡å…ƒç´ å°ºå¯¸"></a>é»˜è®¤è§†å£ ä¸ qqæˆªå›¾å·¥å…·é‡å…ƒç´ å°ºå¯¸</h4><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ é‡‡ç”¨é»˜è®¤è§†å£æ˜¾ç¤ºï¼Œä¼šå°†åŸæ¥åœ¨å¤§çº¦1000pxæ˜¾ç¤ºå¥½çš„é¡µé¢ï¼Œç¼©å°åˆ°GALAXY S5æ‰‹æœºå®½360pxçš„å±å¹•æ˜¾ç¤ºï¼Œ<br>è¿™æ ·è°ƒè¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æ— æ³•ä½¿ç”¨qqæˆ–å¾®ä¿¡çš„æˆªå›¾å·¥å…·é‡Œé¢æ˜¾ç¤ºçš„å°ºå¯¸ï¼Œæ¥é‡å…ƒç´ çš„å°ºå¯¸ã€‚<br>ä»¥æ­¤ä¸¾ä¸€åä¸‰ï¼Œåªæœ‰ç§»åŠ¨ç«¯é‡‡ç”¨ç†æƒ³è§†å£çš„æƒ…å†µæ—¶ï¼Œæ‰å¯ä»¥ä½¿ç”¨qqæˆªå›¾å·¥å…·é‡å…ƒç´ å°ºå¯¸ã€‚<br>ä¸è¿‡ï¼Œpcæµè§ˆå™¨å±å¹•ä¸å­˜åœ¨æ­¤æƒ…å†µï¼Œpcæµè§ˆå™¨ä»»ä½•æƒ…å†µä¸‹å¯ä»¥é‡‡ç”¨qqæˆªå›¾å·¥å…·é‡å°ºå¯¸ã€‚</p><h3 id="ä¸è¦ç¦ç”¨ç¼©æ”¾"><a href="#ä¸è¦ç¦ç”¨ç¼©æ”¾" class="headerlink" title="ä¸è¦ç¦ç”¨ç¼©æ”¾"></a>ä¸è¦ç¦ç”¨ç¼©æ”¾</h3><p>å¾ˆå¤šäººå–œæ¬¢ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®šä¹‰metaï¼Œä¸‹é¢é…ç½®äº†user-scalable=noï¼Œç¦ç”¨äº†ç¼©æ”¾ï¼Œè¿™æ ·æ˜¯ä¸æ¨èçš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ä¸æ¨èè¿™ç§å†™æ³•ï¼Œå› ä¸ºç¦ç”¨äº†ç¼©æ”¾</span><br><span class="line">&lt;meta </span><br><span class="line">    name=&quot;viewport&quot; </span><br><span class="line">    content=&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no&quot;</span><br><span class="line"> /&gt;</span><br></pre></td></tr></table></figure></p><p>æ¨èå†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ¨èå†™æ³•ï¼š</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢å†™initial-scale=1å®Œå…¨æ˜¯ä¸ºäº†å…¼å®¹ï¼Œå¦‚æœä¸è€ƒè™‘å…¼å®¹ï¼Œç›´æ¥è¿™æ ·å†™å°±è¡Œï¼Œå› ä¸ºinitial-scale=1è¡¨è¾¾çš„æ„æ€å’Œwidth=device-widthä¸€æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ¨èå†™æ³•ä¹Ÿå¯ä»¥è¿™æ ·å†™</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h2><p><a href="http://www.ituring.com.cn/book/1910" target="_blank" rel="noopener">ç²¾é€šcss é«˜çº§webæ ‡å‡†è§£å†³æ–¹æ¡ˆ</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio" target="_blank" rel="noopener">MDN â€“devicePixelRatio</a><br><a href="https://www.w3schools.com/cssref/css_units.asp" target="_blank" rel="noopener">å¤–æ–‡W3c â€“CSS Units</a><br><a href="https://www.cnblogs.com/sese/p/5977486.html" target="_blank" rel="noopener">é«˜æ¸…å±åŠé€‚é…ä¸åŒè®¾å¤‡çš„æ–¹æ¡ˆæ€»ç»“</a><br><a href="https://www.jianshu.com/p/c3387bcc4f6e" target="_blank" rel="noopener">ï¼ˆå…¨è§£æï¼‰å±å¹•å°ºå¯¸ï¼Œåˆ†è¾¨ç‡ï¼Œåƒç´ ï¼ŒPPIä¹‹é—´åˆ°åº•ä»€ä¹ˆå…³ç³»ï¼Ÿ</a><br><a href="https://www.jianshu.com/p/3d28f4959c5a?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« ææ‡‚CSSåƒç´ ã€ç‰©ç†åƒç´ ã€é€»è¾‘åƒç´ ã€è®¾å¤‡åƒç´ æ¯”ã€PPIã€Viewport</a><br><a href="https://www.cnblogs.com/jiangzilong/p/6700023.html" target="_blank" rel="noopener">CSSåƒç´ ã€è®¾å¤‡ç‹¬ç«‹åƒç´ ã€è®¾å¤‡åƒç´ ä¹‹é—´å…³ç³»</a></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å±å¹•åˆ†è¾¨ç‡ </tag>
            
            <tag> ç‰©ç†åƒç´  </tag>
            
            <tag> cssåƒç´  </tag>
            
            <tag> ppi </tag>
            
            <tag> dpr </tag>
            
            <tag> å¤šå€å›¾çš„å“åº”å¼è®¾è®¡ </tag>
            
            <tag> è§†å£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cssä¹‹å¸ƒå±€</title>
      <link href="/2020/05/01/css_layout/"/>
      <url>/2020/05/01/css_layout/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå®šä½ã€æµ®åŠ¨ã€flexboxï¼Œè¿™äº›å¯ä»¥ç”¨æ¥å¸ƒå±€ï¼›<br>æˆ‘ä»¬ä¹ŸçŸ¥é“ä»€ä¹ˆå›ºå®šå¸ƒå±€ï¼Œæµå¼å¸ƒå±€ç­‰ç­‰ï¼Œè¿™äº›ä¹Ÿæ˜¯å¸ƒå±€ï¼›<br>é‚£ä¹ˆå®šä½ã€æµ®åŠ¨è¿™äº›æ˜¯ä»€ä¹ˆå¸ƒå±€å‘¢ï¼Œæ˜¯å›ºå®šå¸ƒå±€å—?<br>éƒ½ä¸æ˜¯ï¼Œæ‰€ä»¥å›ºå®šå¸ƒå±€ã€å¼¹æ€§å¸ƒå±€ã€æµå¼å¸ƒå±€ï¼Œè¿™äº›æ›´ä»£è¡¨äº†ä¸€ç§å¸ƒå±€çš„è®¾è®¡æ€æƒ³ï¼Œä¸€ç§å¸ƒå±€æ–¹æ¡ˆï¼Œ<br>è€Œå®šä½ã€æµ®åŠ¨ã€flexboxè¿™äº›æ˜¯ä¸€ç§å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µã€‚<br>æˆ‘ä»¬å¤§å¯è¿™æ ·ç†è§£ï¼š<br>å¸ƒå±€çš„è®¾è®¡æ–¹å¼æœ‰ å›ºå®šè®¾è®¡æ–¹å¼ã€å¼¹æ€§è®¾è®¡æ–¹å¼ã€æµå¼è®¾è®¡æ–¹å¼ã€å“åº”å¼è®¾è®¡æ–¹å¼;<br>å¸ƒå±€çš„æŠ€æœ¯æ–¹æ³•(æ‰‹æ®µ)æœ‰ å®šä½ã€æµ®åŠ¨ã€flexboxã€ç™¾åˆ†æ¯”ï¼›</p><h2 id="å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µ"><a href="#å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µ" class="headerlink" title="å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µ"></a>å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µ</h2><h3 id="ä¼˜å…ˆä½¿ç”¨flexboxï¼Œå‡å°‘ä½¿ç”¨å®šä½å’Œæµ®åŠ¨å¸ƒå±€"><a href="#ä¼˜å…ˆä½¿ç”¨flexboxï¼Œå‡å°‘ä½¿ç”¨å®šä½å’Œæµ®åŠ¨å¸ƒå±€" class="headerlink" title="ä¼˜å…ˆä½¿ç”¨flexboxï¼Œå‡å°‘ä½¿ç”¨å®šä½å’Œæµ®åŠ¨å¸ƒå±€"></a>ä¼˜å…ˆä½¿ç”¨flexboxï¼Œå‡å°‘ä½¿ç”¨å®šä½å’Œæµ®åŠ¨å¸ƒå±€</h3><p>å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µæœ‰ï¼šå®šä½(ç»å¯¹å®šä½ã€å›ºå®šå®šä½)ã€æµ®åŠ¨ã€flexboxã€‚<br>åœ¨è¿™äº›æŠ€æœ¯æ‰‹æ®µä¸­ï¼Œç»å¯¹å®šä½ã€æµ®åŠ¨è¿™äº›å·²ç»æ˜¯æ¯”è¾ƒè€çš„æŠ€æœ¯æ‰‹æ®µäº†ï¼Œè€Œä¸”flexboxèƒ½å¤Ÿè½»æ¾å®ç°æµ®åŠ¨æˆ–ç»å¯¹å®šä½ã€‚<br>å› ä¸ºé‡åˆ°å¸ƒå±€æ—¶æ¨èä¼˜å…ˆä½¿ç”¨æ–°çš„å¸ƒå±€æ–¹æ³• flexboxã€‚</p><h3 id="displayï¼šgird"><a href="#displayï¼šgird" class="headerlink" title="displayï¼šgird"></a>displayï¼šgird</h3><p>girdæ˜¯æœ€æ–°çš„ä¸€ç§å¸ƒå±€æ–¹å¼ï¼Œå¯èƒ½åœ¨æœªæ¥å¯¹ç›®å‰çš„å¸ƒå±€å¸¦æ¥éå¸¸å¤§çš„å½±å“ã€‚</p><h2 id="å¸ƒå±€è®¾è®¡æ–¹å¼"><a href="#å¸ƒå±€è®¾è®¡æ–¹å¼" class="headerlink" title="å¸ƒå±€è®¾è®¡æ–¹å¼"></a>å¸ƒå±€è®¾è®¡æ–¹å¼</h2><h3 id="å¸ƒå±€æ–¹å¼ä»‹ç»"><a href="#å¸ƒå±€æ–¹å¼ä»‹ç»" class="headerlink" title="å¸ƒå±€æ–¹å¼ä»‹ç»"></a>å¸ƒå±€æ–¹å¼ä»‹ç»</h3><p>å‚è€ƒã€Šç²¾é€šcssã€‹P177<br><strong>å›ºå®šå¸ƒå±€</strong> ä½¿ç”¨pxå¸ƒå±€ï¼›<br><strong>å¼¹æ€§å¸ƒå±€</strong> ä½¿ç”¨emä½œä¸ºå¸ƒå±€å…ƒç´ çš„å°ºå¯¸ã€‚(ä¸æ˜¯ç”¨emæ¥ä½œä¸ºfont-sizeæˆ–marginã€paddingå“¦)<br><strong>æµå¼å¸ƒå±€</strong> ä½¿ç”¨ç™¾åˆ†æ¯”å¸ƒå±€ï¼Œæµè§ˆå™¨é»˜è®¤å¸ƒå±€æ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸»æµå¸ƒå±€æ–¹å¼ã€‚ä¸ºä»€ä¹ˆè¯´æ˜¯ä¸»ä½“å¸ƒå±€æ–¹å¼äº†ï¼Œå› ä¸ºå“åº”å¼å¸ƒå±€åŸºæœ¬ä¸ŠåŸºäºæµå¼å¸ƒå±€ã€‚<br><strong>å“åº”å¼å¸ƒå±€</strong> åŸºäºæµå¼å¸ƒå±€ï¼Œåˆ©ç”¨åª’ä½“æŸ¥è¯¢ç­‰æ‰‹æ®µè¿›è¡Œå“åº”è‡ªé€‚åº”ï¼Œæœ¬è´¨ä¸Šå“åº”å¼å¸ƒå±€ä¹Ÿæ˜¯æµå¼å¸ƒå±€ã€‚ã€Šç²¾é€šcssã€‹P207ä¸­ï¼Œç›´æ¥å°†å“åº”å¼å¸ƒå±€æè¿°ä¸ºï¼šå¯ä»¥é€‚é…ä¸åŒè§†å£å¤§å°çš„æµå¼å¸ƒå±€ã€‚</p><p>æœ‰äººè¯´åªè¦ä½¿ç”¨äº†emæˆ–è€…remçš„å°±æ˜¯ä¸€ç§å¼¹æ€§å¸ƒå±€ï¼Œè¿™å¯èƒ½ä¸å¤ªå‡†ç¡®ï¼Œç¬”è®°ä½¿ç”¨emæ¥å®šä¹‰font-sizeæˆ–marginã€paddingç­‰ç­‰æ˜¯å¸¸è¯†ï¼Œä½¿ç”¨remæ¥å®šä¹‰font-sizeç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è¯†ï¼Œå¯ä»¥è¯´å°±æ˜¯åº”è¯¥è¿™æ ·åšçš„ã€‚æ‰€ä»¥å¦‚æœä½¿ç”¨remæˆ–emåšä»¥ä¸Šäº‹æƒ…ï¼Œå°±ä¸åº”è¯¥æ˜¯å¼¹æ€§å¸ƒå±€ã€‚<br>åªæœ‰ä½¿ç”¨emä½œä¸ºå…ƒç´ çš„å®½é«˜å°ºå¯¸äº†ï¼Œé‚£æ‰è¯´æ˜ç”¨äº†å¼¹æ€§å¸ƒå±€ã€‚</p><h3 id="å“åº”å¼å¸ƒå±€æ˜¯å½“å‰æœ€æ¨èæ–¹å¼"><a href="#å“åº”å¼å¸ƒå±€æ˜¯å½“å‰æœ€æ¨èæ–¹å¼" class="headerlink" title="å“åº”å¼å¸ƒå±€æ˜¯å½“å‰æœ€æ¨èæ–¹å¼"></a>å“åº”å¼å¸ƒå±€æ˜¯å½“å‰æœ€æ¨èæ–¹å¼</h3><p>ä¸Šé¢å‡ ç§å¸ƒå±€ä¸­ï¼Œå½“æœ‰æœ€æ¨èå’Œæœ€é‡è¦çš„æ˜¯å“åº”å¼å¸ƒå±€ï¼Œ(åˆç§°ä¸º å“åº”å¼webå¸ƒå±€è®¾è®¡)ã€‚</p><h3 id="å“åº”å¼å¸ƒå±€"><a href="#å“åº”å¼å¸ƒå±€" class="headerlink" title="å“åº”å¼å¸ƒå±€"></a>å“åº”å¼å¸ƒå±€</h3><p>å“åº”å¼å¸ƒå±€ä¸»ä½“ç”¨çš„è¿˜æ˜¯æµå¼å¸ƒå±€ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šï¼Œä¸»è¦ä½¿ç”¨åª’ä½“æŸ¥è¯¢è¿›è¡Œå“åº”è®¾è®¡ï¼Œå¦å¤–ä¹Ÿä½¿ç”¨äº†flexboxè¿›è¡Œå“åº”è®¾è®¡ã€‚</p><h4 id="åª’ä½“æŸ¥è¯¢"><a href="#åª’ä½“æŸ¥è¯¢" class="headerlink" title="åª’ä½“æŸ¥è¯¢"></a>åª’ä½“æŸ¥è¯¢</h4><p>è‡ªè¡Œç½‘ä¸ŠæŸ¥çœ‹ã€‚</p><h4 id="flexbox"><a href="#flexbox" class="headerlink" title="flexbox"></a>flexbox</h4><p>flexboxä¹Ÿæ˜¯cssä¸­å…·æœ‰æŸç§å“åº”å¼ç‰¹è´¨çš„è§„èŒƒï¼Œæ— é¡»ä½¿ç”¨åª’ä½“æŸ¥è¯¢ï¼Œflexboxæœ¬èº«å°±å¯ä»¥åˆ›å»ºå‡ºèƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨ç©ºé—´çš„é€‚é…å¸ƒå±€ã€‚<br>ä¸ºä»€ä¹ˆè¯´flexboxå…·å¤‡æŸç§å“åº”å¼ç‰¹è´¨å‘¢ï¼Œæ¯”å¦‚çˆ¶çº§å®šä¹‰ä¸ºflexï¼Œè‡ªå·±éƒ½ä¼šéšç€çˆ¶çº§çš„å˜å¤§è€Œå˜å¤§ï¼Œç¼©å°è€Œç¼©å°ï¼Œè¿™è·Ÿå­çº§å®šä¹‰ç™¾åˆ†æ¯”ï¼Œéšçˆ¶çº§å¢å¤§è€Œå¢å¤§ï¼Œç¼©å°è€Œç¼©å°ä¸€æ ·ã€‚è¯´æ˜äº†flexboxæœ‰æµ“çƒˆçš„æµå¼ç‰¹æ€§ï¼Œæµå¼ç‰¹æ€§æ˜¯å“åº”å¼å¸ƒå±€çš„é‡è¦ä½“ç°ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>åª’ä½“æŸ¥è¯¢è™½ç„¶æ˜¯åŸºäºè§†å£çš„åˆ›å»ºå“åº”å¼å¸ƒå±€çš„ä¸»æ‰“æ–¹å¼ï¼Œä½†å®ƒä¹Ÿæœ‰å¼Šç«¯ï¼Œå“åº”å¼å¸ƒå±€åŒæ—¶è¦ç»“åˆflexboxä¸€èµ·ä½¿ç”¨ï¼Œæ‰èƒ½åšå‡ºæ›´å¥½çš„å“åº”å¼å¸ƒå±€ã€‚å‚è€ƒã€Šç²¾é€šcssã€‹P227ã€‚</p><p>å¦å¤–ï¼Œè¦åšå‡ºä¸€ä¸ªå¥½çš„å“åº”å¼è®¾è®¡å¸ƒå±€ï¼Œå…¶å®æ˜¯ç»“åˆäº†å›ºå®šã€å¼¹æ€§ã€æµå¼å¸ƒå±€ï¼Œä»¥æµå¼å¸ƒå±€ä¸ºä¸»ä½“ï¼Œè¾…ä»¥å¼¹æ€§å¸ƒå±€å¸¸ç”¨çš„emå’Œremæ¥è®¾è®¡margin\font-size\paddingç­‰ç­‰ï¼Œå†è¾…ä»¥å›ºå®šå¸ƒå±€å¸¸ç”¨åˆ°çš„pxæ¥å®šä¹‰å¿…è¦çš„å…ƒç´ ã€‚(è¿™ä¸€æ®µæ˜¯ä¸ªäººè§è§£ï¼Œå¯èƒ½ä¸å¤ªå‡†ç¡®ï¼Œç¬”è®°åªæœ‰åˆ©ç”¨emæ¥å®šä¹‰å…ƒç´ çš„å®½é«˜è€Œémargin\font-size\paddingæ‰ç®—å¼¹æ€§å¸ƒå±€ï¼Œåªæœ‰åˆ©ç”¨pxæ¥å®šä¹‰å¸ƒå±€å…ƒç´ çš„å®½é«˜æ‰ç®—å›ºå®šèŒƒç•´ï¼Œå› æ­¤è¿™é‡Œæ‰€è¯´çš„å¯èƒ½å¹¶éç»“åˆäº†å›ºå®šå’Œå¼¹æ€§å¸ƒå±€ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å›ºå®šã€å¼¹æ€§å¸ƒå±€å¸¸ç”¨çš„æ‰‹æ®µâ€“pxå’Œemï¼Œå³å›ºå®šå¸¸ç”¨pxï¼Œå¼¹æ€§å¸¸ç”¨em)</p><h2 id="flexbox-1"><a href="#flexbox-1" class="headerlink" title="flexbox"></a>flexbox</h2><p>å‚çœ‹ã€Šflexå¸ƒå±€ä¸æ˜¯å¸ƒå±€è®¾è®¡æ¨¡å¼ã€‹ã€Šå“åº”å¼å¸ƒå±€æ˜¯å½“å‰æœ€æ¨èæ–¹å¼ â€”flexboxã€‹ã€Šå¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µã€‹</p><h3 id="flexå¸ƒå±€ä¸æ˜¯å¸ƒå±€è®¾è®¡æ¨¡å¼"><a href="#flexå¸ƒå±€ä¸æ˜¯å¸ƒå±€è®¾è®¡æ¨¡å¼" class="headerlink" title="flexå¸ƒå±€ä¸æ˜¯å¸ƒå±€è®¾è®¡æ¨¡å¼"></a>flexå¸ƒå±€ä¸æ˜¯å¸ƒå±€è®¾è®¡æ¨¡å¼</h3><p>å‚è€ƒæ–‡é¦–å¼€å¤´çš„åˆ†æï¼Œflexå¸ƒå±€æˆ–flexboxå¹¶ä¸æ˜¯ä¸€ç§å¸ƒå±€çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒä¸éš¶å±ä»»ä½•ä¸€ç§å¸ƒå±€è®¾è®¡æ–¹å¼ï¼Œå®ƒåªæ˜¯ä¸€ç§å¸ƒå±€æŠ€æœ¯æ‰‹æ®µè€Œå·²ã€‚<br>å®ƒå¯ä»¥è¢«è¿ç”¨äº å›ºå®šã€å¼¹æ€§ã€å“åº”å¼å¸ƒå±€å½“ä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¸ƒå±€çš„æŠ€æœ¯æ‰‹æ®µ </tag>
            
            <tag> å“åº”å¼å¸ƒå±€(è®¾è®¡) </tag>
            
            <tag> å›ºå®šå¸ƒå±€(è®¾è®¡) </tag>
            
            <tag> å¼¹æ€§å¸ƒå±€(è®¾è®¡) </tag>
            
            <tag> æµåŠ¨å¸ƒå±€(è®¾è®¡) </tag>
            
            <tag> åª’ä½“æŸ¥è¯¢ </tag>
            
            <tag> flex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vertical-alignã€è¡Œç›’å­ã€baseline</title>
      <link href="/2020/05/01/css_vertical_align/"/>
      <url>/2020/05/01/css_vertical_align/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡è®²è§£vertical-align, baseline, è¡Œç›’å­, x-height, line-height, åŠé“…ç©º,ä»¥åŠè¿™äº›æ¦‚å¿µå¦‚ä½•è¿ç”¨äºè¡Œå†…å…ƒç´ å±…ä¸­ã€å’Œä½¿ç”¨line-heightè®©å…ƒç´ å±…ä¸­ï¼Œå…¶ä¸­èŠ±äº†å¤§é‡ç¤ºä¾‹å’Œè¯´æ˜ä»‹ç»äº†å¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ å’Œè¡Œå†…å…ƒç´ çš„baselineã€‚</p><h2 id="vertical-align"><a href="#vertical-align" class="headerlink" title="vertical-align"></a>vertical-align</h2><h3 id="ä¸ºä»€ä¹ˆä¼šè¿™æ ·"><a href="#ä¸ºä»€ä¹ˆä¼šè¿™æ ·" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šè¿™æ ·"></a>ä¸ºä»€ä¹ˆä¼šè¿™æ ·</h3><h4 id="æè¿°"><a href="#æè¿°" class="headerlink" title="æè¿°"></a>æè¿°</h4><p>å¦‚å›¾ä¸¤ä¸ªå®šä¹‰ä¸ºinline-blockçš„divä¸€æ¨¡ä¸€æ ·ï¼Œå°±æ˜¯ä¸€ä¸ªå¤šäº†555ï¼š<br>æ²¡æœ‰555æ—¶ï¼Œä¸¤ä¸ªdivè¿˜æ˜¯ä¸€èµ·çš„ï¼š<br><figure class="image-box">                <img src="/image/css/question1.png" alt title class>                <p></p>            </figure><br>åŠ äº†555ï¼Œä¸¤ä¸ªdivä¸ä¸€èµ·äº†ï¼š<br><figure class="image-box">                <img src="/image/css/question2.png" alt title class>                <p></p>            </figure><br>æºç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        div&#123;</span><br><span class="line">            background: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .qq&#123;</span><br><span class="line">            height: 80px;</span><br><span class="line">            width: 80px;</span><br><span class="line">            border: 1px solid black;</span><br><span class="line">            display: inline-block;</span><br><span class="line">        &#125;</span><br><span class="line">        .a1&#123;</span><br><span class="line">            background-color: yellow;</span><br><span class="line">        &#125;</span><br><span class="line">        .a2&#123;</span><br><span class="line">            background-color: red;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;a1 qq&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;a2 qq&quot;&gt;555&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><h5 id="ä¸ºä»€ä¹ˆä¹‹å‰æ˜¯å¯¹é½çš„"><a href="#ä¸ºä»€ä¹ˆä¹‹å‰æ˜¯å¯¹é½çš„" class="headerlink" title="ä¸ºä»€ä¹ˆä¹‹å‰æ˜¯å¯¹é½çš„"></a>ä¸ºä»€ä¹ˆä¹‹å‰æ˜¯å¯¹é½çš„</h5><p>åœ¨a2ä¸­æ²¡æœ‰åŠ 555ä¹‹å‰ï¼Œa2è¿™ä¸ªinline-blockï¼Œå®ƒçš„åŸºçº¿(baseline)ï¼Œå°±æ˜¯å®ƒçš„ä¸‹è¾¹è·ã€‚å› ä¸º<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align" target="_blank" rel="noopener">æ²¡æœ‰åŸºçº¿çš„å…ƒç´ ï¼Œä½¿ç”¨å¤–è¾¹è·çš„ä¸‹è¾¹ç¼˜æ›¿ä»£</a>ï¼›<br>a2æ‰€åœ¨çš„çˆ¶å…ƒç´ ï¼Œå®ƒçš„åŸºçº¿ç”±çˆ¶å…ƒç´ å†…çš„inline-blockå…ƒç´ ç¡®å®šï¼Œé‚£ä¹ˆçˆ¶å…ƒç´ çš„åŸºçº¿ï¼Œä¹Ÿæ˜¯a1å’Œa2çš„ä¸‹è¾¹è·ï¼Œ<br>æ­¤æ—¶ a1ã€a2é»˜è®¤çš„å‚ç›´å¯¹é½æ–¹å¼éƒ½æ˜¯ vertical-align:baselineï¼›<br>æ‰€ä»¥a1å’Œa2æ˜¯å¯¹é½çš„ï¼›</p><h5 id="ä¸ºä»€ä¹ˆä¹‹åä¸å¯¹é½"><a href="#ä¸ºä»€ä¹ˆä¹‹åä¸å¯¹é½" class="headerlink" title="ä¸ºä»€ä¹ˆä¹‹åä¸å¯¹é½"></a>ä¸ºä»€ä¹ˆä¹‹åä¸å¯¹é½</h5><p>åœ¨a2ä¸­åŠ 555ä¹‹åï¼Œå®ƒçš„åŸºçº¿(baseline)å°±æ˜¯a2è¡Œå†…å—ä¸­çš„555è¿™ä¸²æ–‡å­—å†³å®šçš„ï¼Œå®ƒçš„åŸºçº¿å°±æ˜¯ä¸‹å›¾é»„è‰²çŸ©å½¢æ¡†çš„ä¸‹é»„è‰²è¾¹æ¡†ï¼›<br><figure class="image-box">                <img src="/image/css/vertical-align/vertical1.png" alt title class>                <p></p>            </figure><br>ï¼Œå› ä¸ºa1ã€a2é»˜è®¤çš„å‚ç›´å¯¹é½æ–¹å¼éƒ½æ˜¯ vertical-align:baselineï¼Œè€Œçˆ¶åŸºçº¿ç”±a1å†³å®šï¼Œå°±æ˜¯a1çš„ä¸‹è¾¹æ¡†ï¼›æ‰€ä»¥a2éœ€è¦ä¸‹é™ï¼Œè®©å®ƒçš„çš„åŸºçº¿ä¸çˆ¶åŸºçº¿ä½ç½®ä¸€è‡´ã€‚</p><h3 id="å¦‚ä½•å¯¹é½"><a href="#å¦‚ä½•å¯¹é½" class="headerlink" title="å¦‚ä½•å¯¹é½"></a>å¦‚ä½•å¯¹é½</h3><p>å°†åŒæ—¶è®¾ç½®ä¸¤ä¸ªinline-block ä¸º<br>vertical-align: middle;<br>æˆ–è€…<br>    vertical-align: top;éƒ½å¯ä»¥<br>å½“ç„¶ï¼Œè¿˜å¯ä»¥è®¾ç½®inline-blockä¸ºæµ®åŠ¨å…ƒç´ ï¼Œè„±ç¦»æ–‡æ¡£æµï¼Œä¹Ÿå¯ä»¥å¯¹é½ï¼›<br>è§£é‡Šä¸‹åŒæ—¶è®¾ç½®ä¸¤ä¸ªinline-block ä¸º vertical-align: middleæ—¶ä¸ºä½•èƒ½å¯¹é½ï¼›<br>ä¸Šé¢çš„ä¾‹å­ï¼Œa1æ˜¯ç©ºçš„inline-blockï¼Œa2æ˜¯éç©ºinline-blockï¼Œçˆ¶åŸºçº¿ä»¥ ç©ºçš„a1ä¸ºå‡†ï¼Œå½“a1è®¾ç½®vertical-align: middleï¼Œ<br>a1å°†çˆ¶åŸºçº¿çš„ä½ç½®ç”±a1çš„ä¸‹è¾¹è·ï¼Œæå‡è‡³a1çš„ä¸­éƒ¨+x-height/2,å¯ä»¥è¿‘ä¼¼çœ‹æˆå°±æ˜¯a1çš„ä¸­éƒ¨ã€‚<br>a2ä¹Ÿå°†è‡ªå·±çš„ä¸­éƒ¨ä¸çˆ¶åŸºçº¿å¯¹é½ï¼Œæ‰€ä»¥å°±å¯¹é½äº†ã€‚<br>å¦‚æœä¸æ¸…æ¥šï¼Œå¯ä»¥çœ‹ä¸‹é¢ç« èŠ‚ã€Šå¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ çš„baselineã€‹æˆ–ã€Šå¦å¤–ä¸€ä¸ªä¾‹å­ã€‹</p><h3 id="å¯¹ä¸Šé¢ä¾‹å­å»¶ä¼¸"><a href="#å¯¹ä¸Šé¢ä¾‹å­å»¶ä¼¸" class="headerlink" title="å¯¹ä¸Šé¢ä¾‹å­å»¶ä¼¸"></a>å¯¹ä¸Šé¢ä¾‹å­å»¶ä¼¸</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å…¶ä»–éƒ½ä¸€æ · --&gt;</span><br><span class="line">  &lt;div class=&quot;a1 qq&quot;&gt;555&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;a2 qq&quot;&gt;555&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œä»–ä»¬åˆå¯¹é½äº†ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/vertical2.jpg" alt title class>                <p></p>            </figure></p><p>è¿™æ˜¯å› ä¸ºä»–ä»¬çš„çˆ¶baselineå°±æ˜¯ä¸‹å›¾æ‰€ç¤ºé»„è‰²çŸ©å½¢æ¡†çš„ä¸‹è¾¹æ¡†ï¼Œçˆ¶çº§baselineå…¶å®å°±æ˜¯a1å’Œa2çš„baselineï¼›<br><figure class="image-box">                <img src="/image/css/vertical-align/vertical3.jpg" alt title class>                <p></p>            </figure></p><p>åœ¨æœ¬ä¾‹çš„ä¿®æ”¹åŸºç¡€ä¸Šï¼Œç°åœ¨æˆ‘ä»¬åˆå°†a1å®šä¹‰ä¸ºvertical-align:middle,å…¶ä»–ä¿æŒä¸å˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å…¶ä»–ä¿æŒä¸å˜ --&gt;</span><br><span class="line">.a1&#123;</span><br><span class="line">   vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå˜æˆå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/vertical4.jpg" alt title class>                <p></p>            </figure></p><p>vertical-align: middle æ„æ€æ˜¯ï¼šä½¿å…ƒç´ çš„ä¸­éƒ¨ä¸çˆ¶å…ƒç´ çš„åŸºçº¿åŠ ä¸Šçˆ¶å…ƒç´ x-heightçš„ä¸€åŠå¯¹é½ã€‚</p><p>æœ¬ä¾‹ä¸­ï¼Œx-heightçš„å€¼å·®ä¸å¤š5pxï¼Œx-height çš„å€¼è®¡ç®—ï¼Œå‚è€ƒä¸‹é¢ç« èŠ‚ã€Šx-heightã€‹,<br>çˆ¶å…ƒç´ çš„åŸºçº¿å°±æ˜¯a2çš„åŸºçº¿ï¼Œa2çš„åŸºçº¿å¦‚å›¾æ‰€ç¤ºï¼Œæ‰€ä»¥å˜æˆè¿™æ ·çš„æ•ˆæœã€‚</p><h3 id="ç¡®å®šçˆ¶åŸºçº¿æœ€ç®€å•çš„æ–¹æ³•"><a href="#ç¡®å®šçˆ¶åŸºçº¿æœ€ç®€å•çš„æ–¹æ³•" class="headerlink" title="ç¡®å®šçˆ¶åŸºçº¿æœ€ç®€å•çš„æ–¹æ³•"></a>ç¡®å®šçˆ¶åŸºçº¿æœ€ç®€å•çš„æ–¹æ³•</h3><p>å¯èƒ½ä½ ç–‘æƒ‘ï¼Œä¸Šé¢ä¾‹å­ä¸­ï¼Œçˆ¶åŸºçº¿çœŸçš„æ˜¯ä¸Šé¢æ‰€è¯´çš„å—ï¼Œæ€ä¹ˆéªŒè¯å‘¢ï¼Œä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨çˆ¶å…ƒç´ å†…ï¼Œå¢åŠ ä¸€æ®µåŒ¿åè¡Œå†…å…ƒç´ ï¼Œç®€å•ç‚¹è¯´å°±æ˜¯åœ¨çˆ¶å…ƒç´ å†…ï¼Œå¢åŠ ä¸€æ®µå­—ç¬¦ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦çš„ä½ç½®å°±è¯´æ˜äº†çˆ¶å…ƒç´ çš„åŸºçº¿ä½ç½®ï¼Œå› ä¸ºï¼Œçˆ¶å…ƒç´ çš„åŸºçº¿ æ€»æ˜¯ä¸å…¶å†…çš„åŒ¿åè¡Œå†…å…ƒç´ çš„åŸºçº¿ä¸€è‡´ï¼š<br>æ¯”å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">div&#123;</span><br><span class="line">    background: blue;</span><br><span class="line">&#125;</span><br><span class="line">.qq&#123;</span><br><span class="line">    height: 80px;</span><br><span class="line">    width: 80px;</span><br><span class="line">    border: 1px solid black;</span><br><span class="line">    display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.a1&#123;</span><br><span class="line">    background-color: yellow;</span><br><span class="line">&#125;</span><br><span class="line">.a2&#123;</span><br><span class="line">    background-color: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div&gt;</span><br><span class="line">     æˆ‘è¿™å‡ ä¸ªå­—å°±æ˜¯æ‰€è°“çš„åŒ¿åè¡Œå†…å…ƒç´ å“¦</span><br><span class="line">    &lt;div class=&quot;a1 qq&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;a2 qq&quot;&gt;555&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/vae1.jpg" alt title class>                <p></p>            </figure></p><p>ç»§ç»­ä¿®æ”¹ï¼Œå…¶ä»–ä¸å˜ï¼Œåœ¨a1ä¸­åŠ 555å­—ç¬¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å…¶ä»–éƒ½ä¸€æ · --&gt;</span><br><span class="line">  &lt;div class=&quot;a1 qq&quot;&gt;555&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/ver2.jpg" alt title class>                <p></p>            </figure></p><p>ç»§ç»­ä¿®æ”¹ï¼Œå…¶ä»–ä¸å˜ï¼Œä¿®æ”¹å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å…¶ä»–ä¿æŒä¸å˜ --&gt;</span><br><span class="line">.a1&#123;</span><br><span class="line">   vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/ver3.jpg" alt title class>                <p></p>            </figure></p><h3 id="å¦å¤–ä¸€ä¸ªä¾‹å­"><a href="#å¦å¤–ä¸€ä¸ªä¾‹å­" class="headerlink" title="å¦å¤–ä¸€ä¸ªä¾‹å­"></a>å¦å¤–ä¸€ä¸ªä¾‹å­</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">      background: blue;</span><br><span class="line">  &#125;</span><br><span class="line">  .item&#123;</span><br><span class="line">      height: 80px;</span><br><span class="line">      width: 80px;</span><br><span class="line">      border: 1px solid black;</span><br><span class="line">      display: inline-block;</span><br><span class="line">      background-color: yellow;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">             6666</span><br><span class="line">              &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/css/vertical-align/more1.jpg" alt title class>                <p></p>            </figure><p>ç°åœ¨ä¿®æ”¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å…¶ä»–ä¸å˜</span><br><span class="line">.item&#123;</span><br><span class="line">     vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/more2.jpg" alt title class>                <p></p>            </figure></p><p>ä¸ºä»€ä¹ˆå‘¢ï¼ŒåŸå› æ˜¯ï¼Œitemæ”¹ä¸ºvertical-align: middleæ—¶ï¼Œç›´æ¥å°†çˆ¶baselineæ”¹åˆ°è‡ªèº«çš„ä¸­éƒ¨ä½ç½®äº†ï¼Œ<br>è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œ<strong>çˆ¶çº§å†…çš„ç©ºçš„inline-blockå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡vertical-align: middleå°†çˆ¶baselineæ”¹åˆ°è‡ªèº«çš„ä¸­éƒ¨ä½ç½®ã€‚</strong></p><h3 id="ä¸ºä»€ä¹ˆä¼šæœ‰é—´éš™"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰é—´éš™" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰é—´éš™"></a>ä¸ºä»€ä¹ˆä¼šæœ‰é—´éš™</h3><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œçœ‹åˆ°å› ä¸º img çš„å­˜åœ¨ï¼Œå¯¼è‡´äº†çˆ¶å±‚åº•éƒ¨ä¸å›¾ç‰‡åº•éƒ¨æœ‰é—´éš™ã€‚ è¿™æ˜¯å› ä¸ºï¼Œimg çš„æ’ç‰ˆé»˜è®¤æ˜¯æŒ‰ç…§è¡Œç›’å­æ’åˆ—çš„ï¼Œä¹Ÿå°±æ˜¯æŒ‰ç…§baselineå¯¹é½ï¼Œè€Œbaselineä¸è¡Œç›’å­çš„åº•çº¿æ˜¯æœ‰ä¸€å®šè·ç¦»çš„ï¼Œè¿™ä¸ªè·ç¦»å°±æ˜¯é—´éš™ã€‚<br>å½“img çš„çˆ¶å±‚ å­—ä½“è¶Šå¤§æ—¶ï¼Œé—´éš™è¶Šå¤§ã€‚<br><strong>è¿™ç§ç°è±¡ä¸€èˆ¬å‡ºç°äºå›¾ç‰‡ï¼Œåœ¨é¡¹ç›®ä¸­é‡åˆ°å›¾ç‰‡æ’åˆ—æ—¶ï¼Œè¦æ³¨æ„ä¼šäº§ç”Ÿè¿™ç§é—´éš™ã€‚</strong><br>å†ä¸¾ä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">       background: blue;</span><br><span class="line">       font-size: 50px;</span><br><span class="line">   &#125;</span><br><span class="line">   img&#123;</span><br><span class="line">       height: 150px;</span><br><span class="line">       width: 200px;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">  &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">       &lt;img src=&quot;./git3.png&quot; /&gt;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/css/vertical-align/verialign-1.jpg" alt title class>                <p></p>            </figure><p>æ¶ˆé™¤é—´éš™çš„æ–¹æ³•æ˜¯ï¼Œç»™img ä¸€ä¸ªvertical-alignï¼šmiddleæˆ–è€…å…¶ä»–å€¼éƒ½å¯ä»¥ã€‚</p><h3 id="å¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ çš„baseline"><a href="#å¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ çš„baseline" class="headerlink" title="å¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ çš„baseline"></a>å¦‚ä½•ç¡®å®šçˆ¶å…ƒç´ çš„baseline</h3><p>çˆ¶å…ƒç´ çš„baselineä¾æ®å…¶å†…éƒ¨è¡Œå†…å…ƒç´ ç±»å‹ä¸åŒï¼Œbaselineä¸åŒã€‚<br>é€šè¿‡ä»¥ä¸Šä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°</p><h4 id="å…¨éƒ¨æ˜¯è¡Œå†…å…ƒç´ "><a href="#å…¨éƒ¨æ˜¯è¡Œå†…å…ƒç´ " class="headerlink" title="å…¨éƒ¨æ˜¯è¡Œå†…å…ƒç´ "></a>å…¨éƒ¨æ˜¯è¡Œå†…å…ƒç´ </h4><p>å½“çˆ¶å…ƒç´ å†…ï¼Œå…¨éƒ¨æ˜¯è¡Œå†…å…ƒç´ (éinline-block)æ—¶ï¼Œç±»ä¼¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;father&quot;&gt;</span><br><span class="line">   abcæ–‡å­—ç¬¦</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>çˆ¶å…ƒç´ å†…çš„baseline ç”±â€™abcæ–‡å­—ç¬¦â€™è¿™å‡ ä¸ªå­—ç¡®å®šï¼Œæ­¤æ—¶çˆ¶baselineå°±æ˜¯æ–‡å­—çš„ä¸‹åˆ’çº¿çš„ä½ç½®ä¸Š</p><h4 id="æœ‰inline-block"><a href="#æœ‰inline-block" class="headerlink" title="æœ‰inline-block"></a>æœ‰inline-block</h4><p>å¦‚æœçˆ¶å…ƒç´ å†…æœ‰inline-blockï¼Œä¸”inline-blockå†…æ²¡æœ‰æ–‡å­—æ—¶ï¼Œçˆ¶baselineå°±æ˜¯inline-blockçš„ä¸‹è¾¹è·çº¿ï¼›<br>å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;father&quot;&gt;</span><br><span class="line">   &lt;div class=&quot;inline-block&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœçˆ¶å…ƒç´ å†…æœ‰å¤šä¸ªinline-blockï¼Œä¸”æœ‰äº›inline-blockå†…æœ‰æ–‡å­—æ—¶,æ­¤æ—¶çˆ¶å…ƒç´ å†…çš„baselineä»¥æ²¡æœ‰æ–‡å­—çš„inline-blockä¸ºå‡†ï¼›<br>å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;father&quot;&gt;</span><br><span class="line">   &lt;div class=&quot;inline-block&quot;&gt;æ¥ç”µæ–‡å­—&lt;/div&gt;</span><br><span class="line">   &lt;div class=&quot;inline-block&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>è¯¦ç»†ï¼Œå‚è§ä¸Šé¢ä¾‹å­ã€‚</p><h4 id="æœ‰imgå›¾ç‰‡"><a href="#æœ‰imgå›¾ç‰‡" class="headerlink" title="æœ‰imgå›¾ç‰‡"></a>æœ‰imgå›¾ç‰‡</h4><p>çˆ¶å…ƒç´ å«æœ‰imgå›¾ç‰‡å…¶å®å°±æ˜¯ç©ºçš„inline-blockï¼Œè§„åˆ™å‚è§ã€Šæœ‰inline-blockã€‹</p><h4 id="å¯ä½¿ç”¨vertical-alignä¿®æ”¹çˆ¶åŸºçº¿"><a href="#å¯ä½¿ç”¨vertical-alignä¿®æ”¹çˆ¶åŸºçº¿" class="headerlink" title="å¯ä½¿ç”¨vertical-alignä¿®æ”¹çˆ¶åŸºçº¿"></a>å¯ä½¿ç”¨vertical-alignä¿®æ”¹çˆ¶åŸºçº¿</h4><p>çˆ¶çº§å†…çš„ç©ºçš„inline-blockå…ƒç´ ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ä¸åŒçš„vertical-alignå€¼è¾¾åˆ°ä¿®æ”¹çˆ¶baselineã€‚<br>è§ã€Šå¦å¤–ä¸€ä¸ªä¾‹å­ã€‹</p><h3 id="å¦‚ä½•ç¡®å®šè‡ªå·±çš„baseline"><a href="#å¦‚ä½•ç¡®å®šè‡ªå·±çš„baseline" class="headerlink" title="å¦‚ä½•ç¡®å®šè‡ªå·±çš„baseline"></a>å¦‚ä½•ç¡®å®šè‡ªå·±çš„baseline</h3><p>è¿™é‡Œçš„è‡ªå·±ï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„a1ã€a2ã€å­—ç¬¦ä¸²ç­‰ç­‰çš„è¡Œå†…å…ƒç´ ï¼Œä¾æ®ä¸åŒç±»å‹è¡Œå†…å…ƒç´ çš„è‡ªå·±ï¼Œbaselineå–å€¼ä¸åŒ</p><h4 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h4><p>è¿™ä¸ªæœ€ç®€å•ï¼ŒåŸºçº¿å‡ ä¹ç­‰äºç´§è´´å­—ç¬¦ä¸²çš„ä¸‹åˆ’çº¿<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abcå­—ç¬¦ä¸²</span><br></pre></td></tr></table></figure></p><h4 id="inline-block"><a href="#inline-block" class="headerlink" title="inline-block"></a>inline-block</h4><p>å½“è‡ªå·±æ˜¯inline-blockæ—¶ï¼Œ<br>åˆ†ä¸¤ç§æƒ…å†µï¼š</p><ul><li><p>å½“è‡ªå·±æ˜¯ç©ºçš„inline-blockæ—¶ï¼Œè‡ªå·±çš„åŸºçº¿å°±æ˜¯è‡ªå·±çš„ä¸‹è¾¹æ¡†,å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;inline-block&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li><p>å½“è‡ªå·±æ˜¯éç©ºçš„inline-blockæ—¶ï¼Œè‡ªå·±çš„åŸºçº¿å°±æ˜¯è‡ªå·±å…ƒç´ å†…éƒ¨çš„å­—ç¬¦ä¸²çš„ä¸‹è¾¹æ¡†ï¼Œä¹Ÿå°±æ˜¯ç´§è´´å­—ç¬¦ä¸²çš„ä¸‹åˆ’çº¿,æ›´å¤šè¯·å‚è€ƒã€Šä¸ºä»€ä¹ˆä¹‹åä¸å¯¹é½ã€‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;inline-block&quot;&gt;abc456&lt;/div&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="img"><a href="#img" class="headerlink" title="img"></a>img</h4><p>è¿™ç§æœ€å¥½åˆ†åˆ«ï¼Œå‚è€ƒåŒã€Šinline-blockã€‹çš„ç©ºinline-blockæƒ…å†µï¼Œå®ƒçš„åŸºçº¿å°±æ˜¯å›¾ç‰‡ä¸‹è¾¹æ¡†ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>è¦è§£ç­”æ–‡é¦–æŠ›å‡ºçš„ç–‘é—®ï¼Œæˆ‘ä»¬è¦äº†è§£ çˆ¶å…ƒç´ çš„baseline å¦‚ä½•ç¡®å®šï¼›<br>inline-blockå†…æœ‰æ— æ–‡å­—æ—¶ï¼Œå…¶baselineå¦‚ä½•ç¡®å®šï¼›<br>ä¸­é—´æ¶‰åŠåˆ°è¡Œå†…ç›’å­çš„x-heightæ¦‚å¿µã€‚<br>è€Œvertical-alignå¹¶æ²¡æœ‰ä»€ä¹ˆç¥ç§˜ï¼Œå…¶å®å°±æ˜¯åˆ¶å®šå¯¹é½è§„åˆ™è€Œå·²ã€‚<br>æœ¬ä¾‹åªä¸“é—¨è®¨è®º<br>vertical-align:baseline<br>vertical-align:middle<br>è¿™ä¸¤ç§æƒ…å†µï¼Œç”¨å¾—æœ€å¤šï¼Œå…¶ä»–æƒ…å†µæ ¹æ®è¿™ä¸¤ç§æƒ…å†µç±»æ¨å°±è¡Œã€‚</p><p>è¿˜è¦ç‰¹åˆ«æ³¨æ„çš„ï¼Œåœ¨mdnä¸Šè¯´äº†ï¼Œ<strong>vertical-alignåªä½œç”¨äº è¡Œå†…å…ƒç´ ï¼Œinline-blockï¼Œimg è¿™äº›å…ƒç´ ã€‚</strong></p><h3 id="å½©è›‹"><a href="#å½©è›‹" class="headerlink" title="å½©è›‹"></a>å½©è›‹</h3><h4 id="ä¸ºä»€ä¹ˆæœ‰é—´éš™"><a href="#ä¸ºä»€ä¹ˆæœ‰é—´éš™" class="headerlink" title="ä¸ºä»€ä¹ˆæœ‰é—´éš™"></a>ä¸ºä»€ä¹ˆæœ‰é—´éš™</h4><p>åœ¨æ–‡é¦–çš„æé—®ä¸­ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œæœ‰ç¼éš™å‘¢ï¼Œ<a href="https://www.cnblogs.com/starof/p/4512284.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">åŸæ¥è¿™ä¸ªé»˜è®¤vertical-align:baselineï¼Œè€Œbaselineçš„ä¸‹æ–¹ä¼šç»™å­—æ¯çš„ä¸€éƒ¨åˆ†ç•™å‡ºç©ºé—´ï¼Œå› æ­¤ä¼šäº§ç”Ÿä¸€ä¸ªç©ºéš™ï¼Œè¦äº§ç”Ÿç†æƒ³çš„æ•ˆæœ</a>,é“¾æ¥ä¸Šæ–‡ç« ä¸Šè¯´å®ƒä¸vertical-alignæœ‰å…³ï¼ˆé¡ºä¾¿è¯´ä¸‹ï¼Œæ­¤é“¾æ¥ä¸Šçš„æ–‡ç« æœ‰äº›ä¾‹å­æœ‰é—®é¢˜ï¼Œæ³¨æ„äº†ï¼‰ï¼Œè‡³äºä¸ºä»€ä¹ˆæˆ–è€…åˆ°åº•æ˜¯å¦ä¸vertical-alignæœ‰å…³å°±ä¸è¦ç©·ç©¶äº†ï¼Œå¯èƒ½æ˜¯vertical-aligné€ æˆå°±è¡Œã€‚<br><figure class="image-box">                <img src="/image/css/question1.png" alt title class>                <p></p>            </figure></p><h4 id="åˆ©ç”¨ä¼ªç±»å‚ç›´å±…ä¸­"><a href="#åˆ©ç”¨ä¼ªç±»å‚ç›´å±…ä¸­" class="headerlink" title="åˆ©ç”¨ä¼ªç±»å‚ç›´å±…ä¸­"></a>åˆ©ç”¨ä¼ªç±»å‚ç›´å±…ä¸­</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">  .wrap &#123;</span><br><span class="line">        background: #00bcd4ba;</span><br><span class="line">        height: 150px;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item &#123;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item1 &#123;</span><br><span class="line">        height: 50px;</span><br><span class="line">        width: 50px;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        background: blue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item2 &#123;</span><br><span class="line">        height: 80px;</span><br><span class="line">        width: 80px;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        background: blue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">    80ç‰ˆç»å…¸ä¸Šæµ·æ»©</span><br><span class="line">    &lt;div class=&quot;item1 item&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;item2 item&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/after1.jpg" alt title class>                <p></p>            </figure></p><p>ä½ çœ‹åˆ°å°±ç®—ä½ æŠŠitem1å’Œitem2éƒ½åšäº†vertical-align: middle;<br>éƒ½æ— æ³•è®©å…ƒç´ ç›¸å¯¹äºæ•´ä¸ªwrapå…ƒç´ å‚ç›´å±…ä¸­ï¼Œ<br>å¢åŠ ä¸‹é¢ä»£ç å°±å¯ä»¥äº†,ç»™çˆ¶å±‚å¢åŠ ä¸€ä¸ªä¼ªç±»ï¼Œè®¾ç½®è¿™ä¸ªä¼ªç±»ä¸ºinline-block,ä»è€Œèƒ½è®¾ç½®å®½é«˜ï¼›<br>è¿™ä¸ªä¼ªç±»çš„é«˜åº¦æ’‘æ»¡æ•´ä¸ªwrapï¼Œç„¶åè®¾ç½®vertical-align: middle;<br>å› ä¸ºè¿™ä¸ªä¼ªç±»çš„é«˜åº¦ç›¸å¯¹å…¶ä»–å…ƒç´ æœ€é«˜ï¼Œæ‰€ä»¥ï¼Œå®ƒè®¾ç½®vertical-align: middleä¼šå°†çˆ¶å…ƒç´ çš„baselineæ‹‰åˆ°ä¼ªç±»çš„ä¸­éƒ¨å»ï¼Œ<br>è€Œä¼ªç±»åˆä¸çˆ¶å…ƒç´ åŒé«˜ï¼Œè¿™æ ·å°±å¯ä»¥è¾¾åˆ°ç›¸å¯¹çˆ¶å…ƒç´ å‚ç›´å±…ä¸­ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.wrap::after &#123;</span><br><span class="line">    content: &apos;&apos;;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    height: 100%;</span><br><span class="line">    &lt;!-- æ³¨æ„çš„æ˜¯ä¸Šé¢ä»£ç ä¸èµ·ä½œç”¨æ—¶ï¼Œå¯ä»¥å®šä¹‰width: 1px; ä¸€èˆ¬æ˜¯ä¸å¿…å®šä¹‰width: 1px--&gt;</span><br><span class="line">    &lt;!-- width: 1px; --&gt;</span><br><span class="line">    vertical-align: middle;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å…¶å®è¿™æ ·çš„afterä¼ªç±»æœ‰äº›äººä¹Ÿç§°ä¸ºå¹½çµå…ƒç´ ã€‚<br>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/after2.jpg" alt title class>                <p></p>            </figure></p><h3 id="å…³äºvertical-alignä½ è¦çŸ¥é“çš„"><a href="#å…³äºvertical-alignä½ è¦çŸ¥é“çš„" class="headerlink" title="å…³äºvertical-alignä½ è¦çŸ¥é“çš„"></a>å…³äºvertical-alignä½ è¦çŸ¥é“çš„</h3><p>vertical-align å°±æ˜¯ç”¨æ¥è®©è¡Œå†…å…ƒç´ å¯¹é½çš„ï¼›vertical-alignè¿™ä¸ªå±æ€§å°±æ˜¯ä¸ºäº†è¡Œå†…å…ƒç´ è€Œç”Ÿï¼Œå¦‚æœæ²¡æœ‰è¡Œå†…å…ƒç´ ï¼Œvertical-alignå°±æ²¡æœ‰ä»»ä½•å­˜åœ¨çš„æ„ä¹‰ï¼›<br>åŒæ ·çš„ï¼Œå¦‚ä½•è¦åšè¡Œå†…å…ƒç´ çš„å¯¹é½ï¼Œä½ å¯ä»¥ä¸ä½¿ç”¨vertical-alignï¼Œä½†å¦‚æœä¸æ‡‚vertical-alignï¼Œé‚£ä¹ˆä½ èƒ½æŠŠè¡Œå†…å…ƒç´ åšå¾—å¯¹é½ï¼Œä¹Ÿæ˜¯ç¢°è¿æ°”ï¼Œçææã€‚<br>è¦å…¨é¢çš„ç†è§£vertical-alignï¼Œä¸ä»…è¦çŸ¥é“vertical-alignçš„å®šä¹‰ï¼Œè¿˜è¦çŸ¥é“è¡Œå†…å…ƒç´ çš„ç‰¹æ€§ï¼Œå¦‚è¡Œå†…å…ƒç´ çš„åŸºçº¿ï¼›<br>è¿˜è¦çŸ¥é“çˆ¶å…ƒç´ çš„åŸºçº¿(è¿™æ˜¯æœ€éš¾çš„)ï¼Œè¿˜è¦çŸ¥é“è¡Œç›’å­çš„æ¦‚å¿µï¼Œä¾‹å¦‚x-height,è¡Œç›’å­çš„baselineï¼›<br>å¾ˆå¤šå¥‡å‹å…«æ€ªçš„é—®é¢˜éƒ½æ˜¯ çˆ¶å…ƒç´  ä¸ è¡Œå†…å…ƒç´ çš„vertical-align æå‡ºæ¥çš„ã€‚</p><h2 id="è¡Œç›’å­"><a href="#è¡Œç›’å­" class="headerlink" title="è¡Œç›’å­"></a>è¡Œç›’å­</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>æ¯è¡Œæ–‡æœ¬éƒ½ä¼šç”Ÿæˆä¸€ä¸ªè¡Œç›’å­ã€‚(è¯­å‡ºã€Šç²¾é€šcss é«˜çº§webæ ‡å‡†è§£å†³æ–¹æ¡ˆã€‹)<br>è¡Œç›’å­ä¸»è¦æ¶‰åŠä»¥ä¸‹æ¦‚å¿µï¼š<br>x-heightï¼›<br>è¡Œç›’å­çš„baselineï¼›<br>æ³¨æ„font-size ä¸ è¡Œç›’å­çš„å…³ç³»ï¼›<br>åŠé“…ç©º(ã€Šç²¾é€šcss é«˜çº§webæ ‡å‡†è§£å†³æ–¹æ¡ˆã€‹æœ‰è®²åˆ°)ï¼Œä»¥ä¸‹ä¹Ÿæœ‰è®²è§£ï¼›<br>ç›´æ¥ä¸Šå›¾ç†è§£å§ï¼Œä»¥ä¸‹ä¸‰å¼ éƒ½æ˜¯è¡Œç›’å­ä»‹ç»å›¾ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/column.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/vertical-align/x-height.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/css/vertical-align/inline-box.jpg" alt title class>                <p></p>            </figure></p><h3 id="è¡Œç›’å­-ä¸-è¡Œå†…ç›’å­"><a href="#è¡Œç›’å­-ä¸-è¡Œå†…ç›’å­" class="headerlink" title="è¡Œç›’å­ ä¸ è¡Œå†…ç›’å­"></a>è¡Œç›’å­ ä¸ è¡Œå†…ç›’å­</h3><p>spanã€strongç­‰ç­‰è¿™äº›æ˜¯è¡Œå†…å…ƒç´ ï¼Œä»–ä»¬å†…å®¹ä»¥<strong>è¡Œå†…ç›’å­</strong>å½¢å¼å±•ç¤ºï¼Œç›´ç™½çš„è¯´span å…ƒç´ å°±æ˜¯ä¸€ä¸ªè¡Œå†…ç›’å­ï¼›<br>ç”±ä¸€è¡Œæ–‡æœ¬å½¢æˆçš„æ°´å¹³ç›’å­å«è¡Œç›’å­ï¼Œè¡Œç›’å­çš„é«˜åº¦ç”±å®ƒæ‰€åŒ…å«çš„è¡Œå†…ç›’å­å†³å®šï¼›<br>ä»¥ä¸Šå‡è¯­å‡ºã€Šcssç²¾é€šã€‹ P43 P44ã€‚<br>ç”±ä¸Šå¯çŸ¥ï¼Œè¡Œç›’å­å¯ä»¥åŒ…å«å¾ˆå¤šä¸ªè¡Œå†…ç›’å­ã€‚å½“è¡Œç›’å­åªæœ‰ä¸€ä¸ªè¡Œå†…ç›’å­æ—¶ï¼Œè¡Œå†…ç›’å­å°±æ˜¯è¡Œç›’å­ã€‚</p><h3 id="x-height"><a href="#x-height" class="headerlink" title="x-height"></a>x-height</h3><p>x-height,ä¹Ÿå°±æ˜¯ä¸Šé¢å›¾ç‰‡ä¸­çš„xé«˜åº¦ï¼Œè¯´ç™½ç‚¹ï¼Œå°±æ˜¯å°å†™å­—æ¯Xçš„é«˜åº¦ï¼›<br>å¦å¤–ä¸€ä¸ªæ³¨æ„çš„æ˜¯ï¼Œ<strong>ç›¸åŒçš„font-sizeï¼Œç›¸åŒçš„å­—ç¬¦ï¼Œåœ¨ä¸åŒçš„å­—ä½“font-familyä¸­x-heightæ˜¯ä¸åŒçš„</strong>ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†æœ‰äº›å­—ä½“ä¸‹ï¼Œæ˜æ˜æ–‡æœ¬çœ‹èµ·æ¥æ˜¯å±…ä¸­çš„ï¼Œæ¢å…¶ä»–å­—ä½“å¯èƒ½å°±çœ‹èµ·æ¥ä¸å¤ªå±…ä¸­äº†ã€‚<br>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œfont-size,é»˜è®¤æ˜¯æµè§ˆå™¨çš„16pxï¼Œé‚£ä¹ˆx-heightå€¼å·®ä¸å¤šæ˜¯font-sizeçš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œå°±æ˜¯5pxå·¦å³ã€‚</p><h3 id="line-heightå±…ä¸­åŸç†"><a href="#line-heightå±…ä¸­åŸç†" class="headerlink" title="line-heightå±…ä¸­åŸç†"></a>line-heightå±…ä¸­åŸç†</h3><p>æˆ‘ä»¬ç»å¸¸ä¼šåˆ©ç”¨å°†heightäºline-heightè®¾ç½®æˆä¸€è‡´è¿›è¡Œå±…ä¸­ï¼Œå¦‚ä¸‹ï¼Œç„¶è€Œï¼Œè¿™ä¸ªåŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…¶å®å®ƒçš„å±…ä¸­åˆ©ç”¨çš„æ˜¯è¡Œç›’å­ä¸Šä¸‹ä¸¤ä¸ªåŠé“…ç©ºæ°¸è¿œç›¸ç­‰å¾—åˆ°çš„,ä¸‹é¢ä¼šæ…¢æ…¢è®²è§£:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">height: 100%;</span><br><span class="line">line-height: 100%;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">    background: #00bcd4b5;</span><br><span class="line">    height: 75px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> &lt;div class=&quot;wrap&quot;&gt;</span><br><span class="line">   ç»å…¸good morning, koa2!</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶wrapå†…çš„æ–‡å­—ä¸å±…ä¸­ï¼Œè¿™ä¸ªä¸å±…ä¸­ä¸ â€œç»å…¸good morning, koa2!â€è¿™æ®µæ–‡æœ¬ç”Ÿæˆçš„è¡Œç›’å­æœ‰è«å¤§å…³ç³»ï¼Œ<br>æ ¹æ®line-heighté»˜è®¤å€¼æ˜¯1.2ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºè¡Œç›’å­çš„line-height,ä¸‹é¢æ˜¯è¿™ä¸²ä»£ç çš„æ•ˆæœå›¾å’Œæ–‡æœ¬è¡Œç”Ÿæˆçš„è¡Œç›’å­ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/line-height.jpg" alt title class>                <p></p>            </figure></p><p>å…¶ä»–ä¸å˜ï¼Œæˆ‘ä»¬æŠŠline-heightè®¾ç½®ä¸º75px:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.wrap&#123;</span><br><span class="line">    line-height: 75px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å±…ä¸­äº†ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/line-height2.jpg" alt title class>                <p></p>            </figure><br>ç”±å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨heightä¸line-heightç›¸åŒå€¼è¾¾åˆ°å±…ä¸­çš„ï¼Œå…¶å®æ˜¯åˆ©ç”¨äº†è¡Œç›’å­åŠé“…ç©ºç›¸ç­‰çš„ç‰¹æ€§,å› ä¸ºåœ¨è¡Œç›’å­å†…ï¼Œæ–‡æœ¬ç›¸å¯¹äºè¡Œç›’å­ï¼Œæ°¸è¿œæ˜¯å±…ä¸­çš„ï¼Œè¡Œç›’å­çš„é«˜åº¦å–å†³äºline-heightï¼Œå¦‚ä½•å°†line-heightçš„å€¼è®¾æˆä¸heightä¸€è‡´ï¼Œå°±è¾¾åˆ°äº†ï¼Œheighté«˜åº¦ä¸‹çš„æ–‡å­—å±…ä¸­äº†ã€‚</p><h2 id="çˆ¶å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ"><a href="#çˆ¶å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ" class="headerlink" title="çˆ¶å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ"></a>çˆ¶å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ</h2><p>è¿™é‡Œè¯´çš„çˆ¶å…ƒç´ ï¼Œå°±æ˜¯ä¸Šé¢é€šç¯‡éƒ½åœ¨è®²çš„çˆ¶å…ƒç´ ,è¿™ä¸ªçˆ¶å…ƒç´ ä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªdivï¼Œdivå†…æœ‰æ–‡å­—ï¼Œæœ‰inline-blockå…ƒç´ ï¼Œæœ‰imgï¼›ï¼ˆimgä¹Ÿæ˜¯ä¸€ç§inline-blockï¼‰ï¼Œ<br>é‚£ä¹ˆè¿™ä¸ªçˆ¶å…ƒç´ ä¸è¡Œå†…å…ƒç´ å‚ç›´å¯¹é½ç›¸å…³çš„æœ‰å“ªäº›æ¦‚å¿µæˆ–å±æ€§å‘¢ï¼Œç›´æ¥ä¸Šå›¾è¯´æ˜ï¼š<br><figure class="image-box">                <img src="/image/css/vertical-align/father.jpg" alt title class>                <p></p>            </figure></p><p>ä¸ºä»€ä¹ˆè¿™äº›å±æ€§ä¸è¡Œå†…å…ƒç´ å‚ç›´å¯¹é½ç›¸å…³å‘¢ï¼Œè¿™éƒ½æ˜¯å› ä¸ºvertical-align,æˆ‘ä»¬è¯´è¿‡ï¼Œvertical-alignå°±æ˜¯ä¸ºäº†è¡Œå†…å…ƒç´ å¯¹é½è€Œç”Ÿè€Œåˆ›é€ çš„ï¼Œ<br>vertical-alignæœ‰ä»¥ä¸‹å¯¹é½æ–¹å¼ï¼Œå¯å‚è€ƒmdnï¼š<br>baseline | sub | super | text-top | text-bottom | middle | top | bottom | <percentage> | <length><br>è¿™äº›å¯¹é½æ–¹å¼å°±æ˜¯åŸºäºçˆ¶å…ƒç´ çš„ç›¸å…³å±æ€§ã€‚<br>å…·ä½“ä¿¡æ¯å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align" target="_blank" rel="noopener">mdn</a></length></percentage></p><h2 id="è¡Œå†…å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ"><a href="#è¡Œå†…å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ" class="headerlink" title="è¡Œå†…å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ"></a>è¡Œå†…å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„æ¦‚å¿µ</h2><p>è¿™é‡Œçš„è¡Œå†…å…ƒç´ ï¼ŒåŒ…å«äº†inline-blockã€imgå…ƒç´ ï¼›<br>è¡Œå†…å…ƒç´ ä¸å¯¹é½ç›¸å…³çš„ æ˜¯ å…ƒç´ ä¸­éƒ¨ã€é¡¶éƒ¨ã€åº•éƒ¨ã€åŸºçº¿ï¼›<br>å‰ä¸‰è€…å¥½ç†è§£ï¼Œåªæœ‰åŸºçº¿è¿™ä¸ªä¸å¥½ç†è§£ï¼Œè¯·å‚è€ƒã€Šå¦‚ä½•ç¡®å®šè‡ªå·±çš„baselineã€‹</p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>å…³äºå¦‚ä½•åˆ’å®šçˆ¶å…ƒç´ çš„baselineï¼Œç›®å‰å°±ç®—å®˜æ–¹ä¹Ÿæ²¡æœ‰ä¸€ä¸ªå¾ˆæ¸…æ™°çš„å®šä¹‰ï¼Œä¸Šæ–‡ä¸­å…³äºbaselineçš„åˆ’å®šï¼Œåœ¨å‚è€ƒäº†å¾ˆå¤šèµ„æ–™åï¼Œå¾ˆå¤šéƒ½åŸºäºè¯•éªŒè€Œæ¥,è¯»è€…è¯·åˆ†åˆ«å¥½ã€‚<br>å¦å¤–å°±å‚è€ƒèµ„æ–™è€Œè¨€ï¼Œmdné‡Œé¢è®²å¾—å¾ˆå¥½ï¼Œè§£é‡Šäº†vertical-alignç‰¹æ€§ï¼Œè¿˜è®²äº†å…ƒç´ çš„åŸºçº¿ç¡®å®šã€‚</p><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align" target="_blank" rel="noopener">MDN</a><br><a href="https://www.w3schools.com/cssref/pr_pos_vertical-align.asp" target="_blank" rel="noopener">å¤–ç½‘w3c</a><br><a href="http://www.ituring.com.cn/book/1910" target="_blank" rel="noopener">ç²¾é€šcss é«˜çº§webæ ‡å‡†è§£å†³æ–¹æ¡ˆ</a></p>]]></content>
      
      
      <categories>
          
          <category> css </category>
          
      </categories>
      
      
        <tags>
            
            <tag> css </tag>
            
            <tag> vertical-align </tag>
            
            <tag> baseline </tag>
            
            <tag> è¡Œç›’å­ </tag>
            
            <tag> x-height </tag>
            
            <tag> line-height </tag>
            
            <tag> åŠé“…ç©º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>d3å›¾å½¢ã€demoè®²è§£ã€ä½¿ç”¨ç»éªŒ</title>
      <link href="/2020/05/01/d3_layout/"/>
      <url>/2020/05/01/d3_layout/</url>
      
        <content type="html"><![CDATA[<h2 id="d3å›¾å½¢å›¾è§£"><a href="#d3å›¾å½¢å›¾è§£" class="headerlink" title="d3å›¾å½¢å›¾è§£"></a>d3å›¾å½¢å›¾è§£</h2><figure class="image-box">                <img src="/image/d3/all/images.jpg" alt title class>                <p></p>            </figure><h2 id="æ ‘å›¾"><a href="#æ ‘å›¾" class="headerlink" title="æ ‘å›¾"></a>æ ‘å›¾</h2><h3 id="æ ‘å›¾å¸ƒå±€API"><a href="#æ ‘å›¾å¸ƒå±€API" class="headerlink" title="æ ‘å›¾å¸ƒå±€API"></a>æ ‘å›¾å¸ƒå±€API</h3><h4 id="d3-layout-tree-åˆ›å»ºä¸€ä¸ªæ ‘å›¾å¸ƒå±€"><a href="#d3-layout-tree-åˆ›å»ºä¸€ä¸ªæ ‘å›¾å¸ƒå±€" class="headerlink" title="d3.layout.tree() åˆ›å»ºä¸€ä¸ªæ ‘å›¾å¸ƒå±€"></a>d3.layout.tree() åˆ›å»ºä¸€ä¸ªæ ‘å›¾å¸ƒå±€</h4><h4 id="tree-size-è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”"><a href="#tree-size-è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”" class="headerlink" title="tree.size([]) è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”"></a>tree.size([]) è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”</h4><h4 id="tree-separation-separation-è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”"><a href="#tree-separation-separation-è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”" class="headerlink" title="tree.separation([separation]) è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”"></a>tree.separation([separation]) è®¾ç½®ç›¸é‚»èŠ‚ç‚¹é—´éš”</h4><h4 id="tree-nodes-root-æ ¹æ®root-è®¡ç®—è·å–èŠ‚ç‚¹æ•°ç»„"><a href="#tree-nodes-root-æ ¹æ®root-è®¡ç®—è·å–èŠ‚ç‚¹æ•°ç»„" class="headerlink" title="tree.nodes(root) æ ¹æ®root è®¡ç®—è·å–èŠ‚ç‚¹æ•°ç»„"></a>tree.nodes(root) æ ¹æ®root è®¡ç®—è·å–èŠ‚ç‚¹æ•°ç»„</h4><h4 id="tree-links-nodes-æ ¹æ®nodes-è®¡ç®—è·å–è¿çº¿æ•°ç»„"><a href="#tree-links-nodes-æ ¹æ®nodes-è®¡ç®—è·å–è¿çº¿æ•°ç»„" class="headerlink" title="tree.links(nodes) æ ¹æ®nodes è®¡ç®—è·å–è¿çº¿æ•°ç»„"></a>tree.links(nodes) æ ¹æ®nodes è®¡ç®—è·å–è¿çº¿æ•°ç»„</h4><h3 id="èŠ‚ç‚¹å¯¹è±¡-nodes"><a href="#èŠ‚ç‚¹å¯¹è±¡-nodes" class="headerlink" title="èŠ‚ç‚¹å¯¹è±¡(nodes)"></a>èŠ‚ç‚¹å¯¹è±¡(nodes)</h3><h4 id="parent-çˆ¶èŠ‚ç‚¹"><a href="#parent-çˆ¶èŠ‚ç‚¹" class="headerlink" title="parent çˆ¶èŠ‚ç‚¹"></a>parent çˆ¶èŠ‚ç‚¹</h4><h4 id="children-å­èŠ‚ç‚¹"><a href="#children-å­èŠ‚ç‚¹" class="headerlink" title="children å­èŠ‚ç‚¹"></a>children å­èŠ‚ç‚¹</h4><h4 id="depth-èŠ‚ç‚¹æ·±åº¦"><a href="#depth-èŠ‚ç‚¹æ·±åº¦" class="headerlink" title="depth èŠ‚ç‚¹æ·±åº¦"></a>depth èŠ‚ç‚¹æ·±åº¦</h4><h4 id="x-èŠ‚ç‚¹xåæ ‡"><a href="#x-èŠ‚ç‚¹xåæ ‡" class="headerlink" title="x èŠ‚ç‚¹xåæ ‡"></a>x èŠ‚ç‚¹xåæ ‡</h4><h4 id="y-èŠ‚ç‚¹yåæ ‡"><a href="#y-èŠ‚ç‚¹yåæ ‡" class="headerlink" title="y èŠ‚ç‚¹yåæ ‡"></a>y èŠ‚ç‚¹yåæ ‡</h4><h3 id="è¿çº¿-links"><a href="#è¿çº¿-links" class="headerlink" title="è¿çº¿(links)"></a>è¿çº¿(links)</h3><h4 id="source-å‰ç«¯èŠ‚ç‚¹"><a href="#source-å‰ç«¯èŠ‚ç‚¹" class="headerlink" title="source å‰ç«¯èŠ‚ç‚¹"></a>source å‰ç«¯èŠ‚ç‚¹</h4><h4 id="target-åç«¯èŠ‚ç‚¹"><a href="#target-åç«¯èŠ‚ç‚¹" class="headerlink" title="target åç«¯èŠ‚ç‚¹"></a>target åç«¯èŠ‚ç‚¹</h4><h3 id="å®ç°æ­¥éª¤"><a href="#å®ç°æ­¥éª¤" class="headerlink" title="å®ç°æ­¥éª¤"></a>å®ç°æ­¥éª¤</h3><h4 id="è®¾ç½®svg-å®½é«˜ï¼Œæ·»åŠ gï¼Œè®¾ç½®ä½ç½®"><a href="#è®¾ç½®svg-å®½é«˜ï¼Œæ·»åŠ gï¼Œè®¾ç½®ä½ç½®" class="headerlink" title="è®¾ç½®svg å®½é«˜ï¼Œæ·»åŠ gï¼Œè®¾ç½®ä½ç½®"></a>è®¾ç½®svg å®½é«˜ï¼Œæ·»åŠ gï¼Œè®¾ç½®ä½ç½®</h4><h4 id="ç”Ÿæˆæ ‘çŠ¶å¸ƒå±€ï¼Œè®¾ç½®å°ºå¯¸"><a href="#ç”Ÿæˆæ ‘çŠ¶å¸ƒå±€ï¼Œè®¾ç½®å°ºå¯¸" class="headerlink" title="ç”Ÿæˆæ ‘çŠ¶å¸ƒå±€ï¼Œè®¾ç½®å°ºå¯¸"></a>ç”Ÿæˆæ ‘çŠ¶å¸ƒå±€ï¼Œè®¾ç½®å°ºå¯¸</h4><h4 id="å¯¹è§’çº¿ç”Ÿæˆå™¨"><a href="#å¯¹è§’çº¿ç”Ÿæˆå™¨" class="headerlink" title="å¯¹è§’çº¿ç”Ÿæˆå™¨"></a>å¯¹è§’çº¿ç”Ÿæˆå™¨</h4><h4 id="è¯·æ±‚æ•°æ®"><a href="#è¯·æ±‚æ•°æ®" class="headerlink" title="è¯·æ±‚æ•°æ®"></a>è¯·æ±‚æ•°æ®</h4><ul><li>è·å–nodesèŠ‚ç‚¹æ•°ç»„å’Œlinkè¿æ¥çº¿æ•°ç»„</li><li>ç”Ÿæˆè¿çº¿</li><li>ç”ŸæˆèŠ‚ç‚¹</li><li>ç»™èŠ‚ç‚¹æ·»åŠ åœ†åœˆï¼Œè®¾ç½®åŠå¾„</li><li>ç»™èŠ‚ç‚¹æ·»åŠ æ–‡æœ¬ã€è®¾ç½®æ–‡æœ¬çš„æ ·å¼ ä½ç½®<h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3>ä¸‹é¢ä»£ç éƒ½åŸºäºä»¥ä¸‹ä»£ç ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var svg = d3.select(&quot;body&quot;)</span><br><span class="line">                .append(&apos;svg&apos;)</span><br><span class="line">                .attr(&apos;width&apos;, 800)</span><br><span class="line">                .attr(&apos;height&apos;, 800);</span><br></pre></td></tr></table></figure></li></ul><p>ä»¥ä¸Šæ˜¯d3å¸¸ç”¨å†™æ³•ï¼Œä¸‹é¢ç¤ºä¾‹çš†ä»¥æ­¤ä¸ºåŸºç¡€å±•å¼€ï¼š</p><h3 id="æ ‘å›¾demo"><a href="#æ ‘å›¾demo" class="headerlink" title="æ ‘å›¾demo"></a>æ ‘å›¾demo</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸Šé¢ã€Šæ ‘å›¾ã€‹ä»‹ç»çš„ï¼Œåœ¨è¿™ä¸ªdemoä¸Šéƒ½æœ‰ä½“ç°ã€‚<br>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/d3/layout/tree1.jpg" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var nodes = tree.nodes(root),</span><br><span class="line">  links = tree.links(nodes);</span><br></pre></td></tr></table></figure><h4 id="è½¬æ¢åæ ‡"><a href="#è½¬æ¢åæ ‡" class="headerlink" title="è½¬æ¢åæ ‡"></a>è½¬æ¢åæ ‡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// diagonal ç”Ÿæˆå¯¹è§’çº¿</span><br><span class="line">       var diagonal = d3.svg.diagonal()</span><br><span class="line">               // è½¬æ¢åæ ‡è½´æ–¹å‘</span><br><span class="line">               .projection(function (d) &#123;</span><br><span class="line">                       return [d.y, d.x];</span><br><span class="line">               &#125;);</span><br></pre></td></tr></table></figure><h4 id="enter-æ—¶éšè—ï¼Œ-updateæ—¶-æ˜¾ç¤ºï¼š"><a href="#enter-æ—¶éšè—ï¼Œ-updateæ—¶-æ˜¾ç¤ºï¼š" class="headerlink" title="enter æ—¶éšè—ï¼Œ updateæ—¶ æ˜¾ç¤ºï¼š"></a>enter æ—¶éšè—ï¼Œ updateæ—¶ æ˜¾ç¤ºï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// .attr(&apos;r&apos;, 0) æ„ä¸º éšè—ï¼Œä¼šåœ¨ä¸‹é¢éƒ½ updateNodes.select(&quot;circle&quot;) æ›´æ–°æ—¶ï¼Œæ˜¾ç¤ºå‡ºæ¥ .attr(&quot;r&quot;, 6)</span><br><span class="line">               enterNodes.append(&apos;circle&apos;)</span><br><span class="line">                       .attr(&apos;r&apos;, 0)</span><br><span class="line">                       .style(&apos;fill&apos;, (d) =&gt; d._children ? &apos;red&apos; : &apos;#fff&apos;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">updateNodes.select(&quot;circle&quot;)</span><br><span class="line">                       .attr(&quot;r&quot;, 6)</span><br><span class="line">                       .style(&quot;fill&quot;, function (d) &#123;</span><br><span class="line">                               return d._children ? &quot;red&quot; : &quot;#fff&quot;;</span><br><span class="line">                       &#125;);</span><br></pre></td></tr></table></figure><h4 id="è¿ç‚¹ç¡®å®šä¸€çº¿"><a href="#è¿ç‚¹ç¡®å®šä¸€çº¿" class="headerlink" title="è¿ç‚¹ç¡®å®šä¸€çº¿"></a>è¿ç‚¹ç¡®å®šä¸€çº¿</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//å¼€å§‹ç»˜åˆ¶ç‚¹ï¼Œäº®ç‚¹æˆä¸€çº¿ï¼Œèµ·å§‹ç‚¹-source ç»ˆç‚¹-target äºŒç‚¹ç›¸è¿ï¼Œå°±æ˜¯è¿çº¿</span><br><span class="line">//å¦‚æœèµ·å§‹ç‚¹å’Œç»ˆç‚¹åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œè¯´æ˜è¿çº¿å°±æ˜¯ä¸€ä¸ªç‚¹</span><br><span class="line">.attr(&quot;d&quot;, function (d) &#123;</span><br><span class="line">        var o = &#123;</span><br><span class="line">                x: source.x0,</span><br><span class="line">                y: source.y0</span><br><span class="line">        &#125;;</span><br><span class="line">        return diagonal(&#123;</span><br><span class="line">                source: o,</span><br><span class="line">                target: o</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨å¯¹è§’çº¿ç”Ÿæˆå™¨</span><br><span class="line">//è¿çº¿æ²¡æœ‰åƒä¸Šé¢ä¸€æ ·æŒ‡æ˜èµ·å§‹ç‚¹å’Œç»ˆç‚¹ï¼Œå°±æ„å‘³ç€æ˜¯ä¸€ä¸ªæ­£å¸¸çš„è¿çº¿</span><br><span class="line">.attr(&quot;d&quot;, diagonal);</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒä¸demoåœ°å€"><a href="#å‚è€ƒä¸demoåœ°å€" class="headerlink" title="å‚è€ƒä¸demoåœ°å€"></a>å‚è€ƒä¸demoåœ°å€</h4><p><a href="https://github.com/YeWills/nodemon-server-template/tree/d3-demo" target="_blank" rel="noopener">demoåœ°å€, æ‰¾åˆ°å…¶ä¸­çš„ circle d3 demo</a><br><a href="https://ke.qq.com/course/306436?taid=2254411154107652" target="_blank" rel="noopener">æ›´å¤šè®²è§£çœ‹è§†é¢‘</a></p><h2 id="èµ°åŠ¿å›¾"><a href="#èµ°åŠ¿å›¾" class="headerlink" title="èµ°åŠ¿å›¾"></a>èµ°åŠ¿å›¾</h2><h3 id="demoä»‹ç»ä¸d3ä½¿ç”¨ç»éªŒ"><a href="#demoä»‹ç»ä¸d3ä½¿ç”¨ç»éªŒ" class="headerlink" title="demoä»‹ç»ä¸d3ä½¿ç”¨ç»éªŒ"></a>demoä»‹ç»ä¸d3ä½¿ç”¨ç»éªŒ</h3><h4 id="demoä¸æ•ˆæœ"><a href="#demoä¸æ•ˆæœ" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h4><p><a href="https://yewills.github.io/d3-note-demo/pages/sar-chart/">èµ°åŠ¿å›¾æ•ˆæœ</a><br><a href="https://github.com/YeWills/d3-note-demo/blob/master/pages/sar-chart/" target="_blank" rel="noopener">demoåœ°å€</a></p><h4 id="è®°å½•d3ä½¿ç”¨ç»éªŒ"><a href="#è®°å½•d3ä½¿ç”¨ç»éªŒ" class="headerlink" title="è®°å½•d3ä½¿ç”¨ç»éªŒ"></a>è®°å½•d3ä½¿ç”¨ç»éªŒ</h4><p>æœ¬demoçš„ç¬”è®°ç”¨äºåœ¨äºè®°å½•d3çš„ä½¿ç”¨ç»éªŒï¼Œé€šè¿‡demoçš„ç¼–å†™ï¼Œè®°ä¸‹d3çš„ä½¿ç”¨ç»éªŒï¼Œæ–¹ä¾¿ä»¥åä½¿ç”¨d3æ—¶å€Ÿé‰´ã€‚</p><h3 id="ä¸€åˆ‡éƒ½æ˜¯-update-enter-exit"><a href="#ä¸€åˆ‡éƒ½æ˜¯-update-enter-exit" class="headerlink" title="ä¸€åˆ‡éƒ½æ˜¯ update enter exit"></a>ä¸€åˆ‡éƒ½æ˜¯ update enter exit</h3><h4 id="æ›´æ–°ååŸæ¥çš„svgå›¾æœªæ¶ˆé™¤"><a href="#æ›´æ–°ååŸæ¥çš„svgå›¾æœªæ¶ˆé™¤" class="headerlink" title="æ›´æ–°ååŸæ¥çš„svgå›¾æœªæ¶ˆé™¤"></a>æ›´æ–°ååŸæ¥çš„svgå›¾æœªæ¶ˆé™¤</h4><p>ä½¿ç”¨d3é‡æ–°ç»˜åˆ¶å›¾å½¢æ—¶ï¼Œå‘ç°åŸæ¥ç»˜åˆ¶çš„å›¾å½¢å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œå½“æ—¶ä½¿ç”¨äº†jsæ¥remove domï¼Œå‘ç°ä¸èƒ½è§£å†³é—®é¢˜ã€‚<br>åŸæ¥æ­£ç¡®çš„è§£å†³ä¹‹é“åœ¨äºd3çš„æœºåˆ¶ï¼Œé™¤éä½ é‡æ–°åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œå¦åˆ™ç»˜åˆ¶çš„å›¾å½¢éƒ½éœ€é€šè¿‡d3è¿›è¡Œæ›´æ–°ã€æ–°å¢ã€åˆ é™¤ï¼Œå¯¹åº”update enter exitã€‚</p><h4 id="å¦‚ä½•é‡ç»˜ä¸æ›´æ–°"><a href="#å¦‚ä½•é‡ç»˜ä¸æ›´æ–°" class="headerlink" title="å¦‚ä½•é‡ç»˜ä¸æ›´æ–°"></a>å¦‚ä½•é‡ç»˜ä¸æ›´æ–°</h4><p>å¦‚ä¸Šè®²è§£çš„ï¼Œåœ¨d3ä¸­ï¼Œå¿…é¡»é€šè¿‡update enter exitæ¥è¿›è¡Œé‡ç»˜ä¸æ›´æ–°ï¼Œä»¥åŠåˆ é™¤ã€‚</p><h4 id="update-enter-exitå¿…é¡»é…åˆdataæ‰å¾—åˆ°"><a href="#update-enter-exitå¿…é¡»é…åˆdataæ‰å¾—åˆ°" class="headerlink" title="update enter exitå¿…é¡»é…åˆdataæ‰å¾—åˆ°"></a>update enter exitå¿…é¡»é…åˆdataæ‰å¾—åˆ°</h4><p>å‚è€ƒ åšå®¢ã€Šd3çš„ä¸‰ç§æ¨¡å¼ åŠ appendã€dataã€selectAll  â€“ data()  â€“  selectAll data enter exit çš„è”ç³»ã€‹ã€‚</p><h4 id="ä¸€åˆ‡ä»ä¸Šé¢äºŒè€…å¼€å§‹åˆ°ç»“æŸ"><a href="#ä¸€åˆ‡ä»ä¸Šé¢äºŒè€…å¼€å§‹åˆ°ç»“æŸ" class="headerlink" title="ä¸€åˆ‡ä»ä¸Šé¢äºŒè€…å¼€å§‹åˆ°ç»“æŸ"></a>ä¸€åˆ‡ä»ä¸Šé¢äºŒè€…å¼€å§‹åˆ°ç»“æŸ</h4><p>åŸºäºä»¥ä¸Šçš„åˆ†æï¼Œåœ¨ä½¿ç”¨d3ç”»å›¾æ—¶ï¼Œä¸€åˆ‡è¦ä»update enter exitå¼€å§‹ï¼Œåœ¨åˆšå¼€å§‹ç”»å›¾æ—¶ï¼Œå°±è¦å»ºç«‹è¿™ä¸‰è€…çš„æ¨¡å‹ï¼Œæ›´å¤šä¸‰è€…çš„ä½¿ç”¨ï¼Œè¯·æŸ¥çœ‹ ã€Šupdate enter exitçš„ä½¿ç”¨ã€‹</p><h4 id="ä¸‰è€…ä½¿ç”¨çš„ç»å…¸demo"><a href="#ä¸‰è€…ä½¿ç”¨çš„ç»å…¸demo" class="headerlink" title="ä¸‰è€…ä½¿ç”¨çš„ç»å…¸demo"></a>ä¸‰è€…ä½¿ç”¨çš„ç»å…¸demo</h4><p><a href="https://github.com/YeWills/d3-note-demo/tree/d3-demo/pages/wangjingzhi/fifth.html" target="_blank" rel="noopener">æ•£ç‚¹å›¾ demo</a><br><a href="https://github.com/YeWills/d3-note-demo/tree/d3-demo/pages/d3-jt-book/chapter4/4.8/4-8-2-update-data.html" target="_blank" rel="noopener">æŸ±çŠ¶å›¾ demo</a></p><h3 id="update-enter-exitçš„ä½¿ç”¨"><a href="#update-enter-exitçš„ä½¿ç”¨" class="headerlink" title="update enter exitçš„ä½¿ç”¨"></a>update enter exitçš„ä½¿ç”¨</h3><h4 id="å…ˆå»ºç«‹æ¨¡å‹"><a href="#å…ˆå»ºç«‹æ¨¡å‹" class="headerlink" title="å…ˆå»ºç«‹æ¨¡å‹"></a>å…ˆå»ºç«‹æ¨¡å‹</h4><p>ä¸‹é¢æ˜¯ç»å…¸çš„d3â€™å»ºæ¨¡â€™ï¼Œä¸€èˆ¬ç”»å›¾ä¸€å¼€å§‹éƒ½æ˜¯åˆ›å»ºå¥½ä¸‹é¢ä»£ç ï¼Œåé¢ç»˜å›¾éƒ½åŸºäºæ­¤ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> update = svg.selectAll(<span class="string">".MyCircle"</span>)</span><br><span class="line">.data(pointDatas);</span><br><span class="line"><span class="keyword">var</span> enter = update.enter();</span><br><span class="line"><span class="keyword">var</span> exit = update.exit();</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢æ˜¯åŸºäºä¸Šé¢ä»£ç çš„ç»˜å›¾ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">enter.append(<span class="string">"circle"</span>)</span><br><span class="line">.attr(<span class="string">"class"</span>, <span class="string">"MyCircle"</span>)</span><br><span class="line">.attr(<span class="string">"r"</span>, <span class="number">4.5</span>)</span><br><span class="line">.attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">point</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"translate("</span> + focusX + <span class="string">","</span> + focusY + <span class="string">")"</span></span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"fill"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">d,i</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> handleColor(&#123;<span class="attr">type</span>:d[<span class="number">3</span>]&#125;, colors);</span><br><span class="line">&#125;)</span><br><span class="line">       </span><br><span class="line">       update.attr(<span class="string">"transform"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">point</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"translate("</span> + focusX + <span class="string">","</span> + focusY + <span class="string">")"</span></span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"fill"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">d,i</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> handleColor(&#123;<span class="attr">type</span>:d[<span class="number">3</span>]&#125;, colors);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">exit.remove();</span><br></pre></td></tr></table></figure></p><h4 id="enterè´Ÿè´£å¢åŠ å›¾å½¢"><a href="#enterè´Ÿè´£å¢åŠ å›¾å½¢" class="headerlink" title="enterè´Ÿè´£å¢åŠ å›¾å½¢"></a>enterè´Ÿè´£å¢åŠ å›¾å½¢</h4><p>å‚è€ƒä¸Šé¢ä»£ç ã€‚</p><h4 id="updateæ˜¯enterç¼©å‡ç‰ˆ"><a href="#updateæ˜¯enterç¼©å‡ç‰ˆ" class="headerlink" title="updateæ˜¯enterç¼©å‡ç‰ˆ"></a>updateæ˜¯enterç¼©å‡ç‰ˆ</h4><p>å¦‚ä¸Šé¢çš„ä»£ç ï¼Œupdateæ˜¯åœ¨enter appendçš„circleåŸºç¡€ä¸Šï¼Œå¯¹è¿™ä¸ªcircleçš„æ›´æ–°çš„ã€‚</p><h4 id="å¦‚æœä¸æ›´æ–°ï¼Œä½¿ç”¨enterå°±å¤Ÿäº†"><a href="#å¦‚æœä¸æ›´æ–°ï¼Œä½¿ç”¨enterå°±å¤Ÿäº†" class="headerlink" title="å¦‚æœä¸æ›´æ–°ï¼Œä½¿ç”¨enterå°±å¤Ÿäº†"></a>å¦‚æœä¸æ›´æ–°ï¼Œä½¿ç”¨enterå°±å¤Ÿäº†</h4><p>å¦‚æœå›¾å½¢æ²¡æœ‰æ›´æ–°é‡ç»˜ï¼Œå°±ä¸å­˜åœ¨æ›´æ–°ä¸åˆ é™¤ï¼Œåªä½¿ç”¨enterå°±å¤Ÿäº†ã€‚</p><h4 id="è®°å¾—ä½¿ç”¨exit-remove"><a href="#è®°å¾—ä½¿ç”¨exit-remove" class="headerlink" title="è®°å¾—ä½¿ç”¨exit.remove()"></a>è®°å¾—ä½¿ç”¨exit.remove()</h4><p>è¿™æ‰æ˜¯d3åˆ é™¤å›¾å½¢çš„æ­£ç¡®å§¿æ€ã€‚</p><h3 id="d3çš„update-enter-exit-ä¸reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#d3çš„update-enter-exit-ä¸reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="d3çš„update enter exit ä¸reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>d3çš„update enter exit ä¸reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3><p>d3çš„update enter exitå¾ˆåƒreactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæœ‰didmount unmountï¼Œæœ‰willupdate didupdate render ç­‰ç­‰ã€‚</p><h3 id="è®¾ç½®ä¸€ä¸ªæ•°ç»„çš„æŠ€å·§"><a href="#è®¾ç½®ä¸€ä¸ªæ•°ç»„çš„æŠ€å·§" class="headerlink" title="è®¾ç½®ä¸€ä¸ªæ•°ç»„çš„æŠ€å·§"></a>è®¾ç½®ä¸€ä¸ªæ•°ç»„çš„æŠ€å·§</h3><p>æœ‰æ—¶å€™å¯ä»¥è®¾ç½®ä¸€ä¸ªæ•°ç»„ï¼Œä»¥ä¾¿å¾—åˆ°update enter exitï¼Œä¸è¿‡è¿™ç§åšæ³•æ„Ÿè§‰æœ‰ç‚¹ä¹–ä¹–çš„ï¼Œå§‘ä¸”è¿™æ ·ç”¨ç€ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sar-chart/static/axis.js</span></span><br><span class="line"><span class="keyword">var</span> update = svg.selectAll(<span class="string">"g.xAxis"</span>)</span><br><span class="line">        <span class="comment">//data åé¢çš„æ•°ç»„[1]åªæ˜¯ä»»æ„å†™çš„ï¼Œåªè¦æ•°ç»„çš„é•¿åº¦ä¸º1å°±è¡Œï¼Œä½¿ç”¨dataï¼Œä»¥ä¾¿å¾—åˆ° enterã€exitç”¨æ¥é‡ç»˜ã€‚</span></span><br><span class="line">        .data([<span class="number">1</span>]);</span><br><span class="line"><span class="keyword">var</span> enter = update.enter();</span><br><span class="line"><span class="keyword">var</span> exit = update.exit();</span><br></pre></td></tr></table></figure></p><h3 id="import-module-çš„ç»å…¸ä½¿ç”¨"><a href="#import-module-çš„ç»å…¸ä½¿ç”¨" class="headerlink" title="import module çš„ç»å…¸ä½¿ç”¨"></a>import module çš„ç»å…¸ä½¿ç”¨</h3><p>æœ¬demoä¹Ÿæ˜¯æµè§ˆå™¨ç«¯ç›´æ¥ä½¿ç”¨importçš„ç»å…¸ä½¿ç”¨ï¼Œå…·ä½“æœ‰ä»¥ä¸‹æ³¨æ„ï¼š</p><h4 id="htmlå†…ä½¿ç”¨import"><a href="#htmlå†…ä½¿ç”¨import" class="headerlink" title="htmlå†…ä½¿ç”¨import"></a>htmlå†…ä½¿ç”¨import</h4><p>htmlå†…ä½¿ç”¨importï¼Œéœ€è¦ script type=â€moduleâ€.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span>&gt;</span> </span><br><span class="line"><span class="javascript">   <span class="keyword">import</span> &#123;dataset, padding, width, height, colors, handleColor&#125; <span class="keyword">from</span> <span class="string">'./static/config.js'</span>; </span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="jsæ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨import"><a href="#jsæ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨import" class="headerlink" title="jsæ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨import"></a>jsæ–‡ä»¶å¯ç›´æ¥ä½¿ç”¨import</h4><p>å¦‚æœ¬demoä¸­çš„config.jsï¼Œç›´æ¥ä½¿ç”¨äº†importï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//config.js</span><br><span class="line">import &#123;chartDatas&#125; from &apos;./data.js&apos;;</span><br></pre></td></tr></table></figure></p><h4 id="å¿…é¡»ä½¿ç”¨å…¨è·¯å¾„ï¼Œä¸”åŒ…å«æ–‡ä»¶åç¼€"><a href="#å¿…é¡»ä½¿ç”¨å…¨è·¯å¾„ï¼Œä¸”åŒ…å«æ–‡ä»¶åç¼€" class="headerlink" title="å¿…é¡»ä½¿ç”¨å…¨è·¯å¾„ï¼Œä¸”åŒ…å«æ–‡ä»¶åç¼€"></a>å¿…é¡»ä½¿ç”¨å…¨è·¯å¾„ï¼Œä¸”åŒ…å«æ–‡ä»¶åç¼€</h4><p>å› ä¸ºä½¿ç”¨æƒ¯äº†webpackï¼Œé€šå¸¸ä¸å–œæ¬¢å†™æ–‡ä»¶åç¼€ï¼Œå²‚çŸ¥è¿™äº›éƒ½æ˜¯webpackæ›¿æˆ‘ä»¬åšäº†é€»è¾‘å¤„ç†ï¼Œè€ŒåŸç”Ÿçš„jsä¸­ï¼Œæ²¡æœ‰åšä»»ä½•å¤„ç†ï¼Œå› æ­¤å¿…é¡»å†™æ˜åç¼€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å¯ä»¥è¯†åˆ«</span><br><span class="line">import &#123;chartDatas&#125; from &apos;./data.js&apos;;</span><br><span class="line"></span><br><span class="line">//ä¸å¯ä»¥è¯†åˆ«</span><br><span class="line">import &#123;chartDatas&#125; from &apos;./data&apos;;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> d3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>eggç¬”è®°</title>
      <link href="/2020/05/01/egg/"/>
      <url>/2020/05/01/egg/</url>
      
        <content type="html"><![CDATA[<h2 id="eggdemo"><a href="#eggdemo" class="headerlink" title="eggdemo"></a>eggdemo</h2><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>åˆ›å»ºé¡¹ç›®ï¼Œè¯¦ç»†å‚è€ƒeggå®˜ç½‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init egg --type=simple</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure></p><h3 id="ç¼–å†™mysql"><a href="#ç¼–å†™mysql" class="headerlink" title="ç¼–å†™mysql"></a>ç¼–å†™mysql</h3>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> egg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>d3ç¬”è®°</title>
      <link href="/2020/05/01/d3/"/>
      <url>/2020/05/01/d3/</url>
      
        <content type="html"><![CDATA[<h2 id="d3çŸ¥è¯†"><a href="#d3çŸ¥è¯†" class="headerlink" title="d3çŸ¥è¯†"></a>d3çŸ¥è¯†</h2><h3 id="d3æ–‡æ¡£ä»‹ç»"><a href="#d3æ–‡æ¡£ä»‹ç»" class="headerlink" title="d3æ–‡æ¡£ä»‹ç»"></a>d3æ–‡æ¡£ä»‹ç»</h3><h4 id="d3å„ç‰ˆæœ¬å˜åŒ–"><a href="#d3å„ç‰ˆæœ¬å˜åŒ–" class="headerlink" title="d3å„ç‰ˆæœ¬å˜åŒ–"></a>d3å„ç‰ˆæœ¬å˜åŒ–</h4><p><a href="https://github.com/d3/d3/blob/master/CHANGES.md" target="_blank" rel="noopener">å®˜ç½‘è‹±æ–‡</a></p><h3 id="d3å°çŸ¥è¯†ç‚¹æˆ–æŠ€å·§"><a href="#d3å°çŸ¥è¯†ç‚¹æˆ–æŠ€å·§" class="headerlink" title="d3å°çŸ¥è¯†ç‚¹æˆ–æŠ€å·§"></a>d3å°çŸ¥è¯†ç‚¹æˆ–æŠ€å·§</h3><h4 id="gx-call-xAxis-ä¸xAxis-gx-ç›¸ç­‰"><a href="#gx-call-xAxis-ä¸xAxis-gx-ç›¸ç­‰" class="headerlink" title="gx.call(xAxis)ä¸xAxis(gx)ç›¸ç­‰"></a>gx.call(xAxis)ä¸xAxis(gx)ç›¸ç­‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ç”Ÿæˆåº•éƒ¨è½´çº¿</span><br><span class="line">const xAxis = d3.axisBottom(xScale);</span><br><span class="line">//è®¾ç½®è½´çº¿åç§»ä½ç½®</span><br><span class="line">const gx = svg.append(&apos;g&apos;).attr(&apos;transform&apos;, `translate($&#123;padding.left&#125;,$&#123;height - padding.bottom&#125;)`);</span><br><span class="line">//ä¹Ÿå¯ä»¥å†™æˆxAxis(gx)</span><br><span class="line">gx.call(xAxis);</span><br></pre></td></tr></table></figure><h4 id="d3çš„å›¾å½¢ä¸å¸ƒå±€"><a href="#d3çš„å›¾å½¢ä¸å¸ƒå±€" class="headerlink" title="d3çš„å›¾å½¢ä¸å¸ƒå±€"></a>d3çš„å›¾å½¢ä¸å¸ƒå±€</h4><p>æŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€æ•£ç‚¹å›¾ æ˜¯d3å¸¸è§çš„å›¾å½¢ã€‚<br>é™¤ä»¥ä¸Šä¸‰ç§å›¾å½¢å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå›¾å½¢ä»–ä»¬ä½ç½®ä¸å›ºå®šï¼ˆè¿˜æœ‰å…¶ä»–è¯´æ³•ï¼‰ï¼Œæ¯”å¦‚é¥¼å›¾ï¼Œé¥¼å›¾å¯ä»¥åœ¨ä»»æ„ä½ç½®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦ä¸€ç§å…¶ä»–çš„ç”»å›¾æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å°±æ˜¯d3çš„å¸ƒå±€ã€‚<br>d3çš„å¸ƒå±€ç”¨æ³•ä¸º d3.layout.pie,d3çš„å¸ƒå±€æœ‰12ç§ï¼Œé¥¼å›¾æ˜¯å…¶ä¸­æœ€ç®€å•ä¸€ä¸ªã€‚</p><h4 id="d3çš„åæ ‡è½´æ–¹å‘"><a href="#d3çš„åæ ‡è½´æ–¹å‘" class="headerlink" title="d3çš„åæ ‡è½´æ–¹å‘"></a>d3çš„åæ ‡è½´æ–¹å‘</h4><p>å¦‚å›¾ï¼Œd3çš„åæ ‡è½´ï¼Œé»˜è®¤åŸç‚¹åœ¨å·¦ä¸Šè§’ï¼Œyçš„æ­£å€¼æ˜¯å‘ä¸‹çš„ã€‚<br><figure class="image-box">                <img src="/image/d3/all/axio.jpg" alt title class>                <p></p>            </figure></p><h3 id="transition-åŠ¨ç”»"><a href="#transition-åŠ¨ç”»" class="headerlink" title="transition åŠ¨ç”»"></a>transition åŠ¨ç”»</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>transitionç”¨æ¥å®šä¹‰åŠ¨ç”»ï¼Œ<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/mars/lesson09/test01.html" target="_blank" rel="noopener">ç‚¹å‡»çœ‹å®Œæ•´demo</a>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">circle1.transition()</span><br><span class="line">        .duration(3000)</span><br><span class="line">        .attr(&quot;cx&quot;,200)</span><br><span class="line">        .delay(2000)</span><br><span class="line">        .transition()</span><br><span class="line">        .duration(3000)</span><br><span class="line">        .attr(&quot;cx&quot;,400)</span><br><span class="line">        .each(&quot;start&quot;,function () &#123; d3.select(this).attr(&quot;fill&quot;,&quot;blue&quot;);&#125;  )</span><br><span class="line">        .transition()</span><br><span class="line">        .duration(3000)</span><br><span class="line">        .attr(&quot;cy&quot;,400)</span><br><span class="line">        .each(&quot;start&quot;,function () &#123; d3.select(this).attr(&quot;fill&quot;,&quot;red&quot;);&#125;  )</span><br></pre></td></tr></table></figure></p><h4 id="duration"><a href="#duration" class="headerlink" title="duration"></a>duration</h4><p>durationå®šä¹‰å»¶è¿Ÿ</p><h4 id="each"><a href="#each" class="headerlink" title="each"></a>each</h4><p>eachå¯ä»¥å®šä¹‰startã€endç­‰è¡Œä¸º</p><h3 id="ç”Ÿæˆåæ ‡è½´"><a href="#ç”Ÿæˆåæ ‡è½´" class="headerlink" title="ç”Ÿæˆåæ ‡è½´"></a>ç”Ÿæˆåæ ‡è½´</h3><h4 id="æ¦‚è¿°å’Œä»£ç "><a href="#æ¦‚è¿°å’Œä»£ç " class="headerlink" title="æ¦‚è¿°å’Œä»£ç "></a>æ¦‚è¿°å’Œä»£ç </h4><p>åæ ‡è½´ä¸€èˆ¬ç”¨æ¯”ä¾‹å°ºæ¥åšï¼Œç”¨åˆ°æ¯”ä¾‹å°ºå°±è¦ç”¨åˆ°ä¸¤ä¸ªæ¦‚å¿µ domain ä¸ rangeã€‚<br>domainä¸ºå®é™…æ•°æ®èŒƒå›´ï¼Œrangeä¸ºåæ ‡è½´çš„åˆ»åº¦èŒƒå›´ï¼Œè¿™ä¸ªåˆ»åº¦èŒƒå›´æ˜¯ç”¨æ¥è¡¨ç¤ºæ•°æ®èŒƒå›´çš„ã€‚<br>æ‰€ä»¥æ•°æ®èŒƒå›´ä¸åˆ»åº¦èŒƒå›´å½¢æˆä¸€å®šæ¯”ä¾‹ã€‚</p><p>ä»¥ä¸‹éƒ½åŸºäºä»¥ä¸‹ä¸¤ä¸ªdemoï¼š<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/BarChart-full.html" target="_blank" rel="noopener">å‚è€ƒdemoä¸€</a><br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/LineChart.html" target="_blank" rel="noopener">å‚è€ƒdemoäºŒ</a></p><p>ç”Ÿæˆåæ ‡è½´çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š<br>ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const dataset = [50, 43, 120, 87, 99, 167, 142];</span><br><span class="line">//scaleBandç”Ÿæˆåºæ•°åˆ†æ®µæ¯”ä¾‹å°ºï¼Œxè½´é€šå¸¸ä½¿ç”¨scaleBand</span><br><span class="line">const xScale = d3.scaleBand().domain(dataset.map((d, i) =&gt; i)).range([0, xAxisWidth]).padding(0.1);</span><br><span class="line">//scaleLinearç”Ÿæˆçº¿æ€§æ¯”ä¾‹å°ºï¼Œyè½´é€šå¸¸ä½¿ç”¨è¿™ä¸ª</span><br><span class="line">const yScale = d3.scaleLinear().domain([d3.max(dataset, d =&gt; d), 0]).range([0, yAxisWidth]);</span><br><span class="line"></span><br><span class="line">//ç”Ÿæˆåº•éƒ¨è½´çº¿</span><br><span class="line">const xAxis = d3.axisBottom(xScale);</span><br><span class="line">//ç”Ÿæˆå·¦ä¾§è½´çº¿</span><br><span class="line">const yAxis = d3.axisLeft(yScale);</span><br><span class="line"></span><br><span class="line">//è®¾ç½®è½´çº¿åç§»ä½ç½®</span><br><span class="line">const gx = svg.append(&apos;g&apos;).attr(&apos;transform&apos;, `translate($&#123;padding.left&#125;,$&#123;height - padding.bottom&#125;)`);</span><br><span class="line">const gy = svg.append(&apos;g&apos;).attr(&apos;transform&apos;, `translate($&#123;padding.left&#125;,$&#123;height - padding.bottom - yAxisWidth&#125;)`);</span><br><span class="line">gx.call(xAxis);</span><br><span class="line">gy.call(yAxis);</span><br></pre></td></tr></table></figure></p><h4 id="ç”Ÿæˆæ¯”ä¾‹å°ºçš„æ–¹æ³•-scaleLinear-scaleBand"><a href="#ç”Ÿæˆæ¯”ä¾‹å°ºçš„æ–¹æ³•-scaleLinear-scaleBand" class="headerlink" title="ç”Ÿæˆæ¯”ä¾‹å°ºçš„æ–¹æ³• scaleLinear\scaleBand"></a>ç”Ÿæˆæ¯”ä¾‹å°ºçš„æ–¹æ³• scaleLinear\scaleBand</h4><p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯ç”Ÿæˆæ¯”ä¾‹å°ºçš„æ–¹æ³•ï¼Œè§ã€Šæ¦‚è¿°å’Œä»£ç ã€‹ </p><h4 id="domain-range"><a href="#domain-range" class="headerlink" title="domain range"></a>domain range</h4><p>è§ã€Šæ¦‚è¿°å’Œä»£ç ã€‹ï¼›<br>é™¤ä»£ç ä¸­å¤–ï¼Œè¿˜å¯ä»¥è¿™æ ·ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const xScale = d3.scaleBand().domain([1,2,3,4]).range([11,23,25,67]);</span><br><span class="line">xScale(2)//23  ä¸€ä¸€å¯¹åº”å…³ç³»</span><br></pre></td></tr></table></figure></p><h4 id="ticks-ä¸æ˜¯ä¸€ä¸ªç¡®æ•°"><a href="#ticks-ä¸æ˜¯ä¸€ä¸ªç¡®æ•°" class="headerlink" title="ticks ä¸æ˜¯ä¸€ä¸ªç¡®æ•°"></a>ticks ä¸æ˜¯ä¸€ä¸ªç¡®æ•°</h4><p>ticksè®¾ç½®åæ ‡è½´çš„åˆ»åº¦æ•°é‡ï¼Œä½†ä¸æ˜¯ä½ è®¾ç½®å‡ ä¸ªï¼Œæœ€ç»ˆæ˜¾ç¤ºå‡ ä¸ªï¼Œd3ä¼šè‡ªåŠ¨è®¾ç½®åœ¨è®¾ç½®æ•°çš„ä¸Šä¸‹ã€‚<br>å‚è€ƒã€Šgroud ä¸ gã€‹çš„demo</p><h4 id="domain-range-çš„å•ä½"><a href="#domain-range-çš„å•ä½" class="headerlink" title="domain range çš„å•ä½"></a>domain range çš„å•ä½</h4><p>å¦‚ä¸‹ï¼Œ domainæ˜¯å€¼åŸŸï¼Œæ²¡æœ‰å•ä½ï¼Œçº¯ç²¹ä»£è¡¨æ•°å€¼å¤§å°ï¼›rangeæ˜¯åœ°åŸŸèŒƒå›´ï¼Œå•ä½æ˜¯pxï¼Œç”¨æ¥é™å®šåæ ‡è½´å åœ°é¢ç§¯å¤§å°ã€‚<br>demo å‚è€ƒã€Šgroud ä¸ gã€‹çš„demoã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var scalewidth = d3.scale.linear()</span><br><span class="line">                        .domain([0,80])</span><br><span class="line">                        .range([0,500])</span><br></pre></td></tr></table></figure></p><h3 id="ç”Ÿæˆå¯¹è§’çº¿-ç›´çº¿-â€“d3-svg-diagonal"><a href="#ç”Ÿæˆå¯¹è§’çº¿-ç›´çº¿-â€“d3-svg-diagonal" class="headerlink" title="ç”Ÿæˆå¯¹è§’çº¿(ç›´çº¿)â€“d3.svg.diagonal"></a>ç”Ÿæˆå¯¹è§’çº¿(ç›´çº¿)â€“d3.svg.diagonal</h3><h4 id="ä½¿ç”¨d3-svg-diagonalå®ç°"><a href="#ä½¿ç”¨d3-svg-diagonalå®ç°" class="headerlink" title="ä½¿ç”¨d3.svg.diagonalå®ç°"></a>ä½¿ç”¨d3.svg.diagonalå®ç°</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var canvas = d3.select(&quot;body&quot;)</span><br><span class="line">                 .append(&quot;svg&quot;)</span><br><span class="line">                 .attr(&quot;width&quot;,500)</span><br><span class="line">                 .attr(&quot;height&quot;,500);</span><br><span class="line"></span><br><span class="line">   var diagonal = d3.svg.diagonal()</span><br><span class="line">                       .source(&#123; x: 10 , y:10&#125;)</span><br><span class="line">                       .target(&#123; x: 300 , y: 300&#125;)</span><br><span class="line">  canvas.append(&quot;path&quot;)</span><br><span class="line">          .attr(&quot;fill&quot;,&quot;none&quot;)</span><br><span class="line">          .attr(&quot;stroke&quot;,&quot;black&quot;)</span><br><span class="line">          .attr(&quot;d&quot;,diagonal);</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨sourceå’Œtargetå®šä¹‰èµ·å§‹å’Œç»ˆç‚¹ä½ç½®"><a href="#ä½¿ç”¨sourceå’Œtargetå®šä¹‰èµ·å§‹å’Œç»ˆç‚¹ä½ç½®" class="headerlink" title="ä½¿ç”¨sourceå’Œtargetå®šä¹‰èµ·å§‹å’Œç»ˆç‚¹ä½ç½®"></a>ä½¿ç”¨sourceå’Œtargetå®šä¹‰èµ·å§‹å’Œç»ˆç‚¹ä½ç½®</h4><p>å‚è€ƒä¸Šé¢ä»£ç ã€‚</p><h3 id="ç”ŸæˆæŠ˜çº¿å›¾"><a href="#ç”ŸæˆæŠ˜çº¿å›¾" class="headerlink" title="ç”ŸæˆæŠ˜çº¿å›¾"></a>ç”ŸæˆæŠ˜çº¿å›¾</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¦‚å›¾ï¼Œåæ ‡è½´ç”Ÿæˆä»£ç åŒã€Šç”Ÿæˆåæ ‡è½´ã€‹ã€‚ä¸‹é¢çš„ä»£ç ä¸»è¦ä»‹ç»ç”ŸæˆæŠ˜çº¿å›¾çš„æŠ˜çº¿ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/LineChart.html" target="_blank" rel="noopener">demoåœ°å€</a><br><a href="https://www.bilibili.com/video/av13729975/?spm_id_from=333.788.videocard.1" target="_blank" rel="noopener">è§†é¢‘è®²è§£</a><br><figure class="image-box">                <img src="/image/d3/all/liner.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨d3çš„æ–¹æ³•æ¥ç”ŸæˆæŠ˜çº¿çš„path</span><br><span class="line"> const linePath = d3.line().x((d, i) =&gt; xScale(i) + padding.left + xScale.bandwidth() / 2)</span><br><span class="line">            .y(d =&gt; height - padding.bottom - (yScale(0) - yScale(d)));</span><br><span class="line">//å°†æ•°æ®ä¼ ç»™ä¸Šé¢å†™å¥½çš„ d3ç”Ÿæˆçº¿çš„pathæ–¹æ³•ï¼Œé¿å…æ‰‹åŠ¨å†™ç¹æ‚çš„path(è€Œè¿™æ­£æ˜¯d3çš„æœ¬èŒå·¥ä½œ)</span><br><span class="line">const line = svg.append(&apos;path&apos;).attr(&apos;d&apos;, linePath(dataset)).attr(&apos;stroke&apos;, &apos;#000&apos;)</span><br><span class="line">        .attr(&apos;stroke-width&apos;, &apos;3px&apos;).attr(&apos;fill&apos;, &apos;none&apos;);</span><br></pre></td></tr></table></figure></p><h4 id="æ‰‹å·¥å†™ç”ŸæˆæŠ˜çº¿çš„path"><a href="#æ‰‹å·¥å†™ç”ŸæˆæŠ˜çº¿çš„path" class="headerlink" title="æ‰‹å·¥å†™ç”ŸæˆæŠ˜çº¿çš„path"></a>æ‰‹å·¥å†™ç”ŸæˆæŠ˜çº¿çš„path</h4><p>svgçš„pathæ‰‹åŠ¨å†™éå¸¸ç¹æ‚ï¼Œæ‰‹å·¥å†™ä¸ç°å®ï¼Œè€Œè¿™æ­£æ˜¯d3å­˜åœ¨çš„åŸå› ä¹‹ä¸€ï¼Œd3æä¾›äº†ä¸°å¯Œçš„æ–¹æ³•ç”¨äºç”Ÿæˆpath,ä¹Ÿå°±æ˜¯ä¸‹é¢ä»‹ç»åˆ°çš„d3.line()ã€‚</p><h4 id="d3-line-ç”ŸæˆæŠ˜çº¿"><a href="#d3-line-ç”ŸæˆæŠ˜çº¿" class="headerlink" title="d3.line()ç”ŸæˆæŠ˜çº¿"></a>d3.line()ç”ŸæˆæŠ˜çº¿</h4><p>å‚è€ƒæœ¬èŠ‚çš„ã€Šæ¦‚è¿°ã€‹</p><h3 id="ç”Ÿæˆç›´æ–¹å›¾"><a href="#ç”Ÿæˆç›´æ–¹å›¾" class="headerlink" title="ç”Ÿæˆç›´æ–¹å›¾"></a>ç”Ÿæˆç›´æ–¹å›¾</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¦‚å›¾ï¼Œåæ ‡è½´ç”Ÿæˆä»£ç åŒã€Šç”Ÿæˆåæ ‡è½´ã€‹ã€‚<br>ç›´æ–¹å›¾ä¸»è¦æ˜¯ç»˜åˆ¶çŸ©å½¢æŸ±çŠ¶å›¾ å’Œ textçš„æ˜¾ç¤ºï¼Œå…·ä½“ä¸‹æ¥å°±æ˜¯å¦‚ä½•ç¡®å®šæŸ±çŠ¶å›¾çš„ xã€yåæ ‡ï¼Œå®½é«˜åº¦ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/BarChart-full.html" target="_blank" rel="noopener">demoåœ°å€</a><br><a href="https://www.bilibili.com/video/av13492121/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener">è§†é¢‘è®²è§£</a></p><figure class="image-box">                <img src="/image/d3/all/barchart.jpg" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> //æ ‡å°º</span><br><span class="line">const xScale = d3.scaleBand().domain(dataset.map((o, i) =&gt; i))</span><br><span class="line">.range([0, xAxisWidth]).padding(0.1);</span><br><span class="line">const yScale = d3.scaleLinear().domain([0, d3.max(dataset)]).rangeRound([yAxisWidth, 0]);</span><br><span class="line">//ç»˜åˆ¶çŸ©å½¢æŸ±çŠ¶å›¾ çš„æ–¹æ³•ï¼Œ</span><br><span class="line">const updateRect = svg.selectAll(&quot;rect&quot;).data(dataset)      </span><br><span class="line">        .attr(&quot;fill&quot;, (d, i) =&gt; color(i))</span><br><span class="line">        .attr(&quot;x&quot;, (d, i) =&gt; padding.left + xScale(i))</span><br><span class="line">        .attr(&quot;y&quot;, (d, i) =&gt; height - padding.bottom)</span><br><span class="line">        .attr(&quot;width&quot;, xScale.bandwidth())</span><br><span class="line">        .attr(&quot;height&quot;, 0)</span><br><span class="line">        .transition().duration(1000)  //é‡æ–°èµ‹å€¼yï¼Œheight è¿‡æ¸¡æ•ˆæœ</span><br><span class="line">        .attr(&quot;y&quot;, (d, i) =&gt; height - padding.bottom - (yScale(0) - yScale(d)))</span><br><span class="line">        .attr(&quot;height&quot;, d =&gt; yScale(0) - yScale(d));</span><br></pre></td></tr></table></figure><h4 id="è®¾ç½®xï¼Œyåæ ‡ã€å®½é«˜åº¦"><a href="#è®¾ç½®xï¼Œyåæ ‡ã€å®½é«˜åº¦" class="headerlink" title="è®¾ç½®xï¼Œyåæ ‡ã€å®½é«˜åº¦"></a>è®¾ç½®xï¼Œyåæ ‡ã€å®½é«˜åº¦</h4><p>è§ä¸Šé¢ä»£ç </p><h4 id="svgçš„rectä¸textçš„è¿ç”¨"><a href="#svgçš„rectä¸textçš„è¿ç”¨" class="headerlink" title="svgçš„rectä¸textçš„è¿ç”¨"></a>svgçš„rectä¸textçš„è¿ç”¨</h4><p>è§ä¸Šé¢ä»£ç </p><h4 id="æ¯”ä¾‹å°ºä¸æŸ±çŠ¶å›¾çš„ç»˜åˆ¶å¯†åˆ‡è”ç³»"><a href="#æ¯”ä¾‹å°ºä¸æŸ±çŠ¶å›¾çš„ç»˜åˆ¶å¯†åˆ‡è”ç³»" class="headerlink" title="æ¯”ä¾‹å°ºä¸æŸ±çŠ¶å›¾çš„ç»˜åˆ¶å¯†åˆ‡è”ç³»"></a>æ¯”ä¾‹å°ºä¸æŸ±çŠ¶å›¾çš„ç»˜åˆ¶å¯†åˆ‡è”ç³»</h4><p>æœ¬ç¤ºä¾‹ä¸­ï¼ŒæŸ±çŠ¶å›¾çš„xã€yåæ ‡çš„ç¡®å®šä¸æ ‡å°ºxScaleç­‰ç›¸å…³è”ï¼Œè¿™ä¹Ÿæ˜¯åæ ‡è½´å›¾çš„å¥—è·¯ï¼Œä¸Šé¢çš„ã€Šç”ŸæˆæŠ˜çº¿å›¾ã€‹ä¹Ÿæœ‰æ˜ å°„ã€‚</p><h4 id="xã€yå€¼ä½¿ç”¨æ¯”ä¾‹å°ºè¡¨ç¤º"><a href="#xã€yå€¼ä½¿ç”¨æ¯”ä¾‹å°ºè¡¨ç¤º" class="headerlink" title="xã€yå€¼ä½¿ç”¨æ¯”ä¾‹å°ºè¡¨ç¤º"></a>xã€yå€¼ä½¿ç”¨æ¯”ä¾‹å°ºè¡¨ç¤º</h4><p>è§ä¸Šé¢ä»£ç </p><h4 id="updateã€enterã€exitçš„ç»å…¸è¿ç”¨"><a href="#updateã€enterã€exitçš„ç»å…¸è¿ç”¨" class="headerlink" title="updateã€enterã€exitçš„ç»å…¸è¿ç”¨"></a>updateã€enterã€exitçš„ç»å…¸è¿ç”¨</h4><p>è¯¦è§ä¸Šé¢æåˆ°çš„demoåœ°å€ï¼Œè¿™ä¸ªç®€æ´demoä»‹ç»äº†è¿™ä¸‰ç§çŠ¶æ€çš„æ¸²æŸ“ã€‚</p><h3 id="ç”Ÿæˆé¥¼çŠ¶å›¾"><a href="#ç”Ÿæˆé¥¼çŠ¶å›¾" class="headerlink" title="ç”Ÿæˆé¥¼çŠ¶å›¾"></a>ç”Ÿæˆé¥¼çŠ¶å›¾</h3><h4 id="é¥¼çŠ¶å›¾çš„ä¸€äº›æ¦‚å¿µ"><a href="#é¥¼çŠ¶å›¾çš„ä¸€äº›æ¦‚å¿µ" class="headerlink" title="é¥¼çŠ¶å›¾çš„ä¸€äº›æ¦‚å¿µ"></a>é¥¼çŠ¶å›¾çš„ä¸€äº›æ¦‚å¿µ</h4><ul><li>outerRadius å¤–åŠå¾„</li><li>innerRadius å†…åŠå¾„</li><li>startAngle èµ·å§‹è§’åº¦</li><li>endAngle ç»“æŸè§’åº¦<figure class="image-box">                <img src="/image/d3/all/pie1.jpg" alt title class>                <p></p>            </figure><h4 id="å•æ®µé¥¼å›¾"><a href="#å•æ®µé¥¼å›¾" class="headerlink" title="å•æ®µé¥¼å›¾"></a>å•æ®µé¥¼å›¾</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> const svg = d3.select(&quot;#svg&quot;).append(&quot;svg&quot;).attr(&quot;width&quot;, &quot;300&quot;).attr(&quot;height&quot;, &quot;300&quot;);</span><br><span class="line">const dataset = &#123;startAngle:0, endAngle: Math.PI*0.75&#125;;</span><br><span class="line">const arcPath = d3.arc()  //å¼§ç”Ÿæˆå™¨</span><br><span class="line">        .innerRadius(50)   //è®¾ç½®å†…åŠå¾„</span><br><span class="line">        .outerRadius(100);  //è®¾ç½®å¤–åŠå¾„</span><br><span class="line">svg.append(&quot;path&quot;)</span><br><span class="line">        .attr(&quot;d&quot;, arcPath(dataset)) // ç”¨å¼§ç”Ÿæˆå™¨ç”Ÿæˆå¼§çº¿æ•°æ®ï¼Œèµ‹å€¼ç»™SVGçš„då±æ€§</span><br><span class="line">        .attr(&quot;transform&quot;, &apos;translate(200, 200)&apos;) // å¡«å……é¢œè‰²</span><br><span class="line">        .attr(&quot;stroke&quot;, &apos;#000&apos;).attr(&apos;stroke-width&apos;, &apos;3px&apos;) // å¡«å……é¢œè‰²</span><br><span class="line">        .attr(&quot;fill&quot;, &apos;blue&apos;) // å¡«å……é¢œè‰²</span><br></pre></td></tr></table></figure></li></ul><p>æ•ˆæœå¦‚å›¾ï¼š<br><figure class="image-box">                <img src="/image/d3/all/pie2.jpg" alt title class>                <p></p>            </figure></p><h4 id="å¤šä¸ªé¥¼å›¾æ‹¼æˆä¸€ä¸ªå®Œæ•´é¥¼å›¾"><a href="#å¤šä¸ªé¥¼å›¾æ‹¼æˆä¸€ä¸ªå®Œæ•´é¥¼å›¾" class="headerlink" title="å¤šä¸ªé¥¼å›¾æ‹¼æˆä¸€ä¸ªå®Œæ•´é¥¼å›¾"></a>å¤šä¸ªé¥¼å›¾æ‹¼æˆä¸€ä¸ªå®Œæ•´é¥¼å›¾</h4><p>ä¸€ä¸ªé¥¼å›¾å…¶å®æ˜¯ç”±ä¸Šé¢è¯´åˆ°çš„ä¸€ä¸ªä¸ªåˆ†æ®µçš„é¥¼å›¾æ‹¼æ¥è€Œæˆï¼š<br><figure class="highlight plain"><figcaption><span>svg </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const pie = d3.pie();</span><br><span class="line">const dataset = [30, 10, 43, 55, 13];</span><br><span class="line">const piedata = pie(dataset);</span><br><span class="line">const outerRadius = 150; //å¤–åŠå¾„</span><br><span class="line">const innerRadius = 0; //å†…åŠå¾„ï¼Œä¸º0åˆ™ä¸­é—´æ²¡æœ‰ç©ºç™½</span><br><span class="line">const arc = d3.arc()  //å¼§ç”Ÿæˆå™¨</span><br><span class="line">    .innerRadius(innerRadius)   //è®¾ç½®å†…åŠå¾„</span><br><span class="line">    .outerRadius(outerRadius);  //è®¾ç½®å¤–åŠå¾„</span><br><span class="line">const arcs = svg.selectAll(&quot;g&quot;) // å­˜æ”¾å¼§çš„å®¹å™¨</span><br><span class="line">    .data(piedata) //ç»‘å®špieæ•°æ®</span><br><span class="line">    .enter() // æ•°æ®è¿›å…¥</span><br><span class="line">    .append(&quot;g&quot;) // ç”Ÿæˆg</span><br><span class="line">    .attr(&quot;transform&quot;, &quot;translate(&quot; + (300 / 2) + &quot;,&quot; + (300 / 2) + &quot;)&quot;); // åç§»</span><br><span class="line">const color = d3.scaleOrdinal(d3.schemeCategory10);</span><br><span class="line">arcs.append(&quot;path&quot;)</span><br><span class="line">    .attr(&quot;fill&quot;, (d, i) =&gt; color(i)) // å¡«å……é¢œè‰²</span><br><span class="line">    .attr(&quot;d&quot;, d =&gt; &#123;</span><br><span class="line">        return arc(d)</span><br><span class="line">    &#125;); // ç”¨å¼§ç”Ÿæˆå™¨ç”Ÿæˆå¼§çº¿æ•°æ®ï¼Œèµ‹å€¼ç»™SVGçš„då±æ€§</span><br><span class="line">arcs.append(&quot;text&quot;)</span><br><span class="line">    .attr(&quot;transform&quot;, d =&gt; &quot;translate(&quot; + arc.centroid(d) + &quot;)&quot;) // è®¾ç½®æ–‡æœ¬è‡³æ‰‡åŒºä¸­å¿ƒ</span><br><span class="line">    .attr(&quot;text-anchor&quot;, &quot;middle&quot;) //è®¾ç½®æ–‡æœ¬é”šç‚¹</span><br><span class="line">    .attr(&quot;fill&quot;, &quot;#fff&quot;) //è®¾ç½®æ–‡å­—é¢œè‰²</span><br><span class="line">    .text(d =&gt; d.data);</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/d3/all/pie3.jpg" alt title class>                <p></p>            </figure><h4 id="è·å–åœ†å¼§ä¸­å¿ƒç‚¹"><a href="#è·å–åœ†å¼§ä¸­å¿ƒç‚¹" class="headerlink" title="è·å–åœ†å¼§ä¸­å¿ƒç‚¹"></a>è·å–åœ†å¼§ä¸­å¿ƒç‚¹</h4><p><a href="https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#arc" target="_blank" rel="noopener">ä¸»è¦è¿ç”¨arcçš„centroid API</a>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var arcFn = d3.svg.arc()</span><br><span class="line">.innerRadius(innerRadius)</span><br><span class="line">.outerRadius(outerRadius);</span><br><span class="line"></span><br><span class="line">arcs.append(&quot;text&quot;)</span><br><span class="line">.attr(&quot;class&quot;,&quot;MyText&quot;)</span><br><span class="line">.attr(&quot;transform&quot;, function(d)&#123;</span><br><span class="line">var center = arcFn.centroid(d);</span><br><span class="line">return &quot;translate(&quot; + </span><br><span class="line">center[0] * 1.4 + &quot;,&quot; + </span><br><span class="line">center[1] * 1.4 + &quot;)&quot;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/wangjingzhi/sixth.html" target="_blank" rel="noopener">å‚è€ƒdemo â€” åŠŸèƒ½æ›´ä¸°å¯Œçš„çš„å®Œæ•´é¥¼å›¾</a></p><h4 id="ç†Ÿç»ƒè¿ç”¨arc-centroidåœ†å¼§ä¸­å¿ƒ"><a href="#ç†Ÿç»ƒè¿ç”¨arc-centroidåœ†å¼§ä¸­å¿ƒ" class="headerlink" title="ç†Ÿç»ƒè¿ç”¨arc.centroidåœ†å¼§ä¸­å¿ƒ"></a>ç†Ÿç»ƒè¿ç”¨arc.centroidåœ†å¼§ä¸­å¿ƒ</h4><p>é¥¼å›¾çš„æ–‡å­—æˆ–è€…æ ‡æ³¨çº¿ï¼Œéƒ½éœ€è¦ä¾èµ–åœ†å¼§ä¸­å¿ƒç‚¹çš„è¿ç”¨ï¼Œæ‰€ä»¥æ¶‰åŠåˆ°é¥¼å›¾æ—¶ï¼Œéœ€è¦é‡åº¦ä½¿ç”¨åœ†å¼§ä¸­å¿ƒç‚¹ï¼Œä»¥åŠå¦‚ä½•å‡­å€Ÿè¿™ä¸ªåœ†å¼§ä¸­é—´ç‚¹ï¼Œå»¶ä¼¸ç”»å‡ºä¸€æ¡ä¸­å¿ƒçº¿çš„æŠ€å·§ï¼Œ <a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter10/10.1/10-1-pie.html" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒdemo</a></p><h4 id="demoåœ°å€ä¸å‚è€ƒ"><a href="#demoåœ°å€ä¸å‚è€ƒ" class="headerlink" title="demoåœ°å€ä¸å‚è€ƒ"></a>demoåœ°å€ä¸å‚è€ƒ</h4><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/PieChart.html" target="_blank" rel="noopener">å•æ®µé¥¼å›¾ demoåœ°å€</a><br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/my-d3-practice/PieCharts.html" target="_blank" rel="noopener">å®Œæ•´é¥¼å›¾ demoåœ°å€</a><br><a href="https://www.bilibili.com/video/av13872208/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener">è§†é¢‘è®²è§£</a></p><h4 id="arc-ä¸-pie-å…³ç³»"><a href="#arc-ä¸-pie-å…³ç³»" class="headerlink" title="arc ä¸ pie å…³ç³»"></a>arc ä¸ pie å…³ç³»</h4><p>arcæ˜¯ç”¨æ¥ç”»å¼§çš„ï¼Œarcç”¨æ¥ç”»é¥¼å›¾(pie)æ—¶ï¼Œè¦è®¾ç½®èµ·å§‹è§’åº¦startAngleã€endAngleï¼Œä¸ºäº†çœå»è¿™äº›éº»çƒ¦ï¼Œé…åˆä½¿ç”¨pieå¯ä»¥å®Œç¾ç”»é¥¼å›¾ã€‚</p><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/wangjingzhi/sixth.html" target="_blank" rel="noopener">åŠŸèƒ½æ›´ä¸°å¯Œçš„çš„å®Œæ•´é¥¼å›¾</a></p><h3 id="ç”Ÿæˆçº¿æ®µ"><a href="#ç”Ÿæˆçº¿æ®µ" class="headerlink" title="ç”Ÿæˆçº¿æ®µ"></a>ç”Ÿæˆçº¿æ®µ</h3><p>å®Œæ•´ä»£ç å¦‚ä¸‹ï¼Œä¸»è¦è¿ç”¨d3.svg.lineï¼Œå¦å¤–interpolateæ˜¯ç”Ÿæˆä¸åŒç±»å‹è¿æ¥çº¿ç±»å‹çš„ï¼Œ<a href="https://github.com/d3/d3-3.x-api-reference/blob/master/SVG-Shapes.md#_line" target="_blank" rel="noopener">å‚è€ƒæ–‡æ¡£</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//v3.x</span><br><span class="line">var svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)</span><br><span class="line">.attr(&quot;width&quot;, 400)</span><br><span class="line">.attr(&quot;height&quot;, 400);</span><br><span class="line">var data = [</span><br><span class="line">&#123;&quot;x&quot;: 10, &quot;y&quot;: 200&#125;,</span><br><span class="line">&#123;&quot;x&quot;: 50, &quot;y&quot;: 260&#125;,</span><br><span class="line">&#123;&quot;x&quot;: 90, &quot;y&quot;: 120&#125;</span><br><span class="line">]</span><br><span class="line">var line = d3.svg.line()</span><br><span class="line">.x( function(d)&#123; return d.x; &#125; )</span><br><span class="line">.y( function(d)&#123; return d.y; &#125; )</span><br><span class="line">.interpolate(&quot;line&quot;);</span><br><span class="line">svg.append(&quot;path&quot;)</span><br><span class="line">.attr(&quot;class&quot;,&quot;MyPath&quot;)</span><br><span class="line">.attr(&quot;d&quot;, line(data) )</span><br></pre></td></tr></table></figure></p><h3 id="ç”Ÿæˆçº¿æ®µ-ä¸-fill-none"><a href="#ç”Ÿæˆçº¿æ®µ-ä¸-fill-none" class="headerlink" title="ç”Ÿæˆçº¿æ®µ ä¸ fill none"></a>ç”Ÿæˆçº¿æ®µ ä¸ fill none</h3><p>å¦‚ä¸‹ï¼Œæ²¡æœ‰ä½¿ç”¨fill noneæ—¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/all/line_fill.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">var canvas = d3.select(&quot;body&quot;)</span><br><span class="line">                 .append(&quot;svg&quot;)</span><br><span class="line">                 .attr(&quot;width&quot;,500)</span><br><span class="line">                 .attr(&quot;height&quot;,500);</span><br><span class="line"></span><br><span class="line">   var data2 = [</span><br><span class="line">           &#123;x : 10 , y : 20&#125;,</span><br><span class="line">           &#123;x : 10 , y : 260&#125;,</span><br><span class="line">           &#123;x : 250 , y : 260&#125;</span><br><span class="line">   ];</span><br><span class="line"></span><br><span class="line">   var group = canvas.append(&quot;g&quot;)</span><br><span class="line">                    .attr(&quot;transform&quot;, &quot;translate(100,200)&quot;);</span><br><span class="line"></span><br><span class="line">   var line = d3.svg.line()</span><br><span class="line">                  .x(function(d) &#123; return d.x;&#125;)</span><br><span class="line">                  .y(function(d) &#123; return d.y;&#125;);</span><br><span class="line"></span><br><span class="line">   group.selectAll(&quot;path&quot;)</span><br><span class="line">             .data([data2])</span><br><span class="line">             .enter()</span><br><span class="line">              .append(&quot;path&quot;)</span><br><span class="line">              .attr(&quot;d&quot;,line)</span><br><span class="line">              //.attr(&quot;fill&quot;,&quot;none&quot;)</span><br><span class="line">              .attr(&quot;stroke&quot; , &quot;#000&quot;)</span><br><span class="line">              .attr(&quot;stroke-width&quot;, 10 );</span><br></pre></td></tr></table></figure></p><p>å°†ä¸Šé¢ä»£ç çš„<code>//.attr(&quot;fill&quot;,&quot;none&quot;)</code>è§£æ³¨åï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/all/line_fill1.jpg" alt title class>                <p></p>            </figure></p><h3 id="ç”Ÿæˆæ•£ç‚¹å›¾"><a href="#ç”Ÿæˆæ•£ç‚¹å›¾" class="headerlink" title="ç”Ÿæˆæ•£ç‚¹å›¾"></a>ç”Ÿæˆæ•£ç‚¹å›¾</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æ•£ç‚¹å›¾æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ä»£ç å¦‚ä¸‹ï¼Œ<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/wangjingzhi/fifth.html" target="_blank" rel="noopener">demoåœ°å€ç‚¹å‡»è¿™é‡Œ</a>ã€‚</p><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯æ¯”ä¾‹å°ºä¸åœ†å¿ƒcx cyçš„ç»“åˆä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//v3.x</span><br><span class="line"></span><br><span class="line">var xScale = d3.scale.linear()</span><br><span class="line">.domain([0, 100])</span><br><span class="line">.range([0,300]);</span><br><span class="line"></span><br><span class="line">var points = svg.selectAll(&quot;.MyCircle&quot;)</span><br><span class="line">.data(dataset)</span><br><span class="line">.enter()</span><br><span class="line">.append(&quot;circle&quot;)</span><br><span class="line">.attr(&quot;class&quot;,&quot;MyCircle&quot;)</span><br><span class="line">.attr(&quot;transform&quot;,&quot;translate(30,50)&quot;)</span><br><span class="line">.attr(&quot;r&quot;, 10)</span><br><span class="line">.attr(&quot;cx&quot;, function(d)&#123; return xScale(d.x); &#125;)</span><br><span class="line">.attr(&quot;cy&quot;, function(d)&#123; return yScale(d.y); &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="æ¯”ä¾‹å°ºä¸åœ†å¿ƒcx-cyçš„ç»“åˆä½¿ç”¨"><a href="#æ¯”ä¾‹å°ºä¸åœ†å¿ƒcx-cyçš„ç»“åˆä½¿ç”¨" class="headerlink" title="æ¯”ä¾‹å°ºä¸åœ†å¿ƒcx cyçš„ç»“åˆä½¿ç”¨"></a>æ¯”ä¾‹å°ºä¸åœ†å¿ƒcx cyçš„ç»“åˆä½¿ç”¨</h4><p>å‚è€ƒä¸Šé¢ã€‚</p><h3 id="æ¯”ä¾‹å°º"><a href="#æ¯”ä¾‹å°º" class="headerlink" title="æ¯”ä¾‹å°º"></a>æ¯”ä¾‹å°º</h3><h4 id="ä¸€ä¸ªç®€å•çš„æ¯”ä¾‹å°º"><a href="#ä¸€ä¸ªç®€å•çš„æ¯”ä¾‹å°º" class="headerlink" title="ä¸€ä¸ªç®€å•çš„æ¯”ä¾‹å°º"></a>ä¸€ä¸ªç®€å•çš„æ¯”ä¾‹å°º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var linear = d3.scale.linear()</span><br><span class="line">.domain([0,20]) //å®šä¹‰åŸŸ</span><br><span class="line">.range([0,100]); //å€¼åŸŸ</span><br></pre></td></tr></table></figure><h4 id="æ¯”ä¾‹å°ºä½¿ç”¨æƒ…å†µ"><a href="#æ¯”ä¾‹å°ºä½¿ç”¨æƒ…å†µ" class="headerlink" title="æ¯”ä¾‹å°ºä½¿ç”¨æƒ…å†µ"></a>æ¯”ä¾‹å°ºä½¿ç”¨æƒ…å†µ</h4><p>åºæ•°æ¯”ä¾‹å°ºä¸çº¿æ€§æ¯”ä¾‹å°ºç”¨çš„æœ€å¤šï¼›<br>åºæ•°æ¯”ä¾‹å°ºç”¨æ¥åšxè½´ï¼›çº¿æ€§åšyè½´ï¼›<br>å¦å¤–ä¸€ä¸ªç”¨çš„å¤šçš„æ˜¯é‡å­æ¯”ä¾‹å°ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var quantize= d3.scale.quantize().domain([0, 10]).range([&apos;red&apos;,&apos;green&apos;,&apos;blue&apos;,&apos;yellow&apos;])</span><br><span class="line">quantize(1)//&apos;red&apos;</span><br></pre></td></tr></table></figure></p><h4 id="scaleæ¯”ä¾‹å°ºçš„ä½œç”¨"><a href="#scaleæ¯”ä¾‹å°ºçš„ä½œç”¨" class="headerlink" title="scaleæ¯”ä¾‹å°ºçš„ä½œç”¨"></a>scaleæ¯”ä¾‹å°ºçš„ä½œç”¨</h4><p>å‚è€ƒã€Šscaleæ¯”ä¾‹å°ºçš„ä½œç”¨ã€‹</p><h3 id="d3-event-d3-mouse-this-d3-touches-this"><a href="#d3-event-d3-mouse-this-d3-touches-this" class="headerlink" title="d3.event d3.mouse(this) d3.touches(this)"></a>d3.event d3.mouse(this) d3.touches(this)</h3><p>ä¸€èˆ¬çš„ç›‘å¬å’Œäº‹ä»¶ç»‘å®šä¸­éƒ½å¯ä»¥é€šè¿‡d3.eventè·å–æƒ³è¦çš„å€¼ï¼Œ<br>å…·ä½“çš„äº‹ä»¶æˆ–ç›‘å¬ä¸­ï¼Œå¯é€šè¿‡d3.mouse(this) d3.touches(this)è·å–å€¼ï¼›<br>demoå‚è€ƒ ã€Šç²¾é€šd3.jsã€‹çš„ç¬¬å…«ç« ã€‚</p><h3 id="scaleæ¯”ä¾‹å°ºçš„ä½œç”¨-1"><a href="#scaleæ¯”ä¾‹å°ºçš„ä½œç”¨-1" class="headerlink" title="scaleæ¯”ä¾‹å°ºçš„ä½œç”¨"></a>scaleæ¯”ä¾‹å°ºçš„ä½œç”¨</h3><h4 id="æ²¡æœ‰æ¯”ä¾‹å°º"><a href="#æ²¡æœ‰æ¯”ä¾‹å°º" class="headerlink" title="æ²¡æœ‰æ¯”ä¾‹å°º"></a>æ²¡æœ‰æ¯”ä¾‹å°º</h4><p>å¦‚ä¸‹ï¼Œæ²¡æœ‰æ¯”ä¾‹å°ºæ—¶ï¼Œä¸‹é¢ä¸¤ä¸ªæŸ±å½¢å›¾å¤ªé•¿äº†ï¼Œè€Œsvgåªæ˜¯ä¸€ä¸ª500*500çš„å®¹å™¨ï¼Œå¤§äº500çš„ï¼Œæ— æ³•æ˜¾ç¤ºï¼Œä¸ºäº†è‡ªé€‚åº”ï¼Œå¼•å…¥æ¯”ä¾‹å°ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var canvas = d3.select(&quot;body&quot;)</span><br><span class="line">                .append(&quot;svg&quot;)</span><br><span class="line">                .attr(&quot;width&quot;,500)</span><br><span class="line">                .attr(&quot;height&quot;,500);</span><br><span class="line">var bar1= canvas.selectAll(&quot;rect&quot;)</span><br><span class="line">            .data([20,40,60,80,150])</span><br><span class="line">            .enter()</span><br><span class="line">                .append(&quot;rect&quot;)</span><br><span class="line">                .attr(&quot;width&quot;,function(d) &#123; return d*8&#125;)</span><br><span class="line">                .attr(&quot;height&quot;,30)</span><br><span class="line">                .attr(&quot;y&quot;,function(d, i) &#123; return (i+1)*65; &#125;)</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/d3/all/scale.jpg" alt title class>                <p></p>            </figure><h4 id="ä½¿ç”¨æ¯”ä¾‹å°º"><a href="#ä½¿ç”¨æ¯”ä¾‹å°º" class="headerlink" title="ä½¿ç”¨æ¯”ä¾‹å°º"></a>ä½¿ç”¨æ¯”ä¾‹å°º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//d3.scale.linearæ¯”ä¾‹å°º</span><br><span class="line"> var scalewidth = d3.scale.linear()</span><br><span class="line">        .domain([0,140])</span><br><span class="line">        .range([0,500])</span><br><span class="line">var bar1= canvas.selectAll(&quot;rect&quot;)</span><br><span class="line">            .data([20,40,60,80,150])</span><br><span class="line">            .enter()</span><br><span class="line">                .append(&quot;rect&quot;)</span><br><span class="line">                //ä½¿ç”¨æ¯”ä¾‹å°ºæ¥ç”Ÿæˆwidth</span><br><span class="line">                .attr(&quot;width&quot;,function(d) &#123; return scalewidth(d)&#125;)</span><br><span class="line">                .attr(&quot;height&quot;,30)</span><br><span class="line">                .attr(&quot;y&quot;,function(d, i) &#123; return (i+1)*65; &#125;)</span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/d3/all/scale2.jpg" alt title class>                <p></p>            </figure><h3 id="groud-ä¸-g"><a href="#groud-ä¸-g" class="headerlink" title="groud ä¸ g"></a>groud ä¸ g</h3><h4 id="åˆ†ç»„-ä¸-div"><a href="#åˆ†ç»„-ä¸-div" class="headerlink" title="åˆ†ç»„ ä¸ div"></a>åˆ†ç»„ ä¸ div</h4><p>groudå°±æ˜¯åˆ†ç»„ï¼Œç¼©å†™å°±æ˜¯ gï¼Œè¿™ä¹Ÿæ˜¯d3ä¸Šå¸¸ç”¨åˆ°çš„gæ ‡ç­¾ã€‚<br>å¦‚ä¸‹é¢ä»£ç ï¼ŒåŠ gåï¼Œå¯ä»¥ç»Ÿä¸€è®¾ç½®gåˆ†ç»„å†…çš„æ‰€æœ‰rectï¼Œæ‰€æœ‰gç›¸å½“äºhtmlä¸­çš„div<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var scalewidth = d3.scale.linear()</span><br><span class="line">                       .domain([0,80])</span><br><span class="line">                       .range([0,500])</span><br><span class="line"></span><br><span class="line">   var axis = d3.svg.axis()</span><br><span class="line">                 .ticks(10)</span><br><span class="line">                 .scale(scalewidth)</span><br><span class="line"></span><br><span class="line">   var canvas = d3.select(&quot;body&quot;)</span><br><span class="line">                 .append(&quot;svg&quot;)</span><br><span class="line">                 .attr(&quot;width&quot;,500)</span><br><span class="line">                 .attr(&quot;height&quot;,500)</span><br><span class="line">                 // è¿™é‡Œæ˜¯å¦åŠ gè¿›è¡Œåˆ†ç»„ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯åŠ gåï¼Œå¯ä»¥åœ¨gä¸Šç»Ÿä¸€å¯¹ä¸‹é¢çš„rectè®¾ç½®æ ·å¼ï¼š</span><br><span class="line">                 .append(&quot;g&quot;)</span><br><span class="line"></span><br><span class="line">   var color = d3.scale.linear()</span><br><span class="line">                   .domain([0,140])</span><br><span class="line">                   .range([&quot;red&quot;,&quot;blue&quot;])</span><br><span class="line"></span><br><span class="line">   var bar1= canvas.selectAll(&quot;rect&quot;)</span><br><span class="line">               .data([20,40,60,80,])</span><br><span class="line">               .enter()</span><br><span class="line">                   .append(&quot;rect&quot;)</span><br><span class="line">                   .attr(&quot;width&quot;,function(d) &#123; return scalewidth(d)&#125;)</span><br><span class="line">                   .attr(&quot;height&quot;,40)</span><br><span class="line">                   .attr(&quot;fill&quot;,function(d) &#123; return color(d)&#125;)</span><br><span class="line">                   .attr(&quot;y&quot;,function(d) &#123; return d * 3&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="ä¾‹å­äºŒ-â€“-åæ ‡è½´æ˜¯å¦åˆ†ç»„"><a href="#ä¾‹å­äºŒ-â€“-åæ ‡è½´æ˜¯å¦åˆ†ç»„" class="headerlink" title="ä¾‹å­äºŒ â€“ åæ ‡è½´æ˜¯å¦åˆ†ç»„"></a>ä¾‹å­äºŒ â€“ åæ ‡è½´æ˜¯å¦åˆ†ç»„</h4><p>å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œå»¶ä¼¸ï¼ŒåŠ ä¸€ä¸ªåæ ‡è½´ï¼Œåæ ‡è½´åˆ†ç»„å’Œä¸åˆ†ç»„ï¼ŒåŒºåˆ«å¾ˆå¤§ï¼Œåˆ†ç»„åï¼Œæ›´å®¹æ˜“è®¾ç½®æ ·å¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var canvas = d3.select(&quot;body&quot;)</span><br><span class="line">                  .append(&quot;svg&quot;)</span><br><span class="line">                  .attr(&quot;width&quot;,500)</span><br><span class="line">                  .attr(&quot;height&quot;,500)</span><br><span class="line">                  .append(&quot;g&quot;)</span><br><span class="line">                  // ä¸æ¨èå†™æ³•---æœªå°†åæ ‡è½´åˆ†ç»„ï¼Œä¸å®¹æ˜“è®¾ç½®æ ·å¼ï¼š</span><br><span class="line">                  //   .call(axis)</span><br><span class="line">                  ;</span><br><span class="line">            // æ¨èå†™æ³•---å°†åæ ‡è½´åˆ†ç»„ï¼Œæ›´å®¹æ˜“è®¾ç½®æ ·å¼ï¼š</span><br><span class="line">            // canvas.append(&quot;g&quot;)</span><br><span class="line">            //         .attr(&quot;transform&quot;,&quot;translate(0,300)&quot;)</span><br><span class="line">            //         .call(axis)</span><br></pre></td></tr></table></figure></p><h4 id="demoåœ°å€"><a href="#demoåœ°å€" class="headerlink" title="demoåœ°å€"></a>demoåœ°å€</h4><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/mars/lesson6/test01.html" target="_blank" rel="noopener">demoåœ°å€</a></p><h3 id="d3-json-d3-csv-d3-xml-d3-html-d3-text"><a href="#d3-json-d3-csv-d3-xml-d3-html-d3-text" class="headerlink" title="d3.json d3.csv d3.xml d3.html d3.text"></a>d3.json d3.csv d3.xml d3.html d3.text</h3><p>ä¸Šé¢å‡ ç§æ˜¯d3è¯·æ±‚å¤–éƒ¨æ–‡ä»¶çš„æ–¹å¼ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter9/9.1/9-1-1-readjson.html" target="_blank" rel="noopener">demo å‚è€ƒ</a></p><h3 id="svgå¯¼å‡ºä¸ºpng-svg"><a href="#svgå¯¼å‡ºä¸ºpng-svg" class="headerlink" title="svgå¯¼å‡ºä¸ºpng/svg"></a>svgå¯¼å‡ºä¸ºpng/svg</h3><p>ä¸»è¦è¿ç”¨ d3-downloadableï¼Œ<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter9/9.2/9-2-1-d3-downloadable.html" target="_blank" rel="noopener">demo å‚è€ƒ</a>ï¼Œæ­¤demoä¹Ÿæä¾›äº†ä¸€ç§æ–¹æ¡ˆï¼Œå¦‚ä½•è‡ªå®šä¹‰å³é”®èœå•ï¼Œå¹¶ä¸”å¦å­˜ä¸º(ä¸‹è½½)å›¾ç‰‡ã€‚</p><h2 id="d3é»‘çŸ¥è¯†"><a href="#d3é»‘çŸ¥è¯†" class="headerlink" title="d3é»‘çŸ¥è¯†"></a>d3é»‘çŸ¥è¯†</h2><h3 id="d3-event-dx-é¼ æ ‡åç§»é‡"><a href="#d3-event-dx-é¼ æ ‡åç§»é‡" class="headerlink" title="d3.event.dx é¼ æ ‡åç§»é‡"></a>d3.event.dx é¼ æ ‡åç§»é‡</h3><p>é¼ æ ‡æ¯æ¬¡åç§»é‡ï¼Œé€šè¿‡è¯•éªŒå‘ç°ï¼Œåç§»é‡åŸºæœ¬ä¸Šæ˜¯ä¸‰ä¸ªå€¼ï¼š-1 0 1;<br>è¿™ä¸ªç”¨å¤„éå¸¸å¤šï¼Œé€šè¿‡å åŠ åç§»é‡çš„æ–¹å¼ï¼Œå¯ä»¥ç”»ä¸€ç§æ—¶åˆ»è·Ÿéšé¼ æ ‡çš„åŠ¨ä½œï¼Œæ¯”å¦‚æ‹–åŠ¨å›¾ç‰‡æ—¶ï¼Œå›¾ç‰‡è·Ÿéšé¼ æ ‡æ˜¾ç¤ºã€‚ç­‰ç­‰ï¼Œ<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter12/12.3/12-3-1-pie-drag.html" target="_blank" rel="noopener">æ‹–æ‹½é¥¼çŠ¶å›¾ demo</a></p><h3 id="d-è‡ªå®šä¹‰å±æ€§çš„ä¼ é€’ä½¿ç”¨"><a href="#d-è‡ªå®šä¹‰å±æ€§çš„ä¼ é€’ä½¿ç”¨" class="headerlink" title="d è‡ªå®šä¹‰å±æ€§çš„ä¼ é€’ä½¿ç”¨"></a>d è‡ªå®šä¹‰å±æ€§çš„ä¼ é€’ä½¿ç”¨</h3><p>å¦‚ä¸‹ï¼Œåœ¨é€‰æ‹©é›†ä¸­å®šä¹‰çš„customDx123å±æ€§ï¼Œåœ¨arcs.append(â€œpathâ€)å’Œd3.behavior.drag()éƒ½èƒ½ä½¿ç”¨ï¼Œè¿™äºŒè€…æœ‰ä¸€ä¸ªå…±æ€§ï¼Œé‚£å°±æ˜¯éƒ½ä½¿ç”¨äº†arcså¯¹è±¡ã€‚<br>å®Œæ•´demoå‚è€ƒï¼š<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter12/12.3/12-3-1-pie-drag.html" target="_blank" rel="noopener">æ‹–æ‹½é¥¼çŠ¶å›¾ demo</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ å¯¹åº”æ•°ç›®çš„å¼§ç»„ï¼Œå³&lt;g&gt;å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> arcs = svg.selectAll(<span class="string">"g"</span>)</span><br><span class="line">                .data(piedata)<span class="comment">//ç»‘å®šè½¬æ¢åçš„æ•°æ®piedata</span></span><br><span class="line">                .enter()</span><br><span class="line">                .append(<span class="string">"g"</span>)</span><br><span class="line">                .each(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</span><br><span class="line">                    <span class="comment">//customDx123 è¿™ä¸ªå±æ€§æ˜¯è‡ªå·±åŠ å’Œå‘½åçš„</span></span><br><span class="line">                d.customDx123 = width/<span class="number">2</span>;</span><br><span class="line">                d.customDy123 = height/<span class="number">2</span>;</span><br><span class="line">                &#125;)</span><br><span class="line">                .attr(<span class="string">"transform"</span>,<span class="string">"translate("</span>+( width/<span class="number">2</span> )+<span class="string">","</span>+ ( height/<span class="number">2</span> ) +<span class="string">")"</span>);</span><br><span class="line"><span class="comment">//ç»˜åˆ¶å¼§</span></span><br><span class="line">arcs.append(<span class="string">"path"</span>)</span><br><span class="line">.attr(<span class="string">"fill"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">d,i</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> color(i);<span class="comment">//è®¾å®šå¼§çš„é¢œè‰²</span></span><br><span class="line">&#125;)</span><br><span class="line">.attr(<span class="string">"d"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(d.customDx123);</span><br><span class="line"><span class="keyword">return</span> arc(d);<span class="comment">//ä½¿ç”¨å¼§ç”Ÿæˆå™¨</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. äº¤äº’å¼</span></span><br><span class="line"><span class="keyword">var</span> drag = d3.behavior.drag()</span><br><span class="line">    .origin(<span class="literal">null</span>)</span><br><span class="line">.on(<span class="string">"drag"</span>, dragmove);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dragmove</span>(<span class="params">d</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//customDx123 è¿™ä¸ªå±æ€§æ˜¯è‡ªå·±åŠ å’Œå‘½åçš„</span></span><br><span class="line">d.customDx123 += d3.event.dx;</span><br><span class="line">d.customDy123 += d3.event.dy;</span><br><span class="line">d3.select(<span class="keyword">this</span>)</span><br><span class="line">.attr(<span class="string">"transform"</span>,<span class="string">"translate("</span>+d.customDx123+<span class="string">","</span>+d.customDy123+<span class="string">")"</span>);</span><br><span class="line">&#125;</span><br><span class="line">       </span><br><span class="line">       arcs.call(drag);</span><br></pre></td></tr></table></figure></p><h3 id="d3-svg-brush-åŒºåŸŸé€‰ä¸­"><a href="#d3-svg-brush-åŒºåŸŸé€‰ä¸­" class="headerlink" title="d3.svg.brush åŒºåŸŸé€‰ä¸­"></a>d3.svg.brush åŒºåŸŸé€‰ä¸­</h3><h4 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h4><p>æ•ˆæœå¦‚ä¸‹ï¼Œå®Œæ•´<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter12/12.4/12-4-2-selectArea-scatter.html" target="_blank" rel="noopener">demo</a>:<br><figure class="image-box">                <img src="/image/d3/all/brush.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xScale = d3.scale.linear()</span><br><span class="line">                .domain([<span class="number">0</span>,width])</span><br><span class="line">                .range([<span class="number">0</span>, width]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> yScale = d3.scale.linear()</span><br><span class="line">                .domain([<span class="number">0</span>, height])</span><br><span class="line">                .range([<span class="number">0</span>, height]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> brush = d3.svg.brush()</span><br><span class="line">              .x(xScale)</span><br><span class="line">              .y(yScale)</span><br><span class="line">              .extent([[<span class="number">0</span>, <span class="number">0</span>], [<span class="number">100</span>, <span class="number">100</span>]])</span><br><span class="line">              .on(<span class="string">"brush"</span>,brushed);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">brushed</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> extent = brush.extent();</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"xæ–¹å‘çš„ä¸‹é™:  "</span> + extent[<span class="number">0</span>][<span class="number">0</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"xæ–¹å‘çš„ä¸Šé™:  "</span> + extent[<span class="number">1</span>][<span class="number">0</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"yæ–¹å‘çš„ä¸‹é™:  "</span> + extent[<span class="number">0</span>][<span class="number">1</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"yæ–¹å‘çš„ä¸Šé™:  "</span> + extent[<span class="number">1</span>][<span class="number">1</span>] );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">svg.append(<span class="string">"g"</span>)</span><br><span class="line">    .call(brush)</span><br><span class="line">    .selectAll(<span class="string">"rect"</span>)</span><br><span class="line">    .style(<span class="string">"fill-opacity"</span>,<span class="number">0.3</span>);</span><br></pre></td></tr></table></figure><h4 id="å¿…é¡»é…åˆæ¯”ä¾‹å°ºä½¿ç”¨"><a href="#å¿…é¡»é…åˆæ¯”ä¾‹å°ºä½¿ç”¨" class="headerlink" title="å¿…é¡»é…åˆæ¯”ä¾‹å°ºä½¿ç”¨"></a>å¿…é¡»é…åˆæ¯”ä¾‹å°ºä½¿ç”¨</h4><p>å‚è€ƒä¸Šé¢ä¸€èŠ‚ä»£ç ã€‚</p><h4 id="ç›‘å¬ä¸‰ç§äº‹ä»¶ç±»å‹"><a href="#ç›‘å¬ä¸‰ç§äº‹ä»¶ç±»å‹" class="headerlink" title="ç›‘å¬ä¸‰ç§äº‹ä»¶ç±»å‹"></a>ç›‘å¬ä¸‰ç§äº‹ä»¶ç±»å‹</h4><ul><li>brushstart é¼ æ ‡é”®æŒ‰ä¸‹æ—¶</li><li>brush é¼ æ ‡é”®æŒ‰ä¸‹æ‹–æ‹½æ—¶</li><li>brushend é¼ æ ‡é”®æ”¾å¼€æ—¶<h4 id="brush-extent-è·å–é€‰ä¸­åŒºåŸŸçš„x-yä¸Šä¸‹é™"><a href="#brush-extent-è·å–é€‰ä¸­åŒºåŸŸçš„x-yä¸Šä¸‹é™" class="headerlink" title="brush.extent è·å–é€‰ä¸­åŒºåŸŸçš„x yä¸Šä¸‹é™"></a>brush.extent è·å–é€‰ä¸­åŒºåŸŸçš„x yä¸Šä¸‹é™</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> extent = brush.extent();</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"xæ–¹å‘çš„ä¸‹é™:  "</span> + extent[<span class="number">0</span>][<span class="number">0</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"xæ–¹å‘çš„ä¸Šé™:  "</span> + extent[<span class="number">1</span>][<span class="number">0</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"yæ–¹å‘çš„ä¸‹é™:  "</span> + extent[<span class="number">0</span>][<span class="number">1</span>] );</span><br><span class="line">  <span class="built_in">console</span>.log( <span class="string">"yæ–¹å‘çš„ä¸Šé™:  "</span> + extent[<span class="number">1</span>][<span class="number">1</span>] );</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ›å»º-çº¿æ€§æ¸å˜é¢œè‰²"><a href="#åˆ›å»º-çº¿æ€§æ¸å˜é¢œè‰²" class="headerlink" title="åˆ›å»º çº¿æ€§æ¸å˜é¢œè‰²"></a>åˆ›å»º çº¿æ€§æ¸å˜é¢œè‰²</h3><p>å¦‚ä¸‹ï¼Œçº¿æ€§æ¸å˜çš„é¢œè‰²ï¼Œéœ€è¦å€ŸåŠ© urlæ¥ä½¿ç”¨ã€‚è¯¦ç»†å‚è€ƒ ã€Šå€¼åŸŸä¸çº¿æ€§æ¸å˜  â€“  åˆ›å»º çº¿æ€§æ¸å˜é¢œè‰²ã€‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¸¸è§„çš„é¢œè‰²å¡«å……</span></span><br><span class="line">svgNode</span><br><span class="line">.style(<span class="string">"fill"</span>,<span class="string">"red"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//çº¿æ€§æ¸å˜é¢œè‰²å¡«å…… ï¼ˆçº¿æ€§æ¸å˜çš„é¢œè‰² ä½¿ç”¨ urlï¼‰</span></span><br><span class="line">svgNode</span><br><span class="line">.style(<span class="string">"fill"</span>,<span class="string">"url(#"</span> + linearGradient.attr(<span class="string">"id"</span>) + <span class="string">")"</span>);</span><br></pre></td></tr></table></figure></p><h3 id="åˆ©ç”¨æŠ•å½±å‡½æ•°è½¬æ¢ç»çº¬åº¦æˆåæ ‡"><a href="#åˆ©ç”¨æŠ•å½±å‡½æ•°è½¬æ¢ç»çº¬åº¦æˆåæ ‡" class="headerlink" title="åˆ©ç”¨æŠ•å½±å‡½æ•°è½¬æ¢ç»çº¬åº¦æˆåæ ‡"></a>åˆ©ç”¨æŠ•å½±å‡½æ•°è½¬æ¢ç»çº¬åº¦æˆåæ ‡</h3><p>å…¶å®GeoJSONæ–‡ä»¶çš„åœ°ç†ä¿¡æ¯ä¹Ÿæ˜¯ç»çº¬åº¦ï¼Œä¹Ÿæ˜¯é€šè¿‡æŠ•å½±å‡½æ•°å¾—åˆ°åœ°å›¾è·¯å¾„åæ ‡çš„ã€‚æ‰€ä»¥å¯ä»¥é€šè¿‡æŠ•å½±å‡½æ•°è·å¾—ç»çº¬åº¦å¯¹åº”çš„åœ°å›¾åƒç´ åæ ‡ã€‚<br>demoå‚è€ƒï¼š<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter13/13.2/13-2-1-mark-place.html" target="_blank" rel="noopener">åœ°å›¾ä¸Šæ ‡æ³¨åœ°ç‚¹ demo</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> projection = d3.geo.mercator()</span><br><span class="line">.center([<span class="number">107</span>, <span class="number">31</span>])</span><br><span class="line">.scale(<span class="number">600</span>)</span><br><span class="line">    .translate([width/<span class="number">2</span>, height/<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> path = d3.geo.path()</span><br><span class="line">.projection(projection);</span><br><span class="line"></span><br><span class="line"><span class="comment">//d.logï¼Œ d.lat ï¼šç»çº¬åº¦ è®¡ç®—æ ‡æ³¨ç‚¹çš„ä½ç½®</span></span><br><span class="line"> <span class="keyword">var</span> coor = projection([d.log, d.lat]);</span><br></pre></td></tr></table></figure></p><h2 id="d3ç”Ÿæˆå™¨"><a href="#d3ç”Ÿæˆå™¨" class="headerlink" title="d3ç”Ÿæˆå™¨"></a>d3ç”Ÿæˆå™¨</h2><p>ç”Ÿæˆå™¨å°±æ˜¯ç”Ÿæˆsvgçš„pathè·¯å¾„ï¼Œsvgé€šè¿‡ç”Ÿæˆå™¨ç”Ÿæˆçš„pathç»˜åˆ¶ä¸åŒå›¾å½¢ï¼Œd3æä¾›äº†ç›´çº¿ã€å››è¾¹å½¢(åŒºåŸŸ)ã€å¼¦ã€ç¬¦å·ã€æŠ˜çº¿ã€å¯¹è§’çº¿ç­‰ç”Ÿæˆå™¨ã€‚</p><h3 id="svg-area-åŒºåŸŸç”Ÿæˆå™¨"><a href="#svg-area-åŒºåŸŸç”Ÿæˆå™¨" class="headerlink" title="svg.area åŒºåŸŸç”Ÿæˆå™¨"></a>svg.area åŒºåŸŸç”Ÿæˆå™¨</h3><p>svg.areaçš„åŸç†æ˜¯é€šè¿‡ä¸¤æ¡çº¿ ç¡®å®šä¸€ä¸ªå››è¾¹å½¢ï¼›å¥½æ¯” ä¸¤ä¸ªç‚¹ç¡®å®šä¸€æ¡çº¿çš„é“ç†ã€‚<br>æ‰€ä»¥svg.area éƒ½æ˜¯ç”»ä¸€æ¡çº¿ï¼Œéœ€è¦ç”»ä¸¤æ¡çº¿ï¼Œå³å¯ç¡®å®šä¸€ä¸ªå››è¾¹å½¢ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter6/6.3/6-3-1-areaGenerator.html" target="_blank" rel="noopener">è¯¦ç»†demo</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//åˆ›å»ºä¸€ä¸ªåŒºåŸŸç”Ÿæˆå™¨</span><br><span class="line">//svg.areaçš„åŸç†æ˜¯é€šè¿‡ä¸¤æ¡çº¿ ç¡®å®šä¸€ä¸ªå››è¾¹å½¢ï¼›å¥½æ¯” ä¸¤ä¸ªç‚¹ç¡®å®šä¸€æ¡çº¿çš„é“ç†ã€‚</span><br><span class="line">//svg.areaä¸€æ¬¡æ€§è®¾ç½®ä¸¤ä¸ªç‚¹ x0 y0ï¼› x1 y1ï¼› é€šè¿‡ x ä¸€æ¬¡æ€§è®¾ç½® x0 å’Œ y0ï¼›</span><br><span class="line">var areaPath = d3.svg.area()</span><br><span class="line">.x(function(d,i)&#123; return 50 + i * 80; &#125;)</span><br><span class="line">.y0(function(d,i)&#123; return height/2; &#125;)</span><br><span class="line">.y1(function(d,i)&#123; return height/2 - d; &#125;)</span><br><span class="line">// .interpolate(&quot;step&quot;);</span><br><span class="line"></span><br><span class="line">//æ·»åŠ è·¯å¾„</span><br><span class="line">svg.append(&quot;path&quot;)</span><br><span class="line">.attr(&quot;d&quot;,areaPath(dataset))</span><br><span class="line">.attr(&quot;stroke&quot;,&quot;black&quot;)</span><br><span class="line">.attr(&quot;stroke-width&quot;,&quot;3px&quot;)</span><br><span class="line">.attr(&quot;fill&quot;,&quot;yellow&quot;);</span><br></pre></td></tr></table></figure></p><h2 id="d3äº¤äº’"><a href="#d3äº¤äº’" class="headerlink" title="d3äº¤äº’"></a>d3äº¤äº’</h2><h3 id="æŠ˜çº¿å›¾çš„ç„¦ç‚¹"><a href="#æŠ˜çº¿å›¾çš„ç„¦ç‚¹" class="headerlink" title="æŠ˜çº¿å›¾çš„ç„¦ç‚¹"></a>æŠ˜çº¿å›¾çš„ç„¦ç‚¹</h3><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.2/11.2.1/11-2-1-GeoJSON-chinamap.html" target="_blank" rel="noopener">å®Œæ•´demo</a>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š<br><figure class="image-box">                <img src="/image/d3/all/style.jpg" alt title class>                <p></p>            </figure></p><h4 id="è®¾ç½®é€æ˜åº¦ä¸º0çš„çŸ©å½¢"><a href="#è®¾ç½®é€æ˜åº¦ä¸º0çš„çŸ©å½¢" class="headerlink" title="è®¾ç½®é€æ˜åº¦ä¸º0çš„çŸ©å½¢"></a>è®¾ç½®é€æ˜åº¦ä¸º0çš„çŸ©å½¢</h4><p>è®¾ç½®é€æ˜åº¦ä¸º0çš„çŸ©å½¢ï¼Œè¦†ç›–æ•´ä¸ªå›¾ï¼Œè·å–é¼ æ ‡çš„ç„¦ç‚¹ä½ç½®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//è·å–é¼ æ ‡ç›¸å¯¹äºé€æ˜çŸ©å½¢å·¦ä¸Šè§’çš„åæ ‡ï¼Œå·¦ä¸Šè§’åæ ‡ä¸º(0,0)</span><br><span class="line">var mouseX = d3.mouse(this)[0] - padding.left;</span><br><span class="line">var mouseY = d3.mouse(this)[1] - padding.top;</span><br></pre></td></tr></table></figure></p><h4 id="ç„¦ç‚¹ä½ç½®-åå°„å‡º-å¯¹åº”åæ ‡å€¼"><a href="#ç„¦ç‚¹ä½ç½®-åå°„å‡º-å¯¹åº”åæ ‡å€¼" class="headerlink" title="ç„¦ç‚¹ä½ç½® åå°„å‡º å¯¹åº”åæ ‡å€¼"></a>ç„¦ç‚¹ä½ç½® åå°„å‡º å¯¹åº”åæ ‡å€¼</h4><p>ä½¿ç”¨å‡½æ•° xScale.invertï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var x0 = xScale.invert( mouseX );</span><br></pre></td></tr></table></figure></p><h4 id="æ ¹æ®åæ ‡å€¼-æ‰¾å‡º-å®é™…å€¼åŸŸå†…çš„å€¼"><a href="#æ ¹æ®åæ ‡å€¼-æ‰¾å‡º-å®é™…å€¼åŸŸå†…çš„å€¼" class="headerlink" title="æ ¹æ®åæ ‡å€¼ æ‰¾å‡º å®é™…å€¼åŸŸå†…çš„å€¼"></a>æ ¹æ®åæ ‡å€¼ æ‰¾å‡º å®é™…å€¼åŸŸå†…çš„å€¼</h4><p>å®é™…çš„åæ ‡å€¼å¯èƒ½æ²¡æœ‰å¯¹åº”çš„å€¼ï¼Œé‚£ä¹ˆæ­¤æ—¶åº”è¯¥é€šè¿‡é€»è¾‘æ‰¾åˆ°ä¸´è¿‘çš„ å€¼åŸŸå†…çš„å€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹x0å››èˆäº”å…¥ï¼Œå¦‚æœx0æ˜¯2005.6ï¼Œåˆ™è¿”å›2006ï¼›å¦‚æœæ˜¯2005.2ï¼Œåˆ™è¿”å›2005</span><br><span class="line">x0 = Math.round(x0);</span><br><span class="line"></span><br><span class="line">//æŸ¥æ‰¾åœ¨åŸæ•°ç»„ä¸­x0çš„å€¼ï¼Œå¹¶è¿”å›ç´¢å¼•å·</span><br><span class="line">var bisect = d3.bisector( function(d) &#123; return d[0]; &#125;).left;</span><br><span class="line">var index = bisect(data, x0) ;</span><br><span class="line">// æ‰¾åˆ°å¯¹åº”çš„å®é™…å®šä¹‰çš„å€¼</span><br><span class="line">dataset[k].gdp[index]</span><br></pre></td></tr></table></figure></p><h4 id="ç»˜åˆ¶"><a href="#ç»˜åˆ¶" class="headerlink" title="ç»˜åˆ¶"></a>ç»˜åˆ¶</h4><p>æœ‰äº†åæ ‡å€¼ï¼Œå°±çŸ¥é“æ‰€æœ‰çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥ç»˜å›¾äº†ã€‚</p><h2 id="åœ°å›¾"><a href="#åœ°å›¾" class="headerlink" title="åœ°å›¾"></a>åœ°å›¾</h2><h3 id="åœ°å›¾æ•°æ®ä¸‹è½½åœ°å€-GeoJSON"><a href="#åœ°å›¾æ•°æ®ä¸‹è½½åœ°å€-GeoJSON" class="headerlink" title="åœ°å›¾æ•°æ®ä¸‹è½½åœ°å€(GeoJSON)"></a>åœ°å›¾æ•°æ®ä¸‹è½½åœ°å€(GeoJSON)</h3><p><a href="http://www.naturalearthdata.com/" target="_blank" rel="noopener">åœ°å›¾æ•°æ®ä¸‹è½½åœ°å€</a>,è¿™ä¸ªç½‘å€ä¸‹è½½çš„æ•°æ®æ˜¯ä¸€ä¸ªzipåŒ…ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª.shpæ–‡ä»¶ï¼Œåœ°å›¾æ•°æ®åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œéœ€è¦è§£å‹è¿™ä¸ªæ•°æ®ã€‚</p><h3 id="ä»-shpæå–æ•°æ®"><a href="#ä»-shpæå–æ•°æ®" class="headerlink" title="ä».shpæå–æ•°æ®"></a>ä».shpæå–æ•°æ®</h3><p>éœ€è¦é€šè¿‡<a href="http://ogr2gui.ca/" target="_blank" rel="noopener">æ­¤ç½‘å€</a>ä».shpæ–‡ä»¶ä¸­æå–jsonæ•°æ®çš„è·å–ã€‚æå–å‡ºæ¥çš„æ•°æ®é€šå¸¸å¾ˆå¤§ï¼Œéœ€è¦ç®€åŒ–ä½¿ç”¨ï¼Œæ›´åŠ é«˜æ•ˆã€‚</p><h3 id="ç®€åŒ–æ•°æ®"><a href="#ç®€åŒ–æ•°æ®" class="headerlink" title="ç®€åŒ–æ•°æ®"></a>ç®€åŒ–æ•°æ®</h3><p><a href="https://mapshaper.org/" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹ç®€åŒ–æ•°æ®ç½‘å€</a></p><h3 id="TopoJSON"><a href="#TopoJSON" class="headerlink" title="TopoJSON"></a>TopoJSON</h3><p>TopoJSON æ˜¯d3ä½œè€…åˆ¶å®šï¼Œè¡¨è¾¾åŒæ ·çš„åœ°å›¾ä¿¡æ¯ï¼ŒTopoJSONæ–‡ä»¶çš„ä½“ç§¯è¦æ¯”GeoJSONå°ç™¾åˆ†ä¹‹å…«åï¼Œå½“GeoJSONæ–‡ä»¶è¾¾åˆ°20Mä»¥ä¸Šæ—¶ï¼ŒèŠ‚çœä¸‹æ¥çš„ä½“ç§¯æ›´åŠ æ˜æ˜¾ï¼Œç½‘ç»œè¯·æ±‚æ›´åŠ å¿«é€Ÿã€‚<br>å› æ­¤åœ¨æœåŠ¡å™¨ç«¯å¯æ”¾ç½®TopoJSONæ–‡ä»¶ï¼Œå› ä¸ºæ–‡ä»¶å°ï¼Œè¯·æ±‚å¿«é€Ÿï¼Œè¯·æ±‚å›æ¥åï¼Œåœ¨å‰ç«¯è½¬æ¢ä¸º GeoJSON æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨GeoJSONç”»å›¾ã€‚å› ä¸ºç”»å›¾è¿˜æ˜¯ä½¿ç”¨GeoJSONçš„ã€‚</p><h3 id="åœ°ç†è·¯å¾„ç”Ÿæˆå™¨"><a href="#åœ°ç†è·¯å¾„ç”Ÿæˆå™¨" class="headerlink" title="åœ°ç†è·¯å¾„ç”Ÿæˆå™¨"></a>åœ°ç†è·¯å¾„ç”Ÿæˆå™¨</h3><h4 id="d3-geo-path"><a href="#d3-geo-path" class="headerlink" title="d3.geo.path()"></a>d3.geo.path()</h4><p>è¿™æ˜¯ç»˜åˆ¶åœ°å›¾çš„æ ¸å¿ƒï¼Œåœ°å›¾åŸºæœ¬è·¯å¾„éƒ½æ˜¯è¿™ä¸ªï¼›<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.2/11.2.1/11-2-1-GeoJSON-chinamap.html" target="_blank" rel="noopener">å‚è€ƒdemo</a></p><h4 id="d3-geo-graticule"><a href="#d3-geo-graticule" class="headerlink" title="d3.geo.graticule()"></a>d3.geo.graticule()</h4><p>ç”¨äºç»˜åˆ¶ç»çº¿å’Œçº¬çº¿ï¼›<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.3/11.3.2/11-3-2-1-grid-world.html" target="_blank" rel="noopener">å‚è€ƒdemo</a></p><h4 id="d3-geo-circle"><a href="#d3-geo-circle" class="headerlink" title="d3.geo.circle()"></a>d3.geo.circle()</h4><p>ç”¨äºä»¥æŸä¸€åœ°ç‚¹ä¸ºä¸­å¿ƒç»˜åˆ¶åœ†å½¢åœ†æ ¼ï¼Œä¸€èˆ¬ç”¨å¾—å°‘ã€‚<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.3/11.3.2/11-3-2-3-circle-grid.html" target="_blank" rel="noopener">å‚è€ƒdemo</a></p><h4 id="d3-geo-projection"><a href="#d3-geo-projection" class="headerlink" title="d3.geo.projection"></a>d3.geo.projection</h4><p>ç”¨äºåˆ›å»ºæŠ•å½±ã€‚ä¸€èˆ¬ç”¨é»˜è®¤çš„æŠ•å½±å³å¯ï¼Œç”¨å¾—å°‘ã€‚<a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.3/11.3.2/11-3-2-1-grid-world.html" target="_blank" rel="noopener">å‚è€ƒdemo</a></p><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h4 id="GeoJSON-demo"><a href="#GeoJSON-demo" class="headerlink" title="GeoJSON demo"></a>GeoJSON demo</h4><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.2/11.2.1/11-2-1-GeoJSON-chinamap.html" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„GeoJSON demo</a></p><h4 id="TopoJSON-demo"><a href="#TopoJSON-demo" class="headerlink" title="TopoJSON demo"></a>TopoJSON demo</h4><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter11/11.2/11.2.2/11.2.2.1/11-2-2-1-TopoJSON-chinamap.html" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•çš„TopoJSON demo</a></p><h2 id="åœ°å›¾demoè®²è§£"><a href="#åœ°å›¾demoè®²è§£" class="headerlink" title="åœ°å›¾demoè®²è§£"></a>åœ°å›¾demoè®²è§£</h2><h3 id="å€¼åŸŸä¸çº¿æ€§æ¸å˜"><a href="#å€¼åŸŸä¸çº¿æ€§æ¸å˜" class="headerlink" title="å€¼åŸŸä¸çº¿æ€§æ¸å˜"></a>å€¼åŸŸä¸çº¿æ€§æ¸å˜</h3><p>å‚è€ƒã€Šå€¼åŸŸä¸çº¿æ€§æ¸å˜ã€‹</p><h3 id="å¤œå…‰å›¾"><a href="#å¤œå…‰å›¾" class="headerlink" title="å¤œå…‰å›¾"></a>å¤œå…‰å›¾</h3><h4 id="å®Œæ•´demoä¸æ•ˆæœ"><a href="#å®Œæ•´demoä¸æ•ˆæœ" class="headerlink" title="å®Œæ•´demoä¸æ•ˆæœ"></a>å®Œæ•´demoä¸æ•ˆæœ</h4><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter13/13.2/13-2-2-night-light.html" target="_blank" rel="noopener">å®Œæ•´ demo</a><br><figure class="image-box">                <img src="/image/d3/all/night.jpg" alt title class>                <p></p>            </figure></p><h4 id="åœ¨svgä¸­æ·»åŠ æ»¤é•œ"><a href="#åœ¨svgä¸­æ·»åŠ æ»¤é•œ" class="headerlink" title="åœ¨svgä¸­æ·»åŠ æ»¤é•œ"></a>åœ¨svgä¸­æ·»åŠ æ»¤é•œ</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> defs = svg.append(<span class="string">"defs"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gaussian = defs.append(<span class="string">"filter"</span>)</span><br><span class="line">.attr(<span class="string">"id"</span>,<span class="string">"gaussian"</span>);</span><br><span class="line"></span><br><span class="line">gaussian.append(<span class="string">"feGaussianBlur"</span>)</span><br><span class="line">.attr(<span class="string">"in"</span>,<span class="string">"SourceGraphic"</span>)</span><br><span class="line">.attr(<span class="string">"stdDeviation"</span>,<span class="string">"1"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> points = svg.selectAll(<span class="string">"circle"</span>)</span><br><span class="line">                    .data(cities)<span class="comment">//ç»‘å®šæ•°ç»„</span></span><br><span class="line">                    .enter()</span><br><span class="line">                    .append(<span class="string">"circle"</span>)</span><br><span class="line">                    .attr(<span class="string">"class"</span>,<span class="string">"point"</span>)</span><br><span class="line">                    <span class="comment">//è®¾å®šè¿‡æ»¤å™¨</span></span><br><span class="line">                    .style(<span class="string">"filter"</span>,<span class="string">"url(#"</span>+ gaussian.attr(<span class="string">"id"</span>) +<span class="string">")"</span>);</span><br></pre></td></tr></table></figure><h3 id="æ ‡çº¿"><a href="#æ ‡çº¿" class="headerlink" title="æ ‡çº¿"></a>æ ‡çº¿</h3><h4 id="å®Œæ•´demoä¸æ•ˆæœ-1"><a href="#å®Œæ•´demoä¸æ•ˆæœ-1" class="headerlink" title="å®Œæ•´demoä¸æ•ˆæœ"></a>å®Œæ•´demoä¸æ•ˆæœ</h4><p>æœ¬ä¾‹ä¸»è¦è€ƒå¯Ÿ å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ ‡çº¿ï¼Œä¸»è¦åˆ©ç”¨äº† line æ ‡ç­¾ï¼Œ marker-endï¼Œmark-start å±æ€§ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter13/13.3/13-3-1-arrow-line.html" target="_blank" rel="noopener">å®Œæ•´ demo</a><br><figure class="image-box">                <img src="/image/d3/all/map_line.jpg" alt title class>                <p></p>            </figure></p><h4 id="çº¿æ®µçš„èµ·å§‹ä½ç½®æ·»åŠ æ ‡è®°å›¾æ ‡"><a href="#çº¿æ®µçš„èµ·å§‹ä½ç½®æ·»åŠ æ ‡è®°å›¾æ ‡" class="headerlink" title="çº¿æ®µçš„èµ·å§‹ä½ç½®æ·»åŠ æ ‡è®°å›¾æ ‡"></a>çº¿æ®µçš„èµ·å§‹ä½ç½®æ·»åŠ æ ‡è®°å›¾æ ‡</h4><p>æœ¬ä¾‹ä¸­ï¼Œçº¿æ®µèµ·å§‹ä½ç½®åˆ†åˆ«æ·»åŠ åœ†ç‚¹ä¸ç®­å¤´æ ‡è®°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">svg.append(<span class="string">"line"</span>)</span><br><span class="line">.attr(<span class="string">"class"</span>,<span class="string">"route"</span>)</span><br><span class="line">.attr(<span class="string">"x1"</span>,guilin[<span class="number">0</span>])</span><br><span class="line">.attr(<span class="string">"y1"</span>,guilin[<span class="number">1</span>])</span><br><span class="line">.attr(<span class="string">"x2"</span>,peking[<span class="number">0</span>])</span><br><span class="line">.attr(<span class="string">"y2"</span>,peking[<span class="number">1</span>])</span><br><span class="line">.attr(<span class="string">"marker-end"</span>,<span class="string">"url(#arrow)"</span>)</span><br><span class="line">.attr(<span class="string">"marker-start"</span>,<span class="string">"url(#startPoint)"</span>);</span><br></pre></td></tr></table></figure></p><h4 id="lineçš„-mark-start-ç¡®å®šèµ·å§‹ä½ç½®"><a href="#lineçš„-mark-start-ç¡®å®šèµ·å§‹ä½ç½®" class="headerlink" title="lineçš„ mark-start ç¡®å®šèµ·å§‹ä½ç½®"></a>lineçš„ mark-start ç¡®å®šèµ·å§‹ä½ç½®</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="lineçš„-marker-end-ç¡®å®šç»ˆç‚¹ä½ç½®"><a href="#lineçš„-marker-end-ç¡®å®šç»ˆç‚¹ä½ç½®" class="headerlink" title="lineçš„ marker-end ç¡®å®šç»ˆç‚¹ä½ç½®"></a>lineçš„ marker-end ç¡®å®šç»ˆç‚¹ä½ç½®</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="d3æ ‡è®°å›¾æ ‡çš„ä½¿ç”¨"><a href="#d3æ ‡è®°å›¾æ ‡çš„ä½¿ç”¨" class="headerlink" title="d3æ ‡è®°å›¾æ ‡çš„ä½¿ç”¨"></a>d3æ ‡è®°å›¾æ ‡çš„ä½¿ç”¨</h4><p>å¦‚ä¸‹ï¼Œå°±æ˜¯æœ¬ä¾‹æ•ˆæœå›¾ä¸­çš„ç®­å¤´å›¾æ ‡ä½¿ç”¨æ–¹æ³•,åœ¨defsä¸Šåˆ›å»ºï¼Œæ·»åŠ markeræ ‡ç­¾ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> defs = svg.append(<span class="string">"defs"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> arrowMarker = defs.append(<span class="string">"marker"</span>)</span><br><span class="line">.attr(<span class="string">"id"</span>,<span class="string">"arrow"</span>)</span><br><span class="line">.attr(<span class="string">"markerUnits"</span>,<span class="string">"strokeWidth"</span>)</span><br><span class="line">    .attr(<span class="string">"markerWidth"</span>,<span class="string">"12"</span>)</span><br><span class="line">                        .attr(<span class="string">"markerHeight"</span>,<span class="string">"12"</span>)</span><br><span class="line">                        .attr(<span class="string">"viewBox"</span>,<span class="string">"0 0 12 12"</span>) </span><br><span class="line">                        .attr(<span class="string">"refX"</span>,<span class="string">"6"</span>)</span><br><span class="line">                        .attr(<span class="string">"refY"</span>,<span class="string">"6"</span>)</span><br><span class="line">                        .attr(<span class="string">"orient"</span>,<span class="string">"auto"</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> arrow_path = <span class="string">"M2,2 L10,6 L2,10 L6,6 L2,2"</span>;</span><br><span class="line"></span><br><span class="line">arrowMarker.append(<span class="string">"path"</span>)</span><br><span class="line">.attr(<span class="string">"d"</span>,arrow_path)</span><br><span class="line">.attr(<span class="string">"fill"</span>,<span class="string">"#000"</span>);</span><br></pre></td></tr></table></figure></p><h3 id="ç¼©æ”¾ä¸å¹³ç§»"><a href="#ç¼©æ”¾ä¸å¹³ç§»" class="headerlink" title="ç¼©æ”¾ä¸å¹³ç§»"></a>ç¼©æ”¾ä¸å¹³ç§»</h3><h4 id="å®Œæ•´demoä¸æ•ˆæœ-2"><a href="#å®Œæ•´demoä¸æ•ˆæœ-2" class="headerlink" title="å®Œæ•´demoä¸æ•ˆæœ"></a>å®Œæ•´demoä¸æ•ˆæœ</h4><p>æœ¬ä¾‹ä¸»è¦è€ƒå¯Ÿ å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ ‡çº¿ï¼Œä¸»è¦åˆ©ç”¨äº† line æ ‡ç­¾ï¼Œ marker-endï¼Œmark-start å±æ€§ã€‚<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter13/13.4/13-4-1-plane-drag-scale.html" target="_blank" rel="noopener">å®Œæ•´ demo</a><br><figure class="image-box">                <img src="/image/d3/all/map_zoom.jpg" alt title class>                <p></p>            </figure></p><h4 id="å®šä¹‰é€æ˜çŸ©å½¢ï¼Œè®¾ç½®zoomè¡Œä¸º"><a href="#å®šä¹‰é€æ˜çŸ©å½¢ï¼Œè®¾ç½®zoomè¡Œä¸º" class="headerlink" title="å®šä¹‰é€æ˜çŸ©å½¢ï¼Œè®¾ç½®zoomè¡Œä¸º"></a>å®šä¹‰é€æ˜çŸ©å½¢ï¼Œè®¾ç½®zoomè¡Œä¸º</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> zoom = d3.behavior.zoom()</span><br><span class="line">.scaleExtent([<span class="number">1</span>, <span class="number">10</span>])</span><br><span class="line">.on(<span class="string">"zoom"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123;</span><br><span class="line"><span class="comment">//æ›´æ–°æŠ•å½±å‡½æ•°çš„å¹³ç§»é‡</span></span><br><span class="line">projection.translate([ initTran[<span class="number">0</span>] + d3.event.translate[<span class="number">0</span>],</span><br><span class="line">   initTran[<span class="number">1</span>] + d3.event.translate[<span class="number">1</span>] ]);</span><br><span class="line"><span class="comment">//æ›´æ–°æŠ•å½±å‡½æ•°çš„ç¼©æ”¾é‡</span></span><br><span class="line">projection.scale( initScale * d3.event.scale );</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡ç»˜åœ°å›¾</span></span><br><span class="line">countries.attr(<span class="string">"d"</span>,path);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡ç»˜ç»çº¬åº¦ç½‘æ ¼</span></span><br><span class="line">gridPath.attr(<span class="string">"d"</span>,path);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">svg.append(<span class="string">"rect"</span>)</span><br><span class="line">.attr(<span class="string">"class"</span>,<span class="string">"overlay"</span>)</span><br><span class="line">.attr(<span class="string">"x"</span>, <span class="number">0</span>)</span><br><span class="line">.attr(<span class="string">"y"</span>, <span class="number">0</span>)</span><br><span class="line">.attr(<span class="string">"width"</span>,width)</span><br><span class="line">.attr(<span class="string">"height"</span>,height)</span><br><span class="line">.call(zoom);</span><br></pre></td></tr></table></figure><h4 id="åˆ©ç”¨æŠ•å½±å‡½æ•°çš„translateå’Œscale"><a href="#åˆ©ç”¨æŠ•å½±å‡½æ•°çš„translateå’Œscale" class="headerlink" title="åˆ©ç”¨æŠ•å½±å‡½æ•°çš„translateå’Œscale"></a>åˆ©ç”¨æŠ•å½±å‡½æ•°çš„translateå’Œscale</h4><p>å¦‚ä¸Šé¢ä»£ç </p><h2 id="å€¼åŸŸä¸çº¿æ€§æ¸å˜-1"><a href="#å€¼åŸŸä¸çº¿æ€§æ¸å˜-1" class="headerlink" title="å€¼åŸŸä¸çº¿æ€§æ¸å˜"></a>å€¼åŸŸä¸çº¿æ€§æ¸å˜</h2><h3 id="å®Œæ•´demoä¸æ•ˆæœ-3"><a href="#å®Œæ•´demoä¸æ•ˆæœ-3" class="headerlink" title="å®Œæ•´demoä¸æ•ˆæœ"></a>å®Œæ•´demoä¸æ•ˆæœ</h3><p><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter13/13.1/13-1-colorRange.html" target="_blank" rel="noopener">å®Œæ•´ demo</a><br><figure class="image-box">                <img src="/image/d3/all/colors.jpg" alt title class>                <p></p>            </figure></p><h3 id="é€šè¿‡å€¼åŸŸåˆ›å»ºé¢œè‰²"><a href="#é€šè¿‡å€¼åŸŸåˆ›å»ºé¢œè‰²" class="headerlink" title="é€šè¿‡å€¼åŸŸåˆ›å»ºé¢œè‰²"></a>é€šè¿‡å€¼åŸŸåˆ›å»ºé¢œè‰²</h3><h4 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªçº¿æ€§æ¯”ä¾‹å°ºï¼Œå°†æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´çš„å€¼æ˜ å°„åˆ°[0, 1]</span></span><br><span class="line"><span class="keyword">var</span> linear = d3.scale.linear()</span><br><span class="line">.domain([minvalue, maxvalue])</span><br><span class="line">.range([<span class="number">0</span>, <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰æœ€å°å€¼å’Œæœ€å¤§å€¼å¯¹åº”çš„é¢œè‰²</span></span><br><span class="line"><span class="keyword">var</span> a = d3.rgb(<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>);<span class="comment">//æµ…è“è‰²</span></span><br><span class="line"><span class="keyword">var</span> b = d3.rgb(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>);<span class="comment">//è“è‰²</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//é¢œè‰²æ’å€¼å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> computeColor = d3.interpolate(a,b);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾å®šå„çœä»½çš„å¡«å……è‰²</span></span><br><span class="line">provinces.style(<span class="string">"fill"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">d,i</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> t = linear( values[d.properties.name] );</span><br><span class="line"><span class="keyword">var</span> color = computeColor(t);</span><br><span class="line"><span class="keyword">return</span> color.toString();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="d3-scale-linearåˆ›å»º-0-1-èŒƒå›´çš„æ¯”ä¾‹å°º"><a href="#d3-scale-linearåˆ›å»º-0-1-èŒƒå›´çš„æ¯”ä¾‹å°º" class="headerlink" title="d3.scale.linearåˆ›å»º[0,1]èŒƒå›´çš„æ¯”ä¾‹å°º"></a>d3.scale.linearåˆ›å»º[0,1]èŒƒå›´çš„æ¯”ä¾‹å°º</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="d3-interpolate-a-b-æ¥å—ä¸¤ä¸ªæé™é¢œè‰²"><a href="#d3-interpolate-a-b-æ¥å—ä¸¤ä¸ªæé™é¢œè‰²" class="headerlink" title="d3.interpolate(a,b)æ¥å—ä¸¤ä¸ªæé™é¢œè‰²"></a>d3.interpolate(a,b)æ¥å—ä¸¤ä¸ªæé™é¢œè‰²</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h3 id="åˆ›å»º-çº¿æ€§æ¸å˜é¢œè‰²-1"><a href="#åˆ›å»º-çº¿æ€§æ¸å˜é¢œè‰²-1" class="headerlink" title="åˆ›å»º çº¿æ€§æ¸å˜é¢œè‰²"></a>åˆ›å»º çº¿æ€§æ¸å˜é¢œè‰²</h3><h4 id="å®ç°ä»£ç -1"><a href="#å®ç°ä»£ç -1" class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰æœ€å°å€¼å’Œæœ€å¤§å€¼å¯¹åº”çš„é¢œè‰²</span></span><br><span class="line"><span class="keyword">var</span> a = d3.rgb(<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>);<span class="comment">//æµ…è“è‰²</span></span><br><span class="line"><span class="keyword">var</span> b = d3.rgb(<span class="number">0</span>,<span class="number">0</span>,<span class="number">255</span>);<span class="comment">//è“è‰²</span></span><br><span class="line"><span class="comment">//å®šä¹‰ä¸€ä¸ªçº¿æ€§æ¸å˜</span></span><br><span class="line">    <span class="keyword">var</span> defs = svg.append(<span class="string">"defs"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> linearGradient = defs.append(<span class="string">"linearGradient"</span>)</span><br><span class="line">                            .attr(<span class="string">"id"</span>,<span class="string">"linearColor"</span>)</span><br><span class="line">                            .attr(<span class="string">"x1"</span>,<span class="string">"0%"</span>)</span><br><span class="line">                            .attr(<span class="string">"y1"</span>,<span class="string">"0%"</span>)</span><br><span class="line">                            .attr(<span class="string">"x2"</span>,<span class="string">"100%"</span>)</span><br><span class="line">                            .attr(<span class="string">"y2"</span>,<span class="string">"0%"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> stop1 = linearGradient.append(<span class="string">"stop"</span>)</span><br><span class="line">                    .attr(<span class="string">"offset"</span>,<span class="string">"0%"</span>)</span><br><span class="line">                    .style(<span class="string">"stop-color"</span>,a.toString());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> stop2 = linearGradient.append(<span class="string">"stop"</span>)</span><br><span class="line">                    .attr(<span class="string">"offset"</span>,<span class="string">"100%"</span>)</span><br><span class="line">                    .style(<span class="string">"stop-color"</span>,b.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ·»åŠ ä¸€ä¸ªçŸ©å½¢ï¼Œå¹¶åº”ç”¨çº¿æ€§æ¸å˜</span></span><br><span class="line">    <span class="keyword">var</span> colorRect = svg.append(<span class="string">"rect"</span>)</span><br><span class="line">                .attr(<span class="string">"x"</span>, <span class="number">20</span>)</span><br><span class="line">                .attr(<span class="string">"y"</span>, <span class="number">490</span>)</span><br><span class="line">                .attr(<span class="string">"width"</span>, <span class="number">140</span>)</span><br><span class="line">                .attr(<span class="string">"height"</span>, <span class="number">30</span>)</span><br><span class="line">                .style(<span class="string">"fill"</span>,<span class="string">"url(#"</span> + linearGradient.attr(<span class="string">"id"</span>) + <span class="string">")"</span>);</span><br></pre></td></tr></table></figure><h4 id="çº¿æ€§æ¸å˜å®šä¹‰åœ¨-defs-æ ‡ç­¾ä¸­"><a href="#çº¿æ€§æ¸å˜å®šä¹‰åœ¨-defs-æ ‡ç­¾ä¸­" class="headerlink" title="çº¿æ€§æ¸å˜å®šä¹‰åœ¨ defs æ ‡ç­¾ä¸­"></a>çº¿æ€§æ¸å˜å®šä¹‰åœ¨ defs æ ‡ç­¾ä¸­</h4><p>çº¿æ€§æ¸å˜å°±æ˜¯ä¸Šå›¾ ä¸‹é¢çš„é‚£ä¸ªæ¸å˜çŸ©å½¢æ¡†ã€‚<br>çº¿æ€§æ¸å˜å®šä¹‰åœ¨ defs æ ‡ç­¾ä¸­ã€‚å‚è€ƒä¸Šé¢ä»£ç ã€‚</p><h4 id="å®šä¹‰ä¸€ä¸ªå¸¦idçš„linearGradient"><a href="#å®šä¹‰ä¸€ä¸ªå¸¦idçš„linearGradient" class="headerlink" title="å®šä¹‰ä¸€ä¸ªå¸¦idçš„linearGradient"></a>å®šä¹‰ä¸€ä¸ªå¸¦idçš„linearGradient</h4><p>å¦‚ä¸Šï¼Œé€šè¿‡idæ¥å¼•ç”¨è¿™ä¸ªæ¸å˜é¢œè‰²</p><h4 id="æ¸å˜é¢œè‰²ä½¿ç”¨url-fill"><a href="#æ¸å˜é¢œè‰²ä½¿ç”¨url-fill" class="headerlink" title="æ¸å˜é¢œè‰²ä½¿ç”¨url fill"></a>æ¸å˜é¢œè‰²ä½¿ç”¨url fill</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="é€šè¿‡stopæ·»åŠ æé™é¢œè‰²"><a href="#é€šè¿‡stopæ·»åŠ æé™é¢œè‰²" class="headerlink" title="é€šè¿‡stopæ·»åŠ æé™é¢œè‰²"></a>é€šè¿‡stopæ·»åŠ æé™é¢œè‰²</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.bilibili.com/video/av13492121/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener">è§†é¢‘æ•™ç¨‹æœ‰7ä¸ªï¼Œåœ¨è¿™ä¸ªç½‘ç«™ä¸Šæ˜¯èƒ½æ‰¾åˆ°è¿™ä¸ƒä¸ªè§†é¢‘çš„</a><br><a href="https://github.com/tianxuzhang/d3.v4-API-Translation" target="_blank" rel="noopener">D3.js 4.x APIä¸­æ–‡æ‰‹å†Œ</a><br><a href="https://github.com/d3/d3-3.x-api-reference/blob/master/API-Reference.md" target="_blank" rel="noopener">D3.js 3.x APIè‹±æ–‡æ–‡æ¡£</a><br><a href="https://github.com/d3/d3-3.x-api-reference/blob/master/API-Reference.md" target="_blank" rel="noopener">D3.js ä¸­æ–‡æ–‡æ¡£(åŒ…å«æœ€æ–°ç‰ˆæœ¬ä¸­æ–‡æ–‡æ¡£ï¼ŒåŒæ—¶æ”¾å‡ºä¸­è‹±æ–‡å„ç‰ˆæœ¬åœ°å€)</a></p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> d3.js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dvaä¸umiç¬”è®°</title>
      <link href="/2020/05/01/dva_umi/"/>
      <url>/2020/05/01/dva_umi/</url>
      
        <content type="html"><![CDATA[<p>æš‚æ—¶æ²¡æœ‰æƒ³å¥½å¦‚ä½•æ•´ç†ç¬”è®°ï¼Œæš‚ä¸”ä»¥æ¯ä¸ªé¡¹ç›®ä¸ºç« èŠ‚è®°ç¬”è®°ã€‚</p><h2 id="user-dashboardé¡¹ç›®ç»†èŠ‚"><a href="#user-dashboardé¡¹ç›®ç»†èŠ‚" class="headerlink" title="user-dashboardé¡¹ç›®ç»†èŠ‚"></a>user-dashboardé¡¹ç›®ç»†èŠ‚</h2><h3 id="umi-ç›®å½•"><a href="#umi-ç›®å½•" class="headerlink" title=".umi/ ç›®å½•"></a>.umi/ ç›®å½•</h3><p> æ­¤ç›®å½•ä¸ºéªŒè¯ç›®å½•ï¼Œnpm startç”Ÿæˆï¼Œæ²¡æœ‰ä½œç”¨ï¼Œä¹Ÿä¸æ¨èåœ¨æ­¤ä¿®æ”¹ä»£ç ï¼Œä¸ºæ–¹ä¾¿éªŒè¯è€Œç”Ÿã€‚</p><h3 id="é¡¹ç›®ç›®å½•"><a href="#é¡¹ç›®ç›®å½•" class="headerlink" title="é¡¹ç›®ç›®å½•"></a>é¡¹ç›®ç›®å½•</h3> <figure class="image-box">                <img src="/image/dva_umi/user-dashboard.png" alt title class>                <p></p>            </figure><h3 id="å…¥å£é¡µé¢"><a href="#å…¥å£é¡µé¢" class="headerlink" title="å…¥å£é¡µé¢"></a>å…¥å£é¡µé¢</h3> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src\pages\.umi\umi.js  ---ReactDOM.render</span><br></pre></td></tr></table></figure><p>æ­¤é¡µé¢é›†æˆäº†ä¸€ä¸ªé¡¹ç›®çš„ä¸¤å¤§è¦ç´ ï¼š dva (çŠ¶æ€) å’Œ è·¯ç”±ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">src\pages\.umi\DvaContainer.js  ---dva (çŠ¶æ€)</span><br><span class="line">src\pages\.umi\router.js ---è·¯ç”±</span><br></pre></td></tr></table></figure></p><h3 id="dva-å¸ƒå±€"><a href="#dva-å¸ƒå±€" class="headerlink" title="dva å¸ƒå±€"></a>dva å¸ƒå±€</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src\pages\.umi\DvaContainer.js</span><br><span class="line">src\pages\users\models\users.js (reducers effects)</span><br><span class="line">src\pages\users\components\Users\Users.js (connect mapStateToProps dispatch) ã€dispatch ç”±connecté›†æˆã€‘</span><br></pre></td></tr></table></figure><h3 id="User-jsé¡µé¢åˆ†æ"><a href="#User-jsé¡µé¢åˆ†æ" class="headerlink" title="User.jsé¡µé¢åˆ†æ"></a>User.jsé¡µé¢åˆ†æ</h3><h4 id="subscriptions-setup"><a href="#subscriptions-setup" class="headerlink" title="subscriptions setup"></a>subscriptions setup</h4><p>è¿›å…¥Useré¡µé¢åï¼Œé¦–å…ˆè§¦å‘ src\pages\users\models\users.js ä¸‹çš„:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">subscriptions: &#123;</span><br><span class="line">    setup(&#123; dispatch, history &#125;) &#123;</span><br><span class="line">      return history.listen((&#123; pathname, query &#125;) =&gt; &#123;</span><br><span class="line">        if (pathname === &apos;/users&apos;) &#123;</span><br><span class="line">          dispatch(&#123; type: &apos;fetch&apos;, payload: query &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>åœ¨setup ä¸­è§¦å‘ æ”¹jsä¸‹çš„ effects fetch.<br><a href="https://dvajs.com/knowledgemap/#%E5%BC%82%E6%AD%A5%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96" target="_blank" rel="noopener">åŸå› å‚è€ƒdvaæ–‡æ¡£â€”å¼‚æ­¥æ•°æ®åˆå§‹åŒ–</a></p><h4 id="effects-fetch"><a href="#effects-fetch" class="headerlink" title="effects fetch"></a>effects fetch</h4><p>åœ¨fetchä¸­é¦–å…ˆ usersService.fetch å‘åå°è¯·æ±‚æ•°æ®ï¼›<br>ç„¶åå°†è¿”å›çš„æ•°æ®ï¼Œputè§¦å‘ reducers save;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*fetch(&#123; payload: &#123; page = 1 &#125; &#125;, &#123; call, put &#125;) &#123;</span><br><span class="line">     const &#123; data, headers &#125; = yield call(usersService.fetch, &#123; page &#125;);</span><br><span class="line">     yield put(&#123;</span><br><span class="line">       type: &apos;save&apos;,</span><br><span class="line">       payload: &#123;</span><br><span class="line">         data,</span><br><span class="line">         total: parseInt(headers[&apos;x-total-count&apos;], 10),</span><br><span class="line">         page: parseInt(page, 10),</span><br><span class="line">       &#125;,</span><br><span class="line">     &#125;);</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="reducers-save"><a href="#reducers-save" class="headerlink" title="reducers save"></a>reducers save</h4><p>é€šè¿‡save reducerå¿˜reduxä¸Šé€ æ•°æ®listï¼Œtotalã€‚ã€‚ã€‚ä»¥åUseré¡µé¢ä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">reducers: &#123;</span><br><span class="line">   save(state, &#123; payload: &#123; data: list, total, page &#125; &#125;) &#123;</span><br><span class="line">     return &#123; ...state, list, total, page &#125;;</span><br><span class="line">   &#125;,</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="ç»†èŠ‚å…³æ³¨ç‚¹"><a href="#ç»†èŠ‚å…³æ³¨ç‚¹" class="headerlink" title="ç»†èŠ‚å…³æ³¨ç‚¹"></a>ç»†èŠ‚å…³æ³¨ç‚¹</h3><h4 id="fetch-ä¸-yield-çš„-generateorå†™æ³•"><a href="#fetch-ä¸-yield-çš„-generateorå†™æ³•" class="headerlink" title="*fetch ä¸ yield çš„ generateorå†™æ³•"></a>*fetch ä¸ yield çš„ generateorå†™æ³•</h4><p>è¿™é‡Œçš„*å’Œyieldæ˜¯ generateorçš„å†™æ³•ï¼Œå¯åˆ°mdnç½‘æŸ¥è¯¢äº†è§£ã€‚</p><h4 id="fetchçš„loadingæ˜¯æ€ä¹ˆæ¥çš„"><a href="#fetchçš„loadingæ˜¯æ€ä¹ˆæ¥çš„" class="headerlink" title="fetchçš„loadingæ˜¯æ€ä¹ˆæ¥çš„"></a>fetchçš„loadingæ˜¯æ€ä¹ˆæ¥çš„</h4><p>å‘fetchè¯·æ±‚æ—¶ï¼Œé€šè¿‡dva-loading é…åˆdvaä¸­é—´ä»¶ï¼Œä¼šè‡ªåŠ¨ç»™redux çš„store æ”¹å˜store.loadingçš„stateï¼Œ<br>åœ¨fetchå¼€å§‹å’Œå®Œæˆæ—¶å°†store.loadingç½®ä¸ºtrueæˆ–falseï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//src\pages\.umi\DvaContainer.js</span><br><span class="line">import createLoading from &apos;dva-loading&apos;;</span><br><span class="line">app.use(createLoading());</span><br></pre></td></tr></table></figure><p>åœ¨é¡µé¢ä¸­ï¼Œé€šè¿‡mapStateToPropsæ‹¿åˆ°è¿™ä¸ªreduxçš„state.loadingå€¼ï¼Œæ ¹æ®è¿™ä¸ªå€¼ï¼Œè‡ªè¡Œå¼€å¯æˆ–å…³é—­loadingç»„ä»¶æˆ–æ•ˆæœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//src\pages\users\components\Users\Users.js</span><br><span class="line">&lt;Table</span><br><span class="line">    columns=&#123;columns&#125;</span><br><span class="line">    dataSource=&#123;dataSource&#125;</span><br><span class="line">    loading=&#123;loading&#125;</span><br><span class="line">    rowKey=&#123;record =&gt; record.id&#125;</span><br><span class="line">    pagination=&#123;false&#125;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line">function mapStateToProps(state) &#123;</span><br><span class="line">  const &#123; list, total, page &#125; = state.users;</span><br><span class="line">  return &#123;</span><br><span class="line">    loading: state.loading.models.users,</span><br><span class="line">    list,</span><br><span class="line">    total,</span><br><span class="line">    page,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default connect(mapStateToProps)(Users);</span><br></pre></td></tr></table></figure></p><h4 id="import-styles-from-â€˜-index-cssâ€™-çš„è¿ç”¨ï¼š"><a href="#import-styles-from-â€˜-index-cssâ€™-çš„è¿ç”¨ï¼š" class="headerlink" title="import styles from â€˜./index.cssâ€™ çš„è¿ç”¨ï¼š"></a>import styles from â€˜./index.cssâ€™ çš„è¿ç”¨ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import styles from &apos;./index.css&apos;;</span><br><span class="line">console.log(styles)//&#123;normal: &quot;index__normal___3v60A&quot;, content: &quot;index__content___14HDd&quot;, main: &quot;index__main___nz_0B&quot;&#125;</span><br><span class="line"> &lt;div className=&#123;styles.main&#125;&gt;&#123;children&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="dvaä¸umijsåœ¨é¡¹ç›®ä¸­èµ·çš„ä½œç”¨ç»Ÿç­¹åˆ†æ"><a href="#dvaä¸umijsåœ¨é¡¹ç›®ä¸­èµ·çš„ä½œç”¨ç»Ÿç­¹åˆ†æ" class="headerlink" title="dvaä¸umijsåœ¨é¡¹ç›®ä¸­èµ·çš„ä½œç”¨ç»Ÿç­¹åˆ†æ"></a>dvaä¸umijsåœ¨é¡¹ç›®ä¸­èµ·çš„ä½œç”¨ç»Ÿç­¹åˆ†æ</h3><p>æœ¬èŠ‚åˆ†æå‚è€ƒpages/.umi/ä¸‹çš„æ–‡ä»¶è¿›è¡Œã€‚</p><h4 id="dva"><a href="#dva" class="headerlink" title="dva"></a>dva</h4><p>é¡¹ç›®ä¸­ï¼Œé€šè¿‡dvaï¼Œä½ ä¸ç”¨å†™storeä¸Providerçš„é›†æˆä»£ç ï¼Œdvaå¸®ä½ æŠŠè¿™å—å®ç°,dvaåˆå°†è·¯ç”±è¿™å—çš„é€»è¾‘å‰¥ç¦»å‡ºæ¥ï¼Œæä¾›ç±»ä¼¼æ¥å£(this.props.children)æ–¹å¼ï¼Œæ–¹ä¾¿æ¥å…¥é¡¹ç›®è·¯ç”±jsï¼›(å› æ­¤ï¼Œdvaåªä¸“æ³¨åšreduxç›¸å…³çš„çŠ¶æ€éƒ¨åˆ†ï¼Œå¹¶å‰¥ç¦»è·¯ç”±ä¸”æä¾›è·¯ç”±æ¥å£ï¼Œæ–¹ä¾¿æ¥å…¥è·¯ç”±)</p><p>è€Œä½ åªéœ€ä¸“æ³¨äºï¼š</p><p>1ã€å†™reducerï¼›(æŒ‰dvaè§„å®šï¼Œå°†reducerå†™åœ¨modelä¸‹ï¼Œä»¥ä¾¿dvaèƒ½è§£æ)</p><p>2ã€å“ªä¸ªç»„ä»¶éœ€è¦reduxäº†ï¼Œç»™ç»„ä»¶åŒ…ä¸€å±‚connectï¼Œå†™å¥½mapStateToPropsï¼Œ</p><h4 id="umijs"><a href="#umijs" class="headerlink" title="umijs"></a>umijs</h4><p>è‡³äºè·¯ç”±ï¼Œåˆ™ç”±umijså¤„ç†ï¼Œumijså¯ä»¥å°†pagesä¸‹çš„æ–‡ä»¶è‡ªåŠ¨è§£æä¸ºè·¯ç”±router.js(.umiä¸‹çš„router.js);</p><p>è‡³æ­¤ï¼Œä¸€ä¸ªé¡¹ç›®çš„ reduxä¸è·¯ç”±ä¸¤å¤§å—å…¨éƒ¨å†™å¥½ã€‚<br>å‰©ä¸‹ä¸€ä¸ªå·¥ä½œå°±æ˜¯ å¦‚ä½•å°†reduxä¸è·¯ç”±ä¸¤å¤§å—æœ‰æœºç»“åˆèµ·æ¥å‘¢ï¼Œ<br>è¿™ä¸ªå·¥ä½œå°±æ˜¯umijsåšçš„:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function render() &#123;</span><br><span class="line">  const DvaContainer = require(&apos;./DvaContainer&apos;).default; //dvaå¤„ç†çš„reduxé€»è¾‘éƒ¨åˆ†</span><br><span class="line">ReactDOM.render(React.createElement(</span><br><span class="line">  DvaContainer,</span><br><span class="line">  null,</span><br><span class="line">  React.createElement(require(&apos;./router&apos;).default)  //umijså¤„ç†çš„è·¯ç”±éƒ¨åˆ†é€»è¾‘éƒ¨åˆ†</span><br><span class="line">), document.getElementById(&apos;root&apos;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>å› æ­¤åœ¨ä»¥ä¸Šè¿‡ç¨‹umijsåšäº†ä»¥ä¸‹äº‹æƒ…ï¼š</p><p>1ã€å°è£…è·¯ç”±ï¼ŒæŒ‰çº¦å®šä¼šå°†pagesä¸‹çš„æ–‡ä»¶ç¼–è¯‘ä¸ºè·¯ç”±æ–‡ä»¶ï¼›</p><p>2ã€å°†ä¸Šé¢çš„è·¯ç”±æ–‡ä»¶ä¸ dvaå°è£…å¥½çš„reduxçš„reducerçŠ¶æ€æ–‡ä»¶æœ‰æœºç»„åˆï¼›</p><p>3ã€æœ‰æœºç»“åˆè·¯ç”±å’Œreduxåï¼ŒReactDOM.renderç”Ÿæˆå¯åŠ¨å…¥å£jsï¼›</p><p>ç”±ä¸Šå¯çŸ¥ï¼Œumijsè‡³å§‹è‡³ç»ˆæ²¡æœ‰å¤„ç†è¿‡reduxéƒ¨åˆ†ï¼Œéƒ½æ˜¯dvaå¤„ç†å¥½åï¼Œumijsæ‹¿è¿‡æ¥ç»„åˆä¸‹è€Œå·²ã€‚</p><p>æ•´ä¸ªé¡¹ç›®è¿‡ç¨‹ï¼Œdvaåªåšäº†ä¸€ä»¶äº‹æƒ…ï¼š</p><p>å°è£…reducerï¼Œå¤„ç†reduxï¼ŒdvaæŒ‰çº¦å®šä¼šå°†modelç›®å½•ä¸‹çš„æ–‡ä»¶å°è£…æˆreducerï¼›</p><p>å¦å¤–åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œumijsé¡ºæ‰‹è¿˜åšäº† webpacké…ç½®ï¼Œæ¯”å¦‚module.hot çƒ­æ›´æ–°ã€‚</p><h3 id="user-dashboard-ä¸-with-dva"><a href="#user-dashboard-ä¸-with-dva" class="headerlink" title="user-dashboard ä¸ with-dva"></a>user-dashboard ä¸ with-dva</h3><p>åˆ†æè¿™ä¸¤ä¸ªé¡¹ç›®ï¼Œæœ‰åˆ©äºç†è§£dvaä¸umiä¸¤ä¸ªäººå¹²çš„äº‹æƒ…ï¼Œè¿™ä¸¤ä¸ªé¡¹ç›®å°†ä»–ä»¬äºŒäººçš„é…ç½®æœ‰æœºä¸²èµ·æ¥ï¼Œ<br>åœ¨åˆ·ä¸€édvaä¸umiæ–‡æ¡£çš„åŸºç¡€ä¸Šï¼Œçœ‹è¿™ä¸¤ä¸ªé¡¹ç›®ï¼Œçœ‹å®Œé¡¹ç›®åï¼Œå†å»çœ‹dvaä¸umiçš„æ–‡æ¡£ï¼Œå‘ç°æ›´èƒ½çœ‹æ‡‚åœ¨æ–‡æ¡£ä¸­æ‰€è¡¨è¾¾çš„æ„æ€ã€‚<br>ä»¥ä¸Šè¿‡ç¨‹å…¥æ‰‹å’Œç ”ç©¶å…¶ä»–æ¡†æ¶çš„å¸¸ç”¨æ‰‹æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç½‘ä¸Šå¤§é‡åˆ·ä¸€äº›æœ‰å…³æ¡†æ¶çš„ä½œç”¨æ¯”è¾ƒå’Œé¢˜å¤–è¯ï¼ŒåŠ æ·±æ¡†æ¶çš„æ•´ä½“å½±å“ï¼›</span><br><span class="line">åˆ·ä¸€éæ–‡æ¡£(å¿«é€Ÿ)ï¼›</span><br><span class="line">å¯åŠ¨ä¸‹å®˜æ–¹æ¨èçš„ä¾‹å­ï¼›</span><br><span class="line">å†æ¬¡åˆ·æ–‡æ¡£ï¼›</span><br></pre></td></tr></table></figure></p><h2 id="with-dvaé¡¹ç›®ç»†èŠ‚"><a href="#with-dvaé¡¹ç›®ç»†èŠ‚" class="headerlink" title="with-dvaé¡¹ç›®ç»†èŠ‚"></a>with-dvaé¡¹ç›®ç»†èŠ‚</h2><h3 id="layout-js-ä¸-åµŒå¥—è·¯ç”±"><a href="#layout-js-ä¸-åµŒå¥—è·¯ç”±" class="headerlink" title="_layout.js ä¸ åµŒå¥—è·¯ç”±"></a>_layout.js ä¸ åµŒå¥—è·¯ç”±</h3><p><a href="https://umijs.org/zh/guide/router.html#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener">umi é‡Œçº¦å®šç›®å½•ä¸‹æœ‰ _layout.js æ—¶ä¼šç”ŸæˆåµŒå¥—è·¯ç”±ï¼Œä»¥ _layout.js ä¸ºè¯¥ç›®å½•çš„ layout ã€‚</a></p><p>æœ¬ä¾‹çš„src\pages\list_layout.js æ˜¯åµŒå¥—è·¯ç”±ã€‚</p><h3 id="å…¨å±€-layout"><a href="#å…¨å±€-layout" class="headerlink" title="å…¨å±€ layout"></a>å…¨å±€ layout</h3><p>ä¸ä¸Šç›¸åº”çš„æ˜¯ï¼Œå…¨å±€è·¯ç”±ï¼Œ<a href="https://umijs.org/zh/guide/router.html#%E5%85%A8%E5%B1%80-layout" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a>ã€‚<br>æœ¬ä¾‹çš„src\layouts\index.js æ˜¯ å…¨å±€è·¯ç”±ã€‚</p><h3 id="model-js-ä¸-models-ç›®å½•"><a href="#model-js-ä¸-models-ç›®å½•" class="headerlink" title="model.js ä¸ models/ ç›®å½•"></a>model.js ä¸ models/ ç›®å½•</h3><p><a href="https://dvajs.com/guide/getting-started.html#%E5%AE%9A%E4%B9%89-model" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘â€“å¿«é€Ÿä¸Šæ‰‹-å®šä¹‰model</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æœ¬ä¾‹çš„ src\pages\list\search\model.js</span><br><span class="line">æœ¬ä¾‹çš„ src\pages\list\models\</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½ä¼šè¢«dvaç”¨æ¥è§£ææˆreducerï¼Œç»„è£…store.getState().[nameSpace],ä¹Ÿå°±æ˜¯ç»„è£…å…¨å±€stateçš„keyå€¼ï¼›<br>ä»»ä½•ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡store.getState()è·å–</p><p>è¿™é‡Œæƒ³è¯´çš„æ˜¯ï¼Œé¡¹ç›®ä¸­ï¼Œåœ¨ä¸åŒä½ç½®å®šä¹‰çš„modelï¼Œçœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«æˆ–ç‰¹æ®Šï¼Œä»»æ„ä¸€ä¸ªåœ°æ–¹å®šä¹‰äº†modelåï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥å‡­modelçš„nameSpaceè·å–è¯¥çŠ¶æ€ã€‚</p><h3 id="src-pages-indexè·¯ç”±è¯´æ˜"><a href="#src-pages-indexè·¯ç”±è¯´æ˜" class="headerlink" title="src\pages\indexè·¯ç”±è¯´æ˜"></a>src\pages\indexè·¯ç”±è¯´æ˜</h3><p>åœ¨ç›®å½•çš„ src\pages\indexä¸‹æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+ pages/</span><br><span class="line">  + index/</span><br><span class="line">    - components/</span><br><span class="line">      - Count.js</span><br><span class="line">    - model.js</span><br><span class="line">    - index.js</span><br></pre></td></tr></table></figure></p><p>æŒ‰ç…§umijsçº¦å®šï¼Œè¾“å…¥ä»¥ä¸‹è·¯ç”±åˆ°æµè§ˆå™¨urlä¸Šï¼Œåº”è¯¥æ˜¯å¯ä»¥æ˜¾ç¤ºCounté¡µé¢çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8000/#/index/components/Count</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯å´ä¸è¡Œï¼ŒåŸå› æ˜¯src\pages\indexæ˜¯ä¸»ç›®å½•è·¯ç”±ï¼Œsrc\pages\index\ç›®å½•ä¸‹å®šä¹‰çš„æ–‡ä»¶éƒ½å°†ä¸è¢«è§£æä¸ºè·¯ç”±ï¼Œæ­¤ç›®å½•ä¸‹çš„index.jsä¸ºé»˜è®¤ä¸»åŸŸåä¸‹çš„é¡µé¢ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:8000/#/</span><br></pre></td></tr></table></figure></p><h3 id="æœ¬ä¾‹å…·æœ‰hot-loaderåŠŸèƒ½"><a href="#æœ¬ä¾‹å…·æœ‰hot-loaderåŠŸèƒ½" class="headerlink" title="æœ¬ä¾‹å…·æœ‰hot-loaderåŠŸèƒ½"></a>æœ¬ä¾‹å…·æœ‰hot-loaderåŠŸèƒ½</h3><p>æœ¬ä¾‹å…·æœ‰çƒ­æ›´æ–°åŠŸèƒ½ï¼Œæœ‰å…´è¶£å¯ä»¥ç ”ç©¶åº•å±‚é…ç½®å®ç°ã€‚</p><h3 id="effects"><a href="#effects" class="headerlink" title="effects"></a>effects</h3><p>Effect è¢«ç§°ä¸ºå‰¯ä½œç”¨ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæœ€å¸¸è§çš„å°±æ˜¯å¼‚æ­¥æ“ä½œã€‚<br>é¡¹ç›®çš„å¼‚æ­¥è¯·æ±‚ï¼Œä»¥åŠå¼‚æ­¥è¯·æ±‚åæ ¹æ®æ¥å£æ•°æ®ï¼Œå‘èµ·actionï¼Œéƒ½æ˜¯å†™åœ¨effectsä¸­ã€‚<br>effectså®šä¹‰äº†ä¸€äº›å…³é”®å­—(put\call\select..)ç”¨æ¥å¤„ç†æ¯”å¦‚å‘é€actionï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yield put(&#123; type: &apos;reload&apos; &#125;);</span><br></pre></td></tr></table></figure></p><p><a href="https://dvajs.com/guide/concepts.html#effect" target="_blank" rel="noopener">å‚è€ƒdvaâ€“æŒ‡å—-dvaæ¦‚å¿µ-models-Effect</a><br><a href="https://dvajs.com/knowledgemap/#effects" target="_blank" rel="noopener">å‚è€ƒdvaâ€“çŸ¥è¯†åœ°å›¾-Effect-effects</a></p><h3 id="effectsä¸reducers"><a href="#effectsä¸reducers" class="headerlink" title="effectsä¸reducers"></a>effectsä¸reducers</h3><p>effectsè·Ÿreducerså®šä¹‰ç›¸ä¼¼ï¼ŒäºŒè€…éƒ½æ˜¯ç”¨æ¥å®šä¹‰actionçš„reduceræ“ä½œï¼Œä¸åŒçš„æ˜¯ï¼Œeffectsç”¨æ¥å®šä¹‰å¼‚æ­¥actionï¼Œå½“actionè¦å‘èµ·postè¯·æ±‚æ—¶ï¼Œä¸€èˆ¬ç”¨effectsï¼›<br>ç›¸å¯¹çš„ï¼Œreducerç”¨æ¥å®šä¹‰åŒæ­¥ï¼š<a href="https://github.com/YeWills/dva-example/tree/user-dashboard" target="_blank" rel="noopener">å‚è€ƒç¤ºä¾‹user-dashboardâ€”src\pages\users\models\users.js</a></p><h2 id="umi"><a href="#umi" class="headerlink" title="umi"></a>umi</h2><h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><h4 id="æƒé™è·¯ç”±-ä¸-Routes"><a href="#æƒé™è·¯ç”±-ä¸-Routes" class="headerlink" title="æƒé™è·¯ç”± ä¸ Routes"></a>æƒé™è·¯ç”± ä¸ Routes</h4><p>umi çš„æƒé™è·¯ç”±æ˜¯é€šè¿‡é…ç½®è·¯ç”±çš„ Routes å±æ€§æ¥å®ç°ã€‚<br><a href="https://github.com/YeWills/umi-example/tree/routes-via-config" target="_blank" rel="noopener">å‚è€ƒdemo</a><br>ä»¥ä¸‹æ˜¯æƒé™è·¯ç”±çš„å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; path: &apos;/list&apos;, component: &apos;./pages/list.js&apos;, Routes: [&apos;./routes/PrivateRoute.js&apos;] &#125;,</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//PrivateRoute.js</span><br><span class="line">export default (props) =&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;PrivateRoute (routes/PrivateRoute.js)&lt;/div&gt;</span><br><span class="line">      &#123; props.children &#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äºRouteså®šä¹‰çš„æƒé™ç»„ä»¶PrivateRouteè€Œè¨€ï¼ŒPrivateRouteå¯ä»¥é€šè¿‡props.childrenèƒ½è®¿é—®ä¸Šé¢componentå®šä¹‰çš„ç»„ä»¶ï¼Œç„¶åè·³è½¬åˆ°/listè·¯ç”±urlæ—¶ï¼Œå®é™…æ˜¾ç¤ºçš„æ˜¯Routesçš„ç»„ä»¶ã€‚Routesç»„ä»¶æ‹¥æœ‰æœ€é«˜æƒé™ï¼Œé€šè¿‡props.childå†³å®šæ˜¯å¦æ˜¾ç¤ºcomponentå®šä¹‰çš„ç»„ä»¶ã€‚</p><p>æƒé™è·¯ç”±æœ‰äº›ç±»ä¼¼å…¨å±€è·¯ç”±ã€‚<br>æ›´å¤šè¯´æ˜ï¼Œ<a href="https://umijs.org/zh/guide/router.html#%E6%9D%83%E9%99%90%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener">å‚è€ƒ umiâ€“æŒ‡å—-è·¯ç”±-æƒé™è·¯ç”±</a></p><h3 id="umi-command-not-found"><a href="#umi-command-not-found" class="headerlink" title="umi:command not found"></a>umi:command not found</h3><h4 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn global install umi</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥çœ‹yarnç›®å½•</span><br><span class="line">yarn global bin</span><br><span class="line">/Users/js/.yarn/bin</span><br></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi ~/.bash_profile</span><br><span class="line">//ç„¶åè¾“å…¥ç”¨æˆ·å¯†ç </span><br><span class="line">//æ·»åŠ è¿™ä¸€å¥è¯åˆ°.bash_profileæ–‡ä»¶</span><br><span class="line">export PATH=&quot;$PATH:`yarn global bin`&quot;</span><br></pre></td></tr></table></figure></p><p>é‡å¯å‘½ä»¤çª—å£<br>å†æ¬¡è¾“å…¥umiå°±å¯ä»¥äº†ã€‚</p><h4 id="å…³äºmacç¯å¢ƒå˜é‡é…ç½®æœ‰å…³"><a href="#å…³äºmacç¯å¢ƒå˜é‡é…ç½®æœ‰å…³" class="headerlink" title="å…³äºmacç¯å¢ƒå˜é‡é…ç½®æœ‰å…³"></a>å…³äºmacç¯å¢ƒå˜é‡é…ç½®æœ‰å…³</h4><h4 id="PATHçš„å­—ç¬¦ä¸²å†™æ³•"><a href="#PATHçš„å­—ç¬¦ä¸²å†™æ³•" class="headerlink" title="$PATHçš„å­—ç¬¦ä¸²å†™æ³•"></a>$PATHçš„å­—ç¬¦ä¸²å†™æ³•</h4><p>æ¥ç€ä¸Šé¢macå¯¹umiçš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œä¸Šé¢è®¾ç½®ç¯å¢ƒå˜é‡çš„æ­¥éª¤è®¾ç½®æˆå¦‚ä¸‹ä¹Ÿæ˜¯çš„ä¸€æ ·çš„æ•ˆæœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/Users/js/.yarn/bin</span><br></pre></td></tr></table></figure></p><h4 id="PATHçš„å˜é‡å†™æ³•"><a href="#PATHçš„å˜é‡å†™æ³•" class="headerlink" title="$PATHçš„å˜é‡å†™æ³•"></a>$PATHçš„å˜é‡å†™æ³•</h4><p>æˆ‘ä»¬è§‚å¯Ÿåˆ°ï¼Œexport PATH=â€$PATH:<code>yarn global bin</code>â€œ æ˜¯ä¸€ç§å˜é‡çš„å†™æ³•ï¼Œå°†yarn global bin è¿™ä¸ªæ•´ä½“å½“æˆä¸€ä¸ªå˜é‡ã€‚<br>ç±»ä¼¼äº yarn global bin ç­‰ä»·äº /Users/js/.yarn/binï¼›<br>å› ä¸ºbashä¸­æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥çœ‹yarnç›®å½•</span><br><span class="line">yarn global bin</span><br><span class="line">/Users/js/.yarn/bin</span><br></pre></td></tr></table></figure></p><h4 id="å¤šä¸ªç¯å¢ƒå˜é‡ä»¥ï¼šæ‰“å°echoè¾“å‡º"><a href="#å¤šä¸ªç¯å¢ƒå˜é‡ä»¥ï¼šæ‰“å°echoè¾“å‡º" class="headerlink" title="å¤šä¸ªç¯å¢ƒå˜é‡ä»¥ï¼šæ‰“å°echoè¾“å‡º"></a>å¤šä¸ªç¯å¢ƒå˜é‡ä»¥ï¼šæ‰“å°echoè¾“å‡º</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi ~/.bash_profile</span><br><span class="line">//è¿›å…¥vimæ¨¡å¼åï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</span><br><span class="line">export PATH=$PATH:/usr/local/mongodb/bin</span><br><span class="line">export PATH=$PATH:/Users/js/.yarn/bin</span><br><span class="line">$ echo $PATH</span><br><span class="line">/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mongodb/bin:/Users/js/.yarn/bin</span><br><span class="line">æˆ‘ä»¬çœ‹åˆ°äº† mongodbçš„ç¯å¢ƒå˜é‡å¹¶æ²¡æœ‰è¢«åé¢çš„yarnè·¯å¾„è¦†ç›–ï¼Œä»–ä»¬å…¨éƒ¨è¢«å¹³è¡Œä¿å­˜ï¼Œé€šè¿‡å†’å·:éš”å¼€è¡¨ç¤ºã€‚</span><br></pre></td></tr></table></figure><h4 id="bash-profileä¸­çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–"><a href="#bash-profileä¸­çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–" class="headerlink" title=".bash_profileä¸­çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–"></a>.bash_profileä¸­çš„ç¯å¢ƒå˜é‡ä¸ä¼šè¦†ç›–</h4><p>å¦‚ä¸Šåˆ†æ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export PATH=$PATH:/usr/local/mongodb/bin</span><br><span class="line">export PATH=$PATH:/Users/js/.yarn/bin</span><br></pre></td></tr></table></figure></p><p>è™½ç„¶ä½¿ç”¨PATH=å…ˆåå®šä¹‰äº†mongodbå’Œyarnï¼Œä½†æ˜¯yarnå¹¶æ²¡æœ‰è¦†ç›–mongodbï¼Œé€šè¿‡echoæ‰“å°å¯ä»¥æŸ¥è¯ã€‚å…·ä½“å‚è€ƒä¸Šé¢åˆ†æã€‚</p><h4 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h4><p>windowsè§£å†³æ–¹å¼ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæ˜¯å°† yarn global bin æ‰“å°çš„åœ°å€æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚</p><h3 id="umiçš„ä½¿ç”¨"><a href="#umiçš„ä½¿ç”¨" class="headerlink" title="umiçš„ä½¿ç”¨"></a>umiçš„ä½¿ç”¨</h3><p>å®˜ç½‘ä¸­é€šè¿‡ <code>å¿«é€Ÿä¸Šæ‰‹</code> å’Œ <code>é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</code> ä¸¤éƒ¨åˆ†è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨umiï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥åˆ›å»ºé¡¹ç›®å·¥ç¨‹ï¼Œå¾ˆæœ‰å€Ÿé‰´å­¦ä¹ ä¹‹ç”¨ï¼Œäº²è¯•å¯è¡Œï¼Œåœ¨æ­¤å•ç‹¬ä»å®˜ç½‘ä»æ‹å‡ºæ¥è¯´æ˜ï¼Œä»¥ç¤ºé‡è§†ã€‚</p><h4 id="å¿«é€Ÿä¸Šæ‰‹"><a href="#å¿«é€Ÿä¸Šæ‰‹" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹"></a>å¿«é€Ÿä¸Šæ‰‹</h4><p><a href="https://umijs.org/zh/guide/getting-started.html" target="_blank" rel="noopener">å‚è€ƒumiâ€“æŒ‡å—-å¿«é€Ÿä¸Šæ‰‹</a></p><h4 id="é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®"><a href="#é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®" class="headerlink" title="é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®"></a>é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</h4><p><a href="https://umijs.org/zh/guide/create-umi-app.html" target="_blank" rel="noopener">å‚è€ƒumiâ€“æŒ‡å—-é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®</a></p><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><h3 id="with-dva"><a href="#with-dva" class="headerlink" title="with-dva"></a>with-dva</h3><p><a href="https://github.com/YeWills/umi-example/tree/with-dva" target="_blank" rel="noopener">demoåœ°å€</a><br>ä¸€ä¸ªå¾ˆå¥½çš„ umi é…åˆ dvaçš„ä¾‹å­ï¼Œè®²äº†å„ç§è·¯ç”±é…ç½®,å·²ç»dvaçš„è¿ç”¨ï¼Œæ˜¯ umiçº¦å®šå¼è·¯ç”±èŒƒä¾‹ã€‚<br>å‚è€ƒã€Šwith-dvaé¡¹ç›®ç»†èŠ‚ã€‹<br> <figure class="image-box">                <img src="/image/dva_umi/with-dva.png" alt title class>                <p></p>            </figure></p><h3 id="routes"><a href="#routes" class="headerlink" title="routes"></a>routes</h3><p><a href="https://github.com/YeWills/umi-example/tree/routes" target="_blank" rel="noopener">demoåœ°å€</a><br>æœ¬ä¾‹å±•ç¤ºåœ¨umijsä¸­å¦‚ä½•æŒ‰çº¦å®šç”Ÿæˆ å„ç§ç±»å‹çš„è·¯ç”±ï¼Œå¦‚ åŸºç¡€ã€åŠ¨æ€ã€å¯é€‰åŠ¨æ€ã€åµŒå¥—ã€å…¨å±€ã€404è·¯ç”±ã€‚<br>ç›¸å…³è®²è§£ï¼Œ<a href="https://umijs.org/zh/guide/router.html#%E5%9F%BA%E7%A1%80%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener">å‚è€ƒumiâ€“æŒ‡å—-è·¯ç”±-çº¦å®šå¼è·¯ç”±</a><br>æœ¬é¡¹ç›®ä¹Ÿå¯ç”¨äºreacté¡¹ç›®å¸¸ç”¨åˆ°çš„ä¸€äº›è·¯ç”±çŸ¥è¯†å­¦ä¹ <br> <figure class="image-box">                <img src="/image/dva_umi/routes.png" alt title class>                <p></p>            </figure></p><h3 id="routes-via-config"><a href="#routes-via-config" class="headerlink" title="routes-via-config"></a>routes-via-config</h3><p>æ­¤demoç›¸å¯¹ç®€å•ï¼Œåœ¨umijsä¸‹ï¼Œå¦‚ä½•è‡ªè¡Œé…ç½®è·¯ç”±ã€‚æ˜¯ umié…ç½®å¼è·¯ç”±èŒƒä¾‹ã€‚<br>é€šè¿‡æœ¬ä¾‹çŸ¥é“ï¼Œä¸»è¦æ˜¯é€šè¿‡.umirc.js æ¥è¿›è¡Œé…ç½®è·¯ç”±ã€‚ æœ¬ä¾‹è¿ç”¨äº†æƒé™è·¯ç”±ã€‚<br><a href="https://umijs.org/zh/guide/router.html#%E9%85%8D%E7%BD%AE%E5%BC%8F%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener">å‚è€ƒumiâ€“æŒ‡å—-è·¯ç”±-é…ç½®å¼è·¯ç”±</a><br> <figure class="image-box">                <img src="/image/dva_umi/routes-via-config.png" alt title class>                <p></p>            </figure></p><h3 id="umi-dva-user-dashboard"><a href="#umi-dva-user-dashboard" class="headerlink" title="umi-dva-user-dashboard"></a>umi-dva-user-dashboard</h3><p>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå¯ä½œä¸ºumiä¸dvaç»“åˆçš„ç¤ºä¾‹ã€‚æ˜¯äº†è§£umiä¸dvaçš„å…¥é—¨demoï¼Œå…¶è§£è¯´å‚è§ã€Šuser-dashboardé¡¹ç›®ç»†èŠ‚ã€‹ï¼Œ<br>æ˜¯ä¸‹é¢çš„user-dashboardç¤ºä¾‹çš„ä¼˜åŒ–ç‰ˆã€‚<br><a href="https://github.com/YeWills/umi-example/tree/umi-dva-user-dashboard" target="_blank" rel="noopener">demoåœ°å€</a><br> <figure class="image-box">                <img src="/image/dva_umi/umi-dva-user-dashboard.png" alt title class>                <p></p>            </figure></p><h3 id="user-dashboard"><a href="#user-dashboard" class="headerlink" title="user-dashboard"></a>user-dashboard</h3><p>å‚è€ƒã€Šuser-dashboardé¡¹ç›®ç»†èŠ‚ã€‹<br>è¿™ä¸ªç¤ºä¾‹æ²¡æœ‰ ä¸Šé¢çš„ umi-dva-user-dashboardç²¾ç»†ï¼Œä½†ä¹Ÿå¯ä¸€çœ‹ã€‚<br> <figure class="image-box">                <img src="/image/dva_umi/user-dashboard-view.png" alt title class>                <p></p>            </figure></p><h3 id="with-nav-and-sidebar"><a href="#with-nav-and-sidebar" class="headerlink" title="with-nav-and-sidebar"></a>with-nav-and-sidebar</h3><p><a href="https://github.com/YeWills/umi-example/tree/with-nav-and-sidebar" target="_blank" rel="noopener">demoåœ°å€</a><br>è¦åšä¾§è¾¹æ (sidebar)å’Œå¯¼èˆªæ æ—¶ï¼Œå¯å‚è€ƒæœ¬ç¤ºä¾‹ï¼Œéå¸¸ç®€æ´çš„ï¼Œåªæœ‰ä¾§è¾¹æ å’Œå¯¼èˆªæ çš„ç¤ºä¾‹<br><img src="https://gw.alipayobjects.com/zos/rmsportal/DReQIejdcJPeaXWEDKDe.png"></p><h3 id="ant-design-pro"><a href="#ant-design-pro" class="headerlink" title="ant-design-pro"></a>ant-design-pro</h3><p>æ·±å…¥äº†è§£umiä¸dvaçš„ç»¼åˆç¤ºä¾‹</p><h2 id="å­¦ä¹ èµ„æ–™ä¸å°ç»“"><a href="#å­¦ä¹ èµ„æ–™ä¸å°ç»“" class="headerlink" title="å­¦ä¹ èµ„æ–™ä¸å°ç»“"></a>å­¦ä¹ èµ„æ–™ä¸å°ç»“</h2><h3 id="githubä»“åº“"><a href="#githubä»“åº“" class="headerlink" title="githubä»“åº“"></a>githubä»“åº“</h3><p>githubä¸­ä»¥ä¸‹ä»“åº“ä¸ºå­¦ä¹ æœŸé—´çš„å…¨éƒ¨demoï¼š<br><a href="https://github.com/YeWills/umi-example" target="_blank" rel="noopener">umi-example</a><br><a href="https://github.com/YeWills/dva-example" target="_blank" rel="noopener">dva-example</a><br><a href="https://github.com/YeWills/ant-design-pro" target="_blank" rel="noopener">ant-design-pro</a><br>ä»¥ä¸Šdemoéƒ½åŸºäºå®˜ç½‘å¼€æºdemoï¼Œæ„Ÿè°¢ã€‚</p><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><h4 id="dvaä¸umiå­¦ä¹ "><a href="#dvaä¸umiå­¦ä¹ " class="headerlink" title="dvaä¸umiå­¦ä¹ "></a>dvaä¸umiå­¦ä¹ </h4><p>å­¦ä¹ dvaä¸umiï¼Œå»ºè®®å…ˆä»dvaäº†è§£å¼€å§‹ï¼Œç„¶åæ˜¯umiï¼Œç„¶åå†æ˜¯ant-design-proï¼›<br>dvaä¸umiçš„å­¦ä¹ ï¼Œå¿«é€Ÿè¿‡å®˜ç½‘æ–‡æ¡£ï¼Œç„¶åè¿è¡Œæ–‡æ¡£ä¸­ç»™å‡ºçš„demoï¼Œå¯¹ç…§demoï¼Œå†é’ˆå¯¹æ€§çœ‹æ–‡æ¡£ï¼Œå¤šçœ‹æ–‡æ¡£ã€‚<br>ä»¥ä¸Šç†Ÿæ‚‰åï¼Œå†çœ‹ant-design-proã€‚</p><h4 id="dvaä¸umiè®¤è¯†"><a href="#dvaä¸umiè®¤è¯†" class="headerlink" title="dvaä¸umiè®¤è¯†"></a>dvaä¸umiè®¤è¯†</h4><p>dvaä¸umiåˆ›å»ºé¡¹ç›®çš„æ–¹å¼æ–°é¢–ï¼Œé€šè¿‡åŒ…ç®¡ç†æ–¹å¼åˆ›å»ºè„šæ‰‹æ¶ï¼Œæ˜¯å¾ˆå¤šå…¬å¸å¤§å‚çš„å¸¸è§„åšæ³•ï¼Œumiæ›´åƒä¸€ä¸ªå¤§å‚å†…éƒ¨çš„æ ‡å‡†å·¥ç¨‹è„šæ‰‹æ¶ã€‚<br>å¦‚æœä½ å¤„äºä¸€ä¸ªå…¬å¸çš„æ¶æ„å¸ˆä½ç½®ï¼Œæƒ³è¦å‡ºä¸€ä¸ªå…¨å…¬å¸ç»Ÿä¸€çš„å‰ç«¯å¼€å‘è„šæ‰‹æ¶ï¼Œä½ æ‰€åœ¨å…¬å¸å®‰å…¨çº§åˆ«é«˜ï¼Œå¯¹é¡¹ç›®ä¾èµ–åŒ…æœ‰å®‰å…¨è¦æ±‚ï¼Œå¯¹é¡¹ç›®æœ‰ç®¡æ§éœ€æ±‚ä»¥ä¾¿è¾¾åˆ°å®‰å…¨çº§åˆ«ï¼Œumiæ— ç–‘æ˜¯ä½ çš„æ ‡æ†ã€‚<br>å¦‚æœä½ ä»¬å…¬å¸ä¸æ˜¯ä¸€ä¸ªäº”å…­ç™¾äººçš„å…¬å¸ï¼Œè€Œä¸”æ²¡æœ‰å¯¹å…¬å¸å†…æ‰€æœ‰å‰ç«¯é¡¹ç›®æ‰€ç”¨ä¾èµ–åŒ…çš„ç‰ˆæœ¬æœ‰ç®¡åˆ¶éœ€æ±‚ï¼Œå¹¶ä¸”æ²¡æœ‰ç»Ÿä¸€å‰ç«¯è„šæ‰‹æ¶çš„éœ€æ±‚ï¼Œå»ºè®®è¿˜æ˜¯è‡ªè¡Œé…ç½®ä¸€å¥—è„šæ‰‹æ¶ï¼Œæœ‰åˆ©äº ç‰ˆæœ¬å‡çº§ï¼Œé—®é¢˜è¿½è¸ªï¼Œé£é™©å¯æ§æ€§å¥½ã€‚<br>æ€»è€Œè¨€ä¹‹ï¼Œumiè¿™ç§reactæ ‡å‡†åŒ–å·¥ç¨‹é¡¹ç›®çš„åšæ³•éå¸¸å¦™ï¼Œæ— è®ºä½ æƒ³ç›´æ¥ç”¨å®ƒæˆ–è€…ä»ä¸­å€Ÿé‰´ç†å¿µæˆ–æ–¹æ¡ˆéƒ½éå¸¸å€¼å¾—ä½ ä¸€çœ‹ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£ï¼š"><a href="#å‚è€ƒæ–‡æ¡£ï¼š" class="headerlink" title="å‚è€ƒæ–‡æ¡£ï¼š"></a>å‚è€ƒæ–‡æ¡£ï¼š</h2><h3 id="dva-1"><a href="#dva-1" class="headerlink" title="dva"></a>dva</h3><p><a href="https://dvajs.com/guide/getting-started.html#%E5%AE%9A%E4%B9%89-model" target="_blank" rel="noopener">å‚è€ƒdvaâ€“æŒ‡å—-å¿«é€Ÿä¸Šæ‰‹-å®šä¹‰model</a><br><a href="https://dvajs.com/guide/concepts.html#effect" target="_blank" rel="noopener">å‚è€ƒdvaâ€“æŒ‡å—-dvaæ¦‚å¿µ-models-Effect</a><br><a href="https://dvajs.com/knowledgemap/#effects" target="_blank" rel="noopener">å‚è€ƒdvaâ€“çŸ¥è¯†åœ°å›¾-Effect-effects</a></p><h3 id="umi-1"><a href="#umi-1" class="headerlink" title="umi"></a>umi</h3><p><a href="https://umijs.org/zh/guide/router.html#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener">å‚è€ƒumiâ€“æŒ‡å—-è·¯ç”±-çº¦å®šå¼è·¯ç”±</a></p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> dva </tag>
            
            <tag> umi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åç«¯ç¬”è®°</title>
      <link href="/2020/05/01/end_base/"/>
      <url>/2020/05/01/end_base/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="expressæ˜¯ä¸€ä¸ªnodejsæ¡†æ¶"><a href="#expressæ˜¯ä¸€ä¸ªnodejsæ¡†æ¶" class="headerlink" title="expressæ˜¯ä¸€ä¸ªnodejsæ¡†æ¶"></a>expressæ˜¯ä¸€ä¸ªnodejsæ¡†æ¶</h3><p>å¦‚ä¸‹å›¾ï¼Œexpresså…¶å®å°è£…äº†åŸç”Ÿå†™æ³•çš„httpç­‰ç­‰nodejsçš„æ¨¡å—ï¼Œ<br>åªæ˜¯åŸç”Ÿçš„httpæ¨¡å—ç”¨æ¥å†™reqã€resæœ‰å¾ˆå¤šè¦å¤„ç†çš„åŠŸèƒ½ï¼Œ<br>expresså°è£…äº†å¾ˆå¤šåŠŸèƒ½åˆ°reqã€resä¸­ï¼Œç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚<br>å› æ­¤expressä¸nodejsçš„å…³ç³» å°±å¥½æ¯” jquery ä¸ js çš„å…³ç³»ã€‚<br>å› æ­¤å¯ä»¥è®¤ä¸ºexpresså°±æ˜¯ä¸€ä¸ªnodejsæ¡†æ¶ã€‚<br><figure class="image-box">                <img src="/image/end_base/express.jpg" alt title class>                <p></p>            </figure></p><h3 id="expressæ˜¯å¯¹httpç­‰çš„å°è£…"><a href="#expressæ˜¯å¯¹httpç­‰çš„å°è£…" class="headerlink" title="expressæ˜¯å¯¹httpç­‰çš„å°è£…"></a>expressæ˜¯å¯¹httpç­‰çš„å°è£…</h3><p>å‚è€ƒä¸Šé¢ã€Šexpressæ˜¯ä¸€ä¸ªnodejsæ¡†æ¶ã€‹</p><h3 id="ä¸€ä¸ªurlè¢«webæ¸²æŸ“ç»å†äº†ä»€ä¹ˆ"><a href="#ä¸€ä¸ªurlè¢«webæ¸²æŸ“ç»å†äº†ä»€ä¹ˆ" class="headerlink" title="ä¸€ä¸ªurlè¢«webæ¸²æŸ“ç»å†äº†ä»€ä¹ˆ"></a>ä¸€ä¸ªurlè¢«webæ¸²æŸ“ç»å†äº†ä»€ä¹ˆ</h3><p>url é€šè¿‡dnsåŸŸåè§£æï¼Œ<br>æ‰¾åˆ°ç›®æ ‡æœåŠ¡å™¨ï¼ˆè¿›å…¥ç›®æ ‡æœåŠ¡å™¨ï¼‰ï¼›<br>æœåŠ¡å™¨é€šè¿‡æœåŠ¡å™¨è·¯ç”±å¯¹è¿™ä¸ªurlè¯·æ±‚åšå‡ºç›¸åº”ï¼›</p><p>æœåŠ¡å™¨è·¯ç”±æ˜¯å¤„ç†è¯·æ±‚æ¥å£å¦‚ä½•å“åº”çš„è§„åˆ™ã€‚</p><h3 id="uri"><a href="#uri" class="headerlink" title="uri"></a>uri</h3><p>é€šä¿—çš„è®²ï¼Œä¸€ä¸ªå®Œæ•´çš„urlä¸­ï¼Œé™¤äº†åŸŸåå’Œç«¯å£çš„éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„å°±æ˜¯uriï¼Œå¯ä»¥ç”¨uriå”¯ä¸€æ ‡è¯†èµ„æºã€‚å¦‚ä¸‹ï¼š<br><code>https://blog.csdn.net/qq_32595453/article/details/79516787</code>;<br>ä¸Šé¢çš„uriå°±æ˜¯ <code>/qq_32595453/article/details/79516787</code>;</p><h2 id="express"><a href="#express" class="headerlink" title="express"></a>express</h2><h3 id="all-APIçš„ç”¨æ³•"><a href="#all-APIçš„ç”¨æ³•" class="headerlink" title="all APIçš„ç”¨æ³•"></a>all APIçš„ç”¨æ³•</h3><h4 id="åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹"><a href="#åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹" class="headerlink" title="åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹"></a>åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">'/demo'</span>,(req, res)=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure><h4 id="åŒ¹é…æ‰€æœ‰çš„uri"><a href="#åŒ¹é…æ‰€æœ‰çš„uri" class="headerlink" title="åŒ¹é…æ‰€æœ‰çš„uri"></a>åŒ¹é…æ‰€æœ‰çš„uri</h4><p>ä½¿ç”¨*æ¥åŒ¹é…æ‰€æœ‰çš„uriï¼Œå¸¸ç”¨çš„åœºæ™¯æœ‰æ‰“å°è¯·æ±‚æ—¥å¿— ç­‰ç­‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">'*'</span>,(req, res)=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="app-use-ä¸­é—´ä»¶çš„ä½¿ç”¨"><a href="#app-use-ä¸­é—´ä»¶çš„ä½¿ç”¨" class="headerlink" title="app.use ä¸­é—´ä»¶çš„ä½¿ç”¨"></a>app.use ä¸­é—´ä»¶çš„ä½¿ç”¨</h3><h4 id="åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹-1"><a href="#åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹-1" class="headerlink" title="åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹"></a>åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹</h4><p>useä¸€èˆ¬ç”¨äºä¸­é—´ä»¶çš„é›†æˆï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ç”¨æ¥åšè·¯ç”±çš„å®šä¹‰ï¼Œå¯ä»¥è½»æ¾å®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/demo'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test get use'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ä¸‹é¢ç­‰æ•ˆï¼š</span></span><br><span class="line">app.all(<span class="string">'/demo'</span>,(req, res)=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="åŒ¹é…æ‰€æœ‰çš„uri-1"><a href="#åŒ¹é…æ‰€æœ‰çš„uri-1" class="headerlink" title="åŒ¹é…æ‰€æœ‰çš„uri"></a>åŒ¹é…æ‰€æœ‰çš„uri</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test all use'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ä¸‹é¢ç­‰æ•ˆï¼š</span></span><br><span class="line">app.all(<span class="string">'*'</span>,(req, res)=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„ï¼šä¸€èˆ¬ä¸åšè¯·æ±‚çš„å“åº”"><a href="#æ³¨æ„ï¼šä¸€èˆ¬ä¸åšè¯·æ±‚çš„å“åº”" class="headerlink" title="æ³¨æ„ï¼šä¸€èˆ¬ä¸åšè¯·æ±‚çš„å“åº”"></a>æ³¨æ„ï¼šä¸€èˆ¬ä¸åšè¯·æ±‚çš„å“åº”</h4><p>app.useä¸€èˆ¬ä¸åšä¸Šé¢çš„ã€ŠåŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ç±»å‹ã€‹ã€ŠåŒ¹é…æ‰€æœ‰çš„uriã€‹æ¥å£ç¼–å†™ã€‚<br>ä¸€èˆ¬ç”¨äºä¸­é—´ä»¶çš„ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åšè·¯ç”±çš„æ‹†åˆ†ã€‚</p><h4 id="è·¯ç”±æ‹†åˆ†-express-Router"><a href="#è·¯ç”±æ‹†åˆ†-express-Router" class="headerlink" title="è·¯ç”±æ‹†åˆ†(express.Router)"></a>è·¯ç”±æ‹†åˆ†(express.Router)</h4><p>ç”±äºå†…å®¹è¾ƒå¤šï¼Œæ‹†æˆç‹¬ç«‹ä¸€èŠ‚ï¼Œå‚è€ƒã€Šè·¯ç”±æ‹†åˆ†(express.Router)ã€‹</p><h3 id="è·¯ç”±æ‹†åˆ†-express-Router-1"><a href="#è·¯ç”±æ‹†åˆ†-express-Router-1" class="headerlink" title="è·¯ç”±æ‹†åˆ†(express.Router)"></a>è·¯ç”±æ‹†åˆ†(express.Router)</h3><p><a href="https://www.imooc.com/video/20689" target="_blank" rel="noopener">å‚è€ƒæ…•è¯¾è§†é¢‘</a></p><h4 id="åŸºæœ¬ç”¨æ³•-å•ä¸ª"><a href="#åŸºæœ¬ç”¨æ³•-å•ä¸ª" class="headerlink" title="åŸºæœ¬ç”¨æ³•(å•ä¸ª)"></a>åŸºæœ¬ç”¨æ³•(å•ä¸ª)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.router.js</span></span><br><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/list'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test router'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span>  appRouter = <span class="built_in">require</span>(<span class="string">'./app.router'</span>) ; <span class="comment">//app.router.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.use(appRouter)</span><br><span class="line">app.listen(<span class="number">3000</span>, ()=&gt;<span class="built_in">console</span>.log(<span class="string">'please open 3000 port'</span>))</span><br></pre></td></tr></table></figure><h4 id="å¤šä¸ªè·¯ç”±"><a href="#å¤šä¸ªè·¯ç”±" class="headerlink" title="å¤šä¸ªè·¯ç”±"></a>å¤šä¸ªè·¯ç”±</h4><p>åœ¨ä¸Šé¢å•ä¸ªè·¯ç”±çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªè·¯ç”±ï¼Œå†™æ³•ä¸ç¬¬ä¸€ä¸ªè·¯ç”±ä¸€æ‘¸ä¸€æ ·,æ­¤æ—¶ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“å‘<code>http://127.0.0.1:3000/list</code>è¯·æ±‚æ—¶ï¼Œ<br>åªèƒ½è¢«ç¬¬ä¸€ä¸ªappRouteræˆªå–ï¼ŒmoreRouteræ— æ³•è·å¾—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.moreRouter.js</span></span><br><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/list'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test router'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span>  appRouter = <span class="built_in">require</span>(<span class="string">'./app.router'</span>) ; <span class="comment">//app.router.js</span></span><br><span class="line"><span class="keyword">const</span>  moreRouter = <span class="built_in">require</span>(<span class="string">'./app.moreRouter'</span>) ; <span class="comment">//app.moreRouter.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.use(appRouter)</span><br><span class="line">app.use(moreRouter)</span><br><span class="line">app.listen(<span class="number">3000</span>, ()=&gt;<span class="built_in">console</span>.log(<span class="string">'please open 3000 port'</span>))</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œåœ¨app.useä¸Šå®šä¹‰è·¯ç”±ï¼Œå…¶ä»–ä¸å˜ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span>  appRouter = <span class="built_in">require</span>(<span class="string">'./app.router'</span>) ; <span class="comment">//app.router.js</span></span><br><span class="line"><span class="keyword">const</span>  moreRouter = <span class="built_in">require</span>(<span class="string">'./app.moreRouter'</span>) ; <span class="comment">//app.moreRouter.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.use(<span class="string">'/main'</span>,appRouter) <span class="comment">//http://127.0.0.1:3000/main/list</span></span><br><span class="line">app.use(<span class="string">'/more'</span>,moreRouter) <span class="comment">//http://127.0.0.1:3000/more/list</span></span><br><span class="line">app.listen(<span class="number">3000</span>, ()=&gt;<span class="built_in">console</span>.log(<span class="string">'please open 3000 port'</span>))</span><br></pre></td></tr></table></figure></p><h4 id="è·¯ç”±æ–‡ä»¶å†…å†æ‹†åˆ†-router-use"><a href="#è·¯ç”±æ–‡ä»¶å†…å†æ‹†åˆ†-router-use" class="headerlink" title="è·¯ç”±æ–‡ä»¶å†…å†æ‹†åˆ†(router.use)"></a>è·¯ç”±æ–‡ä»¶å†…å†æ‹†åˆ†(router.use)</h4><p>å¦‚ä¸Šé¢çš„<code>app.moreRouter.js</code>å†…ï¼Œå¯ä»¥ä½¿ç”¨<code>router.use</code>å†è¿›è¡ŒåµŒå¥—æ‹†åˆ†ï¼Œä¸è¿‡ä¸€èˆ¬ä¸æ¨èè¿™ç§å¤šå±‚åµŒå¥—çš„åšæ³•ã€‚<br>å°±åƒæ•°æ®è¿½æ±‚æ‰å¹³åŒ–ä¸€æ ·ï¼Œè·¯ç”±è®¾è®¡ä¹Ÿä¸è¦è¿½æ±‚æ·±å±‚åµŒå¥—ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.moreRouter.js</span></span><br><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/list'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test router'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å¯ä»¥å†è¿›è¡Œè·¯ç”±æ‹†åˆ†</span></span><br><span class="line">router.use(......)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></p><h3 id="ä¼šä¸ä¼šåŒæ—¶è¢«å¤šä¸ªè·¯ç”±å“åº”"><a href="#ä¼šä¸ä¼šåŒæ—¶è¢«å¤šä¸ªè·¯ç”±å“åº”" class="headerlink" title="ä¼šä¸ä¼šåŒæ—¶è¢«å¤šä¸ªè·¯ç”±å“åº”"></a>ä¼šä¸ä¼šåŒæ—¶è¢«å¤šä¸ªè·¯ç”±å“åº”</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¦‚ä¸‹ï¼Œå¦‚æœå†™ä¸€ä¸ªurlï¼š<code>http://127.0.0.1:3000/test</code>;<br>ä¼šè¢«ä¸‹é¢ä¸¤ä¸ªè·¯ç”±åŒæ—¶æ•è·å—ï¼Ÿ<br>å®é™…ä¸Šåªä¼šè¢«ç¬¬ä¸€ä¸ª all æ•è·ï¼Œç¬¬äºŒä¸ªè·¯ç”±ä¸ä¼šè¢«æ•è·ï¼Œç©¶å…¶åŸå› æ˜¯åœ¨ç¬¬ä¸€ä¸ªè·¯ç”±ä¸Šä½¿ç”¨äº†res.json.<br>å¦‚æœæ²¡æœ‰resï¼Œä¸”ä½¿ç”¨nextå°±ä¼šè¢«ç¬¬äºŒä¸ªè·¯ç”±æ•è·ã€‚<br>ç”±æ­¤å¯çœ‹å‡ºï¼Œres.jsonå’Œnextéƒ½ç›¸å½“äºreturnï¼Œå¦‚æœä½¿ç”¨res.json é‚£ä¹ˆåé¢ä»£ç å°±ä¸æ‰§è¡Œã€‚nextä»¥æ­¤ç±»æ¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://127.0.0.1:3000/test è¢«åŒ¹é… </span></span><br><span class="line">app.all(<span class="string">'*'</span>, (req,res, next)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test all '</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å› ä¸ºä¸Šé¢å·²ç» res.json å› æ­¤è¿™é‡Œ http://127.0.0.1:3000/test ä¸è¢«åŒ¹é… </span></span><br><span class="line">app.get(<span class="string">'/test'</span>, (req,res, next)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test 11 '</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="é…åˆnextå¯è¢«å¤šä¸ªè·¯ç”±åŒ¹é…"><a href="#é…åˆnextå¯è¢«å¤šä¸ªè·¯ç”±åŒ¹é…" class="headerlink" title="é…åˆnextå¯è¢«å¤šä¸ªè·¯ç”±åŒ¹é…"></a>é…åˆnextå¯è¢«å¤šä¸ªè·¯ç”±åŒ¹é…</h4><p>ä¸‹é¢è·¯ç”±ä¸­ï¼Œç¬¬ä¸€ä¸ªç”¨äºæ‰“å°æ—¥å¿—ï¼Œç¬¬äºŒä¸ªç”¨äºçœŸæ­£æ¥å£çš„å“åº”ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://127.0.0.1:3000/test è¢«åŒ¹é… </span></span><br><span class="line">app.all(<span class="string">'*'</span>, (req,res, next)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æ‰“å°æ—¥å¿—'</span>, req.originalUrl)</span><br><span class="line">    next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å› ä¸ºä¸Šé¢ä½¿ç”¨next è¿™é‡Œ http://127.0.0.1:3000/test è¢«åŒ¹é… </span></span><br><span class="line">app.get(<span class="string">'/test'</span>, (req,res, next)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test 11 '</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="åªä¼šè¢«ä¸€ä¸ªè·¯ç”±å“åº”"><a href="#åªä¼šè¢«ä¸€ä¸ªè·¯ç”±å“åº”" class="headerlink" title="åªä¼šè¢«ä¸€ä¸ªè·¯ç”±å“åº”"></a>åªä¼šè¢«ä¸€ä¸ªè·¯ç”±å“åº”</h4><p>é€šè¿‡ã€Šæ¦‚è¿°ã€‹çš„ä¾‹å­çœ‹å‡ºï¼Œå½“ä»»æ„ä¸€ä¸ªè·¯ç”±ä½¿ç”¨äº†res.jsonæ¥å“åº”åï¼Œæ¥å£å¤„ç†ç¨‹åºå°†ç»ˆæ­¢ï¼Œä¸ä¼šè¢«ç¬¬äºŒä¸ªè·¯ç”±åŒ¹é…åˆ°ã€‚<br>å› æ­¤åªä¼šè¢«ä¸€ä¸ªè·¯ç”±å“åº”ã€‚</p><h4 id="res-jsonã€nextç›¸å½“äºreturn"><a href="#res-jsonã€nextç›¸å½“äºreturn" class="headerlink" title="res.jsonã€nextç›¸å½“äºreturn"></a>res.jsonã€nextç›¸å½“äºreturn</h4><p>å‚è€ƒä¸Šé¢ã€Šæ¦‚è¿°ã€‹</p><h3 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h3><h4 id="è‡ªå®šä¹‰ä¸­é—´ä»¶"><a href="#è‡ªå®šä¹‰ä¸­é—´ä»¶" class="headerlink" title="è‡ªå®šä¹‰ä¸­é—´ä»¶"></a>è‡ªå®šä¹‰ä¸­é—´ä»¶</h4><p>valid_name_middleware å°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> valid_name_middleware = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;name&#125; = req.query;</span><br><span class="line">    <span class="keyword">if</span>(!name ||!name.length)&#123;</span><br><span class="line">        res.json(&#123;<span class="attr">msg</span>:<span class="string">'ç¼ºå°‘nameå‚æ•°'</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.all(<span class="string">'*'</span>, valid_name_middleware)</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/test'</span>, (req,res, next)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test '</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="ä½¿ç”¨åœºæ™¯æˆ–çº§åˆ«"><a href="#ä½¿ç”¨åœºæ™¯æˆ–çº§åˆ«" class="headerlink" title="ä½¿ç”¨åœºæ™¯æˆ–çº§åˆ«"></a>ä½¿ç”¨åœºæ™¯æˆ–çº§åˆ«</h4><ul><li>appçº§åˆ«</li><li>routerçº§åˆ«</li><li>å¼‚å¸¸å¤„ç†ï¼ˆå…¶å®ä¹Ÿå¯èƒ½æ˜¯appæˆ–routerçº§åˆ«ï¼‰</li></ul><h4 id="appçº§åˆ«"><a href="#appçº§åˆ«" class="headerlink" title="appçº§åˆ«"></a>appçº§åˆ«</h4><p>æ³¨å†Œçš„æ—¶å€™ï¼Œä¸€å®šæ˜¯æœ€é¡¶çº§ï¼Œåœ¨expresså®ä¾‹æ—¶å°±è¿›è¡Œã€‚<br>ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œä½¿ç”¨app.useæ¥é›†æˆã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="keyword">const</span> log_mid = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚æ¥äº†'</span>)</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line">app.use(log_mid)</span><br></pre></td></tr></table></figure></p><p>expresså†…ç½®äº†å¾ˆå¤šappçº§åˆ«çš„ä¸­é—´ä»¶ï¼Œæ¯”å¦‚ staticï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"><span class="comment">//æŒ‡å®šindex.htmlæ”¾åœ¨staticç›®å½•ä¸‹ï¼šexpress-router/static/index.html</span></span><br><span class="line">app.use(express.static(<span class="string">'static'</span>,&#123;</span><br><span class="line">    extensions:[<span class="string">'html'</span>, <span class="string">'htm'</span>]</span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure></p><h4 id="routerçº§åˆ«"><a href="#routerçº§åˆ«" class="headerlink" title="routerçº§åˆ«"></a>routerçº§åˆ«</h4><p>ç¬¬ä¸€ç§æƒ…å†µä¸ appçº§åˆ«ç”¨æ³•ä¸€æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"><span class="keyword">const</span> log_mid = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚æ¥äº†'</span>)</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line">router.use(log_mid)</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œè¦è®² <strong>è·¯ç”±å†…éƒ¨ä¸­é—´ä»¶</strong>çš„ä½¿ç”¨ã€‚<br>ä¸‹é¢æ˜¯ç»™ç™»é™†æ¥å£å†™ä¸¤ä¸ªæ ¡éªŒå‚æ•°çš„ä¸­é—´ä»¶ï¼š<br>è®¿é—®<code>http://127.0.0.1:3000/main/login?password=2&amp;id=2</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.js</span></span><br><span class="line">app.use(<span class="string">'/main'</span>,appRouter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//router.js</span></span><br><span class="line"><span class="keyword">const</span> router = express.Router();</span><br><span class="line"><span class="keyword">const</span> valid_pwd = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;password&#125; = req.query;</span><br><span class="line">    <span class="keyword">if</span>(!password ||!password.length)&#123;</span><br><span class="line">        res.json(&#123;<span class="attr">msg</span>:<span class="string">'ç¼ºå°‘å¯†ç å‚æ•°'</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> valid_id = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;id&#125; = req.query;</span><br><span class="line">    <span class="keyword">if</span>(!id ||!id.length)&#123;</span><br><span class="line">        res.json(&#123;<span class="attr">msg</span>:<span class="string">'ç¼ºå°‘user idå‚æ•°'</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸»è¦åˆ©ç”¨è·¯ç”±çº§åˆ«å†…çš„è·¯ç”±å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯å®šä¹‰ä¸€ç³»åˆ—ä¸­é—´ä»¶çš„</span></span><br><span class="line">router.get(<span class="string">'/login'</span>,[valid_pwd, valid_id],(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'ç™»é™†æˆåŠŸ'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="ä¸­é—´ä»¶ä¼ é€’æ•°æ®ç»™è·¯ç”±"><a href="#ä¸­é—´ä»¶ä¼ é€’æ•°æ®ç»™è·¯ç”±" class="headerlink" title="ä¸­é—´ä»¶ä¼ é€’æ•°æ®ç»™è·¯ç”±"></a>ä¸­é—´ä»¶ä¼ é€’æ•°æ®ç»™è·¯ç”±</h4><p>ç»™reqä»»æ„å®šä¹‰ä¸€ä¸ªå±æ€§æ¥ä¿å­˜æ•°æ®ï¼Œåˆ°ä¸‹ä¸€æ­¥è·¯ç”±æ—¶ï¼Œå‡­å€Ÿæ­¤å±æ€§æ‹¿å–æ•°æ®ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> valid_id = <span class="function">(<span class="params">req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;id, password&#125; = req.query;</span><br><span class="line">    <span class="keyword">if</span>(!id ||!id.length)&#123;</span><br><span class="line">        res.json(&#123;<span class="attr">msg</span>:<span class="string">'ç¼ºå°‘user idå‚æ•°'</span>&#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">//ç»™reqä»»æ„å®šä¹‰ä¸€ä¸ªå±æ€§æ¥ä¿å­˜æ•°æ®</span></span><br><span class="line">        req.midCustom = &#123;id, password&#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/login'</span>,[valid_pwd, valid_id],(req,res)=&gt;&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        user:req.midCustom,<span class="comment">//å‡­å€ŸmidCustomå±æ€§æ‹¿å–æ•°æ®</span></span><br><span class="line">        msg:<span class="string">'ç™»é™†æˆåŠŸ'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†"></a>å¼‚å¸¸å¤„ç†</h3><h4 id="æ ¹æ®å›è°ƒçš„ä¼ å‚ä¸ªæ•°åˆ¤å®šæ“ä½œç±»åˆ«"><a href="#æ ¹æ®å›è°ƒçš„ä¼ å‚ä¸ªæ•°åˆ¤å®šæ“ä½œç±»åˆ«" class="headerlink" title="æ ¹æ®å›è°ƒçš„ä¼ å‚ä¸ªæ•°åˆ¤å®šæ“ä½œç±»åˆ«"></a>æ ¹æ®å›è°ƒçš„ä¼ å‚ä¸ªæ•°åˆ¤å®šæ“ä½œç±»åˆ«</h4><p>å››ä¸ªä¼ å‚çš„å›è°ƒå‡½æ•°è¢«è‡ªåŠ¨è¯†åˆ«ä¸ºå¼‚å¸¸å¤„ç†å‡½æ•°ã€‚<br>expressæ¡†æ¶å±‚é¢åº”è¯¥åšäº†è¯†åˆ«å¤„ç†ï¼Œ<br>å¦‚æœä½ ç»™app.useä¼ é€’ä¸€ä¸ªæœ‰å››ä¸ªä¼ å‚ çš„å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆexpressè®¤ä¸ºæ­¤å›è°ƒå‡½æ•°æ˜¯é”™è¯¯å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆå›è°ƒå‡½æ•°ä¼ å‚ä¾æ¬¡ä¸º ï¼š<code>err,req, res, next</code>;<br>å¦‚æœä½ ç»™app.useä¼ é€’ä¸€ä¸ªæœ‰ä¸‰ä¸ªä¼ å‚çš„å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆexpressè®¤ä¸ºæ­¤å›è°ƒå‡½æ•°æ˜¯é”™è¯¯å¤„ç†å‡½æ•°ï¼Œé‚£ä¹ˆå›è°ƒå‡½æ•°ä¼ å‚ä¾æ¬¡ä¸º ï¼š<br><code>req, res, next</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> errorHandle = <span class="function">(<span class="params">err,req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;message&#125;= err;</span><br><span class="line">        res.status(<span class="number">500</span>)</span><br><span class="line">        .json(&#123;</span><br><span class="line">            message:<span class="string">`<span class="subst">$&#123;message || <span class="string">'è¯·æ±‚å¼‚å¸¸'</span>&#125;</span>`</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> matchAll = <span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'test all use'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.use(matchAll)</span><br><span class="line">app.use(errorHandle)</span><br></pre></td></tr></table></figure></p><h4 id="å¼‚å¸¸å¤„ç†æ”¾ç½®æœ€å"><a href="#å¼‚å¸¸å¤„ç†æ”¾ç½®æœ€å" class="headerlink" title="å¼‚å¸¸å¤„ç†æ”¾ç½®æœ€å"></a>å¼‚å¸¸å¤„ç†æ”¾ç½®æœ€å</h4><p>å¼‚å¸¸å¤„ç†ä¸€èˆ¬æ”¾åœ¨æ‰€æœ‰è·¯ç”±æˆ–ä¸­é—´ä»¶çš„æœ€åå–å®šä¹‰ã€‚</p><h4 id="404-not-foundå¤„ç†"><a href="#404-not-foundå¤„ç†" class="headerlink" title="404 not foundå¤„ç†"></a>404 not foundå¤„ç†</h4><p>åœ¨è·¯ç”±çš„æœ€åä½ç½®ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> errorHandle = <span class="function">(<span class="params">err,req, res, next</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;message&#125;= err;</span><br><span class="line">        res.status(<span class="number">500</span>)</span><br><span class="line">        .json(&#123;</span><br><span class="line">            message:<span class="string">`<span class="subst">$&#123;message || <span class="string">'è¯·æ±‚å¼‚å¸¸'</span>&#125;</span>`</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> notfound = <span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'è¯·æ±‚çš„æ¥å£ä¸å­˜åœ¨'</span><span class="comment">//404</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">app.use(notfound)</span><br><span class="line">app.use(errorHandle)</span><br></pre></td></tr></table></figure></p><h3 id="æ¥å£è¿”å›ä¸€ä¸ªé™æ€æ–‡ä»¶"><a href="#æ¥å£è¿”å›ä¸€ä¸ªé™æ€æ–‡ä»¶" class="headerlink" title="æ¥å£è¿”å›ä¸€ä¸ªé™æ€æ–‡ä»¶"></a>æ¥å£è¿”å›ä¸€ä¸ªé™æ€æ–‡ä»¶</h3><h4 id="ä¸æŒ‡å®šè·¯ç”±"><a href="#ä¸æŒ‡å®šè·¯ç”±" class="headerlink" title="ä¸æŒ‡å®šè·¯ç”±"></a>ä¸æŒ‡å®šè·¯ç”±</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(path.resolve(__dirname, <span class="string">'public'</span>)))</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¿é—® http://127.0.0.1:3000/test.js</span></span><br></pre></td></tr></table></figure><h4 id="æŒ‡å®šè·¯ç”±"><a href="#æŒ‡å®šè·¯ç”±" class="headerlink" title="æŒ‡å®šè·¯ç”±"></a>æŒ‡å®šè·¯ç”±</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="string">'/pub'</span>,express.static(path.resolve(__dirname, <span class="string">'public'</span>)))</span><br><span class="line"><span class="comment">//è®¿é—® http://127.0.0.1:3000/pub/test.js</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><p><a href="https://github.com/YeWills/learns/tree/master/sequelize-demo" target="_blank" rel="noopener">å¼‚å¸¸å¤„ç†ã€æ¨¡å‹è¡¨æ•°æ®ä¿®æ”¹ demo</a><br>ä¹Ÿå¯å‚è€ƒ ã€Šsequelizeé›†æˆä½¿ç”¨ã€‹ ç« èŠ‚çš„demoå’Œå‚è€ƒ</p><h2 id="sequlizeé›†æˆä½¿ç”¨"><a href="#sequlizeé›†æˆä½¿ç”¨" class="headerlink" title="sequlizeé›†æˆä½¿ç”¨"></a>sequlizeé›†æˆä½¿ç”¨</h2><h3 id="sequelize-cliåˆå§‹åŒ–å·¥ç¨‹"><a href="#sequelize-cliåˆå§‹åŒ–å·¥ç¨‹" class="headerlink" title="sequelize-cliåˆå§‹åŒ–å·¥ç¨‹"></a>sequelize-cliåˆå§‹åŒ–å·¥ç¨‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx sequelize-cli init</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ æ–‡ä»¶å¦‚ä¸‹ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config.json</span></span><br><span class="line"> "development": &#123;</span><br><span class="line">    "username": "root",</span><br><span class="line">    "password": "root1111",</span><br><span class="line">    "database": "sqe_db",</span><br><span class="line">    "host": "127.0.0.1",</span><br><span class="line">    "dialect": "mysql"</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="æ–°å»ºæ•°æ®åº“"><a href="#æ–°å»ºæ•°æ®åº“" class="headerlink" title="æ–°å»ºæ•°æ®åº“"></a>æ–°å»ºæ•°æ®åº“</h3><figure class="image-box">                <img src="/image/end_base/right.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/end_base/db.jpg" alt title class>                <p></p>            </figure><h3 id="sequelize-cliåˆ›å»ºæ¨¡å‹"><a href="#sequelize-cliåˆ›å»ºæ¨¡å‹" class="headerlink" title="sequelize-cliåˆ›å»ºæ¨¡å‹"></a>sequelize-cliåˆ›å»ºæ¨¡å‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx sequelize-cli model:generate --name User --attributes name:string</span><br></pre></td></tr></table></figure><p>å‘½ä»¤ä¼šåšä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li>ç”Ÿæˆ migrateæ–‡ä»¶ ï¼š åœ¨ models æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†ä¸€ä¸ª user æ¨¡å‹æ–‡ä»¶;</li><li>ç”Ÿæˆ modelæ–‡ä»¶ ï¼šåœ¨ migrations æ–‡ä»¶å¤¹ä¸­åˆ›å»ºäº†ä¸€ä¸ªåå­—åƒ XXXXXXXXXXXXXX-create-user.js çš„è¿ç§»æ–‡ä»¶.<h3 id="å°†åˆšæ‰çš„æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä¸­-ç”Ÿæˆè¡¨"><a href="#å°†åˆšæ‰çš„æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä¸­-ç”Ÿæˆè¡¨" class="headerlink" title="å°†åˆšæ‰çš„æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä¸­(ç”Ÿæˆè¡¨)"></a>å°†åˆšæ‰çš„æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“ä¸­(ç”Ÿæˆè¡¨)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx sequelize-cli db:migrate</span><br></pre></td></tr></table></figure></li></ul><p>ä¸€èˆ¬å‘½ä»¤åè¦è®¾ç½®envï¼Œå¦‚æœä¸è®¾ç½®åˆ™é»˜è®¤ä½¿ç”¨developmentã€‚ä¸ä¸‹é¢å‘½ä»¤ç­‰æ•ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx sequelize-cli db:migrate --env=development</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œçš„developmentå°±æ˜¯<code>sequelize-demo/config/config.json</code>çš„ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"development"</span>: &#123;</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"root"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"root1111"</span>,</span><br><span class="line">    <span class="attr">"database"</span>: <span class="string">"sqe_db"</span>,</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"dialect"</span>: <span class="string">"mysql"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"test"</span>: &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  "production": &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å°†æ¨¡å‹æ·»åŠ åˆ°æ•°æ®åº“åï¼Œä½ å°±ä¼šåœ¨æ•°æ®åº“ä¸­çœ‹åˆ°æ¨¡å‹ä¸­æ·»åŠ çš„è¡¨(æ¨¡å‹ç”Ÿäº§çš„)<br><figure class="image-box">                <img src="/image/end_base/db.jpg" alt title class>                <p></p>            </figure><br>è‡³æ­¤ï¼Œæ¡¥æ¥æ•°æ®åº“ï¼Œé€šè¿‡sequelizeåœ¨æ•°æ®åº“ä¸­å»ºè¡¨çš„å·¥ä½œå®Œæˆï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ä½¿ç”¨expressæ“ä½œæ•°æ®åº“ã€‚</p><h3 id="ä½¿ç”¨expressæ“ä½œæ•°æ®åº“"><a href="#ä½¿ç”¨expressæ“ä½œæ•°æ®åº“" class="headerlink" title="ä½¿ç”¨expressæ“ä½œæ•°æ®åº“"></a>ä½¿ç”¨expressæ“ä½œæ•°æ®åº“</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span>  express = <span class="built_in">require</span>(<span class="string">'express'</span>) ;</span><br><span class="line"><span class="keyword">const</span> models = <span class="built_in">require</span>(<span class="string">'../models'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.get(<span class="string">'/create'</span>, <span class="keyword">async</span> (req,res, next)=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;name&#125; = req.query;</span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> models.User.create(&#123;</span><br><span class="line">        name</span><br><span class="line">    &#125;)</span><br><span class="line">    res.json(&#123;</span><br><span class="line">        msg:<span class="string">'create success!'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="mysql2"><a href="#mysql2" class="headerlink" title="mysql2"></a>mysql2</h3><p>å¦‚ä¸‹ï¼Œnodeåº”ç”¨é€šè¿‡ormæ¥æ“ä½œ mysqlæ•°æ®åº“ï¼Œå¿…é¡»å€ŸåŠ©nodeç¯å¢ƒä¸‹çš„mysqlé©±åŠ¨ï¼Œè€Œè¿™ä¸ªé©±åŠ¨å°±æ˜¯mysql2.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node-application -- ORM(sequelize) --&gt; é©±åŠ¨(node-mysql å…¶å®å°±æ˜¯mysql2) --&gt; mysql db</span><br></pre></td></tr></table></figure></p><h2 id="demoä¸å‚è€ƒ"><a href="#demoä¸å‚è€ƒ" class="headerlink" title="demoä¸å‚è€ƒ"></a>demoä¸å‚è€ƒ</h2><p><a href="https://github.com/YeWills/learns/tree/sequelize-demo/sequelize-demo" target="_blank" rel="noopener">demo</a><br>ä¹Ÿå¯å‚è€ƒæœ¬æ–‡å…¶ä»–ç« èŠ‚çš„ç›¸å…³demoã€‚<br><a href="https://www.imooc.com/video/20693" target="_blank" rel="noopener">æœ¬èŠ‚è§†é¢‘å‚è€ƒ</a><br><a href="https://github.com/demopark/sequelize-docs-Zh-CN/blob/master/other-topics/migrations.md" target="_blank" rel="noopener">sequelize migrations</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> egg </tag>
            
            <tag> node </tag>
            
            <tag> koa </tag>
            
            <tag> express </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitç¬”è®°</title>
      <link href="/2020/05/01/git/"/>
      <url>/2020/05/01/git/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç›´åœ¨ç”¨gitï¼Œä¹Ÿæƒ³æ€»ç»“ä¸€ç‚¹gitç¬”è®°ï¼Œå› æ­¤å°±æœ‰äº†æœ¬ç¯‡ã€‚</p><h3 id="gitå›¾å½¢åŒ–å·¥å…·è¯¯ä½ ä¸€ç”Ÿ"><a href="#gitå›¾å½¢åŒ–å·¥å…·è¯¯ä½ ä¸€ç”Ÿ" class="headerlink" title="gitå›¾å½¢åŒ–å·¥å…·è¯¯ä½ ä¸€ç”Ÿ"></a>gitå›¾å½¢åŒ–å·¥å…·è¯¯ä½ ä¸€ç”Ÿ</h3><p>ä½¿ç”¨gitå›¾å½¢åŒ–å·¥å…·æ˜¯ä½¿ç”¨gitçš„é”™è¯¯å¼€å§‹ï¼Œä½¿ç”¨å›¾å½¢åŒ–è¶Šæ·±ï¼Œé”™çš„è¶Šæ·±ã€‚<br>ççˆ±gitï¼ŒåŠæ—©ä¸¢å¼ƒå›¾å½¢åŒ–ã€‚</p><h3 id="git-init-ä¸-git-remote"><a href="#git-init-ä¸-git-remote" class="headerlink" title="git init ä¸ git remote"></a>git init ä¸ git remote</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æœ¬åœ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œä½ æƒ³ä»ç°åœ¨å¼€å§‹ï¼Œå¯¹æ­¤æ–‡ä»¶è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œæ‰§è¡Œgit initå³å¯ï¼›<br>git initåï¼Œå°±å¯ä»¥å°½æƒ…åœ°å¯¹æ­¤é¡¹ç›®å„ç§ç‰ˆæœ¬ç®¡ç†æ“ä½œï¼›<br>æœ‰ä¸€å¤©ä½ æƒ³å¯¹è¿™ä¸ªgit inité¡¹ç›®ä¸Šä¼ åˆ°githubä¸Šï¼Œ<br>åœ¨å‘½ä»¤çª—å£æ‰§è¡Œ git remoteï¼Œcmdçª—å£ä¼šæç¤ºä½ å¦‚ä½•ä¸Šä¼ åˆ°GitHubæœåŠ¡å™¨ä¸Šã€‚</p><h4 id="git-remote-ç›¸å…³é—®é¢˜"><a href="#git-remote-ç›¸å…³é—®é¢˜" class="headerlink" title="git remote ç›¸å…³é—®é¢˜"></a>git remote ç›¸å…³é—®é¢˜</h4><p>æœ¬åœ°ä»“åº“git initåï¼Œåœ¨å…³è”è¿œç¨‹åœ°å€æ—¶ï¼Œè¦æ±‚åšå¦‚ä¸‹æ“ä½œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Either specify the URL from the command-line or configure a remote repository using</span><br><span class="line">//è¿™é‡Œçš„name é€šå¸¸ä¸º remote nameï¼Œé»˜è®¤çš„è¿œç¨‹åå­—ä¸ºoriginï¼Œ</span><br><span class="line">//æ‰€ä»¥æ­¤å¤„nameè¯·è®°ä½ä¸€å®šè¦å†™originï¼Œä¸ç„¶ä¼šå¯¼è‡´ä¸‹é¢è®²åˆ°çš„æ— æ³•ä½¿ç”¨git push å°±å¯ä»¥è½»æ¾pushã€‚</span><br><span class="line">//å½“ç„¶å¦‚æœæœ‰éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–è¿œç¨‹åã€‚</span><br><span class="line">    git remote add &lt;name&gt; &lt;url&gt;</span><br><span class="line"></span><br><span class="line">and then push using the remote name</span><br><span class="line">//è¿™é‡Œçš„nameæ˜¯è¿œç¨‹ä¸Šçš„branchåï¼Œä»“åº“ç¬¬ä¸€ä¸ªåˆ†æ”¯åé€šå¸¸å‘½åä¸º master</span><br><span class="line">    git push &lt;name&gt;</span><br></pre></td></tr></table></figure></p><h4 id="git-pushæ—¶ï¼Œè¦æ±‚-git-remote-add-çš„é—®é¢˜"><a href="#git-pushæ—¶ï¼Œè¦æ±‚-git-remote-add-çš„é—®é¢˜" class="headerlink" title="git pushæ—¶ï¼Œè¦æ±‚ git remote add  çš„é—®é¢˜"></a>git pushæ—¶ï¼Œè¦æ±‚ git remote add <name> <url>çš„é—®é¢˜</url></name></h4><p>æ­¤é—®é¢˜ä¸ä¸Šé¢è¯´çš„ ã€Šgit remote ç›¸å…³é—®é¢˜ã€‹ä¸€è„‰ç›¸æ‰¿ï¼Œ<br>è¿™é‡Œæˆ‘ä»¬è¦äº†è§£ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œ <strong>ä½¿ç”¨git push æ¨é€åˆ°æœåŠ¡å™¨æ—¶ï¼Œé»˜è®¤æ˜¯æ¨é€åˆ°åå­—ä¸º originçš„è¿œç¨‹ä¸Š</strong>ï¼Œæ‰€ä»¥æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å»ºç«‹è”ç³»æ—¶ï¼Œä½¿ç”¨çš„æ˜¯originï¼Œé‚£ä¹ˆè¯¥åˆ†æ”¯æ¯æ¬¡pushæ—¶ï¼Œä½¿ç”¨git pushå°±å¯ä»¥äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add orgin https://.....</span><br></pre></td></tr></table></figure></p><p>ä»è¯¥åˆ†æ”¯checkoutå‡ºæ¥çš„branchï¼Œpushåˆ°è¿œç¨‹æ—¶ï¼Œä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨ git pushå³å¯æ¨é€ã€‚</p><h3 id="çœ‹cmdçª—å£æç¤ºå¾ˆå…³é”®"><a href="#çœ‹cmdçª—å£æç¤ºå¾ˆå…³é”®" class="headerlink" title="çœ‹cmdçª—å£æç¤ºå¾ˆå…³é”®"></a>çœ‹cmdçª—å£æç¤ºå¾ˆå…³é”®</h3><p>ä¸Šé¢è¯´åˆ°äº†æ‰§è¡Œgit remote cmdçª—å£ä¼šæœ‰æç¤ºï¼ŒæŒ‰ç…§æç¤ºï¼Œå°±å¯ä»¥å®Œæˆæƒ³åšçš„äº‹æƒ…ã€‚<br>git æä¾›äº†å¼ºå¤§çš„æç¤ºåŠŸèƒ½ï¼Œè¦é‡è§†cmdçª—å£æç¤ºä¿¡æ¯ï¼Œå¾ˆå…³é”®ã€‚<br>git bash ç²˜è´´å¤åˆ¶å¾ˆå¥½ç”¨</p><h3 id="ä½¿ç”¨git-bashï¼Œæ”¾å¼ƒcmd"><a href="#ä½¿ç”¨git-bashï¼Œæ”¾å¼ƒcmd" class="headerlink" title="ä½¿ç”¨git bashï¼Œæ”¾å¼ƒcmd"></a>ä½¿ç”¨git bashï¼Œæ”¾å¼ƒcmd</h3><p>git bashæ‰æ˜¯æœ€é€‚åˆç”¨æ¥ç®¡ç†gitçš„å‘½ä»¤çª—å£ï¼Œæ¯”å¦‚ git bash èƒ½æ—¶åˆ»æ˜¾ç¤ºå½“å‰ä½ æ‰€å¤„çš„åˆ†æ”¯åï¼Œèƒ½å®Œæ•´ä¿ç•™gitçš„æ“ä½œï¼Œå› ä¸ºcmdè¶…è¿‡ä¸€å®šæ“ä½œä¼šåˆ é™¤ä»¥å‰çš„æ“ä½œæ—¥å¿—ã€‚</p><h3 id="git-fetch-git-pull-åˆ‡è¿œç¨‹åˆ†æ”¯"><a href="#git-fetch-git-pull-åˆ‡è¿œç¨‹åˆ†æ”¯" class="headerlink" title="git fetch\git pull\åˆ‡è¿œç¨‹åˆ†æ”¯"></a>git fetch\git pull\åˆ‡è¿œç¨‹åˆ†æ”¯</h3><p>git fetch å°†è¿œç¨‹åˆ†æ”¯æ›´æ–°åˆ°æœ¬åœ°ï¼Œä½†ä¸ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶ï¼Œä¸‹è½½åˆ°æœ¬åœ°çš„åˆ†æ”¯çš„åå­—å‰é¢éƒ½æœ‰origin/,ä¾‹å¦‚origin/master.<br>git pull æ˜¯git fetchä¸git merge origin/branch çš„ä¸¤æ­¥ã€‚</p><h4 id="æ‹‰å–æ–°é¡¹ç›®æ—¶ï¼Œå¦‚ä½•åˆ‡æ¢åˆ°é¡¹ç›®çš„å…¶ä»–åˆ†æ”¯"><a href="#æ‹‰å–æ–°é¡¹ç›®æ—¶ï¼Œå¦‚ä½•åˆ‡æ¢åˆ°é¡¹ç›®çš„å…¶ä»–åˆ†æ”¯" class="headerlink" title="æ‹‰å–æ–°é¡¹ç›®æ—¶ï¼Œå¦‚ä½•åˆ‡æ¢åˆ°é¡¹ç›®çš„å…¶ä»–åˆ†æ”¯"></a>æ‹‰å–æ–°é¡¹ç›®æ—¶ï¼Œå¦‚ä½•åˆ‡æ¢åˆ°é¡¹ç›®çš„å…¶ä»–åˆ†æ”¯</h4><p>æ‰§è¡Œ git fetchåï¼Œgit checkoutå³å¯</p><h3 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h3><p>git checkout . æ¸…é™¤æ‰€æœ‰<br>git checkout string  ï¼Œæ­¤stringå¯ä»¥æ˜¯åˆ†æ”¯åï¼Œä¹Ÿå¯æ˜¯commitHash</p><h3 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h3><h4 id="PRå†²çªæ—¶ï¼Œå¤„ç†å†²çª"><a href="#PRå†²çªæ—¶ï¼Œå¤„ç†å†²çª" class="headerlink" title="PRå†²çªæ—¶ï¼Œå¤„ç†å†²çª"></a>PRå†²çªæ—¶ï¼Œå¤„ç†å†²çª</h4><p>å¤šäººå¼€å‘ï¼Œåœ¨æPRç»™developåˆ†æ”¯æ—¶ï¼Œå½“githubé¡µé¢æç¤ºæœ‰å†²çªæ—¶,å¤„ç†å¦‚ä¸‹ï¼š<br>åˆ‡åˆ°è‡ªå·±çš„åˆ†æ”¯(PRåˆ°developçš„åˆ†æ”¯)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git rebase develop</span><br><span class="line">//è¿™æ—¶ä¼šæ˜¾ç¤ºå†²çªå†…å®¹ï¼Œè§£å†³å†²çªï¼Œæ‰§è¡Œ</span><br><span class="line">git add .</span><br><span class="line">git rebase --continue</span><br><span class="line">git push origin -f</span><br></pre></td></tr></table></figure></p><p>ç„¶åé‡æ–°PR,è¿™æ—¶å°±ä¸æŠ¥é”™äº†<br>æœ‰äººå°†ä¸Šä¸€æ“ä½œè¿‡ç¨‹ç§°ä¸ºå˜åŸºã€‚<br>git rebase åŠŸèƒ½ç±»ä¼¼ git mergeï¼ŒåŒºåˆ«åœ¨äºï¼Œgit mergeæ—¶ï¼Œä½ çš„commit æ˜¯æŒ‰å…ˆåé¡ºåºæ’åˆ—çš„ï¼Œmergeå®Œæˆåå¯èƒ½ä¸€çœ¼çœ‹ä¸åˆ°è‡ªå·±çš„æäº¤ã€‚<br>git rebaseåˆ™ä¸åŒï¼Œgit rebaseåï¼Œä½ ä¸developä¸åŒçš„æäº¤(ä¹Ÿå°±æ˜¯ä½ ä¿®æ”¹çš„)commitå°†æ˜¾ç¤ºåœ¨ç¬¬ä¸€æ¡ï¼Œ(æ³¨æ„çš„æ˜¯ï¼Œgit rebaseå†²çªä¿®æ”¹å°†ä¸ä¼šç”Ÿæˆcommitï¼Œä»ä¸Šé¢åªæœ‰git add,æ²¡æœ‰git commitå¾—åˆ°ä½è¯ï¼Œå› ä¸ºåªæœ‰git commit æ‰ä¼šç”Ÿæˆä¸€æ¡commit):<br><figure class="image-box">                <img src="/image/git/git3.png" alt title class>                <p></p>            </figure></p><p>ä»¥ä¸Šè¿‡ç¨‹æ˜¯æŠŠgit rebase å½“git mergeæ¥ç”¨ï¼Œgit rebaseçš„è¿™ç§å½“mergeçš„ç”¨æ³•ï¼Œç”¨çš„ä¸å¤šï¼Œç”¨å¾—æœ€å¤šçš„å°±æ˜¯ä¸Šé¢å±•ç¤ºçš„ï¼Œç”¨æ¥å¤„ç†PRåçš„å†²çªã€‚</p><h4 id="å°†æœ€æ–°ä¿®æ”¹åˆå¹¶è¿‡æ¥ï¼Œä¸”ä¿è¯æäº¤çš„è¿ç»­æ€§"><a href="#å°†æœ€æ–°ä¿®æ”¹åˆå¹¶è¿‡æ¥ï¼Œä¸”ä¿è¯æäº¤çš„è¿ç»­æ€§" class="headerlink" title="å°†æœ€æ–°ä¿®æ”¹åˆå¹¶è¿‡æ¥ï¼Œä¸”ä¿è¯æäº¤çš„è¿ç»­æ€§"></a>å°†æœ€æ–°ä¿®æ”¹åˆå¹¶è¿‡æ¥ï¼Œä¸”ä¿è¯æäº¤çš„è¿ç»­æ€§</h4><p>æ¯”å¦‚ï¼Œä½ åœ¨åšç”¨æˆ·ç®¡ç†åŠŸèƒ½ï¼ŒåŒäº‹åœ¨åšç™»å½•åŠŸèƒ½ï¼›<br>ä½ çš„ç”¨æˆ·ç®¡ç†çš„é¡µé¢æ•ˆæœå†™å¥½äº†ï¼Œè¦åšæ¥å£è”è°ƒï¼Œéœ€è¦ç”¨åˆ°åŒäº‹åšçš„ç™»å½•åŠŸèƒ½çš„ç”¨æˆ·å‚æ•°ï¼›<br>æ³¨æ„ï¼Œ<br>ä½ å¯ä»¥ç›´æ¥merge åŒäº‹çš„ä»£ç è¿‡æ¥ï¼Œä½†å¼Šç«¯æ˜¯ï¼Œä½ è‡ªå·±åšçš„ç”¨æˆ·ç®¡ç†æäº¤å¯èƒ½æ— æ³•æ˜¾ç¤ºåœ¨git logçš„æœ€å‰é¢ï¼›<br>åœ¨æ­¤æ¨èç”¨rebase åŒäº‹çš„ä»£ç ï¼Œå¥½å¤„æ˜¯ï¼Œæ—¢å°†åŒäº‹çš„ä¿®æ”¹mergeè¿‡æ¥ï¼Œåˆå¯ä»¥å°†è‡ªå·±çš„ä¿®æ”¹æ˜¾ç¤ºæœ€ä¸Šæ–¹ï¼Œä¿è¯å½“å‰ä¸šåŠ¡åŠŸèƒ½çš„commitçš„è¿ç»­æ€§å’Œç›´è§‚æ€§ã€‚</p><h4 id="rebase-ä¸-merge"><a href="#rebase-ä¸-merge" class="headerlink" title="rebase ä¸ merge"></a>rebase ä¸ merge</h4><p>å¦‚ä¸Šæ‰€è¯´ï¼Œrebaseæœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œmergeèƒ½åšåˆ°çš„ï¼Œrebaseéƒ½èƒ½åšåˆ°ï¼Œä¸ºä»€ä¹ˆä¸éƒ½ç”¨rebaseå‘¢ï¼Ÿ<br>å› ä¸ºmergeæ˜¯æ— å®³çš„ï¼Œä¸æ”¹å˜commithashå€¼ï¼›<br>è€Œrebaseæœ‰æ”¹å˜commithashå€¼çš„é£é™©ï¼Œè¿™å°±æ„å‘³ç€ä½ åšåˆ†æ”¯çš„åˆå¹¶æ—¶å°±ä¼šå‡ºç°å†²çªï¼Œå¦‚æœä½ æœ‰ä¸€ç¾¤å°ä¼™ä¼´ä¸€èµ·å¼€å‘ï¼Œé‚£ä¹ˆè¿™ä¸ªå†²çªèµ·æ¥ï¼Œä¼šè®©ä½ holdä¸ä½ï¼Œç„¶è€Œè¿™å¹¶ä¸å¦¨ç¢ä½ å¯¹rebaseçš„çƒ­çˆ±ã€‚</p><p>å› æ­¤é‰´äºmergeçš„æ— å®³æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åˆ†æ”¯åˆå¹¶å°±ä½¿ç”¨mergeï¼›<br>åœ¨ç‰¹å®šåœºæ™¯ä¸‹æ‰ä½¿ç”¨rebaseï¼›</p><h4 id="åˆå¹¶commit"><a href="#åˆå¹¶commit" class="headerlink" title="åˆå¹¶commit"></a>åˆå¹¶commit</h4><p>è¿™æ˜¯æ—¥å¸¸å¼€å‘å¿…å¤‡ç”¨æ³•ï¼Œä¸ä¼šæ­¤æ³•ï¼Œä¸èƒ½è¯´ä¼šä½¿ç”¨git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//æ­£å¸¸ä½¿ç”¨</span><br><span class="line">git rebase -i HEAD~6</span><br><span class="line">æŒ‰å­—æ¯ié”®ï¼Œè¿›å…¥insertæ¨¡å¼(ç¼–è¾‘æ¨¡å¼)</span><br><span class="line">ç•™ä¸€ä¸ªæœ€ä¸Šé¢çš„pickï¼Œ</span><br><span class="line">åé¢çš„pickå…¨éƒ¨æ¢æˆsï¼›</span><br><span class="line">ä¿®æ”¹å¥½åï¼ŒæŒ‰escé”®(é€€å‡ºç¼–è¾‘æ¨¡å¼)</span><br><span class="line">:wq //ä¿å­˜ç¼–è¾‘ä¿®æ”¹ï¼Œvimå‘½ä»¤</span><br><span class="line">:q! //ä¸ä¿å­˜ç¼–è¾‘ä¿®æ”¹ï¼Œvimå‘½ä»¤</span><br></pre></td></tr></table></figure><p>å¦‚æœé‡åˆ°å†²çªï¼Œé™¤äº†ä»¥ä¸Šå‘½ä»¤ï¼ŒæŒ‰æç¤ºæ“ä½œï¼Œè¿˜ä¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œå®Œgit add . åï¼Œä¸å¿…æ‰§è¡Œgit commit</span><br><span class="line">git add .</span><br><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure></p><p>æ”¾å¼ƒrebase<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --abort</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„çš„æ˜¯ä»¥ä¸‹ä¸¤ç§æ–¹æ³•éƒ½æ”¯æŒï¼Œä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜ç‚¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~6</span><br><span class="line">git rebase -i c9r26r869b8  //c9r26r869b8 æ­¤hashå€¼ä¸è¢«åˆå¹¶ï¼Œæ­¤hashä»¥å‰çš„æ‰€æœ‰commitå°†è¢«åˆå¹¶</span><br></pre></td></tr></table></figure></p><h3 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h3><h4 id="å°†åˆ†æ”¯å›æ»šåˆ°æŒ‡å®šå†å²ç‰ˆæœ¬"><a href="#å°†åˆ†æ”¯å›æ»šåˆ°æŒ‡å®šå†å²ç‰ˆæœ¬" class="headerlink" title="å°†åˆ†æ”¯å›æ»šåˆ°æŒ‡å®šå†å²ç‰ˆæœ¬"></a>å°†åˆ†æ”¯å›æ»šåˆ°æŒ‡å®šå†å²ç‰ˆæœ¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// --hard æ˜¯å¼ºåˆ¶çš„æ„æ€</span><br><span class="line">git reset --hard commitHash</span><br></pre></td></tr></table></figure><h4 id="æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œå›åˆ°å¹²å‡€çš„å½“å‰ä»“åº“ç‰ˆæœ¬"><a href="#æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œå›åˆ°å¹²å‡€çš„å½“å‰ä»“åº“ç‰ˆæœ¬" class="headerlink" title="æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œå›åˆ°å¹²å‡€çš„å½“å‰ä»“åº“ç‰ˆæœ¬"></a>æ”¾å¼ƒæ‰€æœ‰ä¿®æ”¹ï¼Œå›åˆ°å¹²å‡€çš„å½“å‰ä»“åº“ç‰ˆæœ¬</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD</span><br></pre></td></tr></table></figure><h4 id="git-reset-HEAD"><a href="#git-reset-HEAD" class="headerlink" title="git reset HEAD~"></a>git reset HEAD~</h4><p>è¿™ä¸ªæ–¹æ³•éå¸¸å¥½ç”¨ï¼Œæœ¬æ„æ˜¯é‡æ–°ä¿®æ”¹ä¸Šä¸€æ¬¡æäº¤ã€‚<br>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œå°†ä¸Šä¸€æ¬¡æäº¤çš„æ‰€æœ‰æ–‡ä»¶å°†è‡³äº not staged çŠ¶æ€,<br>ç„¶åï¼Œä½ å¯å¾ˆç›´è§‚çœ‹åˆ°è¿™æ¬¡æäº¤ä¿®æ”¹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œ<br>å¹¶ä¸”vscodeå¯¹äºnot stagedçŠ¶æ€çš„æ–‡ä»¶ï¼Œä¼šå°†ä»–ä»¬é›†ä¸­æ˜¾ç¤ºåˆ°æºä»£ç ç®¡ç†çª—å£ï¼Œ<br>è¿™å¯¹äºgit rebase å¾ˆå¤šcommitåï¼Œç„¶åå†æ¬¡æ•´ç†æˆ–æ ¼å¼åŒ–æ‰€æœ‰çš„ä¿®æ”¹å†…å®¹ æ˜¯å¾ˆæ£’çš„åŠŸèƒ½ã€‚</p><h4 id="å›åˆ°æŒ‡å®šæäº¤åï¼Œå¹¶é‡æ–°ä¿®æ”¹è¿™ä¸€æ¬¡æäº¤å†…å®¹"><a href="#å›åˆ°æŒ‡å®šæäº¤åï¼Œå¹¶é‡æ–°ä¿®æ”¹è¿™ä¸€æ¬¡æäº¤å†…å®¹" class="headerlink" title="å›åˆ°æŒ‡å®šæäº¤åï¼Œå¹¶é‡æ–°ä¿®æ”¹è¿™ä¸€æ¬¡æäº¤å†…å®¹"></a>å›åˆ°æŒ‡å®šæäº¤åï¼Œå¹¶é‡æ–°ä¿®æ”¹è¿™ä¸€æ¬¡æäº¤å†…å®¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard commitHash</span><br><span class="line">//~ æŒ‡çš„æ˜¯ä¸Šä¸€æ¬¡çš„æ„æ€</span><br><span class="line">git reset HEAD~</span><br></pre></td></tr></table></figure><h4 id="å†æ¬¡å¯¹å‰å‡ æ¬¡commitä¿®æ”¹çš„å†…å®¹ä¿®æ”¹"><a href="#å†æ¬¡å¯¹å‰å‡ æ¬¡commitä¿®æ”¹çš„å†…å®¹ä¿®æ”¹" class="headerlink" title="å†æ¬¡å¯¹å‰å‡ æ¬¡commitä¿®æ”¹çš„å†…å®¹ä¿®æ”¹"></a>å†æ¬¡å¯¹å‰å‡ æ¬¡commitä¿®æ”¹çš„å†…å®¹ä¿®æ”¹</h4><p>æˆ‘ä»¬åšä¸€ä¸ªé¢åŒ…å±‘èœå•åŠŸèƒ½ï¼Œå¯èƒ½åšäº†å¾ˆå¤šæ¬¡æäº¤ï¼Œç°åœ¨æƒ³å¯¹è¿™ä¹ˆå¤šæ¬¡çš„æäº¤æ‰€ä¿®æ”¹çš„æ‰€æœ‰å†…å®¹ï¼Œé‡æ–°å®¡é˜…ä¸€éï¼Œä»¥ä¾¿ä¿®æ”¹å†…å®¹æˆ–è€…æ ¼å¼åŒ–ï¼Œè§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~6</span><br><span class="line">git reset HEAD~</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;é¢åŒ…å±‘åŠŸèƒ½&quot;</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒã€Šgit reset HEAD~ã€‹</p><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>git resetåï¼Œè¦pushæ—¶ï¼Œéƒ½éœ€åŠ ä¸Š-fï¼Œå¼ºåˆ¶push</p><h3 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h3><p>å¦‚æœä½ ä½¿ç”¨git reset,é‚£ä¹ˆgit logæ— æ³•æŸ¥åˆ°å½“å‰æäº¤ä¹‹åçš„æäº¤æ—¥å¿—ï¼Œæ­¤æ—¶ä½¿ç”¨ git reflog</p><h3 id="git-cherry-pick"><a href="#git-cherry-pick" class="headerlink" title="git cherry-pick"></a>git cherry-pick</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>ä¸æ‡‚git cherry-pickï¼Œè¯´æ˜ä½ è¿˜ä¸æ‡‚gitè¿™ä½ç¾å¥³çš„åŸºæœ¬å¥—è·¯ï¼Œå¿…å¤‡gitæ“ä½œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick commitHash</span><br></pre></td></tr></table></figure></p><p>git cherry-pick ä¸ git reset é…åˆä½¿ç”¨å¯ä»¥å°½æƒ…ä»»æ„ç©¿æ’å›æ»šä¿®æ”¹ç‰ˆæœ¬æäº¤ï¼Œåªæœ‰æ­¤æ—¶ï¼Œä½ æ‰æ‡‚gitçš„ç¾ï¼Œä»æ­¤çˆ±ä¸é‡Šæ‰‹ï¼Œç›¸é€¢æ¨æ™šã€‚</p><h4 id="commitHashå€¼ä¼šå˜"><a href="#commitHashå€¼ä¼šå˜" class="headerlink" title="commitHashå€¼ä¼šå˜"></a>commitHashå€¼ä¼šå˜</h4><p>å½“ä¸€ä¸ªcommitä»ä¸€ä¸ªbranch cherry-pickåˆ°å¦å¤–ä¸€ä¸ªbranchçš„æ—¶å€™ï¼Œåœ¨æ–°çš„branchä¸Šï¼Œå¯¹åº”çš„commitçš„hashå€¼ä¸åŸå§‹çš„hashå€¼ä¸ä¸€æ ·ï¼Œæœ‰äº†å˜åŒ–ã€‚ä¸è¿‡å…¶ä»–ä¿¡æ¯ï¼ŒåŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œéƒ½ä¹ˆæœ‰å˜ã€‚</p><h4 id="commitä¼šç½®é¡¶"><a href="#commitä¼šç½®é¡¶" class="headerlink" title="commitä¼šç½®é¡¶"></a>commitä¼šç½®é¡¶</h4><p>cherry-pickçš„commitåœ¨æ–°çš„branchä¸Šä¼šç½®é¡¶ã€‚</p><h4 id="è¡Œä¸ºç±»ä¼¼rebase"><a href="#è¡Œä¸ºç±»ä¼¼rebase" class="headerlink" title="è¡Œä¸ºç±»ä¼¼rebase"></a>è¡Œä¸ºç±»ä¼¼rebase</h4><p>ç»“åˆä»¥ä¸Šï¼Œè¯´æ˜cherry-pickçš„è¡Œä¸ºç±»ä¼¼rebaseçš„è¿‡ç¨‹ï¼ˆç½®é¡¶ä¸hashç å˜åŒ–ï¼‰</p><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git branch -D branch //åˆ é™¤æœ¬åœ°åˆ†æ”¯</span><br><span class="line">git branch -a // æŸ¥çœ‹è¿œç¨‹æœ‰å¤šå°‘åˆ†æ”¯</span><br></pre></td></tr></table></figure><h3 id="git-push-åˆ é™¤è¿œç¨‹åˆ†æ”¯"><a href="#git-push-åˆ é™¤è¿œç¨‹åˆ†æ”¯" class="headerlink" title="git push åˆ é™¤è¿œç¨‹åˆ†æ”¯"></a>git push åˆ é™¤è¿œç¨‹åˆ†æ”¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin -d branch</span><br></pre></td></tr></table></figure><h3 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h3><p>å‘½ä»¤ç®€å•ï¼ŒGoogleä¸‹å‘½ä»¤å³å¯ï¼Œgit tagå¾ˆé‡è¦ä¹Ÿå¾ˆå¥½ç”¨ï¼Œ<br>tagçš„å¥½å¤„æœ‰ï¼Œå®ƒæ—¢åƒä¸€ä¸ªbranchï¼Œä¿å­˜äº†å½“æ¬¡tagçš„æ‰€æœ‰æäº¤ï¼Œåˆæä¾›äº†ä¸€ä¸ªzipåŒ…ï¼Œ<br>å¾ˆå¤šå¼€æºæ¡†æ¶çš„ å†å²ç‰ˆæœ¬API éƒ½æ˜¯é€šè¿‡tagå®Œæˆï¼Œéå¸¸ä¹‹å¥½ç”¨</p><h3 id="gitk"><a href="#gitk" class="headerlink" title="gitk"></a>gitk</h3><p>éå¸¸å¥½ç”¨çš„æŸ¥çœ‹å·¥å…·ï¼Œgitè‡ªå¸¦ï¼Œæ­¤å·¥å…·å¤ªå¥½ç”¨ï¼Œæ˜¯æŸ¥å†å²ï¼Œå‡­å…³é”®å­—æŸ¥æäº¤çš„ä¸€æŠŠå¥½æ‰‹ï¼Œå¤ªé‡è¦ï¼Œç”¨å¾—å¤ªé¢‘ç¹ï¼Œä½ å¿…éœ€ä¼šï¼Œ<br>å¯åŠ¨æ–¹æ³•ï¼š<br>git bashä¸­æ‰§è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitk</span><br></pre></td></tr></table></figure></p><p>æ¯”è¾ƒå¥½çš„gitkå‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æŸ¥è¯¢abc.jsæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•ï¼Œæ¯”ä»»ä½•æ’ä»¶æ˜¾ç¤ºçš„å…¨</span><br><span class="line">gitk -- **/ abc.js</span><br></pre></td></tr></table></figure></p><h3 id="å·¥ä½œç›®å½•ã€indexã€HEADã€objectã€å¿«ç…§"><a href="#å·¥ä½œç›®å½•ã€indexã€HEADã€objectã€å¿«ç…§" class="headerlink" title="å·¥ä½œç›®å½•ã€indexã€HEADã€objectã€å¿«ç…§"></a>å·¥ä½œç›®å½•ã€indexã€HEADã€objectã€å¿«ç…§</h3><p>å·¥ä½œç›®å½•ã€indexï¼ˆæš‚å­˜åŒºï¼‰ã€HEADï¼ˆå½“å‰æ‰€å¤„commitï¼‰ã€objectï¼ˆæ–‡ä»¶æ ‘ï¼‰ã€‚<br>å¿«ç…§ï¼šå¯ä»¥ç†è§£ä¸ºç‰ˆæœ¬æ¯æ¬¡æäº¤åï¼Œgitä¼šç»™æäº¤æ‹ç…§ï¼Œç”¨æ¥è®°å½•ç‰ˆæœ¬ä¿¡æ¯ã€‚<br>å°¤å…¶ å·¥ä½œç›®å½•ã€indexã€HEAD è¿™ä¸‰ä¸ªæ¦‚å¿µæ˜¯gitçš„ä¸‰é©¾é©¬è½¦ï¼Œå°±å¥½æ¯” actionã€reducerã€selector æ˜¯react-reduxçš„ä¸‰é©¾é©¬è½¦ä¸€æ ·ã€‚<br>è¦å¤šåˆ·è§†é¢‘å’Œä¹¦ç±ã€Šç²¾é€šgitã€‹äº†è§£è¿™ä»¨ï¼Œäº†è§£gitä¸€åˆ‡åªæ˜¯ä»€ä¹ˆæŒ‡é’ˆæˆ–å¿«ç…§ï¼Œè™½ç„¶æˆ‘ç°åœ¨ä¹Ÿå¿˜å¾—å·®ä¸å¤šï¼Œä½†ä¸€å®šè¦äº†è§£ã€‚<br><figure class="image-box">                <img src="/image/git/git1.png" alt title class>                <p></p>            </figure><br>å·¥ä½œç›®å½•ï¼Œindexï¼ˆæš‚å­˜åŒºï¼‰ã€HEADï¼ˆmasteråˆ†æ”¯ï¼‰ã€objextsï¼ˆæ ‘ï¼‰ã€‚<br>indexä¸HEADéƒ½æ˜¯é€šè¿‡æŒ‡é’ˆæŒ‡å‘æ–‡ä»¶æ ‘objectsï¼›</p><h3 id="å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>å…¶ä»–å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br><span class="line">git stash apply</span><br><span class="line">git checkout -b branch</span><br><span class="line">git log -n</span><br><span class="line">git commit -amend</span><br><span class="line">git help stash //ä½¿ç”¨helpæ–¹å¼ä¸€</span><br><span class="line">git stash --help //ä½¿ç”¨helpæ–¹å¼äºŒ</span><br><span class="line">git diff</span><br></pre></td></tr></table></figure><h3 id="git-æŠ€å·§"><a href="#git-æŠ€å·§" class="headerlink" title="git æŠ€å·§"></a>git æŠ€å·§</h3><h4 id="ç©ºæ ¼ä½¿ç”¨"><a href="#ç©ºæ ¼ä½¿ç”¨" class="headerlink" title="ç©ºæ ¼ä½¿ç”¨"></a>ç©ºæ ¼ä½¿ç”¨</h4><p>æ¸…é™¤å¤šä¸ªæˆ–mergeå¤šä¸ª å¯ä½¿ç”¨ç©ºæ ¼ï¼Œä¸€æ¬¡æå®šï¼Œå¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout file1.js file2.js</span><br><span class="line">git merge branch1 branch2</span><br></pre></td></tr></table></figure></p><h4 id="â€“abort"><a href="#â€“abort" class="headerlink" title="â€“abort"></a>â€“abort</h4><p>â€“abortä¸€èˆ¬æ˜¯æ”¾å¼ƒçš„æ„æ€ï¼Œå¦‚<br>æ”¾å¼ƒmerge<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --abort</span><br></pre></td></tr></table></figure></p><h4 id="â€“contnue"><a href="#â€“contnue" class="headerlink" title="â€“contnue"></a>â€“contnue</h4><p>â€“abortä¸€èˆ¬æ˜¯æ”¾å¼ƒçš„æ„æ€ï¼Œå¦‚<br>æ”¾å¼ƒmerge<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase --contnue</span><br></pre></td></tr></table></figure></p><h4 id="å­—æ¯q"><a href="#å­—æ¯q" class="headerlink" title="å­—æ¯q"></a>å­—æ¯q</h4><p>åœ¨git logå‘½ä»¤å‡ºæ¥ä¸€å †å†å²æ—¶ï¼ŒæŒ‰å›è½¦æˆ–å…¶ä»–é”®ï¼Œåªä¼šæ˜¾ç¤ºæ›´å¤šå†å²ï¼ŒæŒ‰å­—æ¯qå¯é€€å‡ºã€‚</p><h4 id="i"><a href="#i" class="headerlink" title="-i"></a>-i</h4><p>-iè¡¨ç¤ºäº¤äº’çš„æ„æ€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i HEAD~6</span><br></pre></td></tr></table></figure></p><h4 id="åŒç‚¹å·ï¼Œä¸‰ç‚¹å·çš„ç‰¹æ®Šæ„ä¹‰"><a href="#åŒç‚¹å·ï¼Œä¸‰ç‚¹å·çš„ç‰¹æ®Šæ„ä¹‰" class="headerlink" title="åŒç‚¹å·ï¼Œä¸‰ç‚¹å·çš„ç‰¹æ®Šæ„ä¹‰"></a>åŒç‚¹å·ï¼Œä¸‰ç‚¹å·çš„ç‰¹æ®Šæ„ä¹‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -p master..origin/master æŸ¥çœ‹äºŒè€…åŒºåˆ«</span><br></pre></td></tr></table></figure><h4 id="gitkæŸ¥çœ‹å†å²æœ€å¯é "><a href="#gitkæŸ¥çœ‹å†å²æœ€å¯é " class="headerlink" title="gitkæŸ¥çœ‹å†å²æœ€å¯é "></a>gitkæŸ¥çœ‹å†å²æœ€å¯é </h4><p>vscodeçš„ä¸€äº›æ’ä»¶(å¦‚ Git History)ï¼Œå¯ä»¥å¾ˆå¥½åœ°æŸ¥çœ‹å†å²ï¼Œä¸è¿‡ä¹Ÿä¼šæœ‰ä¸€äº›å†å²è¢«æ¼æ‰ï¼Œå¦‚å¯¹äºä¸€äº›git rebase -içš„å†å²æˆ–è€…å¤„ç†å†²çªçš„å†å² æœ‰å¯èƒ½è¢«æ¼æ‰ä¸è¢«æ˜¾ç¤ºï¼Œæ­¤æ—¶è¯·ä½¿ç”¨gitkæŸ¥å†å²ï¼Œgitkæœ€å¯é ï¼Œä¼šæ˜¾ç¤ºæ‰€ä»¥æäº¤ï¼Œå·¨ç»†æ— é—ã€‚</p><h4 id="å¤šç¨‹åºåŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶å¼•èµ·çš„æŠ¥é”™"><a href="#å¤šç¨‹åºåŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶å¼•èµ·çš„æŠ¥é”™" class="headerlink" title="å¤šç¨‹åºåŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶å¼•èµ·çš„æŠ¥é”™"></a>å¤šç¨‹åºåŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶å¼•èµ·çš„æŠ¥é”™</h4><p>æ‰§è¡Œå¤æ‚æ“ä½œæ—¶ï¼ŒæŠ¥ permissioné”™è¯¯ï¼Œå¯èƒ½æ˜¯ç”±äºå…¶ä»–ç¨‹åºå’ŒgitåŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶å¼•èµ·çš„ï¼Œ<br>æ­¤æ—¶ï¼Œå¯ä»¥åœæ­¢npm startæˆ–å…³é—­ç¼–è¾‘å™¨ï¼Œåªè®©gitä¸€ä¸ªç¨‹åºæ“ä½œé¡¹ç›®ï¼Œè§£å†³æ­¤é—®é¢˜ã€‚</p><h4 id="merge-commitHash"><a href="#merge-commitHash" class="headerlink" title="merge commitHash"></a>merge commitHash</h4><p>git merge branchï¼Œä¹Ÿå¯ä»¥git merge commitHashï¼›<br>åŒç†ä¼°è®¡ä¹Ÿå¯ä»¥git rebase commitHash</p><h4 id="vimå‘½ä»¤"><a href="#vimå‘½ä»¤" class="headerlink" title="vimå‘½ä»¤"></a>vimå‘½ä»¤</h4><p>éœ€è¦æ‡‚é‚£ä¹ˆç‚¹vim æ“ä½œçŸ¥è¯†ï¼Œå¦‚:wq :q! å‚è€ƒ ã€Šgit rebaseã€‹</p><h4 id="æ‰‹åŠ¨å¤„ç†å†²çª"><a href="#æ‰‹åŠ¨å¤„ç†å†²çª" class="headerlink" title="æ‰‹åŠ¨å¤„ç†å†²çª"></a>æ‰‹åŠ¨å¤„ç†å†²çª</h4><p>æ‰‹åŠ¨å¤„ç†å†²çªå…¶å®å¾ˆç®€å•ï¼Œè€Œä¸”åˆåšåˆ°ä¸ä¾èµ–æ’ä»¶ã€‚</p><h4 id="sshå¯èƒ½å¹¶æ²¡æœ‰ä½ æƒ³è±¡é‡è¦"><a href="#sshå¯èƒ½å¹¶æ²¡æœ‰ä½ æƒ³è±¡é‡è¦" class="headerlink" title="sshå¯èƒ½å¹¶æ²¡æœ‰ä½ æƒ³è±¡é‡è¦"></a>sshå¯èƒ½å¹¶æ²¡æœ‰ä½ æƒ³è±¡é‡è¦</h4><p>ç”±äºå…¬å¸åŸå› ä¸€ç›´ä¹Ÿæ²¡è®¾ç½®sshï¼Œå„ç§pushä»€ä¹ˆçš„ï¼Œä¹Ÿå¾ˆå°‘éœ€è¦è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œä¸å½±å“å·¥ä½œï¼Œä¹Ÿè®¸sshæ²¡æœ‰ä½ ç°è±¡çš„é«˜å¤§ä¸Šã€‚</p><h3 id="æ¨èä½¿ç”¨vscode"><a href="#æ¨èä½¿ç”¨vscode" class="headerlink" title="æ¨èä½¿ç”¨vscode"></a>æ¨èä½¿ç”¨vscode</h3><p>vscodeå†…ç½®äº†å¯¹gitçš„æ”¯æŒï¼Œå¯¹gitæ”¯æŒå¤ªå‹å¥½ï¼Œvscodeè‡ªå¸¦çš„æ˜¾ç¤ºgitç‰ˆæœ¬å˜åŒ–çš„åŠŸèƒ½å¾ˆå¥½ç”¨ï¼Œ<br>é…åˆvscodeçš„ä¸€äº›gitæ’ä»¶ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„æ˜¾ç¤ºæ¯è¡Œä»£ç çš„å†å²è®°å½•ï¼Œæ˜¯ç”©é”…ï¼Œæ‰¾å‘çš„å¿…å¤‡è‰¯å™¨ã€‚</p><h3 id="ä¸ä¼šç”¨GitHubå°±æ˜¯è€æµæ°“"><a href="#ä¸ä¼šç”¨GitHubå°±æ˜¯è€æµæ°“" class="headerlink" title="ä¸ä¼šç”¨GitHubå°±æ˜¯è€æµæ°“"></a>ä¸ä¼šç”¨GitHubå°±æ˜¯è€æµæ°“</h3><p>ç”¨gitï¼Œä¸ä¼šä½¿ç”¨GitHubçš„åŸºæœ¬æ“ä½œï¼Œå°±æ˜¯è€æµæ°“ï¼Œæ—¢ç„¶ä½ è·Ÿgitæ„Ÿæƒ…è¿™ä¹ˆå¥½ï¼Œå¹²å˜›ä¸æ›´å¥½ä¸€ç‚¹ï¼Œå¨¶äº†å¥¹å‘¢ï¼Œè¿™ä¸æ˜¯è€æµæ°“å—ã€‚<br>ä¸»è¦è¦ç†Ÿç»ƒ githubçš„git workflow (ä¹Ÿå°±æ˜¯PRä»£ç å®¡æ ¸) å’Œ forkåŠŸèƒ½ï¼Œä»¥åŠçœ‹tagã€‚<br>ç†è§£ git workflowçš„æœ€æ ¸å¿ƒçš„ä¸¤å¤§ç›®çš„:PRä»£ç å®¡æ ¸ ä»¥åŠ ç»´æŠ¤ä¸€å¥—æµ‹è¯•ã€ç¨³å®šå’Œå‘å¸ƒåˆ†æ”¯ã€‚<br><figure class="image-box">                <img src="/image/git/git2.png" alt title class>                <p></p>            </figure></p><h3 id="gitå…¥é—¨é˜¶æ®µä¸éœ€çŸ¥é“çš„"><a href="#gitå…¥é—¨é˜¶æ®µä¸éœ€çŸ¥é“çš„" class="headerlink" title="gitå…¥é—¨é˜¶æ®µä¸éœ€çŸ¥é“çš„"></a>gitå…¥é—¨é˜¶æ®µä¸éœ€çŸ¥é“çš„</h3><h4 id="git-rebase-i-HEADåè®°å¾—åˆå¹¶åˆ°test-branch"><a href="#git-rebase-i-HEADåè®°å¾—åˆå¹¶åˆ°test-branch" class="headerlink" title="git rebase -i HEADåè®°å¾—åˆå¹¶åˆ°test branch"></a>git rebase -i HEADåè®°å¾—åˆå¹¶åˆ°test branch</h4><p>åˆ†æ”¯PRåˆ°developåï¼Œå¦‚æœåœ¨PRå‰åšäº†åˆå¹¶å†å²(git rebase -i HEAD)ï¼Œå¦‚æœtest branchåŸºäºdevelopåˆ›å»ºï¼Œè®°å¾—å°†è‡ªå·±è¢«PRçš„åˆ†æ”¯ mergeä¸€æ¬¡åˆ°test branchï¼Œç”±äºtest branch æ»åäºdevelop branchï¼Œé˜²æ­¢ ä»developæ–°å»ºçš„branch mergeåˆ°test branchæ—¶å†²çªï¼Œ</p><h3 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h3><h4 id="unable-to-access-Could-not-resolve-host-github-com"><a href="#unable-to-access-Could-not-resolve-host-github-com" class="headerlink" title="unable to access ..Could not resolve host: github.com"></a>unable to access ..Could not resolve host: github.com</h4><p>ä¹‹å‰git pushè¿˜æ˜¯å¥½å¥½çš„ï¼Œç”¨ç€ç”¨ç€å°± git push å¼‚å¸¸ï¼Œå¹¶æŠ¥é”™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access &apos;https://github.com/YeWills/YeWills.github.io.git/&apos;: Could not resolve host: github.com</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ä»¤äººè´¹è§£çš„æ˜¯ï¼Œ<strong>è¯•githubå…¶ä»–ä»“åº“ï¼Œä¸ç”¨ç§‘å­¦ä¸Šç½‘ï¼Œå¯ä»¥pushæˆåŠŸçš„ã€‚</strong></p><p>ç»ˆæè§£å†³æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># step1. ping github.com </span><br><span class="line">è·å–åˆ°github.comçš„ipä¸º192.30.252.128 </span><br><span class="line"># step2. åœ¨/etc/hostsä¸­æ·»åŠ ä¸€è¡Œå¦‚ä¸‹: </span><br><span class="line">sudo  vim /etc/hosts</span><br><span class="line">192.30.252.128 github.com</span><br></pre></td></tr></table></figure></p><p><a href="https://blog.csdn.net/piaotiejun/article/details/48734175" target="_blank" rel="noopener">å‚è€ƒ</a><br>ä¸€èˆ¬æƒ…å†µï¼Œä¸Šé¢å³å¯è§£å†³ï¼Œå¦‚æœè§£å†³ä¸äº†ï¼Œè€ƒè™‘ä¸‹é¢æ–¹æ³•ï¼š</p><p>é€ æˆä»¥ä¸ŠåŸå› ï¼Œæœ‰å¯èƒ½ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š<br>ç½‘ç»œè¢«å¢™äº†ï¼Ÿ<br>ä½¿ç”¨äº†å¼ºåˆ¶push â€“force ï¼ˆæ™®é€špushæ˜¯å¯ä»¥çš„ï¼‰</p><p>äº²æµ‹ä»¥ä¸‹å‡ ç§æ–¹å¼å¶å°”å¯ä»¥è§£å†³ï¼š</p><ul><li>ç§‘å­¦ä¸Šç½‘ï¼Œç„¶åpushï¼Œæ­¤æ–¹æ³•æœ‰æ—¶æœ‰æ•ˆï¼Œæœ‰æ—¶ä¹Ÿæ— æ•ˆï¼›</li><li>é‡è®¾è´¦å·å¯†ç ï¼š<br>ï¼ˆ1ï¼‰å…ˆé‡æ–°è®¾ç½®æœ¬æœºgité…ç½®ï¼šgit config â€“global credential.helper store ï¼ˆè¿™ä¸€æ­¥å¯ä»¥ä¸ç”¨ï¼‰<br>ï¼ˆ2ï¼‰è¾“å…¥githubè´¦å·å’Œå¯†ç  ï¼ˆè¿™ä¸€æ­¥å¯ä»¥ä¸ç”¨ï¼‰<br>ï¼ˆ3ï¼‰æœ€åpushä»£ç ï¼šgit push -u origin master ï¼ˆè¿™ä¸€æ­¥å¿…é¡»ï¼Œå¦‚æœæ˜¯å¼ºåˆ¶pushï¼ŒåŠ ä¸Š -fï¼‰</li></ul><p><a href="https://blog.csdn.net/mhs624014469/article/details/77124540?utm_source=blogxgwz3" target="_blank" rel="noopener">è¿™é‡Œè¿˜æœ‰å¦å¤–å‡ ç§è§£å†³æ–¹å¼</a></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å†³å®šæˆ¿ä»·çš„å› ç´ </title>
      <link href="/2020/05/01/house/"/>
      <url>/2020/05/01/house/</url>
      
        <content type="html"><![CDATA[<p>ç”±äºè¿‘å¹´æ¥ç»å¸¸è¢«å„ç§æˆ¿ä»·æ–°é—»æ··æ·†è§†å¬ï¼Œè¿™é‡Œå†™ä¸€ç‚¹å…³äºæˆ¿ä»·çš„è§è§£å’Œæ¢³ç†ï¼Œè®©è‡ªå·±ä¸è¢«æ–°é—»æ··æ·†ï¼Œä»¥ç¬”è®°çš„å½¢åŠ¿å†™çš„ï¼Œå†…å®¹æ ¼å¼è¯­è¨€ç²—ç³™äº†ç‚¹ã€‚</p><h2 id="æˆ¿ä»·åªäºä¾›ç»™ä¸éœ€æ±‚æœ‰å…³ã€‚"><a href="#æˆ¿ä»·åªäºä¾›ç»™ä¸éœ€æ±‚æœ‰å…³ã€‚" class="headerlink" title="æˆ¿ä»·åªäºä¾›ç»™ä¸éœ€æ±‚æœ‰å…³ã€‚"></a>æˆ¿ä»·åªäºä¾›ç»™ä¸éœ€æ±‚æœ‰å…³ã€‚</h2><p>ä¾›éœ€åˆç†æ—¶ï¼Œæˆ¿ä»·æ‰åˆç†ï¼Œä¾›éœ€ä¸åˆç†æ—¶çš„æˆ¿ä»·æ°¸è¿œæ˜¯ç—…æ€çš„ã€‚<br>å¸‚åœºä¸Šæˆ¿å­ä¾›åº”å……è¶³ï¼Œæˆ¿å­çš„éœ€æ±‚ä¹Ÿå¤§ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„æˆ¿ä»·å°±æ˜¯åˆç†çš„ä»·æ ¼ï¼Œæ­£å¸¸çš„ä¾›éœ€äº§ç”Ÿåˆç†çš„ä»·æ ¼ã€‚<br>å¦‚æœæˆ¿å­ä¾›åº”çŸ­ç¼ºï¼Œæˆ¿å­éœ€æ±‚å´å¤§ï¼Œé‚£ä¹ˆæ­¤æ—¶çš„æˆ¿ä»·å°±æ˜¯åé«˜ï¼›<br>å¦‚æœä¾›æ±‚å¤ªçŸ­ç¼ºï¼Œæˆ¿å­éœ€æ±‚è¿˜æ˜¯å¤§ï¼Œé‚£ä¹ˆå°±äº§ç”Ÿäº†ç—…æ€çš„ä»·æ ¼ã€‚<br>æ¯”å¦‚ç°åœ¨å¸‚åœºæ€¥ç¼º10ä¸‡å¥—æˆ¿å­ï¼Œè€Œåªå»ºäº†5000å¥—ï¼Œæ­¤æ—¶æˆ¿ä»·ä¸ç—…æ€æ‰æ€ªã€‚</p><h2 id="æˆ¿ä»·ä¸åœŸåœ°æ— å…³"><a href="#æˆ¿ä»·ä¸åœŸåœ°æ— å…³" class="headerlink" title="æˆ¿ä»·ä¸åœŸåœ°æ— å…³"></a>æˆ¿ä»·ä¸åœŸåœ°æ— å…³</h2><p>æˆ¿ä»·ä¸åœŸåœ°æ— å…³ï¼Œä¸ºä»€ä¹ˆè¿™æ ·è¯´ï¼Œæ¯”å¦‚åŒ—äº¬ï¼Œå…¶å®æœ‰å¾ˆå¤šåœ°æ–¹å¯ä»¥å»ºæˆ¿å­ï¼Œ<br>åŒ—äº¬é¢ç§¯16.5kå¹³æ–¹åƒç±³ï¼Œäººå£2154ä¸‡ï¼›<br>é¦™æ¸¯1.1kå¹³æ–¹åƒç±³ï¼Œäººå£748ä¸‡ï¼›<br>æŒ‰ç…§é¦™æ¸¯çš„å¯†åº¦å»ºæˆ¿å­ï¼š<br>åŒ—äº¬é¢ç§¯=16<em>é¦™æ¸¯é¢ç§¯ï¼›<br>åŒ—äº¬ç†è®ºå¯å®¹ä¸‹çš„äººå£=16</em>748ä¸‡=1.1968äº¿ï¼›<br>1.1968äº¿äººæ˜¯ä»€ä¹ˆæ¦‚å¿µï¼Œå…¨å›½äººå£æœ€å¤šçœæ˜¯å¹¿ä¸œçœï¼Œäººå£ä¹Ÿæ‰ 1.1346äº¿ï¼›<br>å°±ç®—å¹¿ä¸œçœæ‰€æœ‰çš„äººè·‘åˆ°åŒ—äº¬ï¼ŒåŒ—äº¬ä¸ä»…èƒ½å®¹å¾—ä¸‹ï¼Œè¿˜èƒ½å†å®¹600ä¸‡äººå£ï¼›<br>è€Œæ›´éœ‡æƒŠçš„æ˜¯é¦™æ¸¯åªå¼€å‘äº†25%çš„åœŸåœ°ï¼Œ<a href="http://www.ceweekly.cn/2014/0723/87935.shtml" target="_blank" rel="noopener">è¿˜æœ‰75%çš„åœŸåœ°è¢«æ¸¯åºœç¦æ­¢å¼€å‘</a>ã€‚<br>æ‰€ä»¥åŒ—äº¬ç°åœ¨çš„é¢ç§¯å¯å»ºçš„æˆ¿å±‹ï¼Œå¯å®¹ä¸‹çš„äººï¼Œè¿œä¸æ­¢1.19äº¿ï¼›<br>ä¸ºä»€ä¹ˆæœ‰è¿™ä¹ˆå¤šåœŸåœ°ï¼Œå´æ²¡æœ‰è¿™ä¹ˆå¤šæˆ¿å­å‘¢ï¼Ÿ<br>å°±æ˜¯æ²¡æœ‰å»ºçš„åŸå› ï¼Œä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆä¸å»ºï¼Œæˆ‘å°±ä¸å»ºæ€ä¹ˆäº†ï¼Œä½ å’¬æˆ‘å•Šã€‚<br>åœŸåœ°ä¸ç­‰äºæˆ¿å­ï¼Œä½ è¦åœ¨åœŸåœ°ä¸Šå»ºæˆ¿å­äº†ï¼Œé‚£æ‰ç­‰äºæˆ¿å­ã€‚<br>æ‰€ä»¥æˆ¿ä»·ä¸åœŸåœ°æ— å…³ï¼Œåªäºæˆ¿å­çš„ä¾›ç»™ï¼Œæˆ¿å­çš„å®é™…å­˜é‡æœ‰å…³ã€‚</p><h2 id="æˆ¿ä»·ä¸äººå£æ— å…³"><a href="#æˆ¿ä»·ä¸äººå£æ— å…³" class="headerlink" title="æˆ¿ä»·ä¸äººå£æ— å…³"></a>æˆ¿ä»·ä¸äººå£æ— å…³</h2><p>è¿™ä¸ªæœ‰æ·±å±‚æ¬¡åŸå› ï¼Œå…·ä½“ä¸ºï¼š</p><h3 id="æœªæ¥å‡ åå¹´ï¼Œå¤§åŸå¸‚äººå£å°†è¶Šæ¥è¶Šå¤šï¼Œä¸è¢«å…¨å›½äººå£å½±å“ï¼Œï¼š"><a href="#æœªæ¥å‡ åå¹´ï¼Œå¤§åŸå¸‚äººå£å°†è¶Šæ¥è¶Šå¤šï¼Œä¸è¢«å…¨å›½äººå£å½±å“ï¼Œï¼š" class="headerlink" title="æœªæ¥å‡ åå¹´ï¼Œå¤§åŸå¸‚äººå£å°†è¶Šæ¥è¶Šå¤šï¼Œä¸è¢«å…¨å›½äººå£å½±å“ï¼Œï¼š"></a>æœªæ¥å‡ åå¹´ï¼Œå¤§åŸå¸‚äººå£å°†è¶Šæ¥è¶Šå¤šï¼Œä¸è¢«å…¨å›½äººå£å½±å“ï¼Œï¼š</h3><p>ç°åœ¨å…¨å›½äººå£å‡ºç”Ÿç‡æ˜¯å‡å°‘äº†ï¼Œä½†å…·ä½“åˆ°ä¸€ä¸ªåŸå¸‚ï¼Œæ¯”å¦‚æ·±åœ³ï¼Œ<br>æ·±åœ³2019å¹´äººå£å‡€æµå…¥çº¦ä¸º50ä¸‡ï¼Œ<a href="https://city.shenchuang.com/city/20180524/1087719_2.shtml" target="_blank" rel="noopener">è€Œæ·±åœ³2019å¹´å»ºçš„æˆ¿å­ï¼Œä¹Ÿå°±5ä¸‡å¥—</a>ï¼Œ<br>è¿™æ ·ä¾›æ±‚å¤±è¡¡ï¼Œå¦‚ä½•ä¸å¯¼è‡´æˆ¿ä»·ç•¸å½¢ä¸Šå‡ã€‚<br>æ‰€ä»¥å…¨å›½äººå£æ— æ³•ä»£è¡¨äº†æŸä¸€ä¸ªåŸå¸‚çš„äººå£ï¼Œè¿›è€Œæ— å…³æˆ¿ä»·ã€‚</p><h3 id="æ”¹é©å¼€å‘ä¸‰åå‡ å¹´ç§¯ç´¯äº†å¾ˆå¤šè´­æˆ¿éœ€æ±‚æ²¡æœ‰å¾—åˆ°é‡Šæ”¾"><a href="#æ”¹é©å¼€å‘ä¸‰åå‡ å¹´ç§¯ç´¯äº†å¾ˆå¤šè´­æˆ¿éœ€æ±‚æ²¡æœ‰å¾—åˆ°é‡Šæ”¾" class="headerlink" title="æ”¹é©å¼€å‘ä¸‰åå‡ å¹´ç§¯ç´¯äº†å¾ˆå¤šè´­æˆ¿éœ€æ±‚æ²¡æœ‰å¾—åˆ°é‡Šæ”¾"></a>æ”¹é©å¼€å‘ä¸‰åå‡ å¹´ç§¯ç´¯äº†å¾ˆå¤šè´­æˆ¿éœ€æ±‚æ²¡æœ‰å¾—åˆ°é‡Šæ”¾</h3><p>å°±ç®—ä¸€ä¸ªåŸå¸‚äººå£ä¸å¢é•¿ï¼Œä½†æ˜¯2019å¹´ä¸ºæ­¢ï¼Œæ”¹é©å¼€æ”¾41å¹´ï¼Œåœ¨2008å¹´ä»¥å‰ï¼Œè¿›åŸåŠ¡å·¥çš„äººï¼Œåº”è¯¥æ²¡æœ‰å°†åŸå¸‚å½“ä½œå®¶ï¼Œåªæ˜¯å·¥ä½œå®Œå°±å›è€å®¶ï¼Œ<br>æ²¡æœ‰ä¹°æˆ¿ï¼Œç„¶è€Œéšç€æ—¶ä»£å‘å±•ï¼ŒåŸå¸‚çš„ä¼˜è¶Šæ€§è¶Šæ¥è¶Šçªå‡ºï¼Œå†œæ‘çš„ç¼ºç‚¹è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œå†œæ‘ä½œä¸ºä¸Šå¤æ—¶ä»£ä¸»è¦çš„äººå£èšé›†åœ°ï¼Œæ‚„ç„¶é™¨è½ï¼Œéšç€æ—¶ä»£çš„å‘å±•ï¼Œæ·˜æ±°å†œæ‘ä½œä¸ºä¸»è¦äººå£èšé›†åœ°å°†æ˜¯æ— æ³•é˜»æŒ¡çš„è¶‹åŠ¿ï¼Œç”šè‡³æç«¯åœ°è¯´ï¼Œæœªæ¥çš„å‘å±•ä¸­ï¼Œå†œæ‘è¿™ç§èšé›†æ–¹å¼å°†è¢«æ·˜æ±°ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åŸå¸‚ã€‚<br>éšç€å†œæ°‘è¿›åŸåŠ¡å·¥ï¼Œå‘ç°åŸå¸‚çš„ä¼˜è¶Šæ€§åï¼Œè¶Šæ¥è¶Šéš¾ä»¥å›åˆ°å†œæ‘ï¼Œäºæ˜¯äº§ç”Ÿäº†è´­æˆ¿éœ€æ±‚ã€‚è€Œè¿™ç§ç°è±¡å…¶å®ä¹Ÿå°±æ˜¯2008å¹´å‰åæ‰æ˜æ˜¾äº§ç”Ÿï¼Œåˆ°ç°åœ¨ä¸è¿‡åå¹´ã€‚<br>è€Œè¿™ä¸€ä»½è´­æˆ¿éœ€æ±‚çš„æ½œèƒ½æ˜¯ä»æ”¹é©å¼€å‘åˆ°2008å¹´å°±å¼€å§‹ç§¯ç´¯çš„ï¼Œç›´åˆ°2008å¹´å¤§å®¶æ‰å¼€å§‹æƒ³ç€å»ä¹°æˆ¿ï¼Œæ‰å»é‡Šæ”¾éœ€æ±‚ï¼Œå°±å¥½æ¯”æ”¹é©å¼€æ”¾40å¹´æ¥ï¼Œæœ‰è¶Šæ¥è¶Šå¤šçš„äººåˆ°åŸå¸‚ï¼Œè¿™ä¸ªäººå£çš„ç´¯è®¡èŠ±äº†40å¹´ï¼Œä»–ä»¬ä¸€ç›´æ²¡æœ‰ä¹°æˆ¿ï¼Œç›´åˆ°2008å¹´ï¼Œçªç„¶æƒ³ç€å»ä¹°æˆ¿ï¼Œåˆ°ç°åœ¨ä¹Ÿæ‰é‡Šæ”¾10å¹´æ—¶é—´ï¼Œæ‰€ä»¥åˆ°ç°åœ¨ï¼Œ2019å¹´ï¼Œå…¶å®æ˜¯ç´¯è®¡äº†å¾ˆå¤šå¹´çš„è´­æˆ¿éœ€æ±‚çš„ï¼Œå°±ç®—åŸå¸‚çš„äººå£ä¸å¢åŠ ï¼Œè´­æˆ¿çš„éœ€æ±‚è¿˜æ˜¯æœ‰çš„ã€‚</p><h3 id="åŸå¸‚ä¸­å¯¹æˆ¿å­å·²ç»å­˜åœ¨çš„éœ€æ±‚ç¼ºå£ä¸æˆ¿å­çš„æ„å»ºé€Ÿåº¦å¤ªæ‚¬æ®Š"><a href="#åŸå¸‚ä¸­å¯¹æˆ¿å­å·²ç»å­˜åœ¨çš„éœ€æ±‚ç¼ºå£ä¸æˆ¿å­çš„æ„å»ºé€Ÿåº¦å¤ªæ‚¬æ®Š" class="headerlink" title="åŸå¸‚ä¸­å¯¹æˆ¿å­å·²ç»å­˜åœ¨çš„éœ€æ±‚ç¼ºå£ä¸æˆ¿å­çš„æ„å»ºé€Ÿåº¦å¤ªæ‚¬æ®Š"></a>åŸå¸‚ä¸­å¯¹æˆ¿å­å·²ç»å­˜åœ¨çš„éœ€æ±‚ç¼ºå£ä¸æˆ¿å­çš„æ„å»ºé€Ÿåº¦å¤ªæ‚¬æ®Š</h3><p>æ¯”å¦‚åŒ—äº¬ï¼Œæˆ‘ä»¬å‡è®¾è¿˜éœ€è¦1000ä¸‡å¥—æˆ¿å­ï¼Œä½†æ˜¯æ¯å¹´åªç»™ä½ å»º5ä¸‡å¥—ï¼Œé‚£ä¹ˆè¿™ä¸ªç¼ºå£éœ€è¦ç­‰400å¹´æ‰èƒ½æ»¡è¶³ã€‚ç­‰400å¹´åï¼Œå»ºçš„æˆ¿å­æ‰å¤Ÿäººä»¬éœ€æ±‚ã€‚<br>è€Œç°å®å½“ä¸­ç°åœ¨åŸå¸‚ä¸­æˆ¿å­å·²ç»å­˜åœ¨çš„ç¼ºå£ä¸æˆ¿å­çš„æ„å»ºé€Ÿåº¦ï¼Œå¤ªæ‚¬æ®Šäº†ï¼Œå¯¹äºå¤§åŸå¸‚æˆ–çƒ­é—¨åŸå¸‚ï¼Œæ›´åŠ æ‚¬æ®Šï¼Œå°±ç®—äººå£è´Ÿå¢é•¿ï¼Œä»¥ç›®å‰æˆ¿å±‹å»ºé€ é€Ÿåº¦ï¼Œéƒ½éœ€è¦å‡ åå¹´ä¹ƒè‡³å‡ ç™¾å¹´æ‰èƒ½è¾¾åˆ°ä¾›éœ€å¹³è¡¡ã€‚<br>æ‰€ä»¥è¯´ï¼Œæˆ¿ä»·ä¸äººå£æ— å…³ï¼Œ</p><h3 id="åŸé•‡åŒ–ç‡ä¸é«˜å°†å‰Šå¼±äººå£è´Ÿå¢é•¿çš„å½±å“"><a href="#åŸé•‡åŒ–ç‡ä¸é«˜å°†å‰Šå¼±äººå£è´Ÿå¢é•¿çš„å½±å“" class="headerlink" title="åŸé•‡åŒ–ç‡ä¸é«˜å°†å‰Šå¼±äººå£è´Ÿå¢é•¿çš„å½±å“"></a>åŸé•‡åŒ–ç‡ä¸é«˜å°†å‰Šå¼±äººå£è´Ÿå¢é•¿çš„å½±å“</h3><p>ä¸­å›½ç°åœ¨çš„åŸé•‡åŒ–ç‡è¿˜æœ‰å¾…æé«˜ï¼Œå°±ç®—äººå£è´Ÿå¢é•¿ï¼Œä¹Ÿæ— æ³•é˜»æŒ¡åŸå¸‚äººå£è¶Šæ¥è¶Šå¤šï¼Œå†²æ·¡å…¨å›½äººå£å‡å°‘å¯¹åŸå¸‚æˆ¿ä»·çš„å½±å“ã€‚</p><h2 id="æˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³"><a href="#æˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³" class="headerlink" title="æˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³"></a>æˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³</h2><p>æˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³ï¼Œæ¯”å¦‚2008å¹´å›½å®¶é™ä»·åï¼Œ2009å¹´å‡ºç°æˆ¿ä»·æŠ¥å¤ä¸Šæ¶¨ï¼Œ2015å¹´é™è´­åï¼Œ2016å¹´æˆ¿ä»·å‡ºç°æŠ¥å¤ä¸Šæ¶¨ã€‚<br>å›½å®¶å¹²å‡€å¹¶æ²¡æœ‰æ”¹å˜ä¾›æ±‚å…³ç³»ï¼Œè€Œæ˜¯è®©ä¹°çš„äººä¸èƒ½ä¹°ï¼Œå–çš„äººæ— æ³•å–ï¼Œä»€ä¹ˆé™è´­é™ä»·ï¼Œéƒ½åªæ˜¯å¹²æ‰°äº†ä¹°å–ï¼›<br>è¿™è¿‡ç¨‹å½“ä¸­ï¼Œå›½å®¶å¹¶æ²¡æœ‰æ‰©å»ºæˆ¿å±‹ï¼Œæé«˜ä¾›åº”ï¼Œè€Œéœ€æ±‚çš„äººéšç€äº‹ä»¶æ¨ç§»è¶Šæ¥è¶Šå¤šï¼Œä½†è¶Šæ¥è¶Šä¸èƒ½ä¹°ï¼›<br>è¿™æ ·çš„åæœæ˜¯ï¼Œæˆ¿å±‹å°±100æ ‹ï¼Œé™è´­äº”å¹´ï¼Œç¬¬ä¸€å¹´éœ€æ±‚çš„äººæ˜¯1ä¸‡äººï¼Œç¬¬äºŒå¹´æ˜¯2ä¸‡äººï¼Œï¼Œï¼Œç¬¬äº”å¹´éœ€æ±‚çš„äººæ˜¯5ä¸‡äººï¼›<br>åˆ°ç¬¬äº”å¹´çš„æ—¶å€™ï¼Œç”±äºé™è´­ï¼Œæˆ¿å­ä¸€æ ‹ä¹Ÿæ²¡å–å‡ºå»ï¼Œä¹Ÿæ²¡æœ‰ä¸€ä¸ªäººèƒ½ä¹°åˆ°æˆ¿ï¼Œæˆ¿å­ä¾›åº”è¿˜æ˜¯100æ ‹ï¼›<br>å¥½äº†ï¼Œåˆ°ç¬¬äº”å¹´ä¸é™è´­çš„æ—¶å€™ï¼Œæˆ¿å­ä¾›åº”æ˜¯100å¥—ï¼Œéœ€æ±‚æ˜¯5ä¸‡å¥—ï¼Œè¿™äº›äººéƒ½åº”è¯¥ä¼šåƒé¥¿ç‹¼æ‰‘é£Ÿä¸€èˆ¬å§ï¼Œè¿™å°±æ˜¯å¯¼è‡´äº†æˆ¿ä»·æŠ¥å¤å¢é•¿äº†ã€‚<br>æ‰€ä»¥å›½å®¶å¹²é¢„åªæ˜¯æš‚åœäº†äº¤æ˜“ï¼Œå¹¶æ²¡æœ‰æ”¹å˜ä¾›æ±‚å…³ç³»ï¼Œå¹¶ä¸èƒ½æœ¬è´¨ä¸Šæ”¹å˜æˆ¿ä»·ã€‚</p><h2 id="é™è´­ä¸æˆ¿ä»·æŠ¥å¤æ€§ä¸Šæ¶¨"><a href="#é™è´­ä¸æˆ¿ä»·æŠ¥å¤æ€§ä¸Šæ¶¨" class="headerlink" title="é™è´­ä¸æˆ¿ä»·æŠ¥å¤æ€§ä¸Šæ¶¨"></a>é™è´­ä¸æˆ¿ä»·æŠ¥å¤æ€§ä¸Šæ¶¨</h2><p>æ¯å½“é™è´­ä¹‹æ—¶å¯¼è‡´è´­æˆ¿éœ€æ±‚ç´¯è®¡ï¼Œä¾›åº”ä¸å˜ï¼Œè§£è´­ä¹‹åï¼Œè¶Šæ¥è¶Šç•¸å½¢çš„ä¾›éœ€å…³ç³»å°†å¯¼è‡´æŠ¥å¤æ€§ä¸Šæ¶¨ï¼Œæ›´å¤šå‚è€ƒã€Šæˆ¿ä»·ä¸å›½å®¶å¹²é¢„æ— å…³ã€‹</p><h2 id="å¦‚ä½•åˆ¤æ–­æˆ¿ä»·æ˜¯å¦é«˜äº†"><a href="#å¦‚ä½•åˆ¤æ–­æˆ¿ä»·æ˜¯å¦é«˜äº†" class="headerlink" title="å¦‚ä½•åˆ¤æ–­æˆ¿ä»·æ˜¯å¦é«˜äº†"></a>å¦‚ä½•åˆ¤æ–­æˆ¿ä»·æ˜¯å¦é«˜äº†</h2><p>æˆ¿å­ä¾›éœ€å¹³è¡¡ï¼Œå°±è¯´æ˜æˆ¿ä»·åˆç†ï¼Œç›®å‰åŒ…æ‹¬é¦™æ¸¯ã€åŒ—ä¸Šå¹¿ã€‚ã€‚ã€‚ä¾›éœ€éƒ½ä¸å¹³è¡¡ï¼Œæˆ¿ä»·ä¾ç„¶è¿‡é«˜ã€‚</p><h2 id="ç›®å‰çš„æˆ¿ä»·æ˜¯å¦é«˜ï¼Œä»¥åŠå°†æ¥æˆ¿ä»·èµ°åŠ¿"><a href="#ç›®å‰çš„æˆ¿ä»·æ˜¯å¦é«˜ï¼Œä»¥åŠå°†æ¥æˆ¿ä»·èµ°åŠ¿" class="headerlink" title="ç›®å‰çš„æˆ¿ä»·æ˜¯å¦é«˜ï¼Œä»¥åŠå°†æ¥æˆ¿ä»·èµ°åŠ¿"></a>ç›®å‰çš„æˆ¿ä»·æ˜¯å¦é«˜ï¼Œä»¥åŠå°†æ¥æˆ¿ä»·èµ°åŠ¿</h2><p>ä»¥å½“å‰çš„ä¾›æ±‚å…³ç³»ï¼Œè¯´æ˜äº†æˆ¿ä»·è¿‡é«˜ï¼›<br>ç„¶è€Œåœ¨æœªæ¥ï¼Œä»¥ç›®å‰æˆ¿å±‹ä¾›åº”é€Ÿåº¦ï¼ŒåŠ ä¸Šéœ€æ±‚å¢é•¿ï¼Œä¾›æ±‚å…³ç³»åœ¨æœªæ¥å°†å˜å¾—è¶Šæ¥è¶Šç•¸å½¢ï¼Œ<br>å¿…ç„¶å¯¼è‡´æˆ¿ä»·å°†ç»§ç»­ä¸Šæ¶¨ï¼Œåœ¨æœªæ¥ï¼Œä¹°æˆ¿å°†è¶Šæ¥è¶Šå›°éš¾ï¼Œè‡³å°‘æ¯”ç°åœ¨æ›´å›°éš¾ã€‚</p><h2 id="å·¥èµ„ä¸Šæ¶¨èƒ½å¦è·‘è¿‡æˆ¿ä»·ä¸Šæ¶¨"><a href="#å·¥èµ„ä¸Šæ¶¨èƒ½å¦è·‘è¿‡æˆ¿ä»·ä¸Šæ¶¨" class="headerlink" title="å·¥èµ„ä¸Šæ¶¨èƒ½å¦è·‘è¿‡æˆ¿ä»·ä¸Šæ¶¨"></a>å·¥èµ„ä¸Šæ¶¨èƒ½å¦è·‘è¿‡æˆ¿ä»·ä¸Šæ¶¨</h2><p>æˆ¿ä»·åªäºä¾›æ±‚æœ‰å…³ï¼Œä¾›æ±‚å…³ç³»ä¸å˜ï¼Œå·¥èµ„è¶Šæ¶¨ï¼Œæˆ¿ä»·å°†æ›´åŠ å¢é•¿ï¼Œä»¥ç›®å‰çš„å½¢åŠ¿ï¼Œåœ¨æœªæ¥ï¼Œå·¥èµ„æ°¸è¿œè·‘ä¸è¿‡æˆ¿ä»·ã€‚</p><h2 id="é¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’"><a href="#é¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’" class="headerlink" title="é¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’"></a>é¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’</h2><p>97å¹´ï¼Œä¸ºäº†ç¼“è§£æˆ¿å±‹çŸ­ç¼ºï¼Œé¦™æ¸¯æ¨è¡Œå…«ä¸‡5è®¡åˆ’ï¼Œå»ºé€ 8ä¸‡5åƒå¥—æˆ¿å­ï¼Œç»“æœé­åå¯¹ï¼Œç‰¹åˆ«æ˜¯åœ°äº§å•†è¿”å›ï¼Œå¯¼è‡´è®¡åˆ’æç½®ã€‚<br>è™½ç„¶è®¡åˆ’æç½®äº†ï¼Œä½†æ˜¯å´æä¾›äº†è§£å†³ä½æˆ¿é—®é¢˜çš„æ€è·¯ã€‚</p><h2 id="è§£å†³ä½æˆ¿é—®é¢˜"><a href="#è§£å†³ä½æˆ¿é—®é¢˜" class="headerlink" title="è§£å†³ä½æˆ¿é—®é¢˜"></a>è§£å†³ä½æˆ¿é—®é¢˜</h2><p>ç”±ä¸Šé¢é¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’ï¼Œå¯ä»¥æ˜ å°„å‡ºï¼Œè¦è§£å†³ä½æˆ¿é—®é¢˜ï¼Œæœ€å¥½ç›´æ¥çš„åšæ³•æ˜¯å¢åŠ ä¾›åº”ï¼›<br>ç„¶è€Œå¢åŠ ä¾›åº”ï¼Œå°†å¯¼è‡´æˆ¿ä»·ä¸‹é™ï¼Œè¿›è€Œå¯¼è‡´åœŸåœ°è´¬å€¼ï¼›<br>å›½å®¶ç›®å‰æœ‰å¤ªå¤šè¦åŠçš„äº‹æƒ…ï¼Œå›½é™…å¤§ç¯å¢ƒä¸å¥½ï¼Œè´¸æ˜“æˆ˜ï¼Œè¾¹ç•Œå†²çªï¼Œé¢†åœŸçº çº·ï¼Œå›½é™…æ‰©å¼ ç­‰ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦å¾ˆå¤šé’±ï¼›<br>å› æ­¤å¤§å¹…å¢åŠ ä¾›åº”ï¼Œæ˜¯ä¸ä¼šåšçš„ï¼Œä½†ä¸ºäº†è§£å†³æ°‘ç”Ÿï¼Œæœªæ¥å¤§å¹…å¢åŠ å‡ºç§Ÿæˆ¿æ‰æ˜¯æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ³•ï¼Œ<br>å¢åŠ å‡ºç§Ÿæˆ¿ï¼Œå‡ºç§Ÿæˆ¿æ˜¯æ— æ³•ä¹°å–çš„ï¼Œä¸ä¼šå½±å“æˆ¿å±‹çš„ä¾›æ±‚å…³ç³»ï¼Œå°±ä¸ä¼šå½±å“æˆ¿ä»·ï¼Œå®Œç¾åœ°è§„é¿äº†ä¸æ—¢å¾—åˆ©ç›Šæˆ¿äº§é›†å›¢åˆ©ç›Šã€‚<br>å¦ä¸€æ–¹é¢ï¼Œå‡ºç§Ÿæˆ¿åˆèƒ½å®å®åœ¨è§£å†³ä½æˆ¿é—®é¢˜ï¼Œæ”¹å–„æ°‘ç”Ÿï¼Œä¸€ç®­åŒé›•ã€‚</p><h2 id="æœ‰ä¸€ä¸‡ç§æ‰‹æ®µä¿è¯åœŸåœ°ä¸è´¬å€¼"><a href="#æœ‰ä¸€ä¸‡ç§æ‰‹æ®µä¿è¯åœŸåœ°ä¸è´¬å€¼" class="headerlink" title="æœ‰ä¸€ä¸‡ç§æ‰‹æ®µä¿è¯åœŸåœ°ä¸è´¬å€¼"></a>æœ‰ä¸€ä¸‡ç§æ‰‹æ®µä¿è¯åœŸåœ°ä¸è´¬å€¼</h2><p>ç›®å‰çš„ä¾›æ±‚å…³ç³»å¤ªå¤±è¡¡ï¼Œä¸Šå±‚æ ¹æœ¬ä¸ç”¨æ‹…å¿ƒäººå£å‡å°‘ã€ç»æµç¯å¢ƒä¸å¥½å¯¼è‡´æˆ¿ä»·ä¸‹é™ï¼›<br>æ¯”å¦‚ç°åœ¨æˆ¿å±‹ç¼ºå£1000ä¸‡ï¼Œæ¯å¹´åªç»™ä½ å»º5ä¸‡æ ‹ï¼Œæˆ¿ä»·åªä¼šç­‰åˆ°400å¹´åé™ä½ï¼ŒåœŸåœ°ä»·æ ¼å½“ç„¶ä¹Ÿè¦ç­‰400å¹´åæ‰é™ä½ï¼›</p><h2 id="æ³•å®å°±æ˜¯é™åˆ¶ä¾›åº”"><a href="#æ³•å®å°±æ˜¯é™åˆ¶ä¾›åº”" class="headerlink" title="æ³•å®å°±æ˜¯é™åˆ¶ä¾›åº”"></a>æ³•å®å°±æ˜¯é™åˆ¶ä¾›åº”</h2><p>åªè¦ä¸ç»™ä½ ä¾›åº”æˆ¿å±‹ï¼Œæˆ–å¾ˆå°‘åœ°ä¾›åº”æˆ¿å±‹ï¼Œä»€ä¹ˆäººå£å‡å°‘ï¼Œç»æµä¸‹é™ï¼Œè¿™äº›éƒ½æ˜¯å±è¯ï¼Œéƒ½ä¸ä¼šå½±å“æˆ¿ä»·ä¸‹è·Œã€‚</p><h2 id="ç§Ÿæˆ¿"><a href="#ç§Ÿæˆ¿" class="headerlink" title="ç§Ÿæˆ¿"></a>ç§Ÿæˆ¿</h2><p><strong>æœ‰é’±ä¹°æˆ¿ï¼Œæ²¡é’±ç§Ÿæˆ¿ï¼Œè¿™æ‰æ˜¯æ­£é“</strong><br>è€ƒè™‘åˆ°å½“å‰å½¢åŠ¿ï¼Œè€ƒè™‘åˆ°å›½é™…å¤§ç¯å¢ƒï¼Œå›½å®¶è¦åšçš„äº‹æƒ…å¤ªå¤šï¼Œè¿™äº›éƒ½è¦æ±‚æˆ¿ä»·ç¨³å®šï¼Œæ‰€ä»¥å¦‚æœä½ æœ‰é’±ï¼Œå¯ä»¥è€ƒè™‘ä¹°å¥—æˆ¿ï¼›<br>å¦‚æœæ²¡é’±ï¼Œç§Ÿæˆ¿æ˜¯å¾ˆåˆ’ç®—çš„é€‰æ‹©ï¼Œè€Œä¸”å›½å®¶å½“å‰ç§Ÿæˆ¿ç›¸æ¯”å…¶ä»–å›½å®¶ï¼Œæ€§ä»·æ¯”è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚<br>å‚è€ƒã€‚ã€Šé¦™æ¸¯å…«ä¸‡äº”å»ºå±‹è®¡åˆ’ ä¸ è§£å†³æˆ¿å±‹é—®é¢˜ã€‹ã€Šè§£å†³ä½æˆ¿é—®é¢˜ã€‹</p><h2 id="å‡ ç§å½±å“æˆ¿ä»·çš„ç°è±¡"><a href="#å‡ ç§å½±å“æˆ¿ä»·çš„ç°è±¡" class="headerlink" title="å‡ ç§å½±å“æˆ¿ä»·çš„ç°è±¡"></a>å‡ ç§å½±å“æˆ¿ä»·çš„ç°è±¡</h2><h3 id="äººå£å‡€æµå…¥å¢å¤š"><a href="#äººå£å‡€æµå…¥å¢å¤š" class="headerlink" title="äººå£å‡€æµå…¥å¢å¤š"></a>äººå£å‡€æµå…¥å¢å¤š</h3><p>å¦‚æœä¸€ä¸ªåŸå¸‚äººå£å‡€æµå…¥å¢å¤šï¼Œæˆ¿ä»·åŸºæœ¬ä¼šä¸Šæ¶¨ã€‚</p><h3 id="åœŸåœ°æµæ‹"><a href="#åœŸåœ°æµæ‹" class="headerlink" title="åœŸåœ°æµæ‹"></a>åœŸåœ°æµæ‹</h3><p>åœŸåœ°æµæ‹ï¼Œè¯´æ˜æˆ¿åœ°äº§å•†ä¸æ„¿ç›–æˆ¿å­ï¼Œæˆ¿å­ä¾›åº”å°†å˜å°‘ï¼Œæœªæ¥å¯èƒ½æˆ¿ä»·çœ‹æ¶¨ï¼›</p><h3 id="æ£šæ”¹ä¸æ‹†è¿"><a href="#æ£šæ”¹ä¸æ‹†è¿" class="headerlink" title="æ£šæ”¹ä¸æ‹†è¿"></a>æ£šæ”¹ä¸æ‹†è¿</h3><p>å¦‚æœæ‹†è¿åï¼Œæ‹†ä¸€ä¸ªæˆ¿å­ç›–10ä¸ªæˆ¿å­ä¾›åº”å¸‚åœºï¼Œæˆ¿ä»·å°†ä¸‹é™ï¼Œå¦‚æœæ‹†ä¸€ä¸ªæˆ¿å­ï¼Œä¾›åº”ä¹Ÿå°±å¢åŠ ä¸€ä¸ªæˆ¿å­ï¼Œè¿™ä¸ªæˆ¿å­å°†è¢«æ‹†è¿æˆ·ä¹°ä¸‹ï¼Œå°†å¯¼è‡´æˆ¿ä»·æš´æ¶¨ã€‚</p><h2 id="åŸå¸‚ä¸ç¼ºåœŸåœ°å»ºæˆ¿å­"><a href="#åŸå¸‚ä¸ç¼ºåœŸåœ°å»ºæˆ¿å­" class="headerlink" title="åŸå¸‚ä¸ç¼ºåœŸåœ°å»ºæˆ¿å­"></a>åŸå¸‚ä¸ç¼ºåœŸåœ°å»ºæˆ¿å­</h2><p>ç›®å‰å„å¤§åŸå¸‚æœ¬è´¨ä¸Šä¸ç¼ºå»ºæˆ¿å­çš„åœŸåœ°ï¼ŒåœŸåœ°éƒ½æ˜¯å……è£•çš„ï¼Œç¼ºæ‰¹å‡†åœŸåœ°å»ºæˆ¿å­ã€‚</p><h2 id="å½©ç¤¼ä¸ç»“å©šéš¾é—®é¢˜"><a href="#å½©ç¤¼ä¸ç»“å©šéš¾é—®é¢˜" class="headerlink" title="å½©ç¤¼ä¸ç»“å©šéš¾é—®é¢˜"></a>å½©ç¤¼ä¸ç»“å©šéš¾é—®é¢˜</h2><p>æˆ¿å­ä¸ç»“å©šï¼Œç»“å©šä¸å¥³äººï¼Œè¿™éƒ½æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚<br>å½“å‰æœ€ç´§å¼ çš„ä¾›æ±‚å…³ç³»æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æˆ¿å±‹ä¾›æ±‚ï¼Œä¸€ä¸ªæ˜¯ç”·å¥³ä¾›æ±‚å¤±è¡¡ï¼›<br>æˆ¿å±‹ä¾›æ±‚çš„å¤±è¡¡å¯¼è‡´ç•¸å½¢æˆ¿ä»·ï¼Œå°šä¸”å¯é€šè¿‡ç§Ÿæˆ¿æ¥å¼¥è¡¥ï¼›<br>ä½†ç”·å¥³ä¾›æ±‚å…³ç³»å¤±è¡¡ï¼Œå°¤å…¶æ˜¯å¥³äººçš„ä¾›æ±‚å…³ç³»å¤±è¡¡(å¦‚æœæœ‰å†’çŠ¯äº†å¥³ç”Ÿï¼Œè¯·å¤šè§è°…)ï¼Œé—®é¢˜å°±ä¸å¥½å¤„ç†äº†ï¼›<br>ç”·å¥³æ€§åˆ«å¤±è¡¡ï¼Œè‡´å¥³äººæ›´åŠ é‡‘è´µï¼Œå¥³äººèº«ä»·é«˜äº†ï¼Œå°†è¢«æ•´ä¸ªç¤¾ä¼šå® åï¼Œ<br>ä¹Ÿå¯¼è‡´äº†å®¶åº­é—®é¢˜ï¼Œé“å¾·ä¼¦ç†é—®é¢˜ã€‚<br>åœ¨å¯é‡è§çš„å°†æ¥ï¼Œå…¶å®å½“å‰å·²ç»æ˜¾ç°ï¼Œç”·å¥³æ€§åˆ«çš„å¤±è¡¡ï¼Œé“å¾·ä¼¦ç†æ—¥ç›Šä¸¥é‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ä¹‹å¤– </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>htmlç¬”è®°</title>
      <link href="/2020/05/01/html/"/>
      <url>/2020/05/01/html/</url>
      
        <content type="html"><![CDATA[<h2 id="htmlçŸ¥è¯†"><a href="#htmlçŸ¥è¯†" class="headerlink" title="htmlçŸ¥è¯†"></a>htmlçŸ¥è¯†</h2><h3 id="htmlè¯­ä¹‰åŒ–"><a href="#htmlè¯­ä¹‰åŒ–" class="headerlink" title="htmlè¯­ä¹‰åŒ–"></a>htmlè¯­ä¹‰åŒ–</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>jsæœ‰è¯­ä¹‰åŒ–ï¼Œhtmlä¹Ÿæœ‰è¯­ä¹‰åŒ–ï¼Œ<br>HTMLçš„è¯­ä¹‰åŒ–å¼ºè°ƒä¸è¦éƒ½ä½¿ç”¨divï¼Œå»ºè®®ä½¿ç”¨header\footer\nav\section\input num\input emailâ€¦..</p><h4 id="æ„ä¹‰"><a href="#æ„ä¹‰" class="headerlink" title="æ„ä¹‰"></a>æ„ä¹‰</h4><h5 id="åˆ©äºé˜…è¯»ï¼›"><a href="#åˆ©äºé˜…è¯»ï¼›" class="headerlink" title="åˆ©äºé˜…è¯»ï¼›"></a>åˆ©äºé˜…è¯»ï¼›</h5><h5 id="åˆ©äºseo"><a href="#åˆ©äºseo" class="headerlink" title="åˆ©äºseo"></a>åˆ©äºseo</h5><h5 id="å“åº”ä¸åŒç§»åŠ¨ç«¯å¼¹æ¡†é”®ç›˜"><a href="#å“åº”ä¸åŒç§»åŠ¨ç«¯å¼¹æ¡†é”®ç›˜" class="headerlink" title="å“åº”ä¸åŒç§»åŠ¨ç«¯å¼¹æ¡†é”®ç›˜"></a>å“åº”ä¸åŒç§»åŠ¨ç«¯å¼¹æ¡†é”®ç›˜</h5><p>ç§»åŠ¨è®¾å¤‡ä¼šæ ¹æ®ä¸åŒçš„input å¦‚ä½•numberã€emailã€textã€passwordï¼›å¼¹å‡ºä¸åŒçš„é”®ç›˜ï¼Œè¿™æ˜¯å¾ˆå¤šç§»åŠ¨å¼€å‘ä½¿ç”¨inputè¯­ä¹‰åŒ–ç¼–å†™çš„é‡è¦åŸå› ã€‚</p><h3 id="inputå…ƒç´ ä¸ºä»€ä¹ˆç”¨è‡ªé—­åˆçš„å†™æ³•"><a href="#inputå…ƒç´ ä¸ºä»€ä¹ˆç”¨è‡ªé—­åˆçš„å†™æ³•" class="headerlink" title="inputå…ƒç´ ä¸ºä»€ä¹ˆç”¨è‡ªé—­åˆçš„å†™æ³•"></a>inputå…ƒç´ ä¸ºä»€ä¹ˆç”¨è‡ªé—­åˆçš„å†™æ³•</h3><p>å› ä¸ºinputä¸èƒ½å†åµŒå¥—å…¶ä»–å…ƒç´ ï¼Œæ‰€ä»¥ç”¨è‡ªé—­åˆçš„å†™æ³•ï¼ŒåŒæ ·çš„å…ƒç´ æœ‰ img br hr meta linkã€‚</p><h3 id="HTML4-XML-HTML5çš„å…³ç³»"><a href="#HTML4-XML-HTML5çš„å…³ç³»" class="headerlink" title="HTML4 XML HTML5çš„å…³ç³»"></a>HTML4 XML HTML5çš„å…³ç³»</h3><p>XMLå…¶å®å°±æ˜¯xhtmlã€‚<br>html4çš„å†™æ³•æ˜¯ä¸€ç§æ¯”è¾ƒå®½æ¾çš„å†™æ³•ï¼Œå®¹é”™æ€§é«˜ï¼Œä½ æ€ä¹ˆå†™ï¼ŒåŸºæœ¬ä¸Šæµè§ˆå™¨éƒ½ä¸æŠ¥é”™ï¼Œçº¦æŸæ€§ä¸å¼ºï¼›<br>ç¤¾åŒºä¸ºäº†å¯¹htmlçº¦æŸæ€§æ›´å¼ºï¼Œå› æ­¤äº§ç”Ÿäº†xhtmlï¼Œxhtmlçš„çº¦æŸæ€§å¾ˆå¼ºï¼Œä½†æ˜¯å¯¹å¼€å‘è€…ä¸å‹å¥½ï¼›<br>ç”±äºxmlçº¦æŸæ€§å¤ªå¼ºå¯¹å¼€å‘è€…å†™æ³•è¦æ±‚é«˜ï¼Œä¸å‹å¥½ï¼Œå› æ­¤é€æ¸è¢«ç¤¾åŒºæŠ›å¼ƒï¼Œé‡æ–°å›åˆ°html4ï¼Œå¹¶å› æ­¤äº§ç”Ÿäº†æ–°å¯¹æ ‡å‡† html5.</p><p>å› æ­¤html4å’Œhtml5ä¸€æ ·ï¼Œåªæ˜¯5çš„æ ‡ç­¾å’Œjs apiæ›´ä¸°å¯Œã€‚<br>xmlåˆ™ä¸htmlå·®åˆ«è¾ƒå¤§ï¼Œçº¦æŸå¼ºï¼Œç°åœ¨é€æ¸æ²¡æœ‰è¢«ä½¿ç”¨äº†ã€‚</p><h3 id="å€¼å¾—ä½¿ç”¨å…ƒç´ "><a href="#å€¼å¾—ä½¿ç”¨å…ƒç´ " class="headerlink" title="å€¼å¾—ä½¿ç”¨å…ƒç´ "></a>å€¼å¾—ä½¿ç”¨å…ƒç´ </h3><p>section article header footer</p><h3 id="è¯­ä¹‰åŒ–æ„ä¹‰"><a href="#è¯­ä¹‰åŒ–æ„ä¹‰" class="headerlink" title="è¯­ä¹‰åŒ–æ„ä¹‰"></a>è¯­ä¹‰åŒ–æ„ä¹‰</h3><ul><li>å¼€å‘è€…å®¹æ˜“ç†è§£</li><li>æœºå™¨å®¹æ˜“ç†è§£ç»“æ„ï¼Œå¦‚æœç´¢å’Œæ¯’å±è½¯ä»¶ï¼›</li><li>åˆ©äºseo<h3 id="htmlå’ŒDomçš„å…³ç³»"><a href="#htmlå’ŒDomçš„å…³ç³»" class="headerlink" title="htmlå’ŒDomçš„å…³ç³»"></a>htmlå’ŒDomçš„å…³ç³»</h3>Domæ˜¯ç”±æµè§ˆå™¨è§£æhtmlè§£æè€Œæ¥çš„ã€‚<h3 id="formçš„ä½œç”¨"><a href="#formçš„ä½œç”¨" class="headerlink" title="formçš„ä½œç”¨"></a>formçš„ä½œç”¨</h3></li><li>å¯ç›´æ¥è¿›è¡ŒGET POST æ–¹å¼ æäº¤è¡¨å•</li><li>å¯ä½¿ç”¨submit ï¼ resetæŒ‰é’® æäº¤è¡¨å•</li><li>ç¬¬ä¸‰æ–¹åº“å¯æ•´ä½“æå–formå€¼ï¼Œå¦‚jqã€‚</li><li>ç¬¬ä¸‰æ–¹åº“åªèƒ½é€šè¿‡formè¿›è¡Œè¡¨å•éªŒè¯ï¼Œä¾‹å¦‚angular åªèƒ½éªŒè¯formæ ‡ç­¾çš„è¡¨å•ã€‚</li></ul><h2 id="html-element"><a href="#html-element" class="headerlink" title="html element"></a>html element</h2><p>ç”±äºæ ‡ç­¾éhtml5æ–°æ ‡ç­¾ï¼Œä½†å…¶å±æ€§å¯èƒ½æ˜¯html5æ–°å±æ€§ï¼Œå› æ­¤æ ‡ç­¾ä¸åˆ†å¼€æˆhtmlä¸html5è®²ã€‚</p><h3 id="a"><a href="#a" class="headerlink" title="a"></a>a</h3><h4 id="downloadå±æ€§"><a href="#downloadå±æ€§" class="headerlink" title="downloadå±æ€§"></a>downloadå±æ€§</h4><p>å±äºhtml5ç‰¹æ€§ï¼Œé™¤ieä¸å…¼å®¹å¤–ï¼Œå…¶ä»–æµè§ˆå™¨éƒ½å¯å…¼å®¹ã€‚<br>é…ç½®downloadæ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼Œè¡¨æ˜aä¸æ˜¯ä¸€ä¸ªå¯¼èˆªurlï¼Œè€Œæ˜¯ä¸€ä¸ªä¸‹è½½æŒ‰é’®</p><h4 id="href-â€-topâ€-ä¸-href-â€-â€"><a href="#href-â€-topâ€-ä¸-href-â€-â€" class="headerlink" title="href=â€#topâ€ ä¸ href=â€#â€"></a>href=â€#topâ€ ä¸ href=â€#â€</h4><p>å±äºhtml5å±æ€§ï¼Œè¿”å›é¡µé¢é¡¶éƒ¨ã€‚</p><h4 id="mailto-åˆ›å»ºä¸€ä¸ªemailé“¾æ¥"><a href="#mailto-åˆ›å»ºä¸€ä¸ªemailé“¾æ¥" class="headerlink" title="mailto :åˆ›å»ºä¸€ä¸ªemailé“¾æ¥"></a>mailto :åˆ›å»ºä¸€ä¸ªemailé“¾æ¥</h4><p>è¿™æ˜¯å¸¸è§çš„åˆ›å»ºæŒ‰é’®æˆ–é“¾æ¥ï¼Œå°†ç”¨æˆ·çš„ç”µå­é‚®ä»¶ç¨‹åºæ‰“å¼€ï¼Œè®©ä»–ä»¬å‘é€æ–°é‚®ä»¶ã€‚è¿™æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ª<strong>mailto</strong>é“¾æ¥å®Œæˆçš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;mailto:nowhere@mozilla.org&quot;&gt;Send email to nowhere&lt;/a&gt;</span><br></pre></td></tr></table></figure></p><h4 id="tel-åˆ›å»ºç”µè¯é“¾æ¥"><a href="#tel-åˆ›å»ºç”µè¯é“¾æ¥" class="headerlink" title="tel :åˆ›å»ºç”µè¯é“¾æ¥"></a>tel :åˆ›å»ºç”µè¯é“¾æ¥</h4><p>è¿™æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ª<strong>tel</strong>é“¾æ¥å®Œæˆçš„<br>æä¾›ç”µè¯é“¾æ¥æœ‰åŠ©äºç”¨æˆ·æŸ¥çœ‹è¿æ¥åˆ°æ‰‹æœºçš„ç½‘ç»œæ–‡æ¡£å’Œç¬”è®°æœ¬ç”µè„‘ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;tel:+491570156&quot;&gt;+49 157 0156&lt;/a&gt;</span><br></pre></td></tr></table></figure></p><h3 id="inputä¸form"><a href="#inputä¸form" class="headerlink" title="inputä¸form"></a>inputä¸form</h3><h4 id="name-ä¸-form-ç»“åˆ"><a href="#name-ä¸-form-ç»“åˆ" class="headerlink" title="name ä¸ form ç»“åˆ"></a>name ä¸ form ç»“åˆ</h4><p>nameé…åˆsubmitï¼Œå†ç»“åˆformçš„actionä½¿ç”¨ã€‚<br>ç‚¹å‡»ä¸‹é¢çš„submitåï¼Œæµè§ˆå™¨è·³è½¬urlåˆ° /submit.action?firstname=Mickey&amp;lastname=Mouse<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;/submit.action&quot;&gt;</span><br><span class="line">     &lt;input type=&quot;text&quot; name=&quot;firstname&quot; value=&quot;Mickey&quot;&gt;</span><br><span class="line">     &lt;input type=&quot;text&quot; name=&quot;lastname&quot; value=&quot;Mouse&quot;&gt;</span><br><span class="line">     &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;</span><br><span class="line"> &lt;/form&gt;</span><br></pre></td></tr></table></figure></p><h3 id="base"><a href="#base" class="headerlink" title="base"></a>base</h3><p><code>&lt;base&gt;</code>å…ƒç´  æŒ‡å®šç”¨äºä¸€ä¸ªæ–‡æ¡£ä¸­åŒ…å«çš„æ‰€æœ‰ç›¸å¯¹ URL çš„æ ¹ URLã€‚ä¸€ä»½ä¸­åªèƒ½æœ‰ä¸€ä¸ª<code>&lt;base&gt;</code>å…ƒç´ ã€‚</p><h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><p><code>&lt;meta&gt;</code>å…ƒç´ è¡¨ç¤ºé‚£äº›ä¸èƒ½ç”±å…¶å®ƒHTML<strong>å…ƒ</strong>ç›¸å…³å…ƒç´  (<code>&lt;base&gt;, &lt;link&gt;, &lt;script&gt;, &lt;style&gt; æˆ– &lt;title&gt;</code>) ä¹‹ä¸€è¡¨ç¤ºçš„ä»»ä½•å…ƒæ•°æ®ä¿¡æ¯.</p><h3 id="caption"><a href="#caption" class="headerlink" title="caption"></a>caption</h3><p>æ ¹tableä¸€èµ·ä½¿ç”¨ï¼Œcaptionç”¨æ¥æ˜¾ç¤ºè¡¨æ ¼çš„æ ‡é¢˜</p><h3 id="del-ä¸-ins"><a href="#del-ä¸-ins" class="headerlink" title="del ä¸ ins"></a>del ä¸ ins</h3><p>delæ ‡ç­¾è¡¨ç¤ºä¸€äº›è¢«ä»æ–‡æ¡£ä¸­åˆ é™¤çš„æ–‡å­—å†…å®¹<br>inså…ƒç´ å®šä¹‰å·²ç»è¢«æ’å…¥æ–‡æ¡£ä¸­çš„æ–‡æœ¬(æ–‡å­—ä¸‹åˆ’çº¿æ•ˆæœ)ã€‚<br><figure class="image-box">                <img src="/image/html/del_ins.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">del,</span><br><span class="line">ins &#123;</span><br><span class="line">    display: block;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">del &#123;</span><br><span class="line">    background-color: #fbb;</span><br><span class="line">&#125;</span><br><span class="line">ins &#123;</span><br><span class="line">    background-color: #d4fcbc;</span><br><span class="line">&#125;</span><br><span class="line">del::before,</span><br><span class="line">ins::before &#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    left: .5rem;</span><br><span class="line">    font-family: monospace;</span><br><span class="line">&#125;</span><br><span class="line">del::before &#123;</span><br><span class="line">    content: &apos;âˆ’&apos;;</span><br><span class="line">&#125;</span><br><span class="line">ins::before &#123;</span><br><span class="line">    content: &apos;+&apos;;</span><br><span class="line">&#125;</span><br><span class="line">p &#123;</span><br><span class="line">    margin: 0 1.8rem 0;</span><br><span class="line">    font-family: Georgia, serif;</span><br><span class="line">    font-size: 1rem;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;p&gt;â€œYou&apos;re late!â€&lt;/p&gt;</span><br><span class="line">&lt;del&gt;</span><br><span class="line">    &lt;p&gt;â€œI apologize for the delay.â€&lt;/p&gt;</span><br><span class="line">&lt;/del&gt;</span><br><span class="line">&lt;ins cite=&quot;../howtobeawizard.html&quot; datetime=&quot;2018-05&quot;&gt;</span><br><span class="line">    &lt;p&gt;â€œA wizard is never late â€¦â€&lt;/p&gt;</span><br><span class="line">&lt;/ins&gt;</span><br></pre></td></tr></table></figure></p><h3 id="fieldset-ä¸-legend"><a href="#fieldset-ä¸-legend" class="headerlink" title="fieldset ä¸ legend"></a>fieldset ä¸ legend</h3><p>å…ƒç´ é€šå¸¸ç”¨æ¥å¯¹è¡¨å•ä¸­çš„æ§åˆ¶å…ƒç´ è¿›è¡Œåˆ†ç»„ï¼ŒäºŒè€…éœ€é…åˆä½¿ç”¨ï¼Œå¯ä»¥æ”¾åœ¨formä¸‹é¢ï¼Œä¹Ÿå¯ä»¥äºŒè€…é…åˆå•ç‹¬ä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;#&quot;&gt;</span><br><span class="line">  &lt;fieldset&gt;</span><br><span class="line">    &lt;legend&gt;Simple fieldset&lt;/legend&gt;</span><br><span class="line">    &lt;input type=&quot;radio&quot; id=&quot;radio&quot;&gt;</span><br><span class="line">    &lt;label for=&quot;radio&quot;&gt;Spirit of radio&lt;/label&gt;</span><br><span class="line">  &lt;/fieldset&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/html/fieldset.jpg" alt title class>                <p></p>            </figure><h3 id="hr"><a href="#hr" class="headerlink" title="hr"></a>hr</h3><p>å¯ä»¥æ¥åšåˆ†å‰²çº¿ï¼Œä¹Ÿå¯ä»¥åšåŒå±‚åˆ†å‰²çº¿ã€‚<br><figure class="image-box">                <img src="/image/html/hr.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">  This is the first paragraph of text.</span><br><span class="line">&lt;/p&gt;</span><br><span class="line">&lt;hr&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">  This is the second paragraph of text.</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure></p><h3 id="i"><a href="#i" class="headerlink" title="i"></a>i</h3><p><code>&lt;i&gt;</code>ç”¨äºè¡¨ç°å› æŸäº›åŸå› éœ€è¦åŒºåˆ†æ™®é€šæ–‡æœ¬çš„ä¸€ç³»åˆ—æ–‡æœ¬ã€‚ä¾‹å¦‚æŠ€æœ¯æœ¯è¯­ã€å¤–æ–‡çŸ­è¯­æˆ–æ˜¯å°è¯´ä¸­äººç‰©çš„æ€æƒ³æ´»åŠ¨ç­‰ï¼Œå®ƒçš„å†…å®¹é€šå¸¸ä»¥æ–œä½“æ˜¾ç¤ºã€‚<br>åœ¨html5 æ ‡å‡†ä¸­ï¼Œi å…ƒç´ æ›´å¤šè¢«ç”¨äºè¡¨ç¤ºiconã€‚</p><h3 id="optgroup"><a href="#optgroup" class="headerlink" title="optgroup"></a>optgroup</h3><p>ä¸ selecté…åˆä½¿ç”¨ï¼Œå¯åˆ›å»ºå¸¦åˆ†ç»„çš„optioné€‰é¡¹ï¼Œååˆ†å¥½ç”¨ï¼Œoptgroupæœ‰ä¸¤ä¸ªå±æ€§ï¼šlabelå’Œdisabledã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;select&gt;</span><br><span class="line">  &lt;optgroup label=&quot;Group 1&quot;&gt;</span><br><span class="line">    &lt;option&gt;Option 1.1&lt;/option&gt;</span><br><span class="line">  &lt;/optgroup&gt; </span><br><span class="line">  &lt;optgroup label=&quot;Group 2&quot;&gt;</span><br><span class="line">    &lt;option&gt;Option 2.1&lt;/option&gt;</span><br><span class="line">    &lt;option&gt;Option 2.2&lt;/option&gt;</span><br><span class="line">  &lt;/optgroup&gt;</span><br><span class="line">  &lt;optgroup label=&quot;Group 3&quot; disabled&gt;</span><br><span class="line">    &lt;option&gt;Option 3.1&lt;/option&gt;</span><br><span class="line">    &lt;option&gt;Option 3.2&lt;/option&gt;</span><br><span class="line">    &lt;option&gt;Option 3.3&lt;/option&gt;</span><br><span class="line">  &lt;/optgroup&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure></p><h3 id="option"><a href="#option" class="headerlink" title="option"></a>option</h3><p><code>&lt;option&gt;</code> ç”¨äºå®šä¹‰åœ¨<code>&lt;select&gt;,  &lt;optgroup&gt; æˆ–&lt;datalist&gt;</code>å…ƒç´ ä¸­åŒ…å«çš„é¡¹.<br>å±æ€§æœ‰ï¼š</p><ul><li>disabled</li><li>label</li><li>selected</li><li>value</li></ul><h3 id="pre"><a href="#pre" class="headerlink" title="pre"></a>pre</h3><p>å¯ä»¥å°†å­—ç¬¦é—´çš„ç©ºæ ¼éƒ½èƒ½å®Œæ•´ä¿ç•™ï¼Œéå¸¸ä¸é”™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;pre&gt;rrrrr iiii     &lt;/pre&gt;</span><br></pre></td></tr></table></figure></p><h3 id="small"><a href="#small" class="headerlink" title="small"></a>small</h3><p>å°‡ä½¿æ–‡æœ¬çš„å­—ä½“å˜å°ä¸€å·</p><h2 id="html5-elemnt"><a href="#html5-elemnt" class="headerlink" title="html5 elemnt"></a>html5 elemnt</h2><h3 id="datalist-åšå¯é€‰å€¼çš„è¾“å…¥æ¡†"><a href="#datalist-åšå¯é€‰å€¼çš„è¾“å…¥æ¡†" class="headerlink" title="datalist :åšå¯é€‰å€¼çš„è¾“å…¥æ¡†"></a>datalist :åšå¯é€‰å€¼çš„è¾“å…¥æ¡†</h3><p><strong>æ­¤element é™¤ç§»åŠ¨ç«¯çš„å®‰å“ä¸æ”¯æŒï¼ˆiosæ˜¯æ”¯æŒçš„ï¼‰ï¼Œpcå®Œç¾æ”¯æŒ</strong><br>inputé…åˆdatalist ä»¥åŠ optionä½¿ç”¨ï¼Œå¯åšå‡ºåŸç”Ÿçš„å¯é€‰å€¼è¾“å…¥æ¡†ï¼Œéå¸¸æ£’ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;label for=&quot;ice-cream-choice&quot;&gt;Choose a flavor:&lt;/label&gt;</span><br><span class="line">&lt;input list=&quot;ice-cream-flavors&quot; id=&quot;ice-cream-choice&quot; name=&quot;ice-cream-choice&quot; /&gt;</span><br><span class="line">&lt;datalist id=&quot;ice-cream-flavors&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;Chocolate&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;Coconut&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;Vanilla&quot;&gt;</span><br><span class="line">&lt;/datalist&gt;</span><br></pre></td></tr></table></figure></p><h3 id="details-ä¸-summary-åˆ›å»ºæŒ‚ä»¶"><a href="#details-ä¸-summary-åˆ›å»ºæŒ‚ä»¶" class="headerlink" title="details ä¸ summary :åˆ›å»ºæŒ‚ä»¶"></a>details ä¸ summary :åˆ›å»ºæŒ‚ä»¶</h3><p><strong>é™¤ieå¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒ</strong><br>äºŒè€…éœ€é…åˆä½¿ç”¨æ‰å¯è¾¾åˆ°åˆ›å»ºæŒ‚ä»¶toggleçš„æ•ˆæœ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;details&gt;</span><br><span class="line">    &lt;summary&gt;Details&lt;/summary&gt;</span><br><span class="line">    Something small enough to escape casual notice.</span><br><span class="line">&lt;/details&gt;</span><br></pre></td></tr></table></figure></p><h3 id="progress"><a href="#progress" class="headerlink" title="progress"></a>progress</h3><p><strong>å…¨éƒ¨å…¼å®¹ã€‚</strong><br>å¯ç”¨æ¥æ˜¾ç¤ºè¿›åº¦æ¡ã€‚ä¸ ä¸‹é¢çš„meterç›¸æ¯”ï¼Œå‰è€…æ˜¯åœ†è§’å½¢çŠ¶ï¼Œåè€…æ˜¯æ— åœ†è§’çš„é•¿æ–¹æ¡ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œprogressæ›´é€‚åˆè¿›åº¦æ¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;progress value=&quot;70&quot; max=&quot;100&quot;&gt;70 %&lt;/progress&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/html/progress.jpg" alt title class>                <p></p>            </figure><h3 id="meter"><a href="#meter" class="headerlink" title="meter"></a>meter</h3><p><strong>é™¤ieå¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒ(åŒ…å«edge)</strong><br>å¯ç”¨æ¥æ˜¾ç¤ºè¿›åº¦æ¡ã€‚<br><figure class="image-box">                <img src="/image/html/meter.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;meter id=&quot;fuel&quot; name=&quot;fuel&quot;</span><br><span class="line">       min=&quot;0&quot; max=&quot;100&quot;</span><br><span class="line">       low=&quot;33&quot; high=&quot;66&quot; optimum=&quot;80&quot;</span><br><span class="line">       value=&quot;81&quot;&gt;</span><br><span class="line">    at 50/100</span><br><span class="line">&lt;/meter&gt;</span><br></pre></td></tr></table></figure></p><h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><p><strong>é™¤ieå¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒ(åŒ…å«edge)</strong><br>outputä¸»è¦ä½œç”¨åœ¨äºä¸ç”¨jsï¼Œè‡ªåŠ¨è®¡ç®—å¤šä¸ªinputçš„å€¼ï¼Œå¹¶æ˜¾ç¤ºã€‚<br>output å¿…é¡»é…åˆformä½¿ç”¨ï¼Œä»¥ä¸‹ä»£ç è¦ç‚¹ï¼š<br>å®šä¹‰outputçš„nameä¸ºresult<br>åœ¨formä¸­å®šä¹‰äº‹ä»¶oninputï¼Œå¹¶å®šä¹‰result.value<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form oninput=&quot;result.value=parseInt(a.value)+parseInt(b.value)&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;range&quot; name=&quot;b&quot; value=&quot;50&quot; /&gt; +</span><br><span class="line">  &lt;input type=&quot;number&quot; name=&quot;a&quot; value=&quot;10&quot; /&gt; =</span><br><span class="line">  &lt;output name=&quot;result&quot;&gt;60&lt;/output&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/html/meter.jpg" alt title class>                <p></p>            </figure><h3 id="input-range"><a href="#input-range" class="headerlink" title="input range"></a>input range</h3><p><strong>æ‰€æœ‰æµè§ˆå™¨å…¼å®¹ï¼Œieæ”¯æŒåˆ°10</strong><br>å®šä¹‰åˆ’å—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;range&quot; id=&quot;cowbell&quot; name=&quot;cowbell&quot; </span><br><span class="line">         min=&quot;0&quot; max=&quot;100&quot; value=&quot;90&quot; step=&quot;10&quot;&gt;</span><br></pre></td></tr></table></figure></p><h3 id="s"><a href="#s" class="headerlink" title="s"></a>s</h3><p><strong>å…¨éƒ¨å…¼å®¹ã€‚</strong><br>ä¸<code>&lt;del&gt;</code>ä¸€æ ·ï¼Œéƒ½æ˜¯è¡¨ç¤ºåˆ é™¤çš„åˆ’çº¿æ•ˆæœï¼Œåªæ˜¯è¡¨ç¤ºå•çº¯çš„åˆ é™¤æ—¶å¯ç”¨<code>&lt;s&gt;</code>ï¼Œä½†æ˜¯è¡¨ç¤ºç¼–è¾‘ï¼ˆæœ‰åˆ é™¤å’Œæ·»åŠ æ—¶ï¼‰æ¨èç”¨delå’Œins<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;s&gt;There will be a few tickets available at the box office tonight.&lt;/s&gt;</span><br></pre></td></tr></table></figure></p><h3 id="sub-sup"><a href="#sub-sup" class="headerlink" title="sub sup"></a>sub sup</h3><p><strong>å…¼å®¹æ‰€æœ‰æµè§ˆå™¨</strong><br>åˆ†åˆ«ä»£è¡¨ä¸Šæ ‡å’Œä¸‹æ ‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Almost every developer&apos;s favorite molecule is</span><br><span class="line">  C&lt;sub&gt;8&lt;/sub&gt;H&lt;sub&gt;10&lt;/sub&gt;N&lt;sub&gt;4&lt;/sub&gt;O&lt;sub&gt;2&lt;/sub&gt;UU&lt;sup&gt;2&lt;/sup&gt;, also known as &quot;caffeine.&quot;&lt;/p&gt;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/html/sub.jpg" alt title class>                <p></p>            </figure><h2 id="HTMLå±æ€§"><a href="#HTMLå±æ€§" class="headerlink" title="HTMLå±æ€§"></a>HTMLå±æ€§</h2><p>ä»¥ä¸‹è®²çš„éƒ½æ˜¯å…¨å±€å±æ€§ï¼š</p><h3 id="contenteditable"><a href="#contenteditable" class="headerlink" title="contenteditable"></a>contenteditable</h3><p>è¡¨ç¤ºå…ƒç´ æ˜¯å¦å¯è¢«ç”¨æˆ·ç¼–è¾‘ã€‚ å¦‚æœå¯ä»¥ï¼Œæµè§ˆå™¨ä¼šä¿®æ”¹å…ƒç´ çš„éƒ¨ä»¶ä»¥å…è®¸ç¼–è¾‘ã€‚<br>è¯¥å±æ€§æ˜¯ä¸€ä¸ªæšä¸¾å±æ€§ï¼Œè€Œéå¸ƒå°”å±æ€§ã€‚<br>è¿™æ„å‘³ç€å¿…é¡»æ˜¾å¼è®¾ç½®å…¶å€¼ä¸º trueã€false æˆ–ç©ºå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªï¼Œå¹¶ä¸”ä¸å…è®¸ç®€å†™ä¸º <code>&lt;label contenteditable&gt;Example Label&lt;/label&gt;</code>æ­£ç¡®çš„ç”¨æ³•æ˜¯ <code>&lt;label contenteditable=&quot;true&quot;&gt;Example Label&lt;/label&gt;</code>ã€‚</p><h3 id="title"><a href="#title" class="headerlink" title="title"></a>title</h3><p>å¯ç”¨äºtooltipã€‚</p><h3 id="data"><a href="#data" class="headerlink" title="data-*"></a>data-*</h3><p>æ˜¯ä¸€ç±»è¢«ç§°ä¸ºè‡ªå®šä¹‰æ•°æ®å±æ€§çš„å±æ€§ï¼Œå®ƒèµ‹äºˆæˆ‘ä»¬åœ¨æ‰€æœ‰ HTML å…ƒç´ ä¸ŠåµŒå…¥è‡ªå®šä¹‰æ•°æ®å±æ€§çš„èƒ½åŠ›ï¼Œå¹¶å¯ä»¥é€šè¿‡è„šæœ¬(ä¸€èˆ¬æŒ‡JavaScriptï¼šä¾‹å¦‚é€šè¿‡ HTMLElement.datasetè·å–å±æ€§å€¼) ä¸ HTML ä¹‹é—´è¿›è¡Œä¸“æœ‰æ•°æ®çš„äº¤æ¢ã€‚</p><h4 id="HTMLElement-dataset"><a href="#HTMLElement-dataset" class="headerlink" title="HTMLElement.dataset"></a>HTMLElement.dataset</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;img class=&quot;spaceship cruiserX3&quot; src=&quot;shipX3.png&quot;</span><br><span class="line">  data-ship-id=&quot;324&quot; data-weapons=&quot;laserI laserII&quot; data-shields=&quot;72%&quot;</span><br><span class="line">  data-x=&quot;414354&quot; data-y=&quot;85160&quot; data-z=&quot;31940&quot;</span><br><span class="line">  onclick=&quot;spaceships[this.dataset.shipId].blasted()&quot;&gt;</span><br><span class="line">&lt;/img&gt;</span><br></pre></td></tr></table></figure><h4 id="css-ä¼ªå…ƒç´ -contentï¼šdataï¼ˆï¼‰"><a href="#css-ä¼ªå…ƒç´ -contentï¼šdataï¼ˆï¼‰" class="headerlink" title="css ä¼ªå…ƒç´  contentï¼šdataï¼ˆï¼‰"></a>css ä¼ªå…ƒç´  contentï¼šdataï¼ˆï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">attr(data-abc);</span><br></pre></td></tr></table></figure><h3 id="dir"><a href="#dir" class="headerlink" title="dir"></a>dir</h3><p>æ˜¯ä¸€ä¸ªæŒ‡ç¤ºå…ƒç´ ä¸­æ–‡æœ¬æ–¹å‘çš„æšä¸¾å±æ€§</p><h3 id="lang"><a href="#lang" class="headerlink" title="lang"></a>lang</h3><p>è¿™ä¸ªè¯­è¨€æ˜¯ä¸å¯ç¼–è¾‘å…ƒç´ å†™å…¥çš„è¯­è¨€ï¼Œæˆ–è€…å¯ç¼–è¾‘å…ƒç´ åº”è¯¥å†™å…¥çš„è¯­è¨€ã€‚<br>è®¾ç½®langè¯­è¨€æ—¶ï¼Œåœ¨æ–‡å­—å¼€å§‹ä½ç½®ä¼šæœ‰ä¸€ä¸ªå¯¹åº”è¯­è¨€çš„å›½æ——logo</p><h2 id="HTML5å±æ€§"><a href="#HTML5å±æ€§" class="headerlink" title="HTML5å±æ€§"></a>HTML5å±æ€§</h2><h3 id="tabindex"><a href="#tabindex" class="headerlink" title="tabindex"></a>tabindex</h3><p>tabindex æ˜¯html5å±æ€§ ï¼Œéå¸¸å¥½ç”¨ï¼Œ æŒ‡ç¤ºå…¶å…ƒç´ æ˜¯å¦å¯ä»¥èšç„¦,<br>åœ¨html4ä¸­ï¼Œä¸æ˜¯æ¯ä¸ªæ ‡ç­¾éƒ½æ‹¥æœ‰focuså±æ€§ï¼Œåœ¨html5ä¸­ï¼Œé€šè¿‡tabindexï¼Œæ¯ä¸ªæ ‡ç­¾éƒ½å¯ä»¥å®šä¹‰focuså±æ€§ã€‚<br>æ¯”å¦‚input textï¼Œå¯ç›´æ¥åœ¨inputå…ƒç´ å®šä¹‰onfocusï¼Œåœ¨ä»»æ„çš„divä¸­ï¼Œè¦æƒ³ä½¿ç”¨onfocusç­‰ï¼Œå®šä¹‰tabindexå°±å¯ä½¿ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div tabindex=&quot;0&quot;&gt;Tabbable due to tabindex.&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="draggable"><a href="#draggable" class="headerlink" title="draggable"></a>draggable</h3><p>æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹çš„å±æ€§ï¼Œç”¨äºæ ‡è¯†å…ƒç´ æ˜¯å¦å…è®¸ä½¿ç”¨ æ‹–æ”¾æ“ä½œAPI æ‹–åŠ¨ã€‚</p><h2 id="HTML5-API"><a href="#HTML5-API" class="headerlink" title="HTML5 API"></a>HTML5 API</h2><h3 id="FormData-ä¸-FileReader"><a href="#FormData-ä¸-FileReader" class="headerlink" title="FormData ä¸ FileReader"></a>FormData ä¸ FileReader</h3><p>FormData å°†æ•°æ®è¡¨å•åºåˆ—åŒ–ä»¥ä¾¿å¾—åˆ°å¯ä»¥ä½œä¸ºè¯·æ±‚çš„å‚æ•°;<br>FileReader è¯»å–æ–‡ä»¶ï¼Œæ¯”å¦‚å®ç°å›¾ç‰‡é¢„è§ˆï¼›<br>è¯¦ç»†å‚è€ƒã€Šæ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼ã€‹</p><h3 id="blob"><a href="#blob" class="headerlink" title="blob"></a>blob</h3><p>blobæƒ³è±¡èµ·æ¥å¤åˆ¶ï¼Œå…¶å®ä¹Ÿç®€å•ï¼Œç›®å‰å¯¹äºblobæ— éå°±æ˜¯æ–‡ä»¶ä¸‹è½½æˆ–è€…æ˜¯å›¾ç‰‡å±•ç¤ºä¸¤ç§è¿ç”¨ã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/response-file" target="_blank" rel="noopener">å‚è€ƒdemo</a></p><h4 id="blob-ä¸-FileReader"><a href="#blob-ä¸-FileReader" class="headerlink" title="blob ä¸ FileReader"></a>blob ä¸ FileReader</h4><p>FileReaderæ˜¯èƒ½å¤Ÿæ“ä½œblobçš„ä¸¤ç§æ–¹å¼ä¹‹ä¸€</p><h4 id="blob-ä¸-window-URL-createObjectURL"><a href="#blob-ä¸-window-URL-createObjectURL" class="headerlink" title="blob ä¸ window.URL.createObjectURL"></a>blob ä¸ window.URL.createObjectURL</h4><p>window.URLæ˜¯èƒ½å¤Ÿæ“ä½œblobçš„ä¸¤ç§æ–¹å¼ä¹‹ä¸€</p><h2 id="GlobalEventHandlers"><a href="#GlobalEventHandlers" class="headerlink" title="GlobalEventHandlers"></a>GlobalEventHandlers</h2><p>è¿™é‡Œçš„æµè§ˆå™¨ä¸»è¦æŒ‡ï¼šie edge è°·æ­Œ ç«ç‹ï¼Œæ³¨æ„ ie å’Œedgeæ˜¯åˆ†å¼€è®¨è®ºã€‚ä¸‹é¢è¯´åˆ°æ‰€æœ‰æµè§ˆå™¨æ—¶ï¼ŒæŒ‡çš„å°±æ˜¯è¿™é‡Œçš„å››ä¸ªæµè§ˆå™¨ã€‚</p><h3 id="å³å‡»-oncontextmenu"><a href="#å³å‡»-oncontextmenu" class="headerlink" title="å³å‡» oncontextmenu"></a>å³å‡» oncontextmenu</h3><p>ieä¸æ”¯æŒå¤–ï¼Œä¸è¿‡edgeæ”¯æŒï¼Œä¸”å…¶ä»–æµè§ˆå™¨éƒ½æ”¯æŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//åœ¨ä¸‹é¢divå³å‡»æ—¶ï¼Œå°±ä¼šæ‰§è¡Œconsole.log</span><br><span class="line"> &lt;div onclick=&quot;dd()&quot; oncontextmenu=&quot;console.log(123)&quot; class=&quot;aa left&quot;&gt;111&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h3 id="åŒå‡»-ondblclick"><a href="#åŒå‡»-ondblclick" class="headerlink" title="åŒå‡» ondblclick"></a>åŒå‡» ondblclick</h3><p>ieä¸æ”¯æŒå¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒã€‚</p><h3 id="é”™è¯¯-onerror"><a href="#é”™è¯¯-onerror" class="headerlink" title="é”™è¯¯ onerror"></a>é”™è¯¯ onerror</h3><p>ie edge æ”¯æŒå­˜ç–‘ï¼Œå…¶ä»–æ”¯æŒ<br>å¯ä»¥æ”¶é›†èŠ‚ç‚¹å…ƒç´ çš„é”™è¯¯ä¿¡æ¯ï¼ˆå‡ ä¹æ‰€æœ‰ç±»å‹é”™è¯¯éƒ½èƒ½æ”¶é›†ï¼‰ï¼Œé€šå¸¸ç”¨äºwindow.onerror()ï¼Œæ¥æ”¶é›†é”™è¯¯æŠ¥å‘Šï¼Œæ¯”è¾ƒæœ‰ç”¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">window.onerror = function (msg, url, lineNo, columnNo, error) &#123;</span><br><span class="line">    var string = msg.toLowerCase();</span><br><span class="line">    var substring = &quot;script error&quot;;</span><br><span class="line">    if (string.indexOf(substring) &gt; -1)&#123;</span><br><span class="line">   ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">window.onerror = function(message, source, lineno, colno, error) &#123; ... &#125;</span><br><span class="line">å‡½æ•°å‚æ•°ï¼š</span><br><span class="line">messageï¼šé”™è¯¯ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰ã€‚å¯ç”¨äºHTML onerror=&quot;&quot;å¤„ç†ç¨‹åºä¸­çš„eventã€‚</span><br><span class="line">sourceï¼šå‘ç”Ÿé”™è¯¯çš„è„šæœ¬URLï¼ˆå­—ç¬¦ä¸²ï¼‰</span><br><span class="line">linenoï¼šå‘ç”Ÿé”™è¯¯çš„è¡Œå·ï¼ˆæ•°å­—ï¼‰</span><br><span class="line">colnoï¼šå‘ç”Ÿé”™è¯¯çš„åˆ—å·ï¼ˆæ•°å­—ï¼‰</span><br></pre></td></tr></table></figure><h3 id="æŒ‰é”®down-onkeydown"><a href="#æŒ‰é”®down-onkeydown" class="headerlink" title="æŒ‰é”®down onkeydown"></a>æŒ‰é”®down onkeydown</h3><p>é™¤ieå­˜ç–‘å¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒã€‚<br>å¯ä»¥æ•è·æŒ‰é”®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const input = document.querySelector(&apos;input&apos;);</span><br><span class="line">input.onkeydown = logKey;</span><br><span class="line">function logKey(e) &#123;</span><br><span class="line">  console.log(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æŒ‰é”®up-onkeyup"><a href="#æŒ‰é”®up-onkeyup" class="headerlink" title="æŒ‰é”®up onkeyup"></a>æŒ‰é”®up onkeyup</h3><p>é™¤ieå­˜ç–‘å¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒã€‚<br>å¯ä»¥æ•è·æŒ‰é”® ç”¨æ³•åŒä¸Šé¢çš„ onkeydown</p><h3 id="onload"><a href="#onload" class="headerlink" title="onload"></a>onload</h3><p>æ‰€æœ‰æµè§ˆå™¨å…¨éƒ¨æ”¯æŒ<br>ç”¨äºå¤„ç†Window, XMLHttpRequest, <img> ç­‰å…ƒç´ çš„åŠ è½½äº‹ä»¶ï¼Œå½“èµ„æºå·²åŠ è½½æ—¶è¢«è§¦å‘ã€‚<br>æ³¨æ„ï¼Œä¸ä»…å¯ç”¨äºdomçš„onloadï¼Œè¿˜å¯ä»¥ç”¨äºajaxï¼Œimgçš„åŠ è½½ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">window.onload = function() &#123;</span><br><span class="line">  init();</span><br><span class="line">  doSomethingElse();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&lt;element onload=&quot;myScript&quot;&gt;</span><br><span class="line"></span><br><span class="line">object.onload = function()&#123;myScript&#125;;</span><br><span class="line"></span><br><span class="line">object.addEventListener(&quot;load&quot;, myScript);</span><br><span class="line"></span><br><span class="line">&lt;img src=&quot;w3javascript.gif&quot; onload=&quot;loadImage()&quot; width=&quot;100&quot; height=&quot;132&quot;&gt;</span><br><span class="line"></span><br><span class="line">var img = new Image();</span><br><span class="line">img.onload = function () &#123;</span><br><span class="line">   alert(&quot;image is loaded&quot;);</span><br><span class="line">&#125;</span><br><span class="line">img.src = &quot;img.jpg&quot;;</span><br></pre></td></tr></table></figure></p><p>åœ¨æ–‡æ¡£è£…è½½å®Œæˆåä¼šè§¦å‘  load äº‹ä»¶ã€‚æ­¤æ—¶ï¼Œåœ¨æ–‡æ¡£ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½åœ¨DOMä¸­ï¼Œæ‰€æœ‰å›¾ç‰‡ï¼Œè„šæœ¬ï¼Œé“¾æ¥ä»¥åŠå­æ¡†éƒ½å®Œæˆäº†è£…è½½ã€‚<br>åŒæ—¶ä¹Ÿä¼šæœ‰ Gecko-æŒ‡å®š DOMäº‹ä»¶ï¼Œå¦‚ DOMContentLoaded å’Œ DOMFrameContentLoaded (å®ƒä»¬å¯ä»¥ä½¿ç”¨ EventTarget.addEventListener() æ¥å¤„ç† ) ï¼Œ è¿™äº›äº‹ä»¶åœ¨é¡µé¢DOMæ„å»ºèµ·æ¥åå°±ä¼šè§¦å‘ï¼Œè€Œä¸ä¼šç­‰åˆ°å…¶ä»–çš„èµ„æºéƒ½è£…è½½å®Œæˆã€‚ </p><h3 id="onloadstart"><a href="#onloadstart" class="headerlink" title="onloadstart"></a>onloadstart</h3><p>æµè§ˆå™¨å…¨éƒ¨å…¼å®¹ï¼Œä¸è¿‡è°·æ­Œä¸­çš„imgæ ‡ç­¾ä¸æ”¯æŒunloadstartäº‹ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;myImage.jpg&quot;&gt;</span><br><span class="line">image.addEventListener(&apos;load&apos;, function(e) &#123;</span><br><span class="line">  console.log(&apos;Image loaded&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">image.addEventListener(&apos;loadstart&apos;, function(e) &#123;</span><br><span class="line">  console.log(&apos;Image load started&apos;);</span><br><span class="line">&#125;);</span><br><span class="line">image.addEventListener(&apos;loadend&apos;, function(e) &#123;</span><br><span class="line">  console.log(&apos;Image load finished&apos;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="é¼ æ ‡äº‹ä»¶-onmousedown-onmouseenter-onmouseleave-onmousemove-onmouseout-onmouseover-onmouseup"><a href="#é¼ æ ‡äº‹ä»¶-onmousedown-onmouseenter-onmouseleave-onmousemove-onmouseout-onmouseover-onmouseup" class="headerlink" title="é¼ æ ‡äº‹ä»¶ onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup"></a>é¼ æ ‡äº‹ä»¶ onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>æµè§ˆå™¨å…¨å…¼å®¹ã€‚<br>é¼ æ ‡ æŒ‰ä¸‹ã€æ¾å¼€ã€åˆ’è¿‡ã€åˆ’å‡ºã€åˆ’åŠ¨ã€ç¦»å¼€ç­‰ç­‰ï¼Œå„ç§é¼ æ ‡åŠ¨ä½œï¼Œåº”æœ‰å°½æœ‰ã€‚<br>èƒ½åšå‡ºçš„æ•ˆæœï¼š<br>å¦‚æ¨¡æ‹Ÿ hoverï¼Œä½†åšå‡ºæ¯”hoveræ›´é«˜çº§æ•ˆæœï¼›<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onmousedown" target="_blank" rel="noopener">å›¾ç‰‡æŒ‰ä½æ˜¾ç¤ºï¼ˆonmousedown onmousemove onmouseup ç¤ºä¾‹ï¼‰</a><br>å›¾ç‰‡é¼ æ ‡é€‰ä¸­åï¼Œæ”¾å¤§æ˜¾ç¤ºï¼›<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onmousemove" target="_blank" rel="noopener">è·Ÿéšé¼ æ ‡ï¼Œå®æ—¶æ˜¾ç¤º</a></p><h4 id="onmouseleave-ä¸-onmouseout-åŒºåˆ«"><a href="#onmouseleave-ä¸-onmouseout-åŒºåˆ«" class="headerlink" title="onmouseleave ä¸  onmouseout åŒºåˆ«"></a>onmouseleave ä¸  onmouseout åŒºåˆ«</h4><p>onmouseleave äº‹ä»¶ç±»ä¼¼äº onmouseout äº‹ä»¶ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ onmouseleave äº‹ä»¶ä¸æ”¯æŒå†’æ³¡ ï¼Œæ›´å¤šè¯´æ˜å‚è€ƒ<a href="https://www.runoob.com/jsref/event-onmouseleave.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a></p><h4 id="onmouseenter-ä¸-onmouseove-åŒºåˆ«"><a href="#onmouseenter-ä¸-onmouseove-åŒºåˆ«" class="headerlink" title="onmouseenter  ä¸ onmouseove åŒºåˆ«"></a>onmouseenter  ä¸ onmouseove åŒºåˆ«</h4><p>äºŒè€…åŒºåˆ«åŒ ã€Šonmouseleave ä¸  onmouseout åŒºåˆ«ã€‹ï¼Œè¯·å‚è€ƒ<a href="https://www.runoob.com/jsref/event-onmouseleave.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a>ã€‚</p><p>æ›´å¤šç¤ºä¾‹ <a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onmousemove" target="_blank" rel="noopener">è·Ÿéšé¼ æ ‡ï¼Œå®æ—¶æ˜¾ç¤º</a><br>ç¤ºä¾‹ä¸­çš„æ–¹æ¡ˆåº”è¯¥å¯ä»¥å®ç°æ·˜å®é¡µé¢ä¸­çš„ å›¾ç‰‡é¼ æ ‡åˆ’åŠ¨ï¼Œæ”¾å¤§æ˜¾ç¤ºï¼›</p><h4 id="åŒºåˆ«ä½¿ç”¨onmouseleaveä¸onmouseoutå¾ˆé‡è¦"><a href="#åŒºåˆ«ä½¿ç”¨onmouseleaveä¸onmouseoutå¾ˆé‡è¦" class="headerlink" title="åŒºåˆ«ä½¿ç”¨onmouseleaveä¸onmouseoutå¾ˆé‡è¦"></a>åŒºåˆ«ä½¿ç”¨onmouseleaveä¸onmouseoutå¾ˆé‡è¦</h4><p>äºŒè€…è¡¨è¾¾æ„æ€è™½ä¸€æ ·ï¼Œä½†leaveåªè§¦å‘ä¸€æ¬¡ï¼Œoutä¼šè§¦å‘å¤šæ¬¡ï¼Œå› æ­¤ä¸€å®šè¦åŒºåˆ«ä½¿ç”¨ï¼Œé¿å…ä»£ç å¤šä½™æ‰§è¡Œã€‚<br>onmouseenter  ä¸ onmouseoveåŒç†ã€‚<br>è¯¦è§ <a href="https://www.runoob.com/jsref/event-onmouseleave.html" target="_blank" rel="noopener">èœé¸Ÿæ•™ç¨‹</a>ä¸­çš„ä¾‹å­ã€‚</p><h3 id="onscroll"><a href="#onscroll" class="headerlink" title="onscroll"></a>onscroll</h3><p>ieå­˜ç–‘å¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const textarea = document.querySelector(&apos;textarea&apos;);</span><br><span class="line">const log = document.getElementById(&apos;log&apos;);</span><br><span class="line">textarea.onscroll = logScroll;</span><br><span class="line">function logScroll(e) &#123;</span><br><span class="line">  log.textContent = `Scroll position: $&#123;e.target.scrollTop&#125;`;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="onselect"><a href="#onselect" class="headerlink" title="onselect"></a>onselect</h3><p>ieå­˜ç–‘å¤–ï¼Œå…¶ä»–éƒ½æ”¯æŒ<br>åªæœ‰åœ¨æ–‡æœ¬æ¡†å’Œæ–‡æœ¬åŸŸå†…é€‰æ‹©æ–‡æœ¬æ‰ä¼šè§¦å‘selectäº‹ä»¶.<br>éå¸¸å¥½ç”¨çš„äº‹ä»¶ï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onselect" target="_blank" rel="noopener">demo</a>ï¼›<br>åœ¨è¾“å…¥æ¡†å†…é€‰ä¸­ä¸€æ®µæ–‡å­—ï¼Œä¼šå°†è¿™æ®µæ–‡å­—æ•è·ä½œä¸ºå‚æ•°ã€‚</p><h3 id="è¡¨å•äº‹ä»¶-onreset-onsubmit"><a href="#è¡¨å•äº‹ä»¶-onreset-onsubmit" class="headerlink" title="è¡¨å•äº‹ä»¶ onreset onsubmit"></a>è¡¨å•äº‹ä»¶ onreset onsubmit</h3><p>è¡¨å•é‡ç½®ã€è¡¨å•æäº¤ã€‚</p><h3 id="onwheel"><a href="#onwheel" class="headerlink" title="onwheel"></a>onwheel</h3><p>æ‰€æœ‰æµè§ˆå™¨å…¨éƒ¨æ”¯æŒï¼›<br>onwheel ç‰¹æ€§æŒ‡å‘å½“å‰å…ƒç´ çš„æ»‘è½®æ»‘åŠ¨äº‹ä»¶å‡½æ•° EventHandlerã€‚<br>å½“åŒæŒ‡åˆ’åŠ¨æ—¶ï¼Œä¼šè§¦å‘onwheelï¼š<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onwheel" target="_blank" rel="noopener">åŒæŒ‡ç¼©æ”¾æ˜¾ç¤º demo</a></p><h3 id="æ‹–æ‹½äº‹ä»¶-ondrag-ondragend-ondrop-ondragstart-ondragover-ondragleave-ondragexit"><a href="#æ‹–æ‹½äº‹ä»¶-ondrag-ondragend-ondrop-ondragstart-ondragover-ondragleave-ondragexit" class="headerlink" title="æ‹–æ‹½äº‹ä»¶ ondrag ondragend ondrop ondragstart ondragover ondragleave ondragexit"></a>æ‹–æ‹½äº‹ä»¶ ondrag ondragend ondrop ondragstart ondragover ondragleave ondragexit</h3><p>æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒ</p><h4 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å‚è€ƒ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API" target="_blank" rel="noopener">æ‹–æ”¾ API</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dragondragå½“æ‹–åŠ¨å…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬æ—¶è§¦å‘ã€‚</span><br><span class="line">dragendondragendå½“æ‹–æ‹½æ“ä½œç»“æŸæ—¶è§¦å‘ (æ¯”å¦‚æ¾å¼€é¼ æ ‡æŒ‰é”®æˆ–æ•²â€œEscâ€é”®). (è§ç»“æŸæ‹–æ‹½)</span><br><span class="line">dragenterondragenterå½“æ‹–åŠ¨å…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬åˆ°ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡æ—¶è§¦å‘ï¼ˆè§ æŒ‡å®šé‡Šæ”¾ç›®æ ‡ï¼‰ã€‚</span><br><span class="line">dragexitondragexitå½“å…ƒç´ å˜å¾—ä¸å†æ˜¯æ‹–åŠ¨æ“ä½œçš„é€‰ä¸­ç›®æ ‡æ—¶è§¦å‘ã€‚</span><br><span class="line">dragleaveondragleaveå½“æ‹–åŠ¨å…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬ç¦»å¼€ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡æ—¶è§¦å‘ã€‚</span><br><span class="line">dragoverondragoverå½“å…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬è¢«æ‹–åˆ°ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡ä¸Šæ—¶è§¦å‘ï¼ˆæ¯100æ¯«ç§’è§¦å‘ä¸€æ¬¡ï¼‰ã€‚</span><br><span class="line">dragstartondragstartå½“ç”¨æˆ·å¼€å§‹æ‹–åŠ¨ä¸€ä¸ªå…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬æ—¶è§¦å‘ï¼ˆè§å¼€å§‹æ‹–åŠ¨æ“ä½œï¼‰ã€‚</span><br><span class="line">dropondropå½“å…ƒç´ æˆ–é€‰ä¸­çš„æ–‡æœ¬åœ¨å¯é‡Šæ”¾ç›®æ ‡ä¸Šè¢«é‡Šæ”¾æ—¶è§¦å‘ï¼ˆè§æ‰§è¡Œé‡Šæ”¾ï¼‰ã€‚</span><br></pre></td></tr></table></figure></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/ondrag" target="_blank" rel="noopener">ç›´æ¥çœ‹mdn demo,å¯¹åº”apiéƒ½æœ‰demo</a></p><h4 id="drapä¸mouse"><a href="#drapä¸mouse" class="headerlink" title="drapä¸mouse"></a>drapä¸mouse</h4><p>drapç›¸å…³äº‹ä»¶ä¸ä¸Šé¢çš„mouseäº‹ä»¶ç›¸ä¼¼ï¼›<br>åªä¸è¿‡ï¼Œmouseäº‹ä»¶æ˜¯å°†é¼ æ ‡å…‰æ ‡ç§»åŠ¨åˆ°elementåŒºåŸŸè§¦å‘ï¼›drapæ˜¯å°†æ‹–æ‹½çš„elementç§»åŠ¨åˆ°elementåŒºåŸŸè§¦å‘ï¼›<br>å°†æ‹–æ‹½çš„elementçœ‹æˆæ˜¯å…‰æ ‡ï¼Œé‚£ä¹ˆdrapä¸mouseç†è§£èµ·æ¥å°±å·®ä¸å¤šä¸€æ ·äº†ã€‚</p><h4 id="drap-ä¸-event-dataTransfer-setData"><a href="#drap-ä¸-event-dataTransfer-setData" class="headerlink" title="drap ä¸ event.dataTransfer.setData"></a>drap ä¸ event.dataTransfer.setData</h4><p>éå¸¸å¥½çš„æ•°æ®ä¼ è¾“æ–¹æ³•ï¼Œdrapäº‹ä»¶çš„eventå¯¹è±¡éƒ½æœ‰dataTransfer APIã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function dragstart_handler(ev) &#123;</span><br><span class="line"> console.log(&quot;dragStart&quot;);</span><br><span class="line"> ev.dataTransfer.setData(&quot;text&quot;, ev.target.id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function drop_handler(ev) &#123;</span><br><span class="line"> console.log(&quot;Drop&quot;);</span><br><span class="line"> ev.currentTarget.style.background = &quot;lightyellow&quot;;</span><br><span class="line"></span><br><span class="line"> ev.preventDefault();</span><br><span class="line"> var data = ev.dataTransfer.getData(&quot;text&quot;);</span><br><span class="line"> ev.target.appendChild(document.getElementById(data));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/ondrag" target="_blank" rel="noopener">ç›´æ¥çœ‹mdn demo,å¯¹åº”apiéƒ½æœ‰demo</a></p><h2 id="åº”ç”¨demo"><a href="#åº”ç”¨demo" class="headerlink" title="åº”ç”¨demo"></a>åº”ç”¨demo</h2><h3 id="æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼"><a href="#æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼"></a>æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼</h3><p><a href="https://github.com/YeWills/file-upload" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒdemo</a></p><h4 id="type-text-input-è·å–fileçš„ä¸‰ç§æ–¹å¼ï¼š"><a href="#type-text-input-è·å–fileçš„ä¸‰ç§æ–¹å¼ï¼š" class="headerlink" title="type=text input è·å–fileçš„ä¸‰ç§æ–¹å¼ï¼š"></a>type=text input è·å–fileçš„ä¸‰ç§æ–¹å¼ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//domå…ƒç´ ç›´æ¥è·å–</span><br><span class="line"> document.getElementById(&quot;chooseFile&quot;).files[0];</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//changeäº‹ä»¶</span><br><span class="line">  var file = document.querySelector(&apos;#file&apos;);</span><br><span class="line">  file.addEventListener(&apos;change&apos;, previewImage, false);</span><br><span class="line">  function previewImage(event) &#123;</span><br><span class="line">      event.target.files[0]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//formData æ–¹å¼</span><br><span class="line">&lt;form enctype=&quot;multipart/form-data&quot; method=&quot;post&quot; name=&quot;fileinfo&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;file&quot; name=&quot;fileName&quot; required /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">var form = document.forms.namedItem(&quot;fileinfo&quot;);</span><br><span class="line">var oData = new FormData(form);</span><br><span class="line">var file = oData.get(&apos;fileName&apos;)</span><br></pre></td></tr></table></figure><h4 id="drag-è·å–fileæ–¹å¼ï¼š"><a href="#drag-è·å–fileæ–¹å¼ï¼š" class="headerlink" title="drag è·å–fileæ–¹å¼ï¼š"></a>drag è·å–fileæ–¹å¼ï¼š</h4><p>å‚è€ƒï¼šdrap_file\dragInfo.html<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">evt.dataTransfer.files</span><br></pre></td></tr></table></figure></p><h4 id="ä¸Šä¼ è¿‡ç¨‹ï¼š"><a href="#ä¸Šä¼ è¿‡ç¨‹ï¼š" class="headerlink" title="ä¸Šä¼ è¿‡ç¨‹ï¼š"></a>ä¸Šä¼ è¿‡ç¨‹ï¼š</h4><p>é€‰æ‹©æ–‡ä»¶ã€é¢„è§ˆã€ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€æœåŠ¡å™¨ä¸Šä¼ è¿›åº¦ã€æœåŠ¡å™¨ä¸Šä¼ æˆåŠŸ</p><h4 id="FormDataä¸æ–‡ä»¶ä¸Šä¼ "><a href="#FormDataä¸æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="FormDataä¸æ–‡ä»¶ä¸Šä¼ "></a>FormDataä¸æ–‡ä»¶ä¸Šä¼ </h4><p>æ–‡ä»¶ä¸Šä¼ å¿…é¡»è¦ä½¿ç”¨FormDataå¯¹æ–‡ä»¶æµè¿›è¡Œè¡¨å•åºåˆ—åŒ–ï¼Œè¿™æ ·æ‰å¯ä»¥è¢«æœåŠ¡å™¨ç«¯è§£æã€‚<br>ä¸‹é¢æ˜¯ä¸‰ç§æœåŠ¡å™¨ç«¯ä¸Šä¼ å›¾ç‰‡çš„ç¤ºä¾‹ï¼Œæ¯ç§ç¤ºä¾‹éƒ½ä½¿ç”¨äº†formDataè¿›è¡Œæ–‡ä»¶æµè¡¨æ ¼åºåˆ—åŒ–ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var formData = new FormData();</span><br><span class="line">formData.append(&apos;test-upload&apos;, file.files[0]);</span><br><span class="line">xhr.upload.onprogress = setProgress;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">let file = document.getElementById(&quot;chooseFile&quot;).files[0];</span><br><span class="line">let formData = new FormData();</span><br><span class="line">formData.append(&quot;avatar&quot;, file);</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    type: &apos;POST&apos;,</span><br><span class="line">    url: &apos;/profile&apos;,</span><br><span class="line">    data: formData,</span><br><span class="line">    async: false,</span><br><span class="line">    cache: false,</span><br><span class="line">    contentType: false,</span><br><span class="line">    processData: false,</span><br><span class="line">    success: function (data) &#123;</span><br><span class="line">        $(&quot;.newImg&quot;).attr(&quot;src&quot;, data.filePath);</span><br><span class="line">    &#125;,</span><br><span class="line">    error: function (err) &#123;</span><br><span class="line">        console.log(err.message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&apos;post&apos; action=&apos;/profile&apos; enctype=&apos;multipart/form-data&apos;&gt;</span><br><span class="line">   é€‰æ‹©å›¾ç‰‡ï¼š&lt;input name=&quot;avatar&quot; id=&apos;upfile&apos; type=&apos;file&apos;/&gt;</span><br><span class="line">   &lt;input type=&apos;submit&apos; value=&apos;æäº¤&apos;/&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><h4 id="multerä¸æ–‡ä»¶ä¸Šä¼ "><a href="#multerä¸æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="multerä¸æ–‡ä»¶ä¸Šä¼ "></a>multerä¸æ–‡ä»¶ä¸Šä¼ </h4><p>expressï¼Œæ”¶åˆ°å‰å°çš„ä¸Šä¼ è¯·æ±‚åï¼Œå› ä¸ºä¸Šä¼ æ–‡ä»¶çš„è¯·æ±‚æ—¶ä¸€ä¸ªå¤šç±»å‹æ–‡ä»¶æ•°æ®(multipart/form-data)è¯·æ±‚ï¼Œ<br>å¿…é¡»é€šè¿‡require(â€˜multerâ€™)æ‰èƒ½æ­£å¸¸å¤„ç†è¿™æ ·çš„è¯·æ±‚ã€‚<br>multerå°±æ˜¯ä¸ºäº† å¤„ç†å¤šæ–‡ä»¶æ¥å£è€Œç”Ÿã€‚</p><h4 id="ä¸Šä¼ æŠ€æœ¯è¯´æ˜"><a href="#ä¸Šä¼ æŠ€æœ¯è¯´æ˜" class="headerlink" title="ä¸Šä¼ æŠ€æœ¯è¯´æ˜"></a>ä¸Šä¼ æŠ€æœ¯è¯´æ˜</h4><p>FileReader å®ç°å›¾ç‰‡é¢„è§ˆ<br>é€šè¿‡FormDataå°†fileè¡¨æ ¼åºåˆ—åŒ–ï¼Œè¿™æ ·æ‰èƒ½è¢«postæ¡†æ¶æ¥æ”¶ä¸ºå‚æ•°ï¼Œä¼ ç»™åå°ï¼Œå¹¶è¢«åå°è¯†åˆ«ï¼›<br>ä¸Šä¼ çš„è¿›åº¦æ¡å’ŒæˆåŠŸå¤„ç†é€šè¿‡postæ¡†æ¶çš„ç›¸å…³äº‹ä»¶åšï¼š<br>ä»¥åŸç”Ÿä¸ºä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xhr.onload = uploadSuccess; //æˆåŠŸå¤„ç†</span><br><span class="line">xhr.upload.onprogress = setProgress;  //è¿›åº¦å¤„ç†</span><br></pre></td></tr></table></figure></p><p>åå°expressï¼Œæ”¶åˆ°å‰å°çš„ä¸Šä¼ è¯·æ±‚åï¼Œé€šè¿‡ä¸­é—´ä»¶multerå¤„ç†åï¼Œé€šè¿‡fsè¯»å–æ•°æ®ï¼Œå¹¶å°†ä¸Šä¼ çš„æ–‡ä»¶å­˜åˆ°æŒ‡å®šæ–‡ä»¶å¤¹(/uploads)ï¼Œæ•´ä¸ªä¸Šä¼ è¿‡ç¨‹ç»“æŸã€‚</p><h4 id="å…¶ä»–æŠ€æœ¯ç‚¹"><a href="#å…¶ä»–æŠ€æœ¯ç‚¹" class="headerlink" title="å…¶ä»–æŠ€æœ¯ç‚¹"></a>å…¶ä»–æŠ€æœ¯ç‚¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dragenter</span><br><span class="line">dragover</span><br><span class="line">dragleave</span><br><span class="line">drop</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
            <tag> html5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsè®¾è®¡æ¨¡å¼ä¸Š(é¢å‘å¯¹è±¡ã€é—­åŒ…ã€å‘½åç©ºé—´)</title>
      <link href="/2020/05/01/js_design_start/"/>
      <url>/2020/05/01/js_design_start/</url>
      
        <content type="html"><![CDATA[<p>jsè®¾è®¡æ¨¡å¼åˆ†ä¸¤ç¯‡æ¥å†™ï¼Œæ­¤ä¸ºä¸Šç¯‡ã€‚ä¸‹ç¯‡ä¸ºã€Šjsè®¾è®¡æ¨¡å¼ä¸‹ã€‹ã€‚<br>jsè®¾è®¡æ¨¡å¼ä¹‹å‰éœ€è¦äº†è§£jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€é—­åŒ…ã€å‘½åç©ºé—´ç¼–ç¨‹æ¨¡å¼çš„æ¦‚å¿µã€‚</p><h1 id="jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹</h1><p>æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ˜¯jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œéjavaé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸javaæ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>jsé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ ç±» å’Œ å®ä¾‹(å¯¹è±¡)ã€‚<br>ç±» åœ¨es6ä¸Šå°±æ˜¯ classç±»ï¼Œåœ¨es5ä¸­å°±æ˜¯æ„é€ å‡½æ•°ä¸­å®šä¹‰ä¸€ç³»åˆ—çš„propotyåŸå‹<br>å®ä¾‹ å°±æ˜¯ new classç±»ï¼Œæˆ–è€… new æ„é€ å‡½æ•°ã€‚å®ä¾‹å°±æ˜¯å¯¹è±¡ã€‚<br>è€Œå®šä¹‰ç±»ï¼Œæœ€åå®ä¾‹åŒ–è¿™ä¸ªç±»ï¼Œéƒ½æ˜¯ä¸ºäº†å¾—åˆ°è¿™ä¸ªå®ä¾‹å¯¹è±¡ã€‚é‡ç‚¹æœ€ç»ˆæ˜¯å¯¹è±¡ã€‚è¿™å°±æ˜¯é¢å‘å¯¹è±¡çš„ç¼–ç¨‹ã€‚</p><p>ç®€å•è¯´ï¼Œjsé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå°±æ˜¯ç†Ÿæ‚‰ä½¿ç”¨ classç±» æ¥è¿›è¡Œjsç¼–ç¨‹ã€‚<br>ç”±äºreactæ¡†æ¶çš„æµè¡Œï¼Œç»„ä»¶éƒ½æ˜¯é€šè¿‡classç±»ç¼–ç¨‹ï¼Œå› æ­¤ç†Ÿç»ƒä½¿ç”¨ jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹å˜å¾—æ›´åŠ é‡è¦ã€‚</p><p>æ³¨æ„çš„æ˜¯ï¼Œjsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸javaæ˜¯æœ‰åŒºåˆ«çš„ã€‚</p><h2 id="new-çš„ç†è§£"><a href="#new-çš„ç†è§£" class="headerlink" title="new çš„ç†è§£"></a>new çš„ç†è§£</h2><h3 id="å…³äºnew"><a href="#å…³äºnew" class="headerlink" title="å…³äºnew"></a>å…³äºnew</h3><p><a href="https://blog.csdn.net/zhouziyu2011/article/details/60143385" target="_blank" rel="noopener">å…³äºnew çš„ç†è§£</a>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var baseObj = new Base();</span><br><span class="line">//newæ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆå‘¢?å…¶å®å¾ˆç®€å•ï¼Œå°±å¹²äº†ä¸‰ä»¶äº‹æƒ…ï¼š</span><br><span class="line">var obj  = &#123;&#125;;</span><br><span class="line">var result = Base.call(obj);</span><br><span class="line">obj.__proto__ = Base.prototype;</span><br><span class="line"></span><br><span class="line">if (typeof(result) === &quot;object&quot;)&#123;</span><br><span class="line">  baseObj = result;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">  baseObj = obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸¤ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var Test = function()&#123;</span><br><span class="line">            this.html = 1111;</span><br><span class="line">            // return &#123;a:123&#125;;</span><br><span class="line">          &#125;</span><br><span class="line">          var obj = new Test()</span><br><span class="line">          console.log(obj) //&#123;html: 1111&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var Test = function()&#123;</span><br><span class="line">            this.html = 1111;</span><br><span class="line">            return &#123;a:123&#125;;</span><br><span class="line">          &#125;</span><br><span class="line">          var obj = new Test()</span><br><span class="line">          console.log(obj) //&#123;a: 123&#125;</span><br></pre></td></tr></table></figure><h3 id="new-Fn-ä¸-new-Fnçš„åŒºåˆ«"><a href="#new-Fn-ä¸-new-Fnçš„åŒºåˆ«" class="headerlink" title="new Fn() ä¸ new Fnçš„åŒºåˆ«"></a>new Fn() ä¸ new Fnçš„åŒºåˆ«</h3><p>function Fn(){<br>    this.name=â€™weideâ€™;<br>}<br>console.log(new Fn) //Fn {name: â€œweideâ€}<br>console.log(new Fn()) //Fn {name: â€œweideâ€}<br>çœ‹èµ·æ¥äºŒè€…æ²¡æœ‰åŒºåˆ«ï¼Œåœ¨æ„é€ å‡½æ•°Fnä¸ç”¨ä¼ å‚çš„æ—¶å€™ï¼Œä»–ä»¬ç¡®å®æ²¡æœ‰åŒºåˆ«ï¼Œåªæœ‰å½“æ„é€ å‡½æ•°éœ€è¦ä¼ å‚çš„æ—¶å€™ï¼Œ<br>æ‰å¿…é¡»ä½¿ç”¨å°æ‹¬å·ï¼šnew Fn()</p><p>ä¸‹é¢å°†è®² é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸‰å¤§ç‰¹å¾ å¤šæ€ï¼Œç»§æ‰¿ï¼Œå°è£…</p><h2 id="å¤šæ€"><a href="#å¤šæ€" class="headerlink" title="å¤šæ€"></a>å¤šæ€</h2><p>jsçš„å¤šæ€ä¸javaçš„é¢å‘å¯¹è±¡å¤šæ€ä¸åŒã€‚</p><p>jsçš„å¤šæ€å®šä¹‰ï¼šå¯¹åŒä¸€æ“ä½œä½œç”¨äºä¸åŒçš„å¯¹è±¡ä¸Šé¢ï¼Œå¯ä»¥äº§ç”Ÿä¸åŒçš„è§£é‡Šå’Œä¸åŒçš„æ‰§è¡Œç»“æœã€‚<br>ä»¥ä¸Šé€šä¿—ç‚¹çš„å®šä¹‰å°±æ˜¯ï¼šå¯¹åŒä¸€ä¸ªå‡½æ•°ä½œç”¨äºä¸åŒå¯¹è±¡æ—¶ï¼ˆä¹Ÿå°±æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸åŒçš„å¯¹è±¡ä½œä¸ºå‚æ•°æ—¶ï¼‰ï¼Œå‡½æ•°æ‰§è¡Œçš„ç»“æœä¸åŒã€‚</p><p>åˆ—ä¸¾å¤šæ€çš„å‡ ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æœ€ç®€å•çš„ï¼š</span><br><span class="line">var  a  =  5;</span><br><span class="line">console.log(a);</span><br><span class="line">a=&quot;str&quot;;</span><br><span class="line">console.log(a)</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æœ€ç»å…¸çš„ï¼š</span><br><span class="line">var makeSound = function(animal) &#123; // æŠŠä¸å˜çš„éƒ¨åˆ†éš”ç¦»å‡ºæ¥</span><br><span class="line">    animal.sound();</span><br><span class="line">&#125;;</span><br><span class="line">    </span><br><span class="line">var Duck = function() &#123;&#125;;</span><br><span class="line">Duck.prototype.sound = function() &#123;</span><br><span class="line">    console.log(&quot;å˜å˜å˜&quot;);</span><br><span class="line">&#125;;</span><br><span class="line">var Chicken = function() &#123;&#125;;</span><br><span class="line">Chicken.prototype.sound = function() &#123;</span><br><span class="line">    console.log(&quot;å’¯å’¯å’¯&quot;);</span><br><span class="line">&#125;;</span><br><span class="line">makeSound( new Duck() ); // å˜å˜å˜</span><br><span class="line">makeSound( new Chicken() ); // å’¯å’¯å’¯</span><br></pre></td></tr></table></figure><p>å¤šæ€çš„æ€æƒ³å®é™…ä¸Šæ˜¯æŠŠâ€œåšä»€ä¹ˆâ€å’Œâ€œè°å»åšâ€åˆ†ç¦»å¼€æ¥ï¼Œè¾¾åˆ° å¼€æ”¾-å°é—­çš„è®¾è®¡åŸåˆ™ã€‚</p><h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><h3 id="åŸå‹æµ…æ‹·è´çš„ç—›ç‚¹"><a href="#åŸå‹æµ…æ‹·è´çš„ç—›ç‚¹" class="headerlink" title="åŸå‹æµ…æ‹·è´çš„ç—›ç‚¹"></a>åŸå‹æµ…æ‹·è´çš„ç—›ç‚¹</h3><p>æ‰€æœ‰newå®ä¾‹å°†æŒ‡å‘æ„é€ å‡½æ•°åŸå‹ä¸Šçš„å¼•ç”¨ç±»å‹ï¼Œé€ æˆæµ…æ‹·è´é—®é¢˜ï¼Œä¸€ä¸ªå®ä¾‹ä¿®æ”¹äº†æ­¤å¼•ç”¨ç±»å‹ï¼Œå…¶ä»–æ‰€æœ‰å®ä¾‹å—æ­¤å½±å“ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> function Super()&#123;</span><br><span class="line">    this.colors = [&apos;red&apos;,&apos;blue&apos;,&apos;green&apos;];</span><br><span class="line">&#125;</span><br><span class="line">Super.prototype.apples = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">function newF(o, constructor)&#123;</span><br><span class="line">    o.__proto__ = constructor.prototype;</span><br><span class="line">    constructor.call(o); </span><br><span class="line">&#125;</span><br><span class="line">var aa = &#123;&#125;;</span><br><span class="line">var bb = &#123;&#125;;</span><br><span class="line">newF(aa, Super);</span><br><span class="line">newF(bb, Super);</span><br><span class="line">console.log(aa.apples === bb.apples)//true</span><br><span class="line">console.log(aa.colors === bb.colors)//false</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šè¿‡ç¨‹ä»£ç ç­‰æ•ˆäºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> function Super()&#123;</span><br><span class="line">    this.colors = [&apos;red&apos;,&apos;blue&apos;,&apos;green&apos;];</span><br><span class="line">&#125;</span><br><span class="line">Super.prototype.apples = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">var aa = new Super();</span><br><span class="line">var bb = new Super();</span><br><span class="line">console.log(aa.apples === bb.apples)//true</span><br><span class="line">console.log(aa.colors === bb.colors)//false</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šè¯´æ˜äº†ï¼Œæ„é€ å‡½æ•° newå‡ºæ¥çš„æ‰€æœ‰å®ä¾‹ï¼Œä»–ä»¬ä¼šé’ˆå¯¹åŒä¸€ä¸ªæ„é€ å‡½æ•°prototypeå¯¹è±¡è¢«èµ‹å€¼ï¼Œå¦‚æœprototypeå¯¹è±¡é‡Œé¢æœ‰å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆå°†ç›¸äº’å½±å“ï¼Œç»“åˆä¸Šé¢ä»£ç ï¼Œè¿™æƒ…å†µç­‰åŒäºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> Super.prototype = &#123;apples:&#123;&#125;&#125;;</span><br><span class="line">aa.__proto__ = Super.prototype </span><br><span class="line">//ç­‰åŒäº</span><br><span class="line">aa.apples = Super.prototype.apples</span><br></pre></td></tr></table></figure></p><h3 id="es5ç»§æ‰¿"><a href="#es5ç»§æ‰¿" class="headerlink" title="es5ç»§æ‰¿"></a>es5ç»§æ‰¿</h3><h4 id="å¥—è·¯"><a href="#å¥—è·¯" class="headerlink" title="å¥—è·¯"></a>å¥—è·¯</h4><p>es5ç»§æ‰¿æ–¹æ³•æœ‰ç±»ç»§æ‰¿å’ŒåŸå‹ç»§æ‰¿ï¼Œæˆ‘ä»¬ä¸ç”¨å»ç®¡ä»–ä»¬å«ä»€ä¹ˆåå­—å’Œæ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Œä»–ä»¬çš„å¥—è·¯æ— éä¸‰ç§ï¼š<br>1ã€ä»£ç†å‡½æ•°(proxy)çš„æ„é€ å‡½æ•°å†…è®©çˆ¶æ„é€ å‡½æ•°callä¸€æ¬¡ï¼Œå°±ä¼šé‡å†™è¦†ç›–çˆ¶æ„é€ å‡½æ•°å†…å±æ€§ï¼Œä»¥æ­¤æ¥é¿å…æµ…æ‹·è´é—®é¢˜ã€‚<br>2ã€å°†çˆ¶å‡½æ•°çš„new å®ä¾‹å¯¹è±¡ èµ‹å€¼ç»™ä»£ç†å‡½æ•°çš„prototypeã€‚<br>3ã€å°†çˆ¶å‡½æ•°çš„prototype èµ‹å€¼ç»™ä»£ç†å‡½æ•°çš„prototypeã€‚</p><h4 id="æ–¹å¼"><a href="#æ–¹å¼" class="headerlink" title="æ–¹å¼"></a>æ–¹å¼</h4><p>é€šè¿‡ä»¥ä¸Šå¥—è·¯ï¼Œå¤§è‡´æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®ç°ç»§æ‰¿ï¼š<br>æ–¹å¼ä¸€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹å¼ä¸€ï¼Œå°†çˆ¶å‡½æ•°çš„new å®ä¾‹å¯¹è±¡ èµ‹å€¼ç»™ä»£ç†å‡½æ•°çš„prototypeï¼Œå¼Šç«¯ ä¼šæ‰§è¡Œä¸¤æ¬¡çˆ¶å‡½æ•°</span><br><span class="line"> function Super()&#123;</span><br><span class="line">    this.colors = [&apos;red&apos;,&apos;blue&apos;,&apos;green&apos;];</span><br><span class="line">&#125;</span><br><span class="line">Super.prototype.apples = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">function proxy()&#123;</span><br><span class="line">    //æ‰§è¡Œä¸€æ¬¡çˆ¶å‡½æ•°Super</span><br><span class="line">     Super.call(this);</span><br><span class="line">&#125;</span><br><span class="line">//æ–¹å¼ä¸€ proxy.prototypeç›´æ¥èµ‹å€¼ new æ„é€ å‡½æ•°</span><br><span class="line">proxy.prototype = new Super();//æ‰§è¡Œç¬¬äºŒæ¬¡çˆ¶å‡½æ•°Super</span><br><span class="line">var aa = new proxy();//æ¬¡æ­¥ä»£ç  ä¼š é‡å†™è¦†ç›–çˆ¶æ„é€ å‡½æ•°å†…å±æ€§</span><br><span class="line">var bb = new proxy();</span><br><span class="line">console.log(aa.colors === bb.colors)//true</span><br></pre></td></tr></table></figure></p><p>æ–¹å¼äºŒã€æ­¤æ–¹å¼ä¸æ–¹å¼ä¸€ä¸€æ ·ï¼Œå…¶ä»–ä»£ç ä¸æ–¹å¼ä¸€éƒ½ä¸€æ ·ï¼Œåªæœ‰ä¸€å¥ä¸åŒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹å¼äºŒï¼Œç›¸æ¯”æ–¹å¼äºŒçš„å¥½å¤„åœ¨äº çˆ¶å‡½æ•° åªæ‰§è¡Œä¸€é</span><br><span class="line"> ...</span><br><span class="line">proxy.prototype = Super.prototype</span><br><span class="line"> ...</span><br></pre></td></tr></table></figure><h4 id="å¼Šç«¯"><a href="#å¼Šç«¯" class="headerlink" title="å¼Šç«¯"></a>å¼Šç«¯</h4><p>ä»¥ä¸Šæ–¹å¼éƒ½æ— æ³•è§£å†³ prototype å¯¹è±¡çš„ æµ…æ‹·è´é—®é¢˜ã€‚åŸå› è§ ã€Šæ‰€æœ‰newå®ä¾‹å°†æµ…æ‹·è´åŸå‹ä¸Šçš„å¼•ç”¨ç±»å‹ ã€‹</p><h4 id="es5æœ€ä½³ç»§æ‰¿æ–¹å¼ä¸€ï¼šä¸æ·±æ‹·è´å‡½æ•°ç»“åˆ"><a href="#es5æœ€ä½³ç»§æ‰¿æ–¹å¼ä¸€ï¼šä¸æ·±æ‹·è´å‡½æ•°ç»“åˆ" class="headerlink" title="es5æœ€ä½³ç»§æ‰¿æ–¹å¼ä¸€ï¼šä¸æ·±æ‹·è´å‡½æ•°ç»“åˆ"></a>es5æœ€ä½³ç»§æ‰¿æ–¹å¼ä¸€ï¼šä¸æ·±æ‹·è´å‡½æ•°ç»“åˆ</h4><p>ä¼ ç»Ÿçš„ç»§æ‰¿æ–¹å¼éƒ½æ— æ³•è§£å†³prototypeçš„æµ…æ‹·è´é—®é¢˜ï¼Œåªèƒ½å¼•å…¥æ·±æ‹·è´å‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç çš„deepcopyæ·±æ‹·è´æ–¹æ³•ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œå¯ä»¥å»æ‰¾ã€‚<br>æ‰€ä»¥es5æ–¹æ³•å†™ç»§æ‰¿æœ€ä½³æ–¹å¼ï¼šçˆ¶å‡½æ•°.call + proxy.prototype = deepcopy(Super.prototype).<br>ç®€è¨€ä¹‹ call + åŸå‹èµ‹åŸå‹ + æ·±æ‹·è´<br>ä½œç”¨ï¼š<br>call æ‹·è´ æ„é€ å‡½æ•°å†…å±æ€§<br>åŸå‹èµ‹åŸå‹ æ‹·è´åŸå‹æ–¹æ³•ï¼Œé¿å…æ‰§è¡Œä¸€æ¬¡çˆ¶å‡½æ•°<br>æ·±æ‹·è´ é¿å…åŸå‹æµ…æ‹·è´é—®é¢˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Super(name)&#123;</span><br><span class="line">    this.colors = [&quot;red&quot;,&quot;blue&quot;,&quot;green&quot;];</span><br><span class="line">&#125;</span><br><span class="line">Super.prototype.apples = &#123;&#125;;</span><br><span class="line">function Sub(name)&#123;</span><br><span class="line">    Super.call(this);</span><br><span class="line">&#125;</span><br><span class="line">Sub.prototype = deepcopy(Super.prototype);</span><br></pre></td></tr></table></figure><h4 id="es5æœ€ä½³ç»§æ‰¿æ–¹å¼äºŒï¼šå¼•ç”¨å¯¹è±¡ä¸å†™å…¥çˆ¶åŸå‹ä¸Š"><a href="#es5æœ€ä½³ç»§æ‰¿æ–¹å¼äºŒï¼šå¼•ç”¨å¯¹è±¡ä¸å†™å…¥çˆ¶åŸå‹ä¸Š" class="headerlink" title="es5æœ€ä½³ç»§æ‰¿æ–¹å¼äºŒï¼šå¼•ç”¨å¯¹è±¡ä¸å†™å…¥çˆ¶åŸå‹ä¸Š"></a>es5æœ€ä½³ç»§æ‰¿æ–¹å¼äºŒï¼šå¼•ç”¨å¯¹è±¡ä¸å†™å…¥çˆ¶åŸå‹ä¸Š</h4><p>es5ç»§æ‰¿çš„ç—›ç‚¹æ˜¯æ— æ³•åŸå‹æµ…æ‹·è´é—®é¢˜ï¼Œå¦‚æœèƒ½å¼•ç”¨å¯¹è±¡ä¸å†™å…¥çˆ¶åŸå‹ä¸Šï¼Œåˆ™å¯æ”¾å¿ƒç»§æ‰¿ã€‚</p><h3 id="æœ€ç»ˆææ–¹å¼ï¼šes6-class"><a href="#æœ€ç»ˆææ–¹å¼ï¼šes6-class" class="headerlink" title="æœ€ç»ˆææ–¹å¼ï¼šes6 class"></a>æœ€ç»ˆææ–¹å¼ï¼šes6 class</h3><p>classæ˜¯es6 çš„apiï¼Œæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä½¿ç”¨classè¿›è¡Œç»§æ‰¿ï¼Œèƒ½å¤Ÿè½»æ¾è¿›è¡Œç»§æ‰¿ï¼Œä¸”æ— æµ…æ‹·è´é—®é¢˜ã€‚<br>å› æ­¤æ¨èä½¿ç”¨es6çš„classç±»ç»§æ‰¿æ–¹å¼ï¼Œä»£ç ä¼˜é›…è€Œç®€æ´ï¼Œä¸æ¨èä½¿ç”¨es5ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">class Super &#123;</span><br><span class="line">  constructor()&#123;</span><br><span class="line">    this.colors = [];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Sub extends Super&#123;</span><br><span class="line">  constructor()&#123;</span><br><span class="line">    super();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var instance1 = new Sub();</span><br><span class="line">var instance2 = new Sub();</span><br><span class="line">console.log(instance1.colors === instance2.colors);//false</span><br></pre></td></tr></table></figure><h2 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h2><p>å°è£…è¿™ä¸ªæœ€å¥½ç†è§£ï¼Œç›´ç™½çš„è¯´å°±æ˜¯ï¼š<br>å°è£…è¯´çš„å°±ç±»ã€‚ç±»ç”±ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§ç»„æˆï¼Œå°†ä¸€ç³»åˆ—çš„æ–¹æ³•å’Œå±æ€§å°è£…èµ·æ¥ï¼Œå°è£…æˆä¸€ä¸ªç±»ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class People &#123;</span><br><span class="line">    constructor(name, age) &#123;</span><br><span class="line">        this.name = name</span><br><span class="line">        this.age = age</span><br><span class="line">    &#125;</span><br><span class="line">    eat() &#123;</span><br><span class="line">        alert(`$&#123;this.name&#125; eat something`)</span><br><span class="line">    &#125;</span><br><span class="line">    speak() &#123;</span><br><span class="line">        alert(`My name is $&#123;this.name&#125;, age $&#123;this.age&#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><p><a href="https://blog.csdn.net/ybdt1201/article/details/53366613" target="_blank" rel="noopener">å…³äºé—­åŒ…è¯¦ç»†çŸ¥è¯†ï¼Œå¯å‚è€ƒæˆ‘åœ¨å‡ å¹´å‰å†™çš„ä¸€ç¯‡åšå®¢ï¼Œè¿™é‡Œåªæ‘˜å–ä¸€äº›å¿…è¦çŸ¥è¯†</a>ï¼Œä»¥ä¸‹å†…å®¹åŸºæœ¬æ‘˜è‡³è¿™ç¯‡åšå®¢ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œç‚¹å‡»è¿›å…¥äº†è§£ã€‚</p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>å®˜æ–¹å¯¹é—­åŒ…çš„å®šä¹‰ï¼šæ‰€è°“â€œé—­åŒ…â€ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªæ‹¥æœ‰è®¸å¤šå˜é‡å’Œç»‘å®šäº†è¿™äº›å˜é‡çš„ç¯å¢ƒçš„è¡¨è¾¾å¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå› è€Œè¿™äº›å˜é‡ä¹Ÿæ˜¯è¯¥è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚</p><p>è¿˜æœ‰ä¸€ç§å¯¹é—­åŒ…æ›´ç›´æ¥æ˜äº†çš„è¯´æ³•ï¼š<a href="https://www.cnblogs.com/tinkbell/p/3173293.html" target="_blank" rel="noopener">é—­åŒ…å°±æ˜¯æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚</a><br>åˆ†æè¿™å¥è¯:<br>ã€€ã€€1.é—­åŒ…æ˜¯å®šä¹‰åœ¨å‡½æ•°ä¸­çš„å‡½æ•°.<br>ã€€ã€€2.é—­åŒ…èƒ½è®¿é—®å‡½æ•°å†…çš„ç§æœ‰å˜é‡.<br>ã€€ã€€3.å³ä½¿åŒ…å«å‡½æ•°æ‰§è¡Œå®Œäº†, è¢«é—­åŒ…å¼•ç”¨çš„å˜é‡ä¹Ÿå¾—ä¸åˆ°é‡Šæ”¾.</p><p>æ»¡è¶³ä»¥ä¸Šå®šä¹‰çš„ï¼Œéƒ½å¯ç§°ä¹‹ä¸ºé—­åŒ…ã€‚</p><h2 id="ä¸‰ç§å®šä¹‰æ–¹å¼"><a href="#ä¸‰ç§å®šä¹‰æ–¹å¼" class="headerlink" title="ä¸‰ç§å®šä¹‰æ–¹å¼"></a>ä¸‰ç§å®šä¹‰æ–¹å¼</h2><p>é—­åŒ…æœ‰ä¸‰ç§å®šä¹‰æ–¹å¼ï¼Œä¸€ç§å°±æ˜¯ç»å…¸çš„returnæ–¹å¼ï¼Œä¸€ç§å°±æ˜¯newçš„æ–¹å¼ï¼Œä¸€ç§å°±æ˜¯å¯¹è±¡æ–¹å¼ã€‚<br>æˆ‘ç›®å‰çœ‹åˆ°çš„é—­åŒ…å°±è¿™ä¸‰ç§ï¼ŒåŸºæœ¬è¿™ä¸‰ç§æ»¡è¶³äº†å·¥ä½œä¸­ç»å¤§éƒ¨åˆ†éœ€æ±‚äº†ã€‚<br>ç½‘ä¸Šæœ‰å¾ˆå¤šäººåˆ—ä¸¾äº†å¾ˆå¤šé—­åŒ…æ–¹å¼ï¼Œå…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹è¿™ä¸‰ç§æ–¹å¼çš„å‘å±•å»¶ä¼¸è€Œå·²ã€‚</p><h3 id="returnæ–¹å¼"><a href="#returnæ–¹å¼" class="headerlink" title="returnæ–¹å¼"></a>returnæ–¹å¼</h3><p>è¿™ç§æ–¹å¼æœ€ç»å…¸ï¼Œä¹Ÿæœ€ä¸ºå¸¸ç”¨ï¼Œæ¨èè¿™ç§å†™æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function a() &#123;</span><br><span class="line">    var num = 1;</span><br><span class="line">    return function ()&#123;</span><br><span class="line">        num++;</span><br><span class="line">        console.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="new-æ–¹å¼"><a href="#new-æ–¹å¼" class="headerlink" title="new æ–¹å¼"></a>new æ–¹å¼</h3><p>è¿™ç§æ–¹å¼ä¹‹æ‰€ä»¥è¢«è®¤å®šä¸ºé—­åŒ…ï¼Œæ˜¯å› ä¸ºä»¥ä¸‹ä¸¤ç‚¹ç†ç”±ï¼Œä¸‹é¢ä»£ç ä¸­ï¼š<br>1ã€aæ˜¯æ¯å‡½æ•°<br>2ã€incæ˜¯aæ‰§è¡Œåè¿”å›ï¼Œç›¸å½“äºreturnçš„å‡½æ•°ï¼Œæ­¤å‡½æ•°ç»‘å®šäº†açš„ç§æœ‰å˜é‡nï¼Œ è¿™æ˜¯å†³å®šincæ˜¯å¦ä¸ºé—­åŒ…çš„é‡è¦ä¾æ®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function a()&#123;</span><br><span class="line">  var n = 0;</span><br><span class="line">  this.inc = function () &#123;</span><br><span class="line">    n++;</span><br><span class="line">    console.log(n);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">var cc = new a();</span><br><span class="line">cc.inc()//1</span><br><span class="line">cc.inc()//2</span><br></pre></td></tr></table></figure></p><h3 id="å¯¹è±¡æ–¹å¼"><a href="#å¯¹è±¡æ–¹å¼" class="headerlink" title="å¯¹è±¡æ–¹å¼"></a>å¯¹è±¡æ–¹å¼</h3><p>ä¸‹é¢ä¸¤ä¸ªé—­åŒ…ä¾‹å­ï¼Œå¥—è·¯éƒ½ä¸€æ ·ï¼Œå¤–å±‚å®šä¹‰ä¸ªå¯¹è±¡ï¼Œç„¶ååœ¨æ¯å‡½æ•°å†…éƒ¨ç»™è¿™ä¸ªå¯¹è±¡å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œæ­¤å‡½æ•°ç»‘å®šäº†ç§æœ‰å˜é‡ï¼Œå³ä¸ºé—­åŒ…å‡½æ•°ã€‚<br>æˆ‘ä»¬å§‘ä¸”ç§°è¿™ç§å®šä¹‰é—­åŒ…çš„æ–¹å¼ä¸ºå¯¹è±¡æ–¹å¼å§ã€‚<br>ä»¥ä¸‹æ–¹å¼ä¹‹æ‰€ä»¥è¢«è®¤å®šä¸ºé—­åŒ…ï¼Œæ˜¯å› ä¸ºä»¥ä¸‹ä¸¤ç‚¹ç†ç”±ï¼Œä¸‹é¢ä»£ç ä¸­ï¼š<br>1ã€æœ‰æ¯å‡½æ•°ï¼ˆä¸‹é¢ä¸¤ä¸ªä¾‹å­æ¯å‡½æ•°æ˜¯åŒ¿åå‡½æ•°ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºéåŒ¿åå‡½æ•°ï¼‰<br>2ã€æ¯å‡½æ•°æ‰§è¡Œåï¼Œç»™å‡½æ•°ç»‘å®šäº†æ¯å‡½æ•°çš„ç§æœ‰å˜é‡nï¼Œ è¿™æ˜¯å†³å®šå†…éƒ¨å‡½æ•°æ˜¯å¦ä¸ºé—­åŒ…çš„é‡è¦ä¾æ®ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;&#125;;</span><br><span class="line">(function() &#123;</span><br><span class="line">    var n = 1;</span><br><span class="line">    obj.count = function () &#123;</span><br><span class="line">                    n++;</span><br><span class="line">                    console.log(n);</span><br><span class="line">                 &#125;;</span><br><span class="line">    </span><br><span class="line">&#125;)()</span><br><span class="line">obj.count();//2</span><br><span class="line">obj.count();//3</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var divDom = $(&apos;#name&apos;);</span><br><span class="line">(function() &#123;</span><br><span class="line">    var n = 1;</span><br><span class="line">    divDom.onclick = function () &#123;</span><br><span class="line">                    n++;</span><br><span class="line">                    console.log(n);</span><br><span class="line">                 &#125;;</span><br><span class="line">    </span><br><span class="line">&#125;)()</span><br><span class="line">divDom.onclick();//2</span><br><span class="line">divDom.onclick();//3</span><br></pre></td></tr></table></figure><h2 id="ä¸æ˜¯é—­åŒ…çš„è®¾è®¡"><a href="#ä¸æ˜¯é—­åŒ…çš„è®¾è®¡" class="headerlink" title="ä¸æ˜¯é—­åŒ…çš„è®¾è®¡"></a>ä¸æ˜¯é—­åŒ…çš„è®¾è®¡</h2><p>åˆ—ä¸¾ä¸€ä¸‹éé—­åŒ…çš„è®¾è®¡æ–¹å¼ï¼Œä»¥æ­¤åŠ æ·±å¯¹é—­åŒ…çš„ç†è§£<br>å¾ˆå¤šäººè®¤ä¸ºè‡ªè¿è¡ŒåŒ¿åå‡½æ•°ã€å‘½åç©ºé—´è®¾è®¡æ¨¡å¼å’ŒåŸå‹å®šä¹‰æ–¹å¼éƒ½æ˜¯é—­åŒ…ï¼Œæˆ‘è§‰å¾—æ˜¯ä¸å¯¹çš„ã€‚</p><h3 id="è‡ªè¿è¡ŒåŒ¿åå‡½æ•°ï¼š"><a href="#è‡ªè¿è¡ŒåŒ¿åå‡½æ•°ï¼š" class="headerlink" title="è‡ªè¿è¡ŒåŒ¿åå‡½æ•°ï¼š"></a>è‡ªè¿è¡ŒåŒ¿åå‡½æ•°ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸æ˜¯é—­åŒ…</span><br><span class="line">(function fn()&#123;</span><br><span class="line">          var n = 8;</span><br><span class="line">           console.log(n) ;</span><br><span class="line">      &#125;)();</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸€ç§æ˜¯é—­åŒ…çš„è®¾è®¡ï¼Œä½†å¹¶ä¸æ˜¯å› ä¸ºå®ƒæ˜¯è‡ªè¿è¡ŒåŒ¿åå‡½æ•°çš„åŸå› ï¼Œè€Œæ˜¯å› ä¸ºåŒ¿åå‡½æ•°å†…éƒ¨returnäº†ä¸€ä¸ªå‡½æ•°çš„åŸå› ï¼Œ</span><br><span class="line">//è¿™å…¶å®å°±æ˜¯ä¸Šé¢è®²çš„ä¸¤ç§é—­åŒ…è®¾è®¡æ¨¡å¼çš„ç¬¬ä¸€ç§ returnæ–¹å¼</span><br><span class="line">(function fn()&#123;</span><br><span class="line">      var n = 8;</span><br><span class="line">      return function()&#123;</span><br><span class="line">          console.log(n) ;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;)();</span><br></pre></td></tr></table></figure><h3 id="jsçš„å‘½åç©ºé—´å†™æ³•"><a href="#jsçš„å‘½åç©ºé—´å†™æ³•" class="headerlink" title="jsçš„å‘½åç©ºé—´å†™æ³•"></a>jsçš„å‘½åç©ºé—´å†™æ³•</h3><p>jsçš„å‘½åç©ºé—´å†™æ³•ä¸èƒ½ç§°ä¹‹ä¸ºé—­åŒ…ï¼Œå®ƒæœ€å¤šæ˜¯ä½¿ç”¨äº†jså…³äºå¼•ç”¨å¯¹è±¡ä¸€å¤„æ”¹å˜ï¼Œéƒ½å—æ”¹å˜çš„ç‰¹æ€§ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//è¿™æ˜¯å‘½åç©ºé—´çš„å†™æ³•ï¼Œä½†ä¸æ˜¯é—­åŒ…</span><br><span class="line">var obj = &#123;</span><br><span class="line">  n:8,</span><br><span class="line">  count:function()&#123;</span><br><span class="line">    this.n++;</span><br><span class="line">    console.log(this.n);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.count()//9</span><br><span class="line">obj.count()//10</span><br></pre></td></tr></table></figure></p><h3 id="åŸå‹å®šä¹‰æ–¹å¼"><a href="#åŸå‹å®šä¹‰æ–¹å¼" class="headerlink" title="åŸå‹å®šä¹‰æ–¹å¼"></a>åŸå‹å®šä¹‰æ–¹å¼</h3><p>è¿˜æœ‰ä¸€äº›æŠŠå‡½æ•°å®šä¹‰åœ¨åŸå‹ä¸Šï¼Œè¿™æœ¬è´¨ä¸Šä¹Ÿæ˜¯è¿ç”¨äº†å¼•ç”¨å¯¹è±¡çš„ç‰¹æ€§ï¼Œä¸æ˜¯é—­åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸æ˜¯é—­åŒ…ï¼Œæ˜¯è¿ç”¨äº†å¼•ç”¨å¯¹è±¡çš„ç‰¹æ€§ï¼Œæ‰æœ‰å¯¹è±¡å…ƒç´ å€¼å åŠ çš„æ•ˆæœ</span><br><span class="line">function a()&#123;</span><br><span class="line">  this.n = 8;</span><br><span class="line">&#125;</span><br><span class="line">a.prototype.count=function()&#123;</span><br><span class="line">  this.n++;</span><br><span class="line">  console.log(this.n);</span><br><span class="line">&#125;</span><br><span class="line">var obj = new a();</span><br><span class="line">obj.count()//9</span><br><span class="line">obj.count()//10</span><br></pre></td></tr></table></figure></p><p> å¦‚æœç¨å¾®æ¢ä¸€ä¸‹ï¼Œå°±è¡Œä¸é€šäº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸æ˜¯é—­åŒ…</span><br><span class="line">function a()&#123;</span><br><span class="line">  this.n = 8;</span><br><span class="line">&#125;</span><br><span class="line">a.prototype.count=function()&#123;</span><br><span class="line">  this.n++;</span><br><span class="line">  console.log(this.n);</span><br><span class="line">&#125;</span><br><span class="line">var newCount = (new a()).count;</span><br><span class="line">newCount()//NaN</span><br><span class="line">newCount()//NaN</span><br></pre></td></tr></table></figure></p><h2 id="é—­åŒ…çš„ç”¨å¤„"><a href="#é—­åŒ…çš„ç”¨å¤„" class="headerlink" title="é—­åŒ…çš„ç”¨å¤„"></a>é—­åŒ…çš„ç”¨å¤„</h2><h3 id="å®šä¹‰ç§æœ‰å˜é‡"><a href="#å®šä¹‰ç§æœ‰å˜é‡" class="headerlink" title="å®šä¹‰ç§æœ‰å˜é‡"></a>å®šä¹‰ç§æœ‰å˜é‡</h3><p>è‹¥ä¸æƒ³æŸäº›å˜é‡è¢«å…¶ä»–å‡½æ•°è®¿é—®ï¼Œå°±å¯ä»¥å†™ä¸€ä¸ªé—­åŒ…è®¾è®¡ï¼Œå°†å˜é‡å®šä¹‰ä¸ºç§æœ‰å˜é‡ï¼Œåªæœ‰é—­åŒ…å‡½æ•°å¯ä»¥è®¿é—®ï¼Œè¾¾åˆ°å…¶ä»–å‡½æ•°æ— æ³•è®¿é—®çš„ç›®çš„ã€‚</p><h3 id="ä¿å­˜å˜é‡å€¼"><a href="#ä¿å­˜å˜é‡å€¼" class="headerlink" title="ä¿å­˜å˜é‡å€¼"></a>ä¿å­˜å˜é‡å€¼</h3><p>è¿™æ˜¯é—­åŒ…æœ€ç»å…¸å’Œå…³é”®æ„ä¹‰æ‰€åœ¨ï¼Œä¹Ÿæ˜¯é—­åŒ…å‡½æ•°å­˜åœ¨çš„æ„ä¹‰ã€‚é—­åŒ…å‡½æ•°ç»‘å®šäº†æ¯å‡½æ•°çš„å˜é‡ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œï¼Œæ­¤å˜é‡ä¸é”€æ¯ï¼Œè¾¾åˆ°ä¿å­˜å˜é‡å€¼çš„ç›®çš„ã€‚</p><h2 id="è¿ç”¨åœºæ™¯"><a href="#è¿ç”¨åœºæ™¯" class="headerlink" title="è¿ç”¨åœºæ™¯"></a>è¿ç”¨åœºæ™¯</h2><h3 id="ä¿å­˜å˜é‡å€¼ã€‚"><a href="#ä¿å­˜å˜é‡å€¼ã€‚" class="headerlink" title="ä¿å­˜å˜é‡å€¼ã€‚"></a>ä¿å­˜å˜é‡å€¼ã€‚</h3><h3 id="è¿›è¡Œå‰åä¸¤æ¬¡æ‰§è¡Œæ—¶çš„æ¯”è¾ƒã€‚"><a href="#è¿›è¡Œå‰åä¸¤æ¬¡æ‰§è¡Œæ—¶çš„æ¯”è¾ƒã€‚" class="headerlink" title="è¿›è¡Œå‰åä¸¤æ¬¡æ‰§è¡Œæ—¶çš„æ¯”è¾ƒã€‚"></a>è¿›è¡Œå‰åä¸¤æ¬¡æ‰§è¡Œæ—¶çš„æ¯”è¾ƒã€‚</h3><h4 id="react-reduxçš„propsçŠ¶æ€æ¯”è¾ƒ"><a href="#react-reduxçš„propsçŠ¶æ€æ¯”è¾ƒ" class="headerlink" title="react-reduxçš„propsçŠ¶æ€æ¯”è¾ƒ"></a>react-reduxçš„propsçŠ¶æ€æ¯”è¾ƒ</h4><p>æ¯”å¦‚react-reduxå°±æ˜¯é€šè¿‡é—­åŒ…çš„è¿™ä¸ªç‰¹æ€§ï¼Œä¿å­˜propä¸Šä¸€æ¬¡çŠ¶æ€ï¼Œç„¶åè·Ÿå½“å‰propsæ¯”è¾ƒã€‚</p><h4 id="èŠ‚æµå’Œé˜²æŠ–"><a href="#èŠ‚æµå’Œé˜²æŠ–" class="headerlink" title="èŠ‚æµå’Œé˜²æŠ–"></a>èŠ‚æµå’Œé˜²æŠ–</h4><p>è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–ç»å¸¸ä½¿ç”¨çš„æ‰‹æ®µï¼Œå¯ä»¥ç½‘ä¸ŠæŸ¥é˜…ï¼Œéƒ½æ˜¯ç”¨é—­åŒ…æ¥è¿›è¡Œã€‚</p><h4 id="forå¾ªç¯çš„ä½¿ç”¨"><a href="#forå¾ªç¯çš„ä½¿ç”¨" class="headerlink" title="forå¾ªç¯çš„ä½¿ç”¨"></a>forå¾ªç¯çš„ä½¿ç”¨</h4><p>é”™è¯¯å†™æ³•ï¼Œè¿™ç§forè¾¾ä¸åˆ°é¢„æœŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//é”™è¯¯å†™æ³•</span><br><span class="line">function foo()&#123;</span><br><span class="line">    var arr = [];</span><br><span class="line">    for(let i = 0; i &lt; 2; i++)&#123;</span><br><span class="line">        arr[i] = function()&#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">var bar = foo();</span><br><span class="line">console.log(bar[0]());//2</span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆæ˜¯2ï¼Ÿ<br>å¦‚ä¸‹å½“forå¾ªç¯ä¸­å®šä¹‰çš„å˜é‡iï¼Œä¸å…‰æ˜¯forå¾ªç¯ä½“å†…çš„å˜é‡ï¼Œè¿˜æ˜¯fooå‡½æ•°ä½“å†…çš„å—çº§å˜é‡ï¼Œå½“forå¾ªç¯æ‰§è¡Œå®Œåï¼Œä¼šå°†å‡½æ•°ä½“å†…çš„å˜é‡ièµ‹å€¼ä¸º2ï¼Œæ­¤æ—¶è°ƒç”¨å‡½æ•°ï¼Œè‚¯å®šæ‰“å°ä¸º2.<br>forå¾ªç¯ä½“å†…ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> arr = [];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i)<span class="comment">//2</span></span><br><span class="line">test();<span class="comment">//2</span></span><br></pre></td></tr></table></figure></p><p>æ­£ç¡®å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ­£ç¡®å†™æ³•</span><br><span class="line">//ä¸ºä»€ä¹ˆèƒ½è®°ä½å½“æ—¶å€¼ï¼Œæ˜¯å› ä¸ºæ˜¯è‡ªè¿è¡Œçš„å‡½æ•°ï¼Œæ¯æ¬¡éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡</span><br><span class="line">function foo()&#123;</span><br><span class="line">    var arr = [];</span><br><span class="line">    for(var i = 0; i &lt; 2; i++)&#123;</span><br><span class="line">        arr[i] = (function fn(j)&#123;</span><br><span class="line">            return function test()&#123;</span><br><span class="line">                return j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">var bar = foo();</span><br><span class="line">console.log(bar[0]());//0</span><br></pre></td></tr></table></figure></p><p>æ¢ä¸€ç§å†™æ³•ï¼Œå¯èƒ½æ›´å®¹æ˜“ç†è§£<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ­£ç¡®å†™æ³•</span><br><span class="line">function foo()&#123;</span><br><span class="line">    var arr = [];</span><br><span class="line">    for(var i = 0; i &lt; 2; i++)&#123;</span><br><span class="line">        arr[i] = (function fn(j)&#123;</span><br><span class="line">            var _j = j;//å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ›´å®¹æ˜“ç†è§£</span><br><span class="line">            return function test()&#123;</span><br><span class="line">                return _j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">var bar = foo();</span><br><span class="line">console.log(bar[0]());//0</span><br></pre></td></tr></table></figure></p><h2 id="å¯¹é—­åŒ…çš„è¯¯è§£"><a href="#å¯¹é—­åŒ…çš„è¯¯è§£" class="headerlink" title="å¯¹é—­åŒ…çš„è¯¯è§£"></a>å¯¹é—­åŒ…çš„è¯¯è§£</h2><p>å¾ˆå¤šäººè®¤ä¸ºé—­åŒ…ä¼šå¢åŠ å†…å­˜ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œè¿™æ˜¯é”™è¯¯çš„ï¼Œæ˜¯å¯¹é—­åŒ…çš„è¯¯è§£ã€‚<br>å¦‚æœä½ ä¸æŠŠå˜é‡å®šä¹‰ä¸ºé—­åŒ…è®¿é—®çš„ç§æœ‰å˜é‡ï¼Œä½ ä¹Ÿä¸€å®šä¼šæŠŠè¿™äº›å˜é‡å®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸä¸Šï¼Œå…¨å±€ä½œç”¨ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯ä¸é”€æ¯çš„ï¼Œä¸€æ ·ä¹Ÿæ˜¯å¢åŠ äº†å†…å­˜ã€‚<br>æ‰€ä»¥é—­åŒ…å¹¶æ²¡æœ‰å¢åŠ å†…å­˜ï¼Œæ›´æ²¡æœ‰å†…å­˜æ³„æ¼ã€‚<br>å¦‚æœå¢åŠ äº†å†…å­˜å’Œå†…å­˜æ³„æ¼ï¼Œå…¶å®éƒ½æ˜¯ç¼–ç æ°´å¹³æœ‰å¾…æé«˜å¯¼è‡´ã€‚</p><h1 id="å‘½åç©ºé—´æ¨¡å¼"><a href="#å‘½åç©ºé—´æ¨¡å¼" class="headerlink" title="å‘½åç©ºé—´æ¨¡å¼"></a>å‘½åç©ºé—´æ¨¡å¼</h1><p>jsä½¿ç”¨å‘½åç©ºé—´æ¨¡å¼è®¾è®¡ï¼Œä¸»è¦æ˜¯ä¸ºäº†é¿å…å‘½åå†²çªã€‚<br>å‘½åç©ºé—´è®¾è®¡æ¨¡å¼æœ‰å¾ˆå¤šï¼Œå·¥ä½œä¸­æœ€å¸¸ç”¨çš„æ˜¯ å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³• çš„è®¾è®¡æ¨¡å¼ã€‚å…¶ä»–å‘½åç©ºé—´æ¨¡å¼ï¼Œæˆ‘è§‰å¾—åº”è¯¥ç”¨çš„ä¸å¤šï¼ŒçŸ¥é“ä¸€ä¸‹å³å¯ï¼Œè¿™é‡Œä¸å±•å¼€ï¼Œå¯ä»¥ç½‘ä¸ŠæŸ¥ï¼Œ<a href="https://www.cnblogs.com/syfwhu/p/4885628.html" target="_blank" rel="noopener">ä¹Ÿå¯å‚è€ƒæ­¤ç¯‡æ–‡ç« </a>ã€‚</p><h2 id="å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•"><a href="#å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•" class="headerlink" title="å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•"></a>å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•</h2><p>å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•æ˜¯å‘½åç©ºé—´è®¾è®¡æ¨¡å¼çš„ä¸€ç§ï¼Œç”¨å¾—æœ€å¹¿ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³• çš„å‘½åç©ºé—´è®¾è®¡æ¨¡å¼</span><br><span class="line">var myApplication = &#123;</span><br><span class="line">    // å¯ä»¥å¾ˆå®¹æ˜“çš„ä¸ºå¯¹è±¡å­—é¢é‡å®šä¹‰åŠŸèƒ½</span><br><span class="line">    getInfo:function() &#123;</span><br><span class="line">        // ***</span><br><span class="line">    &#125;,</span><br><span class="line">    // å¯ä»¥è¿›ä¸€æ­¥æ”¯æ’‘å¯¹è±¡å‘½åç©ºé—´</span><br><span class="line">    models:&#123;&#125;,</span><br><span class="line">    views:&#123;</span><br><span class="line">        pages:&#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    collections:&#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="å‘½åç©ºé—´ä¸è®¾è®¡æ¨¡å¼åŒºåˆ«"><a href="#å‘½åç©ºé—´ä¸è®¾è®¡æ¨¡å¼åŒºåˆ«" class="headerlink" title="å‘½åç©ºé—´ä¸è®¾è®¡æ¨¡å¼åŒºåˆ«"></a>å‘½åç©ºé—´ä¸è®¾è®¡æ¨¡å¼åŒºåˆ«</h2><p>å¾ˆå¤šäººå‘½åç©ºé—´çš„è®¾è®¡æ¨¡å¼ï¼Œæ˜¯js å•ä¾‹çš„è®¾è®¡æ¨¡å¼ï¼Œå…¶å®äºŒè€…å®Œå…¨æ˜¯ä¸¤æ ·ä¸œè¥¿ã€‚<br>å‘½åç©ºé—´åå‘äºæ˜¯ä¸€ç§ç¼–ç¨‹è§„èŒƒçš„è®¾è®¡ï¼›<br>jsçš„ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚å•ä¾‹ã€è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ›´å¤šçš„åå‘åŠŸèƒ½å®ç°æ–¹æ¡ˆçš„jsè®¾è®¡æ¨¡å¼ã€‚å¦‚è®¾è®¡ç»‘å®šå’Œç›‘å¬æ—¶ï¼Œé€‰æ‹©è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ã€‚<br>æ‰€ä»¥è¯´ï¼Œå‘½åç©ºé—´æ˜¯ä¸€ç§ç¼–ç¨‹è§„èŒƒï¼Œè®¾è®¡æ¨¡å¼(å¦‚å•ä¾‹ï¼Œä»¥ä¸‹è®¾è®¡æ¨¡å¼éƒ½ä¸ºè¿™ç§å«ä¹‰)æ˜¯ä¸€ç§åŠŸèƒ½å®ç°çš„è®¾è®¡æ–¹æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsè®¾è®¡æ¨¡å¼ </tag>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
            <tag> é—­åŒ… </tag>
            
            <tag> å‘½åç©ºé—´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsè®¾è®¡æ¨¡å¼ä¸‹</title>
      <link href="/2020/05/01/js_design_main/"/>
      <url>/2020/05/01/js_design_main/</url>
      
        <content type="html"><![CDATA[<p>jsè®¾è®¡æ¨¡å¼åˆ†ä¸¤ç¯‡æ¥å†™ï¼Œæ­¤ä¸ºä¸‹ç¯‡ï¼Œä¸Šç¯‡ä¸º ã€Šjsè®¾è®¡æ¨¡å¼ä¸Š(é¢å‘å¯¹è±¡ã€é—­åŒ…ã€å‘½åç©ºé—´)ã€‹ã€‚<br>ä¸»è¦è®²è®¾è®¡åŸåˆ™ä¸è®¾è®¡æ¨¡å¼ä¸¤éƒ¨åˆ†ã€‚</p><h1 id="jsè®¾è®¡åŸåˆ™"><a href="#jsè®¾è®¡åŸåˆ™" class="headerlink" title="jsè®¾è®¡åŸåˆ™"></a>jsè®¾è®¡åŸåˆ™</h1><p>jsè®¾è®¡åŸåˆ™æœ‰å››äº”ä¸ªï¼Œä½†çœŸæ­£åœ¨jsç¼–ç¨‹ä¸­çš„ç”¨å¾—æœ€å¤šçš„å·®ä¸å¤šå°±ä¸¤ä¸ªï¼šå•ä¸€èŒè´£åŸåˆ™ã€å¼€æ”¾å°é—­åŸåˆ™ã€‚<br>å¦å¤–åœ¨æœ¬èŠ‚çš„æœ€åéƒ¨åˆ†ï¼Œé™„ä¸Šã€Šunixï¼linux è®¾è®¡å“²å­¦ã€‹ä¹¦ä¸­æåˆ°çš„å‡ ä¸ªlinuxçš„ç¼–ç å‡†åˆ™ï¼Œåˆ—ä¸¾å…¶ä¸­å¯¹jsç¼–ç æœ‰å¯å‘æ„ä¹‰çš„å‡ ä¸ªã€‚</p><h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å•ä¸€èŒè´£åŸåˆ™ï¼šä¸€ä¸ªå¯¹è±¡ï¼ˆæ–¹æ³•ï¼‰åªåšä¸€ä»¶äº‹æƒ…ã€‚<br>å•ä¸€èŒè´£åŸåˆ™è¦æ±‚æˆ‘ä»¬åœ¨å†™å¤æ‚æ–¹æ³•æ—¶ï¼Œå°†æ–¹æ³•è¿›è¡ŒæŠ½è±¡ï¼Œåˆ†ç¦»é¢—ç²’åŒ–æˆå¤šä¸ªæ–¹æ³•ï¼Œè®©æ¯ä¸ªæ–¹æ³•åªåšä¸€ä»¶äº‹æƒ…ã€‚</p><h3 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šè®©ä¸€ä¸ªæ–¹æ³•åªåšä¸€ä¸ªäº‹æƒ…ï¼Œå°†å¤æ‚èŒè´£åˆ†è§£ä¸ºå¤šä¸ªèŒè´£ï¼ŒåæœŸç»´æŠ¤ä»£ç çš„æ—¶å€™ï¼Œä¿®æ”¹å…¶ä¸­ä¸€ä¸ªèŒè´£ï¼Œä¹Ÿå°±ä¸ä¼šå½±å“å…¶ä»–èŒè´£ï¼Œè¿™æ ·ä»£ç å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§ã€å¯æ‰©å¼ ã€å¯ç§»æ¤æ€§æ›´å¥½ï¼Œä¹Ÿæ›´ç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™ã€‚<br>ç¼ºç‚¹ï¼šå¢åŠ ç¼–å†™ä»£ç çš„å¤æ‚åº¦ï¼ˆèƒ½å†™å‡ºå•ä¸€èŒè´£è®¾è®¡åŸåˆ™ä»£ç çš„ç¨‹åºå‘˜ï¼Œä¹Ÿæ˜¯è¦æ±‚ä»–æœ‰ä¸€å®šç¼–ç¨‹æ°´å¹³æ‰èƒ½å†™å‡ºçš„ï¼‰ï¼Œå½“æˆ‘ä»¬æŒ‰ç…§èŒè´£æŠŠå¯¹è±¡åˆ†è§£æˆæ›´å°ç²’åº¦ä¹‹åï¼Œå®é™…ä¸Šä¹Ÿå¢å¤§äº†è¿™äº›å¯¹è±¡ä¹‹é—´ç›¸äº’è”ç³»çš„éš¾åº¦ã€‚</p><p>å•ä¸€èŒè´£åŸåˆ™æ˜¯jsç¼–å†™ä»£ç æœ€é‡è¦çš„ä¸¤ä¸ªå‡†åˆ™ä¹‹ä¸€ï¼Œåœ¨å®ƒçš„ä¼˜ç‚¹é¢å‰ï¼Œå®ƒçš„ç¼ºç‚¹ä¸å€¼å¾—ä¸€æã€‚</p><h2 id="å¼€æ”¾å°é—­åŸåˆ™"><a href="#å¼€æ”¾å°é—­åŸåˆ™" class="headerlink" title="å¼€æ”¾å°é—­åŸåˆ™"></a>å¼€æ”¾å°é—­åŸåˆ™</h2><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><p>å¼€æ”¾å°é—­åŸåˆ™ï¼šå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚<br>å¼€æ”¾å°é—­åŸåˆ™è¦æ±‚æˆ‘ä»¬å†™å‡ºæ¥çš„æ–¹æ³•ï¼Œå½“å¯¹ç¨‹åºæ–¹æ³•è¿›è¡Œæ‰©å±•æ—¶ï¼Œæ›´åŠ æ–¹ä¾¿ï¼Œä¸è¦ä¿®æ”¹åŸæ¥çš„è¡Œä¸ºæ–¹æ³•ã€‚</p><p>é€šè¿‡ä¸€æ®µä»£ç æ¥ä½“ç° å¼€æ”¾å°é—­åŸåˆ™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//Â è¿™æ˜¯åŸä»£ç ï¼Œæ­¤ä»£ç ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯æ¬¡æ‰©å±•éƒ½éœ€è¦ä¿®æ”¹makeSoundæ–¹æ³•ï¼Œè¿åäº†å¼€æ”¾å°é—­åŸåˆ™</span><br><span class="line">//æ¯æ¬¡æ‰©å±•æ—¶ï¼Œå› ä¸ºè¦ä¿®æ”¹å…¬å…±æ–¹æ³•makeSoundï¼Œä½ è¿˜è¦æ‹…å¿ƒæœ‰å›å½’æµ‹è¯•çš„ä¸€äº›é—®é¢˜ï¼Œè¿˜è¦å»æµ‹è¯•Duckå’ŒChicken</span><br><span class="line">var makeSound = function(animal)&#123;</span><br><span class="line">  if(animal instanceof Duck)&#123;</span><br><span class="line">    console.log(&apos;å˜å˜å˜&apos;);</span><br><span class="line">  &#125;else if(animal instanceof Chicken)&#123;</span><br><span class="line">    console.log(&apos;å’¯å’¯å’¯&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var Duck = function()&#123;&#125;</span><br><span class="line">var Chicken = function()&#123;&#125;</span><br><span class="line">makeSound(new Duck);</span><br><span class="line">makeSound(new Chicken);</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//Â è¿™æ˜¯æ”¹è‰¯åä»£ç ï¼Œæ­¤ä»£ç ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ¯æ¬¡æ‰©å±•éƒ½ä¸ç”¨ä¿®æ”¹makeSoundæ–¹æ³•ï¼Œæ›´åŠ æ˜“äºæ‰©å±•ï¼Œè€Œä¸”makeSoundæ˜¯ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼Œ</span><br><span class="line">//æ¯æ¬¡æ‰©å±•æ—¶ï¼Œå› ä¸ºä¸ç”¨ä¿®æ”¹å…¬å…±æ–¹æ³•makeSoundï¼Œå°±ä¸ä¼šæ‹…å¿ƒæœ‰å›å½’æµ‹è¯•çš„ä¸€äº›é—®é¢˜ï¼Œä¸ç”¨æ‹…å¿ƒè¿˜è¦å»æµ‹è¯•Duckå’ŒChicken</span><br><span class="line">var makeSound = function(animal)&#123;</span><br><span class="line">  animal.sound();</span><br><span class="line">&#125;</span><br><span class="line">var Duck = function()&#123;&#125;</span><br><span class="line">Duck.prototype.sound = function()&#123;</span><br><span class="line">  console.log(&apos;å˜å˜å˜&apos;);</span><br><span class="line">&#125;</span><br><span class="line">var Chicken = function()&#123;&#125;</span><br><span class="line">Chicken.prototype.sound = function()&#123;</span><br><span class="line">  console.log(&apos;å’¯å’¯å’¯&apos;);</span><br><span class="line">&#125;</span><br><span class="line">makeSound(new Duck);</span><br><span class="line">makeSound(new Chicken);</span><br><span class="line"></span><br><span class="line">//å¢åŠ æ–°éœ€æ±‚ï¼Œæ·»åŠ ä¸€ä¸ªDogè¡Œä¸º</span><br><span class="line">var Dog = function()&#123;&#125;</span><br><span class="line">Dog.prototype.sound = function()&#123;</span><br><span class="line">  console.log(&apos;æ±ªæ±ªæ±ª&apos;);</span><br><span class="line">&#125;</span><br><span class="line">makeSound(new Dog);</span><br></pre></td></tr></table></figure><h3 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p>ä¼˜ç‚¹ï¼šä»ä¸Šé¢ä»£ç ä¾‹å­ä¸­çœ‹åˆ°ï¼Œå¼€æ”¾å°é—­åŸåˆ™çš„ä»£ç ï¼ŒåæœŸå¯ç»´æŠ¤æ€§æ›´é«˜ï¼Œæ‰©å±•æ€§æ›´å¼ºï¼Œå½“æœ‰æ‰©å±•æ–°åŠŸèƒ½æ—¶ï¼Œé£é™©æ›´å°ï¼Œè¦åšçš„å›å½’æµ‹è¯•é—®é¢˜æ›´å°‘ï¼Œå› æ­¤ç»´æŠ¤ã€æ‰©å±•æˆæœ¬æ›´ä½ã€‚<br>ç¼ºç‚¹ï¼šåœ¨é¡¹ç›®åˆšå¼€å§‹æ—¶ï¼Œå› ä¸ºä¸šåŠ¡ä¸ç†Ÿï¼Œæˆ–ä¸šåŠ¡ä¸ç¨³å®šï¼Œå› æ­¤ä½ å¾ˆéš¾æŠ½è±¡å‡º æ–¹æ³•ä¸­æ°¸è¿œå˜åŒ–çš„éƒ¨åˆ†å’Œæ°¸è¿œä¸å˜åŒ–çš„éƒ¨åˆ†è¿›è¡Œå°è£…ã€‚</p><h3 id="æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„"><a href="#æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„" class="headerlink" title="æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„"></a>æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„</h3><p>ä¸ºäº†è§£å†³ä¸Šé¢è¯´çš„ç¼ºç‚¹ï¼Œä¸€ç§ç°å®çš„åšæ³•æ˜¯ï¼Œåœ¨é¡¹ç›®åˆšå¼€å§‹æ—¶ï¼Œæˆ‘ä»¬å‡è®¾æ–¹æ³•çš„æ‰€æœ‰éƒ¨åˆ†éƒ½æ˜¯ä¸å˜åŒ–çš„ï¼Œä¸å¯¹æ–¹æ³•è¿›è¡Œå¼€æ”¾å°é—­è¿›è¡ŒæŠ½è±¡å°è£…å¤„ç†ï¼Œé¡¹ç›®åˆæœŸå¿«é€Ÿç¼–ç å®Œæˆéœ€æ±‚ï¼Œä¸å½±å“é¡¹ç›®è¿›åº¦ã€‚<br>å½“åæœŸå˜åŒ–å‘ç”Ÿæ—¶ï¼Œå†æ¥å›è¿‡å¤´æ¥å°è£…è¿™äº›å˜åŒ–åœ°æ–¹ï¼Œç¡®ä¿ä¸‹ä¸€æ¬¡ä¸ä¼šæ‰è¿›åŒä¸€ä¸ªå‘é‡Œã€‚<br>æˆ‘ä»¬å°†è¿™æ¡ç¼–ç ç»éªŒç§°ä¹‹ä¸º â€˜æ¥å—ç¬¬ä¸€æ¬¡æ„šå¼„â€™ï¼Œä½†æ°¸è¿œä¸ä¼šè¢«åŒæ ·çš„æ‹›æ•°å‡»å€’ç¬¬äºŒæ¬¡ã€‚</p><h2 id="å…¶ä»–å‡†åˆ™"><a href="#å…¶ä»–å‡†åˆ™" class="headerlink" title="å…¶ä»–å‡†åˆ™"></a>å…¶ä»–å‡†åˆ™</h2><p>ä¸‹é¢æ˜¯unixï¼linux è®¾è®¡å“²å­¦ çš„ å‡ æ¡å‡†åˆ™ï¼Œå¯¹jsç¼–ç¨‹ä¾ç„¶æœ‰å€Ÿé‰´ï¼š<br>å‡†åˆ™1:å°å³æ˜¯ç¾<br>å‡†åˆ™2:è®©æ¯ä¸ªç¨‹åºåªåšå¥½ä¸€ä»¶äº‹æƒ…<br>å‡†åˆ™3:å¿«é€Ÿå»ºç«‹åŸå‹ï¼ˆå¿«é€Ÿæ›´æ—©å°†åŠŸèƒ½éª¨æ¶åšå¥½ï¼Œå…ˆè®©ç”¨æˆ·ç”¨èµ·æ¥ï¼Œç„¶åå®¢æˆ·è¾¹ç”¨è¾¹åé¦ˆï¼Œå¼€å‘æ ¹æ®è¿™ä¸ªå®æ–½å¼€å‘å®¢æˆ·åé¦ˆéœ€æ±‚ï¼‰<br>å‡†åˆ™4:èˆå¼ƒé«˜æ•ˆç‡è€Œå–å¯ç§»æ¤æ€§ï¼ˆç¡¬ä»¶å‡çº§æˆ–æµè§ˆå™¨å†…æ ¸å‡çº§åï¼ŒåŸæ¥ä¸é«˜æ•ˆçš„å†™æ³•ï¼Œå› ä¸ºè®¡ç®—æœºç¡¬ä»¶æé«˜ï¼ŒåŸæ¥ä¸é«˜æ•ˆå†™æ³•ä¸å½±å“æ•ˆç‡äº†ï¼‰<br>å‡†åˆ™5:å……åˆ†åœ°æŠ½è±¡å°è£…ç¨‹åºï¼Œä»¥æ­¤è¾¾åˆ°ç¨‹åºå¤ç”¨æ€§</p><h1 id="jsè®¾è®¡æ¨¡å¼"><a href="#jsè®¾è®¡æ¨¡å¼" class="headerlink" title="jsè®¾è®¡æ¨¡å¼"></a>jsè®¾è®¡æ¨¡å¼</h1><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>å•ä¾‹æ¨¡å¼ å®šä¹‰ï¼šä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p><h3 id="æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹"><a href="#æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹"></a>æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹</h3><p>æ ‡å‡†çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹ï¼Œå¦‚ä¸‹ä»£ç ç¬¦åˆå•ä¾‹æ¨¡å¼çš„å‡ ç‚¹å®šä¹‰ï¼š</p><ul><li>Singletomæ˜¯ä¸€ä¸ªç±»ï¼›</li><li>new Singletom æ˜¯å®ƒç‚¹å®ä¾‹ï¼›</li><li>å…¨å±€èŒƒå›´å†…ï¼Œå¯é€šè¿‡Singletomè®¿é—®è¿™ä¸ªç±»ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//æ ‡å‡†çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹</span><br><span class="line">var Singletom = function(name)&#123;</span><br><span class="line">            console.log(name)</span><br><span class="line">          &#125;</span><br><span class="line">Singletom.getInstance = (function()&#123;</span><br><span class="line">var instance = null;</span><br><span class="line">return function(name)&#123;</span><br><span class="line">    if(!instance)&#123;</span><br><span class="line">    instance = new Singletom(name);</span><br><span class="line">    &#125;</span><br><span class="line">    return instance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)()</span><br><span class="line">var a = Singletom.getInstance(&apos;sven1&apos;);</span><br><span class="line">var b = Singletom.getInstance(&apos;sven2&apos;);</span><br><span class="line">console.log(a === b)//true</span><br></pre></td></tr></table></figure><h3 id="å°†ä»¥ä¸Š-æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹-ä¼˜åŒ–"><a href="#å°†ä»¥ä¸Š-æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹-ä¼˜åŒ–" class="headerlink" title="å°†ä»¥ä¸Š æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹ ä¼˜åŒ–"></a>å°†ä»¥ä¸Š æ ‡å‡†å•ä¾‹æ¨¡å¼ç¤ºä¾‹ ä¼˜åŒ–</h3><p>ä¸Šé¢çš„æ ‡å‡†ç¤ºä¾‹ï¼Œå°†new å®ä¾‹å’Œ ç®¡ç†æ˜¯å¦æœ‰æ— ä¸¤ä¸ªåŠŸèƒ½æ”¾åœ¨ä¸€ä¸ªå‡½æ•°å†…ï¼Œè¿èƒŒäº† å•ä¸€èŒè´£åŸåˆ™ï¼Œåœ¨æ­¤æ”¹é€ ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//ä¼˜åŒ–åçš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹</span><br><span class="line">var CreateDiv = function(html)&#123;</span><br><span class="line">          this.html = html;</span><br><span class="line">          this.init()</span><br><span class="line">          &#125;</span><br><span class="line">          </span><br><span class="line">CreateDiv.prototype.init = function()&#123;</span><br><span class="line">    var div = document.createElement(&apos;div&apos;);</span><br><span class="line">    div.innerHTML = this.html;</span><br><span class="line">    document.body.appendChild(div);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var ProxySingletonCreateDiv = (function()&#123;</span><br><span class="line">    var instance;</span><br><span class="line">    return function(html)&#123;</span><br><span class="line">    if(! instance)&#123;</span><br><span class="line">        instance = new CreateDiv(html);</span><br><span class="line">    &#125;</span><br><span class="line">    return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">var a = new ProxySingletonCreateDiv(&apos;sven1&apos;);</span><br><span class="line">var b = new ProxySingletonCreateDiv(&apos;sven2&apos;);</span><br><span class="line">console.log(a === b)//true</span><br></pre></td></tr></table></figure></p><h3 id="é€šç”¨çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹"><a href="#é€šç”¨çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="é€šç”¨çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹"></a>é€šç”¨çš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹</h3><p>ä¸Šé¢æˆ‘ä»¬è§£é‡Šäº†æ ‡å‡†çš„å•ä¾‹æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ å®¹æ˜“ç†è§£å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬æ›´åå‘ä½¿ç”¨åŸºäºä»¥ä¸Šæ ‡å‡†å•ä¾‹æ¨¡å¼æ”¹é€ è€Œæ¥çš„é€šç”¨çš„å•ä¾‹æ¨¡å¼ã€‚<br>æˆ‘ä»¬ä¸å¿…æ‹˜æ³¥äºå•ä¾‹æ¨¡å¼çš„å®šä¹‰ï¼Œå•ä¾‹æ¨¡å¼å¿…é¡»è¦æ±‚æ˜¯ä¸€ä¸ªç±» å’Œ å®ä¾‹ï¼Œ<br>å…¶å®ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ä¾‹å…¶å®å°±æ˜¯å¯¹callæˆ–applyçš„åº”ç”¨ï¼Œæˆ‘ä»¬ä¸å¿…æ‹˜æ³¥äºnew å®ä¾‹ï¼Œå¤§å¯ å°† å‡½æ•°çš„ç›´æ¥æ‰§è¡Œ æ¥ ä»£æ›¿å®ä¾‹ã€‚<br>å•ä¾‹æ¨¡å¼çš„ç²¾ç¥å°±æ˜¯ï¼š</p><ul><li>æœ‰ä¸€ä¸ªå…¨å±€çš„å‡½æ•°ï¼ˆç±»ï¼‰</li><li>æ­¤å‡½æ•°è¢«æ‰§è¡Œæˆ–è¢«å®ä¾‹ä¸€æ¬¡<br>æ»¡è¶³äº†ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶ï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸ºå•ä¾‹è®¾è®¡æ¨¡å¼ï¼›<br>ä¸‹é¢å†™äº†ä¸€ä¸ªç»å…¸ å•ä¾‹æ¨¡å¼ç¤ºä¾‹ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//ä¼˜åŒ–åçš„å•ä¾‹æ¨¡å¼ç¤ºä¾‹</span><br><span class="line">var num = 0;</span><br><span class="line">var CreateDiv = function(...args)&#123;</span><br><span class="line">    num ++;</span><br><span class="line">    console.log(args[0],`ä¸€å…±æ‰§è¡Œäº†$&#123;num&#125;æ¬¡`);</span><br><span class="line">    var div = document.createElement(&apos;div&apos;);</span><br><span class="line">    div.innerHTML = this.html;</span><br><span class="line">    document.body.appendChild(div);</span><br><span class="line">    return div;</span><br><span class="line">&#125;</span><br><span class="line">ProxySingletonCreateDiv ä¸“é—¨ç”¨æ¥ç®¡ç† å‡½æ•°æ˜¯å¦æ‰§è¡Œ</span><br><span class="line">var ProxySingletonCreateDiv = function(fn)&#123;</span><br><span class="line">    var instance;</span><br><span class="line">    return function()&#123;</span><br><span class="line">    if(! instance)&#123;</span><br><span class="line">        instance = fn.apply(this, arguments);</span><br><span class="line">    &#125;</span><br><span class="line">    return instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var a = ProxySingletonCreateDiv(CreateDiv);</span><br><span class="line"></span><br><span class="line">a(&apos;å•ä¾‹æ¨¡å¼&apos;)//å•ä¾‹æ¨¡å¼ ä¸€å…±æ‰§è¡Œäº†1æ¬¡</span><br><span class="line">a(&apos;å•ä¾‹æ¨¡å¼&apos;)//å•ä¾‹æ¨¡å¼ ä¸€å…±æ‰§è¡Œäº†1æ¬¡</span><br><span class="line"></span><br><span class="line">//å¦‚æœæˆ‘ä»¬è¦æ‰©å±•ï¼Œå¢åŠ ä¸€ä¸ªCreateFrameï¼Œåªéœ€è¿™æ ·åš,éå¸¸å®¹æ˜“æ‰©å±•</span><br><span class="line">var CreateFrame = function(...args)&#123;</span><br><span class="line">    console.log(args[0]);</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br><span class="line">var f = ProxySingletonCreateDiv(CreateFrame);</span><br><span class="line">f(&apos;å•ä¾‹æ¨¡å¼&apos;)//å•ä¾‹æ¨¡å¼ ä¸€å…±æ‰§è¡Œäº†1æ¬¡</span><br><span class="line">f(&apos;å•ä¾‹æ¨¡å¼&apos;)//å•ä¾‹æ¨¡å¼ ä¸€å…±æ‰§è¡Œäº†1æ¬¡</span><br></pre></td></tr></table></figure><h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>è´­ç‰©è½¦ï¼Œç™»é™†ï¼Œredux çš„ storeéƒ½æ˜¯å•ä¾‹æ¨¡å¼çš„è¿ç”¨ã€‚</p><h3 id="å¦‚ä½•å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼"><a href="#å¦‚ä½•å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼" class="headerlink" title="å¦‚ä½•å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼"></a>å¦‚ä½•å†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼</h3><p>ç”±ä¸Šé¢ä¾‹å­çœ‹åˆ°ï¼Œå†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼çš„åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šè¦å€ŸåŠ©é—­åŒ…æ¥å®ç°ã€‚<br>é€šè¿‡ä¸Šé¢çš„ä¾‹å­çœ‹åˆ°ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œè¯·å°†ç®¡ç†å•ä¾‹ å’Œ åŠŸèƒ½å‡½æ•° åˆ†å¼€ç¼–å†™ã€‚</p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><p>è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿç§°ä¸ºå‘å¸ƒè®¢é˜…æ¨¡å¼</p><h3 id="es6ç¤ºä¾‹"><a href="#es6ç¤ºä¾‹" class="headerlink" title="es6ç¤ºä¾‹"></a>es6ç¤ºä¾‹</h3><h4 id="è®¾è®¡æ€è·¯"><a href="#è®¾è®¡æ€è·¯" class="headerlink" title="è®¾è®¡æ€è·¯"></a>è®¾è®¡æ€è·¯</h4><p>å¯¹ä¸‹é¢ä¾‹å­è§£è¯´ï¼Œ<br>æ–°é—»å…¬å¸é€šè¿‡ æš´éœ²å‡ºæ¥ä¸€ä¸ªæ¥å£attachï¼Œç”¨æ¥ç»™è®¢é˜…è€…(è§‚å¯Ÿè€…)æŠ¥åæˆ–å‚åŠ è®¢é˜…ï¼Œ<br>æ–°é—»å…¬å¸å†…éƒ¨ï¼Œç”¨ä»¥ä¸‹å‡ ä¸ªå±æ€§ç”¨æ¥è®°å½•æƒ…å†µï¼š<br>this.foodState â€”- å°†è¦æ¨é€çš„ é£Ÿå“æ¶ˆæ¯<br>this.houseState â€”- å°†è¦æ¨é€çš„ æˆ¿äº§æ¶ˆæ¯<br>this.foodObservers â€”- é£Ÿå“æ¶ˆæ¯è®¢é˜…è€…ä¸ªäººä¿¡æ¯<br>this.houseObservers â€”- æˆ¿äº§æ¶ˆæ¯è®¢é˜…è€…ä¸ªäººä¿¡æ¯<br>this.deliveryType â€”- å°†è¦æ¨é€çš„æ¶ˆæ¯çš„ç±»åˆ«<br>deliveryState â€”- æ¨é€æ¶ˆæ¯<br>notifyAllObservers  â€”- ç»™æ¯ä¸ªè®¢é˜…è€…æ‰“ç”µè¯å°†æ¶ˆæ¯é€šçŸ¥ç»™è®¢é˜…è€…<br>getState â€”- æš´éœ²ç»™è®¢é˜…è€…çš„API,è®¢é˜…è€…æ¥åˆ°é€šçŸ¥æ¶ˆæ¯çš„ç”µè¯åï¼Œå¯é€šè¿‡å…¬å¸æä¾›çš„æ¸ é“ç½‘ç«™æˆ–çŸ­ä¿¡æ¥çœ‹æ–°é—»</p><p>è®¢é˜…è€…ï¼š<br>è®¢é˜…è€…ç”¨ä»¥ä¸‹å‡ ä¸ªå±æ€§æ¥è®°å½•æƒ…å†µ<br>this.phoneNum â€”- è®¢é˜…æ–°é—»éœ€è¦æä¾›ç»™æ–°é—»å…¬å¸çš„ æ‰‹æœºå·ç <br>this.subscribeType  â€”- è®¢é˜…æ–°é—»éœ€è¦æä¾›ç»™æ–°é—»å…¬å¸çš„ æ–°é—»ç±»åˆ«<br>this.company  â€”- ç”¨æ¥ä¿å­˜å…¬å¸èµ„æ–™ï¼Œåˆšå¼€å§‹æ˜¯æ ¹æ®å…¬å¸æä¾›çš„æŠ¥åæ–¹å¼attachè¿›è¡ŒæŠ¥åï¼ŒåæœŸæ–°é—»å‘é€æ¶ˆæ¯æ˜¯ï¼Œ<br>                   å¯ä»¥é€šè¿‡å…¬å¸æä¾›çš„æ¸ é“(this.company.getState)æŸ¥çœ‹æ¶ˆæ¯ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹æ–°é—»æœåŠ¡å…¬å¸çš„æœåŠ¡æ€åº¦ï¼Œç»™å…¬å¸åé¦ˆæˆ–æŠ•è¯‰å»ºè®®<br>this.company.attach é€šè¿‡å…¬å¸å¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œç™»è®°æŠ¥åè®¢é˜…ã€‚</p><p>cellphone è®¢é˜…è€…å¯¹å¤–æš´éœ²ç»™æ–°é—»å…¬å¸è‡ªå·±æ¥æ”¶æ¶ˆæ¯çš„æ–¹å¼ï¼Œç”¨æ¥updateã€‚</p><h4 id="ç¤ºä¾‹å°ç»“"><a href="#ç¤ºä¾‹å°ç»“" class="headerlink" title="ç¤ºä¾‹å°ç»“"></a>ç¤ºä¾‹å°ç»“</h4><p>æ–°é—»å…¬å¸å¿…é¡» å¯¹è®¢é˜…è€…æš´éœ² è®¢é˜…æ–¹å¼attachï¼›<br>è®¢é˜…è€…å¿…é¡» å¯¹å…¬å¸æš´éœ² æ¥æ”¶æ¶ˆæ¯æ–¹å¼cellphoneï¼›<br>å› ä¸ºè®¢é˜…è€…è¦ ä¿å­˜å…¬å¸çš„èµ„æ–™ï¼Œä¾‹å¦‚è·å–è®¢é˜…æ–¹å¼ç­‰ç­‰ï¼Œæ‰€ä»¥è®¢é˜…è€…å¿…é¡»è®¾è®¡ä¸€ä¸ªå±æ€§ç”¨æ¥ä¿å­˜å…¬å¸è¿™ä¸ªå¯¹è±¡æ€»ç±»ï¼›<br>å› ä¸ºå…¬å¸è¦ ä¿å­˜è®¢é˜…è€…çš„èµ„æ–™ï¼Œä¾‹å¦‚è·å–è®¢é˜…è€…çš„æ¥æ”¶æ–¹å¼ç­‰ç­‰ï¼Œæ‰€ä»¥å…¬å¸å¿…é¡»è®¾è®¡ä¸€ä¸ªå±æ€§ç”¨æ¥ä¿å­˜è®¢é˜…è€…å®Œæ•´ç±»ï¼›</p><p>å› ä¸ºå…¬å¸è¦ å‘é€æ¶ˆæ¯deliveryStateï¼Œå°±è¦ç”¨ä¸€ä¸ªå±æ€§æ¥ä¿å­˜å°†è¦å‘çš„æ¶ˆæ¯foodStateï¼Œç„¶åè¦æ‰§è¡Œæ‰“ç”µè¯é€šçŸ¥notifyAllObserversï¼Œ<br>é€šçŸ¥å®Œåï¼Œè¿˜è¦æä¾›ç½‘ç«™æˆ–appæˆ–çŸ­ä¿¡ç­‰æ¸ é“getStateï¼Œè®©è®¢é˜…è€…æŸ¥çœ‹æ–°é—»ã€‚</p><h4 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><p>æ­¤ä»£ç é’ˆå¯¹ä¸Šé¢è§£è¯´è€Œå†™çš„ï¼Œæ­¤ç¤ºä¾‹ä»£ç çš„å¥½å¤„æ˜¯å¯ä»¥å¾ˆå¥½åœ°å…ˆç†è§£å¥½è§‚å¯Ÿè€…åˆ°åº•æ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿ã€‚<br>ä½†æ­¤ä»£ç ä¹Ÿæœ‰å¼Šç«¯ï¼Œä¾‹å¦‚NewsCompanyä¸æ˜“ç»´æŠ¤æ€§ï¼ŒNewsCompanyä¸­ç»´æŠ¤äº†foodï¼Œhouseï¼Œå¦‚æœå°†æ¥å¢åŠ äº†moneyç­‰ç­‰å‘¢ï¼Œéœ€è¦æ”¹å†™NewsCompanyå†…éƒ¨ã€‚æ‰€ä»¥NewsCompanyéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">// ä¸»é¢˜ï¼Œæ¥æ”¶çŠ¶æ€å˜åŒ–ï¼Œè§¦å‘æ¯ä¸ªè§‚å¯Ÿè€…</span><br><span class="line"></span><br><span class="line">class NewsCompany &#123;</span><br><span class="line">    constructor() &#123;</span><br><span class="line">        this.foodState = 0</span><br><span class="line">        this.houseState = 0</span><br><span class="line">        this.foodObservers = []</span><br><span class="line">        this.houseObservers = []</span><br><span class="line">        this.deliveryType = 0</span><br><span class="line">    &#125;</span><br><span class="line">    getState() &#123;</span><br><span class="line">        if(this.deliveryType === &apos;food&apos;)&#123;</span><br><span class="line">            return this.foodState</span><br><span class="line">        &#125;</span><br><span class="line">        return this.houseState</span><br><span class="line">    &#125;</span><br><span class="line">    deliveryState(state,deliveryType) &#123;</span><br><span class="line">        if(deliveryType === &apos;food&apos;)&#123;</span><br><span class="line">            this.foodState = state</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            this.houseState = state</span><br><span class="line">        &#125;</span><br><span class="line">        this.deliveryType = deliveryType;</span><br><span class="line">        this.notifyAllObservers(deliveryType)</span><br><span class="line">    &#125;</span><br><span class="line">    attach(observer) &#123;</span><br><span class="line">        if(observer.subscribeType === &apos;food&apos;)&#123;</span><br><span class="line">            this.foodObservers.push(observer)</span><br><span class="line">        &#125;</span><br><span class="line">        if(observer.subscribeType === &apos;house&apos;)&#123;</span><br><span class="line">            this.houseObservers.push(observer)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    notifyAllObservers(type) &#123;</span><br><span class="line">        const observers = type === &apos;food&apos; ? this.foodObservers : this.houseObservers;</span><br><span class="line">        observers.forEach(observer =&gt; &#123;</span><br><span class="line">            //å‘å¸ƒæ¶ˆæ¯ï¼Œç»™æ¯ä¸ªè®¢é˜…è€…ç•™çš„ç”µè¯æ‰“ç”µè¯ï¼Œé€šçŸ¥è®¢é˜…è€…</span><br><span class="line">            observer.cellphone()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è§‚å¯Ÿè€…ï¼Œç­‰å¾…è¢«è§¦å‘</span><br><span class="line">class Observer &#123;</span><br><span class="line">    constructor(phoneNum, subscribeType ,company) &#123;</span><br><span class="line">        this.phoneNum = phoneNum</span><br><span class="line">        //è®¢é˜…çš„ç¬¬ä¸€æ­¥ï¼Œå°±å¿…é¡»è·å¾—è®¢é˜…å†…å®¹çš„èµ„æ–™æˆ–å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¯¹è±¡çœ‹æˆæ˜¯æ–°é—»æœåŠ¡å…¬å¸ï¼Œè¿™ä¸ªæ–°é—»æœåŠ¡å…¬å¸æä¾›å¾ˆå¤šç§ç±»çš„æ–°é—»ï¼šæˆ¿äº§æ–°é—»ï¼Œé£Ÿå“æ–°é—»ï¼Œä½“è‚²æ–°é—»ã€‚ã€‚ã€‚ã€‚</span><br><span class="line">        this.company = company //å¿…ä¸å¯å°‘ï¼Œå°†å…¬å¸èµ„æ–™ä¿å­˜ä¸‹æ¥ï¼Œå¯ä»¥é’ˆå¯¹æ–°é—»æœåŠ¡å…¬å¸çš„æœåŠ¡æ€åº¦ï¼Œç»™å…¬å¸åé¦ˆæˆ–æŠ•è¯‰å»ºè®®</span><br><span class="line">        this.subscribeType = subscribeType</span><br><span class="line">        this.company.attach(this)//æŠ¥åï¼Œå‚åŠ è®¢é˜…ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ä¸ºè®¢é˜….attachå°±æ˜¯å…¬å¸ç»™è®¢é˜…è€…çš„æŠ¥åæ–¹å¼</span><br><span class="line">    &#125;</span><br><span class="line">    //cellphone æ–°é—»æœåŠ¡å…¬å¸ï¼Œæœ‰æ¶ˆæ¯æ—¶ä¼šæ‰“ç”µè¯ç»™æ¯ä¸ªè®¢é˜…è€…ï¼Œcellphoneæ¨¡æ‹Ÿçš„æ˜¯è®¢é˜…è€…æ‰‹æœºæ¥åˆ°ç”µè¯çš„è¡Œä¸ºï¼Œå¾ˆå¤šç¤ºä¾‹ä¸­å°†cellphoneå†™ä½œupdateï¼Œä¸è¿‡ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œåœ¨æ­¤å†™æˆcellphone</span><br><span class="line">    cellphone() &#123;</span><br><span class="line">        console.log(`$&#123;this.phoneNum&#125; æ”¶åˆ°, stateæ–°é—»: $&#123;this.company.getState()&#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// æµ‹è¯•ä»£ç </span><br><span class="line">let newsCompany = new NewsCompany()</span><br><span class="line">//å¯¹äºæ–°é—»æœåŠ¡å…¬å¸æ¥è¯´ï¼Œä»–åªéœ€è¦çŸ¥é“ è®¢é˜…è€… ç”µè¯å·ç  å’Œ è®¢é˜…å†…å®¹å³å¯ï¼Œä¸€ä¸ªäººå¯ä»¥æœ‰å¾ˆå¤šç‰¹æ€§ï¼Œä¾‹å¦‚åå­—ï¼Œæ€§åˆ«ï¼Œçˆ±å¥½ç­‰ç­‰ï¼Œ</span><br><span class="line">//ä½†å¯¹äºæ–°é—»æœåŠ¡å…¬å¸è€Œè¨€ï¼Œå®ƒåªéœ€è¦çŸ¥é“è®¢é˜…è€…çš„ æ‰‹æœºå·ç  å’Œ æ–°é—»ç±»åˆ«ï¼Œæ‰€ä»¥ä¸€ä¸ªè®¢é˜…è€…çš„å¯¹è±¡ï¼Œåªéœ€è¦å…·å¤‡æ‰‹æœºå·ç å’Œè®¢é˜…æ–°é—»ç±»åˆ«ä¸¤ä¸ªå±æ€§å³å¯ã€‚</span><br><span class="line">//æ‰€ä»¥æˆ‘ä»¬ä¸Šé¢è®¾è®¡çš„è®¢é˜…è€…ç±»Observerï¼Œåªæœ‰phoneNum, subscribeType ä¸¤ä¸ªå±æ€§ã€‚</span><br><span class="line">//ä»è§‚å¯Ÿè€…çš„è§’åº¦çœ‹ï¼Œå®ƒè¿˜éœ€è¦ ä¸€ä¸ªå±æ€§æ¥å°†å…¬å¸èµ„æ–™ä¿å­˜ä¸‹æ¥ï¼Œå¯ä»¥é’ˆå¯¹æ–°é—»æœåŠ¡å…¬å¸çš„æœåŠ¡æ€åº¦ï¼Œç»™å…¬å¸åé¦ˆæˆ–æŠ•è¯‰å»ºè®®</span><br><span class="line">//åŸºäºä»¥ä¸Šï¼Œä¸€ä¸ªè®¢é˜…è€…ï¼Œéœ€è¦è®¾ç½®ä¸‰ä¸ªå±æ€§ï¼Œè€Œcellphoneæ˜¯å…¬å¸æ‰“ç”µè¯æ¥æ—¶ï¼Œæ¨¡æ‹Ÿè®¢é˜…è€…æ‰‹æœºæ¥åˆ°ç”µè¯çš„è¡Œä¸º</span><br><span class="line">let o1 = new Observer(&apos;15099281126&apos;, &apos;food&apos;, newsCompany)</span><br><span class="line">let o2 = new Observer(&apos;15099281127&apos;, &apos;food&apos;, newsCompany)</span><br><span class="line">let o3 = new Observer(&apos;15099281128&apos;, &apos;food&apos;, newsCompany)</span><br><span class="line">newsCompany.deliveryState(&apos;å¥¶åˆ¶é£Ÿå“æ–°é—»&apos;,&apos;food&apos;);//ç»™æ¯ä¸ªè®¢é˜…è€…å‘å¸ƒæ¶ˆæ¯</span><br><span class="line"></span><br><span class="line">let o7 = new Observer(&apos;13899761271&apos;, &apos;house&apos;, newsCompany)</span><br><span class="line">let o8 = new Observer(&apos;13899761272&apos;, &apos;house&apos;, newsCompany)</span><br><span class="line">let o9 = new Observer(&apos;13899761273&apos;, &apos;house&apos;, newsCompany)</span><br><span class="line">newsCompany.deliveryState(&apos;æˆ¿äº§æ–°é—»&apos;,&apos;house&apos;);//ç»™æ¯ä¸ªè®¢é˜…è€…å‘å¸ƒæ¶ˆæ¯</span><br></pre></td></tr></table></figure></p><h4 id="ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼ä¸€"><a href="#ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼ä¸€" class="headerlink" title="ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼ä¸€"></a>ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼ä¸€</h4><p>å¯¹ç¤ºä¾‹ä»£ç ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼ä¸€ï¼š<br>ä¸Šé¢ä»£ç ä¸æ˜“æ‰©å±•ï¼Œå°†ä¸Šé¢ä»£ç ä¼˜åŒ–ï¼šNewsCompanyä¸­å»æ‰constructorï¼Œå¹¶ä¸”æ”¹å†™foodä¸houseåˆ‡æ¢ï¼Œå°†cellphoneæ”¹ä¸ºcallbackä¸å†ç»Ÿä¸€ç®¡ç†callbackï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">class NewsCompany &#123;</span><br><span class="line">    deliveryState(state,deliveryType) &#123;</span><br><span class="line">        this[`$&#123;deliveryType&#125;State`] = state;</span><br><span class="line">        this.deliveryType = deliveryType;</span><br><span class="line">        this.notifyAllObservers()</span><br><span class="line">    &#125;</span><br><span class="line">    attach(observer) &#123;</span><br><span class="line">        const &#123;subscribeType&#125; = observer;</span><br><span class="line">        if(!this[`$&#123;subscribeType&#125;Observers`])&#123;</span><br><span class="line">            this[`$&#123;subscribeType&#125;Observers`] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        this[`$&#123;subscribeType&#125;Observers`].push(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    notifyAllObservers() &#123;</span><br><span class="line">        const observers = this[`$&#123;this.deliveryType&#125;Observers`];</span><br><span class="line">        observers.forEach(observer =&gt; &#123;</span><br><span class="line">            observer.callback(this[`$&#123;this.deliveryType&#125;State`], this, observer)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// è§‚å¯Ÿè€…ï¼Œç­‰å¾…è¢«è§¦å‘</span><br><span class="line">class Observer &#123;</span><br><span class="line">    constructor(phoneNum, subscribeType ,company, callback) &#123;</span><br><span class="line">        this.phoneNum = phoneNum</span><br><span class="line">        this.subscribeType = subscribeType</span><br><span class="line">        this.callback = callback</span><br><span class="line">        company.attach(this)//æŠ¥åï¼Œå‚åŠ è®¢é˜…ï¼Œ</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let newsCompany = new NewsCompany()</span><br><span class="line">//state, newsCompany, observerMyself å°†newsCompanyå’ŒobserverMyselféƒ½ä¼ ç»™callbackï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€</span><br><span class="line">let o1 = new Observer(&apos;15099281126&apos;, &apos;food&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`15099281126 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">let o2 = new Observer(&apos;15099281127&apos;, &apos;food&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`15099281127 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">let o3 = new Observer(&apos;15099281128&apos;, &apos;food&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`15099281128 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">newsCompany.deliveryState(&apos;å¥¶åˆ¶é£Ÿå“æ–°é—»&apos;,&apos;food&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let o7 = new Observer(&apos;13899761271&apos;, &apos;house&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`13899761271 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">let o8 = new Observer(&apos;13899761272&apos;, &apos;house&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`13899761272 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">let o9 = new Observer(&apos;13899761273&apos;, &apos;house&apos;, newsCompany, (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">    console.log(`13899761273 æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">&#125;)</span><br><span class="line">newsCompany.deliveryState(&apos;æˆ¿äº§æ–°é—»&apos;,&apos;house&apos;);</span><br></pre></td></tr></table></figure><h4 id="ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼äºŒ"><a href="#ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼äºŒ" class="headerlink" title="ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼äºŒ"></a>ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼äºŒ</h4><p>å¯¹ç¤ºä¾‹ä»£ç ä¼˜åŒ–åŠå»¶ä¼¸æ–¹å¼äºŒï¼š<br>ä½ ä¼šå‘ç°ä¸Šé¢çš„phoneNumå…¶å®å¯æœ‰å¯æ— ï¼ŒNewsCompanyä¿æŒè·Ÿä¸Šé¢ä¸å˜ï¼Œæ”¹é€ å…¶ä»–éƒ¨åˆ†ï¼š<br>åˆ é™¤phoneNum,<br>å°†attachæå–å‡ºæ¥ï¼Œ<br>åˆ é™¤Observerç±»ï¼Œç›´æ¥ç”¨å‚æ•°æ¥ä»£æ›¿ï¼Œ<br>å‚æ•°å› ä¸ºå¯èƒ½ä¼šè¶…è¿‡3ä¸ªæ”¹æˆoptionså¯¹è±¡æ–¹å¼å®¹æ˜“æ‰©å±•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">let newsCompany = new NewsCompany()</span><br><span class="line">//state, newsCompany, observerMyself å°†newsCompanyå’ŒobserverMyselféƒ½ä¼ ç»™callbackï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€</span><br><span class="line">newsCompany.attach(&#123;</span><br><span class="line">    subscribeType : &apos;food&apos;, </span><br><span class="line">    callback: (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">      console.log(`o1 è®¢é˜…æˆ–è§‚å¯Ÿè€… æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">newsCompany.attach(&#123;</span><br><span class="line">    subscribeType : &apos;food&apos;, </span><br><span class="line">    callback: (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">      console.log(`o2 è®¢é˜…æˆ–è§‚å¯Ÿè€… æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">newsCompany.attach(&#123;</span><br><span class="line">    subscribeType : &apos;food&apos;, </span><br><span class="line">    callback: (state, newsCompany, observerMyself)=&gt;&#123;</span><br><span class="line">      console.log(`o3 è®¢é˜…æˆ–è§‚å¯Ÿè€… æ”¶åˆ°, stateæ–°é—»: `,state)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">newsCompany.deliveryState(&apos;å¥¶åˆ¶é£Ÿå“æ–°é—»&apos;,&apos;food&apos;);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œä½ æ˜¯å¦å¯ä»¥å°†attachæƒ³è±¡æˆ addEventListenerï¼ŒdeliveryStateæƒ³è±¡æˆfireæˆ–triggerã€‚</p><h3 id="es5ç¤ºä¾‹"><a href="#es5ç¤ºä¾‹" class="headerlink" title="es5ç¤ºä¾‹"></a>es5ç¤ºä¾‹</h3><p>ç”±äºjså¤©ç”Ÿå¯ä»¥å¾ˆä¼˜é›…åœ°ä½¿ç”¨èŠ±æ‹¬å·æ¥æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸ç”¨é€šè¿‡classå®ä¾‹åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¯å¾ˆå®¹æ˜“é€šè¿‡es5æ¥å†™ä¸€ä¸ªè§‚å¯Ÿè€…ä¸è®¢é˜…æ¨¡å¼ç¤ºä¾‹ï¼š</p><h4 id="ç¤ºä¾‹ä»£ç -1"><a href="#ç¤ºä¾‹ä»£ç -1" class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">var Event = (function()&#123;</span><br><span class="line">    var ClientList = &#123;&#125;,</span><br><span class="line">    listen,</span><br><span class="line">    trigger,</span><br><span class="line">    remove;</span><br><span class="line">    listen = function(key, fn)&#123;</span><br><span class="line">        if(!ClientList[key])&#123;</span><br><span class="line">            ClientList[key] = []</span><br><span class="line">        &#125;</span><br><span class="line">        ClientList[key].push(fn);</span><br><span class="line">    &#125;</span><br><span class="line">    trigger = function()&#123;</span><br><span class="line">        var key = Array.prototype.shift.call(arguments),</span><br><span class="line">        fns = ClientList[key];</span><br><span class="line">        if(!fns || fns.listen === 0)&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        for(var i = 0; i&lt;fns.length; i++)&#123;</span><br><span class="line">            fns[i].apply(this,arguments);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    remove = function(key, fn)&#123;</span><br><span class="line">        var fns = ClientList[key];</span><br><span class="line">        if(!fns)&#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        var fns = ClientList[key];</span><br><span class="line">        if(!fn)&#123;</span><br><span class="line">            fns &amp;&amp; (fns.length = 0);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            for (var l = fns.length -1;l&gt;0;l--)&#123;</span><br><span class="line">                var _fn = fns[l];</span><br><span class="line">                if(_fn === fn)&#123;</span><br><span class="line">                    fns.splice(l,1);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;listen,trigger,remove&#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">Event.listen(&apos;squeremeter88&apos;, function(price)&#123;</span><br><span class="line">    console.log(&apos;ä»·æ ¼= &apos;+price);</span><br><span class="line">&#125;)</span><br><span class="line">Event.listen(&apos;squeremeter88&apos;, function(price)&#123;</span><br><span class="line">    console.log(&apos;ä»·æ ¼_111= &apos;+price);</span><br><span class="line">&#125;)</span><br><span class="line">Event.trigger(&apos;squeremeter88&apos;, 20000);</span><br></pre></td></tr></table></figure><p>å½“ä¸šåŠ¡å¤æ‚åï¼Œå¯èƒ½å‡ºç°å‘½åæ±¡æŸ“çš„ç°è±¡ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å†™Eventï¼Œé€šè¿‡Event.creat(namespace).listen(add),<br>Event.creat(namespace).trigger(add),è¯¦ç»†å¯çœ‹ ã€Šjsè®¾è®¡æ¨¡å¼ã€‹ä¹¦</p><h4 id="åº”ç”¨åœºæ™¯ï¼š"><a href="#åº”ç”¨åœºæ™¯ï¼š" class="headerlink" title="åº”ç”¨åœºæ™¯ï¼š"></a>åº”ç”¨åœºæ™¯ï¼š</h4><p>ä¸€ä¸ªæŒ‰é’®è¢«ç‚¹å‡»æ—¶ï¼Œå‡ºå‘ä¸€ä¸ªdivæ˜¾ç¤ºæœ€æ–°çš„countå€¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;button id=&quot;count&quot;&gt;click&lt;/button&gt;</span><br><span class="line">&lt;div id=&quot;show&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var a = (function()&#123;</span><br><span class="line">    var count = 0;</span><br><span class="line">    var button = document.getElementById(&apos;count&apos;);</span><br><span class="line">    button.onclick = function()&#123;</span><br><span class="line">        //Event å°±æ˜¯ä¸Šé¢çš„Eventä¸å˜ã€‚</span><br><span class="line">        Event.trigger(&apos;add&apos;, count++)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">var b = (function()&#123;</span><br><span class="line">    var div = document.getElementById(&apos;show&apos;);</span><br><span class="line">    Event.listen(&apos;add&apos;, function(count)&#123;</span><br><span class="line">        div.innerHTML = count</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure></p><h3 id="åº”ç”¨åœºæ™¯-1"><a href="#åº”ç”¨åœºæ™¯-1" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>ç½‘é¡µäº‹ä»¶ç»‘å®šï¼Œpromiseçš„ä¸€ç³»åˆ—thenï¼Œè¿˜æœ‰reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å…¶å®éƒ½æ˜¯å®šä¹‰callbaseï¼Œæ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼</p><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>å®ƒå®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ã€‚<br>å®ƒçš„ç‰¹å¾æ˜¯ï¼Œ</p><ul><li>å‘å¸ƒå’Œè®¢é˜…</li><li>ä¸€å¯¹å¤šï¼ˆåŒ…å«ä¸€å¯¹ä¸€ï¼‰<br>è®¾è®¡çš„åŸåˆ™ï¼š<br>ä¸»é¢˜ä¸è§‚å¯Ÿè€…åˆ†ç¦»ï¼Œä¸æ˜¯ä¸»åŠ¨è§¦å‘è€Œæ˜¯è¢«åŠ¨ç›‘å¬ï¼Œä¸¤è€…è§£è€¦ã€‚</li></ul><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ä¸Šé¢ä¸¾ä¾‹æ¥es6å’Œes5ä¸¤ç§æ–¹å¼çš„è§‚å¯Ÿè€…æ¨¡å¼ç¤ºä¾‹ï¼Œes6å’Œes5ä¸¤ç§æ–¹å¼ï¼Œå„æœ‰å„çš„ä¼˜ç‚¹ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¸ºäº†ä¾¿äºç›´è§‚ç†è§£è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå¯å…ˆè¡Œè®°å¿†es5ç¤ºä¾‹çš„å½¢å¼ã€‚</p><h3 id="ä¼˜ç¼ºç‚¹-2"><a href="#ä¼˜ç¼ºç‚¹-2" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h3><p>ç¼ºç‚¹ è§‚å¯Ÿè€…æ¨¡å¼å®¹æ˜“éšè— ä»£ç é€»è¾‘ï¼Œè¿‡é‡ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒåæœŸåæœŸç»´æŠ¤æ—¶ï¼Œå¯èƒ½ä¸å¥½æ‰¾å…¥å£çš„é£é™©å¸¦æ¥ä¸€äº›éº»çƒ¦ã€‚<br>ä¼˜ç‚¹ è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥ç”¨æ¥å¾ˆå¥½åœ°å†™å¼‚æ­¥ç¼–ç¨‹ï¼Œäº‹ä»¶é©±åŠ¨ç¼–ç¨‹ã€‚</p><h2 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h2><h3 id="åä¾‹"><a href="#åä¾‹" class="headerlink" title="åä¾‹"></a>åä¾‹</h3><p>ä¸¾ä¾‹ä¸€ä¸ªå¸¸è§„ç¼–ç¨‹ï¼Œä½†è¿™ä¸ªç¼–ç¨‹æ˜¯ä¸€ä¸ªä¸å¥½çš„ä¾‹å­â€“åä¾‹ï¼Œä¸‹èŠ‚ä¼šåŸºäºæ­¤åšä¼˜åŒ–<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">var Light = function()&#123;</span><br><span class="line">    this.state = &apos;off&apos;</span><br><span class="line">    this.button = null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Light.prototype.init = function()&#123;</span><br><span class="line">    var button = document.createElement(&apos;button&apos;),</span><br><span class="line">    self = this;</span><br><span class="line">    this.button = document.body.appendChild(button);</span><br><span class="line">    this.button.innerHTML = &apos;å¼€å…³&apos;;</span><br><span class="line">    this.button.onclick = function()&#123;</span><br><span class="line">        self.buttonWasPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Light.prototype.buttonWasPressed = function(newState)&#123;</span><br><span class="line">   if(this.state === &apos;off&apos;)&#123;</span><br><span class="line">       console.log(&apos;å¼±å…‰&apos;);//ç”¨consoleæ¥è±¡å¾ çŠ¶æ€è¡Œä¸º</span><br><span class="line">       this.state = &apos;weakLight&apos;;</span><br><span class="line">   &#125;else if(this.state === &apos;weakLight&apos;)&#123;</span><br><span class="line">       console.log(&apos;é«˜å…‰&apos;);</span><br><span class="line">       this.state = &apos;strongLight&apos;;</span><br><span class="line">   &#125;else if(this.state === &apos;strongLight&apos;)&#123;</span><br><span class="line">       console.log(&apos;å…³ç¯&apos;);</span><br><span class="line">       this.state = &apos;off&apos;;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">var light = new Light();</span><br><span class="line">light.init();</span><br></pre></td></tr></table></figure></p><p>éœ€æ±‚æ¥äº†ï¼Œå¦‚æœå†å¢åŠ ä¸€ä¸ªè¶…çº§å¼ºå…‰ï¼Œé‚£ä¹ˆå°±è¦æ”¹å†™buttonWasPressedï¼Œè¿åäº†å¼€æ”¾å°é—­åŸåˆ™ï¼Œè€Œä¸”Light.prototype.buttonWasPressedä¼šè¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œ<br>ä»£ç ä¸­çŠ¶æ€è¡Œä¸ºåªæœ‰ä¸€å¥console.log(),ä½†å®é™…å¼€å‘ä¸­ï¼Œè‚¯å®šä¸æ­¢è¿™ä¸€å¥ä»£ç ï¼ŒåŸºäºä»¥ä¸Šä¸¤ç‚¹ç†ç”±ï¼Œå› ä¸ºæœ‰å¿…è¦ æ”¹å†™æˆä¸‹ä¸€èŠ‚çš„ç¤ºä¾‹ä»£ç </p><h3 id="æ ‡å‡†çŠ¶æ€æ¨¡å¼ç¤ºä¾‹"><a href="#æ ‡å‡†çŠ¶æ€æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="æ ‡å‡†çŠ¶æ€æ¨¡å¼ç¤ºä¾‹"></a>æ ‡å‡†çŠ¶æ€æ¨¡å¼ç¤ºä¾‹</h3><p>å°†ä¸ŠèŠ‚åä¾‹demoæ”¹é€ ï¼Œä¼˜åŒ–ï¼Œä»¥ä¸‹æ˜¯æ ‡å‡†çŠ¶æ€æ¨¡å¼demoï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">//æ ‡å‡†çŠ¶æ€æ¨¡å¼ç¤ºä¾‹</span><br><span class="line">var LightState = function(nextState, stateCallback)&#123;</span><br><span class="line">    this.stateCallback = stateCallback;</span><br><span class="line">    this.nextState = nextState;</span><br><span class="line">&#125;</span><br><span class="line">LightState.prototype.buttonWasPressed = function()&#123;</span><br><span class="line">    this.stateCallback();//å¯¹åº”çš„è¡Œä¸º</span><br><span class="line">    this.light.setState(this.nextState) //åˆ‡æ¢çŠ¶æ€</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var OffLightState = function(light)&#123;</span><br><span class="line">    this.light = light;</span><br><span class="line">&#125;</span><br><span class="line">OffLightState.prototype = new LightState(&apos;weakLightState&apos;, function()&#123;</span><br><span class="line">    console.log(&apos;å¼±å…‰&apos;);//è‡ªå®šä¹‰å¯¹åº”çš„è¡Œä¸º</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var WeakLightState = function(light)&#123;</span><br><span class="line">    this.light = light;</span><br><span class="line">&#125;</span><br><span class="line">WeakLightState.prototype = new LightState(&apos;strongLightState&apos; ,function()&#123;</span><br><span class="line">    console.log(&apos;å¼ºå…‰&apos;);//è‡ªå®šä¹‰å¯¹åº”çš„è¡Œä¸º</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var StrongLightState = function(light)&#123;</span><br><span class="line">    this.light = light;</span><br><span class="line">&#125;</span><br><span class="line">StrongLightState.prototype = new LightState(&apos;offLightState&apos; , function()&#123;</span><br><span class="line">    console.log(&apos;å…³ç¯&apos;);//è‡ªå®šä¹‰å¯¹åº”çš„è¡Œä¸º</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var LightContext = function()&#123;</span><br><span class="line">    this.offLightState = new OffLightState(this)</span><br><span class="line">    this.weakLightState = new WeakLightState(this)</span><br><span class="line">    this.strongLightState = new StrongLightState(this)</span><br><span class="line">    this.button = null</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LightContext.prototype.init = function()&#123;</span><br><span class="line">    var button = document.createElement(&apos;button&apos;),</span><br><span class="line">    self = this;</span><br><span class="line">    this.button = document.body.appendChild(button);</span><br><span class="line">    this.button.innerHTML = &apos;å¼€å…³&apos;;</span><br><span class="line">    this.currState = this.offLightState; //è®¾ç½®å¼€å§‹çŠ¶æ€</span><br><span class="line">    this.button.onclick = function()&#123;</span><br><span class="line">        self.currState.buttonWasPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">LightContext.prototype.setState = function(newState)&#123;</span><br><span class="line">   this.currState = this[newState]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var light = new LightContext();</span><br><span class="line">light.init();</span><br></pre></td></tr></table></figure></p><p>å½“å¢åŠ ä¸€ä¸ªè¶…çº§å¼ºå…‰æ—¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var SuperStrongLightState = function(light)&#123;</span><br><span class="line">    this.light = light;</span><br><span class="line">&#125;</span><br><span class="line">SuperStrongLightState.prototype = new LightState(&apos;offLightState&apos; , function()&#123;</span><br><span class="line">    console.log(&apos;å…³ç¯&apos;);//è‡ªå®šä¹‰å¯¹åº”çš„è¡Œä¸º</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">StrongLightState.prototype = new LightState(&apos;superStrongLightState&apos; , function()&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">var LightContext = function()&#123;</span><br><span class="line">...</span><br><span class="line">    this.superStrongLightState = new SuperStrongLightState(this)</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"><a href="#çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"></a>çŠ¶æ€æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h3><p>ä»¥ä¸Šå°±æ˜¯çŠ¶æ€æ¨¡å¼çš„é­…åŠ›ï¼Œç¬¦åˆå¼€æ”¾å°é—­åŸåˆ™ï¼Œå¯ä»¥ä¸è®©buttonWasPressedè‡ƒè‚¿ï¼Œå…¶å®å°±æ˜¯ä¸è®©contextæ— é™è‡ƒè‚¿ã€‚<br>ç¼ºç‚¹ ä¼šå¢åŠ ä»£ç é‡ï¼ŒæŠŠé€»è¾‘åˆ†æ•£åˆ°çŠ¶æ€ç±»ä¸­ï¼Œæ— æ³•åœ¨ä¸€ä¸ªåœ°æ–¹å°±å¯ä»¥å°†é€»è¾‘ä¸èƒ½ä¸€ç›®äº†ç„¶ã€‚</p><h3 id="è®¾è®¡åŸåˆ™ä¸å®šä¹‰"><a href="#è®¾è®¡åŸåˆ™ä¸å®šä¹‰" class="headerlink" title="è®¾è®¡åŸåˆ™ä¸å®šä¹‰"></a>è®¾è®¡åŸåˆ™ä¸å®šä¹‰</h3><p>çŠ¶æ€æ¨¡å¼ï¼Œæœ€é‡è¦çš„ç‰¹å¾æ˜¯å®šä¹‰çŠ¶æ€ç±»(å¦‚ä¸Šçš„LightState)ï¼Œå¹¶å°†é€»è¾‘åˆ†æ•£åˆ°çŠ¶æ€ç±»ä¸­ã€‚<br>å°†çŠ¶æ€(LightState)ä¸ä¸»ä½“(LightContext)åˆ†ç¦»ï¼ŒçŠ¶æ€å˜åŒ–çš„é€»è¾‘å•ç‹¬åˆ°æ¯ä¸ªçŠ¶æ€ç±»ä¸­(ä¾‹å¦‚OffLightState)å¤„ç†ã€‚</p><p>çŠ¶æ€æ¨¡å¼çš„å®šä¹‰è¾ƒæ™¦æ¶©ï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚<br>è¿™ä¸ªå®šä¹‰åŸºæœ¬çœ‹ä¸æ‡‚ï¼Œå¯ä»¥å¿½è§†æ‰ã€‚<br>çŠ¶æ€æ¨¡å¼çš„ç²¾é«“åœ¨äº å®šä¹‰çŠ¶æ€ç±»ï¼Œå¹¶çŠ¶æ€å¯¹åº”çš„é€»è¾‘å°è£…åˆ°çŠ¶æ€ç±»ä¸­ã€‚</p><h3 id="ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨"><a href="#ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨" class="headerlink" title="ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨"></a>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨</h3><p>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼Œ<br>å¦‚ä¸Šé¢ä¼˜ç¼ºç‚¹è¯´çš„ï¼Œ<br>å½“ä½ ä¸å¸Œæœ›Light.prototype.buttonWasPressedå¤ªè‡ƒè‚¿æ—¶ï¼›<br>å½“æ¯æ¬¡æœ‰æ–°éœ€æ±‚ä½ ä¸å¸Œæœ›æ¯æ¬¡éƒ½å»ä¿®æ”¹Light.prototype.buttonWasPressedæ—¶ï¼›<br>å½“ä½ åšçš„åŠŸèƒ½ä¸šåŠ¡æœ‰å¤ªå¤šçŠ¶æ€å˜åŒ–ï¼Œä¸”æ¯ä¸ªçŠ¶æ€é€»è¾‘è¾ƒå¤šæ—¶ï¼›<br>é‚£ä¹ˆå°±è¯·ä½¿ç”¨çŠ¶æ€æ¨¡å¼å§</p><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><h3 id="ä¸¤è€…ä»£ç†æ¨¡å¼çš„æ¦‚å¿µ"><a href="#ä¸¤è€…ä»£ç†æ¨¡å¼çš„æ¦‚å¿µ" class="headerlink" title="ä¸¤è€…ä»£ç†æ¨¡å¼çš„æ¦‚å¿µ"></a>ä¸¤è€…ä»£ç†æ¨¡å¼çš„æ¦‚å¿µ</h3><p>jsä¸­ç”¨å¾—æœ€å¤šçš„è™šæ‹Ÿä»£ç†å’Œç¼“å­˜ä»£ç†ï¼›<br>è™šæ‹Ÿä»£ç†æŒ‡é€šè¿‡ä»£ç†ï¼Œå°†ä¸€ä¸ªå‡½æ•°å»¶è¿Ÿæˆ–ç­‰åˆ°çœŸæ­£éœ€è¦æ‰§è¡Œçš„æ—¶å€™å†æ‰§è¡Œï¼Œè¯´ç™½äº†å°±æ˜¯å»¶æ—¶ä¸‹ï¼Œä¾‹å¦‚ä¸‹é¢ä¾‹å­ä¸­ï¼Œç­‰å›¾ç‰‡å®Œå…¨åŠ è½½å¥½åå†æ‰§è¡ŒçœŸæ­£çš„åŠ è½½ã€‚<br>ç¼“å­˜ä»£ç†ï¼Œå¦‚ä¸‹ä¾‹å­ä¸­ï¼ŒæŒ‡é€šè¿‡ä»£ç†ï¼Œä¸ç”¨æ¯æ¬¡éƒ½æ‰§è¡Œå‡½æ•°ï¼Œå¼€å§‹æ‰§è¡Œå®Œå‡½æ•°åï¼ŒåæœŸä»ç¼“å­˜å–ï¼Œå¦‚æœæˆ‘è®¡ç®—æˆ–2+3ï¼Œåé¢å†2+3æ—¶ï¼Œç›´æ¥ä»ç¼“å­˜å–ã€‚<br>ä»£ç†æ¨¡å¼å¾ˆç®€å•ç›´æ¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªä¾‹å­æ¥é¢†ç•¥ä¸‹ä»£ç†æ¨¡å¼ï¼›</p><h3 id="è™šæ‹Ÿä»£ç†ç¤ºä¾‹"><a href="#è™šæ‹Ÿä»£ç†ç¤ºä¾‹" class="headerlink" title="è™šæ‹Ÿä»£ç†ç¤ºä¾‹"></a>è™šæ‹Ÿä»£ç†ç¤ºä¾‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var myImage = (function()&#123;</span><br><span class="line">    var imgNode = document.createElement(&apos;img&apos;);</span><br><span class="line">    document.body.appendChild(imgNode);</span><br><span class="line">    return &#123;</span><br><span class="line">        setSrc: function(src)&#123;</span><br><span class="line">            imgNode.src = src;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">var proxyImage = (function()&#123;</span><br><span class="line">    var img = new Image;</span><br><span class="line">    img.onload = function()&#123;</span><br><span class="line">        myImage.setSrc(this.src)</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">        setSrc:function(src)&#123;</span><br><span class="line">            myImage.setSrc(&apos;file:// /c:/user/abc.gif&apos;);</span><br><span class="line">            img.src = src;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line">//myImage.setSrc(&apos;http://s9.knowsky.com/bizhi/l/20100615/2010112611%20(1).jpg&apos;)</span><br><span class="line">proxyImage.setSrc(&apos;http://s9.knowsky.com/bizhi/l/20100615/2010112611%20(1).jpg&apos;)</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸€ä¸ªç°è±¡ï¼ŒmyImageæœ‰ä¸€ä¸ªsetSrcæ¥å£ï¼ŒproxyImageä¹Ÿæœ‰ä¸€ä¸ªsetSrcæ¥å£ï¼Œå¹¶ä¸”ä»£ç†å‡½æ•°ä½“å†…ç”¨äº†myImage.setSrcï¼›</p><h3 id="ç¼“å­˜ä»£ç†ç¤ºä¾‹"><a href="#ç¼“å­˜ä»£ç†ç¤ºä¾‹" class="headerlink" title="ç¼“å­˜ä»£ç†ç¤ºä¾‹"></a>ç¼“å­˜ä»£ç†ç¤ºä¾‹</h3><h4 id="ç®€å•ç‰ˆç¤ºä¾‹"><a href="#ç®€å•ç‰ˆç¤ºä¾‹" class="headerlink" title="ç®€å•ç‰ˆç¤ºä¾‹"></a>ç®€å•ç‰ˆç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">var mult = function()&#123;</span><br><span class="line">    console.log(&apos;å¼€å§‹è®¡ç®—ä¹˜ç§¯&apos;);</span><br><span class="line">    var a = 1;</span><br><span class="line">    for (var i =0, l = arguments.length; i&lt;l; i++)&#123;</span><br><span class="line">        a = a*arguments[i]</span><br><span class="line">    &#125;</span><br><span class="line">    return a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var proxyMult = (function()&#123;</span><br><span class="line">    var cache = &#123;&#125;;</span><br><span class="line">    return function()&#123;</span><br><span class="line">        var args = Array.prototype.join.call(arguments, &apos;,&apos;);</span><br><span class="line">        if(args in cache)&#123;</span><br><span class="line">            return cache[args];</span><br><span class="line">        &#125;</span><br><span class="line">        return cache[args] = mult.apply(this, arguments)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)()</span><br><span class="line">console.log(proxyMult(1,2,3,4))</span><br><span class="line">console.log(proxyMult(1,2,3,4))</span><br></pre></td></tr></table></figure><h4 id="å»¶ä¼¸ç‰ˆç¤ºä¾‹"><a href="#å»¶ä¼¸ç‰ˆç¤ºä¾‹" class="headerlink" title="å»¶ä¼¸ç‰ˆç¤ºä¾‹"></a>å»¶ä¼¸ç‰ˆç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">var plus = function()&#123;</span><br><span class="line">    console.log(&apos;å¼€å§‹è®¡ç®—åŠ å’Œ&apos;);</span><br><span class="line">    var a = 0;</span><br><span class="line">    for (var i =0, l = arguments.length; i&lt;l; i++)&#123;</span><br><span class="line">        a = a+arguments[i];</span><br><span class="line">    &#125;</span><br><span class="line">    return a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var createProxyFactory = function(fn)&#123;</span><br><span class="line">    var cache = &#123;&#125;;</span><br><span class="line">    return function()&#123;</span><br><span class="line">        var args = Array.prototype.join.call(arguments, &apos;,&apos;);</span><br><span class="line">        if(args in cache)&#123;</span><br><span class="line">            return cache[args];</span><br><span class="line">        &#125;</span><br><span class="line">        return cache[args] = fn.apply(this, arguments)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var proxyMult = createProxyFactory(mult);</span><br><span class="line"></span><br><span class="line">console.log(proxyMult(11,2,3,4))</span><br><span class="line">console.log(proxyMult(11,2,3,4))</span><br></pre></td></tr></table></figure><p>æ³¨æ„ä¸€ä¸ªç°è±¡ï¼ŒproxyMultä»£ç†å‡½æ•°ä½“å†…ç”¨äº†fn.apply,ä¸”multä¸proxyMultæ¥æ”¶çš„å‚æ•°æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è®¤ä¸ºäºŒè€…æ¥å£ä¸€è‡´ã€‚</p><h3 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h3><p>ä»ä¸Šé¢çš„ç¤ºä¾‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<br>è®¾è®¡ä¸€ä¸ªä»£ç†æ¨¡å¼ï¼Œæœ‰ä¸€ä¸ªå°æŠ€å·§ï¼š</p><ul><li>å°±æ˜¯ä»£ç†å‡½æ•° è¦ æä¾›è·Ÿè¢«ä»£ç†å‡½æ•°ä¸€æ‘¸ä¸€æ ·çš„æ¥å£ï¼Œæˆ–è€…æœ‰ä¸€æ‘¸ä¸€æ ·çš„æ¥æ”¶ä¼ å‚æ–¹å¼ï¼›</li><li>ä»£ç†å‡½æ•°ä½“å†… å¼•ç”¨ è¢«ä»£ç†å‡½æ•°ã€‚</li></ul><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><h3 id="å®šä¹‰-2"><a href="#å®šä¹‰-2" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>ç­–ç•¥æ¨¡å¼çš„æ€æƒ³ï¼š<br>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠä»–ä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚<br>æœ€ä»£è¡¨æ€§å’Œå…³é”®çš„æ“ä½œæ˜¯å°†æ¯ç§ç®—æ³•å•ç‹¬å°è£…æˆç±»ï¼Œæˆ–è€…å‡½æ•°ã€‚</p><h3 id="ç»å…¸ç¤ºä¾‹ä¸€"><a href="#ç»å…¸ç¤ºä¾‹ä¸€" class="headerlink" title="ç»å…¸ç¤ºä¾‹ä¸€"></a>ç»å…¸ç¤ºä¾‹ä¸€</h3><p>ä¸‹é¢çœ‹ä¸€ä¸ªç­–ç•¥æ¨¡å¼æœ€ä»£è¡¨çš„ä¾‹å­ï¼š</p><h4 id="åä¾‹-1"><a href="#åä¾‹-1" class="headerlink" title="åä¾‹"></a>åä¾‹</h4><p>è®¡ç®—ç»©æ•ˆå¥–é‡‘ï¼Œæœ€å¼€å§‹çš„å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// è¿™æ˜¯åä¾‹</span><br><span class="line">var calculateBonus = function(performanceLevel, salary)&#123;</span><br><span class="line">    if(performanceLevel === &apos;S&apos;)&#123;</span><br><span class="line">        return salary*4;</span><br><span class="line">    &#125;</span><br><span class="line">    if(performanceLevel === &apos;A&apos;)&#123;</span><br><span class="line">        return salary*3;</span><br><span class="line">    &#125;</span><br><span class="line">    if(performanceLevel === &apos;B&apos;)&#123;</span><br><span class="line">        return salary*2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">calculateBonus(&apos;B&apos;, 20000);</span><br><span class="line">calculateBonus(&apos;S&apos;, 6000);</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢å†™æ³•è‡´å‘½ç¼ºç‚¹åœ¨äºï¼Œå°†æ¥å¦‚æœæœ‰æ›´å¤šçš„ç»©æ•ˆç­‰çº§ï¼Œä¾‹å¦‚Cã€Dã€Eã€Fâ€¦æ—¶ï¼Œéƒ½éœ€è¦åœ¨calculateBonusä¸­å¢åŠ ä»£ç é€»è¾‘ï¼›<br>æ”¹è¿›ä¸Šé¢ä»£ç çš„å…³é”®ï¼Œåœ¨äºç²¾ç®€calculateBonusã€‚</p><h4 id="æ ‡å‡†ç¤ºä¾‹"><a href="#æ ‡å‡†ç¤ºä¾‹" class="headerlink" title="æ ‡å‡†ç¤ºä¾‹"></a>æ ‡å‡†ç¤ºä¾‹</h4><p>æ”¹è¿›å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//æ ‡å‡†ç­–ç•¥æ¨¡å¼ç¤ºä¾‹</span><br><span class="line">var S = function(salary)&#123;</span><br><span class="line">    return salary*4;</span><br><span class="line">&#125;</span><br><span class="line">var A = function(salary)&#123;</span><br><span class="line">    return salary*3;</span><br><span class="line">&#125;</span><br><span class="line">var B = function(salary)&#123;</span><br><span class="line">    return salary*2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var calculateBonus = function(func, salary)&#123;</span><br><span class="line">    return func(salary);</span><br><span class="line">&#125;</span><br><span class="line">calculateBonus(B, 20000);</span><br><span class="line">calculateBonus(S, 6000);</span><br></pre></td></tr></table></figure></p><p>æ”¹è¿›åï¼Œå°†æ¯ä¸ªç­‰çº§çš„é€»è¾‘å°è£…æˆå•ç‹¬çš„ç±»æˆ–å‡½æ•°ï¼Œ<br>æ— è®ºæœªæ¥å¢åŠ å¤šå°‘ç»©æ•ˆé€»è¾‘ï¼Œéƒ½å°†å•ç‹¬å®šä¹‰ç»©æ•ˆé€»è¾‘ç±»ï¼Œä¸ä¼šå½±å“ç°æœ‰ç±»ï¼ŒåŒæ—¶calculateBonuséƒ½ä¸å˜ã€‚<br>æ”¹è¿›ç”¨åˆ°çš„ç­–ç•¥æ¨¡å¼æŠ€å·§ï¼š</p><ul><li>å°†ç®—æ³•ç±»ç›´æ¥ä»¥ç®—æ³•åå­—å‘½å</li></ul><h3 id="ç»å…¸ç¤ºä¾‹äºŒ"><a href="#ç»å…¸ç¤ºä¾‹äºŒ" class="headerlink" title="ç»å…¸ç¤ºä¾‹äºŒ"></a>ç»å…¸ç¤ºä¾‹äºŒ</h3><p>å¦‚æœåªéœ€äº†è§£ ç­–ç•¥æ¨¡å¼ï¼Œåªéœ€çœ‹ä»¥ä¸Šå†…å®¹å³å¯ï¼Œè¿™éƒ¨åˆ†å†…å®¹åªæ˜¯å†ä¸¾ä¾‹åŠ æ·±ç†è§£ã€‚</p><p>ä¸‹é¢å†çœ‹ä¸€ä¸ªç»å…¸æµ‹è¯•æ¨¡å¼ç¤ºä¾‹</p><h4 id="åä¾‹-2"><a href="#åä¾‹-2" class="headerlink" title="åä¾‹"></a>åä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//è¿™æ˜¯åä¾‹</span><br><span class="line">&lt;form action=&quot;#&quot; id=&quot;registerForm&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">    è¯·è¾“å…¥ç”¨æˆ·åï¼š&lt;input type=&quot;text&quot; name=&quot;userName&quot;/&gt;</span><br><span class="line">    è¯·è¾“å…¥å¯†ç ï¼š&lt;input type=&quot;text&quot; name=&quot;passWord&quot; /&gt;</span><br><span class="line">    è¯·è¾“å…¥æ‰‹æœºå·ç ï¼š&lt;input type=&quot;text&quot; name=&quot;phoneNumber&quot; /&gt;</span><br><span class="line">    &lt;button&gt;æäº¤&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">var registerForm = document.getElementById(&apos;registerForm&apos;);</span><br><span class="line">registerForm.onsubmit = function()&#123;</span><br><span class="line">    if(registerForm.userName.value === &apos;&apos;)&#123;</span><br><span class="line">        alert(&apos;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&apos;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    if(registerForm.userName.length &lt; 6)&#123;</span><br><span class="line">        alert(&apos;ç”¨æˆ·åä¸èƒ½å°‘äº6ä½&apos;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">    if(registerForm.password.length &lt; 6)&#123;</span><br><span class="line">        alert(&apos;å¯†ç ä¸èƒ½å°‘äº6ä½&apos;);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ ‡å‡†ç¤ºä¾‹-1"><a href="#æ ‡å‡†ç¤ºä¾‹-1" class="headerlink" title="æ ‡å‡†ç¤ºä¾‹"></a>æ ‡å‡†ç¤ºä¾‹</h4><p>å¯¹ä»¥ä¸Šç¤ºä¾‹è¿›è¡Œæ”¹è¿›ï¼š</p><ul><li>å°†æ¯ç§éªŒè¯æ–¹æ³• å°è£…æˆå•ç‹¬çš„ç±»æˆ–å‡½æ•°ï¼Œå¦‚strategies.isNonEmpty;</li><li>Validatorå¯ä»¥çœ‹ä½œæ˜¯æœ¬èŠ‚çš„ç¬¬ä¸€ä¸ªæ ‡å‡†ç¤ºä¾‹ä¸­çš„calculateBonusï¼Œ<br>validataFormå¯ä»¥çœ‹ä½œæ˜¯calculateBonus(B, 20000);</li><li>å°†éªŒè¯Validatoråˆ†ä¸¤æ­¥é€»è¾‘ï¼Œä¸€æ­¥æ˜¯é€æ¡æ·»åŠ è§„åˆ™ï¼Œä¸€æ­¥æ˜¯ä¸€æ¬¡æ€§éªŒè¯æ‰€æœ‰è§„åˆ™<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">//å°†ä¸€ç³»åˆ— è§„åˆ™ç®—æ³• å°è£…æˆå•ç‹¬çš„å‡½æ•°</span><br><span class="line">var strategies = &#123;</span><br><span class="line">    isNonEmpty: function(value, errorMsg)&#123;</span><br><span class="line">        if(!value)&#123;</span><br><span class="line">            return errorMsg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    minLength: function(value, length, errorMsg)&#123;</span><br><span class="line">        if(value.length&lt;length)&#123;</span><br><span class="line">            return errorMsg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    isMobile: function(value, errorMsg)&#123;</span><br><span class="line">        if(!/13511112222/.test(value))&#123;</span><br><span class="line">            return errorMsg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var Validator = function()&#123;</span><br><span class="line">    this.cache = [];</span><br><span class="line">&#125;</span><br><span class="line">//è®¾è®¡ æ·»åŠ  å’Œ éªŒè¯ è§„åˆ™çš„é€»è¾‘</span><br><span class="line">Validator.prototype.add = function(dom, rules)&#123;</span><br><span class="line">    var self = this;</span><br><span class="line">    for (var i = 0,rule; rule = rules[i++];)&#123;</span><br><span class="line">        (function(rule)&#123;</span><br><span class="line">            var strategyAry = rule.strategy.split(&apos;:&apos;);</span><br><span class="line">            var errorMsg = rule.errorMsg;</span><br><span class="line">            self.cache.push(function()&#123;</span><br><span class="line">                var strategy = strategyAry.shift();</span><br><span class="line">                strategyAry.unshift(dom.value);</span><br><span class="line">                strategyAry.push(errorMsg);</span><br><span class="line">                return strategies[strategy].apply(dom, strategyAry);</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)(rule)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Validator.prototype.start = function()&#123;</span><br><span class="line">    for(var i= 0,validatorFunc; validatorFunc = this.cache[i++];)&#123;</span><br><span class="line">        var errorMsg = validatorFunc();</span><br><span class="line">        if(errorMsg)&#123;</span><br><span class="line">            return errorMsg;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ä¸ºè¡¨å•å®é™…æ·»åŠ è§„åˆ™ å’Œ éªŒè¯</span><br><span class="line">var registerForm = document.getElementById(&apos;registerForm&apos;);</span><br><span class="line">var validataForm = function()&#123;</span><br><span class="line">    var validator = new Validator();</span><br><span class="line">    validator.add(registerForm.userName,[&#123;</span><br><span class="line">        strategy: &apos;isNonEmpty&apos;,</span><br><span class="line">        errorMsg: &apos;ä¸èƒ½ä¸ºç©º&apos;</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        strategy: &apos;minLength:10&apos;,</span><br><span class="line">        errorMsg: &apos;é•¿åº¦ä¸èƒ½å°äº10&apos;</span><br><span class="line">    &#125;])</span><br><span class="line">    validator.add(registerForm.passWord,[&#123;</span><br><span class="line">        strategy: &apos;isNonEmpty&apos;,</span><br><span class="line">        errorMsg: &apos;ä¸èƒ½ä¸ºç©º&apos;</span><br><span class="line">    &#125;])</span><br><span class="line"></span><br><span class="line">    var errorMsg = validator.start();</span><br><span class="line">    return errorMsg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">registerForm.onsubmit = function()&#123;</span><br><span class="line">    var errorMsg = validataForm();</span><br><span class="line">    if(errorMsg)&#123;</span><br><span class="line">        alert(errorMsg);</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ”¹è¿›åï¼Œè¿™ç§æ¨¡å¼å¾ˆå¥½çš„é€‚åº”äº†å¤§å‹é¡¹ç›®è§„åˆ™éªŒè¯ã€‚</p><h3 id="ç¼–å†™ç­–ç•¥æ¨¡å¼æŠ€å·§"><a href="#ç¼–å†™ç­–ç•¥æ¨¡å¼æŠ€å·§" class="headerlink" title="ç¼–å†™ç­–ç•¥æ¨¡å¼æŠ€å·§"></a>ç¼–å†™ç­–ç•¥æ¨¡å¼æŠ€å·§</h3><ul><li>å°†ç­–ç•¥ç®—æ³• å°è£…æˆå•ç‹¬å‡½æ•°æˆ–ç±»ï¼›</li><li>ç›´æ¥ä»¥ç®—æ³•åç§° å‘½å å‡½æ•°å’Œç±»ï¼Œå¦‚ä¸Šé¢ç»å…¸ç¤ºä¾‹ä¸€</li></ul><h2 id="è£…é¥°è€…æ¨¡å¼"><a href="#è£…é¥°è€…æ¨¡å¼" class="headerlink" title="è£…é¥°è€…æ¨¡å¼"></a>è£…é¥°è€…æ¨¡å¼</h2><p>ä¸»è¦è®²è§£es5è£…é¥°è€…æ¨¡å¼çš„å…¶ä¸­çš„ä¸¤ç§å®ç°æ–¹å¼ï¼šä¸€ä¸ªæ˜¯å®šä¹‰ç±»(æ„é€ å‡½æ•°)çš„æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯ä¿®æ”¹è¶…çº§å‡½æ•°FunctionåŸå‹çš„æ–¹å¼ã€‚<br>ä¸‹é¢å¯¹è¿™ä¸¤ç§æ–¹å¼åˆ†åˆ«è®²è§£ï¼š</p><h3 id="æ„é€ å‡½æ•°æ–¹å¼"><a href="#æ„é€ å‡½æ•°æ–¹å¼" class="headerlink" title="æ„é€ å‡½æ•°æ–¹å¼"></a>æ„é€ å‡½æ•°æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">var Plan = function()&#123;&#125;</span><br><span class="line">Plan.prototype.fire = function()&#123;</span><br><span class="line">    console.log(&apos;å‘å°„æ™®é€šå­å¼¹&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var MissleDecorator = function(plan)&#123;</span><br><span class="line">    this.plan = plan;</span><br><span class="line">&#125;</span><br><span class="line">MissleDecorator.prototype.fire = function()&#123;</span><br><span class="line">    this.plan.fire();</span><br><span class="line">    console.log(&apos;å‘å°„å¯¼å¼¹&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var AtomDecorator = function(plan)&#123;</span><br><span class="line">    this.plan = plan;</span><br><span class="line">&#125;</span><br><span class="line">AtomDecorator.prototype.fire = function()&#123;</span><br><span class="line">    this.plan.fire();</span><br><span class="line">    console.log(&apos;å‘å°„åŸå­å¼¹&apos;);</span><br><span class="line">&#125;</span><br><span class="line">var plan = new Plan();</span><br><span class="line">plan = new MissleDecorator(plan);</span><br><span class="line">plan = new AtomDecorator(plan);</span><br><span class="line">plan.fire();</span><br></pre></td></tr></table></figure><h3 id="FunctionåŸå‹æ–¹å¼"><a href="#FunctionåŸå‹æ–¹å¼" class="headerlink" title="FunctionåŸå‹æ–¹å¼"></a>FunctionåŸå‹æ–¹å¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.before = function(beforefn)&#123;</span><br><span class="line">        var _self = this;//ä¿å­˜åŸå‡½æ•°çš„å¼•ç”¨</span><br><span class="line">        return function()&#123;//è¿”å›åŒ…å«ç±»åŸå‡½æ•°å’Œæ–°å‡½æ•°çš„ä»£ç†å‡½æ•°</span><br><span class="line">            beforefn.apply(this,arguments);//æ‰§è¡Œæ–°å‡½æ•°ï¼Œä¸”ä¿è¯thisä¸è¢«åŠ«æŒï¼Œæ–°å‡½æ•°æ¥å—çš„å‚æ•°</span><br><span class="line">            return _self.apply(this, arguments);//æ‰§è¡ŒåŸå‡½æ•°ï¼Œå¹¶ä¸”è¿”å›åŸå‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œå¹¶ä¸”ä¿æŒthisä¸è¢«åŠ«æŒ</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Function.prototype.after = function(afterfn)&#123;</span><br><span class="line">        var _self = this;</span><br><span class="line">        return function()&#123;</span><br><span class="line">            var ret = _self.apply(this,arguments);</span><br><span class="line">            afterfn.apply(this,arguments);</span><br><span class="line">            return ret;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    var func = function(param)&#123;</span><br><span class="line">        console.log(param);</span><br><span class="line">    &#125;</span><br><span class="line">    func = func.before(function(param)&#123;</span><br><span class="line">        param.b = &apos;b&apos;;</span><br><span class="line">    &#125;)</span><br><span class="line">    func(&#123;a:&apos;a&apos;&#125;);//&#123;a:&apos;a&apos;, b:&apos;b&apos;&#125;</span><br></pre></td></tr></table></figure><h3 id="es6ä¸­çš„ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰"><a href="#es6ä¸­çš„ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰" class="headerlink" title="es6ä¸­çš„ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰"></a>es6ä¸­çš„ä¿®é¥°å™¨ï¼ˆDecoratorï¼‰</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@testable</span><br><span class="line">class MyTestableClass &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;</span><br><span class="line">function testable(target) &#123;</span><br><span class="line">  target.isTestable = true;</span><br><span class="line">&#125;</span><br><span class="line">MyTestableClass.isTestable // true</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¿®é¥°å™¨å¯¹ç±»çš„è¡Œä¸ºçš„æ”¹å˜ï¼Œæ˜¯ä»£ç ç¼–è¯‘æ—¶å‘ç”Ÿçš„ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¿™æ„å‘³ç€ï¼Œä¿®é¥°å™¨èƒ½åœ¨ç¼–è¯‘é˜¶æ®µè¿è¡Œä»£ç ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®é¥°å™¨æœ¬è´¨å°±æ˜¯ç¼–è¯‘æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚</p><h3 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h3><p>è£…é¥°è€…ï¼Œç»å¸¸ç”¨åˆ°çš„å°æŠ€å·§ï¼Œä¸æ”¹å˜åŸå‡½æ•°æƒ…å†µä¸‹ï¼Œå¢åŠ å‡½æ•°åŠŸèƒ½ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a = function()&#123;</span><br><span class="line">        alert(1)</span><br><span class="line">    &#125;</span><br><span class="line">    var _a = a;</span><br><span class="line">    a = function()&#123;</span><br><span class="line">        _a();</span><br><span class="line">        alert(2);</span><br><span class="line">    &#125;</span><br><span class="line">    a();</span><br></pre></td></tr></table></figure></p><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨è¿™ç§æ–¹å¼ï¼Œå®ç°é¡µé¢å›é€€ï¼ŒåŠ è½½ç­‰ç­‰äº‹ä»¶æ—¶ï¼Œå¢åŠ åŠŸèƒ½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jsè®¾è®¡æ¨¡å¼ </tag>
            
            <tag> å•ä¾‹æ¨¡å¼ </tag>
            
            <tag> è§‚å¯Ÿè€…æ¨¡å¼ </tag>
            
            <tag> çŠ¶æ€æ¨¡å¼ </tag>
            
            <tag> å•ä¸€èŒè´£åŸåˆ™ </tag>
            
            <tag> å¼€æ”¾å°é—­åŸåˆ™ </tag>
            
            <tag> èˆå¼ƒé«˜æ•ˆç‡è€Œå–å¯ç§»æ¤æ€§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>macå’Œlinuxç¬”è®°</title>
      <link href="/2020/05/01/mac_linux/"/>
      <url>/2020/05/01/mac_linux/</url>
      
        <content type="html"><![CDATA[<h3 id="æ˜¾ç¤ºç”¨æˆ·ç›®å½•"><a href="#æ˜¾ç¤ºç”¨æˆ·ç›®å½•" class="headerlink" title="æ˜¾ç¤ºç”¨æˆ·ç›®å½•"></a>æ˜¾ç¤ºç”¨æˆ·ç›®å½•</h3><p>MACç”µè„‘é»˜è®¤éšè—äº†ä½ çš„ç”¨æˆ·ç›®å½•ï¼Œæ‰€ä»¥æ‰æ‰¾ä¸åˆ°ã€‚<br>åœ¨finderçš„åå¥½è®¾ç½®ä¸­é€‰æ‹©â€œè¾¹æ â€é€‰ä¸­ä¸ªäººæ”¶è—ä¸‹â€œæˆ¿å­çš„å›¾æ ‡â€ï¼Œè¿™æ ·å°±ç”¨æˆ·ç›®å½•ï¼Œç„¶ååœ¨è¾¹æ å°±å¯ä»¥çœ‹åˆ°ç”¨æˆ·ç›®å½•ï¼Œç„¶åå°±å¯ä»¥æ‰¾åˆ°ç›®å½•äº†</p><h3 id="åˆ‡æ¢å¤§å†™"><a href="#åˆ‡æ¢å¤§å†™" class="headerlink" title="åˆ‡æ¢å¤§å†™"></a>åˆ‡æ¢å¤§å†™</h3><p>é•¿æŒ‰ caps lock ç›´è‡³ç¯äº®å°±æ˜¯å¤§å†™ï¼ŒçŸ­æŒ‰å˜å°å†™ã€‚</p><h3 id="æœ‰å…³echo"><a href="#æœ‰å…³echo" class="headerlink" title="æœ‰å…³echo"></a>æœ‰å…³echo</h3><p>echoç±»ä¼¼console.logï¼Œæ—¥å¿—æ‰“å°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $ PATH</span><br></pre></td></tr></table></figure></p><h3 id="linuxä¸‹å…³é”®å­—"><a href="#linuxä¸‹å…³é”®å­—" class="headerlink" title="linuxä¸‹å…³é”®å­—"></a>linuxä¸‹å…³é”®å­—</h3><h4 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h4><p>æˆ‘æ˜¯è°</p><h4 id="date"><a href="#date" class="headerlink" title="date"></a>date</h4><p>ç³»ç»Ÿæ—¥æœŸ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jsdeiMac:~ xhkj$ date</span><br><span class="line">2019å¹´ 5æœˆ19æ—¥ æ˜ŸæœŸæ—¥ 23æ—¶50åˆ†00ç§’ CST</span><br><span class="line">jsdeiMac:~ xhkj$ whoami</span><br><span class="line">xhkj</span><br></pre></td></tr></table></figure></p><h4 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h4><p>sudoæ˜¯linuxä¸‹çš„ä¸€ä¸ªä½¿ç”¨æœ€é«˜æƒé™æ‰§è¡Œå‘½ä»¤çš„å…³é”®å­—ï¼Œ<br>æ­¤å‘½ä»¤éœ€è¦è¾“å…¥ç”¨æˆ·å¯†ç </p><h3 id="macå¸¸ç”¨"><a href="#macå¸¸ç”¨" class="headerlink" title="macå¸¸ç”¨"></a>macå¸¸ç”¨</h3><h4 id="æ‰“å¼€usrç›®å½•"><a href="#æ‰“å¼€usrç›®å½•" class="headerlink" title="æ‰“å¼€usrç›®å½•"></a>æ‰“å¼€usrç›®å½•</h4><p>æ‰“å¼€finderï¼Œå¿«æ·é”® command+shift+Gï¼Œè¾“å…¥ <code>/usr</code>å›è½¦å³å¯ã€‚</p><h4 id="ps-aux-grep-mysql"><a href="#ps-aux-grep-mysql" class="headerlink" title="ps aux | grep mysql"></a>ps aux | grep mysql</h4><p>æŸ¥çœ‹</p><h4 id="mysqlå®‰è£…"><a href="#mysqlå®‰è£…" class="headerlink" title="mysqlå®‰è£…"></a>mysqlå®‰è£…</h4><p>å‚è€ƒ <a href="https://jingyan.baidu.com/article/fa4125ac0e3c2928ac709204.html" target="_blank" rel="noopener">æ–‡æ¡£</a></p><h4 id="å¾®ä¿¡èƒ½ç½‘ç»œï¼Œæµè§ˆå™¨ç½‘ç»œå¾ˆæ…¢"><a href="#å¾®ä¿¡èƒ½ç½‘ç»œï¼Œæµè§ˆå™¨ç½‘ç»œå¾ˆæ…¢" class="headerlink" title="å¾®ä¿¡èƒ½ç½‘ç»œï¼Œæµè§ˆå™¨ç½‘ç»œå¾ˆæ…¢"></a>å¾®ä¿¡èƒ½ç½‘ç»œï¼Œæµè§ˆå™¨ç½‘ç»œå¾ˆæ…¢</h4><p>æ˜¯dnså‡ºç°äº†é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨dnsæœåŠ¡å™¨ä¸­å¢åŠ  114.114.114.114å³å¯ã€‚<br>114.114.114.114 æ˜¯ä¸è°·æ­Œdns 8.8.8.8 ä¸€æ ·çš„åˆ©äºdnsè§£æçš„é…ç½®ï¼Œ<br>é…ç½®åï¼Œå¯è®©ä½ æµè§ˆå™¨ä¸Šç½‘dnsè§£æå¿«é€Ÿã€‚<br>è§£å†³qqèƒ½ä¸Šç½‘ï¼Œä½†æµè§ˆå™¨æ— æ³•ä¸Šç½‘çš„å›°æ‰°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mongoose ä¸ mongodbç¬”è®°</title>
      <link href="/2020/05/01/mongoose_mongodb/"/>
      <url>/2020/05/01/mongoose_mongodb/</url>
      
        <content type="html"><![CDATA[<p>å…³äº mongoose ä¸ mongodbç¬”è®° æš‚æ—¶ä»¥é—®ç­”æ–¹å¼å™è¿°ã€‚</p><h2 id="mongoose-ä¸-mongodb-åŸºæœ¬çŸ¥è¯†"><a href="#mongoose-ä¸-mongodb-åŸºæœ¬çŸ¥è¯†" class="headerlink" title="mongoose ä¸ mongodb åŸºæœ¬çŸ¥è¯†"></a>mongoose ä¸ mongodb åŸºæœ¬çŸ¥è¯†</h2><h3 id="ä»€ä¹ˆæ˜¯mongodbæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯"><a href="#ä»€ä¹ˆæ˜¯mongodbæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯" class="headerlink" title="ä»€ä¹ˆæ˜¯mongodbæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯"></a>ä»€ä¹ˆæ˜¯mongodbæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯</h3><p>å¯åŠ¨mongodbæœåŠ¡ç«¯ï¼Œcmdå‘½ä»¤ä¸º mongodï¼›è¿™è¡¨æ˜åœ¨ç”µè„‘ä¸Šå¯åŠ¨äº†mongodbæœåŠ¡ï¼Œå¯åŠ¨äº†mongodbæœåŠ¡ç«¯ï¼›<br>å¯åŠ¨mongodbå®¢æˆ·ç«¯ï¼Œcmdå‘½ä»¤ä¸º mongoï¼›æ­¤å‘½ä»¤æ‰§è¡Œåï¼Œcmdå¤„äºè¾“å…¥çŠ¶æ€ï¼Œå¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼›<br>ä»¥ä¸Šä¸¤é¢å‘½ä»¤ éƒ½åŸºäºmongodbå®‰è£…ç›®å½•(C:\Program Files\MongoDB\Server\4.0\bin)ä¸‹çš„mongod.exeå’Œmongo.exeï¼›</p><h3 id="åœ¨å“ªäº›ç›®å½•ä¸‹æ‰§è¡Œmongoç­‰å‘½ä»¤æ‰èƒ½è¿æ¥æ•°æ®åº“"><a href="#åœ¨å“ªäº›ç›®å½•ä¸‹æ‰§è¡Œmongoç­‰å‘½ä»¤æ‰èƒ½è¿æ¥æ•°æ®åº“" class="headerlink" title="åœ¨å“ªäº›ç›®å½•ä¸‹æ‰§è¡Œmongoç­‰å‘½ä»¤æ‰èƒ½è¿æ¥æ•°æ®åº“?"></a>åœ¨å“ªäº›ç›®å½•ä¸‹æ‰§è¡Œmongoç­‰å‘½ä»¤æ‰èƒ½è¿æ¥æ•°æ®åº“?</h3><p>å¯åŠ¨mongodbæœ‰ä¸¤å±‚æ„æ€ï¼Œä¸€ä¸ªæ˜¯å¯åŠ¨mongodbæœåŠ¡å™¨ï¼Œä¸€ä¸ªæ˜¯å¯åŠ¨mongodbçš„å®¢æˆ·ç«¯mongoã€‚<br>ä¸Šé¢ä¸¤ä¸ªåŠ¨ä½œæ²¡æœ‰ç›®å½•é™åˆ¶ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯å…¨å±€çš„ï¼Œåœ¨ä»»æ„ç›®å½•ä¸Šéƒ½å¯åŠ¨cmdéƒ½å¯ä»¥æ“ä½œMongoDBæ•°æ®åº“ã€‚<br>æ•´ä¸ªç”µè„‘ï¼Œä»»ä½•é¡¹ç›®åˆ›å»ºçš„æ•°æ®åº“ï¼Œéƒ½å¯ä»¥é€šè¿‡ä»»æ„ç›®å½•ä¸‹ï¼Œå¯åŠ¨<br>cmdéƒ½å¯ä»¥æŸ¥åˆ°ï¼Œå¹¶ä¸”å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œã€‚</p><h3 id="å¯åŠ¨mongodb-ä»¥åŠæ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹"><a href="#å¯åŠ¨mongodb-ä»¥åŠæ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹" class="headerlink" title="å¯åŠ¨mongodb ä»¥åŠæ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹"></a>å¯åŠ¨mongodb ä»¥åŠæ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹</h3><p>ä¸»è¦ä¸ºä¸¤ä¸ªå‘½ä»¤ï¼š<br>mongod //å¯åŠ¨mongod æœåŠ¡å™¨ï¼Œè¿™æ˜¯ä¸€åˆ‡æ“ä½œæ•°æ®åº“çš„åŸºç¡€å‡†å¤‡å·¥ä½œ<br>mongo //å¯åŠ¨mongodbå®¢æˆ·ç«¯ï¼Œç”¨æ¥è¿æ¥mongodbå¹¶è¿›è¡Œç›¸å…³æ•°æ®çš„æŸ¥è¯¢<br>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><h4 id="åœ¨ä»»æ„ç›®å½•ä¸‹å¯åŠ¨cmd-æ‰§è¡Œ-mongod"><a href="#åœ¨ä»»æ„ç›®å½•ä¸‹å¯åŠ¨cmd-æ‰§è¡Œ-mongod" class="headerlink" title="åœ¨ä»»æ„ç›®å½•ä¸‹å¯åŠ¨cmd æ‰§è¡Œ mongod;"></a>åœ¨ä»»æ„ç›®å½•ä¸‹å¯åŠ¨cmd æ‰§è¡Œ mongod;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ mongod</span><br><span class="line">2019-03-24T11:25:33.479+0800 I CONTROL  [main] Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols &apos;none&apos;</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] MongoDB starting : pid=8380 port=27017 dbpath=C:\data\db\ 64-bit host=UO4SB7YL9WOZ3OK</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] targetMinOS: Windows 7/Windows Server 2008 R2</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] db version v4.0.6</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] git version: caa42a1f75a56c7643d0b68d3880444375ec42e3</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] allocator: tcmalloc</span><br><span class="line">2019-03-24T11:25:33.483+0800 I CONTROL  [initandlisten] modules: none</span><br><span class="line">2019-03-24T11:25:33.484+0800 I CONTROL  [initandlisten] build environment:</span><br><span class="line">2019-03-24T11:25:33.484+0800 I CONTROL  [initandlisten]     distmod: 2008plus-ssl</span><br><span class="line">2019-03-24T11:25:33.484+0800 I CONTROL  [initandlisten]     distarch: x86_64</span><br><span class="line">2019-03-24T11:25:33.484+0800 I CONTROL  [initandlisten]     target_arch: x86_64</span><br><span class="line">2019-03-24T11:25:33.484+0800 I CONTROL  [initandlisten] options: &#123;&#125;</span><br><span class="line">2019-03-24T11:25:33.486+0800 I STORAGE  [initandlisten] exception in initAndListen: NonExistentPath: Data directory C:\data\db\ not found., terminating</span><br><span class="line">2019-03-24T11:25:33.486+0800 I NETWORK  [initandlisten] shutdown: going to close listening sockets...</span><br><span class="line">2019-03-24T11:25:33.486+0800 I CONTROL  [initandlisten] now exiting</span><br><span class="line">2019-03-24T11:25:33.486+0800 I CONTROL  [initandlisten] shutting down with code:100</span><br></pre></td></tr></table></figure><h4 id="æ¥ç€æ‰§è¡Œ-mongoï¼›"><a href="#æ¥ç€æ‰§è¡Œ-mongoï¼›" class="headerlink" title="æ¥ç€æ‰§è¡Œ mongoï¼›"></a>æ¥ç€æ‰§è¡Œ mongoï¼›</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">MongoDB shell version v4.0.6</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; &quot;id&quot; : UUID(&quot;4f84c125-8db8-4d3a-ad61-5c85b2817fb7&quot;) &#125;</span><br><span class="line">MongoDB server version: 4.0.6</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å‘½ä»¤çª—å£å¤„äºç­‰å¾…è¾“å…¥å‘½ä»¤çš„çŠ¶æ€ï¼Œå°±åƒè¾“å…¥nodeåï¼Œç­‰å¾…æ‰§è¡Œçš„æƒ…å†µã€‚</p><h4 id="æ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹ï¼›"><a href="#æ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹ï¼›" class="headerlink" title="æ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹ï¼›"></a>æ•°æ®åº“ã€è¡¨æ ¼çš„æŸ¥çœ‹ï¼›</h4><p>æ­¤æ—¶åœ¨æ­¤cmdçª—å£ï¼Œæ¥ç€è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ mongo</span><br><span class="line">MongoDB shell version v4.0.6</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; &quot;id&quot; : UUID(&quot;4f84c125-8db8-4d3a-ad61-5c85b2817fb7&quot;) &#125;</span><br><span class="line">MongoDB server version: 4.0.6</span><br><span class="line">show dbs  //æ˜¾ç¤ºMongoDBç›®å‰æœ‰å¤šå°‘æ•°æ®åº“</span><br><span class="line">admin           0.000GB</span><br><span class="line">config          0.000GB</span><br><span class="line">douban-test     0.000GB</span><br><span class="line">douban-trailer  0.000GB</span><br><span class="line">local           0.000GB</span><br><span class="line">test            0.000GB</span><br><span class="line">yyy             0.000GB</span><br><span class="line">use yyy //ä½¿ç”¨yyyæ•°æ®åº“ï¼Œuse æ•°æ®åº“nameï¼Œæœ‰æ­¤nameå°±æ˜¯ç”¨æ­¤æ•°æ®åº“ï¼Œæ²¡æœ‰å°±æ˜¯åˆ›å»ºæ•°æ®åº“</span><br><span class="line">switched to db yyy</span><br><span class="line">show tables //æ˜¾ç¤ºæ•°æ®åº“æœ‰å¤šå°‘è¡¨æ ¼</span><br><span class="line">fruits</span><br><span class="line">db.fruits.find() //æ˜¾ç¤º fruits è¡¨æ ¼çš„æ•°æ®å†…å®¹</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;5c964dbe52f3fd21d06da3a0&quot;), &quot;category&quot; : &quot;apple&quot;, &quot;name&quot; : &quot;apple&quot;, &quot;__v&quot; : 0 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;5c964dca541443051483e3c8&quot;), &quot;category&quot; : &quot;apple&quot;, &quot;name&quot; : &quot;apple&quot;, &quot;__v&quot; : 0 &#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.cnblogs.com/shirly77/p/6536327.html" target="_blank" rel="noopener">æ›´å¤šä¿¡æ¯ç‚¹å‡»</a></p><h3 id="ç”¨mongodbåŸç”Ÿå‘½ä»¤è¿˜æ˜¯mongooseæ“ä½œæ•°æ®åº“ï¼Ÿ"><a href="#ç”¨mongodbåŸç”Ÿå‘½ä»¤è¿˜æ˜¯mongooseæ“ä½œæ•°æ®åº“ï¼Ÿ" class="headerlink" title="ç”¨mongodbåŸç”Ÿå‘½ä»¤è¿˜æ˜¯mongooseæ“ä½œæ•°æ®åº“ï¼Ÿ"></a>ç”¨mongodbåŸç”Ÿå‘½ä»¤è¿˜æ˜¯mongooseæ“ä½œæ•°æ®åº“ï¼Ÿ</h3><p>åœ¨è¿™é‡Œåªè®¨è®ºnodeç«¯ã€‚<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¤§å¤šä¸é€šè¿‡mongodbåŸç”Ÿå‘½ä»¤æ“ä½œæ•°æ®åº“ï¼Œè€Œæ˜¯é€šè¿‡mongooseï¼›<br>ä¸€ä¸ªæ˜¯mongoose æ›´èƒ½ä¼˜é›…åœ°è¿›è¡ŒMongoDBå¯¹è±¡å»ºæ¨¡ï¼Œ<br>è€Œä¸”Mongooseå†™äº†å¾ˆå¤šmongodbçš„éªŒè¯æœºåˆ¶ã€ç±»å‹è½¬æ¢ä¸ä¸šåŠ¡é€»è¾‘æ¨¡æ¿ï¼Œç„¶åæä¾›å‡ ä¸ªç®€å•çš„apiç»™æˆ‘ä»¬ï¼Œç®€åŒ–äº†å·¥ä½œï¼Œç­‰ç­‰ã€‚<br>å› æ­¤åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼ŒåŒ…æ‹¬è¿æ¥æ•°æ®åº“ä»¥åŠä¹‹åçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡mongooseæ¥æ“ä½œã€‚<br>å› æ­¤å»ºè®®ä¸ç”¨å¤ªå»èŠ±å¤ªå¤šæ—¶é—´å»çœ‹mongodbçš„apiæ•™ç¨‹ï¼Œç¨å¾®äº†è§£ä¸‹å³å¯ï¼Œç„¶åå¤šçœ‹çœ‹mongooseçš„ç›¸å…³æ“ä½œã€‚</p><h3 id="èŠ±æ›´å¤šæ—¶é—´å­¦mongodbè¿˜æ˜¯mongooseæ•™ç¨‹ï¼Ÿ"><a href="#èŠ±æ›´å¤šæ—¶é—´å­¦mongodbè¿˜æ˜¯mongooseæ•™ç¨‹ï¼Ÿ" class="headerlink" title="èŠ±æ›´å¤šæ—¶é—´å­¦mongodbè¿˜æ˜¯mongooseæ•™ç¨‹ï¼Ÿ"></a>èŠ±æ›´å¤šæ—¶é—´å­¦mongodbè¿˜æ˜¯mongooseæ•™ç¨‹ï¼Ÿ</h3><p>è¯·å‚çœ‹ã€Šç”¨mongodbåŸç”Ÿå‘½ä»¤è¿˜æ˜¯mongooseæ“ä½œæ•°æ®åº“ï¼Ÿã€‹ã€‚</p><h3 id="è¦ä¸è¦æ‰‹åŠ¨å»ºæ–‡ä»¶å¤¹ç›®å½•data-dbï¼Ÿ"><a href="#è¦ä¸è¦æ‰‹åŠ¨å»ºæ–‡ä»¶å¤¹ç›®å½•data-dbï¼Ÿ" class="headerlink" title="è¦ä¸è¦æ‰‹åŠ¨å»ºæ–‡ä»¶å¤¹ç›®å½•data\dbï¼Ÿ"></a>è¦ä¸è¦æ‰‹åŠ¨å»ºæ–‡ä»¶å¤¹ç›®å½•data\dbï¼Ÿ</h3><p>æˆ‘åœ¨åˆšæ¥è§¦ mongodbæ—¶ï¼Œä»¥ä¸ºå¯åŠ¨mongodbè¦å»ºæ–‡ä»¶å¤¹ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æ•°æ®åº“æ•°æ®ï¼Œå…¶å®ä¸å¿…äº†ã€‚<br>åªè¦åœ¨cmdä¸Šå¯åŠ¨å¥½mongodbæœåŠ¡å™¨å°±å¥½ï¼Œå…¶ä»–çš„å°±äº¤ç»™é¡¹ç›®ä½¿ç”¨mongooseæ¥æ“ä½œmongodbå°±å¥½ã€‚<br>ä¸è¦åˆ›å»ºä»€ä¹ˆæ•°æ®åº“æ–‡ä»¶å¤¹ç›®å½•ã€‚</p><h3 id="ç»å…¸demo-åˆ›å»ºæ•°æ®åº“ã€è¡¨æ ¼å’Œæ•°æ®"><a href="#ç»å…¸demo-åˆ›å»ºæ•°æ®åº“ã€è¡¨æ ¼å’Œæ•°æ®" class="headerlink" title="ç»å…¸demo-åˆ›å»ºæ•°æ®åº“ã€è¡¨æ ¼å’Œæ•°æ®"></a>ç»å…¸demo-åˆ›å»ºæ•°æ®åº“ã€è¡¨æ ¼å’Œæ•°æ®</h3><h4 id="demo-ä»£ç "><a href="#demo-ä»£ç " class="headerlink" title="demo ä»£ç "></a>demo ä»£ç </h4><p>å¯åŠ¨mongodbåï¼Œåœ¨ä»»æ„ç›®å½•ä¸‹ï¼Œä½¿ç”¨node æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const mongoose = require(&apos;mongoose&apos;);</span><br><span class="line">//mongoose.connect è¿æ¥mongodbæœåŠ¡å™¨ä¸­çš„æ•°æ®åº“ï¼ŒnewdbNameæ˜¯æ•°æ®åº“åï¼Œæœ‰åˆ™è¿ï¼Œæ— æ­¤nameæ•°æ®ï¼Œå°±åˆ›å»º</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost:27017/newdbName&apos;,&#123;</span><br><span class="line">    useNewUrlParser:true</span><br><span class="line">&#125;);</span><br><span class="line">//Schema å®šä¹‰è¡¨æ ¼Fieldçš„ç±»å‹å’Œè§„åˆ™ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º å»ºæ•°æ®æ¨¡å‹</span><br><span class="line">var schema = new mongoose.Schema(&#123; name: &apos;string&apos;, size: &apos;string&apos; &#125;);</span><br><span class="line">//Model å°†Schemaå®šä¹‰çš„æ¨¡å‹ç»§æ‰¿è¿‡æ¥ï¼Œç”Ÿæˆè¡¨æ ¼tables,è¿™é‡Œç”Ÿæˆçš„åå­—ä¸º Tankï¼Œåœ¨æ•°æ®åº“ä¸­è¡¨æ ¼åæ˜¯å¤æ•°ï¼Œè§ã€Šçš„è§£é‡Šã€‹</span><br><span class="line">var Model = mongoose.model(&apos;Tank&apos;, schema);</span><br><span class="line">//new Model()æ­¤æ–¹æ³•ç”¨æ¥è¡¨æ ¼æ•°æ®çš„å¢åˆ æ”¹æŸ¥,</span><br><span class="line">var small = new Model(&#123; size: &apos;small&apos; &#125;);</span><br><span class="line">small.save(function (err) &#123;</span><br><span class="line">  if (err) return handleError(err);</span><br><span class="line">  console.log(&apos;åˆ›å»ºæˆåŠŸ&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="mongodbå®¢æˆ·ç«¯mongoæ£€æµ‹æ˜¯å¦ç”ŸæˆæˆåŠŸ"><a href="#mongodbå®¢æˆ·ç«¯mongoæ£€æµ‹æ˜¯å¦ç”ŸæˆæˆåŠŸ" class="headerlink" title="mongodbå®¢æˆ·ç«¯mongoæ£€æµ‹æ˜¯å¦ç”ŸæˆæˆåŠŸ"></a>mongodbå®¢æˆ·ç«¯mongoæ£€æµ‹æ˜¯å¦ç”ŸæˆæˆåŠŸ</h4><p>å°†ä»¥ä¸Šä»£ç å¤åˆ¶åˆ°jsä¸­ï¼Œç„¶å node è¯¥jsè¯•è¯•ï¼Œå¦‚æœå‡ºç°åˆ›å»ºæˆåŠŸï¼›<br>ç„¶åä»»æ„ç›®å½•ä¸‹ å¯åŠ¨cmdï¼Œæ‰“å¼€mongodbå®¢æˆ·ç«¯ï¼ŒæŸ¥çœ‹newdbNameæ•°æ®åº“æ˜¯å¦ç”Ÿæˆï¼Œä»¥ä¸‹æ˜¯æ­£å¸¸ç”Ÿæˆçš„ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Administrator@UO4SB7YL9WOZ3OK MINGW64 ~/Desktop</span><br><span class="line">$ mongo</span><br><span class="line">MongoDB shell version v4.0.6</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb</span><br><span class="line">Implicit session: session &#123; &quot;id&quot; : UUID(&quot;a6d3c14e-703d-44d8-851f-60dbb5ad2b9e&quot;) &#125;</span><br><span class="line">MongoDB server version: 4.0.6</span><br><span class="line">show dbs</span><br><span class="line">admin           0.000GB</span><br><span class="line">config          0.000GB</span><br><span class="line">douban-test     0.000GB</span><br><span class="line">douban-trailer  0.000GB</span><br><span class="line">local           0.000GB</span><br><span class="line">newdbName       0.000GB</span><br><span class="line">onedb           0.000GB</span><br><span class="line">test            0.000GB</span><br><span class="line">twodb           0.000GB</span><br><span class="line">yyy             0.000GB</span><br><span class="line">use newdbName</span><br><span class="line">switched to db newdbName</span><br><span class="line">show tables</span><br><span class="line">tanks</span><br><span class="line">db.tanks.find()</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;5c974d5df84c0d2b9450f43c&quot;), &quot;size&quot; : &quot;small&quot;, &quot;__v&quot; : 0 &#125;</span><br></pre></td></tr></table></figure><h3 id="mongodbã€mongooseæ¦‚å¿µ"><a href="#mongodbã€mongooseæ¦‚å¿µ" class="headerlink" title="mongodbã€mongooseæ¦‚å¿µ"></a>mongodbã€mongooseæ¦‚å¿µ</h3><p>æœ¬èŠ‚å†…å®¹å‚è€ƒå¦‚ä¸‹ï¼Œå¦‚æœ‰ç–‘é—®ç‚¹å‡»å¦‚ä¸‹è¿æ¥è¯¦ç»†äº†è§£ã€‚<br><a href="https://www.cnblogs.com/chris-oil/p/9142795.html" target="_blank" rel="noopener">å‚è€ƒ1</a><br><a href="http://www.runoob.com/mongodb/mongodb-databases-documents-collections.html" target="_blank" rel="noopener">å‚è€ƒ2</a></p><h4 id="mongodb-ä¸-ä¼ ç»Ÿæ•°æ®åº“-æ¦‚å¿µå¯¹æ¯”"><a href="#mongodb-ä¸-ä¼ ç»Ÿæ•°æ®åº“-æ¦‚å¿µå¯¹æ¯”" class="headerlink" title="mongodb ä¸ ä¼ ç»Ÿæ•°æ®åº“ æ¦‚å¿µå¯¹æ¯”"></a>mongodb ä¸ ä¼ ç»Ÿæ•°æ®åº“ æ¦‚å¿µå¯¹æ¯”</h4><figure class="image-box">                <img src="/image/mongodb/db.jpg" alt title class>                <p></p>            </figure><h4 id="mongodb-ã€mongoose-ä¸-ä¼ ç»Ÿæ•°æ®åº“-æ¦‚å¿µå¯¹æ¯”"><a href="#mongodb-ã€mongoose-ä¸-ä¼ ç»Ÿæ•°æ®åº“-æ¦‚å¿µå¯¹æ¯”" class="headerlink" title="mongodb ã€mongoose ä¸ ä¼ ç»Ÿæ•°æ®åº“ æ¦‚å¿µå¯¹æ¯”"></a>mongodb ã€mongoose ä¸ ä¼ ç»Ÿæ•°æ®åº“ æ¦‚å¿µå¯¹æ¯”</h4><p>ç»“åˆ ã€Šç»å…¸åˆ›å»ºæ•°æ®åº“ã€æ·»åŠ è¡¨æ ¼å’Œæ•°æ® demoã€‹ä¸€èµ·çœ‹<br><figure class="image-box">                <img src="/image/mongodb/mongoose.jpg" alt title class>                <p></p>            </figure></p><h4 id="mongooseæ ¸å¿ƒæ¦‚å¿µ-ä¸-æ•°æ®åº“çŸ¥è¯†-å¯¹åº”å…³ç³»"><a href="#mongooseæ ¸å¿ƒæ¦‚å¿µ-ä¸-æ•°æ®åº“çŸ¥è¯†-å¯¹åº”å…³ç³»" class="headerlink" title="mongooseæ ¸å¿ƒæ¦‚å¿µ ä¸ æ•°æ®åº“çŸ¥è¯† å¯¹åº”å…³ç³»"></a>mongooseæ ¸å¿ƒæ¦‚å¿µ ä¸ æ•°æ®åº“çŸ¥è¯† å¯¹åº”å…³ç³»</h4><p>ç»“åˆ ã€Šç»å…¸åˆ›å»ºæ•°æ®åº“ã€æ·»åŠ è¡¨æ ¼å’Œæ•°æ® demoã€‹ä¸€èµ·çœ‹<br><figure class="image-box">                <img src="/image/mongodb/index.jpg" alt title class>                <p></p>            </figure></p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><ul><li>mongodbä¸­è¯´çš„é›†åˆï¼Œå…¶å®å°±æ˜¯tablesï¼Œé€šè¿‡modelç”Ÿæˆï¼›</li><li>mongodbä¸­è¯´çš„æ–‡æ¡£ï¼Œå…¶å®å°±æ˜¯tablesçš„è¡Œæ•°æ®ï¼Œé€šè¿‡modelå®ä¾‹ç”Ÿæˆï¼›</li><li>mongooseçš„é‡ç‚¹åœ¨Schemaå’Œmodelï¼Œå…¶å®ä¸æ•°æ®ç›´æ¥æ‰“äº¤é“æœ€å¤šçš„æ˜¯modelï¼›</li><li>è‡³äºç”Ÿæˆæˆ–è¿æ¥æ•°æ®åº“ï¼Œå°±æ˜¯mongoose.connectæ–¹æ³•ã€‚</li></ul><h3 id="mongoose-modelç¬¬ä¸€ä¸ªå‚æ•°çš„å¤æ•°æ‰æ˜¯tablesåå­—ï¼ï¼"><a href="#mongoose-modelç¬¬ä¸€ä¸ªå‚æ•°çš„å¤æ•°æ‰æ˜¯tablesåå­—ï¼ï¼" class="headerlink" title="mongoose.modelç¬¬ä¸€ä¸ªå‚æ•°çš„å¤æ•°æ‰æ˜¯tablesåå­—ï¼ï¼"></a>mongoose.modelç¬¬ä¸€ä¸ªå‚æ•°çš„å¤æ•°æ‰æ˜¯tablesåå­—ï¼ï¼</h3><p>mongoose.model(abc,oneSchema)å®šä¹‰çš„ç¬¬ä¸€ä¸ªå‚æ•°abc,abcå¹¶établesè¡¨æ ¼åå­—,å®ƒçš„å¤æ•°æ‰æ˜¯ï¼Œæ•°æ®åº“ä¸­çš„è¡¨æ ¼åå­—æ˜¯abcesã€‚<br>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">let Model = mongoose.model(&quot;fruit&quot;,Schema);</span><br><span class="line">let apple = new Model(&#123;</span><br><span class="line">        category:&apos;apple&apos;,</span><br><span class="line">        name:&apos;apple&apos;</span><br><span class="line">    &#125;);</span><br><span class="line">apple.save()</span><br><span class="line"></span><br><span class="line">cmdä¸­æ‰§è¡Œå‘½ä»¤ï¼š</span><br><span class="line">show tablesï¼Œ</span><br><span class="line">åå­—æ˜¯fruits,é fruitã€‚</span><br></pre></td></tr></table></figure></p><h3 id="åˆ›å»ºæˆ–è¿æ¥æ•°æ®åº“"><a href="#åˆ›å»ºæˆ–è¿æ¥æ•°æ®åº“" class="headerlink" title="åˆ›å»ºæˆ–è¿æ¥æ•°æ®åº“"></a>åˆ›å»ºæˆ–è¿æ¥æ•°æ®åº“</h3><p>åˆ›å»ºå’Œè¿æ¥æ•°æ®åº“ä¸€èˆ¬é€šè¿‡mongooseï¼Œç”¨çš„å‘½ä»¤éƒ½æ˜¯mongoose.connectã€‚</p><p>åœ¨ä»»æ„ç›®å½•cmdï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œçœ‹åˆ°mongodbæœåŠ¡å™¨ä¸­æœ‰æ•°æ®åº“twodbï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br><span class="line">show dbs</span><br><span class="line">admin           0.000GB</span><br><span class="line">config          0.000GB</span><br><span class="line">local           0.000GB</span><br><span class="line">newdbName       0.000GB</span><br><span class="line">onedb           0.000GB</span><br><span class="line">test            0.000GB</span><br><span class="line">twodb           0.000GB</span><br></pre></td></tr></table></figure></p><p>ä¾‹å¦‚æˆ‘ç°åœ¨è¦è¿æ¥ æ•°æ®åº“twodbï¼Œæ­¥éª¤å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongoose.connect(&apos;mongodb://localhost:27017/twodb&apos;,&#123;</span><br><span class="line">    useNewUrlParser:true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œmongodb://localhost:27017/ è¿™æ˜¯é»˜è®¤å†™æ³•ï¼Œtwodbæ˜¯æ•°æ®åº“å†™æ³•ï¼Œ<br>å½“twodbè¿™ä¸ªæ•°æ®åº“åœ¨mongodbå­˜åœ¨æ—¶ï¼Œå°±è¿æ¥æ­¤æ•°æ®åº“ï¼Œå½“ä¸å­˜åœ¨æ—¶ï¼Œå°±æ˜¯åˆ›å»ºåä¸ºtwodbçš„æ•°æ®åº“ã€‚</p><h3 id="mongodb-localhost-27017-dbName"><a href="#mongodb-localhost-27017-dbName" class="headerlink" title="mongodb://localhost:27017/dbName"></a>mongodb://localhost:27017/dbName</h3><p>æˆ‘ä»¬å¦‚æœè¦è¿æ¥dbNameæ•°æ®åº“ï¼Œä¸ºä»€ä¹ˆmongoose.connectçš„æ—¶å€™ï¼Œå´è¦å†™æˆmongodb://localhost:27017/twodb;<br>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoose.connect(&apos;mongodb://localhost:27017/twodb&apos;)</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿™æ ·å‘¢ã€‚<br><strong>åŸæ¥è¿™æ˜¯mongodbçš„æ ‡å‡† URI è¿æ¥è¯­æ³•ï¼š</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]</span><br></pre></td></tr></table></figure><ul><li>mongodb:// è¿™æ˜¯å›ºå®šçš„æ ¼å¼ï¼Œå¿…é¡»è¦æŒ‡å®šã€‚</li><li>username:password@ å¯é€‰é¡¹ï¼Œå¦‚æœè®¾ç½®ï¼Œåœ¨è¿æ¥æ•°æ®åº“æœåŠ¡å™¨ä¹‹åï¼Œé©±åŠ¨éƒ½ä¼šå°è¯•ç™»é™†è¿™ä¸ªæ•°æ®åº“</li><li>host1 å¿…é¡»çš„æŒ‡å®šè‡³å°‘ä¸€ä¸ªhost, host1 æ˜¯è¿™ä¸ªURIå”¯ä¸€è¦å¡«å†™çš„ã€‚å®ƒæŒ‡å®šäº†è¦è¿æ¥æœåŠ¡å™¨çš„åœ°å€ã€‚å¦‚æœè¦è¿æ¥å¤åˆ¶é›†ï¼Œè¯·æŒ‡å®šå¤šä¸ªä¸»æœºåœ°å€ã€‚</li><li>portX å¯é€‰çš„æŒ‡å®šç«¯å£ï¼Œå¦‚æœä¸å¡«ï¼Œé»˜è®¤ä¸º27017</li><li>/database å¦‚æœæŒ‡å®šusername:password@ï¼Œè¿æ¥å¹¶éªŒè¯ç™»é™†æŒ‡å®šæ•°æ®åº“ã€‚è‹¥ä¸æŒ‡å®šï¼Œé»˜è®¤æ‰“å¼€ test æ•°æ®åº“ã€‚</li><li>?options æ˜¯è¿æ¥é€‰é¡¹ã€‚å¦‚æœä¸ä½¿ç”¨/databaseï¼Œåˆ™å‰é¢éœ€è¦åŠ ä¸Š/ã€‚æ‰€æœ‰è¿æ¥é€‰é¡¹éƒ½æ˜¯é”®å€¼å¯¹name=valueï¼Œé”®å€¼å¯¹ä¹‹é—´é€šè¿‡&amp;æˆ–;ï¼ˆåˆ†å·ï¼‰éš”å¼€<br>è¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œ<a href="http://www.runoob.com/mongodb/mongodb-connections.html" target="_blank" rel="noopener">æ›´è¯¦ç»†çš„è¯·ç‚¹å‡»è¿™é‡Œäº†è§£</a>ã€‚</li></ul><p>ä¸€èˆ¬ä½¿ç”¨mongoose.connect(â€˜mongodb://localhost:27017/twodbâ€™)è¿æ¥å³å¯ã€‚</p><h3 id="mongodbç›®å½•"><a href="#mongodbç›®å½•" class="headerlink" title="mongodbç›®å½•"></a>mongodbç›®å½•</h3><p>C:\Program Files\MongoDB\Server\4.0\bin</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.cnblogs.com/chris-oil/p/9142795.html" target="_blank" rel="noopener">æ·±å…¥æµ…å‡ºmongooseâ€”â€“åŒ…æ‹¬mongooseåŸºæœ¬æ‰€æœ‰æ“ä½œ,éå¸¸å®ç”¨!!!!!</a><br><a href="https://www.cnblogs.com/shirly77/p/6536327.html" target="_blank" rel="noopener">mongodb æ€æ ·æ£€æµ‹ å®‰è£…æˆåŠŸ ä»¥åŠmongodbçš„ä¸€äº›å¢åˆ æ”¹æŸ¥å‘½ä»¤</a><br><a href="http://www.runoob.com/mongodb/mongodb-query.html" target="_blank" rel="noopener">MongoDB æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mongoose </tag>
            
            <tag> mongodb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npm script</title>
      <link href="/2020/05/01/npmscript/"/>
      <url>/2020/05/01/npmscript/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="npx-node-sass"><a href="#npx-node-sass" class="headerlink" title="npx node-sass"></a>npx node-sass</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx node-sass variables.scss var.css  #è¢«ç¼–è¯‘çš„scssæ–‡ä»¶ï¼Œ ç¼–è¯‘åè¾“å‡ºçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="å…³äºpreçš„å†™æ³•"><a href="#å…³äºpreçš„å†™æ³•" class="headerlink" title="å…³äºpreçš„å†™æ³•"></a>å…³äºpreçš„å†™æ³•</h3><p>å¦‚æœnpm script å†™æ³•ä¸­å¸¦æœ‰é¢„å…ˆ preï¼Œå¦‚ä¸‹é¢çš„commitï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œnpm run commit ä¹‹å‰å°±ä¼šæ‰§è¡Œprecommitå‘½ä»¤ï¼Ÿï¼Ÿ<br>å­˜ç–‘ï¼Œå¾…ç ”ç©¶ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "precommit": "lint-staged",</span><br><span class="line">    "lint": "npm run lint:js &amp;&amp; npm run lint:style &amp;&amp; npm run lint:prettier",</span><br><span class="line">    "lint-staged": "lint-staged",</span><br><span class="line">    "lint-staged:js": "eslint --ext .js,.jsx,.ts,.tsx",</span><br><span class="line">    "lint:fix": "eslint --fix --cache --ext .js,.jsx,.ts,.tsx --format=pretty \"./packages/**/src/**\" &amp;&amp; npm run lint:style",</span><br><span class="line">    "lint:js": "eslint --cache --ext .js,.jsx,.ts,.tsx --format=pretty \"./packages/**/src/**\"",</span><br><span class="line">    "lint:prettier": "check-prettier lint",</span><br><span class="line">    "lint:style": "stylelint --fix \"**/*.less\" --syntax less",</span><br><span class="line">    "prettier": "prettier -c --write \"**/*\""</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="npm-scriptã€å‘½ä»¤è¡Œã€npx"><a href="#npm-scriptã€å‘½ä»¤è¡Œã€npx" class="headerlink" title="npm scriptã€å‘½ä»¤è¡Œã€npx"></a>npm scriptã€å‘½ä»¤è¡Œã€npx</h3><h4 id="ä¸‰è€…å…³ç³»"><a href="#ä¸‰è€…å…³ç³»" class="headerlink" title="ä¸‰è€…å…³ç³»"></a>ä¸‰è€…å…³ç³»</h4><p>shellèƒ½æ‰§è¡Œçš„å‘½ä»¤ï¼Œå°±å¯ä»¥å†™åœ¨npm script ä¸Š;<br>ç‰¹æ®Šçš„æ˜¯ï¼Œnpm script çš„binç›®å½•é™¤äº†å…¨å±€çš„å¤–ï¼Œè¿˜æœ‰ node_module å†…çš„bin;<br>å¦‚æœä¸ä½¿ç”¨npm scriptï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼Œ å°±å¿…é¡» å†™ node_moduleçš„å…¨å‘½ä»¤;</p><figure class="image-box">                <img src="/image/npmscript/npx.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/npmscript/run.png" alt title class>                <p></p>            </figure><h4 id="npm-script-ä¸-ç¯å¢ƒå˜é‡-path"><a href="#npm-script-ä¸-ç¯å¢ƒå˜é‡-path" class="headerlink" title="npm script ä¸ ç¯å¢ƒå˜é‡ path"></a>npm script ä¸ ç¯å¢ƒå˜é‡ path</h4><p>npm run shell å‘½ä»¤ ç‰¹æ®Šä¹‹å¤„ åœ¨äº åœ¨å‘½ä»¤è¿è¡Œæ—¶ï¼Œä¼šå°† node module çš„bin æ”¾å…¥ç¯å¢ƒå˜é‡path ä¸­ï¼Œè¿™æ ·å°±èƒ½ç›´æ¥ä½¿ç”¨node moduelå‘½ä»¤ï¼Œ<br>npm run æ‰§è¡Œå®Œæ¯• åˆå°†æ­¤ path å˜é‡ é‡Šæ”¾ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm-script </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éƒ¨ç½²ã€è¿ç»´åŠè¾¹ç¼˜</title>
      <link href="/2020/05/01/other/"/>
      <url>/2020/05/01/other/</url>
      
        <content type="html"><![CDATA[<p>è¿™ç¯‡ç¬”è®°æš‚æ—¶éšä¾¿å†™ä¸‹ï¼ŒåæœŸä¼šä¿®æ”¹æˆ–åˆ é™¤ã€‚</p><h2 id="è…¾è®¯äº‘"><a href="#è…¾è®¯äº‘" class="headerlink" title="è…¾è®¯äº‘"></a>è…¾è®¯äº‘</h2><h3 id="é€šè¿‡itermç™»é™†è…¾è®¯äº‘"><a href="#é€šè¿‡itermç™»é™†è…¾è®¯äº‘" class="headerlink" title="é€šè¿‡itermç™»é™†è…¾è®¯äº‘"></a>é€šè¿‡itermç™»é™†è…¾è®¯äº‘</h3><h3 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p><a href="https://www.jianshu.com/p/2dae7b13ce2f" target="_blank" rel="noopener">linuxå®‰è£…docker</a></p><h4 id="åŠ é€Ÿå™¨é…ä¸Šå¾ˆé‡è¦"><a href="#åŠ é€Ÿå™¨é…ä¸Šå¾ˆé‡è¦" class="headerlink" title="åŠ é€Ÿå™¨é…ä¸Šå¾ˆé‡è¦"></a>åŠ é€Ÿå™¨é…ä¸Šå¾ˆé‡è¦</h4><p>ä¸‹é¢æ˜¯è…¾è®¯äº‘çš„åŠ é€Ÿå™¨åœ°å€ï¼ŒåŠ é€Ÿå™¨å¯¹è…¾è®¯äº‘ä¸­åŠ è½½èµ„æºå¾ˆé‡è¦ï¼Œå¦åˆ™é¾Ÿé€Ÿã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://mirror.ccs.tencentyun.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure></p><h4 id="æ³¨æ„å¯åŠ¨docker"><a href="#æ³¨æ„å¯åŠ¨docker" class="headerlink" title="æ³¨æ„å¯åŠ¨docker"></a>æ³¨æ„å¯åŠ¨docker</h4><h3 id="å®‰è£…portainer"><a href="#å®‰è£…portainer" class="headerlink" title="å®‰è£…portainer"></a>å®‰è£…portainer</h3><p>portaineræ˜¯dockerå¯è§†åŒ–çš„ä¸€ä¸ªå·¥å…·ã€‚å®‰è£…å¥½åï¼Œæµè§ˆå™¨å¯åŠ¨ï¼š<br><code>http://81.70.51.148:9000/#/containers</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker volume create portainer_data</span><br><span class="line">docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</span><br></pre></td></tr></table></figure></p><h3 id="å®‰è£…-jenkins"><a href="#å®‰è£…-jenkins" class="headerlink" title="å®‰è£… jenkins"></a>å®‰è£… jenkins</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull jenkins/jenkins</span><br><span class="line">docker run -d -v jenkins_home:/var/jenkins_home -p 8080:8080 -p 50000:50000 jenkins/jenkins</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…nginx"><a href="#å®‰è£…nginx" class="headerlink" title="å®‰è£…nginx"></a>å®‰è£…nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name nginx-hz -p 8090:80 -d nginx</span><br></pre></td></tr></table></figure><h3 id="å†™å…¥è„šæœ¬"><a href="#å†™å…¥è„šæœ¬" class="headerlink" title="å†™å…¥è„šæœ¬"></a>å†™å…¥è„šæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo [INFO] å¼€å§‹æ„å»º</span><br><span class="line">npm install</span><br><span class="line">hexo g</span><br><span class="line"></span><br><span class="line">echo [INFO] ç¼–è¯‘å¹¶éƒ¨ç½²ç»“æŸ!</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¾¹ç¼˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jenkens </tag>
            
            <tag> docker </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npmåŒ…å¼€å‘</title>
      <link href="/2020/05/01/npm/"/>
      <url>/2020/05/01/npm/</url>
      
        <content type="html"><![CDATA[<h2 id="npmåŒ…é›†ä¸­ç®¡ç†é¡¹ç›®"><a href="#npmåŒ…é›†ä¸­ç®¡ç†é¡¹ç›®" class="headerlink" title="npmåŒ…é›†ä¸­ç®¡ç†é¡¹ç›®"></a>npmåŒ…é›†ä¸­ç®¡ç†é¡¹ç›®</h2><h3 id="æ¦‚è¿°ä¸åœ°å€"><a href="#æ¦‚è¿°ä¸åœ°å€" class="headerlink" title="æ¦‚è¿°ä¸åœ°å€"></a>æ¦‚è¿°ä¸åœ°å€</h3><p><a href="https://github.com/YeWills/npmtest" target="_blank" rel="noopener">é¡¹ç›®åœ°å€</a><br>å¦‚æœå‘å¸ƒçš„npmåŒ…æ¯”è¾ƒå¤šï¼Œèƒ½é›†ä¸­ç®¡ç†è¿™äº›åŒ…ï¼Œæ˜¯ä¸€ç§å¾ˆå¥½çš„ææ•ˆæ–¹å¼ã€‚<br>ä¸ºæ­¤ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ lerna æ¥é›†ä¸­ç®¡ç†å‘å¸ƒï¼Œè®©lernaé›†ä¸­åšåŒ… version ç­‰çš„ç®¡ç†ï¼Œå¹¶é›†ä¸­å‘å¸ƒåˆ°npmã€‚<br>ä½¿ç”¨umiå›¢é˜Ÿçš„ father (father-build) æ¥å°†packagesåŒ…å†…çš„ src ç¼–è¯‘åˆ° libï¼ˆfatheré»˜è®¤å°†srcç¼–è¯‘åˆ°libï¼‰ï¼Œ<br>ä»¥ä¾¿å‘å¸ƒæ—¶ä½¿ç”¨ç¼–è¯‘åçš„es5ä»£ç ã€‚</p><h3 id="lerna-npmå‘å¸ƒåˆ©å™¨"><a href="#lerna-npmå‘å¸ƒåˆ©å™¨" class="headerlink" title="lerna npmå‘å¸ƒåˆ©å™¨"></a>lerna npmå‘å¸ƒåˆ©å™¨</h3><h4 id="é›†ä¸­å‘å¸ƒç®¡ç†"><a href="#é›†ä¸­å‘å¸ƒç®¡ç†" class="headerlink" title="é›†ä¸­å‘å¸ƒç®¡ç†"></a>é›†ä¸­å‘å¸ƒç®¡ç†</h4><p>å¦‚ä¸Šåˆ†æï¼Œlernaå¯ä»¥ç”¨äºé›†ä¸­å¯¹åŒ…åšversionç­‰ç®¡ç†ã€‚å¹¶é›†ä¸­å‘å¸ƒã€‚<br>lernaåŠŸèƒ½æ¯”è¾ƒå¤šï¼Œå®ƒä¼šæ¯”å¯¹å„ä¸ªåŒ…ï¼Œå¦‚æœåŒ…æ²¡æœ‰å˜åŒ–ï¼Œä¸æ”¹å˜åŒ…ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰å˜åŒ–ï¼Œä¼šæ™ºèƒ½å åŠ å°ç‰ˆæœ¬å·ã€‚</p><h4 id="é›†ä¸­å®‰è£…åŒ…ä¾èµ–"><a href="#é›†ä¸­å®‰è£…åŒ…ä¾èµ–" class="headerlink" title="é›†ä¸­å®‰è£…åŒ…ä¾èµ–"></a>é›†ä¸­å®‰è£…åŒ…ä¾èµ–</h4><p><code>lerna bootstrap</code>å¯ä»¥ç”¨äºé›†ä¸­å®‰è£…packagesä¸‹çš„åŒ…çš„ä¾èµ–ã€‚</p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>å¯ç½‘ä¸ŠæŸ¥é˜…lernaã€‚</p><h3 id="fatherç¼–è¯‘es5-father-build"><a href="#fatherç¼–è¯‘es5-father-build" class="headerlink" title="fatherç¼–è¯‘es5 (father-build)"></a>fatherç¼–è¯‘es5 (father-build)</h3><p>å‚è€ƒã€Šæ¦‚è¿°ä¸åœ°å€ã€‹è®²è§£</p><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">false</span>,<span class="comment">//å·¥ç¨‹æ˜¯ç§æœ‰æˆ–å…¬æœ‰ï¼Œè‹¥å‘å¸ƒï¼Œé»˜è®¤è®¾ç½®false</span></span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"bootstrap"</span>: <span class="string">"lerna bootstrap"</span>,<span class="comment">//ç»™packageä¸‹çš„åŒ…ï¼Œå®‰è£…ä¾èµ–</span></span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"father-build"</span>,<span class="comment">// yarn build -w  src ç¼–è¯‘åˆ° libï¼Œfatheré»˜è®¤å°†srcç¼–è¯‘åˆ°lib</span></span><br><span class="line">    <span class="attr">"changelog"</span>: <span class="string">"lerna-changelog"</span>,</span><br><span class="line">    <span class="attr">"clean"</span>: <span class="string">"lerna clean -y"</span>,</span><br><span class="line">    <span class="attr">"lint"</span>: <span class="string">"eslint --ext .js packages"</span>,</span><br><span class="line">    <span class="attr">"precommit"</span>: <span class="string">"lint-staged"</span>,</span><br><span class="line">    <span class="attr">"prettier"</span>: <span class="string">"prettier --write '**/*.&#123;js,jsx,tsx,ts,less,md,json&#125;'"</span>,</span><br><span class="line">    <span class="attr">"dpublish"</span>: <span class="string">"lerna publish"</span><span class="comment">//é›†ä¸­ç®¡ç†å‘å¸ƒåŒ…ï¼ŒåŒ…å«name version ï¼Œå‘å¸ƒå‰ï¼Œå°†æ ¹ç›®å½•ä¸‹git push</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"lint-staged"</span>: &#123;</span><br><span class="line">    <span class="attr">"**/*.&#123;js,jsx,tsx,ts,less,json&#125;"</span>: [</span><br><span class="line">      <span class="string">"prettier --write"</span>,</span><br><span class="line">      <span class="string">"git add"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"father-build"</span>: <span class="string">"^1.13.1"</span>,</span><br><span class="line">    <span class="attr">"husky"</span>: <span class="string">"1.2.0"</span>,</span><br><span class="line">    <span class="attr">"lerna"</span>: <span class="string">"3.6.0"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="lerna-json"><a href="#lerna-json" class="headerlink" title="lerna.json"></a>lerna.json</h3><p><code>lerna bootstrap</code>å¯ä»¥ç”¨äºé›†ä¸­å®‰è£…packagesä¸‹çš„åŒ…çš„ä¾èµ–ã€‚ä½¿ç”¨npmæˆ–yarnå®‰è£…æ—¶ï¼Œ<br>è¯·å®šä¹‰å¥½<code>&quot;npmClient&quot;: &quot;npm&quot;</code><br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"packages"</span>: [<span class="string">"packages/*"</span>],</span><br><span class="line">  <span class="attr">"command"</span>: &#123;</span><br><span class="line">    <span class="attr">"version"</span>: &#123;</span><br><span class="line">      <span class="attr">"exact"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"npmClient"</span>: <span class="string">"npm"</span>,<span class="comment">//ä½¿ç”¨yarn æˆ– npm å‘½ä»¤å®‰è£…</span></span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"independent"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="husky-æäº¤å‰éªŒè¯"><a href="#husky-æäº¤å‰éªŒè¯" class="headerlink" title="husky æäº¤å‰éªŒè¯"></a>husky æäº¤å‰éªŒè¯</h3><p>è§é¡¹ç›®æºç ã€‚</p><h3 id="åŒ…å‘å¸ƒå‰ï¼Œå¿…é¡»æäº¤é¡¹ç›®ä»£ç "><a href="#åŒ…å‘å¸ƒå‰ï¼Œå¿…é¡»æäº¤é¡¹ç›®ä»£ç " class="headerlink" title="åŒ…å‘å¸ƒå‰ï¼Œå¿…é¡»æäº¤é¡¹ç›®ä»£ç "></a>åŒ…å‘å¸ƒå‰ï¼Œå¿…é¡»æäº¤é¡¹ç›®ä»£ç </h3><p>æ‰§è¡Œ <code>yarn dpublish</code>å‰ï¼Œå¿…é¡»æ ¹ç›®å½•ä¸‹ï¼Œæäº¤é¡¹ç›®æ‰€æœ‰ä»£ç ï¼Œå¦åˆ™å‡ºé”™ã€‚</p><h3 id="å‘å¸ƒæ—¶æ³¨æ„-npm-æºçš„æ§åˆ¶ï¼›"><a href="#å‘å¸ƒæ—¶æ³¨æ„-npm-æºçš„æ§åˆ¶ï¼›" class="headerlink" title="å‘å¸ƒæ—¶æ³¨æ„ npm æºçš„æ§åˆ¶ï¼›"></a>å‘å¸ƒæ—¶æ³¨æ„ npm æºçš„æ§åˆ¶ï¼›</h3><p>å‘å¸ƒæ—¶ï¼Œå°†åŒ…å‘å¸ƒåˆ°npmæŒ‡å®šåˆ°æºï¼Œå°±å¯ä»¥åœ¨å¯¹åº”çš„æºä¸Šè¿›è¡Œnpm installã€‚</p><h3 id="å®æ—¶ç¼–è¯‘-w"><a href="#å®æ—¶ç¼–è¯‘-w" class="headerlink" title="å®æ—¶ç¼–è¯‘ -w"></a>å®æ—¶ç¼–è¯‘ -w</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;father-build&quot;,// yarn build -w  src ç¼–è¯‘åˆ° libï¼Œfatheré»˜è®¤å°†srcç¼–è¯‘åˆ°lib</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn build -w //å¼€å¯ä»£ç å®æ—¶ç›‘å¬ç¼–è¯‘ï¼Œå½“packageså†…çš„åŒ…çš„srcæ–‡ä»¶æœ‰å˜åŒ–æ—¶ï¼Œå®æ—¶ç¼–è¯‘åˆ°å¯¹åº”çš„libæ–‡ä»¶å†…ã€‚</span><br><span class="line">git add .</span><br><span class="line">git commit -m &quot;ç‰ˆæœ¬ä¿®æ”¹&quot;</span><br><span class="line">git push</span><br><span class="line">yarn dpublish //ä»£ç ç¼–è¯‘ï¼Œå¹¶æäº¤åï¼Œå°†åŒ…å‘å¸ƒåˆ°npmæœåŠ¡å™¨ä¸Š</span><br></pre></td></tr></table></figure><h2 id="è°ƒè¯•æŠ€å·§"><a href="#è°ƒè¯•æŠ€å·§" class="headerlink" title="è°ƒè¯•æŠ€å·§"></a>è°ƒè¯•æŠ€å·§</h2><h3 id="npm-link"><a href="#npm-link" class="headerlink" title="npm link"></a>npm link</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>npmåŒ…æœªå‘å¸ƒåˆ°çº¿ä¸Šæ—¶ï¼Œéœ€è¦æœ¬åœ°è°ƒè¯•ï¼Œä¸ºè§£å†³npmåŒ…å¼€å‘é¡¹ç›®ï¼Œä¸å®é™…ä½¿ç”¨çš„ä¸šåŠ¡é¡¹ç›®ä¸åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹çš„é—®é¢˜ã€‚<br>åœ¨npmåŒ…æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ¯”å¦‚ packages/yewBtnæ ¹ç›®å½•ä¸‹</span><br><span class="line">npm link</span><br></pre></td></tr></table></figure></p><p>npmåœ¨ç”µè„‘æœ¬åœ°å†…ï¼Œå°†å½¢æˆä¸€ä¸ªæœ¬åœ°æ˜ å°„ï¼Œåœ¨å®é™…å¼€å‘ç›®å½•ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm link packageName</span><br></pre></td></tr></table></figure></p><p>æœ¬åœ°é¡¹ç›®ä¸‹å°†å¯ä»¥ä½¿ç”¨æ­¤åŒ…ï¼Œä¸”åŒ…çš„å¼€å‘æ–‡ä»¶å†…ï¼Œå¦‚æœæœ‰æ”¹åŠ¨ï¼Œå®é™…ä¸šåŠ¡é¡¹ç›®å†…å°†ä¼šè·å–åˆ°ã€‚</p><h4 id="åªéœ€è¦æ‰§è¡Œä¸€æ¬¡npm-link"><a href="#åªéœ€è¦æ‰§è¡Œä¸€æ¬¡npm-link" class="headerlink" title="åªéœ€è¦æ‰§è¡Œä¸€æ¬¡npm link"></a>åªéœ€è¦æ‰§è¡Œä¸€æ¬¡npm link</h4><p>åœ¨åŒ…ç›®å½•ä¸‹ï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡npm linkï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å°±å¯ä»¥æ‹¿åˆ°æœ€æ–°æºç </p><h4 id="é€šè¿‡node-moduleåŒ…çœ‹æ˜¯å¦æœ€æ–°"><a href="#é€šè¿‡node-moduleåŒ…çœ‹æ˜¯å¦æœ€æ–°" class="headerlink" title="é€šè¿‡node moduleåŒ…çœ‹æ˜¯å¦æœ€æ–°"></a>é€šè¿‡node moduleåŒ…çœ‹æ˜¯å¦æœ€æ–°</h4><p>æƒ³çŸ¥é“node moduleåŒ…å¼•ç”¨çš„æ˜¯å¦ä¸ºnpm linkæœ€æ–°ä»£ç ï¼Œç›´æ¥å–node moduleåŒ…çœ‹å°±è¡Œã€‚</p><h4 id="ä»¥ç›®å½•åœ°å€ä¸ºæ ‡è¯†"><a href="#ä»¥ç›®å½•åœ°å€ä¸ºæ ‡è¯†" class="headerlink" title="ä»¥ç›®å½•åœ°å€ä¸ºæ ‡è¯†"></a>ä»¥ç›®å½•åœ°å€ä¸ºæ ‡è¯†</h4><p>åœ¨æºç ä¸Šæ‰§è¡Œ npm link åï¼Œnpm å°†ä¼šå»ºç«‹ä»¥è¿™ä¸ªæºç ç›®å½•ä¸ºæ ‡å¿—çš„è½¯é“¾æ¥ï¼Œåªè¦ç›®å½•åœ°å€ä¸å˜ï¼Œ<br>åªéœ€è¦æœ€åˆæ‰§è¡Œä¸€æ¬¡npm linkï¼Œä»¥åä¸šåŠ¡ä»£ç ä¸­éƒ½å¯ä»¥ç”¨åˆ°æœ€æ–°ã€‚</p><h4 id="ä¸lernaä¸€èµ·ä½¿ç”¨çš„æŠ€å·§"><a href="#ä¸lernaä¸€èµ·ä½¿ç”¨çš„æŠ€å·§" class="headerlink" title="ä¸lernaä¸€èµ·ä½¿ç”¨çš„æŠ€å·§"></a>ä¸lernaä¸€èµ·ä½¿ç”¨çš„æŠ€å·§</h4><p>ä¸€èˆ¬ä¸šåŠ¡ä»£ç ä¸­åªèƒ½ä½¿ç”¨ç¼–è¯‘åes5ç‰ˆæœ¬çš„ä»£ç ï¼Œå¼€å¯ lerna â€“watch åï¼Œåªè¦æºç æœ‰æ”¹å˜ï¼Œå°±å®æ—¶ç¼–è¯‘ï¼Œä¸šåŠ¡ä»£ç ä¸­npm linkåˆ°çš„ä»£ç å°±æœ€æ–°ã€‚</p><h2 id="npmåŒ…å¼€å‘"><a href="#npmåŒ…å¼€å‘" class="headerlink" title="npmåŒ…å¼€å‘"></a>npmåŒ…å¼€å‘</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>npmçš„å¼€å‘ä¸»è¦æ˜¯æ—¥å¸¸åŒ…å¼€å‘ï¼Œè°ƒè¯•ï¼Œå‘å¸ƒï¼Œä¸‰ä¸ªå†…å®¹ã€‚<br>æ›´å¤šï¼Œå¯å‚è€ƒ<a href="https://www.jianshu.com/p/f33a919443ed" target="_blank" rel="noopener">å¦‚ä½•åœ¨npmä¸Šå‘å¸ƒè‡ªå·±çš„åŒ…</a></p><h3 id="package-json-1"><a href="#package-json-1" class="headerlink" title="package.json"></a>package.json</h3><p>ç›¸å…³ä¿¡æ¯æŸ¥é˜…ç½‘ä¸Šï¼Œè¿™é‡ŒæŒ‘å‡ ä¸ªé‡ç‚¹ã€‚</p><h4 id="files"><a href="#files" class="headerlink" title="files"></a>files</h4><p>é€‰æ‹©è¦å‘å¸ƒåˆ°npmæœåŠ¡å™¨ä¸Šçš„files<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">"files": [</span><br><span class="line">   "cli.js",</span><br><span class="line">   "index.js",</span><br><span class="line">   <span class="string">"lib"</span></span><br><span class="line"> ],</span><br></pre></td></tr></table></figure></p><h4 id="bin"><a href="#bin" class="headerlink" title="bin"></a>bin</h4><p>å¦‚æœè®¾ç½®æ­¤å±æ€§ï¼Œæ„å‘³ç€å®‰è£…æ­¤åŒ…åï¼Œå¯æ‰§è¡Œå¦‚ä¸‹<code>create-umi</code>å‘½ä»¤ï¼Œå°±ä¼šæ‰§è¡Œå³ä¾§cli.jsã€‚<br>binçš„å®ç°ï¼Œå¤§å¤šä½¿ç”¨<code>Yeoman</code>å®Œæˆã€‚<br>å¯å‚è€ƒ create-umi åŒ…ä¸­binå¼€å‘å¤„ç†ã€‚<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"bin": &#123;</span><br><span class="line">   "create-umi": "cli.js"</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="dependenciesä¸devDependenciesåŒºåˆ«æŠ€å·§"><a href="#dependenciesä¸devDependenciesåŒºåˆ«æŠ€å·§" class="headerlink" title="dependenciesä¸devDependenciesåŒºåˆ«æŠ€å·§"></a>dependenciesä¸devDependenciesåŒºåˆ«æŠ€å·§</h4><p>devDependenciesé€šå¸¸ç”¨äºå¼€å‘æ—¶ï¼Œå¦‚eslintï¼Œæˆ–è€…å¯åŠ¨å‘½ä»¤çš„åŒ… å¦‚ cross-env ç­‰ç­‰ã€‚<br>è¿˜æœ‰ä¸€ä¸ªæœ€ç›´è§‚çš„ï¼š<br>å‡¡äº‹åœ¨é¡¹ç›®ä¸šåŠ¡æˆ–ç»„ä»¶ä»£ç ä¸­ï¼Œæ˜ç¡®åšæ¥importä¾èµ–çš„ï¼Œè¯´æ˜æ˜¯ç”Ÿäº§å¿…é¡»åŒ… dependencies ï¼Œ<br>å…¶ä»–æ²¡æœ‰è¢«importçš„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ devDependencies</p><h3 id="ä»¥create-umiä¸ºç¤ºä¾‹"><a href="#ä»¥create-umiä¸ºç¤ºä¾‹" class="headerlink" title="ä»¥create-umiä¸ºç¤ºä¾‹"></a>ä»¥create-umiä¸ºç¤ºä¾‹</h3><p>create-umiæ˜¯npmåŒ…å¼€å‘çš„ä¸€ä¸ªå…¸èŒƒï¼Œå¯ä»¥å‚ç…§å…¶æºç è¿›è¡Œå¼€å‘ã€‚</p><h3 id="Yeomanå†™bin"><a href="#Yeomanå†™bin" class="headerlink" title="Yeomanå†™bin"></a>Yeomanå†™bin</h3><p>umiçš„binï¼Œå¸‚é¢ä¸Šå¾ˆå¤šbinçš„ç¼–å†™éƒ½ä½¿ç”¨äº†<code>Yeoman</code>ã€‚<br>å‚è€ƒã€Špackage.json  -  binã€‹</p><h2 id="åˆ›å»ºä¸€ä¸ªnpmå·¥ç¨‹"><a href="#åˆ›å»ºä¸€ä¸ªnpmå·¥ç¨‹" class="headerlink" title="åˆ›å»ºä¸€ä¸ªnpmå·¥ç¨‹"></a>åˆ›å»ºä¸€ä¸ªnpmå·¥ç¨‹</h2><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><figure class="image-box">                <img src="/image/npm/menu.png" alt title class>                <p></p>            </figure><h2 id="vikingshipæ‰“åŒ…ã€è°ƒè¯•ã€ä½¿ç”¨"><a href="#vikingshipæ‰“åŒ…ã€è°ƒè¯•ã€ä½¿ç”¨" class="headerlink" title="vikingshipæ‰“åŒ…ã€è°ƒè¯•ã€ä½¿ç”¨"></a>vikingshipæ‰“åŒ…ã€è°ƒè¯•ã€ä½¿ç”¨</h2><h3 id="vikingship-å¼€å‘ç¼–è¯‘"><a href="#vikingship-å¼€å‘ç¼–è¯‘" class="headerlink" title="vikingship å¼€å‘ç¼–è¯‘"></a>vikingship å¼€å‘ç¼–è¯‘</h3><p>vikingship ç”¨çš„æ˜¯ creat-react-appï¼Œå¼€å‘ç¼–è¯‘é˜¶æ®µä½¿ç”¨ creat-react-app è‡ªå¸¦çš„ç¼–è¯‘æ–¹å¼ï¼Œå³webpackã€‚<br>è¿™ä¸€ç‚¹ä¸ vikingship çš„ç”Ÿäº§ç¼–è¯‘ä¸åŒï¼Œç”Ÿäº§ç¼–è¯‘ä½¿ç”¨ tsc ç¼–è¯‘ã€‚</p><h3 id="vikingship-ç”Ÿäº§ç¼–è¯‘"><a href="#vikingship-ç”Ÿäº§ç¼–è¯‘" class="headerlink" title="vikingship ç”Ÿäº§ç¼–è¯‘"></a>vikingship ç”Ÿäº§ç¼–è¯‘</h3><h4 id="è¿‡ç¨‹åˆ†æ"><a href="#è¿‡ç¨‹åˆ†æ" class="headerlink" title="è¿‡ç¨‹åˆ†æ"></a>è¿‡ç¨‹åˆ†æ</h4><p>vikingship ç”¨çš„æ˜¯ creat-react-appï¼Œ ç”Ÿäº§ç¼–è¯‘ä¸ä¾èµ–webpack,åŸºäºtscè‡ªå¸¦çš„ç¼–è¯‘åˆ›å»º <code>tsconfig.build.json</code>è¿›è¡Œç¼–è¯‘ã€‚<br>ç›¸å…³è¯´æ˜åœ¨ å¦å¤–ä¸€ç¯‡åšå®¢ã€Šå†è¯» typescript ç¬”è®°ã€‹</p><p>é€šè¿‡ ts ç¼–è¯‘ ç¼–è¯‘å‡º jsæ–‡ä»¶ï¼›</p><p>cssæ–‡ä»¶éœ€è¦ä½¿ç”¨ node-sass ç¼–è¯‘<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node-sass ./src/styles/index.scss ./dist/index.css</span><br></pre></td></tr></table></figure></p><h4 id="package-json-é…ç½®"><a href="#package-json-é…ç½®" class="headerlink" title="package.json é…ç½®"></a>package.json é…ç½®</h4><p>ä»¥ä¸‹è¿™ä¸‰è¡Œä¸€å®šè¦åŠ ä¸Šï¼Œä¸ç„¶ç”Ÿäº§ç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶ï¼Œå¤–ç•Œimportçš„æ—¶å€™ï¼Œæ— æ³•è¯»å–<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"dist/index.js"</span>, </span><br><span class="line">  <span class="attr">"module"</span>: <span class="string">"dist/index.js"</span>, <span class="comment">//ç”¨äºtree shaking ä¼˜åŒ–</span></span><br><span class="line">  <span class="attr">"types"</span>: <span class="string">"dist/index.d.ts"</span>,</span><br><span class="line">  <span class="comment">//files å®šä¹‰éå¸¸å…³é”®</span></span><br><span class="line">  <span class="comment">//filesä»£è¡¨é‚£äº›æ–‡ä»¶è¦ä¸Šä¼ åˆ°npmæœåŠ¡å™¨ä¸Šï¼Œå¦‚æœä½ ä»€ä¹ˆéƒ½ä¸å†™ï¼Œnpmä¼šå‚ç…§ .gitignore çš„å†…å®¹è¿›è¡Œä¸Šä¼ </span></span><br><span class="line">  <span class="comment">//ä¸€äº›ç‰¹å®šæ–‡ä»¶ï¼Œæ— è®ºæ˜¯å¦åœ¨fileså†…å£°æ˜ï¼Œéƒ½ä¼šè¢«ä¸Šä¼ åˆ°npmæœåŠ¡å™¨ä¸­ï¼Œå¦‚ package.json ,README.md ç­‰ç­‰</span></span><br><span class="line">  <span class="attr">"files"</span>: [ </span><br><span class="line">    <span class="string">"dist"</span> </span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å…³é”®çš„files"><a href="#å…³é”®çš„files" class="headerlink" title="å…³é”®çš„files"></a>å…³é”®çš„files</h4><p>å‚è€ƒä¸Šé¢æºç ä¸­çš„è§£è¯´ã€‚</p><h3 id="ä½¿ç”¨æ­¤åº“"><a href="#ä½¿ç”¨æ­¤åº“" class="headerlink" title="ä½¿ç”¨æ­¤åº“"></a>ä½¿ç”¨æ­¤åº“</h3><p>å…¶ä»–åº”ç”¨ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œ éœ€è¦å…¨å±€å¼•ç”¨ cssï¼Œ ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ <code>./src/styles/index.scss</code>, ç„¶åå†import ä¸Šä¸€æ­¥æ‰“åŒ…å‡ºæ¥çš„ jsæ–‡ä»¶å³å¯.</p><p>è¿™ç§ä½¿ç”¨æ–¹å¼ä¸ ant-design ã€ fusion æ˜¯ä¸€æ ·çš„ï¼š<br>å…ˆå…¨å±€å¼•ç”¨ cssæ–‡ä»¶ï¼Œ<br>ç„¶åimport åº“ï¼›</p><h3 id="å¼€å‘è°ƒè¯•"><a href="#å¼€å‘è°ƒè¯•" class="headerlink" title="å¼€å‘è°ƒè¯•"></a>å¼€å‘è°ƒè¯•</h3><h4 id="ä½¿ç”¨sortybook-æˆ–-dumi-è¿›è¡Œå¼€å‘"><a href="#ä½¿ç”¨sortybook-æˆ–-dumi-è¿›è¡Œå¼€å‘" class="headerlink" title="ä½¿ç”¨sortybook æˆ– dumi è¿›è¡Œå¼€å‘"></a>ä½¿ç”¨sortybook æˆ– dumi è¿›è¡Œå¼€å‘</h4><p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œstorybook æˆ– dumi å®æ—¶å¯åŠ¨äº† demoï¼Œä»¥ä¾¿è°ƒè¯•</p><h4 id="npm-link-1"><a href="#npm-link-1" class="headerlink" title="npm link"></a>npm link</h4><p>é¡¹ç›®å¼•å…¥æ­¤åº“æ—¶ï¼š<br>å…ˆåœ¨æ­¤åº“ä¸­æ‰§è¡Œ npm run build  ç”Ÿæˆjsæ–‡ä»¶<br>ç„¶åæ‰§è¡Œ <code>node-sass ./src/styles/index.scss ./dist/index.css</code> ç”Ÿæˆcssæ–‡ä»¶</p><p>å› ä¸º npm link å¼•ç”¨çš„ä¸‹é¢æŒ‡å®šçš„æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;main&quot;: &quot;dist/index.js&quot;,</span><br></pre></td></tr></table></figure></p><h3 id="reactç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜"><a href="#reactç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜" class="headerlink" title="reactç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜"></a>reactç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜</h3><h4 id="npm-link-2"><a href="#npm-link-2" class="headerlink" title="npm link"></a>npm link</h4><p>è°ƒè¯•æ—¶ï¼Œnpm link vikingship ï¼Œä½†å‘ç°vikingshipä½¿ç”¨çš„react ä¸ é¡¹ç›®ä½¿ç”¨çš„reactç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œ<br>ä¼šå¯¼è‡´æŠ¥é”™hooké—®é¢˜ï¼Œæˆ–é¡¹ç›®å´©æºƒï¼Œ<br>è¿™ä¸€ç‚¹ï¼Œåœ¨reactå®˜ç½‘æœ‰æåŠã€‚<br>æœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼š</p><ul><li>ä¸´æ—¶æ–¹å¼ï¼Œ åœ¨vikingshipåº“å¼€å‘ç›®å½•ä¸‹ï¼Œ npm link æŸé¡¹ç›®ä¸‹çš„reactï¼š<figure class="image-box">                <img src="/image/npm/link.png" alt title class>                <p></p>            </figure></li><li>ç»ˆææ–¹å¼(æ¨è)ï¼šä½¿ç”¨ peerDependencies</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"peerDependencies"</span>: &#123;</span><br><span class="line">  <span class="string">"react"</span>: <span class="string">"&gt;=16.8.0"</span>,</span><br><span class="line">  <span class="string">"react-dom"</span>: <span class="string">"&gt;=16.8.0"</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">"devDependencies"</span>: &#123;</span><br><span class="line">  <span class="string">"react"</span>: <span class="string">"^16.12.0"</span>,</span><br><span class="line">  <span class="string">"react-dom"</span>: <span class="string">"^16.12.0"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³é—®é¢˜"><a href="#ç›¸å…³é—®é¢˜" class="headerlink" title="ç›¸å…³é—®é¢˜"></a>ç›¸å…³é—®é¢˜</h3><h4 id="ä¸ºä»€ä¹ˆæ‰“åŒ…èƒ½å•ç‹¬æ‰“åŒ…css"><a href="#ä¸ºä»€ä¹ˆæ‰“åŒ…èƒ½å•ç‹¬æ‰“åŒ…css" class="headerlink" title="ä¸ºä»€ä¹ˆæ‰“åŒ…èƒ½å•ç‹¬æ‰“åŒ…css"></a>ä¸ºä»€ä¹ˆæ‰“åŒ…èƒ½å•ç‹¬æ‰“åŒ…css</h4><p>å› ä¸ºæ­¤åº“çš„scssæ–‡ä»¶æœ‰ä¸€ä¸ªæ€»å…¥å£ï¼š<br><code>src\styles\index.scss:</code><br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// config</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"variables"</span>;</span><br><span class="line">//layout</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"reboot"</span>;</span><br><span class="line"></span><br><span class="line">//mixin</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"mixin"</span>;</span><br><span class="line">// animation</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"animation"</span>;</span><br><span class="line">// button</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Button/style"</span>;</span><br><span class="line">// menu</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Menu/style"</span>;</span><br><span class="line">// icon</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Icon/style"</span>;</span><br><span class="line">//input</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Input/style"</span>;</span><br><span class="line">//auto-complete</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/AutoComplete/style"</span>;</span><br><span class="line">//upload</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Upload/style"</span>;</span><br><span class="line">//progress</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"../components/Progress/style"</span>;</span><br></pre></td></tr></table></figure></p><h4 id="ä¸ºä»€ä¹ˆæ‰“åŒ…è¦åˆ†æˆ-css-å’Œ-js-ä¸¤ä¸ªæ­¥éª¤"><a href="#ä¸ºä»€ä¹ˆæ‰“åŒ…è¦åˆ†æˆ-css-å’Œ-js-ä¸¤ä¸ªæ­¥éª¤" class="headerlink" title="ä¸ºä»€ä¹ˆæ‰“åŒ…è¦åˆ†æˆ css å’Œ js ä¸¤ä¸ªæ­¥éª¤"></a>ä¸ºä»€ä¹ˆæ‰“åŒ…è¦åˆ†æˆ css å’Œ js ä¸¤ä¸ªæ­¥éª¤</h4><p>tscåªèƒ½æ‰“åŒ…tsã€jsæ–‡ä»¶ï¼Œæ— æ³•æ‰“åŒ…css</p><h4 id="èƒ½å¦ä½¿ç”¨webpack-ç”Ÿäº§æ‰“åŒ…"><a href="#èƒ½å¦ä½¿ç”¨webpack-ç”Ÿäº§æ‰“åŒ…" class="headerlink" title="èƒ½å¦ä½¿ç”¨webpack ç”Ÿäº§æ‰“åŒ…"></a>èƒ½å¦ä½¿ç”¨webpack ç”Ÿäº§æ‰“åŒ…</h4><p>å¯ä»¥ï¼Œå› ä¸ºæ‰“åŒ…æœ€ç»ˆä¸€èˆ¬åªç”Ÿäº§ä¸€ä¸ª css å’Œ ä¸€ä¸ª js æ–‡ä»¶ã€‚<br>åªè¦webpack èƒ½æ‰“åŒ…æˆä¸€ä¸ª css æˆ– js å³å¯ã€‚</p><h3 id="å»¶ç”³"><a href="#å»¶ç”³" class="headerlink" title="å»¶ç”³"></a>å»¶ç”³</h3><h4 id="å¥‡å¦™çš„-npm-script-ä¸­çš„-pre-å…³é”®å­—"><a href="#å¥‡å¦™çš„-npm-script-ä¸­çš„-pre-å…³é”®å­—" class="headerlink" title="å¥‡å¦™çš„ npm script ä¸­çš„ pre å…³é”®å­—"></a>å¥‡å¦™çš„ npm script ä¸­çš„ pre å…³é”®å­—</h4><p>è¿™é‡Œçš„ prepublishOnly ä¸ prepublish æ˜¯ä¸€æ ·çš„ï¼Œ<br>åœ¨å‘½ä»¤è¡Œä¸­ï¼Œå¦‚æœæ‰§è¡Œ npm run publish,<br>npm script å°±ä¼šå¯»æ‰¾ æ˜¯å¦å®šä¹‰äº† pre + publish = prepublish å‘½ä»¤ï¼Œå¦‚æœæœ‰å®šä¹‰ï¼Œå…ˆæ‰§è¡Œï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">   &quot;prepublishOnly&quot;: &quot;npm run test:nowatch &amp;&amp; npm run lint &amp;&amp; npm run build&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="prepublishOnly-ä¸-prepublish-åŒºåˆ«"><a href="#prepublishOnly-ä¸-prepublish-åŒºåˆ«" class="headerlink" title="prepublishOnly ä¸ prepublish åŒºåˆ«"></a>prepublishOnly ä¸ prepublish åŒºåˆ«</h4><p>prepublish ä¼šåœ¨npm install å’Œ npm run publish æ—¶éƒ½ä¼šè¿è¡Œï¼Œæœ‰ä¸€å®šçš„bugï¼›<br>prepublishOnly åªä¼šåœ¨ npm run publish æ—¶æ‰è¿è¡Œï¼›</p><h4 id="devDependencies-ä¸-dependencies"><a href="#devDependencies-ä¸-dependencies" class="headerlink" title="devDependencies ä¸ dependencies"></a>devDependencies ä¸ dependencies</h4><p>å½“åº“è¢«ç¬¬ä¸‰æ–¹ä½¿ç”¨çš„æ—¶å€™ï¼Œå®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œdependencies å†…çš„åŒ…éƒ½å°†è¢«ä¸‹è½½åˆ°ä¾èµ–ï¼Œ devDependencies ä¸ä¼šè¢«ä¸‹è½½è¿‡å»ï¼Œå› æ­¤ å®šä¹‰å¥½ äºŒè€… å¯¹äºä½¿ç”¨æ­¤åº“çš„äººéå¸¸å‹å¥½ã€‚<br>ä¸‹é¢ä¾èµ–åº”è¯¥éƒ½æ”¾åˆ° devDependencies ä¸­ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">"devDependencies": &#123;</span><br><span class="line">    "@types/classnames": "^2.2.9",</span><br><span class="line">    "@types/react": "^16.9.13",</span><br><span class="line">    "@types/react-dom": "16.9.4",</span><br><span class="line">    "node-sass": "^4.14.1",</span><br><span class="line">    "react-scripts": "3.2.0",</span><br><span class="line">    "typescript": "3.7.2"</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h4 id="peerDependencies-ä¸-devDependencies"><a href="#peerDependencies-ä¸-devDependencies" class="headerlink" title="peerDependencies ä¸ devDependencies"></a>peerDependencies ä¸ devDependencies</h4><p>peerDependencies æ˜¯npmçš„é…ç½®ï¼Œ<br>peerDependencies å‘Šè¯‰npmï¼Œè¢«å®šä¹‰åœ¨è¿™é‡Œçš„åŒ…ï¼Œå°†ä¸ä¼šè¢«ä¸‹è½½ï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰çš„ node_module ä¸‹è½½å¥½çš„ï¼Œå¦‚æœ node_module ä¸­ç‰ˆæœ¬ä½äºé…ç½®çš„ï¼Œå°±ç»™ä¸warningæé†’ï¼š<br><figure class="image-box">                <img src="/image/npm/warn.png" alt title class>                <p></p>            </figure></p><p>peerDependencies é€šå¸¸ç”¨äº å‘å¸ƒä»¥åï¼Œè¢«é¡¹ç›®ä½¿ç”¨çš„æ—¶å€™ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨çš„reactç‰ˆæœ¬ ä¸ åº“ä¸­ä½¿ç”¨çš„ reactç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜ã€‚</p><p>è§£å†³å®Œå‘å¸ƒåçš„é—®é¢˜ï¼Œ é‚£ä¹ˆåº“åœ¨æœ¬åœ°å¼€å‘é˜¶æ®µä¹Ÿè¦ ä½¿ç”¨ reactï¼Œ æ­¤æ—¶å¯ä»¥å°† react æ”¾åˆ° devDependencies ä¸­ï¼Œ<br>å› ä¸ºnpm çš„ç­–ç•¥ï¼Œ ç¬¬ä¸‰æ–¹åº“è¢«å¼•ç”¨æ—¶ï¼Œå®‰è£…ä¾èµ–çš„æ—¶å€™ï¼Œåªä¸‹è½½ dependencies ä¾èµ–ï¼Œä¸ä¸‹è½½ devDependencies ä¾èµ–ï¼Œ è¿™æ ·å°±ä¸ä¼šæœ‰å†²çªäº†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&quot;peerDependencies&quot;: &#123;</span><br><span class="line">  &quot;react&quot;: &quot;&gt;=16.8.0&quot;,</span><br><span class="line">  &quot;react-dom&quot;: &quot;&gt;=16.8.0&quot;</span><br><span class="line">&#125;,</span><br><span class="line"> &quot;devDependencies&quot;: &#123;</span><br><span class="line">  &quot;react&quot;: &quot;^17.0.2&quot;,</span><br><span class="line">  &quot;react-dom&quot;: &quot;^17.0.2&quot;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘å¸ƒå’Œcommitå‰æ£€æŸ¥é…ç½®"><a href="#å‘å¸ƒå’Œcommitå‰æ£€æŸ¥é…ç½®" class="headerlink" title="å‘å¸ƒå’Œcommitå‰æ£€æŸ¥é…ç½®"></a>å‘å¸ƒå’Œcommitå‰æ£€æŸ¥é…ç½®</h3><h4 id="è¿‡ç¨‹å¦‚ä¸‹"><a href="#è¿‡ç¨‹å¦‚ä¸‹" class="headerlink" title="è¿‡ç¨‹å¦‚ä¸‹"></a>è¿‡ç¨‹å¦‚ä¸‹</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  <span class="comment">//extæ‰©å±•å eslintæ£€æŸ¥js,ts,tsx åç¼€çš„æ–‡ä»¶ï¼Œ æ£€æŸ¥èŒƒå›´æ—¶ src ç›®å½•ä¸‹ï¼Œ</span></span><br><span class="line">  <span class="comment">// å½“ warningæ•°é‡ å¤§äº5æ—¶ï¼Œç»ˆæ­¢æ£€æŸ¥å’Œç¨‹åºç»§ç»­æ‰§è¡Œï¼Œ</span></span><br><span class="line">   "lint": "eslint --ext js,ts,tsx src --max-warnings 5",</span><br><span class="line">   "test": "react-scripts test", //æ‰§è¡Œå•å…ƒæµ‹è¯•</span><br><span class="line">   <span class="comment">//CI æ˜¯ create-react-app çš„å…³é”®å­—ç¯å¢ƒå˜é‡ï¼Œå®šä¹‰ä¸ºtrueçš„æ—¶å€™ï¼Œå…è®¸npm run publishæ—¶ æ‰§è¡Œå•å…ƒæµ‹è¯•</span></span><br><span class="line">   "test:nowatch": "cross-env CI=true react-scripts test", </span><br><span class="line">   "build": "npm run clean &amp;&amp; npm run build-ts &amp;&amp; npm run build-css",</span><br><span class="line">   "build-ts": "tsc -p tsconfig.build.json",</span><br><span class="line">   "build-css": "node-sass ./src/styles/index.scss ./dist/index.css",</span><br><span class="line">   "prepublishOnly": "npm run test:nowatch &amp;&amp; npm run lint &amp;&amp; npm run build"</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="comment">//husky ç”¨äº commitå‰æ£€æŸ¥ï¼Œgit commitå‰ï¼Œæ‰§è¡Œå•å…ƒæµ‹è¯• å’Œ eslint</span></span><br><span class="line"> "husky": &#123;</span><br><span class="line">   "hooks": &#123;</span><br><span class="line">     "pre-commit": "npm run test:nowatch &amp;&amp; npm run lint"</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h4 id="husky-ç”¨äº-commitå‰æ£€æŸ¥"><a href="#husky-ç”¨äº-commitå‰æ£€æŸ¥" class="headerlink" title="husky ç”¨äº commitå‰æ£€æŸ¥"></a>husky ç”¨äº commitå‰æ£€æŸ¥</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h3 id="travis-å®ç°æŒç»­é›†æˆ"><a href="#travis-å®ç°æŒç»­é›†æˆ" class="headerlink" title="travis å®ç°æŒç»­é›†æˆ"></a>travis å®ç°æŒç»­é›†æˆ</h3><h4 id="CI-ä¸-CD"><a href="#CI-ä¸-CD" class="headerlink" title="CI ä¸ CD"></a>CI ä¸ CD</h4><ul><li>CI æŒç»­é›†æˆ<br>é¢‘ç¹çš„å°†ä»£ç é›†æˆåˆ°ä¸»å¹² master<br>å¿«é€Ÿå‘ç°é”™è¯¯<br>é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²</li></ul><p>ä»¥ä¾¿ é¡¹ç›®çš„å¿«é€Ÿè¿­ä»£</p><ul><li>CD æŒç»­äº¤ä»˜ æŒç»­éƒ¨ç½²<br>é¢‘ç¹çš„å°†è½¯ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜ç»™è´¨é‡å›¢é˜Ÿæˆ–è€…ç”¨æˆ·ï¼›<br>ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼›</li></ul><p>æŒç»­é›†æˆçš„æ„ä¹‰ï¼š<br>ç»„ä»¶åº“ å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ æ¶‰åŠè¿‡ç¨‹ï¼š git push ã€ å•å…ƒæµ‹è¯•ã€ npm publishã€ build æ–‡æ¡£é™æ€æ–‡ä»¶ã€ä¸Šä¼ æœåŠ¡å™¨-ç”Ÿæˆæ–°çš„æ–‡æ¡£ç«™ç‚¹ã€‚<br>å¦‚æœæ²¡æœ‰æŒç»­é›†æˆï¼Œä½ è¦å…ˆç­‰ publish build å®Œæˆ æ‰èƒ½è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œ ä¸‹ä¸€æ­¥å®Œæˆ æ‰èƒ½è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œæµªè´¹æ—¶é—´ã€‚<br>è¿™å°±æ˜¯ CI å­˜åœ¨çš„æ„ä¹‰ã€‚</p><h4 id="https-docs-travis-ci-com-user-tutorial"><a href="#https-docs-travis-ci-com-user-tutorial" class="headerlink" title="https://docs.travis-ci.com/user/tutorial"></a><a href="https://docs.travis-ci.com/user/tutorial" target="_blank" rel="noopener">https://docs.travis-ci.com/user/tutorial</a></h4><p>æ³¨æ„2018å¹´åï¼Œtravisæ›´æ–°ä¸º <code>travis-ci.com</code> <a href="https://docs.travis-ci.com/user/tutorial" target="_blank" rel="noopener">ç½‘ç«™</a>ã€‚</p><h4 id="github-page-çš„-travis-yml-ç¤ºä¾‹"><a href="#github-page-çš„-travis-yml-ç¤ºä¾‹" class="headerlink" title="github page çš„ travis.yml ç¤ºä¾‹"></a>github page çš„ travis.yml ç¤ºä¾‹</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .travis.yml</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span>  <span class="comment">#ä½¿ç”¨node js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"stable"</span>  <span class="comment">#ä½¿ç”¨node ç¨³å®šç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span>   <span class="comment">#ç¼“å­˜</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">CI=true</span>   <span class="comment">#è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºæœ¬é¡¹ç›®ç”¨åˆ°äº†å•å…ƒæµ‹è¯•ï¼Œè¦å¼€å¯ä¸ºtrue</span></span><br><span class="line"><span class="attr">script:</span>    <span class="comment">#å¦‚æœä¸è®¾ç½®scriptï¼Œ travisé»˜è®¤æ‰§è¡Œ npm run test</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build-storybook</span></span><br><span class="line"><span class="attr">deploy:</span> <span class="comment">#è¿™æ˜¯å‘å¸ƒåˆ°github page ä¸Šçš„å›ºå®šé…ç½®</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">pages</span> <span class="comment">#è¿™æ˜¯å‘å¸ƒåˆ°github page ä¸Šçš„å›ºå®šé…ç½®</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">github_token:</span> <span class="string">$github_token</span> <span class="comment">#æ­¤åå­—è¦ä¸ travisä¸­è‡ªå·±è®¾ç½®çš„github_tokenåå­—ä¸€æ ·</span></span><br><span class="line">  <span class="attr">local_dir:</span> <span class="string">storybook-static</span>  <span class="comment">#å‘Šè¯‰travisè¦ä¸Šä¼ å“ªä¸ªæ–‡ä»¶å¤¹,æ­¤æ–‡ä»¶ä¸€èˆ¬æ˜¯buildåçš„æ–‡æ¡£ç«™ç‚¹æºç ï¼Œæ¯”å¦‚ hexoçš„ public</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">blog_code</span>  <span class="comment">#ç›‘å¬å“ªä¸ªåˆ†æ”¯ï¼Œåˆ†æ”¯æœ‰æäº¤æ—¶ï¼Œè§¦å‘shè„šæœ¬ï¼Œ å¾…è€ƒè¯ï¼Œæœ‰äº›å†™æˆ master åˆ†æ”¯äº†</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„deploy local_dir å¯¹åº”çš„æ˜¯ ä¸‹é¢npm script ç”Ÿæˆçš„æ–‡ä»¶ï¼š<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">    "build-storybook": "build-storybook -s public",</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="è®¾ç½®github-token"><a href="#è®¾ç½®github-token" class="headerlink" title="è®¾ç½®github_token"></a>è®¾ç½®github_token</h4><figure class="image-box">                <img src="/image/npm/token0.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/npm/token1.png" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/npm/token2.png" alt title class>                <p></p>            </figure><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span> </span><br><span class="line">  <span class="attr">github_token:</span> <span class="string">$github_token</span> <span class="string">æ­¤åå­—è¦ä¸</span> <span class="string">travisä¸­è‡ªå·±è®¾ç½®çš„github_tokenåå­—ä¸€æ ·</span></span><br></pre></td></tr></table></figure><h4 id="yarn-lock-ä¸-package-lock-json"><a href="#yarn-lock-ä¸-package-lock-json" class="headerlink" title="yarn.lock ä¸ package-lock.json"></a>yarn.lock ä¸ package-lock.json</h4><p>å½“è¿™ä¸¤ä¸ªæ–‡ä»¶åŒæ—¶å­˜åœ¨æ—¶ï¼Œtravis.yml ä¼šä½¿ç”¨yarn.lock,<br>å¦‚æœåªæœ‰ package-lock.json ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ travisæ‰ä¼šä½¿ç”¨æ­¤æ–‡ä»¶å®‰è£…ä¾èµ–ã€‚</p><h4 id="ç–‘ç‚¹"><a href="#ç–‘ç‚¹" class="headerlink" title="ç–‘ç‚¹"></a>ç–‘ç‚¹</h4><p>travis ç»“åˆ GitHub pages è²Œä¼¼æœ‰ä¸€å¥—å®ƒä»¬æ²Ÿé€šå¥½çš„é’©å­å‡½æ•°ï¼Œ ä»¥ä¸Šæ•´ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬éƒ½æ²¡æœ‰çœ‹åˆ° GitHub page è¦æ±‚çš„ä¸¤ä¸ªè¦æ±‚ï¼š</p><ul><li>å¿…é¡»æ˜¯github ä¸‹å”¯ä¸€çš„ ä¸ªäººåå­—å‘½ä»¤çš„ ä»“åº“ï¼›</li><li>é™æ€æ–‡æ¡£æ–‡ä»¶å¿…é¡»åœ¨ masteråˆ†æ”¯ï¼›</li></ul><h3 id="åº“æºç ä¸ä½¿ç”¨åº“æºç "><a href="#åº“æºç ä¸ä½¿ç”¨åº“æºç " class="headerlink" title="åº“æºç ä¸ä½¿ç”¨åº“æºç "></a>åº“æºç ä¸ä½¿ç”¨åº“æºç </h3><p><a href="https://github.com/YeWills/react-ts-ant-npm.git" target="_blank" rel="noopener">åº“æºç </a><br><a href="https://github.com/YeWills/react-ts-npm-test.git" target="_blank" rel="noopener">ä½¿ç”¨åº“çš„æµ‹è¯•é¡¹ç›®æºç </a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactä¸­çš„è¡¨å•å¤„ç†</title>
      <link href="/2020/05/01/react_form/"/>
      <url>/2020/05/01/react_form/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸å°è£…formå¯ä»¥å—"><a href="#ä¸å°è£…formå¯ä»¥å—" class="headerlink" title="ä¸å°è£…formå¯ä»¥å—"></a>ä¸å°è£…formå¯ä»¥å—</h2><p>å¾ˆå¤šäººç¬¬ä¸€å°è±¡è§‰å¾—æœ‰UIæ¡†æ¶å¦‚ant-designï¼Œæˆ–è€…bootstrapï¼Œå°±ä¸éœ€è¦äºŒæ¬¡å°è£…formäº†ï¼Œå…¶å®ä¸ç„¶ã€‚<br>å¦‚æœä¸å°è£…formï¼Œä½ åªæœ‰ä¸€ä¸ªUIåº“ç»™ä½ ï¼Œä½ å¼•å…¥input select ç­‰ç»„ä»¶åï¼Œ<br>éœ€è¦è‡ªå·±åšä»¥ä¸‹äº‹æƒ…ï¼š</p><ul><li>æ¯ä¸ªfiledå†™value onChange</li><li>è¦å†™validate</li><li>è¦å†™æ ·å¼</li><li>è¦å†™ submit é€»è¾‘ï¼Œå¦‚æœæ˜¯popï¼Œè¿˜è¦å†™hide closeï¼›</li></ul><p>ä¸Šé¢è¿™äº›ï¼Œå°±ç®—ä½ å’¬ç€ç‰™å†™å®Œäº†ä¸€ä¸ªè¡¨å•ï¼Œä¸‹ä¸€ä¸ªè¡¨å•ä½ ä¸€åˆ‡è¿˜å¾—é‡æ–°æ¥ï¼Œå› æ­¤ä¸ºé¡¹ç›®äºŒæ¬¡å°è£…æŠ½è±¡è¿™äº›å…¬å…±é€»è¾‘åŠ¿åœ¨å¿…è¡Œã€‚<br>è¯´å¾—ç›´ç™½ç‚¹ï¼Œä½ è¿˜è¦æŠ½è±¡formçš„ä¸€äº›å…¬å…±é€»è¾‘ï¼Œå°è£…å¾—è¶Šå¥½ï¼Œé¡¹ç›®å¼€å‘èµ·æ¥å°±è¶Šçˆ½ï¼Œè¶Šå¿«ã€‚<br>è¦æƒ³æŠ½è±¡formçš„å…¬å…±é€»è¾‘ï¼Œé‚£ä¹ˆä½ å¿…é¡»è¦æ·±åˆ»è®¤è¯†formã€‚</p><h2 id="è®¤è¯†formå¾ˆé‡è¦"><a href="#è®¤è¯†formå¾ˆé‡è¦" class="headerlink" title="è®¤è¯†formå¾ˆé‡è¦"></a>è®¤è¯†formå¾ˆé‡è¦</h2><h3 id="æ¯ä¸ªfiledéƒ½æœ‰value-onchange"><a href="#æ¯ä¸ªfiledéƒ½æœ‰value-onchange" class="headerlink" title="æ¯ä¸ªfiledéƒ½æœ‰value onchange"></a>æ¯ä¸ªfiledéƒ½æœ‰value onchange</h3><p>åœ¨formä¸­ï¼Œinputï¼Œselectï¼Œcheckboxï¼Œç­‰ç­‰ï¼Œéƒ½åŒ…å«äº† value onchange ç†Ÿæ‚‰ï¼›<br>å› æ­¤ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªfiledæŠ½è±¡å‡ºvalueã€onchangeé€»è¾‘ï¼›</p><h3 id="validate"><a href="#validate" class="headerlink" title="validate"></a>validate</h3><p>ä¸€èˆ¬è¡¨å•éªŒè¯éƒ½æ˜¯å³æ—¶éªŒè¯ï¼Œä¹Ÿå°±æ˜¯è¾“å…¥æ¡†å®æ—¶è¾“å…¥æ—¶å°±è¦éªŒè¯ï¼›<br>æœ‰äº›è¿˜è¦åŠ ä¸€ä¸ªæäº¤æ—¶å†éªŒè¯ï¼Œåšä¸€ä¸ªåŒä¿é™©ã€‚</p><h3 id="validateçš„errorä¿¡æ¯æ˜¾ç¤º"><a href="#validateçš„errorä¿¡æ¯æ˜¾ç¤º" class="headerlink" title="validateçš„errorä¿¡æ¯æ˜¾ç¤º"></a>validateçš„errorä¿¡æ¯æ˜¾ç¤º</h3><p>è¿™ä¸ªè·ŸvalidateåŸºæœ¬å±äºåŒä¸€ä¸ªé—®é¢˜ã€‚</p><h3 id="å®æ—¶formå€¼"><a href="#å®æ—¶formå€¼" class="headerlink" title="å®æ—¶formå€¼"></a>å®æ—¶formå€¼</h3><p>è¦æœ‰ä¸€ä¸ªå…¬å…±çš„formå€¼ï¼Œå®æ—¶ååº”å„ä¸ªfieldçš„å€¼ã€‚</p><h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><p>å¤§å¤šforméƒ½æœ‰ä¸€ä¸ªresetåŠŸèƒ½</p><h2 id="è®¾è®¡æ¨¡å¼å¾ˆé‡è¦"><a href="#è®¾è®¡æ¨¡å¼å¾ˆé‡è¦" class="headerlink" title="è®¾è®¡æ¨¡å¼å¾ˆé‡è¦"></a>è®¾è®¡æ¨¡å¼å¾ˆé‡è¦</h2><p>æ¯æ¬¡fieldæ”¹å˜åï¼Œå¦‚ä½•è®©formå“åº”å˜åŠ¨æ¸²æŸ“æœ€æ–°çš„å€¼å‘¢ã€‚<br>ä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼ï¼šå°†formå®šä¹‰ä¸ºå®Œå…¨å—æ§ç»„ä»¶ï¼›è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€ï¼›</p><h3 id="å°†formå®šä¹‰ä¸ºå®Œå…¨å—æ§ç»„ä»¶"><a href="#å°†formå®šä¹‰ä¸ºå®Œå…¨å—æ§ç»„ä»¶" class="headerlink" title="å°†formå®šä¹‰ä¸ºå®Œå…¨å—æ§ç»„ä»¶"></a>å°†formå®šä¹‰ä¸ºå®Œå…¨å—æ§ç»„ä»¶</h3><p>è¿™ç§è®¾è®¡æ¨¡å¼æ˜¯æœ€ç›´è§‚çš„ï¼Œç»™formå®šä¹‰ä¸€ä¸ªvalueå’Œonchangeï¼Œformå†…ä»»ä½•ä¸€ä¸ªfiledæ”¹å˜æ—¶éƒ½è§¦å‘è¿™ä¸ªonchangeï¼Œè¿™ä¸ªonchangeæ”¹å˜æ•´ä¸ªformå€¼ã€‚<br>è¿™ç§æ¨¡å¼æœ‰ä¸ªç‰¹ç‚¹ï¼Œå®ƒçš„valueå€¼æ˜¯æ•´ä¸ªformå€¼ï¼Œå› æ­¤æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚</p><h3 id="è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€-æ¨è"><a href="#è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€-æ¨è" class="headerlink" title="è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€(æ¨è)"></a>è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€(æ¨è)</h3><h4 id="å¦‚ä½•åœ¨çˆ¶å±‚è·å–formçš„state"><a href="#å¦‚ä½•åœ¨çˆ¶å±‚è·å–formçš„state" class="headerlink" title="å¦‚ä½•åœ¨çˆ¶å±‚è·å–formçš„state"></a>å¦‚ä½•åœ¨çˆ¶å±‚è·å–formçš„state</h4><p>è¿™ç§è®¾è®¡æ¨¡å¼è¦æ±‚formç»´æŠ¤è‡ªå·±çš„çŠ¶æ€ï¼Œé¦–å…ˆæˆ‘ä»¬æƒ³åˆ°çš„æ˜¯ï¼Œè®¾ç½®ä¸€ä¸ªstateï¼Œè¿™ä¸ªstateåŒ…å«äº†å„ä¸ªfiledçš„å€¼ã€‚ä½†è¿™æ ·ä½†èŠ±å°±æœ‰ä¸ªé—®é¢˜åœ¨äºåœ¨formçš„çˆ¶å±‚æ— æ³•å®æ—¶è·å–formå€¼ã€‚</p><h4 id="æ”¹å˜stateçš„åŒæ—¶ï¼Œä¿®æ”¹å­˜å‚¨store"><a href="#æ”¹å˜stateçš„åŒæ—¶ï¼Œä¿®æ”¹å­˜å‚¨store" class="headerlink" title="æ”¹å˜stateçš„åŒæ—¶ï¼Œä¿®æ”¹å­˜å‚¨store"></a>æ”¹å˜stateçš„åŒæ—¶ï¼Œä¿®æ”¹å­˜å‚¨store</h4><p>è§£å†³ä¹‹é“åœ¨äºå®šä¹‰ä¸€ä¸ªå…¬å…±çš„storeï¼Œæ¯æ¬¡filedæ”¹å˜stateå€¼çš„æ—¶å€™ï¼ŒåŒæ—¶æ”¹å˜storeã€‚<br>formæ¸²æŸ“ä½¿ç”¨stateï¼Œå¤–å±‚æäº¤ä½¿ç”¨storeï¼Œè€Œè¿™ä¸ªstoreç”±çˆ¶å±‚æ„é€ è€Œæ¥ï¼Œé‚£ä¹ˆå†…éƒ¨æ¸²æŸ“å’Œå¤–éƒ¨æ•°æ®ä½¿ç”¨éƒ½å…¼é¡¾äº†ã€‚</p><h2 id="æ–¹æ¡ˆçš„å®æ–½"><a href="#æ–¹æ¡ˆçš„å®æ–½" class="headerlink" title="æ–¹æ¡ˆçš„å®æ–½"></a>æ–¹æ¡ˆçš„å®æ–½</h2><h3 id="é€‰å®šæ–¹æ¡ˆâ€“è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€"><a href="#é€‰å®šæ–¹æ¡ˆâ€“è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€" class="headerlink" title="é€‰å®šæ–¹æ¡ˆâ€“è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€"></a>é€‰å®šæ–¹æ¡ˆâ€“è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€</h3><p>æˆ‘ä»¬ä¸€èˆ¬é€‰ç”¨ä¸Šé¢çš„ã€Šè®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€(æ¨è)ã€‹è¿™ç§æ¨¡å¼ã€‚<strong>ä¸‹é¢çš„è®²è§£éƒ½ä»¥æ­¤æ¨¡å¼å±•å¼€</strong>ï¼Œ<br><strong>æœ¬å®æ–½æ–¹æ¡ˆï¼Œå‚è€ƒåšå®¢<a href="https://zhuanlan.zhihu.com/p/57820186" target="_blank" rel="noopener"> React å®ç°é«˜åº¦ç®€æ´çš„ Form ç»„ä»¶ </a></strong>ï¼Œä»¥ä¸‹å¦‚æœ‰ç–‘é—®ï¼Œå¯æŸ¥é˜…æ­¤åšå®¢</p><h3 id="è®¾è®¡filed"><a href="#è®¾è®¡filed" class="headerlink" title="è®¾è®¡filed"></a>è®¾è®¡filed</h3><p>filedéƒ½ç”±ä¸€ä¸ªvalue å’Œ onchangeï¼Œè¿˜æœ‰ä¸€ä¸ªerrortipï¼Œè€Œvalueå’Œerrortipéƒ½æ˜¯ç”±onchangeè§¦å‘ç”Ÿæˆã€‚<br>æ­¤æ—¶æˆ‘ä»¬ç»™filedä¼ é€’ä¸€ä¸ªé¢„è®¾çš„storeï¼Œåœ¨storeä¸­æœ‰ä¸€ä¸ªfiled onchange æ–¹æ³•ï¼Œæˆ‘ä»¬å«åšstore.setï¼Œæ­¤æ–¹æ³•æ¯æ¬¡éƒ½æ”¹å˜valueå’Œerrortipå€¼ï¼ŒåŒæ—¶å°†è¿™äº›å€¼å­˜å‚¨åˆ°storeä¸­ã€‚</p><h3 id="å³æ—¶éªŒè¯"><a href="#å³æ—¶éªŒè¯" class="headerlink" title="å³æ—¶éªŒè¯"></a>å³æ—¶éªŒè¯</h3><p>è§ã€Šè®¾è®¡filedã€‹</p><h3 id="ç”Ÿæˆerror-tip"><a href="#ç”Ÿæˆerror-tip" class="headerlink" title="ç”Ÿæˆerror tip"></a>ç”Ÿæˆerror tip</h3><p>è§ã€Šè®¾è®¡filedã€‹</p><h3 id="é¢„è®¾store"><a href="#é¢„è®¾store" class="headerlink" title="é¢„è®¾store"></a>é¢„è®¾store</h3><p>ä¸Šé¢è¯´åˆ°äº†é¢„è®¾çš„storeï¼Œåœ¨è¿™ä¸ªstoreä¸­æˆ‘ä»¬çš„ä¸»è¦ä»»åŠ¡æ˜¯ï¼Œå®æ—¶æ”¹å˜storeçš„valueå’Œerrorå€¼ï¼Œå¹¶æš´éœ²å‡ºç›¸å…³APIç»™ä¸Šé¢çš„ã€Šè®¾è®¡filedã€‹ä½¿ç”¨ã€‚ç”±æ­¤å¯è§ï¼Œæˆ‘ä»¬å°†validate å®æ—¶å­˜å‚¨çš„é€»è¾‘æŠ½è±¡åˆ°äº†storeä¸­ã€‚</p><h3 id="å¦‚ä½•ä¼ é€’store"><a href="#å¦‚ä½•ä¼ é€’store" class="headerlink" title="å¦‚ä½•ä¼ é€’store"></a>å¦‚ä½•ä¼ é€’store</h3><p>ä¸Šé¢çœ‹åˆ°äº†filedç”¨åˆ°äº†storeï¼Œå¦‚ä½•å°†storeä¼ ç»™filedå‘¢ï¼Œæˆ‘ä»¬çš„åšæ³•æ˜¯ï¼Œåœ¨çˆ¶å±‚new ä¸€ä¸ªstoreï¼Œè®©è¿™ä¸ªstoreä½œä¸ºpropsä¼ é€’ç»™formï¼Œformæ‹¿åˆ°è¿™ä¸ªstoreè®¾ç½®ä¸ºcontexï¼Œformä¸‹é¢çš„æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨æ­¤context</p><h3 id="å¤©èŠ±æ¿å¼çš„ç¬¬ä¸‰æ–¹åŒ…ä¸åŠŸèƒ½"><a href="#å¤©èŠ±æ¿å¼çš„ç¬¬ä¸‰æ–¹åŒ…ä¸åŠŸèƒ½" class="headerlink" title="å¤©èŠ±æ¿å¼çš„ç¬¬ä¸‰æ–¹åŒ…ä¸åŠŸèƒ½"></a>å¤©èŠ±æ¿å¼çš„ç¬¬ä¸‰æ–¹åŒ…ä¸åŠŸèƒ½</h3><p>æˆ‘ä»¬å…ˆåˆ†æä¸‹(è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€)çš„æ¨¡å¼ï¼š</p><ul><li>ä¸ºäº†è®©çˆ¶å±‚æ‹¿åˆ°å®æ—¶çš„formå€¼ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨çˆ¶å±‚ç»™æ„é€ ä¸€ä¸ªstoreå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨formå€¼ï¼›â€“å¤©èŠ±æ¿</li><li>storeä¸fromè¿›è¡Œäº’åŠ¨ï¼Œä»¥ä¾¿å­˜å‚¨å€¼(æŠŠstoreå¯¹è±¡ä¼ é€’ç»™formï¼Œformåœ¨ä¸storeæ²Ÿé€šæ—¶ï¼Œå°†å€¼é¡ºåˆ©å­˜å‚¨åˆ°store)ï¼›â€“ç¬¬ä¸‰æ–¹åŒ…ä¸ç¨‹åº<br>ä¸Šé¢çš„ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬è¦åœ¨çˆ¶å±‚å®šä¹‰storeï¼Œçˆ¶å±‚å°±æ˜¯å¤©èŠ±æ¿ï¼Œè¿™ä¸ªstoreå°±ç±»ä¼¼ä¸€ä¸ªd3.jsç¬¬ä¸‰æ–¹åŒ…ï¼Œformå€¼çš„è·å–å°±å¥½æ¯”ç”¨d3æ¡†æ¶ç”»å‡ºçš„å„å¼å„æ ·çš„ç»˜å›¾ï¼Œformå¿…é¡»éµå®ˆd3çš„APIæ‰èƒ½æ­£ç¡®ç”»å›¾ï¼Œè¿™ç”»å‡ºæ¥çš„å›¾å°±æ˜¯åšå‡ºæ¥çš„åŠŸèƒ½ã€‚<br>(è®©formå­˜å‚¨è‡ªå·±çš„çŠ¶æ€)çš„æ¨¡å¼ä»–çš„è®¾è®¡æ€æƒ³ è·Ÿ å¤©èŠ±æ¿å¼çš„ç¬¬ä¸‰æ–¹åŒ…ä¸åŠŸèƒ½åŠå…¶ç›¸ä¼¼ã€‚<br>ä½ å¼€å‘ä¸€ä¸ªformæ¡†æ¶ï¼Œç„¶ååœ¨filedä¸­ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ã€‚<h3 id="ä¸ºä»€ä¹ˆä¸æŠŠ-storeä¸filedç›´æ¥ç»“åˆä¸€èµ·"><a href="#ä¸ºä»€ä¹ˆä¸æŠŠ-storeä¸filedç›´æ¥ç»“åˆä¸€èµ·" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æŠŠ storeä¸filedç›´æ¥ç»“åˆä¸€èµ·"></a>ä¸ºä»€ä¹ˆä¸æŠŠ storeä¸filedç›´æ¥ç»“åˆä¸€èµ·</h3>ä¸ºä»€ä¹ˆä¸æŠŠ storeä¸filedç›´æ¥ç»“åˆä¸€èµ·ï¼Œæˆ–è€…storeé›†æˆåˆ°filedä¸Šï¼Œä¸ç”¨åœ¨çˆ¶å±‚ä¼ é€’storeã€‚<br>åŸå› å°±æ˜¯åˆšæ‰è¯´åˆ°çš„ï¼šä¸ºäº†è®©çˆ¶å±‚æ‹¿åˆ°å®æ—¶çš„formå€¼ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨çˆ¶å±‚ç»™æ„é€ ä¸€ä¸ªstoreå¯¹è±¡ï¼Œç”¨äºå­˜å‚¨formå€¼ã€‚<h3 id="å„ä¸ªå…ƒç´ å¦‚ä½•æ’ç‰ˆå¸ƒå±€"><a href="#å„ä¸ªå…ƒç´ å¦‚ä½•æ’ç‰ˆå¸ƒå±€" class="headerlink" title="å„ä¸ªå…ƒç´ å¦‚ä½•æ’ç‰ˆå¸ƒå±€"></a>å„ä¸ªå…ƒç´ å¦‚ä½•æ’ç‰ˆå¸ƒå±€</h3>æ¯ä¸ªfiledçš„htmlå¦‚ä¸‹ï¼Œå› ä¸ºhtmlæ˜¯å›ºå®šçš„ï¼Œå› æ­¤å¯ä»¥ç»Ÿä¸€åˆ¶å®šå¥½æ ·å¼ï¼š<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">label</span> <span class="attr">className</span>=<span class="string">"form__label"</span>&gt;</span>&#123;label&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form__content"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form__control"</span>&gt;</span>&#123;child&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"form__message"</span>&gt;</span>&#123;error&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ³¨å…¥éªŒè¯è§„åˆ™"><a href="#æ³¨å…¥éªŒè¯è§„åˆ™" class="headerlink" title="æ³¨å…¥éªŒè¯è§„åˆ™"></a>æ³¨å…¥éªŒè¯è§„åˆ™</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> FormStore(&#123;<span class="comment">/* åˆå§‹å€¼ */</span>, &#123;</span><br><span class="line">  username: <span class="function">(<span class="params">val</span>) =&gt;</span> !!val.trim() || <span class="string">'ç”¨æˆ·åä¸èƒ½ä¸ºç©º'</span>,</span><br><span class="line">  password: <span class="function">(<span class="params">val</span>) =&gt;</span> !!(val.length &gt; <span class="number">6</span> &amp;&amp; val.length &lt; <span class="number">18</span>) || <span class="string">'å¯†ç é•¿åº¦å¿…é¡»å¤§äº6ä¸ªå­—ç¬¦ï¼Œå°äº18ä¸ªå­—ç¬¦'</span>,</span><br><span class="line">  passwordAgain: <span class="function">(<span class="params">val, vals</span>) =&gt;</span> val === vals.password || <span class="string">'ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´'</span></span><br><span class="line">&#125;&#125;)</span><br></pre></td></tr></table></figure><h3 id="æœªè¯´ç»†èŠ‚"><a href="#æœªè¯´ç»†èŠ‚" class="headerlink" title="æœªè¯´ç»†èŠ‚"></a>æœªè¯´ç»†èŠ‚</h3><p>å°†filedçš„onchangeé€»è¾‘ä½¿ç”¨ä¸€ä¸ªæ›¿èº«listenä»£æ›¿ï¼Œé‡‡ç”¨ï¼ˆå–æ¶ˆï¼‰è®¢é˜…æ–¹å¼ï¼Œæ‰§è¡Œæ­¤onchangeç­‰ä¸€ç³»åˆ—åŠ¨ä½œã€‚è¯¦è§åšå®¢<a href="https://zhuanlan.zhihu.com/p/57820186" target="_blank" rel="noopener">React å®ç°é«˜åº¦ç®€æ´çš„ Form ç»„ä»¶ </a>ã€‚</p><h3 id="å°ç»“ä¸ä»£ç "><a href="#å°ç»“ä¸ä»£ç " class="headerlink" title="å°ç»“ä¸ä»£ç "></a>å°ç»“ä¸ä»£ç </h3><p>å°è£…è¿™ä¸ªè¡¨å•ï¼š</p><ul><li>è¦å°è£…ä¸€ä¸ªstoreï¼Œè¿™ä¸€éƒ¨åˆ†æ˜¯çº¯jsé€»è¾‘å¤„ç†ï¼›</li><li>è¦å°è£…ä¸€ä¸ªå…¬å…±çš„filedï¼Œä»¥ä¾¿æŠ½å–filedå…¬å…±çš„é€»è¾‘åˆ°filedï¼Œè¿™ä¸€éƒ¨åˆ†é‡‡ç”¨ç»„åˆæ¨¡å¼è®¾è®¡ï¼›</li><li>è¦å°è£…ä¸€ä¸ªformï¼Œè¿™ä¸ªformè¦é…åˆfiledå’Œçˆ¶å±‚çš„å¼•ç”¨ï¼›<br>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FormStore</span> </span>&#123;</span><br><span class="line">  <span class="comment">// constructor ...</span></span><br><span class="line">  <span class="comment">// subscribe ...</span></span><br><span class="line">  <span class="comment">// notify ...</span></span><br><span class="line">  <span class="comment">// è·å–è¡¨å•å€¼</span></span><br><span class="line">  <span class="keyword">get</span>(name) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœä¼ å…¥nameï¼Œè¿”å›å¯¹åº”çš„è¡¨å•å€¼ï¼Œå¦åˆ™è¿”å›æ•´ä¸ªè¡¨å•çš„å€¼</span></span><br><span class="line">    <span class="keyword">return</span> name === <span class="literal">undefined</span> ? <span class="keyword">this</span>.values : <span class="keyword">this</span>.values[name];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è®¾ç½®è¡¨å•å€¼</span></span><br><span class="line">  <span class="keyword">set</span>(name, value) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæŒ‡å®šäº†name</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="comment">// è®¾ç½®nameå¯¹åº”çš„å€¼</span></span><br><span class="line">      <span class="keyword">this</span>.values[name] = value;</span><br><span class="line">      <span class="comment">// æ‰§è¡Œè¡¨å•æ ¡éªŒï¼Œè§ä¸‹</span></span><br><span class="line">      <span class="keyword">this</span>.validate(name);</span><br><span class="line">      <span class="comment">// é€šçŸ¥è¡¨å•å˜åŠ¨</span></span><br><span class="line">      <span class="keyword">this</span>.notify(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰¹é‡è®¾ç½®è¡¨å•å€¼</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (name) &#123;</span><br><span class="line">      <span class="keyword">const</span> values = name;</span><br><span class="line">      <span class="built_in">Object</span>.keys(values).forEach(<span class="function"><span class="params">key</span> =&gt;</span> <span class="keyword">this</span>.set(key, values[key]));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é‡ç½®è¡¨å•å€¼</span></span><br><span class="line">  reset() &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">this</span>.errors = &#123;&#125;;</span><br><span class="line">    <span class="comment">// é‡ç½®é»˜è®¤å€¼</span></span><br><span class="line">    <span class="keyword">this</span>.values = deepCopy(<span class="keyword">this</span>.defaultValues);</span><br><span class="line">    <span class="comment">// æ‰§è¡Œé€šçŸ¥</span></span><br><span class="line">    <span class="keyword">this</span>.notify(<span class="string">"*"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//filed</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getValueFromEvent</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> e &amp;&amp; e.target</span><br><span class="line">    ? e.target.type === <span class="string">"checkbox"</span></span><br><span class="line">      ? e.target.checked</span><br><span class="line">      : e.target.value</span><br><span class="line">    : e;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Field</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; label, name, children &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‹¿åˆ°Formä¼ ä¸‹æ¥çš„FormStoreå®ä¾‹</span></span><br><span class="line">  <span class="keyword">const</span> store = React.useContext(FormStoreContext);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œç”¨äºè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“</span></span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = React.useState(</span><br><span class="line">    name &amp;&amp; store ? store.get(name) : <span class="literal">undefined</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">const</span> [error, setError] = React.useState(</span><br><span class="line">    name &amp;&amp; store ? store.error(name) : <span class="literal">undefined</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨å•ç»„ä»¶onChangeäº‹ä»¶ï¼Œç”¨äºä»äº‹ä»¶ä¸­å–å¾—è¡¨å•å€¼</span></span><br><span class="line">  <span class="keyword">const</span> onChange = React.useCallback(</span><br><span class="line">    (...args) =&gt; name &amp;&amp; store &amp;&amp; store.set(name, valueGetter(...args)),</span><br><span class="line">    [name, store]</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¢é˜…è¡¨å•æ•°æ®å˜åŠ¨</span></span><br><span class="line">  React.useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!name || !store) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> store.subscribe(<span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// å½“å‰nameçš„æ•°æ®å‘ç”Ÿäº†å˜åŠ¨ï¼Œè·å–æ•°æ®å¹¶é‡æ–°æ¸²æŸ“</span></span><br><span class="line">      <span class="keyword">if</span> (n === name || n === <span class="string">"*"</span>) &#123;</span><br><span class="line">        setValue(store.get(name));</span><br><span class="line">        setError(store.error(name));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, [name, store]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> child = children;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¦‚æœchildrenæ˜¯ä¸€ä¸ªåˆæ³•çš„ç»„ä»¶ï¼Œä¼ å…¥valueå’ŒonChange</span></span><br><span class="line">  <span class="keyword">if</span> (name &amp;&amp; store &amp;&amp; React.isValidElement(child)) &#123;</span><br><span class="line">    <span class="keyword">const</span> childProps = &#123; value, onChange &#125;;</span><br><span class="line">    child = React.cloneElement(child, childProps);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¡¨å•ç»“æ„ï¼Œå…·ä½“çš„æ ·å¼å°±ä¸è´´å‡ºæ¥äº†</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"form"</span>&gt;</span><br><span class="line">      &lt;label className=<span class="string">"form__label"</span>&gt;&#123;label&#125;&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="form__content"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div className="form__control"&gt;&#123;child&#125;&lt;/</span>div&gt;</span><br><span class="line">        &lt;div className=<span class="string">"form__message"</span>&gt;&#123;error&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//form</span></span><br><span class="line"><span class="keyword">const</span> FormStoreContext = React.createContext(<span class="literal">undefined</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Form</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; store, children, onSubmit &#125; = props;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FormStoreContext.Provider value=&#123;store&#125;&gt;</span><br><span class="line">      &lt;form onSubmit=&#123;onSubmit&#125;&gt;&#123;children&#125;&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>FormStoreContext.Provider&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.store = <span class="keyword">new</span> FormStore();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onSubmit = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">this</span>.store.get();</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Form store=&#123;<span class="keyword">this</span>.store&#125; onSubmit=&#123;<span class="keyword">this</span>.onSubmit&#125;&gt;</span><br><span class="line">        &lt;Field name=<span class="string">"username"</span>&gt;</span><br><span class="line">          &lt;input /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Field&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Field name="password"&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input type="password" /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/Field&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;Submit&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/Form&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="ä¼˜åŒ–ä¸ä¸è¶³"><a href="#ä¼˜åŒ–ä¸ä¸è¶³" class="headerlink" title="ä¼˜åŒ–ä¸ä¸è¶³"></a>ä¼˜åŒ–ä¸ä¸è¶³</h3><p>æœ¬æ–¹æ¡ˆå®æ–½ä¸»è¦æ˜¯é’ˆå¯¹ <a href="https://zhuanlan.zhihu.com/p/57820186" target="_blank" rel="noopener">React å®ç°é«˜åº¦ç®€æ´çš„ Form ç»„ä»¶ </a> åšå®¢çš„è§£è¯»ã€‚<br>æˆ‘è§‰å¾—è¿™é‡Œæœ‰å‡ å—å¯ä»¥ä¼˜åŒ–çš„ï¼Œ</p><h4 id="åŠ¨æ€ç”Ÿæˆè¡¨å•"><a href="#åŠ¨æ€ç”Ÿæˆè¡¨å•" class="headerlink" title="åŠ¨æ€ç”Ÿæˆè¡¨å•"></a>åŠ¨æ€ç”Ÿæˆè¡¨å•</h4><p>ä¸Šé¢åšå®¢ä¸­ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Field name=<span class="string">"password"</span> label=<span class="string">"å¯†ç "</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"password"</span> /&gt;</span><br><span class="line">&lt;<span class="regexp">/Field&gt;</span></span><br></pre></td></tr></table></figure></p><p>åœ¨filedä¸­è½¬åŒ–ä¸ºï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (</span><br><span class="line">  &lt;div className=<span class="string">"form"</span>&gt;</span><br><span class="line">    &lt;label className=<span class="string">"form__label"</span>&gt;&#123;label&#125;&lt;<span class="regexp">/label&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div className="form__content"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="form__control"&gt;&#123;child&#125;&lt;/</span>div&gt;</span><br><span class="line">      &lt;div className=<span class="string">"form__message"</span>&gt;&#123;error&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">);</span></span><br></pre></td></tr></table></figure></p><p>å› æ­¤filedåªéœ€è¦çŸ¥é“ name type labelè¿™ä¸‰ä¸ªä¿¡æ¯ï¼Œå› æ­¤å®Œå…¨å¯ä»¥ä»¥jsonçš„æ–¹å¼ä¼ é€’ç»™formï¼ŒåŠ¨æ€ç”Ÿæˆè¡¨å•ã€‚</p><h4 id="è”åŠ¨ã€è‡ªå®šä¹‰-è®¾è®¡ä¸è¶³"><a href="#è”åŠ¨ã€è‡ªå®šä¹‰-è®¾è®¡ä¸è¶³" class="headerlink" title="è”åŠ¨ã€è‡ªå®šä¹‰ è®¾è®¡ä¸è¶³"></a>è”åŠ¨ã€è‡ªå®šä¹‰ è®¾è®¡ä¸è¶³</h4><p>é€šç¯‡åšå®¢è¯»ä¸‹æ¥ï¼Œæ²¡çœ‹åˆ°å¯¹è”åŠ¨åšçš„é€»è¾‘å°è£…ã€‚</p><h2 id="åŠ¨æ€è¡¨å•"><a href="#åŠ¨æ€è¡¨å•" class="headerlink" title="åŠ¨æ€è¡¨å•"></a>åŠ¨æ€è¡¨å•</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>æ— è®ºæ˜¯ä¼ ç»Ÿçš„htmlæ–¹å¼ä½¿ç”¨formï¼Œè¿˜æ˜¯é…ç½®åŒ–çš„ç”Ÿæˆè¡¨å•æ–¹å¼ï¼Œéƒ½æ˜¯åŸºäºä»¥ä¸Šè®¾è®¡æ¨¡å¼ä¸Šçš„æ‰©å±•ã€‚åŠ¨æ€è¡¨å•çš„ä¼˜ç‚¹åœ¨äºï¼Œå¿«æ·ç”Ÿæˆè¡¨å•ï¼Œå°±å¥½åƒä½¿ç”¨jsoné€šè¿‡æ¨¡ç‰ˆå¼•æ“æ‰¹é‡ç”Ÿæˆè¡¨å•ä¸€æ ·ï¼Œéå¸¸çˆ½ã€‚<br>ä½†æ˜¯åŠ¨æ€è¡¨å•åœ¨è®¾è®¡ä¸Šéƒ½æœ‰ä¸€ä¸ªç—›ç‚¹åœ¨äº å¦‚ä½•è”åŠ¨ä¸è‡ªå®šä¹‰éœ€æ±‚ã€‚</p><p>å‚è€ƒ å¦å¤–ä¸¤ç¯‡åšå®¢ ã€ŠEnFormåŠ¨æ€è¡¨å•çš„ä½¿ç”¨ã€‹ ã€ŠEnFormåŠ¨æ€è¡¨å•å°è£…ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> form </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React ç¬”è®°</title>
      <link href="/2020/05/01/react/"/>
      <url>/2020/05/01/react/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="warning-uncontrolled-to-be-controlled"><a href="#warning-uncontrolled-to-be-controlled" class="headerlink" title="warning:uncontrolled .. to be controlled"></a>warning:uncontrolled .. to be controlled</h3><p>ä¸»è¦è¿˜æ˜¯ç»™inputçš„valueåœ¨ æœ‰å€¼ä¸æ²¡æœ‰å€¼-undefined ä¹‹é—´åˆ‡æ¢äº†ï¼Œè§£å†³ä¹‹é“åœ¨äºå§‹ç»ˆä¿æŒ valueä¸ºå€¼ï¼š value || â€˜â€™ ï¼›ç”¨â€˜â€™ ä»£æ›¿ undefinedã€‚<br><a href="https://stackoverflow.com/questions/47012169/a-component-is-changing-an-uncontrolled-input-of-type-text-to-be-controlled-erro" target="_blank" rel="noopener">è§£å†³æ–¹æ¡ˆå‚è€ƒ</a></p><h3 id="ä¹‹ç±»çš„-React-å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰"><a href="#ä¹‹ç±»çš„-React-å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰" class="headerlink" title=" ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰"></a><chat> ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰</chat></h3><p><a href="https://react.docschina.org/docs/composition-vs-inheritance.html" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a><br><code>&lt;Contacts /&gt; å’Œ &lt;Chat /&gt;</code>ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SplitPane</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=<span class="string">"SplitPane"</span>&gt;</span><br><span class="line">      &lt;div className=<span class="string">"SplitPane-left"</span>&gt;</span><br><span class="line">        &#123;props.left&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;div className="SplitPane-right"&gt;</span></span><br><span class="line"><span class="regexp">        &#123;props.right&#125;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function App() &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;SplitPane</span></span><br><span class="line"><span class="regexp">      left=&#123;</span></span><br><span class="line"><span class="regexp">        &lt;Contacts /</span>&gt;</span><br><span class="line">      &#125;</span><br><span class="line">      right=&#123;</span><br><span class="line">        &lt;Chat /&gt;</span><br><span class="line">      &#125; /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä»€ä¹ˆæ˜¯-React-å…ƒç´ "><a href="#ä»€ä¹ˆæ˜¯-React-å…ƒç´ " class="headerlink" title="ä»€ä¹ˆæ˜¯ React å…ƒç´ "></a>ä»€ä¹ˆæ˜¯ React å…ƒç´ </h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å¦‚ä¸Šã€Š<code>&lt;Chat /&gt;</code>ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰ã€‹<code>&lt;Chat\&gt;</code>è¿™äº›å°±æ˜¯Reactå…ƒç´ ã€‚<br>æ³¨æ„ Chat æ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ˜¯Reactå…ƒç´ ï¼Œ å¸¦ä¸Šå°ä¹¦æ‹¬å·çš„<code>&lt;Chat\&gt;</code>æ‰æ˜¯Reactå…ƒç´ ã€‚</p><h4 id="Reactå…ƒç´ å°±æ˜¯object"><a href="#Reactå…ƒç´ å°±æ˜¯object" class="headerlink" title="Reactå…ƒç´ å°±æ˜¯object"></a>Reactå…ƒç´ å°±æ˜¯object</h4><p>å¦‚ä¸Šã€Š<code>&lt;Chat /&gt;</code>ä¹‹ç±»çš„ React å…ƒç´ æœ¬è´¨å°±æ˜¯å¯¹è±¡ï¼ˆobjectï¼‰ã€‹</p><h3 id="Context-Providerçš„æ›´æ–°ä¸consumerç»„ä»¶æ¸²æŸ“é—®é¢˜"><a href="#Context-Providerçš„æ›´æ–°ä¸consumerç»„ä»¶æ¸²æŸ“é—®é¢˜" class="headerlink" title="Context.Providerçš„æ›´æ–°ä¸consumerç»„ä»¶æ¸²æŸ“é—®é¢˜"></a>Context.Providerçš„æ›´æ–°ä¸consumerç»„ä»¶æ¸²æŸ“é—®é¢˜</h3><p><a href="https://react.docschina.org/docs/context.html#contextprovider" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘Context.Provider</a>ã€‚<br>å½“ Provider çš„ value å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚Provider åŠå…¶å†…éƒ¨ consumer ç»„ä»¶éƒ½ä¸å—åˆ¶äº shouldComponentUpdate å‡½æ•°ï¼Œå› æ­¤å½“ consumer ç»„ä»¶åœ¨å…¶ç¥–å…ˆç»„ä»¶é€€å‡ºæ›´æ–°çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ›´æ–°ã€‚</p><h3 id="Context-Consumer"><a href="#Context-Consumer" class="headerlink" title="Context.Consumer"></a>Context.Consumer</h3><p>Context.Consumeræ˜¯ä¸€ç§<strong>child function æ¨¡å¼</strong>ï¼Œå®ƒç±»ä¼¼ä¸€ä¸ªcontexté—­åŒ…ï¼Œå®ƒä¼šç»™å®ƒçš„child function æ³¨å…¥æ‰€æœ‰çš„context stateï¼›<br>å¹¶ä¸”ä¼šåœ¨åº•å±‚ æ‰§è¡Œ child functionã€‚<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;MyContext.Consumer&gt;</span><br><span class="line">  &#123;value =&gt; <span class="comment">/* åŸºäº context å€¼è¿›è¡Œæ¸²æŸ“*/</span>&#125;</span><br><span class="line">&lt;<span class="regexp">/MyContext.Consumer&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;ThemeContext.Consumer&gt;</span><br><span class="line">      &#123;(&#123;theme, toggleTheme&#125;) =&gt; (</span><br><span class="line">        &lt;button          onClick=&#123;toggleTheme&#125;</span><br><span class="line">          style=&#123;&#123;<span class="attr">backgroundColor</span>: theme.background&#125;&#125;&gt;</span><br><span class="line"></span><br><span class="line">          Toggle Theme</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      )&#125;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>ThemeContext.Consumer&gt;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äºï¼š</span></span><br><span class="line">&lt;button          onClick=&#123;toggleTheme&#125;</span><br><span class="line">          style=&#123;&#123;<span class="attr">backgroundColor</span>: theme.background&#125;&#125;&gt;</span><br><span class="line"></span><br><span class="line">          Toggle Theme</span><br><span class="line">        &lt;<span class="regexp">/button&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><h4 id="refæ˜¯å®ä¾‹è¿˜æ˜¯domå…ƒç´ ï¼Ÿ"><a href="#refæ˜¯å®ä¾‹è¿˜æ˜¯domå…ƒç´ ï¼Ÿ" class="headerlink" title="refæ˜¯å®ä¾‹è¿˜æ˜¯domå…ƒç´ ï¼Ÿ"></a>refæ˜¯å®ä¾‹è¿˜æ˜¯domå…ƒç´ ï¼Ÿ</h4><p>å½“ ref å±æ€§ç”¨äº HTML å…ƒç´ æ—¶ï¼Œæ„é€ å‡½æ•°ä¸­ä½¿ç”¨ React.createRef() åˆ›å»ºçš„ ref æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ current å±æ€§ã€‚<br>å½“ ref å±æ€§ç”¨äºè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œref å¯¹è±¡æ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®ä¾‹ä½œä¸ºå…¶ current å±æ€§ã€‚<br><strong>ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ã€‚</strong></p><h4 id="ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨-ref"><a href="#ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨-ref" class="headerlink" title="ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref"></a>ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref</h4><p>å‚è€ƒã€Šrefæ˜¯ä»€ä¹ˆã€‹</p><h4 id="refè½¬å‘æŠ€æœ¯ä¸React-forwardRef"><a href="#refè½¬å‘æŠ€æœ¯ä¸React-forwardRef" class="headerlink" title="refè½¬å‘æŠ€æœ¯ä¸React.forwardRef"></a>refè½¬å‘æŠ€æœ¯ä¸React.forwardRef</h4><p>refè½¬å‘å¯ç”¨äºè·å–å­ç»„ä»¶å†…éƒ¨çš„refï¼Œæˆ–è€…å¤„ç†hoc refæ— æ³•è·å–çš„é—®é¢˜ã€‚<br>React.forwardRefç†è§£ä¸Context.Consumerç±»ä¼¼ï¼Œ<br>é€šè¿‡React.forwardRef,å¯ä»¥è®©å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå‡½æ•°æœ‰èƒ½åŠ›è·å¾—propså’Œrefï¼›å½“è·å¾—refæ—¶ï¼Œä½ å°±å¯ä»¥å¯¹refçš„è¿›ä¸€æ­¥çš„è½¬å‘åº”ç”¨äº†ã€‚</p><p>è¯¦ç»†å‚è€ƒå®˜ç½‘<a href="https://react.docschina.org/docs/forwarding-refs.html#forwarding-refs-in-higher-order-components" target="_blank" rel="noopener">åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs</a>ï¼Œè¿™é‡Œæœ‰refè½¬å‘éå¸¸æ£’çš„åº”ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">React.forwardRef(<span class="function">(<span class="params">props, ref</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">LogProps</span> &#123;<span class="attr">...props</span>&#125; <span class="attr">forwardedRef</span>=<span class="string">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="React-forwardRef"><a href="#React-forwardRef" class="headerlink" title="React.forwardRef"></a>React.forwardRef</h4><p>ä¸€èˆ¬ç”¨äºä»¥ä¸‹ä¸¤ä¸ªä½œç”¨ï¼š</p><ul><li>è½¬å‘ refs åˆ° DOM ç»„ä»¶</li><li>åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs</li></ul><h4 id="ä¸¤ç§è·å–å­ç»„ä»¶å†…éƒ¨å…ƒç´ çš„ref"><a href="#ä¸¤ç§è·å–å­ç»„ä»¶å†…éƒ¨å…ƒç´ çš„ref" class="headerlink" title="ä¸¤ç§è·å–å­ç»„ä»¶å†…éƒ¨å…ƒç´ çš„ref"></a>ä¸¤ç§è·å–å­ç»„ä»¶å†…éƒ¨å…ƒç´ çš„ref</h4><p>æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼Œå‚è€ƒã€Šrefè½¬å‘æŠ€æœ¯ä¸React.forwardRefã€‹</li><li>æ–¹å¼äºŒï¼Œå‡½æ•°å›è°ƒæ–¹å¼ï¼š<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;CustomTextInput</span><br><span class="line">        inputRef=&#123;el =&gt; <span class="keyword">this</span>.inputElement = el&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">CustomTextInput</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;input ref=&#123;props.inputRef&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="å¤„ç†hoc-refæ— æ³•è·å–çš„é—®é¢˜"><a href="#å¤„ç†hoc-refæ— æ³•è·å–çš„é—®é¢˜" class="headerlink" title="å¤„ç†hoc refæ— æ³•è·å–çš„é—®é¢˜"></a>å¤„ç†hoc refæ— æ³•è·å–çš„é—®é¢˜</h4><p>å‚è€ƒã€Šrefè½¬å‘æŠ€æœ¯ä¸React.forwardRefã€‹</p><h3 id="Portal-ä¸ä¸€æ ·çš„äº‹ä»¶å†’æ³¡"><a href="#Portal-ä¸ä¸€æ ·çš„äº‹ä»¶å†’æ³¡" class="headerlink" title="Portal ä¸ä¸€æ ·çš„äº‹ä»¶å†’æ³¡"></a>Portal ä¸ä¸€æ ·çš„äº‹ä»¶å†’æ³¡</h3><p>å°½ç®¡ portal å¯ä»¥è¢«æ”¾ç½®åœ¨ DOM æ ‘ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œä½†åœ¨ä»»ä½•å…¶ä»–æ–¹é¢ï¼Œå…¶è¡Œä¸ºå’Œæ™®é€šçš„ React å­èŠ‚ç‚¹è¡Œä¸ºä¸€è‡´ã€‚ç”±äº portal ä»å­˜åœ¨äº React æ ‘ï¼Œ ä¸”ä¸ DOM æ ‘ ä¸­çš„ä½ç½®æ— å…³ï¼Œé‚£ä¹ˆæ— è®ºå…¶å­èŠ‚ç‚¹æ˜¯å¦æ˜¯ portalï¼Œåƒ context è¿™æ ·çš„åŠŸèƒ½ç‰¹æ€§éƒ½æ˜¯ä¸å˜çš„ã€‚<br><a href="https://react.docschina.org/docs/portals.html#event-bubbling-through-portals" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="React-memo"><a href="#React-memo" class="headerlink" title="React.memo"></a>React.memo</h3><h4 id="åªç”¨äºfunctionç»„ä»¶"><a href="#åªç”¨äºfunctionç»„ä»¶" class="headerlink" title="åªç”¨äºfunctionç»„ä»¶"></a>åªç”¨äºfunctionç»„ä»¶</h4><p>React.memoåªé€‚ç”¨äºå‡½æ•°ç»„ä»¶ï¼Œè€Œä¸é€‚ç”¨ class ç»„ä»¶</p><h4 id="ä»…æ£€æŸ¥-props-å˜æ›´"><a href="#ä»…æ£€æŸ¥-props-å˜æ›´" class="headerlink" title="ä»…æ£€æŸ¥ props å˜æ›´"></a>ä»…æ£€æŸ¥ props å˜æ›´</h4><p>React.memo ä»…æ£€æŸ¥ props å˜æ›´</p><h3 id="æœåŠ¡ç«¯æ¸²æŸ“SSRçš„ä¸¤ä¸ªå¥½å¤„-ç›¸æ¯”å®¢æˆ·ç«¯CSR"><a href="#æœåŠ¡ç«¯æ¸²æŸ“SSRçš„ä¸¤ä¸ªå¥½å¤„-ç›¸æ¯”å®¢æˆ·ç«¯CSR" class="headerlink" title="æœåŠ¡ç«¯æ¸²æŸ“SSRçš„ä¸¤ä¸ªå¥½å¤„(ç›¸æ¯”å®¢æˆ·ç«¯CSR)"></a>æœåŠ¡ç«¯æ¸²æŸ“SSRçš„ä¸¤ä¸ªå¥½å¤„(ç›¸æ¯”å®¢æˆ·ç«¯CSR)</h3><p>åˆ©äºseoä¸é¦–å±æ¸²æŸ“ã€‚</p><h3 id="Fiberä¸Stack"><a href="#Fiberä¸Stack" class="headerlink" title="Fiberä¸Stack"></a>Fiberä¸Stack</h3><p><a href="https://www.imooc.com/video/21308" target="_blank" rel="noopener">å‚è€ƒ</a></p><h4 id="åŠ¨ç”»1ç§’60å¸§"><a href="#åŠ¨ç”»1ç§’60å¸§" class="headerlink" title="åŠ¨ç”»1ç§’60å¸§"></a>åŠ¨ç”»1ç§’60å¸§</h4><p>äººçœ¼ä¸­ï¼Œå¦‚æœ1ç§’å†…æœ‰60å¸§ï¼Œé‚£ä¹ˆåŠ¨ç”»çœ‹èµ·æ¥æµç•…ï¼Œå¦åˆ™å°±å¡é¡¿ã€‚è¿™æ ·ç®—èµ·æ¥ï¼Œä¸€å¸§å°±æ˜¯12æ¯«ç§’ã€‚</p><h4 id="Stack-16ç‰ˆæœ¬ä¹‹å‰çš„æ¸²æŸ“æ¨¡å¼"><a href="#Stack-16ç‰ˆæœ¬ä¹‹å‰çš„æ¸²æŸ“æ¨¡å¼" class="headerlink" title="Stack - 16ç‰ˆæœ¬ä¹‹å‰çš„æ¸²æŸ“æ¨¡å¼"></a>Stack - 16ç‰ˆæœ¬ä¹‹å‰çš„æ¸²æŸ“æ¨¡å¼</h4><p>ä¸»è¦ç‰¹ç‚¹ï¼Œç­‰ç­‰æ•´ä¸ªè™šæ‹Ÿæ ‘å®Œæˆäº†æ¯”è¾ƒåï¼Œå†ç»Ÿä¸€æ¸²æŸ“ï¼Œå¦‚æœæ¸²æŸ“èŠ‚ç‚¹å·¨å¤§ï¼Œè™šæ‹Ÿæ ‘æ¯”è¾ƒçš„å·¥ä½œå¯èƒ½ä¼šè¶…è¿‡12æ¯«ç§’ï¼Œæ­¤æ—¶ä¼šå‡ºç°å¡é¡¿ç°è±¡ã€‚</p><h4 id="Fiber-16ç‰ˆæœ¬çš„æ¸²æŸ“æ¨¡å¼"><a href="#Fiber-16ç‰ˆæœ¬çš„æ¸²æŸ“æ¨¡å¼" class="headerlink" title="Fiber - 16ç‰ˆæœ¬çš„æ¸²æŸ“æ¨¡å¼"></a>Fiber - 16ç‰ˆæœ¬çš„æ¸²æŸ“æ¨¡å¼</h4><p>ä¸»è¦ç‰¹ç‚¹ï¼Œå°†æ•´ä¸ªè™šæ‹Ÿæ•°çš„æ¯”å¯¹æ‹†åˆ†æˆå¾ˆå¤šä¸ªå°ä»»åŠ¡ï¼Œæ¯ä¸ªå°ä»»åŠ¡çš„å®Œæˆæ—¶é—´æ§åˆ¶åœ¨ä¸€å¸§12æ¯«ç§’å†…ï¼Œæ¯ä¸ªå°ä»»åŠ¡å®Œæˆåéƒ½ä¼šå®Œæˆä¸€æ¬¡æ¸²æŸ“ï¼ˆå°ä»»åŠ¡å¯¹åº”çš„å±€éƒ¨æ¸²æŸ“ï¼‰ã€‚<br>å› ä¸ºæ¯æ¬¡æ¸²æŸ“éƒ½æ§åˆ¶åœ¨ä¸€å¸§ä»¥å†…ï¼Œä¸ç”¨ç­‰æ‰€æœ‰ä»»åŠ¡æˆ–æ•´ä¸ªæ ‘æ¯”å¯¹å®Œåæ‰æ¸²æŸ“ï¼Œæ‰€æœ‰çœ‹èµ·æ¥æµç•…ï¼Œä¸å¡é¡¿ã€‚</p><h3 id="react-ä¸-react-native-å…³ç³»"><a href="#react-ä¸-react-native-å…³ç³»" class="headerlink" title="react ä¸ react native å…³ç³»"></a>react ä¸ react native å…³ç³»</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>reactæ¡†æ¶è®¾è®¡æ—¶å°±è€ƒè™‘ä¸€ä¸ªæ¡†æ¶åŒæ—¶ç”¨äºpcç«¯å’Œç§»åŠ¨ç«¯ã€‚<br>å…¶ä¸­å°†äºŒè€…å…¬å…±éƒ¨åˆ†æŠ½æˆ react åŒ…å†…ï¼›<br>pcç«¯ æŠ½åˆ° react-domå†…ï¼Œå°è£…äº†æµè§ˆå™¨çš„domï¼›<br>ç§»åŠ¨ç«¯ æŠ½åˆ° react-nativeå†…ï¼Œå°è£…äº†è·Ÿç§»åŠ¨ç«¯æœ‰å…³çš„å¦‚æ‰“å¼€ç›¸æœº æ‰“å¼€gps åŸç”Ÿèƒ½åŠ›ï¼›</p><p>å› æ­¤ react+react-dom ç»“åˆç”¨äºpcå¼€å‘ï¼›<br>react+react-native ç»“åˆç”¨äºç§»åŠ¨ç«¯å¼€å‘ï¼›<br><a href="https://www.imooc.com/video/21307" target="_blank" rel="noopener">æ›´å¤šå‚è€ƒ</a></p><figure class="image-box">                <img src="/image/react/native.jpg" alt title class>                <p></p>            </figure><h4 id="react-native-ç›¸å½“äºpcçš„-react-dom"><a href="#react-native-ç›¸å½“äºpcçš„-react-dom" class="headerlink" title="react native ç›¸å½“äºpcçš„ react-dom"></a>react native ç›¸å½“äºpcçš„ react-dom</h4><p>å‚è€ƒä¸Šé¢ã€Šæ¦‚è¿°ã€‹</p><h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p><a href="https://segmentfault.com/a/1190000016539430" target="_blank" rel="noopener">å‚è€ƒ</a><br><a href="https://www.cnblogs.com/forcheng/p/13246874.html" target="_blank" rel="noopener">å‚è€ƒ</a><br><a href="https://www.bilibili.com/video/BV1B7411H7fL?from=search&amp;seid=16040033068650647202" target="_blank" rel="noopener">å‚è€ƒ</a><br>ä¸»è¦è¿›è¡Œä»¥ä¸‹ä¸‰æ–¹é¢æ¯”è¾ƒï¼š</p><ul><li>tree diff æ ‘æ¯”è¾ƒ   å¦‚æœæ ¹èŠ‚ç‚¹ ç±»å‹ä¸ä¸€æ ·ï¼Œç›´æ¥å¸è½½ï¼Œå¦‚æœç±»å‹ä¸€æ ·ï¼Œåˆ™è¿›è¡Œpropsæ¯”è¾ƒï¼›</li><li>component diff ç»„ä»¶æ¯”è¾ƒ  æ ¹æ®propsä¸åŒï¼Œè¿›è¡Œæ›´æ–°æ“ä½œï¼›</li><li>element diff ç»„ä»¶å†…èŠ‚ç‚¹æ¯”è¾ƒ æ¯”å¦‚ç»„ä»¶å†…åˆ—è¡¨èŠ‚ç‚¹æ¯”è¾ƒï¼Œ<ul><li>è‹¥æ— ï¼Œå°±æ–°å»ºï¼Œ</li><li>è‹¥åˆ é™¤ï¼Œå°±å¸è½½</li><li>è‹¥æœ‰ï¼Œå°±æ¯”è¾ƒé¡ºåºï¼Œè¿™é‡Œå°±æœ‰ä¸ªæ€§èƒ½é—®é¢˜äº†ï¼Œä¸€èˆ¬å°†åŸæ¥æœ€åçš„ç»„ä»¶æ”¾åœ¨æœ€å‰é¢ï¼Œæ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚ä¸‹é¢å•ç‹¬è®²è¿™å—ã€‚</li></ul></li></ul><h4 id="ä¸ä¸€æ ·çš„-element-diff-æ¯”è¾ƒè§„åˆ™"><a href="#ä¸ä¸€æ ·çš„-element-diff-æ¯”è¾ƒè§„åˆ™" class="headerlink" title="ä¸ä¸€æ ·çš„ element diff æ¯”è¾ƒè§„åˆ™"></a>ä¸ä¸€æ ·çš„ element diff æ¯”è¾ƒè§„åˆ™</h4><p>è¯¦ç»†<a href="https://www.bilibili.com/video/BV1B7411H7fL?from=search&amp;seid=16040033068650647202" target="_blank" rel="noopener">å‚è€ƒ</a> ã€‚<br><figure class="image-box">                <img src="/image/react/diff.jpg" alt title class>                <p></p>            </figure><br>ä¸‹é¢è¯´æ˜ä¸‹ä¸ºä»€ä¹ˆå°†æœ€åé¢çš„ç»„ä»¶æ”¾åˆ°æœ€å‰é¢ï¼Œæœ€æ¶ˆè€—æ€§èƒ½ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//åŸæ¥é¡ºåº A B C D</span><br><span class="line"></span><br><span class="line">//æœ€æ–°é¡ºåº D A B C</span><br><span class="line">// æ¯”è¾ƒ Dï¼š lastindex åˆå§‹å€¼ä¸º0ï¼Œ DåŸæ¥çš„ä¸‹æ ‡montindexæ˜¯3ï¼Œç”±äº lastindex &lt; mountindex, å› æ­¤Dä¸ç§»åŠ¨ï¼Œä¸è¿‡ lastindexå°†æ›´æ–°ä¸ºmountindexï¼Œ lastindex = 3.</span><br><span class="line">// æ¯”è¾ƒ Aï¼š ç”±ä¸Šä¸€æ­¥å¯çŸ¥ Dçš„lastindexä¸º3ï¼Œé‚£ä¹ˆAçš„lastindexæŒ‰ç…§ä½ç½®é€’å¢ä¸º4ï¼›è€ŒAåŸæ¥çš„mountindexä¸º0ï¼Œlastindex &gt; mountindex ,Aå°†å‘å³ç§»åŠ¨ï¼Œæ ¹æ®è§„åˆ™ï¼Œlastindexä¸æ›´æ–°ã€‚</span><br><span class="line">// æ¯”è¾ƒ Bï¼š æ ¹Aä¸€æ ·ï¼ŒB çš„lastindex é€’å¢ä¸º 5ï¼ŒBå°†å‘å³ç§»åŠ¨ã€‚</span><br><span class="line">// æ¯”è¾ƒ Cï¼š è·Ÿä¸Šé¢ä¸€æ ·ï¼Œ Cçš„lastindex é€’å¢ä¸º6ï¼ŒCå°†å‘å³ç§»åŠ¨ã€‚</span><br><span class="line">// æ¯”è¾ƒå®Œæ¯•</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢é™¤äº†Dæ²¡æœ‰ç§»åŠ¨ä½ç½®ï¼Œå…¶ä»–æ‰€æœ‰ABCå…ƒç´ éƒ½å°†ç§»åŠ¨ä½ç½®ï¼Œè¿™å°†æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚</p><h2 id="é«˜é˜¶ç»„ä»¶"><a href="#é«˜é˜¶ç»„ä»¶" class="headerlink" title="é«˜é˜¶ç»„ä»¶"></a>é«˜é˜¶ç»„ä»¶</h2><h3 id="ä½¿ç”¨ä»£ç†hocå°±å¤Ÿäº†"><a href="#ä½¿ç”¨ä»£ç†hocå°±å¤Ÿäº†" class="headerlink" title="ä½¿ç”¨ä»£ç†hocå°±å¤Ÿäº†"></a>ä½¿ç”¨ä»£ç†hocå°±å¤Ÿäº†</h3><p>é«˜é˜¶ç»„ä»¶æœ‰å¤šç§ï¼Œä½†ç”¨å¾—æœ€å¤šçš„æ˜¯ä»£ç†å’Œç»§æ‰¿hocï¼Œç”±äºä»£ç†hocå¼ºå¤§çš„ä¾¿åˆ©æ€§å’Œä½œç”¨ï¼Œèƒ½ç”¨ä»£ç†å®ç°çš„ä¸ç”¨ç»§æ‰¿hocï¼Œå› æ­¤å®é™…é¡¹ç›®ä¸­åŸºæœ¬ä¸Šç”¨çš„æ˜¯ä»£ç†hocï¼Œä½¿ç”¨ä»£ç†hocï¼ŒåŸºæœ¬ä¸Šå°±å¤Ÿä½ çš„å¼€å‘éœ€æ±‚äº†ã€‚</p><h3 id="hocå®šä¹‰"><a href="#hocå®šä¹‰" class="headerlink" title="hocå®šä¹‰"></a>hocå®šä¹‰</h3><h4 id="é«˜é˜¶å‡½æ•°å®šä¹‰"><a href="#é«˜é˜¶å‡½æ•°å®šä¹‰" class="headerlink" title="é«˜é˜¶å‡½æ•°å®šä¹‰"></a>é«˜é˜¶å‡½æ•°å®šä¹‰</h4><p>æ»¡è¶³ä¸‹é¢äºŒè€…ä¹‹ä¸€å³ä¸ºé«˜é˜¶ç»„ä»¶(è‹±æ–‡ Higher-Order Functions)ã€‚</p><ul><li>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¢«ä¼ é€’ï¼›</li><li>å‡½æ•°å¯ä»¥ä½œä¸ºè¿”å›å€¼è¾“å‡ºï¼š<br><a href="https://blog.bitsrc.io/understanding-higher-order-functions-in-javascript-75461803bad" target="_blank" rel="noopener">å‚è€ƒ Higher-Order Functions</a><br><a href="https://www.imooc.com/video/18254/0" target="_blank" rel="noopener">æ…•è¯¾ç½‘</a></li></ul><h4 id="hocå®šä¹‰-1"><a href="#hocå®šä¹‰-1" class="headerlink" title="hocå®šä¹‰"></a>hocå®šä¹‰</h4><p>é«˜é˜¶ç»„ä»¶å°±æ˜¯æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªç»„ä»¶çš„å‡½æ•°ã€‚é«˜é˜¶ç»„ä»¶å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p><ul><li>æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ï¼›</li><li>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼›</li></ul><h3 id="ä»£ç†hocä½œç”¨"><a href="#ä»£ç†hocä½œç”¨" class="headerlink" title="ä»£ç†hocä½œç”¨"></a>ä»£ç†hocä½œç”¨</h3><p>å› ä¸ºé¡¹ç›®ä¸­ä¸€èˆ¬ç”¨çš„æ˜¯ä»£ç†hocï¼Œè¿™é‡Œå…ˆè®²ä»£ç†hocä½œç”¨ã€‚</p><h4 id="æ“çºµprop"><a href="#æ“çºµprop" class="headerlink" title="æ“çºµprop"></a>æ“çºµprop</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@defaultValueHoc</span><br><span class="line">export default class Test extends Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                æ ‡é¢˜ï¼š&#123;this.props.defaultValue&#125;&lt;br/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const defaultValueHoc = (Comp) =&gt;&#123;</span><br><span class="line">    return class Wrap extends Component &#123;</span><br><span class="line">        render() &#123;</span><br><span class="line">            return &lt;Comp defaultValue=&quot;testVale&quot; /&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è®¿é—®ref"><a href="#è®¿é—®ref" class="headerlink" title="è®¿é—®ref"></a>è®¿é—®ref</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">@defaultValueHoc</span><br><span class="line">export default class Login extends Component &#123;</span><br><span class="line">renderHear = ()=&gt;&#123;</span><br><span class="line">    return &lt;div&gt;it is header title&lt;/div&gt;</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            æ ‡é¢˜ï¼šgood&lt;br/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const defaultValueHoc = (Comp) =&gt;&#123;</span><br><span class="line">  return class Wrap extends Component &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        header:&apos;&apos;</span><br><span class="line">      &#125;</span><br><span class="line">      setRef=(CompInstance)=&gt;&#123;</span><br><span class="line">          const renderHear = CompInstance &amp;&amp; CompInstance.renderHear;</span><br><span class="line">          if(renderHear)&#123;</span><br><span class="line">            this.setState(&#123;header: renderHear()&#125;)</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      render() &#123;</span><br><span class="line">          return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;div style=&#123;&#123;background: &apos;red&apos;&#125;&#125;&gt;&#123;this.state.header&#125;&lt;/div&gt;</span><br><span class="line">              &lt;Comp defaultValue=&quot;testVale&quot; ref=&#123;this.setRef&#125; /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŠ½å–çŠ¶æ€"><a href="#æŠ½å–çŠ¶æ€" class="headerlink" title="æŠ½å–çŠ¶æ€"></a>æŠ½å–çŠ¶æ€</h4><p>æŠ½å–çŠ¶æ€çš„å¥½å¤„æ˜¯ï¼Œç”±hocç»Ÿä¸€å†™çŠ¶æ€ï¼Œå°†ç›¸åŒçŠ¶æ€é€»è¾‘æå–åˆ°hocä¸Šï¼Œä¸‹æ¬¡æœ‰ç›¸åŒé€»è¾‘æ—¶ï¼Œç›´æ¥å°†hocè£…é¥°ä¸Šå³å¯ï¼Œé¿å…ç›¸åŒé€»è¾‘é‡å¤å†™ï¼Œä¾¿äºç»´æŠ¤å’Œä»£ç ç²¾ç®€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// æŠ½å–çŠ¶æ€ä¹‹å‰</span><br><span class="line">class Login extends Component &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    value:&apos;&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  onChange = (e)=&gt;&#123;</span><br><span class="line">    this.setState(&#123;value: e.target.value&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">      return (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">              &lt;input value=&#123;this.state.value&#125; onChange=&#123;this.onChange&#125; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">// æŠ½å–çŠ¶æ€ä¹‹å</span><br><span class="line">@defaultValueHoc</span><br><span class="line">export default class Login extends Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">      return (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">              &lt;input &#123;...this.props&#125; /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const defaultValueHoc = (Comp) =&gt;&#123;</span><br><span class="line">  return class Wrap extends Component &#123;</span><br><span class="line">      state = &#123;</span><br><span class="line">        value:&apos;ç»Ÿä¸€è®¾ç½®æç¤ºè¯­&apos;</span><br><span class="line">      &#125;</span><br><span class="line">      onChange = (e)=&gt;&#123;</span><br><span class="line">        this.setState(&#123;value: e.target.value&#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      render() &#123;</span><br><span class="line">        const moreProps = &#123;</span><br><span class="line">          value: this.state.value,</span><br><span class="line">          onChange: this.onChange</span><br><span class="line">        &#125;</span><br><span class="line">        console.log(moreProps)</span><br><span class="line">          return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;Comp &#123;...this.props&#125; &#123;...moreProps&#125;/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          )</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åŒ…è£¹ç»„ä»¶"><a href="#åŒ…è£¹ç»„ä»¶" class="headerlink" title="åŒ…è£¹ç»„ä»¶"></a>åŒ…è£¹ç»„ä»¶</h4><p>hocåŒ…è£¹ç»„ä»¶ä½†ä½œç”¨æ˜¾è€Œæ˜“è§ï¼Œä¸Šé¢å‡ ä¸ªä¾‹å­éƒ½æ˜¯åŒ…è£¹äº†ç»„ä»¶ã€‚</p><h3 id="ç»§æ‰¿hocä½œç”¨"><a href="#ç»§æ‰¿hocä½œç”¨" class="headerlink" title="ç»§æ‰¿hocä½œç”¨"></a>ç»§æ‰¿hocä½œç”¨</h3><ul><li>æ“ä½œprop</li><li>æ“ä½œç”Ÿå‘½å‘¨æœŸ</li></ul><p><a href="https://www.imooc.com/video/18258" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="ä»£ç†hocä¸ç»§æ‰¿hocæ¯”è¾ƒ"><a href="#ä»£ç†hocä¸ç»§æ‰¿hocæ¯”è¾ƒ" class="headerlink" title="ä»£ç†hocä¸ç»§æ‰¿hocæ¯”è¾ƒ"></a>ä»£ç†hocä¸ç»§æ‰¿hocæ¯”è¾ƒ</h3><figure class="image-box">                <img src="/image/react/hoc2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/react/hoc1.jpg" alt title class>                <p></p>            </figure><h3 id="é«˜é˜¶ç»„ä»¶æ˜¾ç¤ºå"><a href="#é«˜é˜¶ç»„ä»¶æ˜¾ç¤ºå" class="headerlink" title="é«˜é˜¶ç»„ä»¶æ˜¾ç¤ºå"></a>é«˜é˜¶ç»„ä»¶æ˜¾ç¤ºå</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const defaultValueHoc = (Comp) =&gt; &#123;</span><br><span class="line">  return class Wrap extends Component &#123;</span><br><span class="line">      static displayName = `NewComponent($&#123;Comp.displayName || Comp.name || &apos;Component&apos;&#125;)`;</span><br><span class="line"></span><br><span class="line">      render() &#123;</span><br><span class="line">        return &lt;Comp &#123;...this.props&#125; /&gt;;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="hoc-ä¸-è£…é¥°å™¨-é…åˆæ—¶æŠ¥é”™é—®é¢˜"><a href="#hoc-ä¸-è£…é¥°å™¨-é…åˆæ—¶æŠ¥é”™é—®é¢˜" class="headerlink" title="hoc ä¸ è£…é¥°å™¨ é…åˆæ—¶æŠ¥é”™é—®é¢˜"></a>hoc ä¸ è£…é¥°å™¨ é…åˆæ—¶æŠ¥é”™é—®é¢˜</h3><p>hocä¸è£…é¥°å™¨ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œè¯·ä¸€å®šè¦åŠ ä¸Š<code>export default</code>ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@defaultValueHoc</span><br><span class="line">export default class Login extends Component &#123;</span><br><span class="line"> ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å…¶ä»–æŠ€æœ¯"><a href="#å…¶ä»–æŠ€æœ¯" class="headerlink" title="å…¶ä»–æŠ€æœ¯"></a>å…¶ä»–æŠ€æœ¯</h2><h3 id="React-cloneElementæ˜¯ä¸€æŠŠå¥½åˆ€"><a href="#React-cloneElementæ˜¯ä¸€æŠŠå¥½åˆ€" class="headerlink" title="React.cloneElementæ˜¯ä¸€æŠŠå¥½åˆ€"></a>React.cloneElementæ˜¯ä¸€æŠŠå¥½åˆ€</h3><p>å…¶æœ€å¥½çš„ä¸¤ä¸ªç”¨æ³•åœ¨äºï¼š<br>1.è®©ä½ ä»»æ„åœ°æ–¹å®šä¹‰ç»„ä»¶ï¼Œç„¶åè®©ä½ æŒ‰ç…§æ„å›¾ï¼Œé‡æ–°æŠŠç»„ä»¶æ¸²æŸ“åœ¨æŒ‡å®šä½ç½®ï¼›<br>2.é‡æ–°ç»„è£…propsï¼›<br>React.cloneElementæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„APIï¼Œç»™åŠ›ä½ æå¤§çš„è‡ªç”±ï¼Œå¯ä»¥è®©ä½ åšå¾ˆå¤šæ„æƒ³ä¸åˆ°çš„äº‹æƒ…ã€‚</p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p>è¯¦ç»†å‚è€ƒ<a href="https://zh-hans.reactjs.org/docs/context.html" target="_blank" rel="noopener">ä½¿ç”¨ Context ä¹‹å‰çš„è€ƒè™‘</a>,<br>å¦‚ä¸‹ï¼ŒPageæ˜¯æœ€å¤–å±‚çˆ¶å±‚ ï¼Œå±‚çº§å…³ç³»å¦‚ä¸‹ï¼š Page-ã€‹PageLayout-ã€‹NavigationBar-ã€‹Link ï¼ŒLinkæ˜¯æœ€å†…å±‚ï¼Œæœ€å­å±‚ï¼›å¦‚æœPageè¦ç»™Linkä¼ é€’å‚æ•°ï¼Œå°±å¿…é¡»ç»™ä¸­é—´çš„æ¯ä¸ªç»„ä»¶è®¾ç½®ç›¸åŒçš„propsï¼Œéå¸¸éº»çƒ¦ã€‚è¿˜æœ‰ä¸€ä¸ªéº»çƒ¦æ˜¯ï¼Œå¦‚æœåæœŸLinkè¿˜éœ€è¦Pageçš„æ›´å¤šå‚æ•°ï¼Œé‚£ä¹ˆåˆè¦ç»™æ¯ä¸ªç»„ä»¶åŠ propsï¼Œéº»çƒ¦å¾—ç‹ ã€‚<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Page user=&#123;user&#125; avatarSize=&#123;avatarSize&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&lt;PageLayout user=&#123;user&#125; avatarSize=&#123;avatarSize&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&lt;NavigationBar user=&#123;user&#125; avatarSize=&#123;avatarSize&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&lt;Link href=&#123;user.permalink&#125;&gt;</span><br><span class="line">  &lt;Avatar user=&#123;user&#125; size=&#123;avatarSize&#125; /&gt;</span><br><span class="line">&lt;<span class="regexp">/Link&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼Œå› ä¸ºLinkçš„æ•°æ®åªä¸Pageç›¸å…³ï¼Œé‚£ä¹ˆåœ¨Pageä¸Šå°†Linkå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œåœ¨Pageç»„ä»¶å†…å°†Linkç»„è£…å¥½ï¼Œæœ€åå°†Linkè‡ªèº«ä¼ ç»™æœ€å†…å±‚æ¸²æŸ“å³å¯ï¼Œå‡å°‘äº†ä¼ propsçš„ä¸ªæ•°ï¼Œä¹Ÿå®¹æ˜“ç»´æŠ¤ã€‚ä½¿ç”¨ç±»ä¼¼ Render propsçš„å½¢å¼ï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = props.user;</span><br><span class="line">  <span class="keyword">const</span> userLink = (</span><br><span class="line">    &lt;Link href=&#123;user.permalink&#125;&gt;</span><br><span class="line">      &lt;Avatar user=&#123;user&#125; size=&#123;props.avatarSize&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">  return &lt;PageLayout userLink=&#123;userLink&#125; /</span>&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·çš„ç»„ä»¶ï¼š</span></span><br><span class="line">&lt;Page user=&#123;user&#125; avatarSize=&#123;avatarSize&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&lt;PageLayout userLink=&#123;...&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&lt;NavigationBar userLink=&#123;...&#125; /&gt;</span><br><span class="line"><span class="comment">// ... æ¸²æŸ“å‡º ...</span></span><br><span class="line">&#123;props.userLink&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ç»„åˆæ¨¡å¼-ä¸-Render-Propsæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼-ä¸-Render-Propsæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼ ä¸ Render Propsæ¨¡å¼"></a>ç»„åˆæ¨¡å¼ ä¸ Render Propsæ¨¡å¼</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>è¿™ä¸¤ç§æ˜¯Reactä¸¤ç§é‡è¦è€Œå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼ŒRender Propsæ¨¡å¼æ˜¯å¯¹ ç»„åˆæ¨¡å¼çš„æ‰©å±•ã€‚</p><h3 id="ç†è®ºåŸºç¡€"><a href="#ç†è®ºåŸºç¡€" class="headerlink" title="ç†è®ºåŸºç¡€"></a>ç†è®ºåŸºç¡€</h3><p>ä¸¤ç§è®¾è®¡æ¨¡å¼çš„ç†è®ºåŸºç¡€åœ¨äºReactçš„propså¯ä»¥æ¥æ”¶ä»»ä½•å¯¹è±¡ã€‚æ‰€ä»¥å°±å¯ä»¥æ„‰å¿«åœ°ç»™propsä¼ é€’reactå…ƒç´ å’Œfunctionäº†ã€‚<br>è¿™åœ¨å®˜ç½‘å¤šæ¬¡æåˆ°ã€‚</p><h3 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h3><h4 id="ç¤ºä¾‹è¯´æ˜"><a href="#ç¤ºä¾‹è¯´æ˜" class="headerlink" title="ç¤ºä¾‹è¯´æ˜"></a>ç¤ºä¾‹è¯´æ˜</h4><p>ä»€ä¹ˆæ˜¯Reactçš„ç»„åˆæ¨¡å¼ï¼Œé€šä¿—çš„è¯´ï¼Œå°±æ˜¯å°†å¤šä¸ªç»„ä»¶ç»„åˆåœ¨ä¸€èµ·:<br>ä¸‹é¢FancyBorderå°±æ˜¯ä¸€ç§ç»„åˆæ¨¡å¼ï¼Œç»„ä»¶å†…é€šè¿‡props.children æ¸²æŸ“å…¶ä»–ç»„ä»¶å†…å®¹ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FancyBorder</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;<span class="string">'FancyBorder FancyBorder-'</span> + props.color&#125;&gt;</span><br><span class="line">      &#123;props.children&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function WelcomeDialog() &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;FancyBorder color="blue"&gt;</span></span><br><span class="line"><span class="regexp">      &lt;h1 className="Dialog-title"&gt;</span></span><br><span class="line"><span class="regexp">        Welcome</span></span><br><span class="line"><span class="regexp">      &lt;/</span>h1&gt;</span><br><span class="line">      &lt;p className=<span class="string">"Dialog-message"</span>&gt;</span><br><span class="line">        Thank you <span class="keyword">for</span> visiting our spacecraft!</span><br><span class="line">      &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>FancyBorder&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢ä¹Ÿæ˜¯ä¸€ç§ç»„åˆæ¨¡å¼<br>åœ¨PageLayoutæ¥æ”¶ä¸€ä¸ªtopBarï¼Œè€Œè¿™ä¸ªtopBaræ˜¯ä¸€ä¸ªæ¸²æŸ“å¥½çš„Reactå…ƒç´ ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> user = props.user;</span><br><span class="line">  <span class="keyword">const</span> content = <span class="xml"><span class="tag">&lt;<span class="name">Feed</span> <span class="attr">user</span>=<span class="string">&#123;user&#125;</span> /&gt;</span></span>;</span><br><span class="line">  <span class="keyword">const</span> topBar = (</span><br><span class="line">    &lt;NavigationBar&gt;</span><br><span class="line">      &lt;Link href=&#123;user.permalink&#125;&gt;</span><br><span class="line">        &lt;Avatar user=&#123;user&#125; size=&#123;props.avatarSize&#125; /&gt;</span><br><span class="line">      &lt;<span class="regexp">/Link&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>NavigationBar&gt;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;PageLayout</span><br><span class="line">      topBar=&#123;topBar&#125;</span><br><span class="line">      content=&#123;content&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>ç”±ä¸Šé¢ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œç›´ç™½çš„è¯´Reactç»„åˆæ¨¡å¼å°±æ˜¯ å†™å¥½æˆ–ç»„åˆå¥½ä¸€ä¸ªReactå…ƒç´ ï¼Œå°†æ­¤å…ƒç´ ä½œä¸ºå…¶ä»–(å­)ç»„ä»¶çš„propsï¼Œå…¶ä»–ç»„ä»¶ç›´æ¥å‡­å€Ÿpropsæ¸²æŸ“çš„è®¾è®¡æ¨¡å¼ã€‚</p><h4 id="ç‰¹ç‚¹ï¼šèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶æ‰€æœ‰æ•°æ®"><a href="#ç‰¹ç‚¹ï¼šèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶æ‰€æœ‰æ•°æ®" class="headerlink" title="ç‰¹ç‚¹ï¼šèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶æ‰€æœ‰æ•°æ®"></a>ç‰¹ç‚¹ï¼šèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶æ‰€æœ‰æ•°æ®</h4><p>å‚è€ƒå¦‚ä¸‹åˆ†æã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h4 id="éœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®-çˆ¶å­ç»„ä»¶äº¤äº’"><a href="#éœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®-çˆ¶å­ç»„ä»¶äº¤äº’" class="headerlink" title="éœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)"></a>éœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)</h4><p>åœ¨ä¸Šé¢çš„ã€Šç¤ºä¾‹è¯´æ˜ã€‹ä¸­ï¼Œ<code>topBar</code>æ˜¯ç»„åˆå¥½çš„reactå…ƒç´ ï¼Œå®ƒåªèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶<code>Page</code>çš„æ‰€æœ‰stateå’Œpropsï¼Œä½†ä¸èƒ½æ‹¿åˆ°<code>PageLayout</code>å­ç»„ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚ä½•å¯ä»¥è·å¾—å‘¢ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ<code>topBar</code>è®¾è®¡æˆä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢çš„<code>mouseRender</code>ï¼Œä¸ä»…å¯ä»¥æ‹¿åˆ°çˆ¶ç»„ä»¶çš„ï¼Œè¿˜å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶çš„stateã€‚<br><code>mouseRender</code>æ‰€ä»£è¡¨çš„reactè®¾è®¡æ¨¡å¼å°±æ˜¯ render props æ¨¡å¼ã€‚<br>ä¸‹é¢çš„ä¾‹å­åˆå¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥é€šè¿‡setStateNameè¿›è¡Œçˆ¶å­ç»„ä»¶äº¤äº’ï¼Œè¿™ä¹Ÿæ˜¯render props æ¨¡å¼å¦å¤–ä¸€ä¸ªå¥½å¤„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mouse</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">    props.setStateName(<span class="string">'beautiful'</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'100vh'</span> &#125;&#125; onMouseMove=&#123;<span class="keyword">this</span>.handleMouseMove&#125;&gt;</span><br><span class="line">        &#123;<span class="keyword">this</span>.props.render(<span class="keyword">this</span>.state)&#125;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">class MouseTracker extends React.Component &#123;</span></span><br><span class="line"><span class="regexp">  constructor(props) &#123;</span></span><br><span class="line"><span class="regexp">    super(props);</span></span><br><span class="line"><span class="regexp">    this.state = &#123; x: 0, y: 0 , name:'you'&#125;;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  setStateName(name) &#123;</span></span><br><span class="line"><span class="regexp">   this.setState(&#123;name&#125;)</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  mouseRender(mouse, ) &#123;</span></span><br><span class="line"><span class="regexp">   return &lt;Cat mouse=&#123;mouse&#125; setStateName=&#123;this.setStateName&#125; type=&#123;this.state&#125; /</span>&gt;</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;ç§»åŠ¨é¼ æ ‡!&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Mouse render=&#123;mouseRender&#125;/</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Render-Propsæ¨¡å¼"><a href="#Render-Propsæ¨¡å¼" class="headerlink" title="Render Propsæ¨¡å¼"></a>Render Propsæ¨¡å¼</h3><p>å•ç‹¬ä¸€ç« è¯´æ˜ ã€ŠRender Propsæ¨¡å¼ã€‹</p><h4 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>Render Propsæ¨¡å¼æ˜¯åœ¨ç»„åˆæ¨¡å¼å»¶ä¼¸è€Œæ¥ï¼›<br>functionå†…è¿”å›ä¸€ä¸ªReactå¯¹è±¡ï¼Œç„¶åå°†æ­¤functionä½œä¸ºpropsä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±æ˜¯Render Propsæ¨¡å¼ï¼Œè¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h4 id="å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state"><a href="#å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state" class="headerlink" title="å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state"></a>å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state</h4><p>è¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h4 id="å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’"><a href="#å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’" class="headerlink" title="å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’"></a>å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’</h4><p>è¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h3 id="äºŒè€…åŒºåˆ«å’Œè”ç³»"><a href="#äºŒè€…åŒºåˆ«å’Œè”ç³»" class="headerlink" title="äºŒè€…åŒºåˆ«å’Œè”ç³»"></a>äºŒè€…åŒºåˆ«å’Œè”ç³»</h3><p>äºŒè€…åŒºåˆ«åœ¨äºï¼Œç»„åˆæ¨¡å¼åªèƒ½æ‹¿åˆ°çˆ¶ç»„ä»¶ä¿¡æ¯ï¼Œrender props èƒ½æ‹¿åˆ°ä¸¤ä¸ªç»„ä»¶çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åšäº¤äº’ã€‚<br>è”ç³»åœ¨äºï¼Œrender props åŸºäº ç»„åˆæ¨¡å¼å‘å±•è€Œæ¥ã€‚</p><h2 id="Render-Propsæ¨¡å¼-1"><a href="#Render-Propsæ¨¡å¼-1" class="headerlink" title="Render Propsæ¨¡å¼"></a>Render Propsæ¨¡å¼</h2><h3 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><h4 id="å®šä¹‰-2"><a href="#å®šä¹‰-2" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h4><p>Render Propsæ¨¡å¼æ˜¯åœ¨ç»„åˆæ¨¡å¼å»¶ä¼¸è€Œæ¥ï¼›<br>functionå†…è¿”å›ä¸€ä¸ªReactå¯¹è±¡ï¼Œç„¶åå°†æ­¤functionä½œä¸ºpropsä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼å°±æ˜¯Render Propsæ¨¡å¼ï¼Œè¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h4 id="å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state-1"><a href="#å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state-1" class="headerlink" title="å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state"></a>å¯ä»¥æ‹¿åˆ°çˆ¶å­ä¸¤ä¸ªç»„ä»¶çš„state</h4><p>è¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h4 id="å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’-1"><a href="#å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’-1" class="headerlink" title="å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’"></a>å¯ä»¥å°†çˆ¶å­ç»„ä»¶è¿›è¡Œäº¤äº’</h4><p>è¯¦ç»†å‚è€ƒã€Šéœ€æ±‚å»¶ä¼¸ï¼šå¦‚ä½•æ‹¿åˆ°å­ç»„ä»¶æ•°æ®(çˆ¶å­ç»„ä»¶äº¤äº’)ã€‹</p><h3 id="ä¸ç»„åˆæ¨¡å¼çš„åŒºåˆ«"><a href="#ä¸ç»„åˆæ¨¡å¼çš„åŒºåˆ«" class="headerlink" title="ä¸ç»„åˆæ¨¡å¼çš„åŒºåˆ«"></a>ä¸ç»„åˆæ¨¡å¼çš„åŒºåˆ«</h3><p>è§ ã€Šç»„åˆæ¨¡å¼ ä¸ Render Propsæ¨¡å¼   â€“  äºŒè€…åŒºåˆ«å’Œè”ç³»ã€‹</p><h3 id="ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«"><a href="#ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«" class="headerlink" title="ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«"></a>ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«</h3><h4 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>è¿™ç‚¹æœ€å®¹æ˜“è¿·æƒ‘ï¼Œå¾ˆå¤šäººè®¤ä¸º å†™æˆrender propsæ¨¡å¼ä¸ç›´æ¥å†™æˆç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œ<br>æ¯•ç«ŸäºŒè€…éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<br>renderæ˜¯å‡½æ•°ï¼Œ ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä½†æœ‰åŒºåˆ«ã€‚</p><h4 id="ç»„ä»¶æ˜¯å›½ä¸­å›½ï¼Œrender-Propsè¿˜æ˜¯ä¸€å›½"><a href="#ç»„ä»¶æ˜¯å›½ä¸­å›½ï¼Œrender-Propsè¿˜æ˜¯ä¸€å›½" class="headerlink" title="ç»„ä»¶æ˜¯å›½ä¸­å›½ï¼Œrender Propsè¿˜æ˜¯ä¸€å›½"></a>ç»„ä»¶æ˜¯å›½ä¸­å›½ï¼Œrender Propsè¿˜æ˜¯ä¸€å›½</h4><p>æ¯”å¦‚å°è£…next çš„formçš„æ—¶å€™ï¼Œä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå®šä¹‰ç»„ä»¶çš„stateä¸çˆ¶ç»„ä»¶æ˜¯éš”ç»çš„<br>render propsåˆ™ä¸çˆ¶ç»„ä»¶ä¸€ä½“ï¼Œç”¨çš„æ˜¯çˆ¶ç»„ä»¶çŠ¶æ€ã€‚</p><p>å…¶å®ç”¨ç»„ä»¶ä¹Ÿå¥½è¿˜æ˜¯render propså¥½ï¼Œå¤§å¤šæƒ…å†µä¸ä¼šç¢°åˆ°å¤ªå¤šåŒºåˆ«ï¼Œé™¤éï¼Œå°±æ˜¯ä¸Šæ¬¡å°è£…next formæ—¶ï¼Œå°±æ˜¯ä¸€ä¸ªç»å…¸çš„åŒºåˆ«ã€‚</p><h4 id="render-Props-æ¯”ç»„ä»¶æ›´çµæ´»"><a href="#render-Props-æ¯”ç»„ä»¶æ›´çµæ´»" class="headerlink" title="render Props æ¯”ç»„ä»¶æ›´çµæ´»"></a>render Props æ¯”ç»„ä»¶æ›´çµæ´»</h4><p>å¦‚ä¸‹å›¾ï¼Œrender props è·å–çˆ¶ç»„ä»¶çš„stateéå¸¸æ–¹ä¾¿çµæ´»ï¼Œè™½ç„¶è‡ªå®šä¹‰ç»„ä»¶ä¹Ÿå¯ä»¥è·å–ï¼Œä½†è¦å®šä¹‰propsç­‰ç­‰ï¼Œå†™æ³•ä¸Šè¦åšå‡ºæ”¹å˜ã€‚<br><figure class="image-box">                <img src="/image/react/renderprops1.png" alt title class>                <p></p>            </figure></p><p><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">å‚è€ƒ</a></p><h4 id="render-props-å¯ä»¥å®ç°é«˜é˜¶ç»„ä»¶ç±»ä¼¼çš„ä»£ç å¤ç”¨"><a href="#render-props-å¯ä»¥å®ç°é«˜é˜¶ç»„ä»¶ç±»ä¼¼çš„ä»£ç å¤ç”¨" class="headerlink" title="render props å¯ä»¥å®ç°é«˜é˜¶ç»„ä»¶ç±»ä¼¼çš„ä»£ç å¤ç”¨"></a>render props å¯ä»¥å®ç°é«˜é˜¶ç»„ä»¶ç±»ä¼¼çš„ä»£ç å¤ç”¨</h4><p><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">å‚è€ƒ</a></p><h4 id="render-propsé‡å¤§ä½œç”¨ä¹‹ä¸€å°±æ˜¯ä»£ç å¤ç”¨"><a href="#render-propsé‡å¤§ä½œç”¨ä¹‹ä¸€å°±æ˜¯ä»£ç å¤ç”¨" class="headerlink" title="render propsé‡å¤§ä½œç”¨ä¹‹ä¸€å°±æ˜¯ä»£ç å¤ç”¨"></a>render propsé‡å¤§ä½œç”¨ä¹‹ä¸€å°±æ˜¯ä»£ç å¤ç”¨</h4><p>å‚è€ƒä¸Šé¢çš„ã€Šrender props å¯ä»¥å®ç°é«˜é˜¶ç»„ä»¶ç±»ä¼¼çš„ä»£ç å¤ç”¨ã€‹</p><h3 id="ä¸é«˜é˜¶ç»„ä»¶çš„åŒºåˆ«"><a href="#ä¸é«˜é˜¶ç»„ä»¶çš„åŒºåˆ«" class="headerlink" title="ä¸é«˜é˜¶ç»„ä»¶çš„åŒºåˆ«"></a>ä¸é«˜é˜¶ç»„ä»¶çš„åŒºåˆ«</h3><p><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="ä¸hooksçš„åŒºåˆ«"><a href="#ä¸hooksçš„åŒºåˆ«" class="headerlink" title="ä¸hooksçš„åŒºåˆ«"></a>ä¸hooksçš„åŒºåˆ«</h3><p><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">å‚è€ƒ</a></p><h2 id="é»‘çŸ¥è¯†"><a href="#é»‘çŸ¥è¯†" class="headerlink" title="é»‘çŸ¥è¯†"></a>é»‘çŸ¥è¯†</h2><h3 id="å¥‡æ€ªçš„æ¸²æŸ“ï¼šæ¯æ¬¡æ¸²æŸ“çš„çŠ¶æ€æ˜¯ç‹¬ç«‹çš„é»‘ç®±"><a href="#å¥‡æ€ªçš„æ¸²æŸ“ï¼šæ¯æ¬¡æ¸²æŸ“çš„çŠ¶æ€æ˜¯ç‹¬ç«‹çš„é»‘ç®±" class="headerlink" title="å¥‡æ€ªçš„æ¸²æŸ“ï¼šæ¯æ¬¡æ¸²æŸ“çš„çŠ¶æ€æ˜¯ç‹¬ç«‹çš„é»‘ç®±"></a>å¥‡æ€ªçš„æ¸²æŸ“ï¼šæ¯æ¬¡æ¸²æŸ“çš„çŠ¶æ€æ˜¯ç‹¬ç«‹çš„é»‘ç®±</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> IState &#123;</span><br><span class="line">  like: <span class="built_in">any</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> LikeButton <span class="keyword">extends</span> React.Component &lt;<span class="built_in">any</span>, IState&gt;&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">props:<span class="built_in">any</span></span>)&#123;</span><br><span class="line">    <span class="keyword">super</span>(props)</span><br><span class="line">    <span class="keyword">this</span>.state=&#123;like:<span class="number">0</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  handleAlertClick =<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;like&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'you clicked on '</span> + <span class="keyword">this</span>.state.like)  <span class="comment">//like ä¸º 17</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'you clicked on '</span> + like) <span class="comment">//like ä¸º 5</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render()&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;like&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">      &lt;button onClick=&#123;<span class="function"><span class="params">()</span> =&gt;</span> &#123;<span class="keyword">this</span>.setState(&#123;like: like + <span class="number">1</span>&#125;);&#125;&#125;&gt;</span><br><span class="line">        &#123;like&#125; ğŸ‘</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &#123;/</span>* like ä¸º <span class="number">5</span> çš„æ—¶å€™ï¼Œ  ç‚¹å‡»è§¦å‘ handleAlertClick, ç„¶åä¸€ç›´ç‚¹å‡»ä¸Šé¢çš„onClickæ”¹å˜likeå€¼ï¼Œ<span class="number">3</span>ç§’ålikeå€¼å˜æˆ<span class="number">17</span> *<span class="regexp">/&#125;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;this.handleAlertClick&#125;&gt; Alert!</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect, useRef, useContext &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> &#123; ThemeContext &#125; <span class="keyword">from</span> <span class="string">'../App'</span></span><br><span class="line"><span class="keyword">const</span> LikeButton: React.FC = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [like, setLike] = useState(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> likeRef = useRef(<span class="number">0</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleAlertClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'you clicked on '</span> + like)  <span class="comment">//ä¹Ÿæ˜¯5 é 17</span></span><br><span class="line">    &#125;, <span class="number">3000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">    &lt;button onClick=&#123;<span class="function"><span class="params">()</span> =&gt;</span> &#123;setLike(like + <span class="number">1</span>); likeRef.current++&#125;&#125;&gt;</span><br><span class="line">      &#123;like&#125; ğŸ‘</span><br><span class="line">    &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button onClick=&#123;handleAlertClick&#125;&gt; Alert!</span></span><br><span class="line"><span class="regexp">    &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">export default LikeButton</span></span><br></pre></td></tr></table></figure><p>æ¯æ¬¡æ¸²æŸ“ä¸­ props state æ˜¯ç›¸äº’ç‹¬ç«‹çš„é»‘ç®±ï¼ˆæ¯æ¬¡æ¸²æŸ“ä¼šå½¢æˆä¸€ä¸ªé—­åŒ…ï¼‰ï¼›<br>å…¶å®renderä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œrenderçš„æ‰§è¡Œæ˜¯ä¸€æ¬¡æ¸²æŸ“ï¼Œåªæ˜¯æ¸²æŸ“jsxæˆ–domï¼›<br>åŒæ ·çš„handleAlertClick å‡½æ•°å†…çš„ç¨‹åºæ‰§è¡Œï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€æ¬¡æ¸²æŸ“ï¼Œ<br>æ­¤æ¬¡æ¸²æŸ“çš„æ‰€æœ‰ props state æ˜¯ç›¸äº’ç‹¬ç«‹çš„é»‘ç®±ï¼Œå…¶props stateçš„å€¼ ç”± handleAlertClickå‡½æ•°æ‰§è¡Œçš„é‚£ä¸€åˆ»å†³å®šã€‚<br>å…¶props stateçš„å€¼å°±æ˜¯handleAlertClickå‡½æ•°æ‰§è¡Œçš„é‚£ä¸€åˆ»çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚<br>handleAlertClickå‡½æ•°æ‰§è¡Œçš„é‚£ä¸€åˆ» this.state.likeä¸º 5 æ‰€ä»¥æœ€ç»ˆæ¸²æŸ“çš„æ˜¯5ï¼›<br>è‡³äºç›´æ¥ä½¿ç”¨ this.state.like æœ€ç»ˆæ¸²æŸ“æˆ17 æ˜¯å› ä¸º å¯¹è±¡çš„å¼•ç”¨å¯¼è‡´ã€‚</p><figure class="image-box">                <img src="/image/react/hook.png" alt title class>                <p></p>            </figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é”™è¯¯å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">        arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = foo();</span><br><span class="line"><span class="built_in">console</span>.log(bar[<span class="number">0</span>]());<span class="comment">//2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­£ç¡®å†™æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)&#123;</span><br><span class="line">        arr[i] = (<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">j</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> _j = j;<span class="comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œæ›´å®¹æ˜“ç†è§£</span></span><br><span class="line">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> _j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bar = foo();</span><br><span class="line"><span class="built_in">console</span>.log(bar[<span class="number">0</span>]());<span class="comment">//0</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EnFormåŠ¨æ€è¡¨å•å°è£…</title>
      <link href="/2020/05/01/react_form_design/"/>
      <url>/2020/05/01/react_form_design/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™æ¬¡å°è£…ï¼Œåˆ©ç”¨çš„æ˜¯å·¥ä½œä¹‹ä½™ï¼Œæ—¶é—´éš¾å…å®è´µï¼Œä¸»è¦æ³¨é‡åŠŸèƒ½å®ç°ï¼Œç»†èŠ‚æˆ–ä»£ç é£æ ¼æ²¡æœ‰å¤ªæ³¨é‡ï¼Œè¯·å¿½ç•¥ä¹‹ã€‚</p><h2 id="çŠ¶æ€æå‡çš„è¿ç”¨"><a href="#çŠ¶æ€æå‡çš„è¿ç”¨" class="headerlink" title="çŠ¶æ€æå‡çš„è¿ç”¨"></a>çŠ¶æ€æå‡çš„è¿ç”¨</h2><p>å¸‚é¢ä¸Šçš„formå°è£…ï¼ŒåŸºæœ¬å¥—è·¯éƒ½æ˜¯ï¼Œfieldè®¾ç½®ä¸ºå®Œå…¨å—æ§ç»„ä»¶ï¼Œå°†fieldçŠ¶æ€æå‡è‡³formã€‚<br>è¿™æ˜¯formå°è£…æ–¹æ¡ˆè®¾è®¡çš„å…³é”®ç¬¬ä¸€æ­¥ï¼Œå¦‚æœå°†fieldè®¾ç½®ä¸ºéå—æ§ç»„ä»¶ï¼ŒåæœŸå¾ˆå¤šåŠŸèƒ½å®ç°èµ·æ¥å°†æ¯”è¾ƒéº»çƒ¦ã€‚</p><p>å¾ˆå¤šäººè®¤ä¸ºï¼Œè¿™ä¸ªçŠ¶æ€æå‡ï¼Œå°±åº”è¯¥æ˜¯æå‡åˆ°formçš„stateä¸­ï¼Œå…¶å®ä¸ç„¶ï¼Œè¿™é‡Œåˆå¾ˆå¤šå¥—è·¯ï¼Œè‡ªç„¶ä¹Ÿå°±æœ‰å‡ ç§æ–¹æ¡ˆï¼š</p><h3 id="æ–¹æ¡ˆä¸€ï¼š"><a href="#æ–¹æ¡ˆä¸€ï¼š" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼š"></a>æ–¹æ¡ˆä¸€ï¼š</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>çŠ¶æ€æå‡ï¼ŒçŠ¶æ€å…¨éƒ¨å­˜å‚¨äºformçš„thiså†…ã€‚è€Œéformå†…çš„stateã€‚<br>æ¯æ¬¡field onchangeæ—¶å€™ï¼Œä½¿ç”¨formçš„thisï¼Œè¿›è¡Œ this.forceupdate æˆ–è€… this.setState({});<br>æ–¹æ¡ˆä»£è¡¨ æ˜¯é˜¿é‡Œçš„çš„ <a href="https://github.com/alibaba-fusion/field" target="_blank" rel="noopener">fusion field</a>ï¼Œæºç ä¸å¤šï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹çœ‹ã€‚<br>æˆ‘å€’æ˜¯è§‰å¾— ä»–ä»¬å–fieldè¿™ä¸ªåå­—æ˜¯æœ‰æ­§ä¹‰çš„ï¼Œçœ‹fielçš„æºç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªfieldæ›´åƒä¸€ä¸ªformå±‚é¢ çš„ store+fieldã€‚</p><p>è¿™ç§æ–¹æ¡ˆæœ‰äº›äººæˆ–è®¸ä¼šæ„Ÿè§‰æ¯”è¾ƒæ€ªï¼Œå…¶å®ä¸ç„¶ï¼Œreact-redux å…¶å®æ˜¯è¿™ç§æ–¹æ¡ˆçš„æœ€ä½³å®è·µç€ï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹react-redux æºç ä¸­connectå®ç°ã€‚<br>åœ¨connectä¸­å…¶å®ä¹Ÿæ˜¯å°†çŠ¶æ€å­˜å‚¨äºthisä¸­ï¼Œè€Œéstateä¸­ï¼Œç„¶åé€šè¿‡setStateä¸€ä¸ªç©ºå€¼ï¼Œè§¦å‘renderã€‚</p><p>å¦å¤– å¯¹äº formå°è£…æ—¶ï¼Œè®¾è®¡ä¸€ä¸ªform store æ˜¯ä¸€ç§æ™®éçš„è®¾è®¡æ–¹å¼ã€‚</p><h4 id="ç»å…¸é€»è¾‘æŠ½è±¡åˆ†ç¦»çš„å®è·µ"><a href="#ç»å…¸é€»è¾‘æŠ½è±¡åˆ†ç¦»çš„å®è·µ" class="headerlink" title="ç»å…¸é€»è¾‘æŠ½è±¡åˆ†ç¦»çš„å®è·µ"></a>ç»å…¸é€»è¾‘æŠ½è±¡åˆ†ç¦»çš„å®è·µ</h4><p><a href="https://github.com/alibaba-fusion/field" target="_blank" rel="noopener">fusion field</a>æ˜¯ç»å…¸çš„é€»è¾‘æŠ½è±¡åˆ†ç¦»å®è·µï¼Œä»¥åé‡åˆ°é€»è¾‘æŠ½ç¦»çš„æ—¶å€™ï¼Œå¯ä»¥å‚è€ƒæ­¤æºç çš„å®ç°ã€‚<br>æºç ä¸»è¦æ˜¯è®¢é˜…æ¨¡å¼çš„ä¸€ç§ç»å…¸å®è·µã€‚</p><h3 id="æ–¹æ¡ˆäºŒï¼š"><a href="#æ–¹æ¡ˆäºŒï¼š" class="headerlink" title="æ–¹æ¡ˆäºŒï¼š"></a>æ–¹æ¡ˆäºŒï¼š</h3><p>çŠ¶æ€æå‡ï¼Œå°†çŠ¶æ€å­˜å‚¨äºthisä¸­ï¼Œå¦å¤–ä¸ºäº†è®©formå†…çš„fieldèƒ½å¤Ÿå–åˆ°çŠ¶æ€ï¼Œåœ¨formå†…è®¾ç½®äº†contextï¼Œå¹¶å°†thiså†…çš„stateæ”¾ç½®äºcontextä¸­ï¼Œè®©æ‰€æœ‰çš„å­å…ƒç´ åŒ…æ‹¬fieldéƒ½èƒ½é€šè¿‡contextè·å–çŠ¶æ€ã€‚<br>æ ¸å¿ƒæºç ä¸å¤šï¼Œæœ‰å…´è¶£å¯ä»¥çœ‹çœ‹ã€‚é‡Œé¢å¯¹<br><a href="https://github.com/alibaba-fusion/next/tree/master/src/form" target="_blank" rel="noopener">alibaba-fusion/next/form</a><br>é‡Œé¢ç”¨åˆ°äº†å¯¹äºReactFragmentçš„åˆ¤æ–­è¿™ç‚¹è¿˜æ˜¯æŒºå¥½ï¼Œå¯èƒ½æ˜¯å†å²åŸå› ï¼Œ fusionï¼form å¿…é¡»è¦é…åˆ ä¸Šé¢çš„ fusion fieldä½¿ç”¨ï¼Œä¸ºäº†å®ç°è‡ªç”±æ’åˆ—ï¼Œæºç å½“ä¸­å¤§é‡ä½¿ç”¨äº†React.cloneElementæ¥åšpropsæ³¨å…¥ï¼Œåœ¨formå†…ä½¿ç”¨ä¸€æ¬¡ï¼Œåœ¨fieldå†…åˆä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œä¸”æ˜¯éå†æ€§è´¨ï¼ŒReact.cloneElementå›ºç„¶æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„APIï¼Œå‰åä¸¤æ¬¡å¤§é‡ä½¿ç”¨ï¼Œæ„Ÿè§‰æ¯æ¬¡ fieldçš„onchangeæ¶ˆè€—è¿˜æ˜¯æŒºå¤šã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getNewChildren = <span class="function">(<span class="params">children, props</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">    <span class="keyword">return</span> React.Children.map(children, child =&gt; &#123;</span><br><span class="line">      <span class="comment">//å¯¹äºReactFragmentçš„åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (obj.isReactFragment(child)) &#123;</span><br><span class="line">            <span class="keyword">return</span> getNewChildren(child.props.children, props);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">            child &amp;&amp;</span><br><span class="line">            <span class="keyword">typeof</span> child.type === <span class="string">'function'</span> &amp;&amp;</span><br><span class="line">            child.type._typeMark === <span class="string">'form_item'</span></span><br><span class="line">        ) &#123;</span><br><span class="line">     <span class="comment">// ...</span></span><br><span class="line">            <span class="keyword">return</span> React.cloneElement(child, pickerDefined(childrenProps));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> child;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="æ–¹æ¡ˆä¸‰ï¼š-EnFormä½¿ç”¨æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆä¸‰ï¼š-EnFormä½¿ç”¨æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆä¸‰ï¼š(EnFormä½¿ç”¨æ–¹æ¡ˆ)"></a>æ–¹æ¡ˆä¸‰ï¼š(EnFormä½¿ç”¨æ–¹æ¡ˆ)</h3><p>çŠ¶æ€æå‡ï¼Œå°†çŠ¶æ€å­˜å‚¨äºstateå†…ï¼Œä¸ºäº†å…¼å®¹è‡ªç”±æ’åˆ—ï¼Œå½“formä½¿ç”¨è‡ªç”±æ’åˆ—æ¨¡å¼æ—¶ï¼Œå¯¹formåšcontextï¼Œå°†formçš„stateæ”¾ç½®äºcontextä¸­ä¼ é€’ç»™fieldã€‚<br>è¿™æ˜¯æˆ‘æœ¬æ¬¡formå°è£…çš„æ–¹æ¡ˆï¼Œå› ä¸ºä¸€å¼€å§‹å°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œæ‰€æœ‰å°±æŒ‰è¿™æ ·çš„æ–¹å¼å°è£…äº†ï¼Œ<br>åé¢äº†è§£åˆ°äº†ä¸Šé¢çš„æ–¹æ¡ˆä¸€ã€æ–¹æ¡ˆäºŒï¼Œæ‰€ä»¥ï¼Œå¦‚æœé‡æ–°æ¥è¿‡ï¼Œæˆ‘å¯èƒ½ä¼šå°è¯•å°†çŠ¶æ€æ”¾ç½®äºthisä¸­ï¼Œè®¾è®¡ä¸€æ¬¡ã€‚</p><p>å¦å¤–ä¸Šé¢ä¸¤ç§æ–¹æ¡ˆçš„ä»£è¡¨æ¡†æ¶ fusion field ä¸ alibaba-fusion/next/form ä¹‹æ‰€ä»¥æ²¡èƒ½å¤Ÿå®ç°é…ç½®åŒ–ç”Ÿæˆè¡¨å•ï¼Œä¸»è¦æ˜¯ä»–ä»¬æ— æ³•ä»ä¸šåŠ¡å±‚é¢å¯¹formå†…çš„å„ç§type field æ¯”å¦‚input select è¿›è¡ŒäºŒæ¬¡å°è£…ã€‚<br>è€Œæˆ‘è¿™æ¬¡å°è£…formçš„åŒæ—¶ï¼Œä¹Ÿå°è£…äº†EnInputï¼Œ EnSelectï¼Œæ‰€ä»¥æ”¯æŒäº†é…ç½®åŒ–ç”Ÿæˆè¡¨å•ã€‚</p><h3 id="æ–¹æ¡ˆå››ï¼š"><a href="#æ–¹æ¡ˆå››ï¼š" class="headerlink" title="æ–¹æ¡ˆå››ï¼š"></a>æ–¹æ¡ˆå››ï¼š</h3><p>çŠ¶æ€æå‡ï¼Œå°†çŠ¶æ€å­˜å‚¨ä¸çˆ¶å±‚çš„contextå†…ï¼Œè¿™ç§æ–¹å¼ä¸ çŠ¶æ€å­˜å‚¨äºthisä¸­çš„è®¾è®¡å¥—è·¯ä¸€æ ·ï¼Œä¹Ÿæ˜¯é€šè¿‡this.forceupdateçš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ã€‚<br>contextå€¼ç±»ä¼¼åŸæ¥çš„propsä¸€æ ·ç”¨æ¥æ¸²æŸ“ç»„ä»¶ã€‚</p><h3 id="çŠ¶æ€æå‡å­˜äºthis-é…åˆforceUpdate"><a href="#çŠ¶æ€æå‡å­˜äºthis-é…åˆforceUpdate" class="headerlink" title="çŠ¶æ€æå‡å­˜äºthis é…åˆforceUpdate"></a>çŠ¶æ€æå‡å­˜äºthis é…åˆforceUpdate</h3><p>è¿™ç§æ–¹å¼æ˜¯ æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆäºŒä½¿ç”¨çš„ï¼Œä¹Ÿæ˜¯react-reduxï¼Œè¿™äº›æœ‰åå¼€æºæ¡†æ¶ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä»¥ååœ¨å¼€å‘çš„æ—¶å€™ï¼Œè®¾è®¡å¤æ‚ç»„ä»¶æ—¶ï¼Œè¿™ç§æ–¹å¼ä¸å¤±ä¸ºä¸€ç§é€‰æ‹©ã€‚åº”è¯¥ç†Ÿç»ƒè¿ç”¨å¥½è¿™ç§æ–¹å¼ã€‚</p><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>ç”±ä¸Šå¯çŸ¥ï¼ŒçŠ¶æ€æå‡ï¼Œä¸€èˆ¬æå‡å»çš„åœ°æ–¹æœ‰ä¸‰ä¸ªï¼Œ çˆ¶å±‚çš„ stateï¼Œ çˆ¶å±‚çš„ thisï¼Œ çˆ¶å±‚ çš„contextï¼›<br>æå‡åˆ° çˆ¶å±‚çš„this æˆ– contextä¸Šæ—¶ï¼ŒåŸºæœ¬ä¸Šé€šè¿‡ thisã€‚forceupdate æˆ–è€…setstateä¸€ä¸ªç©ºå€¼è¿›è¡Œæ•´ä¸ªçˆ¶å±‚çš„æ›´æ–°ï¼Œå­å±‚çš„æ‰€æœ‰çŠ¶æ€çš†ä» thisæˆ–contextä¸Šè·å–ã€‚<br>å…¶å®ï¼Œredux æ˜¯è¿™ç§è®¾è®¡æ¨¡å¼çš„æœ€ä½³å®è·µï¼Œ reduxå°±æ˜¯å°†stateç½®äºcontextä¸­ï¼Œæ›´æ–°é‡‡ç”¨react-redux çš„ setStateä¸€ä¸ªç©ºå€¼ã€‚<br>æ‰€ä»¥å°†æ•°æ®å­˜å‚¨ä¸thisæˆ–contextä¸Šï¼Œæ¸²æŸ“ç»„ä»¶çš„æ–¹å¼ï¼Œæœ¬è´¨ä¸Šä¸ç»„ä»¶é€šè¿‡propsæ¥æ¸²æŸ“ï¼Œæ²¡æœ‰å¤§ä¸åŒã€‚</p><p>ä¸‹é¢æ˜¯formä»‹ç»ä¸€äº›formåŠŸèƒ½çš„ç»†èŠ‚åˆ†æä¸å®ç°ï¼š</p><h2 id="formçš„ä¸‰ä¸ªstate"><a href="#formçš„ä¸‰ä¸ªstate" class="headerlink" title="formçš„ä¸‰ä¸ªstate"></a>formçš„ä¸‰ä¸ªstate</h2><p>æ²¡æœ‰å°è£…formå‰ï¼Œå¯èƒ½ä»¥ä¸ºformæœ‰å¾ˆå¤šä¸ƒä¸ƒå…«å…«çš„çŠ¶æ€ï¼Œå…¶å®ï¼Œformå°±ä¸‰ä¸ªçŠ¶æ€éœ€è¦ç»´æŠ¤ï¼Œå°±å¯ä»¥åŸºæœ¬è¦†ç›–formç»å¤§éƒ¨åˆ†åŠŸèƒ½ç‚¹ï¼Œ<br>è¿™å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„çŠ¶æ€æå‡åçš„ä¸‰ä¸ªçŠ¶æ€ï¼š</p><ul><li>errMsgs â€“ ç”¨æ¥æ§åˆ¶é”™è¯¯ä¿¡æ¯</li><li>formValue  â€“ ç”¨æ¥æ§åˆ¶form valueå€¼</li><li>formDisplay  â€“ ç”¨æ¥æ§åˆ¶fieldçš„æ˜¾ç¤ºã€éšè—ã€åˆ é™¤ã€readonlyã€disabledï¼Œä¹‹æ‰€ä»¥æŠŠè¿™ä¸ªæ˜¾ç¤ºä¿¡æ¯çš„çŠ¶æ€<br>ç”±fieldæå‡åˆ°formä¸Šï¼Œå› ä¸ºæå‡åˆ°formåï¼Œæ‰€æœ‰çš„filedéƒ½èƒ½å…±äº«è¿™ä¸€ä¿¡æ¯ï¼Œå¹¶ä¸”ä¿®æ”¹ï¼›</li></ul><h2 id="è®¤è¯†è¡¨å•ä¸­çš„å…ƒç´ "><a href="#è®¤è¯†è¡¨å•ä¸­çš„å…ƒç´ " class="headerlink" title="è®¤è¯†è¡¨å•ä¸­çš„å…ƒç´ "></a>è®¤è¯†è¡¨å•ä¸­çš„å…ƒç´ </h2><h3 id="æ“ä½œformæ•°æ®çš„"><a href="#æ“ä½œformæ•°æ®çš„" class="headerlink" title="æ“ä½œformæ•°æ®çš„"></a>æ“ä½œformæ•°æ®çš„</h3><p>è¿™ç±»fieldä¼šæ”¹å˜form valueå€¼ï¼ŒåŒ…å«å¸¸è§„ä¸è‡ªå®šä¹‰ fieldã€‚</p><h4 id="å¸¸è§„field"><a href="#å¸¸è§„field" class="headerlink" title="å¸¸è§„field"></a>å¸¸è§„field</h4><h4 id="è‡ªå®šä¹‰field"><a href="#è‡ªå®šä¹‰field" class="headerlink" title="è‡ªå®šä¹‰field"></a>è‡ªå®šä¹‰field</h4><h3 id="ä¾èµ–formæ•°æ®åšæ“ä½œçš„"><a href="#ä¾èµ–formæ•°æ®åšæ“ä½œçš„" class="headerlink" title="ä¾èµ–formæ•°æ®åšæ“ä½œçš„"></a>ä¾èµ–formæ•°æ®åšæ“ä½œçš„</h3><p>æ¯”å¦‚éœ€è¦æ ¹æ®æœ€æ–°form value ï¼Œè¿›è¡Œå‘é€è¯·æ±‚çš„fieldã€‚<br>è¿™éƒ¨åˆ†å…ƒç´  ä¸ä¼šæ”¹å˜formå€¼ï¼Œä½†éœ€è¦çŸ¥é“formçš„å€¼åšæ“ä½œã€‚<br>è¿™ç±»å¯ä»¥å®šä¹‰ä¸ºè‡ªå®šä¹‰fieldã€‚ä½¿ç”¨configçš„Renderå®ç°ã€‚</p><h3 id="ä¸formæ— æ•°æ®äº¤äº’"><a href="#ä¸formæ— æ•°æ®äº¤äº’" class="headerlink" title="ä¸formæ— æ•°æ®äº¤äº’"></a>ä¸formæ— æ•°æ®äº¤äº’</h3><p>æ¯”å¦‚formçš„titleï¼Œæˆ–è€…ä¸€äº›æç¤ºè¯­å¥ï¼Œåˆ†å‰²çº¿ï¼Œicon ç­‰ç­‰ã€‚<br>è¿™ç±»å…ƒç´ ï¼Œæ ¹æ®æƒ…å†µï¼Œå¯ä»¥å®šä¹‰ä¸ºè‡ªå®šä¹‰fieldï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªç”±æ’åˆ—æ¨¡å¼ä¸‹formå®ç°ã€‚</p><h2 id="å•ç‹¬æå–Field"><a href="#å•ç‹¬æå–Field" class="headerlink" title="å•ç‹¬æå–Field"></a>å•ç‹¬æå–Field</h2><p>æ— è®ºæ˜¯å¸¸è§„fieldè¿˜æ˜¯è‡ªå®šä¹‰fieldï¼Œå¯èƒ½åšçš„äº‹æƒ…ï¼Œéƒ½ä¸ä¸ä¸Šé¢çš„formçš„ä¸‰ä¸ªçŠ¶æ€æœ‰å…³ï¼š</p><h3 id="å¸¸è§„fieldåšçš„äº‹æƒ…"><a href="#å¸¸è§„fieldåšçš„äº‹æƒ…" class="headerlink" title="å¸¸è§„fieldåšçš„äº‹æƒ…"></a>å¸¸è§„fieldåšçš„äº‹æƒ…</h3><ul><li>è®¾ç½®formçš„æ–°çš„valueå€¼ï¼›</li><li>è®¾ç½®formçš„æ–°çš„éªŒè¯errorä¿¡æ¯ï¼›</li></ul><h3 id="è‡ªå®šä¹‰fieldåšçš„äº‹æƒ…"><a href="#è‡ªå®šä¹‰fieldåšçš„äº‹æƒ…" class="headerlink" title="è‡ªå®šä¹‰fieldåšçš„äº‹æƒ…"></a>è‡ªå®šä¹‰fieldåšçš„äº‹æƒ…</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><ul><li>è®¾ç½®formçš„æ–°çš„valueå€¼ï¼›</li><li>è®¾ç½®formçš„æ–°çš„éªŒè¯errorä¿¡æ¯ï¼›</li><li>éšè—(åˆ é™¤)ï¼æ˜¾ç¤ºfieldï¼Œ readonlyï¼disable fieldï¼›</li></ul><h4 id="å…³äºéªŒè¯çš„æ€è€ƒ"><a href="#å…³äºéªŒè¯çš„æ€è€ƒ" class="headerlink" title="å…³äºéªŒè¯çš„æ€è€ƒ"></a>å…³äºéªŒè¯çš„æ€è€ƒ</h4><p>ç”±äºéªŒè¯æ˜¯ä»¥valueçš„å‚è€ƒæ ‡å‡†çš„ï¼Œä¸ä¼šè€ƒè™‘è¯¥ç»„ä»¶æ˜¯å¦ä¸ºè‡ªå®šä¹‰æˆ–æ ‡å‡†ç»„ä»¶ï¼Œæ‰€ä»¥è‡ªå®šä¹‰ç»„ä»¶çš„éªŒè¯ï¼ŒåŸºæœ¬ä¸Šä¸ç”¨é‡æ–°è®¾è®¡ï¼Œå¥—ç”¨æ•´ä½“çš„éªŒè¯å³å¯ï¼›</p><h3 id="æ¯ä¸ªfieldçš„nameå”¯ä¸€æ€§"><a href="#æ¯ä¸ªfieldçš„nameå”¯ä¸€æ€§" class="headerlink" title="æ¯ä¸ªfieldçš„nameå”¯ä¸€æ€§"></a>æ¯ä¸ªfieldçš„nameå”¯ä¸€æ€§</h3><h2 id="validate"><a href="#validate" class="headerlink" title="validate"></a>validate</h2><h3 id="filed-çš„ruleå¯èƒ½æœ‰å¤šä¸ª"><a href="#filed-çš„ruleå¯èƒ½æœ‰å¤šä¸ª" class="headerlink" title="filed çš„ruleå¯èƒ½æœ‰å¤šä¸ª"></a>filed çš„ruleå¯èƒ½æœ‰å¤šä¸ª</h3><p>å› ä¸ºæœ‰å¤šä¸ªï¼Œæ‰€ä»¥æ¯ä¸ªfieldçš„validateåº”è¯¥æ˜¯éå†çš„æ–¹å¼å»éªŒè¯æ¯ä¸ªruleã€‚</p><h3 id="validate-å¢åŠ ç›¸å…³è”æ˜ å°„-filed-æ£€æµ‹"><a href="#validate-å¢åŠ ç›¸å…³è”æ˜ å°„-filed-æ£€æµ‹" class="headerlink" title="validate å¢åŠ ç›¸å…³è”æ˜ å°„ filed æ£€æµ‹"></a>validate å¢åŠ ç›¸å…³è”æ˜ å°„ filed æ£€æµ‹</h3><p>ç›®å‰è§‰å¾—æœ€ä¼˜è§£æ–¹æ¡ˆæ˜¯å®šä¹‰è‡ªå®šä¹‰validateçš„æ—¶å€™ï¼Œå†™æ˜ä¾èµ–çš„ç»„ä»¶ï¼›<br>ä¸¤ä¸ªç›¸äº’ä¾èµ–æ£€æµ‹çš„ç»„ä»¶ï¼Œéƒ½æŒ‰å¸¸è§„å®šä¹‰å¥½éªŒè¯æ–¹æ³•å’Œä¾èµ–ç»„ä»¶ï¼Œè™½ç„¶éªŒè¯æ–¹æ³•å¯èƒ½æ˜¯äº’æ–¥ï¼›<br>ä½†è€ƒè™‘åˆ°ä¾èµ–çš„å…³ç³»å¯èƒ½å¹¶éä¸¤ä¸ªfieldçš„å…³ç³»ï¼Œå¯èƒ½æ˜¯ä¸‰ä¸ªfieldï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒéªŒè¯æ–¹æ³•å¯èƒ½ä¸ä¼šæ˜¯äº’æ–¥å…³ç³»ï¼›<br>æ­¤æ—¶å°±éœ€è¦æœ€åæŒ‰å¸¸è§„æ¯ä¸ªfieldä¸‹éƒ½å®šä¹‰å¥½éªŒè¯æ–¹æ³•ã€‚<br>è€Œä¸”è¿™ç§è‡ªå®šä¹‰æ–¹å¼ä¸ä¼šå‡ºç°å¾ˆå¤šï¼Œæ‰€ä»¥æ²¡å¿…è¦åšä¸€å±‚äº’æ–¥ä¼˜åŒ–ã€‚<br>ç›¸å…³æ–¹æ³•ä¸ºæºç ä¸­çš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValidateHelper</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(formConfig)&#123;</span><br><span class="line">            <span class="keyword">this</span>.relateFieldMaps = <span class="keyword">this</span>.getRelateFieldMap(formConfig);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ValidateHelper.instance;</span><br><span class="line">    &#125;</span><br><span class="line">    getRelateFieldMap = <span class="function">(<span class="params">formConfig</span>)=&gt;</span>&#123;</span><br><span class="line">  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>è‡ªå®šä¹‰è§„åˆ™å†™æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;   <span class="attr">name</span>: <span class="string">'region'</span>,</span><br><span class="line">    title: <span class="string">'region'</span>,</span><br><span class="line">    type: <span class="string">'select'</span>,</span><br><span class="line">    defaultValue:<span class="string">''</span>,</span><br><span class="line">    validate:[</span><br><span class="line">        [</span><br><span class="line">            (value,formValue)=&gt;&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">String</span>(value).length&lt; <span class="built_in">String</span>(formValue[<span class="string">'useName'</span>]).length)&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="string">'no small useName'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">            &#125;, </span><br><span class="line">            <span class="comment">//å¸Œæœ›åŒæ—¶éªŒè¯ useName çš„éªŒè¯è§„åˆ™</span></span><br><span class="line">            [<span class="string">'useName'</span>]</span><br><span class="line">         ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure></p><h3 id="validate-form-ä¸-fieldçš„ä¸åŒ"><a href="#validate-form-ä¸-fieldçš„ä¸åŒ" class="headerlink" title="validate form ä¸ fieldçš„ä¸åŒ"></a>validate form ä¸ fieldçš„ä¸åŒ</h3><p>validate formçš„æ—¶å€™ï¼Œæ˜¯å¯¹æ‰€æœ‰fieldçš„å…¨é‡éªŒè¯ï¼Œä¸éœ€è¦è€ƒè™‘æ¯ä¸ªfieldéªŒè¯çš„ä¾èµ–æ˜ å°„å…³ç³»ï¼›<br>å•ä¸ªfield onchange éªŒè¯çš„æ—¶å€™ï¼Œè€ƒè™‘æ€§èƒ½ï¼Œä¸å¯¹æ•´ä¸ªformè¿›è¡Œæ£€æµ‹ï¼Œè€Œåªæ£€æµ‹å½“å‰fieldçš„è§„åˆ™ å’Œ ä¸fieldéªŒè¯æœ‰å…³è”æ˜ å°„å…³ç³»çš„fieldçš„éªŒè¯ã€‚</p><h3 id="éªŒè¯è§¦å‘ç­–ç•¥"><a href="#éªŒè¯è§¦å‘ç­–ç•¥" class="headerlink" title="éªŒè¯è§¦å‘ç­–ç•¥"></a>éªŒè¯è§¦å‘ç­–ç•¥</h3><h4 id="å³æ—¶éªŒè¯-EnFormä½¿ç”¨çš„ç­–ç•¥"><a href="#å³æ—¶éªŒè¯-EnFormä½¿ç”¨çš„ç­–ç•¥" class="headerlink" title="å³æ—¶éªŒè¯ (EnFormä½¿ç”¨çš„ç­–ç•¥)"></a>å³æ—¶éªŒè¯ (EnFormä½¿ç”¨çš„ç­–ç•¥)</h4><p>å½“formæ²¡æœ‰submitæ—¶å€™ï¼Œä¸éªŒè¯ï¼Œsubmitåï¼Œå¼€å§‹éªŒè¯ï¼Œç„¶åä»¥åæ¯æ¬¡field onchangeéƒ½éªŒè¯ã€‚</p><h4 id="å¤±ç„¦éªŒè¯"><a href="#å¤±ç„¦éªŒè¯" class="headerlink" title="å¤±ç„¦éªŒè¯"></a>å¤±ç„¦éªŒè¯</h4><p>å¦‚é¢˜ã€‚</p><h4 id="å¼€å¯éªŒè¯çš„å¼€å…³"><a href="#å¼€å¯éªŒè¯çš„å¼€å…³" class="headerlink" title="å¼€å¯éªŒè¯çš„å¼€å…³"></a>å¼€å¯éªŒè¯çš„å¼€å…³</h4><p>è¿™ä¸ªæ ¹æ®é¡¹ç›®éœ€æ±‚æ¥å®šï¼Œæœ‰äº›é¡¹ç›®æ˜¯ä¸Šé¢è¯´çš„å³æ—¶éªŒè¯ï¼Œæ²¡æœ‰submitå‰ï¼Œä¸è¿›è¡ŒéªŒè¯ã€‚<br>æœ‰äº›é¡¹ç›®ä¸æ˜“submitä¸ºå‡†ï¼Œå½“è¡¨å•æ‰“å¼€æ—¶ä¸éªŒè¯ï¼Œå½“å…‰æ ‡focus ä¸€ä¸ªfieldï¼Œç„¶åè§¦å‘onblurçš„æ—¶å€™ï¼Œå°±è¿›è¡ŒéªŒè¯ï¼Œæ— è®ºsubmitä¸å¦ã€‚<br>ç®€å•çš„è¯´ï¼Œæœ‰äº›ä»¥submitå¼€å¯éªŒè¯ï¼Œæœ‰äº›ç›´æ¥ä»¥onlburå¼€å¯éªŒè¯ã€‚</p><p>å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œå®šåˆ¶éªŒè¯è§¦å‘æœºåˆ¶ã€‚</p><h2 id="field-typeç»„ä»¶äºŒæ¬¡å°è£…"><a href="#field-typeç»„ä»¶äºŒæ¬¡å°è£…" class="headerlink" title="field typeç»„ä»¶äºŒæ¬¡å°è£…"></a>field typeç»„ä»¶äºŒæ¬¡å°è£…</h2><p>å¦‚ä¸Šé¢ã€ŠçŠ¶æ€æå‡çš„è¿ç”¨  â€“  æ–¹æ¡ˆä¸‰ã€‹åˆ†æçš„ï¼Œè¿™æ˜¯å®ç°config é…ç½®åŒ–çš„ä¸´é—¨ä¸€è„š ä¸å¯æˆ–ç¼ºä¸€æ­¥ã€‚</p><h2 id="é»˜è®¤æ’ç‰ˆæ ·å¼"><a href="#é»˜è®¤æ’ç‰ˆæ ·å¼" class="headerlink" title="é»˜è®¤æ’ç‰ˆæ ·å¼"></a>é»˜è®¤æ’ç‰ˆæ ·å¼</h2><p>é»˜è®¤æ’ç‰ˆçš„è®¾è®¡ï¼Œç»“åˆäº†ä¸€äº›å·¥ä½œç»éªŒï¼Œå½“è¶…è¿‡8ä¸ªfieldæ—¶ï¼Œä¼šåŠ ä¸€åˆ—å®ç°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getColumnLength = <span class="function">(<span class="params">length, rows</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> columnLength = length/rows;</span><br><span class="line">  <span class="keyword">const</span> num = length%rows;</span><br><span class="line">  <span class="keyword">if</span>(num === <span class="number">0</span>) <span class="keyword">return</span> columnLength;</span><br><span class="line">  <span class="keyword">if</span>(length &gt; rows*columnLength) <span class="keyword">return</span> columnLength+<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> columnLength;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// eslint-disable-next-line import/prefer-default-export</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getLayout = <span class="function">(<span class="params">fields, rowsLength</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> columnLength = getColumnLength(fields.length, rowsLength);</span><br><span class="line">  <span class="keyword">const</span> layouts = [];</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span>(index &lt; columnLength)&#123;</span><br><span class="line">    <span class="keyword">const</span> lastIndex = rowsLength*(index+<span class="number">1</span>)<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(index === columnLength <span class="number">-1</span> ) lastIndex = fields.length<span class="number">-1</span>;</span><br><span class="line">    layouts.push(</span><br><span class="line">      &lt;section className=<span class="string">"column"</span> key=&#123;index&#125;&gt;</span><br><span class="line">        &#123;fields.slice(rowsLength*index, lastIndex)&#125;</span><br><span class="line">      &lt;<span class="regexp">/section&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">    index++;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  return layouts;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="æºç ä¸demo"><a href="#æºç ä¸demo" class="headerlink" title="æºç ä¸demo"></a>æºç ä¸demo</h2><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/context-form/src/components/EnForm" target="_blank" rel="noopener">github EnFormæºç </a></p><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/context-form" target="_blank" rel="noopener">github demo</a></p><h2 id="reactä¸­çš„è¡¨å•å¤„ç†"><a href="#reactä¸­çš„è¡¨å•å¤„ç†" class="headerlink" title="reactä¸­çš„è¡¨å•å¤„ç†"></a>reactä¸­çš„è¡¨å•å¤„ç†</h2><p>è¿™é‡Œæ˜¯ä¹‹å‰æ•´ç†çš„ä¸€ç¯‡ å…³äº è¡¨å•å¤„ç†çš„åšå®¢ï¼ŒåŒæ ·å¯¹å°è£…è¡¨å•å…·æœ‰å‚è€ƒä»·å€¼ã€‚<br><a href="https://yewills.github.io/2020/04/24/react_form/">reactä¸­çš„è¡¨å•å¤„ç†</a></p><h2 id="æ”¾å¼ƒçš„æ–¹æ¡ˆ"><a href="#æ”¾å¼ƒçš„æ–¹æ¡ˆ" class="headerlink" title="æ”¾å¼ƒçš„æ–¹æ¡ˆ"></a>æ”¾å¼ƒçš„æ–¹æ¡ˆ</h2><p>ä¸ºäº†å®ç°åˆèƒ½é…ç½®åŒ–ï¼Œåˆèƒ½è‡ªç”±æ’åˆ—ï¼Œæƒ³äº†å¾ˆå¤šæ–¹æ¡ˆï¼Œåˆšå¼€å§‹ç”¨çš„ React.cloneElement æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œä¸è¿‡å±€é™æ€§æ¯”è¾ƒå¤šï¼Œè¿™ä¸ªæ–¹æ¡ˆçš„äº®ç‚¹åœ¨äºï¼Œ<br>ä¸ä»…é€šè¿‡ React.cloneElement æ”¹å˜äº†å½“å‰å…ƒç´ çš„propsï¼Œè€Œä¸”æ‰¾åˆ°äº†ä¸€ç§é€šè¿‡React.cloneElementæ”¹å˜å½“å‰å…ƒç´ çš„å­å…ƒç´ çš„propsçš„æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯è¿™ä¸€æ–¹æ¡ˆçš„ä¸€äº›åˆ†æï¼Œæƒå½“çµæ„Ÿå¼çš„å¤´è„‘é£æš´ï¼š</p><h3 id="æœ‰é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€"><a href="#æœ‰é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€" class="headerlink" title="æœ‰é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€"></a>æœ‰é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€</h3><h4 id="fieldæœ€å¤šåªèƒ½åœ¨åœ¨ç¬¬äºŒå±‚"><a href="#fieldæœ€å¤šåªèƒ½åœ¨åœ¨ç¬¬äºŒå±‚" class="headerlink" title="fieldæœ€å¤šåªèƒ½åœ¨åœ¨ç¬¬äºŒå±‚"></a>fieldæœ€å¤šåªèƒ½åœ¨åœ¨ç¬¬äºŒå±‚</h4><p>å¦‚æœè¦ä½¿ç”¨formè‡ªå¸¦ï¼ˆå«è‡ªå®šä¹‰ï¼‰çš„fieldï¼Œå°±å¿…é¡»ä½¿ç”¨å°†fieldæ”¾åœ¨æœ€å¤šç¬¬äºŒå±‚çº§ä¸Šï¼Œ<br>å¦åˆ™formå†…å°†ä¸è¯†åˆ«ï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div &gt;</span><br><span class="line">    &lt;EnForm.Field className=<span class="string">"form-cell"</span> enfield name=<span class="string">"editname"</span> /&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;p&gt;å¤©è‹¥æœ‰æƒ…å¤©äº¦è€&lt;/</span>p&gt;</span><br><span class="line">  &lt;EnForm.Field className=<span class="string">"form-cell"</span> enfield name=<span class="string">"useName"</span> /&gt;</span><br><span class="line">  &lt;div className=<span class="string">"region"</span>&gt;</span><br><span class="line">    &lt;div&gt;test&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;EnForm.Field className="form-cell" enfield name="region" /</span>&gt;</span><br><span class="line">    &lt;div&gt;test&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;EnForm.Field className="form-cell" enfield name="passWord" /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;EnForm.Field className="form-cell" enfield name="select" /</span>&gt;</span><br></pre></td></tr></table></figure></p><p>é€»è¾‘å®ç°å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">content = children.map(<span class="function">(<span class="params">cell, index</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cell.props.enfield)&#123;</span><br><span class="line">      <span class="keyword">return</span> React.cloneElement(cell,  getProps(cell.props))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> cellChilds = toArray(cell.props.children);</span><br><span class="line">    <span class="keyword">if</span>(!cellChilds.find(<span class="function"><span class="params">t</span>=&gt;</span> _.get(t,<span class="string">'props.enfield'</span>))) <span class="keyword">return</span> cell;</span><br><span class="line">    <span class="keyword">const</span> newChildren = cellChilds.map(<span class="function">(<span class="params">t</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(_.get(t,<span class="string">'props.enfield'</span>))&#123;</span><br><span class="line">        <span class="keyword">return</span> React.cloneElement(t,  getProps(t.props))</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> t;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> React.cloneElement(cell, &#123;...cell.props, <span class="attr">children</span>:newChildren, <span class="attr">key</span>:index&#125;);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure></p><h4 id="ä¸ºä»€ä¹ˆä¸è¦è¶…è¿‡ä¸¤å±‚"><a href="#ä¸ºä»€ä¹ˆä¸è¦è¶…è¿‡ä¸¤å±‚" class="headerlink" title="ä¸ºä»€ä¹ˆä¸è¦è¶…è¿‡ä¸¤å±‚"></a>ä¸ºä»€ä¹ˆä¸è¦è¶…è¿‡ä¸¤å±‚</h4><p>è¿™ä¸ªæ€è·¯å°±è·Ÿreact hooksï¼Œå¿…é¡»å®šä¹‰åœ¨é¡¶å±‚ä¸€æ ·ï¼Œ<br>å¤ªå¤šé€’å½’éå†æ˜¯æ¶ˆè€—æ€§èƒ½çš„ï¼Œè€Œä¸”å®šä¹‰åœ¨ä¸¤å±‚ï¼ŒåŸºæœ¬ä¸Šè¾¾åˆ°äº†ç™¾åˆ†ä¹‹ä¹åä»¥ä¸Šçš„è‡ªç”±æ’åˆ—fieldçš„éœ€æ±‚ã€‚<br>å‰©ä¸‹ç™¾åˆ†ä¹‹åä¸åˆ°çš„ï¼Œå°±ä¸ç”¨ç®¡äº†ã€‚</p><h4 id="å¯ä»¥è¶…è¿‡ä¸¤å±‚å®šä¹‰fieldå—"><a href="#å¯ä»¥è¶…è¿‡ä¸¤å±‚å®šä¹‰fieldå—" class="headerlink" title="å¯ä»¥è¶…è¿‡ä¸¤å±‚å®šä¹‰fieldå—"></a>å¯ä»¥è¶…è¿‡ä¸¤å±‚å®šä¹‰fieldå—</h4><p>åŸåˆ™ä¸Šæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¼šå¯¼è‡´æ·±åº¦copyçš„é—®é¢˜ï¼Œå¯èƒ½å°±ä¼šæ¶ˆè€—æ€§èƒ½ï¼Œè¿™æ ·å°±æ²¡æœ‰å¿…è¦äº†ï¼Œ<br>æ­¤æ—¶ä¸å¦‚æ‰‹å†™ä¸€ç‰ˆformã€‚</p><h3 id="æ— é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€"><a href="#æ— é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€" class="headerlink" title="æ— é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€"></a>æ— é™åº¦çš„è‡ªç”±æ’åˆ—å¸ƒå±€</h3><p>å°†ä»»æ„æƒ³æ’åˆ—çš„æ ·å­å®šä¹‰åœ¨è‡ªå®šä¹‰fieldå†…ï¼Œå†é…åˆæœ‰é™åº¦è‡ªç”±æ’åˆ—çš„æ–¹æ¡ˆï¼Œ<br>å¯è½»æ˜“è¾¾åˆ°å¤§éƒ¨åˆ†çš„è‡ªç”±æ’åˆ—éœ€æ±‚ã€‚</p><h3 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h3><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/blog-form" target="_blank" rel="noopener">github</a></p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> form </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EnFormåŠ¨æ€è¡¨å•çš„ä½¿ç”¨</title>
      <link href="/2020/05/01/react_form_usage/"/>
      <url>/2020/05/01/react_form_usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è¿™äº›å¹´åšreactï¼Œæ·±å—formä½¿ç”¨éº»çƒ¦çš„è‹¦ï¼Œæœ€åå‘ç°åŠ¨æ€é…ç½®åŒ–è¡¨å•æ˜¯formä½¿ç”¨çš„æ­£ç¡®å§¿åŠ¿ï¼Œé«˜æ•ˆï¼Œæ˜“è¯»ï¼Œæ˜“ç»´æŠ¤ã€‚<br>ç»“åˆè‡ªå·±çš„å·¥ä½œç»éªŒï¼ŒèŠ±äº†ä¸€ä¸ªå¤šæ˜ŸæœŸæ‰‹å†™äº†ä¸€ç‰ˆ formçš„äºŒæ¬¡å°è£…ã€‚<br>äºŒæ¬¡å°è£…æœ€éš¾çš„æ˜¯æ–¹æ¡ˆè®¾è®¡å’Œå®ç°ï¼Œæ ·å¼æ˜¯æœ€ç®€å•çš„äº†ï¼Œæ¯ä¸ªå…¬å¸æ ·å¼éœ€æ±‚å„ä¸åŒï¼Œæœ¬æ¬¡å°è£…å°±ä¸æ¶‰åŠæ ·å¼äº†ï¼Œåªä¸“æ³¨åŠŸèƒ½å®ç°ã€‚<br>æ ¸å¿ƒæºç è¡Œæ•°ä¸å¤šï¼Œå¦‚æœæœ‰å…´è¶£ï¼Œç›´æ¥å»githubä¸Šï¼Œä¸‹è½½æºç çœ‹çœ‹ï¼Œä¸‹é¢æœ‰è¿æ¥ã€‚</p><h2 id="é»˜è®¤ç”¨æ³•"><a href="#é»˜è®¤ç”¨æ³•" class="headerlink" title="é»˜è®¤ç”¨æ³•"></a>é»˜è®¤ç”¨æ³•</h2><p>è¿™ç§ç”¨æ³•ä½¿ç”¨enformæä¾›çš„é»˜è®¤æ ·å¼ã€‚<br>é»˜è®¤ä»ä¸Šåˆ°ä¸‹æ’åˆ—ã€‚é»˜è®¤è¡¨å•è¶…è¿‡8ä¸ªfieldä¼šè¿›è¡Œåˆ†æ ï¼›ä½ ä¹Ÿå¯ä»¥è‡ªå®šè®¾ç½®æ¯åˆ—æ˜¾ç¤ºçš„fieldæ•°ç›®ã€‚<br>åœ¨config.jsä¸­è®¾ç½®å¥½ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;EnForm</span><br><span class="line">    title=<span class="string">"åŠ¨æ€è¡¨å•"</span></span><br><span class="line">    config=&#123;formConfig&#125;</span><br><span class="line">    onSubmit=&#123;onSubmit&#125;</span><br><span class="line">  /&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config.js</span></span><br><span class="line"><span class="keyword">import</span> CustomInput <span class="keyword">from</span> <span class="string">'./component/CustomInput'</span>;</span><br><span class="line"><span class="keyword">const</span> formConfig = &#123;</span><br><span class="line">  fields: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'editname'</span>,</span><br><span class="line">      defaultValue: <span class="string">'test'</span>,</span><br><span class="line">      title: <span class="string">'edit user name'</span>,</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰field</span></span><br><span class="line">      Render: CustomInput,</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™</span></span><br><span class="line">      validate: [</span><br><span class="line">        [<span class="function">(<span class="params">value, formValue</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">String</span>(value).length &gt; <span class="built_in">String</span>(formValue.region).length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'hellow region'</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">          <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™æ˜ å°„åŠŸèƒ½</span></span><br><span class="line">        &#125;, [<span class="string">'region'</span>]]</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™errorä¿¡æ¯</span></span><br><span class="line">      required: <span class="string">'this is required'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">name</span>: <span class="string">'region'</span>,</span><br><span class="line">      title: <span class="string">'region'</span>,</span><br><span class="line">      type: <span class="string">'input'</span>,</span><br><span class="line">      defaultValue: <span class="string">''</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> formConfig;</span><br></pre></td></tr></table></figure><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/form-demo" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†demo</a></p><h2 id="è‡ªç”±æ’åˆ—"><a href="#è‡ªç”±æ’åˆ—" class="headerlink" title="è‡ªç”±æ’åˆ—"></a>è‡ªç”±æ’åˆ—</h2><p>å¦‚æœä½ æ—¢æƒ³é…ç½®åŒ–ç”Ÿæˆè¡¨å•ï¼Œåˆæƒ³è‡ªç”±æ’åˆ—fieldçš„ä½ç½®ï¼Œåˆæƒ³åœ¨formè¡¨å•ä¸­æ’å…¥ä»»æ„å†…å®¹ï¼Œä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œ<br>è¿™ä¹Ÿæ˜¯Enformçš„äº®ç‚¹äº†,<br><code>EnForm.EnField</code>ä¸­å®šä¹‰çš„name è¦ä¸ config.jsä¸­çš„nameä¸€è‡´ä»è€Œä¿æŒä¸€ç§æ˜ å°„å…³ç³»ã€‚<br>åŒæ—¶å®šä¹‰<code>layoutMode=&quot;custom&quot;</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;EnForm</span><br><span class="line">    title=<span class="string">"ç™»å½•"</span></span><br><span class="line">    config=&#123;formConfig&#125;</span><br><span class="line">    onSubmit=&#123;onSubmit&#125;</span><br><span class="line">    layoutMode=<span class="string">"custom"</span></span><br><span class="line">  &gt;</span><br><span class="line">    &lt;div &gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          éšæ„æ’åˆ—,ä»»æ„å†™å…¥å†…å®¹</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;EnForm.EnField className="form-cell" name="editname" /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;hellow world&lt;/</span>p&gt;</span><br><span class="line">    &lt;EnForm.EnField className=<span class="string">"form-cell"</span> name=<span class="string">"useName"</span> /&gt;</span><br><span class="line">    &lt;div className=<span class="string">"region"</span>&gt;</span><br><span class="line">      &lt;div&gt;ä»»æ„ä½ç½®&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;EnForm.EnField className="form-cell" name="region" /</span>&gt;</span><br><span class="line">      &lt;div&gt;è‡ªç”±æ”¾ç½®&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;EnForm.EnField className="form-cell" name="passWord" /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;EnForm.EnField className="form-cell" name="select" /</span>&gt;</span><br><span class="line">  &lt;<span class="regexp">/EnForm&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//config.js</span></span><br><span class="line"><span class="comment">//ä¸ä¸Šé¢ã€Šé»˜è®¤ç”¨æ³•ã€‹çš„config.jsä¸€æ ·</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/context-form" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†demo</a></p><h2 id="è”åŠ¨"><a href="#è”åŠ¨" class="headerlink" title="è”åŠ¨"></a>è”åŠ¨</h2><p>å¦‚æœç»„ä»¶é—´éœ€è¦è”ç³»ï¼Œè®¾ç½®èµ·æ¥ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿çš„, åœ¨config.jsä¸­ï¼Œå°†è”åŠ¨ç»„ä»¶å®šä¹‰ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæ¯ä¸ªè‡ªå®šä¹‰ç»„ä»¶éƒ½å°†è·å¾—ä¿®æ”¹formä¸‰è¦ç´  form valueï¼Œ form validate error msgsï¼Œ form field display çš„èƒ½åŠ›ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formConfig = &#123;</span><br><span class="line">  fields: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">'editname'</span>,</span><br><span class="line">      defaultValue: <span class="string">'test'</span>,</span><br><span class="line">      title: <span class="string">'edit user name'</span>,</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰field</span></span><br><span class="line">      Render: CustomInput,</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™</span></span><br><span class="line">      validate: [</span><br><span class="line">        [<span class="function">(<span class="params">value, formValue</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="built_in">String</span>(value).length &gt; <span class="built_in">String</span>(formValue.region).length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">'hellow region'</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">          <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™æ˜ å°„åŠŸèƒ½</span></span><br><span class="line">        &#125;, [<span class="string">'region'</span>]]</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">//æ”¯æŒè‡ªå®šä¹‰éªŒè¯è§„åˆ™errorä¿¡æ¯</span></span><br><span class="line">      required: <span class="string">'this is required'</span></span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CustomInput</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props) =&gt; &#123;</span><br><span class="line">  <span class="comment">//onChange è®¾ç½®æ–°çš„formå€¼</span></span><br><span class="line">  <span class="comment">//setDisplay è®¾ç½®formå†…ä»»ä½•å†…å®¹ æ˜¾ç¤ºï¼éšè—ï¼readonly ç­‰æ˜¾ç¤ºçš„ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">//setErrMsgs è®¾ç½®æ–°çš„form errorå€¼</span></span><br><span class="line">  <span class="keyword">const</span> &#123; value, <span class="attr">onChange</span>: propsOnChange, setDisplay, setErrMsgs &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> getNewFormValue = <span class="function">(<span class="params">value, field, &#123;formValue&#125;</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; ...formValue, [field.name]: value, <span class="attr">passWord</span>:<span class="string">`<span class="subst">$&#123;value&#125;</span> - custom set`</span> &#125;</span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">const</span> onChange = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123; </span><br><span class="line">     <span class="comment">// è”åŠ¨ä¿®æ”¹å…¶ä»–fieldå€¼</span></span><br><span class="line">    propsOnChange(e.target.value, getNewFormValue);</span><br><span class="line">  &#125;; </span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [text, setText] = useState(<span class="string">'hide'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> onClick = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      setText(text === <span class="string">'hide'</span>? <span class="string">'show'</span>: <span class="string">'hide'</span>);</span><br><span class="line">      setDisplay(<span class="function">(<span class="params">formDisplay</span>)=&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> deleteStatus = _.get(formDisplay, <span class="string">'passWord.delete'</span>);</span><br><span class="line">          <span class="keyword">return</span> &#123;...formDisplay, <span class="attr">passWord</span>:&#123;...formDisplay.passWord, <span class="attr">delete</span>: !deleteStatus&#125;&#125;;</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      value=&#123;value&#125;</span><br><span class="line">      onChange=&#123;onChange&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;span onClick=&#123;onClick&#125;&gt;&#123;text&#125; password&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è®¾è®¡æ–¹æ¡ˆ"><a href="#è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="è®¾è®¡æ–¹æ¡ˆ"></a>è®¾è®¡æ–¹æ¡ˆ</h2><p><a href="https://yewills.github.io/2020/05/25/react_form_design/">è®¾è®¡æ–¹æ¡ˆåšå®¢ - EnFormåŠ¨æ€è¡¨å•å°è£… </a></p><h2 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h2><p><a href="https://github.com/YeWills/react-redux-hooks-demo/tree/context-form" target="_blank" rel="noopener">æºç /demo github </a></p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> form </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>next form å°è£…</title>
      <link href="/2020/05/01/react_form_next/"/>
      <url>/2020/05/01/react_form_next/</url>
      
        <content type="html"><![CDATA[<h2 id="formæ‹¥æœ‰çš„èƒ½åŠ›"><a href="#formæ‹¥æœ‰çš„èƒ½åŠ›" class="headerlink" title="formæ‹¥æœ‰çš„èƒ½åŠ›"></a>formæ‹¥æœ‰çš„èƒ½åŠ›</h2><h3 id="reduxçŠ¶æ€"><a href="#reduxçŠ¶æ€" class="headerlink" title="reduxçŠ¶æ€"></a>reduxçŠ¶æ€</h3><h4 id="å†…éƒ¨å®ç°-formStore-formDispatch"><a href="#å†…éƒ¨å®ç°-formStore-formDispatch" class="headerlink" title="å†…éƒ¨å®ç° (formStore formDispatch)"></a>å†…éƒ¨å®ç° (formStore formDispatch)</h4><p>formStoreæ˜¯ç»™formå°è£…çš„ï¼Œä¸»è¦ç”¨äºformå†…çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚<br>form Store ç”¨äºè¾ƒä¸ºå¤æ‚çš„formï¼Œæ ¹æ®éœ€æ±‚æ˜¯å¦é€‰ç”¨ï¼Œä¸formåšäº†åˆ†ç¦»å°è£…ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨</span></span><br><span class="line"> contextHoc(FormContext, initFormStoreState)(AddText)</span><br><span class="line"></span><br><span class="line"><span class="comment">//contextHoc</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> Wrap <span class="keyword">from</span> <span class="string">"./Wrap"</span>;</span><br><span class="line"><span class="keyword">const</span> contextHoc = <span class="function">(<span class="params">FormContext, initialState</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="params">Comp</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;Wrap FormContext=&#123;FormContext&#125; initialState=&#123;initialState&#125; &#123;...props&#125;&gt;</span><br><span class="line">          &lt;Comp /&gt;</span><br><span class="line">        &lt;<span class="regexp">/Wrap&gt;</span></span><br><span class="line"><span class="regexp">      );</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default contextHoc;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Wrap</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(state, action);</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setErrors"</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; erros &#125; = state;</span><br><span class="line">      <span class="keyword">const</span> &#123; preload &#125; = action;</span><br><span class="line">      <span class="keyword">const</span> updates = preload.reduce(<span class="function">(<span class="params">acc, &#123; name, value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        acc[name] = value;</span><br><span class="line">        <span class="keyword">return</span> acc;</span><br><span class="line">      &#125;, &#123;&#125;);</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">errors</span>: &#123; ...erros, ...updates &#125; &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"resetErrors"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">errors</span>: &#123;&#125; &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"setValues"</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; values &#125; = state;</span><br><span class="line">      <span class="keyword">const</span> &#123; preload &#125; = action;</span><br><span class="line">      <span class="keyword">const</span> updates = preload.reduce(<span class="function">(<span class="params">acc, &#123; name, value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        acc[name] = value;</span><br><span class="line">        <span class="keyword">return</span> acc;</span><br><span class="line">      &#125;, &#123;&#125;);</span><br><span class="line">      <span class="comment">//_isValueChange ç”¨äºæ ‡è¯†formçš„store valuesæ˜¯å¦é‡æ–°è¢«èµ‹å€¼ï¼Œå¯ç”¨åœºæ™¯æœ‰è¡¨å•ç¼–è¾‘çš„ä¿å­˜æŒ‰é’®ï¼Œè‹¥æ— å˜åŒ–åˆ™ç¦ç”¨</span></span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">values</span>: &#123; ...values, <span class="attr">_isValueChange</span>: <span class="literal">true</span>, ...updates&#125; &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"resetValues"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">values</span>: &#123;&#125; &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"reset"</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">errors</span>: &#123;&#125;, <span class="attr">values</span>: &#123;&#125; &#125;;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">initialState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">values</span>: &#123; ...initialState &#125;, <span class="attr">errors</span>: &#123;&#125; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Wrap = <span class="function">(<span class="params">&#123; children, FormContext, initialState = &#123;&#125;, ...rest &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [formStore, fDispatch] = useReducer(reducer, initialState, init);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;FormContext.Provider value=&#123;fDispatch&#125;&gt;</span><br><span class="line">      &#123;React.cloneElement(children, &#123;</span><br><span class="line">        ...children.props,</span><br><span class="line">        ...rest,</span><br><span class="line">        formStore,</span><br><span class="line">        action: fDispatch</span><br><span class="line">      &#125;)&#125;</span><br><span class="line">    &lt;<span class="regexp">/FormContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Wrap;</span></span><br></pre></td></tr></table></figure><h4 id="å‘èµ·actionçš„ä¸¤ç§æ–¹å¼"><a href="#å‘èµ·actionçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="å‘èµ·actionçš„ä¸¤ç§æ–¹å¼"></a>å‘èµ·actionçš„ä¸¤ç§æ–¹å¼</h4><p>åœ¨formå†…ï¼Œå°†ä»¥ä¸Šèƒ½åŠ›æ³¨å…¥åˆ°æ¯ä¸ªè‡ªå®šä¹‰ç»„ä»¶å†…ï¼Œå¦‚æœä½ ä¸å«Œéº»çƒ¦ï¼Œä½ åŒæ ·å¯é€šè¿‡contextç›´æ¥è·å–atcionã€‚<br>å› ä¸ºform store å°±æ˜¯åˆ©ç”¨context+reducerå®ç°çš„ä¸€ä¸ªå°å‹reduxã€‚</p><h4 id="çˆ¶ç»„ä»¶å°†è·å–form-storeèƒ½åŠ›"><a href="#çˆ¶ç»„ä»¶å°†è·å–form-storeèƒ½åŠ›" class="headerlink" title="çˆ¶ç»„ä»¶å°†è·å–form storeèƒ½åŠ›"></a>çˆ¶ç»„ä»¶å°†è·å–form storeèƒ½åŠ›</h4><p>å°†åŒ…å«Enformçš„ç»„ä»¶ï¼Œä½¿ç”¨contextHoc(FormContext, initFormStoreState)(AddCoupon)åï¼ŒAddCouponå°†æ‹¥æœ‰form storeçš„æ‰€æœ‰èƒ½åŠ›ã€‚</p><h4 id="çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶"></a>çˆ¶ç»„ä»¶æˆ–å­ç»„ä»¶</h4><p>formç»„ä»¶å†…å‘èµ·actionèµ‹å€¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">formDispatch(&#123;</span><br><span class="line">             type: <span class="string">"setValues"</span>,</span><br><span class="line">             preload: [<span class="comment">//ä½¿ç”¨æ•°ç»„</span></span><br><span class="line">               &#123;</span><br><span class="line">                 name: <span class="string">"orgList"</span>,</span><br><span class="line">                 value: storeIdsVal</span><br><span class="line">               &#125;,</span><br><span class="line">               &#123;</span><br><span class="line">                 name: <span class="string">"_isValueChange"</span>,</span><br><span class="line">                 value: <span class="literal">false</span></span><br><span class="line">               &#125;</span><br><span class="line">             ]</span><br><span class="line">           &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="å…¶ä»–ç»†èŠ‚å¤„ç†"><a href="#å…¶ä»–ç»†èŠ‚å¤„ç†" class="headerlink" title="å…¶ä»–ç»†èŠ‚å¤„ç†"></a>å…¶ä»–ç»†èŠ‚å¤„ç†</h4><ul><li>setValues ä½¿ç”¨æ•°ç»„å†™æ³•ï¼Œæ»¡è¶³ä¸€æ¬¡æ€§éœ€è¦èµ‹å€¼å¤šä¸ªçŠ¶æ€çš„éœ€æ±‚</li><li>reset é‡ç½®å€¼çš„èƒ½åŠ›</li><li>_isValueChange åˆ¤æ–­storeæ˜¯å¦é‡æ–°èµ‹å€¼èƒ½åŠ›</li><li>setErrors ä½œä¸ºéªŒè¯å¤‡ç”¨çš„çŠ¶æ€ï¼Œæš‚æ—¶è¿˜æ²¡é‡åˆ°éœ€æ±‚ï¼Œå¤§å¤šéªŒè¯éœ€æ±‚å¯é€šè¿‡ next form è‡ªå¸¦çš„valitoræ¶ˆåŒ–</li><li>ä»¥è£…é¥°å™¨å†™æ³•ï¼Œåˆ†ç¦»ç‹¬ç«‹èƒ½åŠ›ï¼Œå¯è‡ªè¡Œé€‰æ‹©æ˜¯å¦ä½¿ç”¨form store</li></ul><h3 id="stateçŠ¶æ€"><a href="#stateçŠ¶æ€" class="headerlink" title="stateçŠ¶æ€"></a>stateçŠ¶æ€</h3><h4 id="å†…éƒ¨å®ç°-formValuesä¸Field"><a href="#å†…éƒ¨å®ç°-formValuesä¸Field" class="headerlink" title="å†…éƒ¨å®ç° (formValuesä¸Field)"></a>å†…éƒ¨å®ç° (formValuesä¸Field)</h4><p>formValuesæ˜¯formè‡ªå¸¦çš„valueï¼Œç»“åˆFieldä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Enformå†…</span></span><br><span class="line"><span class="keyword">this</span>.field = <span class="keyword">new</span> Field(<span class="keyword">this</span>, &#123; <span class="attr">values</span>: defaultValue &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="ç‰¹æ®Šæƒ…å†µä¸‹å¤–éƒ¨ä½¿ç”¨"><a href="#ç‰¹æ®Šæƒ…å†µä¸‹å¤–éƒ¨ä½¿ç”¨" class="headerlink" title="ç‰¹æ®Šæƒ…å†µä¸‹å¤–éƒ¨ä½¿ç”¨"></a>ç‰¹æ®Šæƒ…å†µä¸‹å¤–éƒ¨ä½¿ç”¨</h4><p>ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨classçš„refï¼Œç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚å¼•ç”¨Enformçš„å¤–å±‚çˆ¶ç»„ä»¶æ— æ³•é‡æ–°è®¾ç½®formå€¼ï¼ŒåŠæ³•æ˜¯refã€‚</p><h3 id="eventäº‹ä»¶"><a href="#eventäº‹ä»¶" class="headerlink" title="eventäº‹ä»¶"></a>eventäº‹ä»¶</h3><h4 id="å†…éƒ¨å®ç°-formAcion-ä¸çˆ¶ç»„ä»¶é€šä¿¡æ¡¥æ¢"><a href="#å†…éƒ¨å®ç°-formAcion-ä¸çˆ¶ç»„ä»¶é€šä¿¡æ¡¥æ¢" class="headerlink" title="å†…éƒ¨å®ç°(formAcion,ä¸çˆ¶ç»„ä»¶é€šä¿¡æ¡¥æ¢)"></a>å†…éƒ¨å®ç°(formAcion,ä¸çˆ¶ç»„ä»¶é€šä¿¡æ¡¥æ¢)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//form çš„çˆ¶ç»„ä»¶å†…</span></span><br><span class="line">  <span class="keyword">const</span> formAction = <span class="function"><span class="params">type</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">"openAddDialog"</span>) &#123;</span><br><span class="line">      setShop(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  &lt;EnForm</span><br><span class="line">    formAction=&#123;formAction&#125;</span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// form å†…çš„å­ç»„ä»¶å†…ï¼š</span></span><br><span class="line">  formAction(<span class="string">"openAddDialog"</span>);</span><br></pre></td></tr></table></figure><h3 id="å…¬å…±æ•°æ®"><a href="#å…¬å…±æ•°æ®" class="headerlink" title="å…¬å…±æ•°æ®"></a>å…¬å…±æ•°æ®</h3><p>å°†ä¸€äº›å…¬å…±çš„æ•°æ®ä»¥ä¸‹æ–œæ çš„æ–¹å¼æ³¨å…¥form values æˆ– storeä¸­ï¼Œæ¯”å¦‚<code>{__common__ï¼šrow}</code>ä»¥ä¾¿è®©æ•´ä¸ªformå…¬ç”¨ã€‚</p><h3 id="åˆ¤æ–­form-value-æ˜¯å¦æ”¹å˜"><a href="#åˆ¤æ–­form-value-æ˜¯å¦æ”¹å˜" class="headerlink" title="åˆ¤æ–­form value æ˜¯å¦æ”¹å˜"></a>åˆ¤æ–­form value æ˜¯å¦æ”¹å˜</h3><p>_isValueChange ç”¨äºæ ‡è¯†formçš„store valuesæ˜¯å¦é‡æ–°è¢«èµ‹å€¼ï¼Œå¯ç”¨åœºæ™¯æœ‰è¡¨å•ç¼–è¾‘çš„ä¿å­˜æŒ‰é’®ï¼Œè‹¥æ— å˜åŒ–åˆ™ç¦ç”¨ã€‚<br>form store çš„ value èµ‹å€¼éƒ½åœ¨ setValuesä¸­ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"setValues"</span>: &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; values &#125; = state;</span><br><span class="line">  <span class="keyword">const</span> &#123; preload &#125; = action;</span><br><span class="line">  <span class="keyword">const</span> updates = preload.reduce(<span class="function">(<span class="params">acc, &#123; name, value &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    acc[name] = value;</span><br><span class="line">    <span class="keyword">return</span> acc;</span><br><span class="line">  &#125;, &#123;&#125;);</span><br><span class="line">  <span class="comment">//_isValueChange ç”¨äºæ ‡è¯†formçš„store valuesæ˜¯å¦é‡æ–°è¢«èµ‹å€¼ï¼Œå¯ç”¨åœºæ™¯æœ‰è¡¨å•ç¼–è¾‘çš„ä¿å­˜æŒ‰é’®ï¼Œè‹¥æ— å˜åŒ–åˆ™ç¦ç”¨</span></span><br><span class="line">  <span class="keyword">return</span> &#123; ...state, <span class="attr">values</span>: &#123; ...values, <span class="attr">_isValueChange</span>: <span class="literal">true</span>, ...updates&#125; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="ä»¥æ­¤ç±»æ¨"><a href="#ä»¥æ­¤ç±»æ¨" class="headerlink" title="ä»¥æ­¤ç±»æ¨"></a>ä»¥æ­¤ç±»æ¨</h4><p>å†™ä¸€äº›å¤§ç»„ä»¶æˆ–å¤æ‚ç»„ä»¶çš„æ—¶å€™ï¼Œæ¯”å¦‚Tableï¼Œå¯ä»¥è€ƒè™‘ä¼˜å…ˆä½¿ç”¨classå®ç°ï¼Œå› ä¸ºclasså¯ä»¥å¯¹å¤–æš´éœ²refã€‚</p><h2 id="formæºç å®ç°"><a href="#formæºç å®ç°" class="headerlink" title="formæºç å®ç°"></a>formæºç å®ç°</h2><h3 id="ä¸¤ç§è¡¨å•"><a href="#ä¸¤ç§è¡¨å•" class="headerlink" title="ä¸¤ç§è¡¨å•"></a>ä¸¤ç§è¡¨å•</h3><p>ä¸»è¦å®ç° ä¸€èˆ¬è¡¨å• ä¸ labelåˆ—è¡¨æŸ¥è¯¢è¡¨å•ã€‚</p><h4 id="labelåˆ—è¡¨æŸ¥è¯¢è¡¨å•"><a href="#labelåˆ—è¡¨æŸ¥è¯¢è¡¨å•" class="headerlink" title="labelåˆ—è¡¨æŸ¥è¯¢è¡¨å•"></a>labelåˆ—è¡¨æŸ¥è¯¢è¡¨å•</h4><p>å•è¡Œæ— labelåˆ—è¡¨æŸ¥è¯¢è¡¨å• æ¯”å¦‚ æ·»åŠ ææ–™ åˆ—è¡¨æŸ¥è¯¢ã€‚<br>ä¸æ™®é€šè¡¨å•ä¸ä¸€æ ·çš„æ˜¯ï¼Œå•è¡Œæ— labelåˆ—è¡¨æŸ¥è¯¢è¡¨å• labelä¸ºç©ºï¼Œæ ·å¼ä¹Ÿæœ‰ä¸€äº›å·®å¼‚å¤„ç†ï¼ŒæŸ¥è¯¢æŒ‰é’®å¯èƒ½å†…åµŒäºè¡¨å•å†…ã€‚<br>å› ä¸ºé€‚ç”¨åœºæ™¯ä¸å¤šï¼Œå¯¹ å•è¡Œæ— labelåˆ—è¡¨æŸ¥è¯¢è¡¨å• å°è£…ä¸å¤šï¼Œåªè®¾è®¡äº†å•è¡Œçš„åœºæ™¯ï¼Œæ ¹æ®éœ€æ±‚å¯ä»¥æ‰©å±•ã€‚</p><h3 id="render-propsæ¨¡å¼"><a href="#render-propsæ¨¡å¼" class="headerlink" title="render propsæ¨¡å¼"></a>render propsæ¨¡å¼</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>configæ˜¯Enformçš„propsï¼Œrenderæ˜¯configå†…æ¯ä¸ªfieldçš„é…ç½®ï¼Œ<br>renderæ˜¯ä¸€ç§render propsæ¨¡å¼ï¼Œ<br>å†™Enformçš„æ—¶å€™ï¼Œæœ‰äº›åœ°æ–¹é‡‡ç”¨äº†render propsæ¨¡å¼ï¼Œ<br>ä¸»è¦æ˜¯next FormItem èƒ½å°†å…¶ä¸€çº§childç»„ä»¶é›†æˆåˆ°formä½“ç³»å†…ï¼Œè¢«formç»Ÿä¸€å°è£…ï¼Œæ‹¥æœ‰valueèƒ½åŠ›ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//FormItem</span></span><br><span class="line">&lt;FormItem</span><br><span class="line">  required=&#123;required&#125;</span><br><span class="line">  labelAlign=<span class="string">"left"</span></span><br><span class="line">  labelCol=&#123;&#123; <span class="attr">span</span>: <span class="keyword">this</span>.getLableColSpan(labelCol) &#125;&#125;</span><br><span class="line">  wrapperCol=&#123;&#123; <span class="attr">span</span>: <span class="keyword">this</span>.getWrapperColSpan(wrapperCol, type) &#125;&#125;</span><br><span class="line">  label=&#123;<span class="keyword">this</span>.getLabel(fieldInfo)&#125;</span><br><span class="line">  className=&#123;<span class="string">`<span class="subst">$&#123;styles.item&#125;</span> <span class="subst">$&#123;className&#125;</span>`</span>&#125;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;<span class="keyword">this</span>.generateField(fieldInfo)&#125;</span><br><span class="line">&lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/generateField</span></span><br><span class="line"><span class="regexp">generateField = fieldInfo =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  if (render) &#123;</span></span><br><span class="line"><span class="regexp">     /</span><span class="regexp">/render propsæ¨¡å¼</span></span><br><span class="line"><span class="regexp">    return render(fieldInfo, this.field);</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">  if (CustomField) &#123;</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/ç»„ä»¶æ¨¡å¼</span></span><br><span class="line"><span class="regexp">    return &lt;CustomField field=&#123;this.field&#125; /</span>&gt;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//config</span></span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">"testé—¨æ§›"</span>,</span><br><span class="line">      name: <span class="string">"condType"</span>,</span><br><span class="line">      required: <span class="literal">true</span>,</span><br><span class="line">      render: Test</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//Test</span></span><br><span class="line"><span class="keyword">const</span> Test = <span class="function">(<span class="params">&#123; name, extraProps &#125;, formField</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Radio.Group itemDirection=<span class="string">"ver"</span> name=&#123;name&#125; &#123;...extraProps&#125;&gt;</span><br><span class="line">      &lt;Radio value=&#123;none&#125;&gt;testé—¨æ§›&lt;<span class="regexp">/Radio&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Radio value=&#123;limit&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;FormItem label=""&gt;</span></span><br><span class="line"><span class="regexp">          &lt;EnNumPicker</span></span><br><span class="line"><span class="regexp">            name=&#123;conditionValueKey&#125;</span></span><br><span class="line"><span class="regexp">            min=&#123;1&#125;</span></span><br><span class="line"><span class="regexp">            max=&#123;9999&#125;</span></span><br><span class="line"><span class="regexp">            hasTrigger=&#123;false&#125;</span></span><br><span class="line"><span class="regexp">            editable=&#123;!isDisabled&#125;</span></span><br><span class="line"><span class="regexp">            disabled=&#123;isDisabled&#125;</span></span><br><span class="line"><span class="regexp">          /</span>&gt;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span&gt;&amp;nbsp;&amp;nbsp;æ•°é‡&lt;/</span>span&gt;</span><br><span class="line">      &lt;<span class="regexp">/Radio&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>Radio.Group&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="next-formä½¿ç”¨çš„æŠ€å·§"><a href="#next-formä½¿ç”¨çš„æŠ€å·§" class="headerlink" title="next formä½¿ç”¨çš„æŠ€å·§"></a>next formä½¿ç”¨çš„æŠ€å·§</h3><h4 id="formèƒ½é›†æˆä»»æ„ç»„ä»¶"><a href="#formèƒ½é›†æˆä»»æ„ç»„ä»¶" class="headerlink" title="formèƒ½é›†æˆä»»æ„ç»„ä»¶"></a>formèƒ½é›†æˆä»»æ„ç»„ä»¶</h4><p>è‡ªå®šä¹‰ç»„ä»¶ï¼Œåªè¦å®šä¹‰å¥½nameï¼Œå°±æ‹¥æœ‰formå†…å…¶ä»–å¦‚inputç»„ä»¶çš„èƒ½åŠ›<br>å…¶å®è‡ªå®šä¹‰ç»„ä»¶æœ‰æ­§ä¹‰ï¼Œ<br>åœ¨next form çœ‹æ¥ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä¸å…¶ä»–å¦‚Inputç»„ä»¶æ˜¯ä¸€æ ·çš„å¹¶æ²¡æœ‰ä¸åŒï¼Œåªæ˜¯å®šä¹‰å¥½nameï¼Œç„¶åç»„ä»¶å†…å¯¹valueï¼Œonchangeè¿›è¡ŒåŠ«æŒå³å¯ã€‚</p><h4 id="validatorçš„è§¦å‘æ—¶æœº"><a href="#validatorçš„è§¦å‘æ—¶æœº" class="headerlink" title="validatorçš„è§¦å‘æ—¶æœº"></a>validatorçš„è§¦å‘æ—¶æœº</h4><p>validatoré»˜è®¤çš„è§¦å‘æ—¶æœºæ˜¯onchangeä¸submitã€‚<br>å½“ä½ åœ¨è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå®šä¹‰äº†validatorï¼Œæƒ³åœ¨è‡ªå®šä¹‰ç»„ä»¶å†…è§¦å‘validatorï¼Œ<br>åœ¨è‡ªå®šä¹‰ç»„ä»¶å†…ï¼Œæ‰§è¡ŒonChangeã€‚<br>å› ä¸ºvalidatoré»˜è®¤çš„è§¦å‘æ—¶æœºæ˜¯onchangeä¸submitã€‚</p><h3 id="ç»„ä»¶æ¨¡å¼"><a href="#ç»„ä»¶æ¨¡å¼" class="headerlink" title="ç»„ä»¶æ¨¡å¼"></a>ç»„ä»¶æ¨¡å¼</h3><p>ç”±ä¸Šé¢next formä½¿ç”¨çš„æŠ€å·§å¯çŸ¥ï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥é›†æˆåˆ°formä½“ç³»å†…ï¼Œæ‹¥æœ‰ç»Ÿä¸€çš„form valueç­‰</p><h3 id="render-props-ç»„ä»¶-æ¨¡å¼"><a href="#render-props-ç»„ä»¶-æ¨¡å¼" class="headerlink" title="render props/ç»„ä»¶ æ¨¡å¼"></a>render props/ç»„ä»¶ æ¨¡å¼</h3><h4 id="render-propsä½¿ç”¨åœºæ™¯"><a href="#render-propsä½¿ç”¨åœºæ™¯" class="headerlink" title="render propsä½¿ç”¨åœºæ™¯"></a>render propsä½¿ç”¨åœºæ™¯</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VaTerm = <span class="function">(<span class="params">&#123; name, extraProps &#125;, formField</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> radioValue = <span class="built_in">String</span>(formField.getValue(name));</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;Radio.Group</span><br><span class="line">      itemDirection=<span class="string">"ver"</span></span><br><span class="line">      name=&#123;name&#125;</span><br><span class="line">      className=&#123;styles.validTime&#125;</span><br><span class="line">      &#123;...extraProps&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;Radio value=&#123;absoluteTime&#125;&gt;</span><br><span class="line">        &lt;FormItem label=<span class="string">""</span>&gt;</span><br><span class="line">          &lt;DatePicker.RangePicker</span><br><span class="line">            disabled=&#123;extraProps?.disabled || isEqual(radioValue, relaTime)&#125;</span><br><span class="line">            name=&#123;dateName&#125;</span><br><span class="line">            onClick=&#123;e =&gt; &#123;</span><br><span class="line">              <span class="comment">//datapickerä¸radioç‚¹å‡»äº‹ä»¶å†²çªï¼Œå¯¼è‡´æ—¶é—´é¢æ¿é—ªç°ã€‚</span></span><br><span class="line">              e.preventDefault();</span><br><span class="line">              e.stopPropagation();</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            disabledDate=&#123;disabledDate&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Radio&gt;</span><br><span class="line">      &lt;Radio value=&#123;relaTime&#125;&gt;</span><br><span class="line">        &lt;FormItem label=<span class="string">""</span>&gt;</span><br><span class="line">          &lt;EnNumPicker</span><br><span class="line">            name=&#123;relativeDays&#125;</span><br><span class="line">            min=&#123;<span class="number">1</span>&#125;</span><br><span class="line">            max=&#123;<span class="number">9999</span>&#125;</span><br><span class="line">            hasTrigger=&#123;<span class="literal">false</span>&#125;</span><br><span class="line">            disabled=&#123;extraProps?.disabled || isEqual(radioValue, absoluteTime)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;<span class="regexp">/FormItem&gt;</span></span><br><span class="line"><span class="regexp">        &lt;span className=&#123;styles.text&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div className=&#123;styles.tip&#125;&gt;</span></span><br><span class="line"><span class="regexp">            test test</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Radio&gt;</span><br><span class="line">    &lt;<span class="regexp">/Radio.Group&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶æ¨¡å¼ä½¿ç”¨åœºæ™¯"><a href="#ç»„ä»¶æ¨¡å¼ä½¿ç”¨åœºæ™¯" class="headerlink" title="ç»„ä»¶æ¨¡å¼ä½¿ç”¨åœºæ™¯"></a>ç»„ä»¶æ¨¡å¼ä½¿ç”¨åœºæ™¯</h4><p>å¯¹ä¸€äº›å¸¸ç”¨ç»„ä»¶ï¼Œå¦‚selectï¼Œè¿›è¡Œäº†é¡¹ç›®ä¸šåŠ¡é€»è¾‘çš„äºŒæ¬¡å°è£…<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> <span class="string">"select"</span>: &#123;</span><br><span class="line">     <span class="keyword">return</span> (</span><br><span class="line">       &lt;EnSelect</span><br><span class="line">         style=&#123;style&#125;</span><br><span class="line">         &#123;...fieldInfo&#125;</span><br><span class="line">         formAction=&#123;formAction&#125;</span><br><span class="line">         formType=&#123;formType&#125;</span><br><span class="line">       /&gt;</span><br><span class="line">     );</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p>ä¸å¤ªæ¨èï¼Œä¸€äº›ä¸šåŠ¡æ‰æœ‰çš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œåœ¨configä¸­ç›´æ¥å†™ï¼Œå¦‚æœè¦è¿™æ ·åšï¼Œå°±é‡‡å–ä¸‹é¢çš„æ–¹å¼ï¼šrender propså†…å®šä¹‰è‡ªå®šä¹‰ç»„ä»¶</p><h4 id="render-propså†…å®šä¹‰è‡ªå®šä¹‰ç»„ä»¶"><a href="#render-propså†…å®šä¹‰è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="render propså†…å®šä¹‰è‡ªå®šä¹‰ç»„ä»¶"></a>render propså†…å®šä¹‰è‡ªå®šä¹‰ç»„ä»¶</h4><p>ä½¿ç”¨render propsæ¨¡å¼ï¼Œåœ¨render propså†…returnä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œè¿™ç§æ–¹å¼éå¸¸çµæ´»ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getProject = <span class="function">(<span class="params">&#123; name &#125;, formField, &#123; store, action &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//name=&#123;name&#125; æ³¨å…¥nameï¼Œå°±å®Œæˆäº†å°†è‡ªå®šä¹‰ç»„ä»¶ValidaTermé›†æˆåˆ°form</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ValTerm</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span> <span class="attr">action</span>=<span class="string">&#123;action&#125;</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="å•åˆ—å’Œå¤šåˆ—å¸ƒå±€"><a href="#å•åˆ—å’Œå¤šåˆ—å¸ƒå±€" class="headerlink" title="å•åˆ—å’Œå¤šåˆ—å¸ƒå±€"></a>å•åˆ—å’Œå¤šåˆ—å¸ƒå±€</h3><p>å•åˆ—è¡¨å•ä¸€èˆ¬ä¸ºæ–°å¢è¡¨å•ã€‚<br>å¦å¤–ä¸€äº›å°±æ˜¯å¤šåˆ—è¡¨å•ã€‚<br>é»˜è®¤æ ¹æ®fieldçš„æ•°é‡ï¼Œéœ€è¦å±•ç¤ºçš„åˆ—æ•°é‡ï¼Œformè‡ªåŠ¨è®¡ç®—ä¸€ä¸ªColSpan<br>è¾¾åˆ°è‡ªåŠ¨åˆ†åˆ—ã€‚<br>å¯¹åº”ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getColSpan = <span class="function"><span class="params">col</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; columns = <span class="number">1</span>, colSpan, type &#125; = <span class="keyword">this</span>.props.config;</span><br><span class="line">  <span class="keyword">if</span> (col?.span) <span class="keyword">return</span> col?.span;</span><br><span class="line">  <span class="keyword">if</span> (colSpan) <span class="keyword">return</span> colSpan;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">"singleColumns"</span>) <span class="keyword">return</span> <span class="number">24</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">24</span> / columns;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="æ³¨å…¥èƒ½åŠ›"><a href="#æ³¨å…¥èƒ½åŠ›" class="headerlink" title="æ³¨å…¥èƒ½åŠ›"></a>æ³¨å…¥èƒ½åŠ›</h3><p>æ¯ä¸€ä¸ªconfig field æ³¨å…¥ store, action, formAction,this.field èƒ½åŠ›ã€‚</p><h3 id="åˆ‡æ¢-è¯¦æƒ…è¡¨å•"><a href="#åˆ‡æ¢-è¯¦æƒ…è¡¨å•" class="headerlink" title="åˆ‡æ¢ è¯¦æƒ…è¡¨å•"></a>åˆ‡æ¢ è¯¦æƒ…è¡¨å•</h3><h4 id="è¦åˆ‡æ¢æˆè¯¦æƒ…è¡¨å•ï¼Œæ¯”è¾ƒç®€å•ï¼š"><a href="#è¦åˆ‡æ¢æˆè¯¦æƒ…è¡¨å•ï¼Œæ¯”è¾ƒç®€å•ï¼š" class="headerlink" title="è¦åˆ‡æ¢æˆè¯¦æƒ…è¡¨å•ï¼Œæ¯”è¾ƒç®€å•ï¼š"></a>è¦åˆ‡æ¢æˆè¯¦æƒ…è¡¨å•ï¼Œæ¯”è¾ƒç®€å•ï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;EnForm</span><br><span class="line">  formType=&#123;<span class="string">"detailForm"</span>&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><h4 id="formå†…ï¼Œç»Ÿä¸€å†™äº†ä¸€ä¸ªè¯¦æƒ…fieldï¼š"><a href="#formå†…ï¼Œç»Ÿä¸€å†™äº†ä¸€ä¸ªè¯¦æƒ…fieldï¼š" class="headerlink" title="formå†…ï¼Œç»Ÿä¸€å†™äº†ä¸€ä¸ªè¯¦æƒ…fieldï¼š"></a>formå†…ï¼Œç»Ÿä¸€å†™äº†ä¸€ä¸ªè¯¦æƒ…fieldï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (formType === <span class="string">"detailForm"</span> &amp;&amp; isUseDetail(fieldInfo)) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;DetailField</span><br><span class="line">      name=&#123;name&#125;</span><br><span class="line">      fieldInfo=&#123;fieldInfo&#125;</span><br><span class="line">      formStoreField=&#123;formStoreField&#125;</span><br><span class="line">      formAction=&#123;formAction&#125;</span><br><span class="line">    /&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>formå†…çš„äºŒæ¬¡å°è£…ç»„ä»¶æ¯”å¦‚EnSelectï¼Œä¹Ÿå°è£…äº†å…¶è¯¦æƒ…æ¨¡å¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EnSelect</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"> ...</span><br><span class="line">  render() &#123;</span><br><span class="line">    ....</span><br><span class="line">    <span class="keyword">if</span> (formType === <span class="string">"detailForm"</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> opt = options.find(<span class="function"><span class="params">item</span> =&gt;</span> isEqual(item.value, rest.value));</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">lineHeight:</span> "<span class="attr">32px</span>" &#125;&#125;&gt;</span>&#123;opt?.label || ""&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Select</span><br><span class="line">        ...</span><br><span class="line">      &gt;</span><br><span class="line">       ...</span><br><span class="line">      &lt;<span class="regexp">/Select&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h4 id="å¯¹äºä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™è‡ªè¡Œå†™å¥½è¯¦æƒ…æ€æ¸²æŸ“æ¨¡å¼ã€‚"><a href="#å¯¹äºä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™è‡ªè¡Œå†™å¥½è¯¦æƒ…æ€æ¸²æŸ“æ¨¡å¼ã€‚" class="headerlink" title="å¯¹äºä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™è‡ªè¡Œå†™å¥½è¯¦æƒ…æ€æ¸²æŸ“æ¨¡å¼ã€‚"></a>å¯¹äºä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶ï¼Œåˆ™è‡ªè¡Œå†™å¥½è¯¦æƒ…æ€æ¸²æŸ“æ¨¡å¼ã€‚</h4><p>å¦‚é¢˜ã€‚</p><h3 id="formè®¾è®¡ä¸ºclassç»„ä»¶é‡è¦"><a href="#formè®¾è®¡ä¸ºclassç»„ä»¶é‡è¦" class="headerlink" title="formè®¾è®¡ä¸ºclassç»„ä»¶é‡è¦"></a>formè®¾è®¡ä¸ºclassç»„ä»¶é‡è¦</h3><h4 id="å…³äºformç»„ä»¶æœ¬èº«"><a href="#å…³äºformç»„ä»¶æœ¬èº«" class="headerlink" title="å…³äºformç»„ä»¶æœ¬èº«"></a>å…³äºformç»„ä»¶æœ¬èº«</h4><ul><li>å…¼å®¹next</li><li>å…¼å®¹Field</li><li>æš´éœ²refç»™çˆ¶äº²ç»„ä»¶ï¼Œä»¥ä¾¿å¤–å±‚è·å–Enformçš„instance<h4 id="å…³äºå…¶ä»–å¤§ç»„ä»¶è®¾è®¡æ³¨æ„"><a href="#å…³äºå…¶ä»–å¤§ç»„ä»¶è®¾è®¡æ³¨æ„" class="headerlink" title="å…³äºå…¶ä»–å¤§ç»„ä»¶è®¾è®¡æ³¨æ„"></a>å…³äºå…¶ä»–å¤§ç»„ä»¶è®¾è®¡æ³¨æ„</h4>ä»¥Formç»„ä»¶å°è£…ç»éªŒæ¥çœ‹ï¼Œå…¶ä»–å¤§ç»„ä»¶ï¼Œå¦‚Tableç»„ä»¶å°è£…ï¼Œä¹Ÿæ¨èä½¿ç”¨classï¼Œè€Œä¸æ˜¯hooksï¼Œä»¥ä¾¿å¤–å±‚è·å–Enformçš„instanceï¼Œ<br>ä»¥ä¾¿åœ¨ç‰¹æ®Šæƒ…å†µï¼Œå¯¹å¤–æš´éœ²Instanceã€‚<br>æ³¨æ„ä¸Šé¢è¯´çš„æ˜¯å¤§ç»„ä»¶ï¼Œå¯¹äºå°ç»„ä»¶ï¼Œæˆ‘è¿˜æ˜¯æ¨èä½¿ç”¨hooksã€‚</li></ul><h2 id="configé…ç½®"><a href="#configé…ç½®" class="headerlink" title="configé…ç½®"></a>configé…ç½®</h2><h3 id="è‡ªå®šä¹‰validatorå»ºè®®ä½¿ç”¨deepcustom"><a href="#è‡ªå®šä¹‰validatorå»ºè®®ä½¿ç”¨deepcustom" class="headerlink" title="è‡ªå®šä¹‰validatorå»ºè®®ä½¿ç”¨deepcustom"></a>è‡ªå®šä¹‰validatorå»ºè®®ä½¿ç”¨deepcustom</h3><p>å› ä¸ºè‡ªå®šä¹‰validatorè¦å†™åœ¨Form.Itemä¸Šï¼Œå› æ­¤æ¨èdeepcustomã€‚</p><h3 id="extraProps"><a href="#extraProps" class="headerlink" title="extraProps"></a>extraProps</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      label: <span class="string">"æ¯äººæ•°é‡"</span>,</span><br><span class="line">      name: <span class="string">"takenum"</span>,</span><br><span class="line">      type: <span class="string">"numberPicker"</span>,</span><br><span class="line">      placeholder: <span class="string">"è¯·è¾“å…¥æ¯äººæ•°é‡"</span>,</span><br><span class="line">      required: <span class="literal">true</span>,</span><br><span class="line">      extraProps: &#123;</span><br><span class="line">        innerAfter: <span class="string">"å¼ "</span>,</span><br><span class="line">        min: <span class="number">1</span>,</span><br><span class="line">        max: <span class="number">99</span>,</span><br><span class="line">        hasTrigger: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–å±æ€§ï¼Œæ ¹æ®ä¸åŒçš„ç»„ä»¶ï¼Œèƒ½å¤Ÿå®šä¹‰çš„å±æ€§ä¸ä¸€æ ·ï¼š</p><ul><li>wrapperCol: { span: 16 } è¿™æ˜¯é€šç”¨çš„</li><li>col: { className: â€œvalid-termâ€ }è¿™æ˜¯é€šç”¨çš„</li><li><p>checkbox çš„ getOpts</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     label: <span class="string">"çœ‹èµ›æ–¹å¼"</span>,</span><br><span class="line">     name: <span class="string">"shows"</span>,</span><br><span class="line">     required: <span class="literal">true</span>,</span><br><span class="line">     type: <span class="string">"checkbox"</span>,</span><br><span class="line">     getOpts: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure></li><li><p>select çš„ post</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     label: &quot;æ¸ é“&quot;,</span><br><span class="line">     name: &quot;chaList&quot;,</span><br><span class="line">     type: &quot;select&quot;,</span><br><span class="line">     post: getcannel,</span><br><span class="line">     extraProps: &#123;</span><br><span class="line">       mode: &quot;multiple&quot;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="ä¸€äº›æ€è·¯æˆ–å¾…å®ç°"><a href="#ä¸€äº›æ€è·¯æˆ–å¾…å®ç°" class="headerlink" title="ä¸€äº›æ€è·¯æˆ–å¾…å®ç°"></a>ä¸€äº›æ€è·¯æˆ–å¾…å®ç°</h2><h3 id="æ˜¾ç¤ºå’Œéšè—ï¼Œ"><a href="#æ˜¾ç¤ºå’Œéšè—ï¼Œ" class="headerlink" title="æ˜¾ç¤ºå’Œéšè—ï¼Œ"></a>æ˜¾ç¤ºå’Œéšè—ï¼Œ</h3><h4 id="ç®€å•çš„æ˜¾ç¤ºéšè—"><a href="#ç®€å•çš„æ˜¾ç¤ºéšè—" class="headerlink" title="ç®€å•çš„æ˜¾ç¤ºéšè—"></a>ç®€å•çš„æ˜¾ç¤ºéšè—</h4><p>å¯ä»¥å®šä¹‰åœ¨configå†…ï¼Œé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼Œè·å–formçš„æ‰€æœ‰èƒ½åŠ›ï¼Œåˆ¤æ–­æ˜¾ç¤ºéšè—æˆ–è€…hidden showï¼›</p><h4 id="å¤æ‚çš„æ˜¾ç¤ºéšè—"><a href="#å¤æ‚çš„æ˜¾ç¤ºéšè—" class="headerlink" title="å¤æ‚çš„æ˜¾ç¤ºéšè—"></a>å¤æ‚çš„æ˜¾ç¤ºéšè—</h4><p>è¿™ä¸ªè€ƒè™‘ä¸‹é€šè¿‡configçš„å‡½æ•°ï¼Œè¿˜æ˜¯configä¸jsx(render props)æ··ç”¨<br>å¯è€ƒè™‘å€Ÿé‰´ table çš„columnå½¢å¼ï¼Œåœ¨renderä¸­å†™cellï¼›</p><h3 id="configä¸jsx-render-props-å¹¶è¡Œ"><a href="#configä¸jsx-render-props-å¹¶è¡Œ" class="headerlink" title="configä¸jsx(render props)å¹¶è¡Œ"></a>configä¸jsx(render props)å¹¶è¡Œ</h3><p>è€ƒè™‘å¦‚ä½•è®¾è®¡ï¼Œè®©configé…ç½®ä¸æ‰‹å†™form item å¹¶è¡Œï¼Œå¯å€Ÿé‰´tableçš„cellæ¨¡å¼ã€‚</p><h2 id="ç†å¿µ"><a href="#ç†å¿µ" class="headerlink" title="ç†å¿µ"></a>ç†å¿µ</h2><h3 id="ä¸æ‰§å¿µå°è£…"><a href="#ä¸æ‰§å¿µå°è£…" class="headerlink" title="ä¸æ‰§å¿µå°è£…"></a>ä¸æ‰§å¿µå°è£…</h3><p>å°è£…å¸¦æ¥ç®€ä¾¿çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å®šåˆ¶åŒ–å¼±ï¼Œçµæ´»åº¦ä½çš„ç‰¹ç‚¹ã€‚<br>å°è£…ä¸€æ—¶çˆ½ï¼ŒåæœŸä¸šåŠ¡å åŠ éœ€æ±‚æ—¶ï¼Œæ”¯æŒåº¦å·®æ—¶ï¼Œéå¸¸éº»çƒ¦ã€‚<br>æ‰€æœ‰æ¨èç®€å•çš„è¡¨å•ä½¿ç”¨å°è£…ã€‚<br>æˆ‘å¸Œæœ›åœ¨é¡¹ç›®å¼€å‘æ—¶ï¼Œå°è£…formä¸nextåŸç”Ÿfromå¹¶è¡Œä½¿ç”¨ã€‚</p><h3 id="å°è£…formä¸nextåŸç”Ÿfromå¹¶è¡Œä½¿ç”¨"><a href="#å°è£…formä¸nextåŸç”Ÿfromå¹¶è¡Œä½¿ç”¨" class="headerlink" title="å°è£…formä¸nextåŸç”Ÿfromå¹¶è¡Œä½¿ç”¨"></a>å°è£…formä¸nextåŸç”Ÿfromå¹¶è¡Œä½¿ç”¨</h3><p>å‚è€ƒä¸Šé¢</p><h3 id="æ¨èç®€å•çš„è¡¨å•ä½¿ç”¨å°è£…"><a href="#æ¨èç®€å•çš„è¡¨å•ä½¿ç”¨å°è£…" class="headerlink" title="æ¨èç®€å•çš„è¡¨å•ä½¿ç”¨å°è£…"></a>æ¨èç®€å•çš„è¡¨å•ä½¿ç”¨å°è£…</h3><p>å‚è€ƒä¸Šé¢</p><h3 id="æ»¡è¶³ç™¾åˆ†ä¹‹ä¸ƒåäº”çš„éœ€æ±‚"><a href="#æ»¡è¶³ç™¾åˆ†ä¹‹ä¸ƒåäº”çš„éœ€æ±‚" class="headerlink" title="æ»¡è¶³ç™¾åˆ†ä¹‹ä¸ƒåäº”çš„éœ€æ±‚"></a>æ»¡è¶³ç™¾åˆ†ä¹‹ä¸ƒåäº”çš„éœ€æ±‚</h3><p>ç†è®ºä¸Šå°è£…çš„formèƒ½å¤Ÿæ»¡è¶³ç™¾åˆ†ä¹‹ç™¾çš„éœ€æ±‚ï¼Œå› ä¸ºå°è£…çš„å†™æ³•ä¸åŸç”Ÿçš„å†™æ³•ï¼Œæ²¡æœ‰æ ¹æœ¬å·®åˆ«ï¼Œåªæ˜¯æ¢ä¸€ç§å½¢å¼ã€‚<br>ä½†æ»¡è¶³æƒè¡¡æˆæœ¬ä¸æ”¶ç›Šï¼Œè¦†ç›–ç‡è¶Šå¤§ï¼Œåè€Œè¿˜ä¸å¥½ã€‚</p><h3 id="è°æŒæ¡äº†æ•°æ®ï¼Œå°±æŒæ¡äº†æ‰€æœ‰èƒ½åŠ›"><a href="#è°æŒæ¡äº†æ•°æ®ï¼Œå°±æŒæ¡äº†æ‰€æœ‰èƒ½åŠ›" class="headerlink" title="è°æŒæ¡äº†æ•°æ®ï¼Œå°±æŒæ¡äº†æ‰€æœ‰èƒ½åŠ›"></a>è°æŒæ¡äº†æ•°æ®ï¼Œå°±æŒæ¡äº†æ‰€æœ‰èƒ½åŠ›</h3><p>reactçš„ä¸–ç•Œï¼Œæ˜¯æ•°æ®çš„ä¸–ç•Œï¼Œè°æŒæ¡äº†æ•°æ®ï¼Œå°±æŒæ¡äº†æ‰€æœ‰èƒ½åŠ›</p><h2 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h2><h3 id="é›†æˆformæ—¶ï¼Œä½¿ç”¨classè€Œä¸æ˜¯hooks"><a href="#é›†æˆformæ—¶ï¼Œä½¿ç”¨classè€Œä¸æ˜¯hooks" class="headerlink" title="é›†æˆformæ—¶ï¼Œä½¿ç”¨classè€Œä¸æ˜¯hooks"></a>é›†æˆformæ—¶ï¼Œä½¿ç”¨classè€Œä¸æ˜¯hooks</h3><p>from.Itemç»„ä»¶åœ¨nextæºç ä¸­ï¼Œå¼•ç”¨äº†å­ç»„ä»¶çš„refï¼Œå› æ­¤æœ€å¥½å®šä¹‰classç»„ä»¶ï¼Œç”¨hooksç»„ä»¶ï¼Œå°†æŠ¥warningï¼Œè™½ç„¶ä¸å½±å“ä½¿ç”¨ã€‚<br>ä¸è¿‡ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œrefä¸€èˆ¬ç”¨äºä¸€äº›nextå·²çŸ¥ç»„ä»¶çš„ç‰¹æ®Šæ“ä½œï¼Œå› æ­¤è‡ªå®šä¹‰ç»„ä»¶ï¼Œä½¿ç”¨hooksæˆ–classå…³ç³»ä¸å¤§ï¼Œè‡³å°‘ä¸ä¼šå½±å“ä½¿ç”¨ï¼Œåªæ˜¯ä¼šæŠ¥ä¸€ä¸ªä¸‘çš„warningã€‚<br>å¦‚æœå®åœ¨æƒ³å†™æˆä¸€ä¸ªhooksï¼Œå¯ç”¨classç»„ä»¶å†åŒ…ä¸€å±‚ï¼Œè½¬å‘ä¸‹ã€‚<strong>ä¸è¦ä½¿ç”¨Forward.Refï¼Œå®ƒä¸Form.Itemæ— æ³•å…¼å®¹ï¼Œå’Œé›†æˆã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> form </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React Router</title>
      <link href="/2020/05/01/react_router/"/>
      <url>/2020/05/01/react_router/</url>
      
        <content type="html"><![CDATA[<h2 id="React-Routerå¸¸è§çŸ¥è¯†"><a href="#React-Routerå¸¸è§çŸ¥è¯†" class="headerlink" title="React Routerå¸¸è§çŸ¥è¯†"></a>React Routerå¸¸è§çŸ¥è¯†</h2><h3 id="HashRouter-è¿˜æ˜¯-BrowserRouter-ä»¥åŠ-Router-Route-è®²è§£"><a href="#HashRouter-è¿˜æ˜¯-BrowserRouter-ä»¥åŠ-Router-Route-è®²è§£" class="headerlink" title="HashRouter è¿˜æ˜¯ BrowserRouter ä»¥åŠ Router  Route è®²è§£"></a>HashRouter è¿˜æ˜¯ BrowserRouter ä»¥åŠ Router  Route è®²è§£</h3><p>ç®€è¨€ä¹‹å¦‚æœé¡¹ç›®æœåŠ¡ç«¯åšäº†æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¯ä»¥é€‰æ‹©BrowserRouterï¼Œå¦åˆ™è¯·é€‰æ‹©HashRouterï¼Œå› æ­¤ä¸€èˆ¬é¡¹ç›®éƒ½æ˜¯HashRouterï¼Œå› ä¸ºå¤§å¤šé¡¹ç›®ä¹ˆæœ‰åšæœåŠ¡ç«¯æ¸²æŸ“ã€‚<br>è¯¦ç»†è§ä¸‹é¢ï¼ˆè¿˜è®²äº†ï¼šåˆ©ç”¨æœåŠ¡å™¨è§£ææœºåˆ¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šè§£æè·¯ç”±#ä»¥åçš„éƒ¨åˆ†ï¼‰ï¼š<br>æ‘˜è‡ªã€ŠReact å®æˆ˜ï¼šè®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µã€‹ç¬¬15ç« ï¼›<br>react-router çš„å·¥ä½œæ–¹å¼ï¼Œæ˜¯åœ¨ç»„ä»¶æ ‘é¡¶å±‚æ”¾ä¸€ä¸ª Router ç»„ä»¶ï¼Œç„¶ååœ¨ç»„ä»¶æ ‘ä¸­æ•£è½ç€å¾ˆå¤š Route ç»„ä»¶ï¼ˆæ³¨æ„æ¯” Router å°‘ä¸€ä¸ªâ€œrâ€ï¼‰ï¼Œé¡¶å±‚çš„ Router ç»„ä»¶è´Ÿè´£åˆ†æç›‘å¬ URL çš„å˜åŒ–ï¼Œåœ¨å®ƒä¿æŠ¤ä¼ä¹‹ä¸‹çš„ Route ç»„ä»¶å¯ä»¥ç›´æ¥è¯»å–è¿™äº›ä¿¡æ¯ã€‚</p><p>å¾ˆæ˜æ˜¾ï¼ŒRouter å’Œ Route çš„é…åˆï¼Œå°±æ˜¯ä¹‹å‰æˆ‘ä»¬ä»‹ç»è¿‡çš„â€œæä¾›è€…æ¨¡å¼â€ï¼ŒRouter æ˜¯â€œæä¾›è€…â€ï¼ŒRouteæ˜¯â€œæ¶ˆè´¹è€…â€ã€‚</p><p>æ›´è¿›ä¸€æ­¥ï¼ŒRouter å…¶å®ä¹Ÿæ˜¯ä¸€å±‚æŠ½è±¡ï¼Œè®©ä¸‹é¢çš„ Route æ— éœ€å„ç§ä¸åŒ URL è®¾è®¡çš„ç»†èŠ‚ï¼Œä¸è¦ä»¥ä¸º URL å°±ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œè‡³å°‘å¯ä»¥åˆ†ä¸ºä¸¤ç§ã€‚</p><p>ç¬¬ä¸€ç§å¾ˆè‡ªç„¶ï¼Œæ¯”å¦‚ / å¯¹åº” Home é¡µï¼Œ/about å¯¹åº” About é¡µï¼Œä½†æ˜¯è¿™æ ·çš„è®¾è®¡éœ€è¦æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½ç›´æ¥è®¿é—®ä»»ä½•ä¸€ä¸ª URLï¼ŒæœåŠ¡å™¨ç«¯å¿…é¡»èƒ½å¯¹ /çš„è®¿é—®è¿”å› HTMLï¼Œä¹Ÿè¦å¯¹ /about çš„è®¿é—®è¿”å› HTMLã€‚</p><p>ç¬¬äºŒç§çœ‹èµ·æ¥ä¸è‡ªç„¶ï¼Œä½†æ˜¯å®ç°æ›´ç®€å•ã€‚<strong>åªæœ‰ä¸€ä¸ªè·¯å¾„ /ï¼Œé€šè¿‡ URL åé¢çš„ # éƒ¨åˆ†æ¥å†³å®šè·¯ç”±ï¼Œ/#/ å¯¹åº” Home é¡µï¼Œ/#/about å¯¹åº” About é¡µã€‚å› ä¸º URL ä¸­#ä¹‹åçš„éƒ¨åˆ†æ˜¯ä¸ä¼šå‘é€ç»™æœåŠ¡å™¨çš„ï¼Œæ‰€ä»¥ï¼Œæ— è®ºå“ªä¸ª URLï¼Œæœ€åéƒ½æ˜¯è®¿é—®æœåŠ¡å™¨çš„ / è·¯å¾„ï¼ŒæœåŠ¡å™¨ä¹Ÿåªéœ€è¦è¿”å›åŒæ ·ä¸€ä»½ HTML å°±å¯ä»¥ï¼Œç„¶åç”±æµè§ˆå™¨ç«¯è§£æ # åçš„éƒ¨åˆ†ï¼Œå®Œæˆæµè§ˆå™¨ç«¯æ¸²æŸ“ã€‚</strong></p><p>åœ¨ react-routerï¼Œæœ‰ BrowserRouter æ”¯æŒç¬¬ä¸€ç§ URLï¼Œæœ‰ HashRouter æ”¯æŒç¬¬äºŒç§ URLã€‚</p><p>å› ä¸º create-react-app äº§ç”Ÿçš„åº”ç”¨é»˜è®¤ä¸æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ä½¿ç”¨ HashRouterï¼Œåœ¨å®é™…äº§å“ä¸­ï¼Œå…¶å®æœ€å¥½è¿˜æ˜¯ç”¨ BrowserRouterï¼Œè¿™æ ·ç”¨æˆ·ä½“éªŒæ›´å¥½ã€‚</p><p>ä¿®æ”¹index.jsæ–‡ä»¶ï¼Œå¢åŠ ä¸‹é¢çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123;HashRouter&#125; from &apos;react-router-dom&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;HashRouter&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/HashRouter&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>æŠŠ Router ç”¨åœ¨ React ç»„ä»¶æ ‘çš„æœ€é¡¶å±‚ï¼Œè¿™æ˜¯æœ€ä½³å®è·µã€‚å› ä¸ºå°†æ¥æˆ‘ä»¬å¦‚æœæƒ³æŠŠ HashRouter æ¢æˆ BrowserRouterï¼Œç»„ä»¶ App ä»¥ä¸‹å‡ ä¹ä¸ç”¨ä»»ä½•æ”¹å˜ã€‚</p><h3 id="å¸¦-ä¸ä¸å¸¦-çš„è·¯ç”±çš„åŒºåˆ«"><a href="#å¸¦-ä¸ä¸å¸¦-çš„è·¯ç”±çš„åŒºåˆ«" class="headerlink" title="å¸¦#ä¸ä¸å¸¦#çš„è·¯ç”±çš„åŒºåˆ«"></a>å¸¦#ä¸ä¸å¸¦#çš„è·¯ç”±çš„åŒºåˆ«</h3><p>åˆ©ç”¨æœåŠ¡å™¨è§£ææœºåˆ¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šè§£æè·¯ç”±#ä»¥åçš„éƒ¨åˆ†ï¼Œè¯¦ç»†è§æœ¬ç« ç¬¬ã€ŠHashRouter è¿˜æ˜¯ BrowserRouter ä»¥åŠ Router  Route è®²è§£ã€‹</p><h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><p>æ‘˜è‡ªã€ŠReact å®æˆ˜ï¼šè®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µã€‹ç¬¬15ç« ï¼›<br>æˆ‘ä»¬æ¥çœ‹ Content è¿™ä¸ªç»„ä»¶ï¼Œè¿™é‡Œä¼šç”¨åˆ° react-router æœ€å¸¸ç”¨çš„ä¸¤ä¸ªç»„ä»¶ Route å’Œ Switchã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const Content = () =&gt; (</span><br><span class="line">  &lt;main&gt;</span><br><span class="line">    &lt;Switch&gt;</span><br><span class="line">      &lt;Route exact path=&apos;/&apos; component=&#123;Home&#125;/&gt;</span><br><span class="line">      &lt;Route path=&apos;/about&apos; component=&#123;About&#125;/&gt;</span><br><span class="line">    &lt;/Switch&gt;</span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>Route ç»„ä»¶çš„ path å±æ€§ç”¨äºåŒ¹é…è·¯å¾„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åŒ¹é… / åˆ° Homeï¼ŒåŒ¹é… /about åˆ° Aboutï¼Œæ‰€ä»¥è‚¯å®šéœ€è¦ä¸¤ä¸ª Routeï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆå†™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&apos;/&apos; component=&#123;Home&#125;/&gt;</span><br><span class="line">&lt;Route path=&apos;/about&apos; component=&#123;About&#125;/&gt;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæŒ‰ç…§ä¸Šé¢è¿™ä¹ˆå†™ï¼Œå½“è®¿é—® /about é¡µé¢æ—¶ï¼Œä¸å…‰åŒ¹é… /aboutï¼Œä¹Ÿé…ä¸­ /ï¼Œç•Œé¢ä¸Šä¼šæŠŠ Home å’Œ About éƒ½æ¸²æŸ“å‡ºæ¥çš„ã€‚</p><p>è§£å†³æ–¹æ³•ï¼Œå¯ä»¥åœ¨æƒ³è¦ç²¾ç¡®åŒ¹é…çš„ Route ä¸ŠåŠ ä¸€ä¸ªå±æ€§ exactï¼Œæˆ–è€…ä½¿ç”¨ Switch ç»„ä»¶ã€‚</p><p>å¯ä»¥æŠŠ Switch ç»„ä»¶çœ‹åšæ˜¯ JavaScript çš„ switch è¯­å¥ï¼Œåƒè¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">switch (æ¡ä»¶) &#123;</span><br><span class="line">  case 1: æ¸²æŸ“1; break;</span><br><span class="line">  case 2: æ¸²æŸ“2; break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»ä¸Šå¾€ä¸‹æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„ Routeï¼ŒåŒ¹é…ä¸­äº†ä¹‹åï¼Œç«‹åˆ»å°± breakï¼Œä¸ç»§ç»­è¿™ä¸ª Switch ä¸‹å…¶ä»–çš„ Route åŒ¹é…äº†ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œreact-router å·§å¦™åœ°ç”¨ React ç»„ä»¶å®ç°äº†è·¯ç”±çš„æ‰€æœ‰é€»è¾‘ï¼Œå°è¯äº†é‚£å¥è¯ï¼šReact ä¸–ç•Œé‡Œä¸€åˆ‡éƒ½æ˜¯ç»„ä»¶ã€‚</p><h3 id="åŠ¨æ€è·¯ç”±"><a href="#åŠ¨æ€è·¯ç”±" class="headerlink" title="åŠ¨æ€è·¯ç”±"></a>åŠ¨æ€è·¯ç”±</h3><p>æ‘˜è‡ªã€ŠReact å®æˆ˜ï¼šè®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µã€‹ç¬¬15ç« ï¼›<br>åœ¨äº†è§£äº† react-routerçš„åŸºæœ¬è·¯ç”±åŠŸèƒ½ä¹‹åï¼Œå†æ¥ç†è§£â€œåŠ¨æ€è·¯ç”±â€å°±å®¹æ˜“äº†ã€‚</p><p>å‡è®¾ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ªæ–°çš„é¡µé¢å« Productï¼Œå¯¹åº”è·¯å¾„ä¸º /productï¼Œä½†æ˜¯åªæœ‰ç”¨æˆ·ç™»å½•äº†ä¹‹åæ‰æ˜¾ç¤ºã€‚å¦‚æœç”¨é™æ€è·¯ç”±ï¼Œæˆ‘ä»¬åœ¨æ¸²æŸ“ä¹‹å‰å°±ç¡®å®šè¿™æ¡è·¯ç”±è§„åˆ™ï¼Œè¿™æ ·å³ä½¿ç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œä¹Ÿå¯ä»¥è®¿é—® productï¼Œæˆ‘ä»¬è¿˜ä¸å¾—ä¸åœ¨ Product ç»„ä»¶ä¸­åšç”¨æˆ·æ˜¯å¦ç™»å½•çš„æ£€æŸ¥ã€‚</p><p>å¦‚æœç”¨åŠ¨æ€è·¯ç”±ï¼Œåˆ™åªéœ€è¦åœ¨ä»£ç ä¸­çš„ä¸€å¤„æ¶‰åŠè¿™ä¸ªé€»è¾‘ï¼š</p><pre><code>&lt;Switch&gt;  &lt;Route exact path=&apos;/&apos; component={Home}/&gt;  {    isUserLogin() &amp;&amp;    &lt;Route exact path=&apos;/product&apos; component={Product}/&gt;,  }    &lt;Route path=&apos;/about&apos; component={About}/&gt;&lt;/Switch&gt;</code></pre><p>å¯ä»¥ç”¨ä»»ä½•æ¡ä»¶å†³å®š Route ç»„ä»¶å®ä¾‹æ˜¯å¦æ¸²æŸ“ï¼Œæ¯”å¦‚ï¼Œå¯ä»¥æ ¹æ®é¡µé¢å®½åº¦ã€è®¾å¤‡ç±»å‹å†³å®šè·¯ç”±è§„åˆ™ï¼ŒåŠ¨æ€è·¯ç”±æœ‰äº†æœ€å¤§çš„è‡ªç”±åº¦ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
          <category> React Router </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ListBuilderå¼•å‘çš„Reactæš—é»‘æ€è€ƒ</title>
      <link href="/2020/05/01/react_listBuilder/"/>
      <url>/2020/05/01/react_listBuilder/</url>
      
        <content type="html"><![CDATA[<h2 id="editä¸searchçš„æ— æ³•è°ƒå’Œæ˜¯ä¸€åˆ‡æš—é»‘çš„æºå¤´"><a href="#editä¸searchçš„æ— æ³•è°ƒå’Œæ˜¯ä¸€åˆ‡æš—é»‘çš„æºå¤´" class="headerlink" title="editä¸searchçš„æ— æ³•è°ƒå’Œæ˜¯ä¸€åˆ‡æš—é»‘çš„æºå¤´"></a>editä¸searchçš„æ— æ³•è°ƒå’Œæ˜¯ä¸€åˆ‡æš—é»‘çš„æºå¤´</h2><h3 id="éœ€æ±‚ï¼šedit-ä¸-search-åŠŸèƒ½"><a href="#éœ€æ±‚ï¼šedit-ä¸-search-åŠŸèƒ½" class="headerlink" title="éœ€æ±‚ï¼šedit ä¸ search åŠŸèƒ½"></a>éœ€æ±‚ï¼šedit ä¸ search åŠŸèƒ½</h3><p>åœºæ™¯ä¸ºï¼šedit åŠŸèƒ½åªèƒ½å®šä¹‰åœ¨ä¸šåŠ¡ç»„å»ºå†…ï¼Œä¸” edit åŠŸèƒ½æ¯æ¬¡éƒ½è¦setState ListBuilderçš„dataã€‚<br><strong>searchåŠŸèƒ½å¿…é¡»æ”¾åœ¨ListBuilderå†…</strong>ï¼ŒsearchåŠŸèƒ½æ¯æ¬¡ä¹Ÿè¦æ”¹å˜ListBuilderçš„dataã€‚</p><h3 id="ä¸ºä»€ä¹ˆæ— æ³•è°ƒå’Œ"><a href="#ä¸ºä»€ä¹ˆæ— æ³•è°ƒå’Œ" class="headerlink" title="ä¸ºä»€ä¹ˆæ— æ³•è°ƒå’Œ"></a>ä¸ºä»€ä¹ˆæ— æ³•è°ƒå’Œ</h3><p>äºŒè€…æ— æ³•è°ƒå’Œæ˜¯åœ¨äºï¼Œeditä¸searchè¦æ±‚åŒæ—¶éƒ½å®Œå…¨æ§åˆ¶stateï¼Œä½†editå¿…é¡»ä½äºç»„ä»¶å¤–å±‚ï¼Œsearchå¿…é¡»ä½äºç»„ä»¶å†…å±‚ï¼Œ<br>ç”±äºeditä½äºå¤–å±‚ï¼Œä½ å¿…é¡»å°†listBuilderç»„ä»¶åšæˆå®Œå…¨å—æ§ç»„ä»¶ï¼Œè¦æ±‚ç»„ä»¶å†…éƒ¨ä½¿ç”¨propsæ¸²æŸ“ï¼›<br>ç”±äºsearchä½äºå†…å±‚ï¼Œä¸”è¦æ±‚å®Œå…¨æ“æ§æ•°æ®ï¼Œå› ä¸ºç»„ä»¶å¿…é¡»åšæˆstateæ–¹å¼ï¼Œä¸èƒ½å“åº”å¤–å±‚propsæ•°æ®å˜åŠ¨ï¼›<br>è§£å†³æ–¹æ³•ï¼ˆä¹Ÿæ˜¯ä¸‹é¢çš„ <strong>ç»ˆææ–¹æ¡ˆ</strong>ï¼‰ï¼š</p><ul><li>å°†ç»„ä»¶åšæˆå®Œå…¨å—æ§ï¼Œå®ŒæˆeditåŠŸèƒ½ï¼›</li><li>å°†ç»„ä»¶çš„æ•°æ®åšæˆå¯¹è±¡æ–¹å¼ï¼Œsearchæ—¶ï¼Œå®æ—¶æ”¹åŠ¨å¯¹è±¡ï¼Œåˆ©ç”¨å¯¹è±¡å¼•ç”¨ç‰¹å¾ï¼Œæ”¹åŠ¨å®Œå ä½¿ç”¨forceUpdateï¼Œæ¸²æŸ“ç»„ä»¶ï¼Œåœ¨renderä¸Šæ¯æ¬¡ functioné‡æ–°ç»„ä»¶propsæ•°æ®ï¼›</li></ul><p>è¿™æ ·ç»„ä»¶å°±å¯ä»¥åŒæ—¶å“åº”editå’Œsearchçš„å˜åŠ¨ã€‚</p><h3 id="æ–¹æ¡ˆä¸€-å¦å®š"><a href="#æ–¹æ¡ˆä¸€-å¦å®š" class="headerlink" title="æ–¹æ¡ˆä¸€(å¦å®š)"></a>æ–¹æ¡ˆä¸€(å¦å®š)</h3><p>searchå’Œeditéƒ½æ”¾åœ¨ä¸šåŠ¡ç»„å»ºå†…å†™ï¼Œæ­¤æ—¶å°±ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯æ˜æ˜¾è¿èƒŒäº†ä¸Šé¢è¯´çš„ <strong>searchåŠŸèƒ½å¿…é¡»æ”¾åœ¨ListBuilderå†…</strong>ã€‚æ­¤æ–¹æ¡ˆä¸è¡Œã€‚</p><h3 id="æ–¹æ¡ˆäºŒ-å¦å®š"><a href="#æ–¹æ¡ˆäºŒ-å¦å®š" class="headerlink" title="æ–¹æ¡ˆäºŒ(å¦å®š)"></a>æ–¹æ¡ˆäºŒ(å¦å®š)</h3><p>åœ¨ListBuilderå†…éƒ¨ç»´æŠ¤stateï¼ŒåŒæ—¶ç”¨ getDerivedStateFromProps è®©ListBuilderç»„ä»¶å®Œå…¨å—æ§ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> getDerivedStateFromProps(props,state)&#123;    </span><br><span class="line">    <span class="keyword">if</span>(props.value !== state.value)&#123;      </span><br><span class="line">        <span class="keyword">return</span> &#123;        </span><br><span class="line">            value:props.value      </span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡edit æ¥ç»´æŠ¤propsï¼Œç”¨search ç»´æŠ¤è‡ªèº«çš„stateï¼Œè¿™æ ·è¯´èµ·æ¥ï¼Œè²Œä¼¼å®Œç¾è§£å†³æ¥é—®é¢˜ã€‚<br>ä½†ä½ æ³¨æ„çœ‹ä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå‘ç°ï¼Œè¿™ç§æ¨¡å¼æœ‰ä¸€ä¸‹å¼Šç«¯ï¼š</p><ul><li>æˆ‘ä»¬å¸Œæœ›æ˜¯å½“æœ‰propsæ”¹åŠ¨çš„æ—¶å€™ï¼Œstateå€¼ä¸ºpropsï¼›stateè‡ªèº«æ”¹åŠ¨æ—¶ï¼Œstateå€¼å“åº”ä¸ºè‡ªèº«stateï¼›ä½†ä¸Šé¢çš„getDerivedStateFromPropsä»£ç å®é™…ä¸Šåªå“åº”propsï¼Œstateå®Œå…¨å“åº”propsçš„å˜åŒ–ï¼Œè‡ªèº«stateçš„å€¼æ— æ³•æ³¨å…¥ç»™è‡ªå·±ã€‚</li><li>å°±ç®—é€šè¿‡å„ç§if else è®©ç»„ä»¶èƒ½å¤Ÿè¾¾åˆ°åŒæ—¶å“åº”propså’Œstateï¼Œè¿™ä¸ªè¿‡ç¨‹ç—›è‹¦ä¸è¯´ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šå¼Šç«¯ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œçˆ¶å±‚å¦‚ä½•å®æ—¶çŸ¥é“ListBuilderæœ€æ–°æ¸²æŸ“çš„dataå€¼ã€‚</li><li>è¿™ç§å†™å‡ºæ¥çš„ç»„ä»¶ï¼ŒåæœŸæ‰©å±•æ—¶åŒæ—¶è¦æµ‹è¯• getDerivedStateFromPropsï¼Œéº»çƒ¦ä¸è¯´ï¼Œè¿˜å®¹æ˜“å‡ºç°æ„æƒ³ä¸åˆ°çš„bugã€‚<h3 id="ç»ˆææ–¹æ¡ˆâ€“forceUpdate-å®æ—¶ç”Ÿæˆrenderæœ€æ–°props-å¯¹è±¡å¼•ç”¨"><a href="#ç»ˆææ–¹æ¡ˆâ€“forceUpdate-å®æ—¶ç”Ÿæˆrenderæœ€æ–°props-å¯¹è±¡å¼•ç”¨" class="headerlink" title="ç»ˆææ–¹æ¡ˆâ€“forceUpdate+å®æ—¶ç”Ÿæˆrenderæœ€æ–°props+å¯¹è±¡å¼•ç”¨"></a>ç»ˆææ–¹æ¡ˆâ€“forceUpdate+å®æ—¶ç”Ÿæˆrenderæœ€æ–°props+å¯¹è±¡å¼•ç”¨</h3>å·²çŸ¥ï¼Œdataä¸ºä¸‹é¢çš„å½¢å¼ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row1'</span>, <span class="attr">value</span>: <span class="string">'r1'</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row2'</span>, <span class="attr">value</span>: <span class="string">'r3'</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ul><p>ä»¥ä¸Šæ–¹æ¡ˆéƒ½ä¸è¡Œï¼Œè¿˜æœ‰ä»€ä¹ˆæ–¹æ³•äº†ï¼Œæ²¡åŠæ³•ï¼Œåªèƒ½å¼€å¯æš—é»‘æ–¹å¼äº†ï¼š</p><ul><li>æˆ‘ä»¬å¯ä»¥åœ¨ edit æ—¶è¿˜æ˜¯setState ListBuilderçš„dataï¼Œ</li><li><p>ç„¶ååœ¨ListBuilderç»„ä»¶å†…éƒ¨ï¼ŒsearchåŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬ç»™dataçš„æ¯æ¡æ•°æ®<code>{name: &#39;row1&#39;, value: &#39;r1&#39;}</code>ï¼Œæ·»åŠ ä¸€ä¸ª visableå±æ€§ï¼ŒæŒ‰æ¡ä»¶é‡ç½®ä¸ºtrueæˆ–falseï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row1'</span>, <span class="attr">value</span>: <span class="string">'r1'</span>, <span class="attr">visable</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row2'</span>, <span class="attr">value</span>: <span class="string">'r3'</span>, <span class="attr">visable</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>searchå®Œåï¼Œåœ¨ListBuilderå†…éƒ¨ï¼Œæ‰§è¡Œä¸€æ¬¡ï¼Œæ­¤æ—¶ListBuilderå†…éƒ¨renderå‡½æ•°å°±ä¼šæ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.forceUpdate()</span><br></pre></td></tr></table></figure></li><li><p>ç„¶ååœ¨ListBuilderçš„å†…éƒ¨renderæ–¹æ³•å†…å®šä¹‰ä¸€ä¸ªfunctionï¼Œè¿‡æ»¤æ‰falseçš„ï¼Œåªç•™ä¸‹ <code>visable: true</code>;</p></li><li>ç”±äºsearchæ“ä½œçš„æ˜¯dataå†…çš„æ¯æ¡æ•°æ®ï¼Œè€Œæ¯æ¡æ•°æ®åˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ©ç”¨å¯¹è±¡çš„å¼•ç”¨ç±»å‹ç‰¹æ€§ï¼Œä¸€å¤„æ”¹å˜ï¼Œå…¶ä»–åœ°æ–¹éƒ½ä¼šæ”¹å˜ï¼Œå› æ­¤æ ¹æœ¬ä¸éœ€è¦setStateï¼Œåœ¨renderä½¿ç”¨dataæ”¾åœ¨functionä¸Šè¿‡æ»¤æ—¶ï¼Œå°±å·²ç»æœ‰visableå±æ€§äº†ã€‚</li><li>è¿™æ ·ç»™renderå†…çš„ç»„ä»¶å¦‚(grid æˆ– TreeList)ä¼ çš„å€¼å°±è¾¾åˆ°é¢„æœŸè¦æ±‚ã€‚</li></ul><p>è¿™ä¸€ç§æ–¹æ¡ˆå¤ªå¦™äº†ï¼Œå› ä¸ºå…¶åŠŸèƒ½çš„å¼ºå¤§æ€§ï¼Œç”¨èµ·æ¥å¾ˆçˆ½ï¼Œä½†åˆæ˜¯ä¸€ç§åæ¨¡å¼è¿ç”¨ï¼Œè®©ç”¨èµ·æ¥çš„æ—¶å€™å¾ˆç”±äºï¼Œæ•…ç§°æš—é»‘ã€‚</p><p>è¿™ç§æ–¹æ¡ˆï¼Œå…³é”®åœ¨äºåˆ©ç”¨äº†å¯¹è±¡å¼•ç”¨ç‰¹å¾ï¼Œåœ¨ä¿®æ”¹å®Œæ•°æ®åï¼Œä½¿ç”¨forceUpdateï¼Œè§¦å‘renderï¼Œç„¶ååœ¨renderä¸­ å®æ—¶ç”Ÿæˆprops.</p><h3 id="å®Œå…¨å—æ§ç»„ä»¶å¦‚ä½•è‡ªå·±æ”¹å˜çŠ¶æ€"><a href="#å®Œå…¨å—æ§ç»„ä»¶å¦‚ä½•è‡ªå·±æ”¹å˜çŠ¶æ€" class="headerlink" title="å®Œå…¨å—æ§ç»„ä»¶å¦‚ä½•è‡ªå·±æ”¹å˜çŠ¶æ€"></a>å®Œå…¨å—æ§ç»„ä»¶å¦‚ä½•è‡ªå·±æ”¹å˜çŠ¶æ€</h3><p>ä¸Šé¢çš„ã€Šç»ˆææ–¹æ¡ˆâ€“forceUpdate+å®æ—¶ç”Ÿæˆrenderæœ€æ–°props+å¯¹è±¡å¼•ç”¨ã€‹ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ€è·¯ï¼Œå½“æˆ‘ä»¬é¢ä¸´ åƒä¸Šé¢éœ€æ±‚ä¸€æ ·ï¼Œ<br>çˆ¶å±‚è¦å®æ—¶æ“æ§ä¸€ä¸ªå®Œå…¨å—æ§çš„å­ç»„ä»¶ï¼Œè€Œå®Œå…¨å—æ§çš„å­ç»„ä»¶åŒæ—¶åˆæƒ³åœ¨å†…éƒ¨è‡ªå·±æ”¹å˜çŠ¶æ€ã€‚<br>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åƒä¸Šé¢ä¸€æ ·ï¼Œåˆ©ç”¨å¼•ç”¨ç±»å‹ç‰¹æ€§ï¼Œrenderæ—¶æ¯æ¬¡ç”Ÿæˆæœ€æ–°çŠ¶æ€çš„æ–¹æ¡ˆã€‚</p><h3 id="å¦‚ä½•è®©çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŒæ—¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„state"><a href="#å¦‚ä½•è®©çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŒæ—¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„state" class="headerlink" title="å¦‚ä½•è®©çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŒæ—¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„state"></a>å¦‚ä½•è®©çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŒæ—¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„state</h3><p>å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·æè¿°ä¸Šé¢çš„éœ€è¦ï¼Œå¦‚ä½•è®©çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶åŒæ—¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„stateã€‚</p><h3 id="setStateä¹‹å¤–çš„setStateæ–¹æ¡ˆ"><a href="#setStateä¹‹å¤–çš„setStateæ–¹æ¡ˆ" class="headerlink" title="setStateä¹‹å¤–çš„setStateæ–¹æ¡ˆ"></a>setStateä¹‹å¤–çš„setStateæ–¹æ¡ˆ</h3><p>æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢ ã€Šç»ˆææ–¹æ¡ˆâ€“forceUpdate+å®æ—¶ç”Ÿæˆrenderæœ€æ–°props+å¯¹è±¡å¼•ç”¨ã€‹ç§°ä¹‹ä¸º setStateä¹‹å¤–çš„setStateæ–¹æ¡ˆï¼Œæ¯•ç«Ÿå®ƒè®©ListBuilderå†…éƒ¨å®ç°äº†ä¸€æ¬¡setStateï¼Œè€Œåˆä¸é€šè¿‡ä»»ä½•setStateæ–¹æ³•ã€‚</p><h3 id="å¦‚æœdataçš„æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"><a href="#å¦‚æœdataçš„æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²" class="headerlink" title="å¦‚æœdataçš„æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²"></a>å¦‚æœdataçš„æ¯æ¡æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</h3><p>å¦‚ä¸‹ï¼Œå¦‚é¢˜ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†dataåœ¨ä½¿ç”¨ä¹‹å‰ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•å°†dataè½¬åŒ–ä¸ºä¸€ä¸ªæ¯æ¡æ•°æ®ä¸ºå¯¹è±¡çš„dataç»“æ„ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ¡ˆäº†ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> data = [<span class="string">'row1'</span>, <span class="string">'row2'</span>]</span><br></pre></td></tr></table></figure></p><h2 id="listRow"><a href="#listRow" class="headerlink" title="listRow"></a>listRow</h2><h3 id="éœ€æ±‚ï¼šå†…å®¹å¯ä»¥æ˜¯TreeList-ä¸-Grid"><a href="#éœ€æ±‚ï¼šå†…å®¹å¯ä»¥æ˜¯TreeList-ä¸-Grid" class="headerlink" title="éœ€æ±‚ï¼šå†…å®¹å¯ä»¥æ˜¯TreeList ä¸ Grid"></a>éœ€æ±‚ï¼šå†…å®¹å¯ä»¥æ˜¯TreeList ä¸ Grid</h3><p>ç”± ã€Šeditä¸searchçš„æ— æ³•è°ƒå’Œæ˜¯ä¸€åˆ‡æš—é»‘çš„æºå¤´ã€‹å†³å®šäº† demoé‡‡ç”¨ ã€Šç»ˆææ–¹æ¡ˆâ€“forceUpdate+å®æ—¶ç”Ÿæˆrenderæœ€æ–°props+å¯¹è±¡å¼•ç”¨ã€‹çš„æ–¹å¼ã€‚<br>æ¥ç€è€ƒè™‘ä¸‹é¢çš„éœ€æ±‚ï¼šListBuilderå†…çš„ç»„ä»¶å¯ä»¥æ˜¯ TreeList ä¸ Gridï¼Œä¸” ListBuilderè¦å°†å‘å·¦å‘å³ç§»åŠ¨çš„å…¬å…±é€»è¾‘æŠ½è±¡å‡ºæ¥ã€‚</p><h3 id="TreeListä¸Gridæ•°æ®ç»“æ„ä¸ä¸€æ ·"><a href="#TreeListä¸Gridæ•°æ®ç»“æ„ä¸ä¸€æ ·" class="headerlink" title="TreeListä¸Gridæ•°æ®ç»“æ„ä¸ä¸€æ ·"></a>TreeListä¸Gridæ•°æ®ç»“æ„ä¸ä¸€æ ·</h3><p>æ­¤æ—¶æˆ‘ä»¬é¢ä¸´ç€ä¸€ä¸ªé—®é¢˜ï¼ŒTreeListä¸Gridçš„æ•°æ®ç»“æ„æ˜¯ä¸ä¸€æ ·çš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> gridData = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row1'</span>, <span class="attr">value</span>: <span class="string">'r1'</span>, <span class="attr">visable</span>: ture&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">'row2'</span>, <span class="attr">value</span>: <span class="string">'r3'</span>, <span class="attr">visable</span>: <span class="literal">false</span>&#125;,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> treeData = [</span><br><span class="line">    &#123;<span class="attr">isBranch</span>: <span class="literal">true</span>, <span class="attr">name</span>: <span class="string">'branch-name'</span>, <span class="attr">children</span>: [<span class="string">'tree-cell1'</span>]&#125;,</span><br><span class="line">    &#123;<span class="attr">isBranch</span>: <span class="literal">false</span>, <span class="attr">name</span>: <span class="string">'tree-cell1'</span>&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="ListBuilderå‘å·¦-å³ç§»åŠ¨é€»è¾‘ä¸éœ€å…³å¿ƒæ•°æ®ç»“æ„"><a href="#ListBuilderå‘å·¦-å³ç§»åŠ¨é€»è¾‘ä¸éœ€å…³å¿ƒæ•°æ®ç»“æ„" class="headerlink" title="ListBuilderå‘å·¦\å³ç§»åŠ¨é€»è¾‘ä¸éœ€å…³å¿ƒæ•°æ®ç»“æ„"></a>ListBuilderå‘å·¦\å³ç§»åŠ¨é€»è¾‘ä¸éœ€å…³å¿ƒæ•°æ®ç»“æ„</h3><p>ä¸è¿‡å¦å¤–ä¸€ä¸ªæ–¹é¢ï¼Œå‘å·¦ï¼Œå‘å³ä½†ç§»åŠ¨é€»è¾‘æ ¹æœ¬ä¸éœ€è¦å…³å¿ƒTreeListä¸Gridæ‰€ç”¨çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æ–°å»ºä¸€ç§ä¸“é—¨ç”¨äºå·¦å³ç§»åŠ¨çš„æ•°æ®ç»“æ„å‘¢ã€‚åœ¨ListBuilderå†…ä½¿ç”¨ListRowæ•°æ®çš„stateè¿›è¡Œå·¦å³ç§»åŠ¨ï¼Œåœ¨ç»™å…·ä½“TreeListã€Gridæ—¶ï¼Œåœ¨Renderå‡½æ•°å†…ï¼Œå°†ListRowè½¬æ¢ä¸ºä¸Šé¢æ ¼å¼çš„gridDataã€treeDataã€‚<br>åŸºäºæ­¤æƒ³æ³•ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ListRowè¿™ç§æ•°æ®ç»“æ„ã€‚</p><h3 id="åˆ›å»ºListRowçš„data"><a href="#åˆ›å»ºListRowçš„data" class="headerlink" title="åˆ›å»ºListRowçš„data"></a>åˆ›å»ºListRowçš„data</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListRow</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(key, row)&#123;</span><br><span class="line">        <span class="keyword">this</span>.dataRow= row;</span><br><span class="line">        <span class="keyword">this</span>._id_ = key;</span><br><span class="line">        <span class="keyword">this</span>.visable = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data = data.map(<span class="function"><span class="params">row</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> newRow = <span class="keyword">new</span> ListRow(row);</span><br><span class="line">    newRow.visable = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">return</span> newRow;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ ‡è®°åˆ é™¤è€Œä¸ç›´æ¥åˆ é™¤-å·¦å³ç§»åŠ¨"><a href="#æ ‡è®°åˆ é™¤è€Œä¸ç›´æ¥åˆ é™¤-å·¦å³ç§»åŠ¨" class="headerlink" title="æ ‡è®°åˆ é™¤è€Œä¸ç›´æ¥åˆ é™¤ - å·¦å³ç§»åŠ¨"></a>æ ‡è®°åˆ é™¤è€Œä¸ç›´æ¥åˆ é™¤ - å·¦å³ç§»åŠ¨</h3><p>ç”±äºæˆ‘ä»¬åœ¨renderçš„æ—¶å€™æ€»æ˜¯é€šè¿‡function è¯»å– dataï¼Œé‡æ–°ç”Ÿæˆ gridç­‰çœŸæ­£ä½¿ç”¨çš„dataï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç›´æ¥åˆ é™¤dataï¼Œè€Œåªéœ€ç»™dataå†…çš„ListRowåŠ ä¸€ä¸ªvisableå±æ€§ï¼Œæ¥æ ‡è®°åˆ é™¤ã€‚</p><h3 id="visableå¯ç”¨äºsearchã€å·¦å³ç§»åŠ¨ã€‚"><a href="#visableå¯ç”¨äºsearchã€å·¦å³ç§»åŠ¨ã€‚" class="headerlink" title="visableå¯ç”¨äºsearchã€å·¦å³ç§»åŠ¨ã€‚"></a>visableå¯ç”¨äºsearchã€å·¦å³ç§»åŠ¨ã€‚</h3><p>è§ä¸Šé¢çš„åˆ†æã€‚</p><h3 id="å¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops"><a href="#å¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops" class="headerlink" title="å¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops"></a>å¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops</h3><p>ç”±ä¸Šé¢åˆ†æå¯çŸ¥ï¼Œä¸“é—¨åˆ›å»ºä¸€ä¸ªListRowæ•°æ®æ¥åšå·¦å³ç§»åŠ¨ï¼Œç„¶ååœ¨renderçš„æ—¶å€™ï¼Œå¿…é¡»åŒæ—¶ä½¿ç”¨functioné‡æ–°ç”ŸæˆGridæˆ–TreeListéœ€è¦çš„æ•°æ®ï¼Œä»¥ä¼ ç»™å®ƒä»¬ã€‚</p><h3 id="ListRowçš„å¥½å¤„"><a href="#ListRowçš„å¥½å¤„" class="headerlink" title="ListRowçš„å¥½å¤„"></a>ListRowçš„å¥½å¤„</h3><h4 id="éš”ç»äº†ä¸šåŠ¡é€»è¾‘å½±å“"><a href="#éš”ç»äº†ä¸šåŠ¡é€»è¾‘å½±å“" class="headerlink" title="éš”ç»äº†ä¸šåŠ¡é€»è¾‘å½±å“"></a>éš”ç»äº†ä¸šåŠ¡é€»è¾‘å½±å“</h4><p>åˆ›å»ºä¸€ä¸ªlistRowåï¼ŒListBuilderç»„ä»¶ä¸éœ€è¦å…³å¿ƒä¸šåŠ¡å½“ä¸­åˆ°åº•æ˜¯Gridæˆ–TreeListã€‚</p><h4 id="ListBuilderå¯å‡­ListRowä¸“å¿ƒæŠ½è±¡å…¬å…±é€»è¾‘"><a href="#ListBuilderå¯å‡­ListRowä¸“å¿ƒæŠ½è±¡å…¬å…±é€»è¾‘" class="headerlink" title="ListBuilderå¯å‡­ListRowä¸“å¿ƒæŠ½è±¡å…¬å…±é€»è¾‘"></a>ListBuilderå¯å‡­ListRowä¸“å¿ƒæŠ½è±¡å…¬å…±é€»è¾‘</h4><p>ListRowæ˜¯ä¸“é—¨ä¸ºäº†searchã€å·¦å³ç§»åŠ¨è€Œåˆ›å»ºçš„æ•°æ®ç»“æ„ï¼ŒListBuilderå¯ä»¥å› æ­¤ä¸“å¿ƒæŠ½è±¡è¿™éƒ¨åˆ†çš„å…¬å…±é€»è¾‘ã€‚</p><h4 id="æ³¨æ„ï¼Œå¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops"><a href="#æ³¨æ„ï¼Œå¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops" class="headerlink" title="æ³¨æ„ï¼Œå¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops"></a>æ³¨æ„ï¼Œå¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆprops</h4><p>è¿™ä¸æ˜¯listRowçš„å¥½å¤„ï¼Œä½†æ­¤æ—¶å†æ¬¡æé†’ï¼Œè¯´æ˜äº†åˆ›å»ºListRowçš„ä»£ä»·ä¹Ÿå¥½ï¼Œä½¿ç”¨ç‰¹ç‚¹ä¹Ÿå¥½ï¼Œéƒ½renderå…·ä½“ç»„ä»¶æ—¶ï¼Œéƒ½éœ€è¦renderå‡½æ•°å†…å®æ—¶é‡æ–°ç”Ÿæˆpropsã€‚<br><figure class="image-box">                <img src="/image/react/list_row.jpg" alt title class>                <p></p>            </figure></p><h3 id="ä½¿ç”¨ç‰¹ç‚¹ä¸å¼Šç«¯"><a href="#ä½¿ç”¨ç‰¹ç‚¹ä¸å¼Šç«¯" class="headerlink" title="ä½¿ç”¨ç‰¹ç‚¹ä¸å¼Šç«¯"></a>ä½¿ç”¨ç‰¹ç‚¹ä¸å¼Šç«¯</h3><p>å‚è€ƒ ã€ŠListRowçš„å¥½å¤„ â€” æ³¨æ„ï¼Œå¿…é¡»é…åˆrenderæ—¶å®æ—¶é‡æ–°ç”Ÿæˆpropsã€‹ï¼Œrenderå‡½æ•°å†…å®æ—¶é‡æ–°ç”Ÿæˆpropsæ˜¯ä¸€ç§åæ¨¡å¼è¿ç”¨ã€‚å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªå¼Šç«¯ï¼Œä½†å½“å‰æµè§ˆå™¨å¯¹äºåŒæ­¥ä»£ç æ‰§è¡Œæ•ˆç‡å¤ªå¥½ï¼Œæ„Ÿè§‰æ€»æ˜¯è°ˆæ€§èƒ½çš„ï¼Œå°±å¥½åƒä¸€ä¸ªä¼ªå‘½é¢˜ä¸€æ ·</p><h2 id="ç»„ä»¶çš„æ¨¡ç‰ˆè®¾è®¡"><a href="#ç»„ä»¶çš„æ¨¡ç‰ˆè®¾è®¡" class="headerlink" title="ç»„ä»¶çš„æ¨¡ç‰ˆè®¾è®¡"></a>ç»„ä»¶çš„æ¨¡ç‰ˆè®¾è®¡</h2><h3 id="ç»„ä»¶æ¨¡ç‰ˆè®¾è®¡å›¾"><a href="#ç»„ä»¶æ¨¡ç‰ˆè®¾è®¡å›¾" class="headerlink" title="ç»„ä»¶æ¨¡ç‰ˆè®¾è®¡å›¾"></a>ç»„ä»¶æ¨¡ç‰ˆè®¾è®¡å›¾</h3><figure class="image-box">                <img src="/image/react/comp.jpg" alt title class>                <p></p>            </figure><h3 id="æš´éœ²ç»™å¤–å±‚çš„è®¾è®¡"><a href="#æš´éœ²ç»™å¤–å±‚çš„è®¾è®¡" class="headerlink" title="æš´éœ²ç»™å¤–å±‚çš„è®¾è®¡"></a>æš´éœ²ç»™å¤–å±‚çš„è®¾è®¡</h3><p>å¦‚ä¸Šå›¾ï¼Œå› ä¸ºListBuilderåœ¨å†…éƒ¨ä¼šå°è£…å·¦å³ç§»åŠ¨ï¼Œæ‰€ä»¥å¤–å±‚ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€å®šä¹‰ä¸šåŠ¡ç»„ä»¶çš„gridç­‰ç­‰è¿™äº›å·¦å³ä¸¤è¾¹é¢æ¿ã€‚</p><h3 id="ListBuilderæœ¬èº«è®¾è®¡"><a href="#ListBuilderæœ¬èº«è®¾è®¡" class="headerlink" title="ListBuilderæœ¬èº«è®¾è®¡"></a>ListBuilderæœ¬èº«è®¾è®¡</h3><p>æ­¤å¤„æŠ½è±¡å·¦å³ç§»åŠ¨çš„å…¬å…±é€»è¾‘</p><h3 id="listPanelè®¾è®¡"><a href="#listPanelè®¾è®¡" class="headerlink" title="listPanelè®¾è®¡"></a>listPanelè®¾è®¡</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>é¢æ¿çš„æ¸²æŸ“ç»Ÿç»Ÿåœ¨ListPanelç»„ä»¶å†…ï¼Œä¸åŒçš„ä¸šåŠ¡ç»„ä»¶ï¼Œå¦‚Gridã€TreeListï¼Œåœ¨renderå‡½æ•°å†…ï¼Œåœ¨æ­¤ä½¿ç”¨ä¸€ä¸ªfunction ç”Ÿæˆå¯¹åº”çš„propsï¼Œ</p><h4 id="renderå®æ—¶é‡æ–°ç”Ÿæˆpropsçš„å¥½å¤„"><a href="#renderå®æ—¶é‡æ–°ç”Ÿæˆpropsçš„å¥½å¤„" class="headerlink" title="renderå®æ—¶é‡æ–°ç”Ÿæˆpropsçš„å¥½å¤„"></a>renderå®æ—¶é‡æ–°ç”Ÿæˆpropsçš„å¥½å¤„</h4><p>listPanelç»„ä»¶å†…å¯ä»¥éå¸¸æ–¹ä¾¿åœ°è·å–ListBuilderæ‰€æœ‰çš„ä¿¡æ¯ï¼Œåœ¨å®æ—¶ç”Ÿæˆpropsæ—¶ï¼Œæ¯”å¦‚ç”ŸæˆåŒå‡»äº‹ä»¶çš„propsæ—¶ï¼Œå¯ä»¥å°†ListBuilderæ‰€æœ‰çš„ä¿¡æ¯å¯ä»¥éå¸¸æ–¹ä¾¿çš„ä¼ ç»™åŒå‡»äº‹ä»¶è¿™ä¸ªpropså±æ€§ã€‚</p><h4 id="ä¸šåŠ¡ä»£ç é€šè¿‡function-configæ³¨å…¥"><a href="#ä¸šåŠ¡ä»£ç é€šè¿‡function-configæ³¨å…¥" class="headerlink" title="ä¸šåŠ¡ä»£ç é€šè¿‡function configæ³¨å…¥"></a>ä¸šåŠ¡ä»£ç é€šè¿‡function configæ³¨å…¥</h4><p>Gridã€TreeListç»„ä»¶çš„ç‰¹å®šprops(ä¸šåŠ¡å±‚é¢é€»è¾‘)å¯åœ¨æ­¤é€šè¿‡configé…ç½®çš„æ–¹å¼æ³¨å…¥ï¼Œç”±render æ—¶ï¼Œæ¯æ¬¡æ‰§è¡Œfunction(config)æ³¨å…¥ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ListPanel</span></span><br><span class="line">render()&#123;</span><br><span class="line">  <span class="keyword">const</span> allProps = Fn(config)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;SearchBox /&gt;</span><br><span class="line">      &lt;Grid &#123;...allProps&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h2 id="React-cloneElement"><a href="#React-cloneElement" class="headerlink" title="React.cloneElement"></a>React.cloneElement</h2><h3 id="cloneElementè®©æ¨¡ç‰ˆè®¾è®¡æˆä¸ºå¯èƒ½"><a href="#cloneElementè®©æ¨¡ç‰ˆè®¾è®¡æˆä¸ºå¯èƒ½" class="headerlink" title="cloneElementè®©æ¨¡ç‰ˆè®¾è®¡æˆä¸ºå¯èƒ½"></a>cloneElementè®©æ¨¡ç‰ˆè®¾è®¡æˆä¸ºå¯èƒ½</h3><h4 id="åªè¦ä¼ ç»„ä»¶è¿›æ¥ï¼Œæˆ‘å°±èƒ½ç»™ä½ ç»„è£…"><a href="#åªè¦ä¼ ç»„ä»¶è¿›æ¥ï¼Œæˆ‘å°±èƒ½ç»™ä½ ç»„è£…" class="headerlink" title="åªè¦ä¼ ç»„ä»¶è¿›æ¥ï¼Œæˆ‘å°±èƒ½ç»™ä½ ç»„è£…"></a>åªè¦ä¼ ç»„ä»¶è¿›æ¥ï¼Œæˆ‘å°±èƒ½ç»™ä½ ç»„è£…</h4><p>æ— è®ºä½ é€šè¿‡ä»€ä¹ˆæ–¹å¼å°†ç»„ä»¶ä¼ ç»™ListBuilderï¼Œé€šè¿‡propsä¹Ÿå¥½ï¼Œè¿˜æ˜¯childä¹Ÿå¥½ï¼Œåœ¨ListBuilderå†…éƒ¨éƒ½å¯ä»¥é€šè¿‡React.cloneElementå°†ç»„ä»¶å†æ¬¡ç»„è£…ï¼Œé‡æ–°renderã€‚</p><h4 id="cloneElementå†æ¬¡ç»„è£…propséå¸¸æ–¹ä¾¿"><a href="#cloneElementå†æ¬¡ç»„è£…propséå¸¸æ–¹ä¾¿" class="headerlink" title="cloneElementå†æ¬¡ç»„è£…propséå¸¸æ–¹ä¾¿"></a>cloneElementå†æ¬¡ç»„è£…propséå¸¸æ–¹ä¾¿</h4><p>è¿™æ˜¯cloneElementçš„ç‰¹æ€§ã€‚</p><h3 id="cloneElementçš„å…¶ä»–å¥½å¤„"><a href="#cloneElementçš„å…¶ä»–å¥½å¤„" class="headerlink" title="cloneElementçš„å…¶ä»–å¥½å¤„"></a>cloneElementçš„å…¶ä»–å¥½å¤„</h3><h4 id="å¾ˆæ–¹ä¾¿åœ°ç»™propså¢åŠ å…¶ä»–ç»„ä»¶çš„æ•°æ®"><a href="#å¾ˆæ–¹ä¾¿åœ°ç»™propså¢åŠ å…¶ä»–ç»„ä»¶çš„æ•°æ®" class="headerlink" title="å¾ˆæ–¹ä¾¿åœ°ç»™propså¢åŠ å…¶ä»–ç»„ä»¶çš„æ•°æ®"></a>å¾ˆæ–¹ä¾¿åœ°ç»™propså¢åŠ å…¶ä»–ç»„ä»¶çš„æ•°æ®</h4><p>æ¯”å¦‚å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å°†çˆ¶å±‚çš„functionï¼Œstateï¼Œpropsï¼Œæ³¨å…¥åˆ°è¢«ç»„è£…çš„ç»„ä»¶ä¸­ã€‚</p><h2 id="å°æŠ€å·§"><a href="#å°æŠ€å·§" class="headerlink" title="å°æŠ€å·§"></a>å°æŠ€å·§</h2><h3 id="propsåŒæ—¶ä¸ºfunctionå’Œstring"><a href="#propsåŒæ—¶ä¸ºfunctionå’Œstring" class="headerlink" title="propsåŒæ—¶ä¸ºfunctionå’Œstring"></a>propsåŒæ—¶ä¸ºfunctionå’Œstring</h3><p>æ¯”å¦‚ç»™ä¸€ä¸ªListRowæŒ‡å®šä¸€ä¸ªå”¯ä¸€Idï¼Œå‡å¦‚æœ‰identity è¿™ä¸ªpropsï¼Œå®šä¹‰identityä¸º stræ—¶ï¼Œ idä¸º <code>ListRow[identity]</code>,å½“ä¸ºfunctionæ—¶ï¼Œidä¸ºidentity(ListRow).<br>æˆ‘ä»¬åœ¨è®¾ç½®propså±æ€§æ—¶ï¼Œä¸€èˆ¬å¸Œæœ›æ­¤å±æ€§æœ€å¥½æ˜¯ä¸€ç§ç±»å‹ï¼Œä¸è¦è®¾ç½®å¤šç§ï¼Œä½†æ˜¯å¯ä»¥functionæ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå¯ä»¥ç»™propsè®¾ç½®å¤šä¸€ä¸ªfunctionå±æ€§ï¼Œå› ä¸ºå¾ˆfunctionè®©ç¨‹åº<strong>æ›´çµæ´»ï¼Œæ‰©å±•æ€§å¼º</strong>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const &#123;identity&#125; = this.props;</span><br><span class="line">typeof identity === &apos;function&apos; ? identity(ListRow) : ListRow[identity]</span><br></pre></td></tr></table></figure></p><h3 id="mapçš„ä½¿ç”¨"><a href="#mapçš„ä½¿ç”¨" class="headerlink" title="mapçš„ä½¿ç”¨"></a>mapçš„ä½¿ç”¨</h3><p>å¦‚æœå·¦å³ä¸¤è¾¹çš„æ•°æ®æœ‰æ˜ å°„å…³ç³»ï¼Œè¦å…³æ³¨ä¸‹mapçš„æ–¹å¼æ¥åšæ•°æ®æ˜ å°„ä¿¡æ¯å­˜å‚¨ã€‚</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><p>listBuilderæœ€ç²¾å½©çš„è¿ç”¨ä¹‹ä¸€åœ¨äºï¼š</p><ul><li>é€šè¿‡renderå®æ—¶ç”Ÿæˆæœ€æ–°propsä»£æ›¿setStateï¼Œ</li><li>é€šè¿‡åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æ„ListRow æ¥éš”ç¦»ä¸šåŠ¡é€»è¾‘ï¼Œä¸“å¿ƒå…¬å…±é€»è¾‘çš„æŠ½è±¡</li><li>React.cloneElementç²¾å½©è¿ç”¨</li><li>ä¸è¦è®¤ä¸ºrenderå®æ—¶ç”Ÿæˆæœ€æ–°propsä¼šå½±å“æ€§èƒ½ï¼Œè¦æƒ³åŠŸèƒ½ä¸°å¯Œï¼Œå¯ä»¥è€ƒè™‘æ­¤æ–¹æ¡ˆã€‚<br>è¯šç„¶ï¼Œè¿™æ ·å†™ï¼Œä¼šå¯¼è‡´å¤šæ¬¡æ¸²æŸ“å’Œä¸å¿…è¦è®¡ç®—ï¼Œè²Œä¼¼ä¼šå½±å“æ€§èƒ½ï¼Œä½†ç›¸æ¯”é«˜æ•ˆçš„æµè§ˆå™¨æ¥ï¼Œé™æ€ä»£ç çš„æ‰§è¡Œï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>react-reduxç¬”è®°</title>
      <link href="/2020/05/01/react_redux/"/>
      <url>/2020/05/01/react_redux/</url>
      
        <content type="html"><![CDATA[<h2 id="react-redux-æºç è§£è¯»"><a href="#react-redux-æºç è§£è¯»" class="headerlink" title="react-redux æºç è§£è¯»"></a>react-redux æºç è§£è¯»</h2><p>è¿™äº›åšå®¢æ˜¯æˆ‘ä»¥å‰å†™åœ¨csdnçš„ï¼Œç°åœ¨å°†åšå®¢åœ°å€æ”¾åœ¨è¿™é‡Œã€‚é˜…è¯»çš„react-reduxçš„ç‰ˆæœ¬ä¸º5.0.7</p><h3 id="react-redux-æºç è§£è¯»ä¹‹connectçš„selectorå¸ƒå±€"><a href="#react-redux-æºç è§£è¯»ä¹‹connectçš„selectorå¸ƒå±€" class="headerlink" title="react-redux æºç è§£è¯»ä¹‹connectçš„selectorå¸ƒå±€"></a>react-redux æºç è§£è¯»ä¹‹connectçš„selectorå¸ƒå±€</h3><p>å‚è€ƒ<a href="https://blog.csdn.net/ybdt1201/article/details/83759641" target="_blank" rel="noopener">react-redux æºç è§£è¯»ä¹‹connectçš„selectorå¸ƒå±€</a></p><h3 id="react-redux-æºç è§£è¯»ä¹‹connectçš„mapStateToProps"><a href="#react-redux-æºç è§£è¯»ä¹‹connectçš„mapStateToProps" class="headerlink" title="react-redux æºç è§£è¯»ä¹‹connectçš„mapStateToProps"></a>react-redux æºç è§£è¯»ä¹‹connectçš„mapStateToProps</h3><p>å‚è€ƒ<a href="https://blog.csdn.net/ybdt1201/article/details/84201064" target="_blank" rel="noopener">react-redux æºç è§£è¯»ä¹‹connectçš„mapStateToProps</a></p><h3 id="react-redux-æºç è§£è¯»ä¹‹connectçš„mapDispatchToProps"><a href="#react-redux-æºç è§£è¯»ä¹‹connectçš„mapDispatchToProps" class="headerlink" title="react-redux æºç è§£è¯»ä¹‹connectçš„mapDispatchToProps"></a>react-redux æºç è§£è¯»ä¹‹connectçš„mapDispatchToProps</h3><p>å‚è€ƒ<a href="https://blog.csdn.net/ybdt1201/article/details/84279996" target="_blank" rel="noopener">react-redux æºç è§£è¯»ä¹‹connectçš„mapDispatchToProps</a></p><h3 id="react-redux-æºç è§£è¯»ä½“ä¼šæ‹¾é—"><a href="#react-redux-æºç è§£è¯»ä½“ä¼šæ‹¾é—" class="headerlink" title="react-redux æºç è§£è¯»ä½“ä¼šæ‹¾é—"></a>react-redux æºç è§£è¯»ä½“ä¼šæ‹¾é—</h3><p>å‚è€ƒ<a href="https://blog.csdn.net/ybdt1201/article/details/84350232" target="_blank" rel="noopener">react-redux æºç è§£è¯»ä½“ä¼šæ‹¾é—</a></p><h2 id="ä¸ºä»€ä¹ˆè¦æ•´ç†ç¬”è®°"><a href="#ä¸ºä»€ä¹ˆè¦æ•´ç†ç¬”è®°" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æ•´ç†ç¬”è®°"></a>ä¸ºä»€ä¹ˆè¦æ•´ç†ç¬”è®°</h2><p>åŸæœ¬ä»¥ä¸ºæœ‰è¿‡è¿™ä¹ˆå¤šçš„é¡¹ç›®ç»éªŒï¼ŒåŠ ä¸Šå‰å¹´çš„æ—¶å€™ä¹Ÿçœ‹è¿‡react-reduxçš„æºç ï¼Œæˆ‘å¯¹react-reduxåº”è¯¥è®°å¿†æ˜¯æ·±åˆ»çš„ã€‚<br>æ— å¥ˆï¼Œæœ€è¿‘ä½¿ç”¨äº†react-reduxçš„hooksï¼Œå‘ç°äº†ä¸€äº›ç–‘é—®ï¼Œéœ€è¦ä¸ä¹‹å‰éhooksçš„æ–¹å¼è¿›è¡Œå¯¹æ¯”ï¼Œå¯å´å‘ç°æˆ‘å¯¹ä»¥å‰çš„éhooksç‰ˆæœ¬ç»†èŠ‚å¿˜å¾—å·®ä¸å¤šäº†ï¼Œç»†èŠ‚è§‰å¾—æˆè´¥å•Šã€‚<br>äºæ˜¯ä»Šå¤©èŠ±äº†å°åŠå¤©å¯¹æ¯”äº†5.0.7ä¸æœ€æ–°react-reduxç‰ˆæœ¬ï¼Œå¯¹çŸ¥è¯†åšäº†æ¢³ç†ï¼Œä¸ºå…å†æ¬¡å¿˜å´ï¼Œä¹Ÿä¸ºäº†ä¾¿äºä¸‹æ¬¡æŸ¥é˜…ï¼Œç§‰ç€å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œç‰¹æ­¤ç¬”è®°ä¹‹ã€‚<br><strong>æ³¨æ„çš„æ˜¯ï¼Œæˆ‘å¯¹react-redux 5.0.7ç‰ˆæœ¬æºç ç†Ÿæ‚‰ï¼Œå¯¹hooks ç‰ˆæœ¬çš„react-redux è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œä»¥ä¸‹ç»“è®ºï¼Œæ¶‰åŠåˆ°hooksï¼Œéƒ½æ˜¯ä»è¯•éªŒä¸­å¾—å‡º</strong></p><h2 id="react-reduxçŸ¥è¯†æ¦‚è¦"><a href="#react-reduxçŸ¥è¯†æ¦‚è¦" class="headerlink" title="react-reduxçŸ¥è¯†æ¦‚è¦"></a>react-reduxçŸ¥è¯†æ¦‚è¦</h2><h3 id="shallowEqual-ä¸-propsçš„æµ…æ¯”è¾ƒ"><a href="#shallowEqual-ä¸-propsçš„æµ…æ¯”è¾ƒ" class="headerlink" title="shallowEqual ä¸ propsçš„æµ…æ¯”è¾ƒ"></a>shallowEqual ä¸ propsçš„æµ…æ¯”è¾ƒ</h3><p>shallowEqualæ˜¯react-reduxç”¨äºæ¯”è¾ƒpropså„ä¸ªå±æ€§çš„ï¼Œreact-reduxæ¯”è¾ƒpropsæ—¶ï¼Œé€šè¿‡ shallowEqual åªæ¯”è¾ƒpropsçš„æ¯ä¸ªå±æ€§ï¼Œä¸€ç§æµ…æ¯”è¾ƒæ–¹å¼ã€‚<br>shallowEqualé™¤äº†react-reduxè‡ªå·±ä½¿ç”¨ï¼Œä¹Ÿå¯ä½œä¸ºå·¥å…·å‡½æ•°ä½¿ç”¨ï¼Œæ˜¯ä¸€ä¸ªreact-reduxå¯¹å¤–çš„APIï¼Œå…¶ä»£ç æ¯”è¾ƒç®€æ´ï¼Œæ˜¯ä¸€ä¸ªè€ƒè™‘å¾ˆå‘¨å…¨çš„å¯¹è±¡å±æ€§æ¯”è¾ƒå·¥å…·å‡½æ•°ã€‚</p><h3 id="connect-æ‹¥æœ‰çš„èƒ½åŠ›"><a href="#connect-æ‹¥æœ‰çš„èƒ½åŠ›" class="headerlink" title="connect æ‹¥æœ‰çš„èƒ½åŠ›"></a>connect æ‹¥æœ‰çš„èƒ½åŠ›</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>connectå°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œæ¯ä¸ªä½¿ç”¨äº†connectçš„ç»„ä»¶å½¢å¼å¦‚ä¸‹ï¼Œæ¯ä¸ªç»„ä»¶å¦‚æœç»“åˆconnectåï¼Œå°†å…·å¤‡å¦‚ä¸‹èƒ½åŠ›(è¿™äº›èƒ½åŠ›ä¹Ÿæ˜¯connectçš„èƒ½åŠ›)ï¼š</p><ul><li>shouldComponentUpdate ç»“åˆshallowEqualå‡½æ•°å¯¹propsè¿›è¡Œæµ…å±‚æ¯”è¾ƒä¼˜åŒ–</li><li>ç›‘å¬storeå˜åŒ–çš„èƒ½åŠ›<br>å¦‚ä¸‹ä»£ç ä¸­ï¼Œé€šè¿‡ new Subscription å¯ç›‘å¬storeçš„å˜åŒ–ï¼Œå½“ä½ å‘é€ä¸€ä¸ªdispatchåï¼Œæ¯ä¸ªä½¿ç”¨connectçš„ç»„ä»¶æœ‰èƒ½åŠ›ç›‘å¬åˆ°storeæ˜¯å¦å˜åŒ–ã€‚</li><li>è‹¥å…¨å±€çš„storeå˜åŒ–ï¼Œæ•´ä¸ªé¡¹ç›®æ‰€æœ‰ç»„ä»¶çš„mapStatetoPropséƒ½ä¼šè¢«æ‰§è¡Œ<br>å› ä¸ºdisptchå¿…ç„¶å¯¼è‡´å…¨å±€çš„storeæ•°æ®å˜åŒ–ï¼Œå› æ­¤dispatchåï¼Œæ•´ä¸ªé¡¹ç›®çš„æ‰€æœ‰mapStateToPropsä¼šè¢«æ‰§è¡Œï¼Œå½“ç„¶äº†ï¼Œæœ‰äº›dispatchå¹¶ä¸ä¼šæ”¹å˜storeï¼Œé‚£ä¹ˆã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wrapWithConnect</span>(<span class="params">WrappedComponent</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">Connect</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">      <span class="keyword">constructor</span>(props, context) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props, context)</span><br><span class="line">        <span class="keyword">this</span>.initSelector()</span><br><span class="line">        <span class="keyword">this</span>.initSubscription()</span><br><span class="line">      &#125;</span><br><span class="line">      componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">          <span class="comment">//this.selector.runåšä»¥ä¸‹å‡ ä¸ªäº‹æƒ…ï¼š</span></span><br><span class="line">            <span class="comment">//   1.é€šè¿‡shallowEqualå¯¹propså„å±æ€§æ¯”è¾ƒåå¾—å‡ºthis.selector.shouldComponentUpdateå€¼ï¼›</span></span><br><span class="line">            <span class="comment">//   2.æ‰§è¡ŒmapStateToPropsï¼Œå› ä¸ºè¦æ¯”è¾ƒmapStateToPropsæ‰§è¡Œåå¾—åˆ°çš„propsï¼›</span></span><br><span class="line">        <span class="keyword">this</span>.selector.run(nextProps)</span><br><span class="line">      &#125;</span><br><span class="line">      shouldComponentUpdate() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.selector.shouldComponentUpdate</span><br><span class="line">      &#125;</span><br><span class="line">      initSubscription() &#123;</span><br><span class="line">           <span class="comment">//åˆå§‹åŒ–storeå˜åŒ–çš„ç›‘å¬ï¼š</span></span><br><span class="line">        <span class="keyword">this</span>.subscription = <span class="keyword">new</span> Subscription(<span class="keyword">this</span>.store, parentSub, <span class="keyword">this</span>.onStateChange.bind(<span class="keyword">this</span>))</span><br><span class="line">      &#125;</span><br><span class="line">      onStateChange() &#123;</span><br><span class="line">        <span class="comment">//   è‹¥å˜åŒ–ï¼Œå°†æ‰§è¡Œ runï¼Œè·å– shouldComponentUpdate çš„å€¼ï¼Œå¹¶æ˜¯å¦é€šè¿‡setStateè®©ç»„ä»¶render</span></span><br><span class="line">        <span class="keyword">this</span>.selector.run(<span class="keyword">this</span>.props)</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.selector.shouldComponentUpdate) &#123;</span><br><span class="line">          <span class="keyword">this</span>.notifyNestedSubs()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.componentDidUpdate = <span class="keyword">this</span>.notifyNestedSubsOnComponentDidUpdate</span><br><span class="line">          <span class="keyword">this</span>.setState(&#123;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      render() &#123;</span><br><span class="line">        <span class="keyword">const</span> selector = <span class="keyword">this</span>.selector</span><br><span class="line">        <span class="comment">//renderåï¼Œè®°å¾—å°† shouldComponentUpdate å€¼é‡ç½®ä¸º false</span></span><br><span class="line">        selector.shouldComponentUpdate = <span class="literal">false</span></span><br><span class="line">         <span class="keyword">return</span> createElement(WrappedComponent, <span class="keyword">this</span>.addExtraProps(selector.props))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="shouldComponentUpdateä¼˜åŒ–"><a href="#shouldComponentUpdateä¼˜åŒ–" class="headerlink" title="shouldComponentUpdateä¼˜åŒ–"></a>shouldComponentUpdateä¼˜åŒ–</h4><p>å‚è€ƒä¸Šé¢çš„ã€Šæ¦‚è¦ã€‹</p><h4 id="ç›‘å¬storeå˜åŒ–çš„èƒ½åŠ›"><a href="#ç›‘å¬storeå˜åŒ–çš„èƒ½åŠ›" class="headerlink" title="ç›‘å¬storeå˜åŒ–çš„èƒ½åŠ›"></a>ç›‘å¬storeå˜åŒ–çš„èƒ½åŠ›</h4><p>å‚è€ƒä¸Šé¢çš„ã€Šæ¦‚è¦ã€‹</p><h4 id="æ¯”è¾ƒpropså¹¶åˆ¤æ–­æ˜¯å¦renderçš„èƒ½åŠ›"><a href="#æ¯”è¾ƒpropså¹¶åˆ¤æ–­æ˜¯å¦renderçš„èƒ½åŠ›" class="headerlink" title="æ¯”è¾ƒpropså¹¶åˆ¤æ–­æ˜¯å¦renderçš„èƒ½åŠ›"></a>æ¯”è¾ƒpropså¹¶åˆ¤æ–­æ˜¯å¦renderçš„èƒ½åŠ›</h4><p>å‚è€ƒä¸Šé¢çš„ã€Šæ¦‚è¦ã€‹</p><h3 id="åˆ†æ¸…propsç±»åˆ«å¾ˆå¿…è¦"><a href="#åˆ†æ¸…propsç±»åˆ«å¾ˆå¿…è¦" class="headerlink" title="åˆ†æ¸…propsç±»åˆ«å¾ˆå¿…è¦"></a>åˆ†æ¸…propsç±»åˆ«å¾ˆå¿…è¦</h3><p>å‚è€ƒä¸‹é¢ã€Šownerpropsã€mapState propsã€dispatch propsã€‹<br>å‚è€ƒä¸‹é¢ã€Š renderä¸å¦å‚è€ƒmapStatetopropsçš„ç»“æœï¼Œè€Œéç»„ä»¶æ‰€æœ‰çš„propsã€‹</p><h3 id="ownerpropsã€mapState-propsã€dispatch-props"><a href="#ownerpropsã€mapState-propsã€dispatch-props" class="headerlink" title="ownerpropsã€mapState propsã€dispatch props"></a>ownerpropsã€mapState propsã€dispatch props</h3><p>connectç»„ä»¶çš„propsæœ‰ï¼š ownerpropsã€mapStateçš„propsã€dispatchçš„propsï¼š</p><p>ownerpropsæ˜¯æŒ‡çˆ¶ç»„ä»¶å¼•ç”¨ç»„ä»¶æ—¶å®šä¹‰åœ¨reactå…ƒç´ ä¸Šçš„propså±æ€§ï¼›<br>mapState propsæ˜¯æŒ‡ mapStatetopropså‡½æ•°æ‰§è¡Œå®Œåå½¢æˆçš„propsï¼›<br>dispatch propsæ˜¯æŒ‡ mapDispatchToPropså®šä¹‰çš„propsï¼›<br>ä¸‰è€…å®šä¹‰çš„ä¸åŒå¯¼è‡´äº†ä¸€äº›ç‰¹æ€§ï¼š<br>ownnerpropsåŸºæœ¬ä¸Šå—çˆ¶äº²ç»„ä»¶renderæ—¶è€Œå˜åŒ–ï¼›<br>mapState props å—dispatchæ—¶å˜åŒ–ï¼›<br>dispatch props åœ¨ç»„ä»¶è£…è½½æ—¶å°±ç¡®å®šå¥½äº†ï¼Œç›´åˆ°ç»„ä»¶å¸è½½éƒ½ä¸ä¼šå˜åŒ–ã€‚</p><h3 id="dispatchåç›¸å…³çš„äº‹æƒ…"><a href="#dispatchåç›¸å…³çš„äº‹æƒ…" class="headerlink" title="dispatchåç›¸å…³çš„äº‹æƒ…"></a>dispatchåç›¸å…³çš„äº‹æƒ…</h3><h4 id="çˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrender"><a href="#çˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrender" class="headerlink" title="çˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrender"></a>çˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrender</h4><p>è¿™é‡Œçš„dispatchæŒ‡çš„æ˜¯ä¼šæ”¹å˜storeå˜åŒ–çš„é‚£ç§ï¼Œdispatchåï¼Œé¡¹ç›®ä¸­æ— è®ºç¥–å…ˆçˆ¶å­å„¿å­™å…„å¼Ÿç»„ä»¶ï¼Œåªè¦ä½ ä½¿ç”¨äº†connectï¼Œé‚£ä¹ˆéƒ½ä¼šè§¦å‘connectç»„ä»¶å†…çš„ç›‘å¬Subscriptionï¼Œ<br>ç»„ä»¶å°±ä¼šè®©mapStatetopropsæ‰§è¡Œï¼Œè·å–åˆ°æ‰§è¡Œç»“æœåï¼Œç»„ä»¶å°†å¾—åˆ°ownerpropsã€mapState propsã€ dispatch propsï¼›<br>ç”±äºownerpropsåªæœ‰çˆ¶äº²ç»„ä»¶renderæ—¶æ‰ä¼šæ”¹å˜ï¼›dispatch propsåªæœ‰åœ¨ç»„ä»¶è£…è½½æ—¶æ‰ä¼šæ”¹å˜ï¼›<br>è¿™ä¸¤ç§propsåœ¨dispatchçš„æ—¶å€™ï¼Œéƒ½ä¸ä¼šæ”¹å˜ï¼›<br>å› æ­¤æ˜¯å¦renderå°†åªä¸mapState propsæœ‰å…³ï¼Œä¹Ÿå°±æ˜¯mapStatetopropsæ‰§è¡Œç»“æœæœ‰å…³ã€‚<br>ä¸è¿‡å‡¡äº‹æœ‰ä¾‹å¤–ï¼Œä¸‡ä¸€å…¶ä»–ä¸¤ä¸­propsæ”¹å˜æ¥å‘¢ï¼Œå…·ä½“æƒ…å†µéœ€è¦å…·ä½“çœ‹å¾…ã€‚<br>å¦‚æœmapStatetopropsæ‰§è¡Œçš„ç»“æœè·Ÿä¸Šæ¬¡çš„ç»“æœä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå°±ä¼šè§¦å‘æœ¬ç»„ä»¶renderã€‚</p><p>å°ç»“ä¸‹ï¼šå½“dispatchåï¼Œ<strong>æ”¹å˜äº†storeçš„state</strong>ï¼Œé‚£ä¹ˆä¸€å®šä¼šè§¦å‘ mapStatetoprops çš„æ‰§è¡Œï¼Œè€Œä¸”æ˜¯é¡¹ç›®å†…æ‰€æœ‰connectç»„ä»¶çš„mapStatetopropsï¼Œä¸åˆ†çˆ¶å­å…„å¼Ÿï¼Œéƒ½å°†æ‰§è¡Œï¼Œrenderä¸å¦ï¼Œåªä¸æœ¬ç»„ä»¶çš„mapStatetopropsçš„ç»“æœå¯¹æ¯”æœ‰å…³</p><h4 id="dispatchåä¼šè§¦å‘mapStatetoprops"><a href="#dispatchåä¼šè§¦å‘mapStatetoprops" class="headerlink" title="dispatchåä¼šè§¦å‘mapStatetoprops"></a>dispatchåä¼šè§¦å‘mapStatetoprops</h4><p>ä¸ºä»€ä¹ˆdispatchåä¼šè§¦å‘mapStatetopropsçš„æ‰§è¡Œã€‚<br>å…¶å®è¿™å¥è¯ï¼Œè¯´çš„ä¸ä¸¥è°¨ï¼Œdispatchåï¼Œåªæœ‰æ”¹å˜äº†store.getStateæ‰ä¼šè§¦å‘ mapStateToPropsï¼›<br>è¿™æ˜¯react-reduxæœºåˆ¶ï¼Œdispatchåï¼Œå¦‚æœæ”¹å˜äº† store.getStateï¼Œæ‰ä¼šè§¦å‘Connectç»„ä»¶å†…çš„çŠ¶æ€æ”¹å˜ç›‘å¬äº‹ä»¶ï¼Œ<br>è¯¥ç›‘å¬äº‹ä»¶ä¼šæ¯”è¾ƒä¸¤æ¬¡çš„propsï¼Œä»è€Œå†³å®šæ˜¯å¦renderï¼›<br>è¦æ¯”è¾ƒå°±è¦è·å–propsï¼Œå…¶ä¸­åœ¨è·å–mapState propsæ—¶ï¼Œreact-reduxä¼šæ¯”è¾ƒstore.getStateï¼Œå¦‚æœstoreæ²¡æœ‰æ”¹å˜ï¼Œå°±è®¤ä¸ºmapStateæ²¡æœ‰æ”¹å˜ï¼Œå°±è¿”å›ä¸Šä¸€æ¬¡çš„mapStateï¼›å¦‚æœstoreæ”¹å˜äº†ï¼Œéœ€è¦ä» mapStateToProps æ‰§è¡Œå¾—æ¥æœ€æ–°çš„mapStateï¼Œä»è€Œè§¦å‘äº† mapStateToPropsçš„æ‰§è¡Œï¼›</p><p>å› æ­¤ï¼Œåªè¦dispatchæ”¹å˜äº†storeï¼Œå°±ä¸€å®šè§¦å‘æ¯ä¸ªç»„ä»¶çš„ mapStateToPropsæ‰§è¡Œã€‚<br>å¦‚æœæ²¡æœ‰æ”¹å˜storeï¼Œä¹Ÿä¸ä¼šè§¦å‘ mapStateToPropsçš„æ‰§è¡Œã€‚</p><h4 id="dispatchä¸ä¸€å®šä¼šè§¦å‘mapStatetoprops"><a href="#dispatchä¸ä¸€å®šä¼šè§¦å‘mapStatetoprops" class="headerlink" title="dispatchä¸ä¸€å®šä¼šè§¦å‘mapStatetoprops"></a>dispatchä¸ä¸€å®šä¼šè§¦å‘mapStatetoprops</h4><p>å‚è€ƒã€Šä¸ºä»€ä¹ˆdispatchåä¼šè§¦å‘mapStatetopropsã€‹</p><h4 id="renderä¸å¦å¯è®¤ä¸ºåªçœ‹mapStatetopropsçš„ç»“æœ"><a href="#renderä¸å¦å¯è®¤ä¸ºåªçœ‹mapStatetopropsçš„ç»“æœ" class="headerlink" title="renderä¸å¦å¯è®¤ä¸ºåªçœ‹mapStatetopropsçš„ç»“æœ"></a>renderä¸å¦å¯è®¤ä¸ºåªçœ‹mapStatetopropsçš„ç»“æœ</h4><p>renderä¸å¦æœ¬æ¥æ˜¯è¦å¯¹æ¯” æ‰€æœ‰ç§ç±»çš„propsï¼Œä½†ç”±äºdispatchçš„æ—¶å€™ï¼Œownerpropsä¸dispatch props ä¸ä¼šæ”¹å˜ï¼Œå› æ­¤åªä¸å‰©ä¸‹çš„ mapState propsæœ‰å…³ã€‚<br>å› æ­¤renderä¸å¦ å¯è®¤ä¸ºåªçœ‹mapStatetopropsçš„ç»“æœã€‚<br>æ›´å¤šå‚è€ƒã€Šçˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrenderã€‹</p><h4 id="renderä¸å¦ä¸å—å¤–ç•Œ-Connect-å½±å“"><a href="#renderä¸å¦ä¸å—å¤–ç•Œ-Connect-å½±å“" class="headerlink" title="renderä¸å¦ä¸å—å¤–ç•Œ(Connect)å½±å“"></a>renderä¸å¦ä¸å—å¤–ç•Œ(Connect)å½±å“</h4><p>æœ‰äº›äººè®¤ä¸ºåœ¨ç¥–å…ˆã€çˆ¶äº²ã€å­å­™ ç»„ä»¶å†…å¯èƒ½ä¹Ÿä½¿ç”¨äº†Connectï¼›<br>é‚£ä¹ˆè‡ªå·±çš„Connectç»„ä»¶ï¼Œåœ¨è‡ªå·±dispatchçš„æ—¶å€™ï¼Œè‡ªå·±ç»„ä»¶æ˜¯å¦renderä¼šå—ä»–ä»¬çš„å½±å“å—ï¼›<br>è¿™è‚¯å®šæ˜¯ä¸å½±å“çš„ï¼Œå› ä¸ºè‡ªå·±dispatchçš„æ—¶å€™ï¼Œæ”¹å˜çš„æ˜¯å…¨å±€å˜é‡Store.getStateï¼Œå½“dispatchå®Œåï¼Œä½ å°±ä¸å…¶ä»–ç»„ä»¶æ˜¯ä¸€æ ·çš„äº†ï¼Œ<br>ä½ å°±ä¼šè·Ÿå…¶ä»–Connectç»„ä»¶ä¸€æ ·ï¼Œåˆ©ç”¨ç›‘å¬æ˜¯å¦æœ‰å˜åŒ–ï¼Œæ‰§è¡Œmapstatetopropsï¼Œæ¯”å¯¹masState propsï¼Œè‹¥å˜åŒ–è‡ªå·±å°†renderï¼Œåä¹‹åˆ™ä¸renderï¼Œæ ¹æœ¬ä¸å—å…¶ä»–ç»„ä»¶æ˜¯å¦æœ‰Connectå½±å“ã€‚<br>æ›´å¤šå‚è€ƒã€Šçˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrenderã€‹</p><h4 id="æ˜¯ä¸æ˜¯æ‰€æœ‰-mapStatetoprops-ä¼šæ‰§è¡Œ"><a href="#æ˜¯ä¸æ˜¯æ‰€æœ‰-mapStatetoprops-ä¼šæ‰§è¡Œ" class="headerlink" title="æ˜¯ä¸æ˜¯æ‰€æœ‰ mapStatetoprops ä¼šæ‰§è¡Œ"></a>æ˜¯ä¸æ˜¯æ‰€æœ‰ mapStatetoprops ä¼šæ‰§è¡Œ</h4><p>æ˜¯çš„ï¼Œå‚è€ƒã€Šçˆ¶å±‚å’Œå­å±‚çš„æ˜¯å¦ä¼šrenderã€‹</p><h3 id="åæ¨¡å¼ä¸‹-çˆ¶çº§ä¸dispatché©±åŠ¨çš„renderçš„å¥‡æ€ªå·®å¼‚"><a href="#åæ¨¡å¼ä¸‹-çˆ¶çº§ä¸dispatché©±åŠ¨çš„renderçš„å¥‡æ€ªå·®å¼‚" class="headerlink" title="åæ¨¡å¼ä¸‹ çˆ¶çº§ä¸dispatché©±åŠ¨çš„renderçš„å¥‡æ€ªå·®å¼‚"></a>åæ¨¡å¼ä¸‹ çˆ¶çº§ä¸dispatché©±åŠ¨çš„renderçš„å¥‡æ€ªå·®å¼‚</h3><p>ä¸€ä¸ªConnectç»„ä»¶ï¼Œå¦‚ä¸‹åœ¨çˆ¶ç»„ä»¶ä¸‹å¼•ç”¨æ—¶å®šä¹‰äº†ä¸€ä¸ªåæ¨¡å¼çš„test1å±æ€§ï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connect test1=&#123;[]&#125; /&gt;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ï¼Œåªè¦çˆ¶ç»„ä»¶renderï¼Œéƒ½ä¼šå¯¼è‡´Connectç»„ä»¶renderï¼›<br>ä½†æ˜¯ï¼Œåœ¨Connectç»„ä»¶å†…ï¼Œå¦‚æœä½ dispatchï¼Œå¦‚æœä½ çš„mapStateçš„propsæ²¡æœ‰å˜åŒ–ï¼Œå°±ä¸ä¼šå¯¼è‡´ç»„ä»¶renderï¼Œè¿™å°±æ˜¯äºŒè€…renderçš„å·®å¼‚æ€§æ‰€åœ¨ï¼›<br>åŸå› åœ¨äºï¼Œçˆ¶ç»„ä»¶renderæ—¶ï¼Œç»™test1æ¯æ¬¡éƒ½èµ‹å€¼ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œé€ æˆownerPropsæ”¹å˜ï¼›<br>dispatchçš„æ—¶å€™ï¼Œçˆ¶ç»„ä»¶ä¸ä¼šrenderï¼Œtest1çš„æ•°ç»„ä¸€ç›´æŒ‡å‘ä¸Šä¸€æ¬¡çˆ¶ç»„ä»¶renderåˆ›å»ºçš„æ•°ç»„ï¼Œå› æ­¤ä¸ä¼šrenderï¼›</p><h3 id="mapStatetopropsçš„è§¦å‘æ—¶æœº"><a href="#mapStatetopropsçš„è§¦å‘æ—¶æœº" class="headerlink" title="mapStatetopropsçš„è§¦å‘æ—¶æœº"></a>mapStatetopropsçš„è§¦å‘æ—¶æœº</h3><h4 id="çˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œ"><a href="#çˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œ" class="headerlink" title="çˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œ"></a>çˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œ</h4><p>çˆ¶çº§ä¸dispatché©±åŠ¨çš„renderéƒ½ä¼šæ‰§è¡Œ:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.selector.run(nextProps)</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥é€šè¿‡ä¸Šé¢wrapWithConnectç»„ä»¶çš„ä»£ç çœ‹å‡ºï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">componentWillReceiveProps(nextProps) &#123;</span><br><span class="line">   <span class="keyword">this</span>.selector.run(nextProps)</span><br><span class="line"> &#125;</span><br><span class="line"> initSubscription() &#123;</span><br><span class="line">   <span class="keyword">this</span>.subscription = <span class="keyword">new</span> Subscription(<span class="keyword">this</span>.store, parentSub, <span class="keyword">this</span>.onStateChange.bind(<span class="keyword">this</span>))</span><br><span class="line"> &#125;</span><br><span class="line"> onStateChange() &#123;</span><br><span class="line">   <span class="keyword">this</span>.selector.run(<span class="keyword">this</span>.props)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><p>ä¸ºä»€ä¹ˆçˆ¶çº§é©±åŠ¨renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œï¼Œè€Œdispatchä¼šè§¦å‘å‘¢ã€‚<br>è¿™ä¸react-reduxçš„æœºåˆ¶æœ‰å…³ï¼Œåœ¨runçš„åç»­ä¸€ç³»åˆ—ä»£ç ä¸­ï¼Œä¼šæ¯”è¾ƒstore.getState()ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè¿›ä¸€æ­¥æ‰§è¡Œ mapStatetoprops æ¥è·å–æœ€æ–°çš„mapState propsï¼›å¦‚æœæ²¡æœ‰å˜åŒ–å°±ä¸æ‰§è¡Œï¼›<br>è¿™ä¸¤ç§renderä¸­ï¼Œåªæœ‰dispatchä¼šå¯¼è‡´storeçš„å˜åŒ–ã€‚è€Œçˆ¶çº§é©±åŠ¨çš„renderåˆ™ä¸ä¼šã€‚</p><h4 id="dispatché©±åŠ¨çš„renderè§¦å‘mapStatetopropsæ‰§è¡Œ"><a href="#dispatché©±åŠ¨çš„renderè§¦å‘mapStatetopropsæ‰§è¡Œ" class="headerlink" title="dispatché©±åŠ¨çš„renderè§¦å‘mapStatetopropsæ‰§è¡Œ"></a>dispatché©±åŠ¨çš„renderè§¦å‘mapStatetopropsæ‰§è¡Œ</h4><p>å‚è€ƒã€Šçˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œã€‹</p><h4 id="storeæ”¹å˜è‚¯å®šè§¦å‘mapStatetopropsæ‰§è¡Œ"><a href="#storeæ”¹å˜è‚¯å®šè§¦å‘mapStatetopropsæ‰§è¡Œ" class="headerlink" title="storeæ”¹å˜è‚¯å®šè§¦å‘mapStatetopropsæ‰§è¡Œ"></a>storeæ”¹å˜è‚¯å®šè§¦å‘mapStatetopropsæ‰§è¡Œ</h4><p>è¦æƒ³storeæ”¹å˜åªæœ‰dispatchï¼Œdispatchä¸ä¸€å®šäº§ç”Ÿstoreå˜åŠ¨ï¼Œä¸€æ—¦storeæ”¹å˜ï¼Œä¸€å®šè§¦å‘mapStatetopropsæ‰§è¡Œã€‚<br>æ›´å¤šå‚è€ƒã€Šçˆ¶çº§é©±åŠ¨çš„renderä¸è§¦å‘mapStatetopropsæ‰§è¡Œã€‹</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>æœ‰ä¸Šé¢åˆ†æå¯çŸ¥ï¼ŒmapStateToPropåªåœ¨storeæ”¹å˜æ—¶æ‰ä¼šæ‰§è¡Œï¼Œè€Œstoreçš„æ”¹å˜åªä¸dispatchæœ‰å…³ï¼Œå› æ­¤åªæœ‰dispatchæ—¶ï¼Œä¸”æ”¹å˜äº†storeæ—¶ï¼Œæ‰ä¼šè§¦å‘mapStateToPropçš„æ‰§è¡Œã€‚</p><h2 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h2><h3 id="hooksã€Connect-åŸç†åŸºæœ¬ä¸€è‡´"><a href="#hooksã€Connect-åŸç†åŸºæœ¬ä¸€è‡´" class="headerlink" title="hooksã€Connect åŸç†åŸºæœ¬ä¸€è‡´"></a>hooksã€Connect åŸç†åŸºæœ¬ä¸€è‡´</h3><p>react-reduxçš„ç”¨æ³•æœ‰ ä¼ ç»Ÿçš„Connectç”¨æ³•ï¼Œä»¥åŠ æ–°çš„hooksç”¨æ³•ã€‚<br>ä»–ä»¬äºŒè€…çš„åŸç†åŸºæœ¬ä¸€è‡´ï¼Œ</p><h3 id="useDispatch"><a href="#useDispatch" class="headerlink" title="useDispatch"></a>useDispatch</h3><p>useDispatch æ—¶ï¼Œ<br>å¦‚æœæ”¹å˜äº†storeï¼Œåˆ™ä¼šè§¦å‘æ‰€æœ‰çš„ useSelector ä¸ mapStateToProp çš„æ‰§è¡Œï¼›<br>ç»„ä»¶æ˜¯å¦renderï¼Œæ ¹æ®å„è‡ªçš„ useSelectorã€mapStateToPropæ‰§è¡Œç»“æœå†³å®šï¼›</p><h3 id="useSelector-è§¦å‘æ—¶æœºï¼š"><a href="#useSelector-è§¦å‘æ—¶æœºï¼š" class="headerlink" title="useSelector è§¦å‘æ—¶æœºï¼š"></a>useSelector è§¦å‘æ—¶æœºï¼š</h3><p>å½“ç»„ä»¶renderæ—¶ï¼›<br>å½“æœ‰ç»„ä»¶dipatchæ—¶ï¼Œæ— è®ºæ˜¯å¦æ”¹å˜storeï¼Œéƒ½ä¼šæ‰§è¡Œï¼›<br>ä¸mapStateToPropä¸ä¸€æ ·çš„åœ°æ–¹ï¼š<br>ç¬¬ä¸€ï¼šmapStateToPropä¸ä¼šåœ¨renderçš„æ—¶å€™æ‰§è¡Œï¼› ç¬¬äºŒï¼šmapStateToProp åªä¼šåœ¨storeå˜åŒ–æ—¶æ‰æ‰§è¡Œ  å‚è€ƒã€ŠmapStatetopropsçš„è§¦å‘æ—¶æœºã€‹ã€‚<br>å› æ­¤å¦‚æœåŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæœ‰çš„ç»„ä»¶ä½ ç”¨çš„æ˜¯Connectï¼Œæœ‰äº›ç”¨çš„æ˜¯useSelectorï¼Œå½“ä½ dispatchï¼Œä¸è¿‡æœªæ”¹å˜storeçš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°useSelectoræ‰§è¡Œäº†ï¼ŒmapStateToPropæœªæ‰§è¡Œã€‚</p><h3 id="useSelector-äº§ç”Ÿçš„ä½œç”¨"><a href="#useSelector-äº§ç”Ÿçš„ä½œç”¨" class="headerlink" title="useSelector äº§ç”Ÿçš„ä½œç”¨"></a>useSelector äº§ç”Ÿçš„ä½œç”¨</h3><p>cccä¸mapStateToPropè¿™ç‚¹ä¸€æ ·ï¼Œæ‰§è¡Œçš„ç»“æœå¦‚æœæ”¹å˜ï¼Œå°†ä¼šè§¦å‘ç»„ä»¶renderï¼Œå¦åˆ™å°±ä¸ä¼šã€‚</p><h3 id="useSelector-å¸¸ç”¨é”™è¯¯ç”¨æ³•"><a href="#useSelector-å¸¸ç”¨é”™è¯¯ç”¨æ³•" class="headerlink" title="useSelector å¸¸ç”¨é”™è¯¯ç”¨æ³•"></a>useSelector å¸¸ç”¨é”™è¯¯ç”¨æ³•</h3><h4 id="è¿”å›ä¸€ä¸ªæ–°æ„é€ çš„å¯¹è±¡"><a href="#è¿”å›ä¸€ä¸ªæ–°æ„é€ çš„å¯¹è±¡" class="headerlink" title="è¿”å›ä¸€ä¸ªæ–°æ„é€ çš„å¯¹è±¡"></a>è¿”å›ä¸€ä¸ªæ–°æ„é€ çš„å¯¹è±¡</h4><p>ä»¥ä¸‹ä¸¤ç§é”™è¯¯ç”¨æ³•ï¼Œä¼šå¯¼è‡´ç»„ä»¶åœ¨dispatchçš„æ—¶å€™ï¼Œæ€»æ˜¯åˆ·æ–°ï¼Œå› ä¸ºä¸‹é¢ä¸¤ç§æ–¹å¼useSelectoræ‰§è¡Œçš„ç»“æœéƒ½æ˜¯ä¸€ä¸ªæ–°å»ºçš„å¯¹è±¡ã€‚è¿™æ ·é€ æˆå‰åä¸¤æ¬¡æ¯”è¾ƒçš„æ—¶å€™è®¤ä¸ºå˜åŒ–äº†ï¼š <code>{} !== {}</code>:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> courses = useSelector(<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;test, data&#125; = useSelector(<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">test</span>:state.test, <span class="attr">data</span>:state.data&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="hooksä¸Connectçš„åŒºåˆ«"><a href="#hooksä¸Connectçš„åŒºåˆ«" class="headerlink" title="hooksä¸Connectçš„åŒºåˆ«"></a>hooksä¸Connectçš„åŒºåˆ«</h3><p>hooksç»„ä»¶å…¶è¡Œä¸ºè¿˜æ˜¯ç±»ä¼¼ä¸€ä¸ªçº¯å‡½æ•°ç»„ä»¶ï¼Œæ²¡æœ‰åƒConnectä¸€æ ·å¯¹ç»„ä»¶ä»¥é«˜é˜¶ç»„ä»¶çš„å½¢å¼åŒ…è£¹ï¼Œæ²¡æœ‰åšshouldComponentUpdateä¼˜åŒ–ã€‚</p><h3 id="æ–°æ—§ç‰ˆæœ¬çš„Connectå¼‚åŒ"><a href="#æ–°æ—§ç‰ˆæœ¬çš„Connectå¼‚åŒ" class="headerlink" title="æ–°æ—§ç‰ˆæœ¬çš„Connectå¼‚åŒ"></a>æ–°æ—§ç‰ˆæœ¬çš„Connectå¼‚åŒ</h3><p>æ–°ç‰ˆæœ¬çš„react-reduxçš„Connectä¸æ—§ç‰ˆæœ¬çš„Connectï¼Œä½¿ç”¨æ–¹æ³•åŠäº§ç”Ÿçš„ç°è±¡æ²¡æœ‰ä»€ä¹ˆå·®åˆ«ã€‚</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><h3 id="å®˜ç½‘"><a href="#å®˜ç½‘" class="headerlink" title="å®˜ç½‘"></a><a href>å®˜ç½‘</a></h3><h3 id="React-Redux-å®˜æ–¹-Hooks-æ–‡æ¡£è¯´æ˜"><a href="#React-Redux-å®˜æ–¹-Hooks-æ–‡æ¡£è¯´æ˜" class="headerlink" title="React-Redux å®˜æ–¹ Hooks æ–‡æ¡£è¯´æ˜"></a><a href="http://react-china.org/t/topic/34076/1" target="_blank" rel="noopener">React-Redux å®˜æ–¹ Hooks æ–‡æ¡£è¯´æ˜</a></h3><h3 id="react-redux-hooks-demo"><a href="#react-redux-hooks-demo" class="headerlink" title="react-redux-hooks demo"></a><a href="https://github.com/YeWills/react-redux-hooks-demo/commits/blog-demo" target="_blank" rel="noopener">react-redux-hooks demo</a></h3><h3 id="react-redux-5-0-7-demo"><a href="#react-redux-5-0-7-demo" class="headerlink" title="react-redux 5.0.7 demo"></a><a href="https://github.com/YeWills/test-react-redux" target="_blank" rel="noopener">react-redux 5.0.7 demo</a></h3>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
          <category> react-redux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react react-redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React hooks ç¬”è®°</title>
      <link href="/2020/05/01/react_hooks/"/>
      <url>/2020/05/01/react_hooks/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹å†…å®¹å¾ˆå¤šæ˜¯é˜…è¯»reactå®˜ç½‘ï¼Œåšçš„è¯»ä¹¦ç¬”è®°ã€‚</p><h2 id="é—æ†¾çš„æ˜¯hookså¹¶æ²¡å¢åŠ æ–°çš„èƒ½åŠ›"><a href="#é—æ†¾çš„æ˜¯hookså¹¶æ²¡å¢åŠ æ–°çš„èƒ½åŠ›" class="headerlink" title="é—æ†¾çš„æ˜¯hookså¹¶æ²¡å¢åŠ æ–°çš„èƒ½åŠ›"></a>é—æ†¾çš„æ˜¯hookså¹¶æ²¡å¢åŠ æ–°çš„èƒ½åŠ›</h2><p>hooksç›¸æ¯”ä¹‹å‰çš„reactï¼Œå¹¶æ²¡æœ‰å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œåªæ˜¯é’ˆå¯¹ä»¥å‰çš„åŠŸèƒ½çš„é‡æ–°å°è£…å’Œä¼˜åŒ–ï¼Œå®ƒæ²¡æœ‰å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ²¡æœ‰å¢åŠ reduxåŠŸèƒ½ï¼Œæ›´ä¸å¯èƒ½æ›¿ä»£reduxï¼Œå› æ­¤åœ¨é¡¹ç›®ä¸­å»ºè®®classä¸hooksä¸€èµ·å†™ï¼Œè€Œä¸æ˜¯ä¸€å‘³ç”¨hooksï¼Œè‡³å°‘å½“å‰é˜¶æ®µæ˜¯è¿™æ ·ã€‚</p><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="å…ˆåœ¨ä¸å¤æ‚çš„æ–°ç»„ä»¶ä½¿ç”¨"><a href="#å…ˆåœ¨ä¸å¤æ‚çš„æ–°ç»„ä»¶ä½¿ç”¨" class="headerlink" title="å…ˆåœ¨ä¸å¤æ‚çš„æ–°ç»„ä»¶ä½¿ç”¨"></a>å…ˆåœ¨ä¸å¤æ‚çš„æ–°ç»„ä»¶ä½¿ç”¨</h3><p>ä¸å»ºè®®é‡å†™åŸæœ‰çš„ç»„ä»¶ï¼Œå¼€å§‹â€œç”¨ Hook çš„æ–¹å¼æ€è€ƒâ€å‰ï¼Œéœ€è¦åšä¸€äº›æ€ç»´ä¸Šçš„è½¬å˜ã€‚æŒ‰ç…§æˆ‘ä»¬çš„ç»éªŒï¼Œæœ€å¥½å…ˆåœ¨æ–°çš„ä¸å¤æ‚çš„ç»„ä»¶ä¸­å°è¯•ä½¿ç”¨ Hookï¼Œå¹¶ç¡®ä¿å›¢é˜Ÿä¸­çš„æ¯ä¸€ä½æˆå‘˜éƒ½èƒ½é€‚åº”ã€‚</p><h3 id="ä¸ç”¨classå°±å¯ç”¨state-å­˜åœ¨çš„æ„ä¹‰"><a href="#ä¸ç”¨classå°±å¯ç”¨state-å­˜åœ¨çš„æ„ä¹‰" class="headerlink" title="ä¸ç”¨classå°±å¯ç”¨state -å­˜åœ¨çš„æ„ä¹‰"></a>ä¸ç”¨classå°±å¯ç”¨state -å­˜åœ¨çš„æ„ä¹‰</h3><p>ä»¥å‰ï¼Œå¦‚æœç»„ä»¶æœ‰stateå°±ä¸€å®šè¦ä½¿ç”¨classï¼Œhooksè§£å†³äº†è¿™ç‚¹ï¼Œå› æ­¤ä½¿ç”¨çº¯å‡½æ•°ä¹Ÿå¯ä»¥æ‹¥æœ‰stateå˜æˆäº†ç°å®ã€‚è¿™æ˜¯hooksæœ€å¤§çš„å˜åŠ¨ã€‚</p><h3 id="é Hookè°ƒç”¨é¡ºåºå¯¹åº”state"><a href="#é Hookè°ƒç”¨é¡ºåºå¯¹åº”state" class="headerlink" title="é Hookè°ƒç”¨é¡ºåºå¯¹åº”state"></a>é Hookè°ƒç”¨é¡ºåºå¯¹åº”state</h3><p>é‚£ä¹ˆ React æ€ä¹ˆçŸ¥é“å“ªä¸ª state å¯¹åº”å“ªä¸ª useStateï¼Ÿç­”æ¡ˆæ˜¯ React é çš„æ˜¯ Hook è°ƒç”¨çš„é¡ºåºã€‚<br>reactä¸æ˜¯ç¥ï¼Œå®ƒæ˜¯é€šè¿‡hookçš„é¡ºåºå°†ä¸åŒçš„å˜é‡åå¯¹åº”åˆ°å½“æ—¶å®šä¹‰å®ƒçš„stateä¸­ã€‚<br>è¯¦ç»†<a href="https://zh-hans.reactjs.org/docs/hooks-rules.html#explanation" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a></p><h3 id="hookçš„ä½ç½®é¡ºåºè‡³å…³é‡è¦"><a href="#hookçš„ä½ç½®é¡ºåºè‡³å…³é‡è¦" class="headerlink" title="hookçš„ä½ç½®é¡ºåºè‡³å…³é‡è¦"></a>hookçš„ä½ç½®é¡ºåºè‡³å…³é‡è¦</h3><p>å‚è€ƒä¸Šé¢çš„ ã€Šé Hookè°ƒç”¨é¡ºåºå¯¹åº”stateã€‹</p><h3 id="ä»»ä½•æ—¶å€™ä¿æŒé¡¶å±‚ä½¿ç”¨hook"><a href="#ä»»ä½•æ—¶å€™ä¿æŒé¡¶å±‚ä½¿ç”¨hook" class="headerlink" title="ä»»ä½•æ—¶å€™ä¿æŒé¡¶å±‚ä½¿ç”¨hook"></a>ä»»ä½•æ—¶å€™ä¿æŒé¡¶å±‚ä½¿ç”¨hook</h3><p>æ— è®ºæ˜¯åœ¨å‡½æ•°ç»„ä»¶å†…è¿˜æ˜¯<strong>è‡ªå®šä¹‰çš„hookå‡½æ•°</strong>å†…ï¼Œè¯·éƒ½ä¿è¯åœ¨é¡¶å±‚ä½¿ç”¨hookï¼ŒåŸå› è§ã€Šé Hookè°ƒç”¨é¡ºåºå¯¹åº”stateã€‹</p><h3 id="å€¼ç›¸åŒï¼Œç¬¬äºŒæ¬¡åå°±ä¸ä¼šå†æ¬¡render"><a href="#å€¼ç›¸åŒï¼Œç¬¬äºŒæ¬¡åå°±ä¸ä¼šå†æ¬¡render" class="headerlink" title="å€¼ç›¸åŒï¼Œç¬¬äºŒæ¬¡åå°±ä¸ä¼šå†æ¬¡render"></a>å€¼ç›¸åŒï¼Œç¬¬äºŒæ¬¡åå°±ä¸ä¼šå†æ¬¡render</h3><p>è¿™æ˜¯hooksè‡ªå·±åšçš„ä¼˜åŒ–ï¼Œå¯åœ¨å®˜ç½‘æ‰¾åˆ°ç›¸å…³è®ºè¿°ï¼Œæ— è®ºæ˜¯usestateè¿˜æ˜¯useReduceréƒ½æœ‰è¿™ä¸ªç°è±¡ï¼Œå½“stateå€¼ç›¸åŒæ—¶ï¼Œæ¸²æŸ“ä¸¤æ¬¡ä¹‹åï¼Œä¸å†æ¸²æŸ“ã€‚<br>classç»„ä»¶æ— æ­¤ç°è±¡ã€‚</p><h3 id="çˆ¶ç»„ä»¶renderä¼šå¯¼è‡´å­renderï¼Œä½†setStateä¸ä¸€å®š"><a href="#çˆ¶ç»„ä»¶renderä¼šå¯¼è‡´å­renderï¼Œä½†setStateä¸ä¸€å®š" class="headerlink" title="çˆ¶ç»„ä»¶renderä¼šå¯¼è‡´å­renderï¼Œä½†setStateä¸ä¸€å®š"></a>çˆ¶ç»„ä»¶renderä¼šå¯¼è‡´å­renderï¼Œä½†setStateä¸ä¸€å®š</h3><p>çˆ¶äº²renderçš„æ—¶å€™ï¼Œè‚¯å®šå¯¼è‡´å‡½æ•°å¼ç»„ä»¶renderï¼›<br>ä½†è¿™ä¸ªå‡½æ•°å¼æ ·ç»„ä»¶å†…ä½¿ç”¨useStateæ›´æ–°æ—¶ï¼Œå¦‚æœstateå€¼ç›¸åŒï¼Œä¸¤æ¬¡åå°±ä¸ä¼šrenderï¼›</p><h3 id="ç”±useRef-createRefçš„åŒºåˆ«-æƒ³åˆ°çš„"><a href="#ç”±useRef-createRefçš„åŒºåˆ«-æƒ³åˆ°çš„" class="headerlink" title="ç”±useRef/createRefçš„åŒºåˆ« æƒ³åˆ°çš„"></a>ç”±useRef/createRefçš„åŒºåˆ« æƒ³åˆ°çš„</h3><h4 id="ä¸€ä¸ªç”¨åœ¨functionï¼Œä¸€ä¸ªç”¨åœ¨class"><a href="#ä¸€ä¸ªç”¨åœ¨functionï¼Œä¸€ä¸ªç”¨åœ¨class" class="headerlink" title="ä¸€ä¸ªç”¨åœ¨functionï¼Œä¸€ä¸ªç”¨åœ¨class"></a>ä¸€ä¸ªç”¨åœ¨functionï¼Œä¸€ä¸ªç”¨åœ¨class</h4><p>è¯¦ç»†å‚è€ƒ<a href="https://juejin.im/post/5e5c5f6a6fb9a07cad3ba383" target="_blank" rel="noopener">useRef ä¸ createRef çš„åŒºåˆ«</a><br>useRefç”¨åœ¨functionç»„ä»¶å†…ï¼Œåè€…ç”¨åœ¨classç»„ä»¶å†…ï¼Œè¿™æ˜¯ä»–ä»¬è¡¨ç°å‡ºæ¥çš„ä¸»è¦åŒºåˆ«ã€‚<br>useRefæ˜¯hookå®ƒæœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œåœ¨functionç»„ä»¶å†…ï¼Œåªåœ¨åˆå§‹çš„æ—¶å€™è¿è¡Œä¸€æ¬¡ï¼›<br>è€ŒcreatRefä¸æ˜¯hookæ²¡æœ‰è¿™ä¸ªèƒ½åŠ›ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œåœ¨functionç»„ä»¶å†…æ—¶ï¼Œä¼šæ¯æ¬¡éƒ½æ‰§è¡Œï¼Œå› æ­¤ä¸èƒ½ç”¨äºfunctionç»„ä»¶ï¼Œ<br>åªç”¨äºclassç»„ä»¶ï¼Œå¹¶åœ¨classç»„ä»¶çš„constructoræˆ–didmountç”Ÿå‘½å‘¨æœŸå†…å®šä¹‰ã€‚</p><h4 id="ä¸€ä¸ªå®šä¹‰åœ¨functionå†…éƒ¨ï¼Œä¸€ä¸ªå®šä¹‰åœ¨è£…å¸è½½æ—¶"><a href="#ä¸€ä¸ªå®šä¹‰åœ¨functionå†…éƒ¨ï¼Œä¸€ä¸ªå®šä¹‰åœ¨è£…å¸è½½æ—¶" class="headerlink" title="ä¸€ä¸ªå®šä¹‰åœ¨functionå†…éƒ¨ï¼Œä¸€ä¸ªå®šä¹‰åœ¨è£…å¸è½½æ—¶"></a>ä¸€ä¸ªå®šä¹‰åœ¨functionå†…éƒ¨ï¼Œä¸€ä¸ªå®šä¹‰åœ¨è£…å¸è½½æ—¶</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="æ™®é€šå‡½æ•°åœ¨hookç»„ä»¶å†…ä¼šè¢«æ¯æ¬¡æ‰§è¡Œ"><a href="#æ™®é€šå‡½æ•°åœ¨hookç»„ä»¶å†…ä¼šè¢«æ¯æ¬¡æ‰§è¡Œ" class="headerlink" title="æ™®é€šå‡½æ•°åœ¨hookç»„ä»¶å†…ä¼šè¢«æ¯æ¬¡æ‰§è¡Œ"></a>æ™®é€šå‡½æ•°åœ¨hookç»„ä»¶å†…ä¼šè¢«æ¯æ¬¡æ‰§è¡Œ</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="hookå‡½æ•°åŸºæœ¬æ˜¯åªæ‰§è¡Œä¸€æ¬¡"><a href="#hookå‡½æ•°åŸºæœ¬æ˜¯åªæ‰§è¡Œä¸€æ¬¡" class="headerlink" title="hookå‡½æ•°åŸºæœ¬æ˜¯åªæ‰§è¡Œä¸€æ¬¡"></a>hookå‡½æ•°åŸºæœ¬æ˜¯åªæ‰§è¡Œä¸€æ¬¡</h4><p>å‚è€ƒä¸Šé¢ã€Šç”±useRef/createRefçš„åŒºåˆ« æƒ³åˆ°çš„ã€‹ï¼Œhookå‡½æ•°çš„æœ€å¤§ç‰¹å¾ä¹‹ä¸€ï¼Œæœ‰åˆ«äºæ™®é€šå‡½æ•°ï¼Œhookå‡½æ•°åœ¨å‡½æ•°ç»„ä»¶å†…ï¼Œä¸ä¼šè¢«å¤šæ¬¡æ‰§è¡Œã€‚</p><h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h2><h3 id="æ˜¯ä¸‰åˆä¸€çš„API"><a href="#æ˜¯ä¸‰åˆä¸€çš„API" class="headerlink" title="æ˜¯ä¸‰åˆä¸€çš„API"></a>æ˜¯ä¸‰åˆä¸€çš„API</h3><p>useEffect ç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ componentDidMountã€componentDidUpdate å’Œ componentWillUnmount å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚</p><h3 id="è¿è¡Œæ—¶æœº"><a href="#è¿è¡Œæ—¶æœº" class="headerlink" title="è¿è¡Œæ—¶æœº"></a>è¿è¡Œæ—¶æœº</h3><p>å½“ä½ è°ƒç”¨ useEffect æ—¶ï¼Œå°±æ˜¯åœ¨å‘Šè¯‰ React åœ¨å®Œæˆå¯¹ DOM çš„æ›´æ”¹åè¿è¡Œä½ çš„â€œå‰¯ä½œç”¨â€å‡½æ•°ã€‚ç”±äºå‰¯ä½œç”¨å‡½æ•°æ˜¯åœ¨ç»„ä»¶å†…å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥è®¿é—®åˆ°ç»„ä»¶çš„ props å’Œ stateã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åè°ƒç”¨å‰¯ä½œç”¨å‡½æ•° â€”â€” åŒ…æ‹¬ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ã€‚</p><h3 id="åæ¨¡å¼çš„è®¾è®¡"><a href="#åæ¨¡å¼çš„è®¾è®¡" class="headerlink" title="åæ¨¡å¼çš„è®¾è®¡"></a>åæ¨¡å¼çš„è®¾è®¡</h3><p>æˆ‘ä»¬ç»™useEffectæ¯æ¬¡ä¼ é€’çš„æ˜¯ä¸€ä¸ªå´­æ–°çš„å‡½æ•°ï¼Œè¿™æ ·åšçš„ç›®çš„å¯èƒ½æ˜¯è¿™ä¸ªå´­æ–°çš„å‡½æ•°æ¯æ¬¡å¯ä»¥è·å¾—ç»„ä»¶å†…æœ€æ–°çš„ä¸Šä¸‹æ–‡ï¼›å®˜ç½‘å¯¹æ­¤åšçš„è§£é‡Šå¦‚ä¸‹ï¼Œã€æ¯æ¬¡æˆ‘ä»¬é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šç”Ÿæˆæ–°çš„ effectï¼Œæ›¿æ¢æ‰ä¹‹å‰çš„ã€‚æŸç§æ„ä¹‰ä¸Šè®²ï¼Œeffect æ›´åƒæ˜¯æ¸²æŸ“ç»“æœçš„ä¸€éƒ¨åˆ† â€”â€” æ¯ä¸ª effect â€œå±äºâ€ä¸€æ¬¡ç‰¹å®šçš„æ¸²æŸ“ã€‚ã€‘<a href="https://zh-hans.reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener">è¯¦è§å®˜ç½‘</a>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(() =&gt; &#123;</span><br><span class="line">   document.title = `You clicked $&#123;count&#125; times`;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p><h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h2><h3 id="åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­è°ƒç”¨â€“ä½¿ç”¨å‡½æ•°è®¾ç½®åˆå§‹å€¼"><a href="#åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­è°ƒç”¨â€“ä½¿ç”¨å‡½æ•°è®¾ç½®åˆå§‹å€¼" class="headerlink" title="åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­è°ƒç”¨â€“ä½¿ç”¨å‡½æ•°è®¾ç½®åˆå§‹å€¼"></a>åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­è°ƒç”¨â€“ä½¿ç”¨å‡½æ•°è®¾ç½®åˆå§‹å€¼</h3><p>initialState å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥ã€‚å¦‚æœåˆå§‹ state éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ stateï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = useState(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> initialState = someExpensiveComputation(props);</span><br><span class="line">  <span class="keyword">return</span> initialState;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h2 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h2><h3 id="ç›‘å¬åˆ°å˜åŒ–åä¼šæ¸²æŸ“å½“å‰ç»„å»º"><a href="#ç›‘å¬åˆ°å˜åŒ–åä¼šæ¸²æŸ“å½“å‰ç»„å»º" class="headerlink" title="ç›‘å¬åˆ°å˜åŒ–åä¼šæ¸²æŸ“å½“å‰ç»„å»º"></a>ç›‘å¬åˆ°å˜åŒ–åä¼šæ¸²æŸ“å½“å‰ç»„å»º</h3><h3 id="éœ€è¦é…åˆhemeContext-Providerä½¿ç”¨"><a href="#éœ€è¦é…åˆhemeContext-Providerä½¿ç”¨" class="headerlink" title="éœ€è¦é…åˆhemeContext.Providerä½¿ç”¨"></a>éœ€è¦é…åˆhemeContext.Providerä½¿ç”¨</h3><h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><h3 id="useReducer-ä¸-redux-çš„å…³ç³»"><a href="#useReducer-ä¸-redux-çš„å…³ç³»" class="headerlink" title="useReducer ä¸ redux çš„å…³ç³»"></a>useReducer ä¸ redux çš„å…³ç³»</h3><h4 id="ç»å…¸demo"><a href="#ç»å…¸demo" class="headerlink" title="ç»å…¸demo"></a>ç»å…¸demo</h4><p>å¦‚ä¸‹demoï¼Œ<br>è¿™é‡Œçš„dispatchå°±æ˜¯reduxçš„dispatch APIï¼›<br>è¿™é‡Œçš„todoså°±ç›¸å½“äºreduxçš„å…¨å±€çš„store çš„stateï¼›<br>è¿™é‡Œçš„Providerä¸contextç»“æ„ å°±æ˜¯ redux ç»“åˆreactçš„ react-connectçš„ä¸€å¥—ï¼›<br>æ‰€ä»¥useReduceråœ¨æ€æƒ³ä¸Šæ·±åº¦æ¨¡ä»¿äº†reduxï¼Œå¾ˆåƒä¸€ä¸ªè¿·ä½ çš„reduxã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TodosDispatch = React.createContext(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodosApp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æç¤ºï¼š`dispatch` ä¸ä¼šåœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´å˜åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [todos, dispatch] = useReducer(todosReducer);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;TodosDispatch.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">      &lt;DeepTree todos=&#123;todos&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/TodosDispatch.Provider&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><h4 id="åŸç†ä¸Šå€Ÿé‰´äº†redux"><a href="#åŸç†ä¸Šå€Ÿé‰´äº†redux" class="headerlink" title="åŸç†ä¸Šå€Ÿé‰´äº†redux"></a>åŸç†ä¸Šå€Ÿé‰´äº†redux</h4><p>å‚è€ƒä¸Šé¢ã€Šç»å…¸demoã€‹</p><h4 id="å°±æ˜¯ä¸€ä¸ªè¿·ä½ çš„redux"><a href="#å°±æ˜¯ä¸€ä¸ªè¿·ä½ çš„redux" class="headerlink" title="å°±æ˜¯ä¸€ä¸ªè¿·ä½ çš„redux"></a>å°±æ˜¯ä¸€ä¸ªè¿·ä½ çš„redux</h4><p>å‚è€ƒä¸Šé¢ã€Šç»å…¸demoã€‹</p><h3 id="æƒ°æ€§åˆå§‹åŒ–"><a href="#æƒ°æ€§åˆå§‹åŒ–" class="headerlink" title="æƒ°æ€§åˆå§‹åŒ–"></a>æƒ°æ€§åˆå§‹åŒ–</h3><p>è¿ç”¨åœºæ™¯ï¼šç¬¬ä¸€æ¬¡è®¡ç®—stateçš„é€»è¾‘å¤æ‚ï¼Œä»¥åä¸å¤æ‚ï¼Œå¯ä»¥å°†ç¬¬ä¸€æ¬¡çš„è®¡ç®—é€»è¾‘å‰¥ç¦»å‡ºæ¥ï¼›<br>å¥½å¤„é™¤äº†ä¸Šé¢è¯´çš„ï¼Œè¿˜æœ‰å°±æ˜¯é€»è¾‘å‰¥ç¦»å‡ºæ¥åï¼Œä»£ç æ›´åŠ æ¸…æ™°ï¼Œç»´æŠ¤å®¹æ˜“ï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span>(<span class="params">initialCount</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;<span class="attr">count</span>: initialCount&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reducer</span>(<span class="params">state, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'increment'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count + <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'decrement'</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count - <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'reset'</span>:</span><br><span class="line">      <span class="keyword">return</span> init(action.payload);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params">&#123;initialCount&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(reducer, initialCount, init);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      Count: &#123;state.count&#125;</span><br><span class="line">      &lt;button</span><br><span class="line">        onClick=&#123;() =&gt; dispatch(&#123;<span class="attr">type</span>: <span class="string">'reset'</span>, <span class="attr">payload</span>: initialCount&#125;)&#125;&gt;</span><br><span class="line">        Reset</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: 'decrement'&#125;)&#125;&gt;-&lt;/</span>button&gt;</span><br><span class="line">      &lt;button onClick=&#123;() =&gt; dispatch(&#123;<span class="attr">type</span>: <span class="string">'increment'</span>&#125;)&#125;&gt;+&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åœºæ™¯-æ·±å±‚å­å±‚æ”¹å˜é¡¶å±‚state-reducer-context"><a href="#åœºæ™¯-æ·±å±‚å­å±‚æ”¹å˜é¡¶å±‚state-reducer-context" class="headerlink" title="åœºæ™¯ - æ·±å±‚å­å±‚æ”¹å˜é¡¶å±‚state (reducer/context)"></a>åœºæ™¯ - æ·±å±‚å­å±‚æ”¹å˜é¡¶å±‚state (reducer/context)</h3><p>ä»¥å‰æˆ‘ä»¬æ˜¯å°†é¡¶å±‚setStateçš„å‡½æ•°ä¼ ç»™å­å±‚ï¼Œç°åœ¨æˆ‘ä»¬å»ºè®®ä½¿ç”¨<strong>contextä¸reducer</strong>çš„æ–¹å¼ï¼Œ<br>å‚çœ‹<a href="https://zh-hans.reactjs.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="noopener">ã€Šå¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒã€‹</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TodosDispatch = React.createContext(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodosApp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æç¤ºï¼š`dispatch` ä¸ä¼šåœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´å˜åŒ–</span></span><br><span class="line">  <span class="keyword">const</span> [todos, dispatch] = useReducer(todosReducer);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;TodosDispatch.Provider value=&#123;dispatch&#125;&gt;</span><br><span class="line">      &lt;DeepTree todos=&#123;todos&#125; /&gt;</span><br><span class="line">    &lt;<span class="regexp">/TodosDispatch.Provider&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function DeepChild(props) &#123;</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ å¦‚æœæˆ‘ä»¬æƒ³è¦æ‰§è¡Œä¸€ä¸ª actionï¼Œæˆ‘ä»¬å¯ä»¥ä» context ä¸­è·å– dispatchã€‚</span></span><br><span class="line"><span class="regexp">  const dispatch = useContext(TodosDispatch);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  function handleClick() &#123;</span></span><br><span class="line"><span class="regexp">    dispatch(&#123; type: 'add', text: 'hello' &#125;);</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;button onClick=&#123;handleClick&#125;&gt;Add todo&lt;/</span>button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åœºæ™¯-å¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒ"><a href="#åœºæ™¯-å¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒ" class="headerlink" title="åœºæ™¯ - å¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒ"></a>åœºæ™¯ - å¦‚ä½•é¿å…å‘ä¸‹ä¼ é€’å›è°ƒ</h3><p>å‚è€ƒä¸Šé¢ã€Šåœºæ™¯ - æ·±å±‚å­å±‚æ”¹å˜é¡¶å±‚state (reducer/context)ã€‹</p><h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>useCallbackçš„æœ¬è´¨ä½œç”¨æ˜¯å°†æ¯æ¬¡åˆ›å»ºçš„å‡½æ•°éƒ½æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨å¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resultCallback = useCallback(fn, deps); <span class="comment">//resultCallback å¯ä»¥è®¤ä¸ºå°±æ˜¯fn</span></span><br><span class="line"><span class="keyword">const</span> resultMemo = useMemo(fn, deps);<span class="comment">//resultMemo å°±æ˜¯ fnçš„æ‰§è¡Œåçš„ç»“æœ</span></span><br></pre></td></tr></table></figure></p><p><a href="https://www.teaspect.com/detail/5756" target="_blank" rel="noopener">æ›´å¤šä»‹ç»</a></p><h3 id="å¯ä¸React-memoæˆ–shouldComponentUpdateç»“åˆä½¿ç”¨"><a href="#å¯ä¸React-memoæˆ–shouldComponentUpdateç»“åˆä½¿ç”¨" class="headerlink" title="å¯ä¸React.memoæˆ–shouldComponentUpdateç»“åˆä½¿ç”¨"></a>å¯ä¸React.memoæˆ–shouldComponentUpdateç»“åˆä½¿ç”¨</h3><p>useCallbackå¹¶éä¸€å®šè¦ä¸ä»¥ä¸Šä¸€èµ·ä½¿ç”¨ï¼Œä½†ä¸ä¸Šé¢ä½¿ç”¨å¯ä½“ç°å®ƒçš„å¨åŠ›ï¼Œå¦‚æœæœ‰å…¶ä»–åœºæ™¯ï¼Œä¹Ÿå¯è¯•è¯•ã€‚</p><h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h2><h3 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>ä¼ ç»Ÿç”¨æ³•å’Œè¯¦ç»†ä»‹ç»ï¼Œ<a href="https://blog.csdn.net/hjc256/article/details/102587037" target="_blank" rel="noopener">å‚è€ƒ</a>ï¼›<br>é™¤äº†ä¼ ç»Ÿç”¨æ³•ï¼ŒuseRefå¦å¤–ä¸€ä¸ªå¥½å¤„åœ¨äºç”¨æ¥ä¿å­˜å€¼ï¼Œä¿®æ”¹å®ƒï¼Œä¸ä¼šé€ æˆé‡æ–°æ¸²æŸ“ã€‚</p><h3 id="ç»™useRefè®¾ç½®ä¸€ä¸ªå€¼"><a href="#ç»™useRefè®¾ç½®ä¸€ä¸ªå€¼" class="headerlink" title="ç»™useRefè®¾ç½®ä¸€ä¸ªå€¼"></a>ç»™useRefè®¾ç½®ä¸€ä¸ªå€¼</h3><p>åˆšå¼€å§‹ä¸å¤ªç†è§£è®¾ç½®ä¸€ä¸ªå€¼æ˜¯ä»€ä¹ˆæ„æ€ï¼ŒåŸæ¥å°±æ˜¯ç»™currentè®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ã€‚<br><a href="https://react.docschina.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily" target="_blank" rel="noopener">å‚è€ƒ å¦‚ä½•æƒ°æ€§åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡ï¼Ÿ</a>ï¼›<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ref = useRef(<span class="number">9999</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ref)<span class="comment">//&#123;current: 9999&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="ä¿®æ”¹å®ƒä¸ä¼šé€ æˆç»„ä»¶é‡æ–°æ¸²æŸ“"><a href="#ä¿®æ”¹å®ƒä¸ä¼šé€ æˆç»„ä»¶é‡æ–°æ¸²æŸ“" class="headerlink" title="ä¿®æ”¹å®ƒä¸ä¼šé€ æˆç»„ä»¶é‡æ–°æ¸²æŸ“"></a>ä¿®æ”¹å®ƒä¸ä¼šé€ æˆç»„ä»¶é‡æ–°æ¸²æŸ“</h3><p><a href="https://blog.csdn.net/hjc256/article/details/102587037" target="_blank" rel="noopener">å‚è€ƒ</a>ï¼›<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect, useMemo, useRef &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> doubleCount = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * count;</span><br><span class="line">  &#125;, [count]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> timerID = useRef();</span><br><span class="line">  </span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    timerID.current = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        setCount(<span class="function"><span class="params">count</span> =&gt;</span> count + <span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>); </span><br><span class="line">  &#125;, []);</span><br><span class="line">  </span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(count &gt; <span class="number">10</span>)&#123;</span><br><span class="line">          clearInterval(timerID.current);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;button ref=&#123;couterRef&#125; onClick=&#123;() =&gt; &#123;setCount(count + <span class="number">1</span>)&#125;&#125;&gt;Count: &#123;count&#125;, <span class="attr">double</span>: &#123;doubleCount&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="useImperativeHandle"><a href="#useImperativeHandle" class="headerlink" title="useImperativeHandle"></a>useImperativeHandle</h2><p>ä¸useRefã€ forwardRef ä¸€èµ·ä½¿ç”¨ï¼Œè‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶ä½¿ç”¨æ—¶çš„refï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæœ‰ç”¨çš„APIï¼Œæˆ‘è§‰å¾—å®ƒçš„ä½œç”¨ä¹‹ä¸€æ˜¯å°†å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œå¾ˆå®¹æ˜“çš„ä¼ ç»™çˆ¶ç»„ä»¶ã€‚ï¼Œè¯¦ç»†<a href="https://zh-hans.reactjs.org/docs/hooks-reference.html" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a>ã€‚</p><h2 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h2><p>ç”¨æ³•åŒuseEffectï¼Œåªæœ‰åœ¨useEffectä¸æ»¡è¶³æƒ…å†µä¸‹æ‰ä½¿ç”¨ï¼Œå®ƒçš„ç‰¹ç‚¹åœ¨äºdomå¸ƒå±€æ—¶åŒæ­¥è§¦å‘ï¼Œè€Œä¸æ˜¯æ¸²æŸ“å®Œæˆåè§¦å‘ï¼ŒæœåŠ¡ç«¯ä¸è¦ä½¿ç”¨æ­¤APIã€‚</p><h2 id="hookså‡ºç°çš„æ„ä¹‰"><a href="#hookså‡ºç°çš„æ„ä¹‰" class="headerlink" title="hookså‡ºç°çš„æ„ä¹‰"></a>hookså‡ºç°çš„æ„ä¹‰</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>hooks å®ç°äº†stateçŠ¶æ€çš„å¤ç”¨ï¼Œä»¥å‰stateçŠ¶æ€çš„å¤ç”¨ï¼Œåªèƒ½é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼Œ<br>ç°åœ¨å¯ä»¥é€šè¿‡hooksï¼Œä½†hooksæ¯”é«˜é˜¶ç»„ä»¶å¤ç”¨çŠ¶æ€æ—¶ï¼Œå†™æ³•ç®€å•ï¼Œæ–¹ä¾¿ï¼Œå¯è¯»æ€§ï¼Œæ˜“ç»´æŠ¤æ€§æ›´å¼ºã€‚</p><p>ä»¥å‰å¿…é¡»ä½¿ç”¨é«˜é˜¶ç»„ä»¶å®ç°çš„stateå¤ç”¨ï¼Œç°åœ¨åªéœ€è¦ä¸€æ®µè‡ªå®šä¹‰hookså°±å¯ä»¥é©¬ä¸Šå®ç°éå¸¸ç®€æ´ï¼Œæ¸…æ™°ï¼Œæ˜“è¯»æ˜“ç»´æŠ¤ã€‚<br><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">æ›´å¤šï¼Œå‚è€ƒè¿™ç¯‡åšå®¢ï¼Œè®²çš„å¾ˆå¥½</a></p><h3 id="éå¸¸é‡è¦ï¼šå¯è¯»æ€§æ˜“ç»´æŠ¤æ€§"><a href="#éå¸¸é‡è¦ï¼šå¯è¯»æ€§æ˜“ç»´æŠ¤æ€§" class="headerlink" title="éå¸¸é‡è¦ï¼šå¯è¯»æ€§æ˜“ç»´æŠ¤æ€§"></a>éå¸¸é‡è¦ï¼šå¯è¯»æ€§æ˜“ç»´æŠ¤æ€§</h3><p>hooksçš„é‡è¦æ„ä¹‰ä¸€æ–¹é¢æ˜¯å¢åŠ äº†æ–¹ä¾¿æ€§ï¼Œæ¯”å¦‚å¯ä»¥æ›¿ä»£åŸæ¥é«˜é˜¶ç»„ä»¶æ‰€å®ç°çš„åŠŸèƒ½ã€‚<br>å¦å¤–ä¸€ä¸ªé‡è¦çš„æ ¸å¿ƒå°±æ˜¯ï¼Œå¢åŠ äº†å¯è¯»æ€§ï¼Œæ˜“ç»´æŠ¤æ€§ï¼Œè¿™ç‚¹éå¸¸é‡è¦ã€‚</p><p>å°±å¥½åƒes6æ²¡æœ‰å‡ºç°å‰ï¼Œä¸€ä¸ªå˜é‡å¯èƒ½è¢«å±‚å±‚æ±¡æŸ“ï¼Œä¸çŸ¥é“å“ªé‡Œè¢«é‡æ–°è®¾ç½®äº†ï¼Œ<br>es6çš„å‡ºç°å¾ˆå¥½è§£å†³äº†è¿™ç‚¹ã€‚<br><figure class="image-box">                <img src="/image/react/hooks-read.png" alt title class>                <p></p>            </figure><br><a href="https://blog.csdn.net/weixin_43606158/article/details/106715134" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="åŠŸèƒ½æ˜¯ä¸€æ–¹é¢ï¼Œå¯è¯»æ˜“ç»´æŠ¤ä¹Ÿæ˜¯é‡è¦æ–¹é¢"><a href="#åŠŸèƒ½æ˜¯ä¸€æ–¹é¢ï¼Œå¯è¯»æ˜“ç»´æŠ¤ä¹Ÿæ˜¯é‡è¦æ–¹é¢" class="headerlink" title="åŠŸèƒ½æ˜¯ä¸€æ–¹é¢ï¼Œå¯è¯»æ˜“ç»´æŠ¤ä¹Ÿæ˜¯é‡è¦æ–¹é¢"></a>åŠŸèƒ½æ˜¯ä¸€æ–¹é¢ï¼Œå¯è¯»æ˜“ç»´æŠ¤ä¹Ÿæ˜¯é‡è¦æ–¹é¢</h3><p>å‚è€ƒä¸Šé¢ã€Šéå¸¸é‡è¦ï¼šå¯è¯»æ€§æ˜“ç»´æŠ¤æ€§ ã€‹</p><h3 id="hooksä¸é«˜é˜¶ç»„ä»¶åŒºåˆ«"><a href="#hooksä¸é«˜é˜¶ç»„ä»¶åŒºåˆ«" class="headerlink" title="hooksä¸é«˜é˜¶ç»„ä»¶åŒºåˆ«"></a>hooksä¸é«˜é˜¶ç»„ä»¶åŒºåˆ«</h3><p>hooksä¸é«˜é˜¶ç»„ä»¶éƒ½å¯ä»¥å®ç°ä»£ç å¤ç”¨ï¼Œæ¯”å¦‚stateå¤ç”¨ï¼ŒäºŒè€…æœ¬è´¨ä¸Šæ— åŒºåˆ«ï¼Œ<br>ä½†ä½¿ç”¨æ–¹å¼ä¸Šå´ä¸€ä¸ªç¹æ‚æ²‰ä½™ï¼Œä¸”è¦å¤šä¸€å±‚ç»„ä»¶åŒ…è£¹ã€‚<br>ä½†hookså†™æ³•çµæ´»ï¼Œç®€å•ï¼Œä¸”å¯è¯»æ€§æå¼ºã€‚<br><a href="https://blog.csdn.net/qq_40962320/article/details/87043581" target="_blank" rel="noopener">æ›´å¤šï¼Œå‚è€ƒè¿™ç¯‡åšå®¢ï¼Œè®²çš„å¾ˆå¥½</a></p><h2 id="FAQä¹‹ä¸€"><a href="#FAQä¹‹ä¸€" class="headerlink" title="FAQä¹‹ä¸€"></a>FAQä¹‹ä¸€</h2><h3 id="æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª-state-å˜é‡ï¼Ÿ"><a href="#æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª-state-å˜é‡ï¼Ÿ" class="headerlink" title="æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª state å˜é‡ï¼Ÿ"></a>æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª state å˜é‡ï¼Ÿ</h3><p>æˆ‘ä»¬æ¨èæŠŠ state åˆ‡åˆ†æˆå¤šä¸ª state å˜é‡ï¼Œæ¯ä¸ªå˜é‡åŒ…å«çš„ä¸åŒå€¼ä¼šåœ¨åŒæ—¶å‘ç”Ÿå˜åŒ–ã€‚<br>è¯´çš„æ˜¯ï¼Œä¸€ä¸ªuseStateåº”è¯¥åªæ”¹å˜ è¿™ä¸ªåŠ¨ä½œ æ”¹åŠ¨çš„stateï¼›<br>æ¯”å¦‚ä¸€ä¸ªæ˜¯æ”¹å˜postionçš„ï¼Œä¸€ä¸ªæ˜¯æ”¹å˜å®½é«˜çš„ï¼Œè¿™ä¸¤ä¸ªåº”è¯¥å†™åœ¨ä¸åŒstateä¸Šï¼Œ<br>å½“ç„¶ï¼Œæ²¡æœ‰å”¯ä¸€çš„æ ‡å‡†ï¼Œé è‡ªå·±å¹³è¡¡ï¼Œåˆ†å¼€ä¸ä¸åˆ†å¼€ï¼Œè€ƒè™‘çš„æ˜¯åæœŸç»´æŠ¤æ€§æ‰©å±•å’Œå¯è¯»æ€§ï¼Œå¦‚æœä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œåº”è¯¥ç¢ç‰‡åŒ–stateï¼›<br>å¦‚æœä¸šåŠ¡ç®€å•ï¼Œæ˜¯å¦åˆ†å¼€å¯èƒ½ä½œç”¨ä¸å¤§ï¼Œçœ‹ä¸ªäººçš„ç¼–ç¨‹ä¹ æƒ¯ã€‚<br>è¯¦ç»†<a href="https://react.docschina.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="noopener">æŸ¥çœ‹å®˜ç½‘ æˆ‘åº”è¯¥ä½¿ç”¨å•ä¸ªè¿˜æ˜¯å¤šä¸ª state å˜é‡ï¼Ÿ</a></p><h3 id="æˆ‘å¯ä»¥åªåœ¨æ›´æ–°æ—¶è¿è¡Œ-effect-å—ï¼Ÿ-componentDidupdate"><a href="#æˆ‘å¯ä»¥åªåœ¨æ›´æ–°æ—¶è¿è¡Œ-effect-å—ï¼Ÿ-componentDidupdate" class="headerlink" title="æˆ‘å¯ä»¥åªåœ¨æ›´æ–°æ—¶è¿è¡Œ effect å—ï¼Ÿ(componentDidupdate)"></a>æˆ‘å¯ä»¥åªåœ¨æ›´æ–°æ—¶è¿è¡Œ effect å—ï¼Ÿ(componentDidupdate)</h3><p>å®˜ç½‘ä¸Šçš„è¿™ä¸ªé—®é¢˜ï¼Œè®¨è®ºçš„å°±æ˜¯å¦‚ä½•ä½¿ç”¨useEffect æ¥æ¨¡æ‹ŸcomponentDidupdateï¼Œå®˜ç½‘æ¨èæ–¹æ³•æ˜¯ï¼Œä½¿ç”¨Refã€‚</p><h3 id="å¦‚ä½•è·å–ä¸Šä¸€è½®çš„-props-æˆ–-stateï¼Ÿ"><a href="#å¦‚ä½•è·å–ä¸Šä¸€è½®çš„-props-æˆ–-stateï¼Ÿ" class="headerlink" title="å¦‚ä½•è·å–ä¸Šä¸€è½®çš„ props æˆ– stateï¼Ÿ"></a>å¦‚ä½•è·å–ä¸Šä¸€è½®çš„ props æˆ– stateï¼Ÿ</h3><p>ç›®å‰ï¼Œä½ å¯ä»¥ é€šè¿‡ ref æ¥æ‰‹åŠ¨å®ç°.è¯¦ç»†å‚çœ‹å®˜ç½‘ã€‚<br>ä¹Ÿè®¸ä½ è¯´ï¼Œå¯ä»¥é€šè¿‡useReducer</p><h3 id="ref-å¹¶éä¸€å®šè¦è·Ÿå­ç»„ä»¶ä¸€èµ·ç”¨ï¼Œä¸€å®šè¦åµŒå…¥å­ç»„ä»¶â€”refå¤§æœ‰å¯ä¸ºï¼Œæ˜¯æ–°æ—¶ä»£çš„å®ä¾‹å¯¹è±¡å’Œthisä¸å˜æŒ‡é’ˆã€‚"><a href="#ref-å¹¶éä¸€å®šè¦è·Ÿå­ç»„ä»¶ä¸€èµ·ç”¨ï¼Œä¸€å®šè¦åµŒå…¥å­ç»„ä»¶â€”refå¤§æœ‰å¯ä¸ºï¼Œæ˜¯æ–°æ—¶ä»£çš„å®ä¾‹å¯¹è±¡å’Œthisä¸å˜æŒ‡é’ˆã€‚" class="headerlink" title="ref å¹¶éä¸€å®šè¦è·Ÿå­ç»„ä»¶ä¸€èµ·ç”¨ï¼Œä¸€å®šè¦åµŒå…¥å­ç»„ä»¶â€”refå¤§æœ‰å¯ä¸ºï¼Œæ˜¯æ–°æ—¶ä»£çš„å®ä¾‹å¯¹è±¡å’Œthisä¸å˜æŒ‡é’ˆã€‚"></a>ref å¹¶éä¸€å®šè¦è·Ÿå­ç»„ä»¶ä¸€èµ·ç”¨ï¼Œä¸€å®šè¦åµŒå…¥å­ç»„ä»¶â€”refå¤§æœ‰å¯ä¸ºï¼Œæ˜¯æ–°æ—¶ä»£çš„å®ä¾‹å¯¹è±¡å’Œthisä¸å˜æŒ‡é’ˆã€‚</h3><p>æ¯”å¦‚ FAq <a href="https://react.docschina.org/docs/hooks-faq.html#how-to-avoid-passing-callbacks-down" target="_blank" rel="noopener">ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„ props å’Œ state ï¼Ÿ </a>ä¹Ÿè¯´åˆ°äº†refçš„ç”¨å¤„ã€‚</p><h3 id="æˆ‘è¯¥å¦‚ä½•å®ç°-getDerivedStateFromProps"><a href="#æˆ‘è¯¥å¦‚ä½•å®ç°-getDerivedStateFromProps" class="headerlink" title="æˆ‘è¯¥å¦‚ä½•å®ç° getDerivedStateFromProps?"></a>æˆ‘è¯¥å¦‚ä½•å®ç° getDerivedStateFromProps?</h3><p><a href="https://react.docschina.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘</a>ï¼Œæ¨¡æ‹ŸgetDerivedStateFromPropsçš„å…³é”®åœ¨äºè·å–ä¸Šä¸€æ¬¡çš„propså’Œstateã€‚å®˜ç½‘çš„ä¾‹å­è®¾ç½®ä¸€ä¸ªä¸ç”¨äºæ¸²æŸ“çš„stateå­˜å‚¨prestateã€‚è¿™é‡Œçš„<strong>ç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼š</strong>ä¸€èˆ¬è®¤ä¸ºstateç”¨äºæ¸²æŸ“ç»„ä»¶çš„ï¼Œä¸æ¸²æŸ“ç»„ä»¶æ—¶ä¸è¦ç”¨stateã€‚<br>è¿™é‡Œå®˜ç½‘éƒ½æ¨èäº†ï¼Œæ‰€ä»¥ï¼Œå‡¡äº‹æ— å›ºå®šï¼Œå¹³è¡¡å°±å¥½ã€‚</p><p>å¦å¤–ä¸€ç§æ–¹å¼ä¹Ÿå¯ä»¥é€šè¿‡ ref æ¥è·å–ä¸Šä¸€è½®çš„propså’Œstateï¼Œä¹Ÿå¯ä»¥æ¥æ¨¡æ‹Ÿ getDerivedStateFromPropsï¼Œå‚è€ƒä¸Šé¢çš„ã€Šå¦‚ä½•è·å–ä¸Šä¸€è½®çš„ props æˆ– stateï¼Ÿã€‹</p><h3 id="ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„-props-å’Œ-state-ï¼Ÿâ€“å†…éƒ¨å‡½æ•°ä½œç”¨åŸŸé—®é¢˜"><a href="#ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„-props-å’Œ-state-ï¼Ÿâ€“å†…éƒ¨å‡½æ•°ä½œç”¨åŸŸé—®é¢˜" class="headerlink" title="ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„ props å’Œ state ï¼Ÿâ€“å†…éƒ¨å‡½æ•°ä½œç”¨åŸŸé—®é¢˜"></a>ä¸ºä»€ä¹ˆæˆ‘ä¼šåœ¨æˆ‘çš„å‡½æ•°ä¸­çœ‹åˆ°é™ˆæ—§çš„ props å’Œ state ï¼Ÿâ€“å†…éƒ¨å‡½æ•°ä½œç”¨åŸŸé—®é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleAlertClick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      alert(<span class="string">'You clicked on: '</span> + count);</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleAlertClick&#125;&gt;</span><br><span class="line">        Show alert</span><br><span class="line">      &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æœ‰ç±»ä¼¼-forceUpdate-çš„ä¸œè¥¿å—ï¼Ÿ"><a href="#æœ‰ç±»ä¼¼-forceUpdate-çš„ä¸œè¥¿å—ï¼Ÿ" class="headerlink" title="æœ‰ç±»ä¼¼ forceUpdate çš„ä¸œè¥¿å—ï¼Ÿ"></a>æœ‰ç±»ä¼¼ forceUpdate çš„ä¸œè¥¿å—ï¼Ÿ</h3><p>ä½¿ç”¨è®¡æ—¶å™¨ç»“åˆ useStateç­‰æ¥åšï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¿…é¡»è¦ç”¨è®¡æ—¶å™¨ï¼Œå› ä¸ºuseStateç›¸åŒçš„å€¼ï¼Œä¸¤æ¬¡åï¼Œéƒ½ä¸ä¼šæ›´æ–°ï¼Œè¿™æ˜¯hooksäºsetStateçš„æ ¹æœ¬åŒºåˆ«</strong>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const [ignored, forceUpdate] = useReducer(x =&gt; x + 1, 0);</span><br><span class="line"></span><br><span class="line">function handleClick() &#123;</span><br><span class="line">  forceUpdate();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æˆ‘è¯¥å¦‚ä½•æµ‹é‡-DOM-èŠ‚ç‚¹ï¼Ÿâ€“-callback-ref-çš„ä½¿ç”¨"><a href="#æˆ‘è¯¥å¦‚ä½•æµ‹é‡-DOM-èŠ‚ç‚¹ï¼Ÿâ€“-callback-ref-çš„ä½¿ç”¨" class="headerlink" title="æˆ‘è¯¥å¦‚ä½•æµ‹é‡ DOM èŠ‚ç‚¹ï¼Ÿâ€“ callback ref çš„ä½¿ç”¨"></a>æˆ‘è¯¥å¦‚ä½•æµ‹é‡ DOM èŠ‚ç‚¹ï¼Ÿâ€“ callback ref çš„ä½¿ç”¨</h3><p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰é€‰æ‹©ä½¿ç”¨ useRefï¼Œå› ä¸ºå½“ ref æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶å®ƒå¹¶ä¸ä¼šæŠŠå½“å‰ ref çš„å€¼çš„ å˜åŒ– é€šçŸ¥åˆ°æˆ‘ä»¬ã€‚ä½¿ç”¨ callback ref å¯ä»¥ç¡®ä¿ å³ä¾¿å­ç»„ä»¶å»¶è¿Ÿæ˜¾ç¤ºè¢«æµ‹é‡çš„èŠ‚ç‚¹ ã€‚<br>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„callback refå…¶å®å°±æ˜¯è€çš„classç»„ä»¶å†…ä½¿ç”¨çš„callback refï¼Œæ²¡æœ‰åŒºåˆ«ã€‚å¹¶ä¸æ˜¯hooksç‹¬åˆ›ã€‚<br>å¦‚æœä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå®ä¾‹å”¯ä¸€çš„å‡½æ•°ï¼Œåœ¨ä¸‹é¢ä»£ç ä¸­ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨useCallbackã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  function MeasureExample() &#123;</span><br><span class="line">  const [height, setHeight] = useState(0);</span><br><span class="line"></span><br><span class="line">  const measuredRef = useCallback(node =&gt; &#123;</span><br><span class="line">    if (node !== null) &#123;</span><br><span class="line">      setHeight(node.getBoundingClientRect().height);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;h1 ref=&#123;measuredRef&#125;&gt;Hello, world&lt;/h1&gt;</span><br><span class="line">      &lt;h2&gt;The above header is &#123;Math.round(height)&#125;px tall&lt;/h2&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å½¢æˆé—­åŒ…æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°æœ€æ–°çš„state"><a href="#å½¢æˆé—­åŒ…æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°æœ€æ–°çš„state" class="headerlink" title="å½¢æˆé—­åŒ…æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°æœ€æ–°çš„state"></a>å½¢æˆé—­åŒ…æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°æœ€æ–°çš„state</h3><p><a href="https://react.docschina.org/docs/hooks-faq.html" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒå®˜ç½‘ - å¦‚æœæˆ‘çš„ effect çš„ä¾èµ–é¢‘ç¹å˜åŒ–ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ</a><br>å¯é€šè¿‡å‡½æ•°å¼çš„useStateï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      setCount(<span class="function"><span class="params">c</span> =&gt;</span> c + <span class="number">1</span>); <span class="comment">// âœ… åœ¨è¿™ä¸ä¾èµ–äºå¤–éƒ¨çš„ `count` å˜é‡</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> clearInterval(id);</span><br><span class="line">  &#125;, []); <span class="comment">// âœ… æˆ‘ä»¬çš„ effect ä¸é€‚ç”¨ç»„ä»¶ä½œç”¨åŸŸä¸­çš„ä»»ä½•å˜é‡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure></p><h2 id="FAQä¹‹äºŒ"><a href="#FAQä¹‹äºŒ" class="headerlink" title="FAQä¹‹äºŒ"></a>FAQä¹‹äºŒ</h2><h3 id="è·å–pre-stateå’Œpropsçš„ä¸¤ç§æ–¹å¼"><a href="#è·å–pre-stateå’Œpropsçš„ä¸¤ç§æ–¹å¼" class="headerlink" title="è·å–pre stateå’Œpropsçš„ä¸¤ç§æ–¹å¼"></a>è·å–pre stateå’Œpropsçš„ä¸¤ç§æ–¹å¼</h3><h4 id="useState-1"><a href="#useState-1" class="headerlink" title="useState"></a>useState</h4><h4 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h4><h3 id="hooks-ä¸-setStateçš„æ¸²æŸ“çš„æœ€å¤§åŒºåˆ«ä¹‹ä¸€"><a href="#hooks-ä¸-setStateçš„æ¸²æŸ“çš„æœ€å¤§åŒºåˆ«ä¹‹ä¸€" class="headerlink" title="hooks ä¸ setStateçš„æ¸²æŸ“çš„æœ€å¤§åŒºåˆ«ä¹‹ä¸€"></a>hooks ä¸ setStateçš„æ¸²æŸ“çš„æœ€å¤§åŒºåˆ«ä¹‹ä¸€</h3><p>ç›¸åŒçš„å€¼ï¼Œä¸¤æ¬¡åï¼Œå°†ä¸å†æ¸²æŸ“ï¼Œ<a href="https://react.docschina.org/docs/hooks-faq.html#how-do-i-implement-getderivedstatefromprops" target="_blank" rel="noopener">æŸ¥çœ‹å®˜ç½‘â€“æœ‰ç±»ä¼¼ forceUpdate çš„ä¸œè¥¿å—ï¼Ÿ</a></p><h3 id="å¦‚ä½•ç»™çˆ¶ç»„ä»¶æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•æˆ–è‡ªå®šä¹‰æ–¹æ³•"><a href="#å¦‚ä½•ç»™çˆ¶ç»„ä»¶æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•æˆ–è‡ªå®šä¹‰æ–¹æ³•" class="headerlink" title="å¦‚ä½•ç»™çˆ¶ç»„ä»¶æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•æˆ–è‡ªå®šä¹‰æ–¹æ³•"></a>å¦‚ä½•ç»™çˆ¶ç»„ä»¶æš´éœ²å­ç»„ä»¶çš„æ–¹æ³•æˆ–è‡ªå®šä¹‰æ–¹æ³•</h3><p>é€šè¿‡  useImperativeHandle Hook ã€‚</p><h3 id="callback-ref-ä¸-useRef-çš„åŒºåˆ«"><a href="#callback-ref-ä¸-useRef-çš„åŒºåˆ«" class="headerlink" title="callback ref ä¸ useRef çš„åŒºåˆ«"></a>callback ref ä¸ useRef çš„åŒºåˆ«</h3><h4 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h4><p>å‚è€ƒã€Šæˆ‘è¯¥å¦‚ä½•æµ‹é‡ DOM èŠ‚ç‚¹ï¼Ÿã€‹ï¼Œè¦è¯´çš„æ˜¯ï¼š</p><ul><li>callback refå…¶å®å°±æ˜¯classç»„ä»¶ä»¥å‰ä½¿ç”¨çš„ å‡½æ•° refï¼Œå¹¶æ²¡æœ‰åŒºåˆ«ï¼›</li><li>useRef å…¶å®å°±æ˜¯ä»¥å‰classç»„ä»¶å†…çš„ï¼Œç»™refä¼ ä¸€ä¸ªå­—ç¬¦ä¸²ï¼›</li></ul><p>äºŒè€…çš„åŒºåˆ«åœ¨äº å‰è€…å¯å®æ—¶è·å–refç»„ä»¶æœ€æ–°å†…å®¹ï¼Œåè€…ä¸è¡Œã€‚<br>ä¹Ÿå¯ä»¥è¿™æ ·æè¿°ï¼Œcallbackå½¢å¼çš„refè¦æ¯”å­—ç¬¦ä¸²å½¢å¼çš„refæ›´èƒ½æ„ŸçŸ¥domçš„ä¿¡æ¯ï¼Œä¿è¯æ¯æ¬¡ didmountæˆ–didupdateå‰è·å¾—æœ€æ–°çš„domã€‚<a href="https://react.docschina.org/docs/refs-and-the-dom.html#callback-refs" target="_blank" rel="noopener">å‚è€ƒå®˜ç½‘ - å›è°ƒ Refs</a></p><h4 id="å¯ä»¥é…åˆusecallbackä½¿ç”¨"><a href="#å¯ä»¥é…åˆusecallbackä½¿ç”¨" class="headerlink" title="å¯ä»¥é…åˆusecallbackä½¿ç”¨"></a>å¯ä»¥é…åˆusecallbackä½¿ç”¨</h4><p>refå…¶å®è·Ÿclassç‰ˆæœ¬çš„reactä½¿ç”¨ä¸€æ ·ï¼Œå¯ä»¥è®¾å®šä¸€ä¸ªå‡½æ•°ï¼Œåœ¨classç»„ä»¶ä¸­ï¼Œè¿™ä¸ªå‡½æ•°é€šå¸¸æ˜¯ç»„ä»¶å†…éƒ¨å‡½æ•°ï¼Œé€šè¿‡thisæŒ‡å‘ï¼Œå±äºå®ä¾‹èŒƒç•´ï¼Œå› æ­¤å‡çº§åˆ°hooksï¼Œå°±æ˜¯ç”¨usecallbackæ¥åˆ›å»ºä¸€ä¸ªæ’å®šä¸å˜çš„æ–¹æ³•ç±»ä¼¼å®ä¾‹æ–¹æ³•ã€‚<br>å¦‚æœä½ æœ‰å…¶ä»–åˆ›å»ºæ’å®šå‡½æ•°çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨usecallbackã€‚</p><h3 id="ref-ä»£æ›¿åŸæ¥çš„-this"><a href="#ref-ä»£æ›¿åŸæ¥çš„-this" class="headerlink" title="ref ä»£æ›¿åŸæ¥çš„ this"></a>ref ä»£æ›¿åŸæ¥çš„ this</h3><p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œå¤šæ¬¡æåˆ°äº†ï¼Œå¦‚æœè¦ä½¿ç”¨åŸæ¥classç»„ä»¶çš„thisï¼Œå°±ä½¿ç”¨refä»£æ›¿ï¼›</p><h3 id="å‡½æ•°å¼çš„çš„useStateçš„å¦™ç”¨"><a href="#å‡½æ•°å¼çš„çš„useStateçš„å¦™ç”¨" class="headerlink" title="å‡½æ•°å¼çš„çš„useStateçš„å¦™ç”¨"></a>å‡½æ•°å¼çš„çš„useStateçš„å¦™ç”¨</h3><h4 id="ä¸ä¾èµ–å¤–å±‚ï¼Œé€šè¿‡å‚æ•°å°±å¯æ‹¿åˆ°æœ€æ–°çš„state"><a href="#ä¸ä¾èµ–å¤–å±‚ï¼Œé€šè¿‡å‚æ•°å°±å¯æ‹¿åˆ°æœ€æ–°çš„state" class="headerlink" title="ä¸ä¾èµ–å¤–å±‚ï¼Œé€šè¿‡å‚æ•°å°±å¯æ‹¿åˆ°æœ€æ–°çš„state"></a>ä¸ä¾èµ–å¤–å±‚ï¼Œé€šè¿‡å‚æ•°å°±å¯æ‹¿åˆ°æœ€æ–°çš„state</h4><p>å‚è€ƒã€Šå½¢æˆé—­åŒ…æ—¶ï¼Œå¦‚ä½•æ‹¿åˆ°æœ€æ–°çš„stateã€‹</p><h4 id="å‡å°‘è®¡ç®—"><a href="#å‡å°‘è®¡ç®—" class="headerlink" title="å‡å°‘è®¡ç®—"></a>å‡å°‘è®¡ç®—</h4><p><a href="https://react.docschina.org/docs/hooks-faq.html" target="_blank" rel="noopener">å¦‚ä½•æƒ°æ€§åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡ï¼Ÿ</a><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸æ¨è</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Table</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// âš ï¸ createRows() æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¢«è°ƒç”¨</span></span><br><span class="line">  <span class="keyword">const</span> [rows, setRows] = useState(createRows(props.count));</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¨è</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Table</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// âœ… createRows() åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">const</span> [rows, setRows] = useState(<span class="function"><span class="params">()</span> =&gt;</span> createRows(props.count));</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="render-prop-æ˜¯ä¸€ç§å…³é”®æŠ€æœ¯"><a href="#render-prop-æ˜¯ä¸€ç§å…³é”®æŠ€æœ¯" class="headerlink" title="render prop æ˜¯ä¸€ç§å…³é”®æŠ€æœ¯"></a>render prop æ˜¯ä¸€ç§å…³é”®æŠ€æœ¯</h2><p>render prop çš„ä»‹ç»çœ‹<a href="https://react.docschina.org/docs/render-props.html" target="_blank" rel="noopener">å®˜ç½‘</a>ï¼Œæˆ–è€…çœ‹å¦å¤–ä¸€ç¯‡åšå®¢ã€ŠReact ç¬”è®° - å…¶ä»–æŠ€æœ¯ â€“ Render Props ä»£æ›¿ HOC ã€‹ã€‚<br>æ®å®˜ç½‘ä»‹ç»ï¼Œhooksçš„å‡ºç°ä¸ render propçš„è¿ç”¨æœ‰å¾ˆå¤§å…³ç³»<a href="https://react.docschina.org/docs/hooks-faq.html#what-is-the-prior-art-for-hooks" target="_blank" rel="noopener">å‚è€ƒâ€”Hook ä½¿ç”¨äº†å“ªäº›ç°æœ‰æŠ€æœ¯ï¼Ÿ</a>.<br>å› æ­¤åœ¨reactå¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯hooksè¿˜æ˜¯classç»„ä»¶ï¼Œè¦æ³¨é‡è¿™ç§æ€æƒ³çš„è¿ç”¨ã€‚</p><p>æ›´å¤šå‚è€ƒï¼Œå¦å¤–ä¸€ç¯‡ç¬”è®°ã€ŠReact ç¬”è®°  â€“  ç»„åˆæ¨¡å¼ ä¸ Render Propsæ¨¡å¼   â€“   Render Propsæ¨¡å¼ã€‹</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react hooks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ­£åˆ™è¡¨è¾¾å¼</title>
      <link href="/2020/05/01/regex/"/>
      <url>/2020/05/01/regex/</url>
      
        <content type="html"><![CDATA[<p>ç”¨æ­£åˆ™ä¹…çŸ£ï¼Œä¸€ç›´æƒ³å‡ºä¸€ç¯‡è¿™æ–¹é¢çš„ç¬”è®°ï¼Œç”¨æ¥è®°å½•<strong>é‡éš¾ç‚¹</strong>ã€‚<br>åšå®¢é‡åº¦å‚è€ƒæ…•è¯¾æ•™ç¨‹<a href="https://www.imooc.com/coursescore/706" target="_blank" rel="noopener">JavaScriptæ­£åˆ™è¡¨è¾¾å¼</a></p><h3 id="regexper-com"><a href="#regexper-com" class="headerlink" title="regexper.com"></a>regexper.com</h3><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ­£åˆ™ç½‘å€ï¼Œæ­¤ç½‘ä¸ä¼šç”¨ï¼Œå¯èƒ½æ˜¾å¾—ä¸ä¸Šæ¡£æ¬¡ï¼Ÿ<a href="https://regexper.com/" target="_blank" rel="noopener">regexper.com</a>ï¼Œè¿™ä¸ªç½‘å€å¦‚æœå—å¤–ç½‘é™åˆ¶ä¸å¥½è®¿é—®çš„è¯ï¼Œä¹Ÿå¯é€šè¿‡npmå®‰è£…åˆ°æœ¬åœ°è®¿é—®ï¼Œå…·ä½“è°·æ­Œæˆ–çœ‹ä¸Šé¢çš„æ…•è¯¾æ•™ç¨‹ã€‚<br><figure class="image-box">                <img src="/image/regex/com.jpg" alt title class>                <p></p>            </figure></p><h3 id="m-å¤šè¡Œæœç´¢"><a href="#m-å¤šè¡Œæœç´¢" class="headerlink" title="m å¤šè¡Œæœç´¢"></a>m å¤šè¡Œæœç´¢</h3><h4 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h4><p>æ­£åˆ™æœ‰å¦‚ä¸‹ä¿®é¥°ç¬¦<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g:global å…¨æ–‡æœç´¢ ä¸æ·»åŠ åªæœç´¢ç¬¬ä¸€ä¸ªåŒ¹é…å³åœæ­¢</span><br><span class="line">i : ignore case å¿½ç•¥å¤§å°å†™ é»˜è®¤æ˜¯å¤§å°å†™æ•æ„Ÿ</span><br><span class="line">m: multiple lines  å¤šè¡Œæœç´¢</span><br></pre></td></tr></table></figure></p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p>ä½¿ç”¨å¤šè¡Œä¿®é¥°ç¬¦åï¼Œå°±å¯ä»¥åŒ¹é…æ¯ä¸€è¡Œçš„^å¼€å¤´å­—ç¬¦ã€‚<br><figure class="image-box">                <img src="/image/regex/mult.jpg" alt title class>                <p></p>            </figure></p><h3 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h3><h4 id="t-tab"><a href="#t-tab" class="headerlink" title="\t tab"></a>\t tab</h4><p>æ­¤ç¬¦å·ï¼Œåœ¨macä¸‹æŒ‰ä¸‹ä¸€ä¸ªtabé”®ï¼Œä½¿ç”¨ä¸‹é¢è¡¨è¾¾å¼ä¸æˆç«‹ï¼Œåœ¨æœ‰äº›ç”µè„‘ä¸Šåˆå¯ä»¥ï¼Œç›®å‰å°šä¸çŸ¥åŸå› ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/\t/.test(&apos;    &apos;)</span><br></pre></td></tr></table></figure></p><h3 id="å­—ç¬¦ç±»-çš„æ¦‚å¿µ"><a href="#å­—ç¬¦ç±»-çš„æ¦‚å¿µ" class="headerlink" title="å­—ç¬¦ç±» çš„æ¦‚å¿µ"></a>å­—ç¬¦ç±» çš„æ¦‚å¿µ</h3><ul><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…ƒå­—ç¬¦[]æ¥æ„å»ºä¸€ä¸ªç®€å•ç±»ï¼›</li><li>æ‰€è°“ç±»æ˜¯æŒ‡ç¬¦åˆæŸäº›ç‰¹æ€§çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ³›æŒ‡ï¼Œè€Œä¸æ˜¯ç‰¹æŒ‡æŸä¸ªå­—ç¬¦</li><li>è¡¨è¾¾å¼[abc]æŠŠå­—ç¬¦aæˆ–bæˆ–cå½’ä¸ºä¸€ç±»ï¼Œè¡¨è¾¾å¼å¯ä»¥åŒ¹é…è¿™ç±»å­—ç¬¦ã€‚</li></ul><h3 id="å­—ç¬¦ç±»å–å"><a href="#å­—ç¬¦ç±»å–å" class="headerlink" title="å­—ç¬¦ç±»å–å"></a>å­—ç¬¦ç±»å–å</h3><ul><li>ä½¿ç”¨å…ƒå­—ç¬¦^åˆ›å»º åå‘ç±»ï¼è´Ÿå‘ç±»</li><li>åå‘ç±»çš„æ„æ€æ˜¯ä¸å±äºæŸç±»çš„å†…å®¹</li><li>è¡¨è¾¾å¼[^abc]è¡¨ç¤º ä¸æ˜¯å­—ç¬¦aæˆ–bæˆ–cçš„å†…å®¹ï¼›</li></ul><h3 id="ä¸-èŒƒå›´ç±»"><a href="#ä¸-èŒƒå›´ç±»" class="headerlink" title="- ä¸ èŒƒå›´ç±»"></a>- ä¸ èŒƒå›´ç±»</h3><h4 id="å¸¸è§èŒƒå›´ç±»-a-zA-Z"><a href="#å¸¸è§èŒƒå›´ç±»-a-zA-Z" class="headerlink" title="å¸¸è§èŒƒå›´ç±» [a-zA-Z]"></a>å¸¸è§èŒƒå›´ç±» [a-zA-Z]</h4><p>å¦‚ä¸Šï¼Œå®ƒä»¬é€šè¿‡-æ¥æ‹¼æ¥ä¸€ä¸ªèŒƒå›´ç±»ï¼›<br>ä¸‹é¢çš„å½¢å¼é€šå¸¸å¯ä»¥è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ç±»ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦-å­—ç¬¦</span><br></pre></td></tr></table></figure></p><p>å‡å¦‚å‰åå­—ç¬¦ä¸º 0ã€9ï¼Œaã€zï¼›é‚£ä¹ˆå°±è¢«è¯†åˆ«ï¼Œæ„æˆä¸€ä¸ªå¸¸è§çš„èŒƒå›´ç±»ï¼›<br>å› æ­¤å½“-ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦å¯ä»¥è¢«è¯†åˆ«ï¼Œé‚£ä¹ˆæ­¤-å…·æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Œè¡¨ç¤ºèŒƒå›´ç±»çš„æ„æ€ï¼›<br>å¦‚æœä¸æ˜¯ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´ï¼Œ-åŒ¹é…è‡ªèº«-ï¼›</p><h4 id="ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶çš„ç‰¹æ®Šæ„ä¹‰"><a href="#ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶çš„ç‰¹æ®Šæ„ä¹‰" class="headerlink" title="-ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶çš„ç‰¹æ®Šæ„ä¹‰"></a>-ä½äºä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶çš„ç‰¹æ®Šæ„ä¹‰</h4><p>è§ä¸Šé¢çš„è¯´æ˜ã€‚</p><h3 id="é¢„å®šä¹‰ç±»"><a href="#é¢„å®šä¹‰ç±»" class="headerlink" title="é¢„å®šä¹‰ç±»"></a>é¢„å®šä¹‰ç±»</h3><p>æ—¢ç„¶[0-9]è¡¨ç¤ºèŒƒå›´ç±»ï¼Œæ­£åˆ™ä½¿ç”¨é¢„å®šä¹‰ç±»æ¥é¢„å…ˆè§„å®šå¥½é€»è¾‘ç›´æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´ç±»ï¼Œä¸‹é¢æ˜¯å¸¸è§é¢„å®šä¹‰ç±»ï¼š<br><figure class="image-box">                <img src="/image/regex/before.jpg" alt title class>                <p></p>            </figure></p><h3 id="è´ªå©ª-éè´ªå©ªæ¨¡å¼"><a href="#è´ªå©ª-éè´ªå©ªæ¨¡å¼" class="headerlink" title="è´ªå©ª\éè´ªå©ªæ¨¡å¼"></a>è´ªå©ª\éè´ªå©ªæ¨¡å¼</h3><h4 id="è´ªå©ªæ¨¡å¼-é»˜è®¤"><a href="#è´ªå©ªæ¨¡å¼-é»˜è®¤" class="headerlink" title="è´ªå©ªæ¨¡å¼(é»˜è®¤)"></a>è´ªå©ªæ¨¡å¼(é»˜è®¤)</h4><p>å¦‚ä¸‹ï¼Œæ­£åˆ™å¯ä»¥åŒ¹é…3åˆ°6ä¸ªï¼Œé»˜è®¤æƒ…å†µä¸‹æ­£åˆ™åŒ¹é…æœ€å¤§æ•°6ï¼Œæ˜¯ä¸ºè´ªå©ªæ¨¡å¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;12345678&apos;.replace(/\d&#123;3,6&#125;/g,&apos;X&apos;) //X78</span><br></pre></td></tr></table></figure></p><h4 id="é‡è¯ååŠ ï¼Ÿå˜æˆéè´ªå©ªæ¨¡å¼"><a href="#é‡è¯ååŠ ï¼Ÿå˜æˆéè´ªå©ªæ¨¡å¼" class="headerlink" title="é‡è¯ååŠ ï¼Ÿå˜æˆéè´ªå©ªæ¨¡å¼"></a>é‡è¯ååŠ ï¼Ÿå˜æˆéè´ªå©ªæ¨¡å¼</h4><p>éè´ªå©ªæ¨¡å¼æŒ‡å¯ä»¥åŒ¹é…3åˆ°6ä¸ªæ—¶ï¼ŒæŒ‡åŒ¹é…æœ€å°å€¼3ï¼Œ{3,6}æ˜¯é‡è¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;12345678&apos;.replace(/\d&#123;3,6&#125;?/g,&apos;X&apos;) //XX78</span><br></pre></td></tr></table></figure></p><h3 id="åˆ†ç»„ä¸æˆ–"><a href="#åˆ†ç»„ä¸æˆ–" class="headerlink" title="åˆ†ç»„ä¸æˆ–"></a>åˆ†ç»„ä¸æˆ–</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/regex/group2.jpg" alt title class>                <p></p>            </figure><h4 id="å¿½ç•¥åˆ†ç»„"><a href="#å¿½ç•¥åˆ†ç»„" class="headerlink" title="å¿½ç•¥åˆ†ç»„ (?:)"></a>å¿½ç•¥åˆ†ç»„ (?:)</h4><figure class="image-box">                <img src="/image/regex/group3.jpg" alt title class>                <p></p>            </figure><h4 id="æˆ–ä¸åˆ†ç»„"><a href="#æˆ–ä¸åˆ†ç»„" class="headerlink" title="æˆ–ä¸åˆ†ç»„"></a>æˆ–ä¸åˆ†ç»„</h4><figure class="image-box">                <img src="/image/regex/group1.jpg" alt title class>                <p></p>            </figure><h3 id="å‰ç»"><a href="#å‰ç»" class="headerlink" title="å‰ç»"></a>å‰ç»</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/regex/above.jpg" alt title class>                <p></p>            </figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a2*aa'</span>.replace(<span class="regexp">/\w(?=\d)/</span>,<span class="string">'H'</span>)    <span class="comment">//æ­£å‘å‰ç» "H2*aa"å•è¯å­—ç¬¦åé¢æ˜¯æ•°å­—çš„</span></span><br><span class="line"></span><br><span class="line"><span class="string">'dd4sfc'</span>.replace(<span class="regexp">/\w(?!\d)/</span>,<span class="string">'G'</span>);    <span class="comment">//è´Ÿå‘å‰ç» "Gd4sfc"å•è¯å­—ç¬¦åé¢ä¸æ˜¯æ•°å­—çš„ ï¼Œä¸‹é¢ã€Šdemo - å¯†ç ã€‹æœ‰è¿™ä¸ªçš„åº”ç”¨</span></span><br></pre></td></tr></table></figure><h4 id="æ–­è¨€"><a href="#æ–­è¨€" class="headerlink" title="æ–­è¨€"></a>æ–­è¨€</h4><p>å¦‚ä¸Šå›¾ç‰‡é‡Œé¢çš„ assertå°±æ˜¯æ–­è¨€ï¼Œæ–­è¨€æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯è¿ç”¨ä¸ æ­£å‘å‰ç»å’Œåå‘å‰ç»ã€‚</p><h4 id="æ­£å‘ä¸è´Ÿå‘çš„éš¾ç†è§£æ€§"><a href="#æ­£å‘ä¸è´Ÿå‘çš„éš¾ç†è§£æ€§" class="headerlink" title="æ­£å‘ä¸è´Ÿå‘çš„éš¾ç†è§£æ€§"></a>æ­£å‘ä¸è´Ÿå‘çš„éš¾ç†è§£æ€§</h4><p>åˆšå¼€å§‹å¬åˆ°æ­£å‘è´Ÿå‘ä¼šç†è§£æˆå…¶ä»–æ„æ€ï¼Œå…¶å®å°±æ˜¯åé¢åŒ¹é…æ–­è¨€assertä¸åŒ¹é…ç›¸åçš„æ–­è¨€assertï¼›<br>ä¹Ÿå¯ä»¥è¯´æˆæ˜¯åé¢åŒ¹é…æ–­è¨€çš„æ­£å‘è¡¨è¾¾æ„æ€ï¼Œå’ŒåŒ¹é… æ–­è¨€çš„è´Ÿå‘ï¼ˆç›¸åæ–¹å‘ï¼‰çš„è¡¨è¾¾æ„æ€ï¼›</p><h4 id="æ­£å‘å‰ç»"><a href="#æ­£å‘å‰ç»" class="headerlink" title="æ­£å‘å‰ç»?="></a>æ­£å‘å‰ç»?=</h4><p>å‚è€ƒä¸Šé¢æ¦‚è¿°</p><h4 id="è´Ÿå‘å‰ç»"><a href="#è´Ÿå‘å‰ç»" class="headerlink" title="è´Ÿå‘å‰ç»?!"></a>è´Ÿå‘å‰ç»?!</h4><p>å‚è€ƒä¸Šé¢æ¦‚è¿°</p><h3 id="æ­£åˆ™å¼çš„å¯¹è±¡æ€§"><a href="#æ­£åˆ™å¼çš„å¯¹è±¡æ€§" class="headerlink" title="æ­£åˆ™å¼çš„å¯¹è±¡æ€§"></a>æ­£åˆ™å¼çš„å¯¹è±¡æ€§</h3><p>æ¯ä¸€ä¸ªæ­£åˆ™å¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆ new RegExp() ï¼‰,å› æ­¤éƒ½å…·æœ‰å¦‚ä¸‹å±æ€§ã€‚</p><ul><li>globalï¼šæ˜¯å¦å…¨æ–‡æœç´¢ï¼Œé»˜è®¤false</li><li>ignore caseï¼šæ˜¯å¦å¤§å°å†™æ•æ„Ÿï¼Œé»˜è®¤æ˜¯false</li><li>multilineï¼šå¤šè¡Œæœç´¢ï¼Œé»˜è®¤å€¼æ˜¯false</li><li>lastIndexï¼šå½“å‰è¡¨è¾¾å¼åŒ¹é…å†…å®¹çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®</li><li>sourceï¼šæ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬å­—ç¬¦ä¸²<figure class="image-box">                <img src="/image/regex/attr.jpg" alt title class>                <p></p>            </figure></li></ul><h3 id="å­è¡¨è¾¾å¼"><a href="#å­è¡¨è¾¾å¼" class="headerlink" title="å­è¡¨è¾¾å¼"></a>å­è¡¨è¾¾å¼</h3><p>å­è¡¨è¾¾å¼ä¸ºæ­£åˆ™å†…çš„åˆ†ç»„ï¼Œå¦‚ä¸‹æœ‰ä¸¤ä¸ªå­è¡¨è¾¾å¼(\w)ä¸(abc)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var reg4 = /\d(\w)(abc)\d/g;</span><br></pre></td></tr></table></figure></p><h3 id="lastIndexè®©ä½ æ€€ç–‘äººç”Ÿ"><a href="#lastIndexè®©ä½ æ€€ç–‘äººç”Ÿ" class="headerlink" title="lastIndexè®©ä½ æ€€ç–‘äººç”Ÿ"></a>lastIndexè®©ä½ æ€€ç–‘äººç”Ÿ</h3><h4 id="testçš„ç°è±¡"><a href="#testçš„ç°è±¡" class="headerlink" title="testçš„ç°è±¡"></a>testçš„ç°è±¡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ¯æ¬¡æ‰§è¡Œä¸‹é¢ä»£ç éƒ½æ˜¯å¯¹çš„</span><br><span class="line">/\w/g.test(&apos;a&apos;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æ¯æ¬¡æ‰§è¡Œä¸‹é¢ä»£ç éƒ½æ˜¯å¯¹çš„</span><br><span class="line">var reg = /\w/g;</span><br><span class="line">reg.test(&apos;a&apos;) //true</span><br><span class="line">reg.test(&apos;a&apos;) //false</span><br><span class="line">reg.test(&apos;a&apos;) //true</span><br><span class="line">reg.test(&apos;a&apos;) //false</span><br></pre></td></tr></table></figure><h4 id="æ¯æ¬¡teståæ­£åˆ™å¼çš„lastIndexæ”¹å˜"><a href="#æ¯æ¬¡teståæ­£åˆ™å¼çš„lastIndexæ”¹å˜" class="headerlink" title="æ¯æ¬¡teståæ­£åˆ™å¼çš„lastIndexæ”¹å˜"></a>æ¯æ¬¡teståæ­£åˆ™å¼çš„lastIndexæ”¹å˜</h4><p>å¦‚ä¸‹ï¼Œregä¸ä»…æ˜¯æ­£åˆ™å¼ï¼Œè€Œä¸”æ˜¯å¯¹è±¡ï¼Œæ¯æ‰§è¡Œå®Œä¸€æ¬¡testï¼Œéƒ½ä¼šè®©regçš„lastIndexå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œåœ¨ä¸‹æ¬¡åŒ¹é…æ—¶æœ‰æ‰€ä¸åŒï¼Œäº§ç”Ÿäº†ä¸åŒç»“æœã€‚<br>æ¯ä¸€æ¬¡åŒ¹é…æˆåŠŸålastIndexä¼šå¾—åˆ°ä¸€ä¸ªéé›¶å€¼ï¼Œå½“åŒ¹é…å¤±è´¥åï¼ŒlastIndexå€¼å°†ç½®ä¸ºé›¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æ¯æ¬¡æ‰§è¡Œä¸‹é¢ä»£ç éƒ½æ˜¯å¯¹çš„</span><br><span class="line">var reg = /\w/g;  //reg.lastIndex=0</span><br><span class="line">reg.test(&apos;a&apos;) //true //reg.lastIndex=1</span><br><span class="line">reg.test(&apos;a&apos;) //false //reg.lastIndex=1 --&gt; reg.lastIndex=0</span><br><span class="line">reg.test(&apos;a&apos;) //true //reg.lastIndex=1</span><br><span class="line">reg.test(&apos;a&apos;) //false //reg.lastIndex=1 --&gt; reg.lastIndex=0</span><br></pre></td></tr></table></figure></p><h4 id="ç›®å‰åªå‘ç°åœ¨å…¨å±€gçš„æ­£åˆ™å­˜åœ¨æ­¤ç°è±¡"><a href="#ç›®å‰åªå‘ç°åœ¨å…¨å±€gçš„æ­£åˆ™å­˜åœ¨æ­¤ç°è±¡" class="headerlink" title="ç›®å‰åªå‘ç°åœ¨å…¨å±€gçš„æ­£åˆ™å­˜åœ¨æ­¤ç°è±¡"></a>ç›®å‰åªå‘ç°åœ¨å…¨å±€gçš„æ­£åˆ™å­˜åœ¨æ­¤ç°è±¡</h4><p>å¦‚ä¸Šï¼Œç›®å‰åªå­˜åœ¨äºgçš„æ­£åˆ™å¼ï¼Œéå…¨å±€å°šæœªå‘ç°æ­¤ç°è±¡ã€‚å› ä¸ºéå…¨å±€çš„lastIndexå€¼éƒ½æ˜¯0ï¼Œè€Œ0æœ‰ä¸¤æˆæ„æ€ï¼šç¬¬ä¸€ ä»0ä½ç½®å¼€å§‹åŒ¹é…ï¼›ç¬¬äºŒ lastIndexæ— æ•ˆï¼›æ‰€ä»¥åœ¨éå…¨å±€ä¸‹lastIndexå¯èƒ½æ— æ•ˆ(å¾…è€ƒè¯)</p><h4 id="éå…¨å±€ä¸‹lastIndexæ— æ•ˆï¼Ÿ"><a href="#éå…¨å±€ä¸‹lastIndexæ— æ•ˆï¼Ÿ" class="headerlink" title="éå…¨å±€ä¸‹lastIndexæ— æ•ˆï¼Ÿ"></a>éå…¨å±€ä¸‹lastIndexæ— æ•ˆï¼Ÿ</h4><p>å‚è€ƒä¸Šé¢åˆ†æã€‚</p><h4 id="execä¹Ÿæœ‰æ­¤ç°è±¡"><a href="#execä¹Ÿæœ‰æ­¤ç°è±¡" class="headerlink" title="execä¹Ÿæœ‰æ­¤ç°è±¡"></a>execä¹Ÿæœ‰æ­¤ç°è±¡</h4><p>execä¹Ÿæœ‰æ­¤ç°è±¡ï¼Œå…¶ä»–æ–¹æ³•å¯èƒ½è¿˜æœ‰æ­¤ç°è±¡ï¼ŒåŸå› åŒtestæ–¹æ³•ä¸€æ ·åˆ†æï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//æ¯æ¬¡execæ‰§è¡Œçš„ç»“æœä¸ä¸€æ ·</span><br><span class="line">var reg4 = /\d(\w)(\w)\d/g;</span><br><span class="line">var str = &quot;$1az2bb3cy4dd5ee&quot;;</span><br><span class="line">reg4.exec(str) //[&quot;1az2&quot;, &quot;a&quot;, &quot;z&quot;] //index: 1</span><br><span class="line">reg4.exec(str) //[&quot;3cy4&quot;, &quot;c&quot;, &quot;y&quot;] //index: 7</span><br></pre></td></tr></table></figure></p><h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>æ¯æ¬¡åŒ¹é…å‰ï¼Œæ‰‹åŠ¨åœ°æŠŠlastIndexå±æ€§é‡ç½®ä¸º0ã€‚</p><h4 id="lastIndexä¸º0çš„åŒé‡æ„æ€"><a href="#lastIndexä¸º0çš„åŒé‡æ„æ€" class="headerlink" title="lastIndexä¸º0çš„åŒé‡æ„æ€"></a>lastIndexä¸º0çš„åŒé‡æ„æ€</h4><p>å‚è€ƒã€Šç›®å‰åªå‘ç°åœ¨å…¨å±€gçš„æ­£åˆ™å­˜åœ¨æ­¤ç°è±¡ã€‹</p><h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h3><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/regex/exec.jpg" alt title class>                <p></p>            </figure><p>åœ¨éå…¨å±€åŒ¹é…æ¨¡å¼ä¸‹ï¼Œæ­¤å‡½æ•°çš„ä½œç”¨å’Œmatch()å‡½æ•°æ˜¯ä¸€æ ·çš„ï¼Œåªèƒ½å¤Ÿåœ¨å­—ç¬¦ä¸²ä¸­åŒ¹é…ä¸€æ¬¡ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆè¿”å›nullï¼Œå¦åˆ™å°†è¿”å›ä¸€ä¸ªæ•°ç»„ã€‚</p><h4 id="å­è¡¨è¾¾å¼-1"><a href="#å­è¡¨è¾¾å¼-1" class="headerlink" title="å­è¡¨è¾¾å¼"></a>å­è¡¨è¾¾å¼</h4><p>å‚è€ƒã€Šå­è¡¨è¾¾å¼ã€‹</p><h4 id="è¿”å›æ•°ç»„å†…å®¹"><a href="#è¿”å›æ•°ç»„å†…å®¹" class="headerlink" title="è¿”å›æ•°ç»„å†…å®¹"></a>è¿”å›æ•°ç»„å†…å®¹</h4><ul><li>æ•°ç»„çš„ç¬¬0ä¸ªå…ƒç´ å­˜å‚¨çš„æ˜¯åŒ¹é…å­—ç¬¦ä¸²</li><li>ç¬¬1ä¸ªå…ƒç´ å­˜æ”¾çš„æ˜¯ç¬¬ä¸€ä¸ªå¼•ç”¨å‹åˆ†ç»„(å­è¡¨è¾¾å¼)åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œ</li><li>ç¬¬2ä¸ªå…ƒç´ å­˜æ”¾çš„æ˜¯ç¬¬äºŒä¸ªå¼•ç”¨å‹åˆ†ç»„(å­è¡¨è¾¾å¼)åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œä¾æ¬¡ç±»æ¨ã€‚<h4 id="è¿”å›æ•°ç»„å±æ€§"><a href="#è¿”å›æ•°ç»„å±æ€§" class="headerlink" title="è¿”å›æ•°ç»„å±æ€§"></a>è¿”å›æ•°ç»„å±æ€§</h4>è¿”å›æ•°ç»„è¿˜åŒ…æ‹¬ä¸¤ä¸ªå¯¹è±¡å±æ€§ï¼Œ</li><li>indexå±æ€§å£°æ˜çš„æ˜¯åŒ¹é…å­—ç¬¦ä¸²çš„èµ·å§‹å­—ç¬¦åœ¨è¦åŒ¹é…çš„å®Œæ•´å­—ç¬¦ä¸²ä¸­çš„ä½ç½®ï¼Œ</li><li>inputå±æ€§å£°æ˜çš„æ˜¯å¯¹è¦åŒ¹é…çš„å®Œæ•´å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</li></ul><h3 id="match"><a href="#match" class="headerlink" title="match"></a>match</h3><h4 id="æ˜¯å¦å…¨å±€å½±å“å¾ˆå¤§"><a href="#æ˜¯å¦å…¨å±€å½±å“å¾ˆå¤§" class="headerlink" title="æ˜¯å¦å…¨å±€å½±å“å¾ˆå¤§"></a>æ˜¯å¦å…¨å±€å½±å“å¾ˆå¤§</h4><p>matchï¼ˆï¼‰æ–¹æ³•å°†æ£€ç´¢å­—ç¬¦ä¸²ï¼Œä»¥æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä¸regexpåŒ¹é…çš„æ–‡æœ¬<br>regexpæ˜¯å¦å…·æœ‰æ ‡å¿—gå¯¹ç»“æœå½±å“å¾ˆå¤§</p><h4 id="éå…¨å±€æ¨¡å¼"><a href="#éå…¨å±€æ¨¡å¼" class="headerlink" title="éå…¨å±€æ¨¡å¼"></a>éå…¨å±€æ¨¡å¼</h4><p>å¦‚æœregexpæ²¡æœ‰æ ‡å¿—gï¼Œé‚£ä¹ˆmatchï¼ˆï¼‰æ–¹æ³•å°±åªèƒ½åœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡Œä¸€æ¬¡åŒ¹é…ï¼Œæ²¡æ‰¾åˆ°ä»»ä½•åŒ¹é…æ–‡æœ¬å°†è¿”å›nullï¼Œå¦åˆ™å°†è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å­˜æ”¾äº†ä¸å®ƒæ‰¾åˆ°çš„åŒ¹é…æ–‡æœ¬æœ‰å…³çš„ä¿¡æ¯<br>è¿”å›æ•°ç»„å†…å®¹ä¸execçš„ä¸€è‡´ï¼Œè¯·å‚è€ƒã€Šexec â€“ è¿”å›æ•°ç»„å†…å®¹ã€‹ã€Šexec â€“ è¿”å›æ•°ç»„å±æ€§ã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var reg4 = /\d(\w)(\w)\d/;</span><br><span class="line">var str = &quot;$1az2bb3cy4dd5ee&quot;;</span><br><span class="line">str.match(reg3) //[&quot;1az2&quot;, &quot;a&quot;, &quot;z&quot;] //index: 1 input: &quot;$1az2bb3cy4dd5ee&quot;</span><br></pre></td></tr></table></figure></p><h4 id="å…¨å±€æ¨¡å¼"><a href="#å…¨å±€æ¨¡å¼" class="headerlink" title="å…¨å±€æ¨¡å¼"></a>å…¨å±€æ¨¡å¼</h4><p>å¦‚æœregexpå…·æœ‰æ ‡å¿—gåˆ™matchï¼ˆï¼‰æ–¹æ³•å°†æ‰§è¡Œå…¨å±€æ£€ç´¢ï¼Œæ‰¾åˆ°å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰åŒ¹é…å­å­—ç¬¦ä¸²ï¼šæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…çš„å­ç©¿ï¼Œåˆ™è¿”å›nullï¼Œ<br>å¦åˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ä¸­å­˜æ”¾çš„æ˜¯å­—ç¬¦ä¸²ä¸­æ‰€æœ‰åŒ¹é…å­ä¸²ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰indexå±æ€§æˆ–inputå±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var reg4 = /\d(\w)(\w)\d/g;</span><br><span class="line">var str = &quot;$1az2bb3cy4dd5ee&quot;;</span><br><span class="line">str.match(reg3) //[&quot;1az2&quot;, &quot;3cy4&quot;]</span><br></pre></td></tr></table></figure></p><h3 id="matchä¸execå¼‚åŒ"><a href="#matchä¸execå¼‚åŒ" class="headerlink" title="matchä¸execå¼‚åŒ"></a>matchä¸execå¼‚åŒ</h3><h4 id="åœ¨éå…¨å±€ä¸‹-äºŒè€…ç»“æœç›¸åŒ"><a href="#åœ¨éå…¨å±€ä¸‹-äºŒè€…ç»“æœç›¸åŒ" class="headerlink" title="åœ¨éå…¨å±€ä¸‹ äºŒè€…ç»“æœç›¸åŒ"></a>åœ¨éå…¨å±€ä¸‹ äºŒè€…ç»“æœç›¸åŒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var reg4 = /\d(\w)(\w)\d/;</span><br><span class="line">var str = &quot;$1az2bb3cy4dd5ee&quot;;</span><br><span class="line">reg4.exec(str) //[&quot;1az2&quot;, &quot;a&quot;, &quot;z&quot;, index: 1, input: &quot;$1az2bb3cy4dd5ee&quot;, groups: undefined]</span><br><span class="line">str.match(reg4) //[&quot;1az2&quot;, &quot;a&quot;, &quot;z&quot;, index: 1, input: &quot;$1az2bb3cy4dd5ee&quot;, groups: undefined]</span><br></pre></td></tr></table></figure><h4 id="åœ¨å…¨å±€ä¸‹ï¼Œæœ‰å·®åˆ«"><a href="#åœ¨å…¨å±€ä¸‹ï¼Œæœ‰å·®åˆ«" class="headerlink" title="åœ¨å…¨å±€ä¸‹ï¼Œæœ‰å·®åˆ«"></a>åœ¨å…¨å±€ä¸‹ï¼Œæœ‰å·®åˆ«</h4><p>å…¨å±€ä¸‹ï¼Œexecè¿”å›çš„ç»“æœæ ¼å¼ä¸éå…¨å±€ä¸‹ä¸€æ ·ï¼›ä½†matchå´åªè¿”å›åŒ¹é…çš„æ–‡æœ¬ï¼Œä¸å†è¿”å›å­è¡¨è¾¾å¼ä¿¡æ¯ã€‚</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="såŒ¹é…ç©ºç™½è€Œä¸ä»…ä»…ç©ºæ ¼"><a href="#såŒ¹é…ç©ºç™½è€Œä¸ä»…ä»…ç©ºæ ¼" class="headerlink" title="\såŒ¹é…ç©ºç™½è€Œä¸ä»…ä»…ç©ºæ ¼"></a>\såŒ¹é…ç©ºç™½è€Œä¸ä»…ä»…ç©ºæ ¼</h4><p>ä»¥ä¸‹éƒ½æˆç«‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/\s/.test(<span class="string">'\n'</span>)</span><br><span class="line">/\s/.test(<span class="string">'\r'</span>) <span class="comment">//å›è½¦</span></span><br><span class="line">/\s/.test(<span class="string">' '</span>)</span><br><span class="line">/\s/.test(<span class="string">'\xA0'</span>) <span class="comment">//\xA0å°±æ˜¯&amp;nbsp;</span></span><br></pre></td></tr></table></figure></p><h4 id="å¸¸è§å…ƒå­—ç¬¦"><a href="#å¸¸è§å…ƒå­—ç¬¦" class="headerlink" title="å¸¸è§å…ƒå­—ç¬¦"></a>å¸¸è§å…ƒå­—ç¬¦</h4><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">ç‚¹å‡»mdnæŸ¥çœ‹</a></p><h4 id="split-reg"><a href="#split-reg" class="headerlink" title="split(reg)"></a>split(reg)</h4><p>é™¤äº†å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ­£åˆ™æ¥splitã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;1b3c4d&apos;.split(/\d/) //[&quot;&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;]</span><br></pre></td></tr></table></figure></p><h4 id="å¤šä¸ªæ­£åˆ™åˆå¹¶ä½¿ç”¨"><a href="#å¤šä¸ªæ­£åˆ™åˆå¹¶ä½¿ç”¨" class="headerlink" title="å¤šä¸ªæ­£åˆ™åˆå¹¶ä½¿ç”¨"></a>å¤šä¸ªæ­£åˆ™åˆå¹¶ä½¿ç”¨</h4><p>é™åˆ¶åªèƒ½è¾“å…¥3ä½å°æ•°ç‚¹ï¼š<br>è¿™ä¸ªä¾‹å­ä¹Ÿæ˜¯æˆ–|çš„ç»å…¸åº”ç”¨<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*\.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">0</span>,<span class="number">3</span>&#125;$|^[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*$|^<span class="number">0</span>\.?$|^<span class="number">0</span>\.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">0</span>,<span class="number">3</span>&#125;$/;</span><br></pre></td></tr></table></figure></p><p>åˆå¹¶å‰ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/^[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*\.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">0</span>,<span class="number">3</span>&#125;$/.test(str)</span><br><span class="line">/^[<span class="number">1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]*$/.test(str)</span><br><span class="line">/^<span class="number">0</span>\.?$/.test(str)</span><br><span class="line">/^<span class="number">0</span>\.[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">0</span>,<span class="number">3</span>&#125;$/.test(str)</span><br></pre></td></tr></table></figure></p><h4 id="æˆ–çš„ä½¿ç”¨"><a href="#æˆ–çš„ä½¿ç”¨" class="headerlink" title="|æˆ–çš„ä½¿ç”¨"></a>|æˆ–çš„ä½¿ç”¨</h4><p>å‚è€ƒã€Šå¤šä¸ªæ­£åˆ™åˆå¹¶ä½¿ç”¨ã€‹</p><h3 id="demo-1"><a href="#demo-1" class="headerlink" title="demo"></a>demo</h3><h4 id="å¯†ç "><a href="#å¯†ç " class="headerlink" title="å¯†ç "></a>å¯†ç </h4><p>æœ¬ä¾‹æ˜¯?!çš„ç»å…¸åº”ç”¨<br>è¦æ±‚ï¼š 8~32ä½å­—ç¬¦ï¼Œå­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ä»»æ„ä¸‰ç§ç»„æˆï¼Œç‰¹æ®Šå­—ç¬¦ä¸º!@#$%^&amp;*()_+-=<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&amp;*=\-\+\(\)\_]+$)(?![a-zA-z\d]+$)(?![a-zA-z!@#$%^&amp;*=\-\+\(\)\_]+$)(?![\d!@#$%^&amp;*=\-\+\(\)\_]+$)[a-zA-Z\d!@#$%^&amp;*=\-\+\(\)\_]&#123;8,32&#125;$/</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªè¡¨è¾¾å¼å…ˆçœ‹æœ€å³ä¾§<code>[a-zA-Z\d!@#$%^&amp;*=\-\+\(\)\_]{8,32}</code>è¿™æ˜¯ä¸€ä¸ªå…¨åŒ¹é…ï¼Œç„¶ååˆ©ç”¨å‰”é™¤æ³•ï¼Œä¸€ä¸ªä¸ªå‰”é™¤ä»¥ä¸‹æƒ…å†µï¼š</p><ul><li>å…¨æ˜¯å­—æ¯ <code>(?![a-zA-z]+$)</code></li><li>å…¨æ˜¯æ•°å­— <code>(?!\d+$)</code></li><li>å…¨æ˜¯ç‰¹æ®Šå­—ç¬¦ <code>(?![!@#$%^&amp;*=\-\+\(\)\_]+$)</code></li><li>å­—æ¯ä¸æ•°å­— <code>(?![a-zA-z\d]+$)</code><br>ç­‰ç­‰ã€‚<br>å‰”é™¤åˆ°æœ€åï¼Œå°±åªå‰©ä¸‹ä¸€ç§æƒ…å†µï¼Œå­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦ä»»æ„ä¸‰ç§ç»„æˆã€‚<figure class="image-box">                <img src="/image/regex/false.png" alt title class>                <p></p>            </figure><a href="https://www.cnblogs.com/lsyy2017/p/12229940.html" target="_blank" rel="noopener"></a></li></ul><p><strong>æ³¨æ„çš„æ˜¯ï¼Œè¿™å‡ ä¸ªç‰¹æ®Šå­—ç¬¦ä¸­è¿™å‡ ä¸ª<code>()_+-=</code>ï¼Œè¦å¸¦åæ–œæ è½¬ä¹‰</strong>ï¼Œå¦åˆ™å°±ä¼šå‡ºé—®é¢˜ï¼Œæ¯”å¦‚ç‰¹æ®Šå­—ç¬¦ ä¸åŒ…æ‹¬<code>ï¼Œï¼›</code>ç­‰è¿™äº›ï¼Œä¹Ÿä¼šè¢«é”™è¯¯åŒ¹é…</p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener">mdn</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ­£åˆ™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>svgç¬”è®°</title>
      <link href="/2020/05/01/svg/"/>
      <url>/2020/05/01/svg/</url>
      
        <content type="html"><![CDATA[<h2 id="svgçŸ¥è¯†"><a href="#svgçŸ¥è¯†" class="headerlink" title="svgçŸ¥è¯†"></a>svgçŸ¥è¯†</h2><h3 id="å¸¸è§çš„svgæ ‡ç­¾"><a href="#å¸¸è§çš„svgæ ‡ç­¾" class="headerlink" title="å¸¸è§çš„svgæ ‡ç­¾"></a>å¸¸è§çš„svgæ ‡ç­¾</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;600&quot; height=&quot;600&quot; version=&quot;1.1&quot;&gt;</span><br><span class="line">    &lt;defs&gt;</span><br><span class="line">        &lt;marker id=&quot;marker&quot; markerWidth=&quot;10&quot; markerHeight=&quot;10&quot; refX=&quot;4&quot; refY=&quot;4&quot; orient=&quot;auto&quot;&gt;</span><br><span class="line">            &lt;path d=&quot;M 0 0 4 4 0 8&quot; style=&quot;fill:none;stroke:black;&quot;/&gt;</span><br><span class="line">        &lt;/marker&gt;</span><br><span class="line">    &lt;/defs&gt;</span><br><span class="line">    //çŸ©å½¢  --å¯ç”¨äºç”Ÿæˆç›´æ–¹å›¾</span><br><span class="line">    &lt;rect width=&quot;200&quot; height=&quot;100&quot; x=&quot;20&quot; y=&quot;20&quot; style=&quot;fill:red;stroke:blue;stroke-width:4&quot;/&gt;</span><br><span class="line">    &lt;rect width=&quot;200&quot; height=&quot;100&quot; x=&quot;250&quot; y=&quot;20&quot; rx=&quot;20&quot; ry=&quot;20&quot; style=&quot;fill:red;stroke:blue;stroke-width:4&quot;/&gt;</span><br><span class="line">    &lt;circle cx=&quot;100&quot; cy=&quot;280&quot; r=&quot;80&quot; style=&quot;fill:yellow&quot;/&gt;</span><br><span class="line">    //æ¤­åœ†</span><br><span class="line">    &lt;ellipse cx=&quot;330&quot; cy=&quot;280&quot; rx=&quot;100&quot; ry=&quot;80&quot; style=&quot;fill:yellow&quot;/&gt;</span><br><span class="line">    //ç›´çº¿</span><br><span class="line">    &lt;line x1=&quot;0&quot; x2=&quot;360&quot; y1=&quot;0&quot; y2=&quot;360&quot; style=&quot;stroke:#000;stroke-width:4;marker-end:url(#marker);&quot;/&gt;</span><br><span class="line">    //å¤šè¾¹å½¢æ¯”å¦‚ä¸‰è§’å½¢ã€çŸ©å½¢ã€æ¢¯å½¢ã€å¤šè¾¹å½¢ï¼Œä¼šè‡ªåŠ¨é—­åˆ</span><br><span class="line">    &lt;polygon points=&quot;25 10,10 40, 50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot;/&gt;</span><br><span class="line">    //æŠ˜çº¿ ä¹Ÿå¯ä»¥ç”»å¤šè¾¹å½¢ï¼Œ ä¸ä¼šè‡ªåŠ¨é—­åˆ</span><br><span class="line">    &lt;polyline points=&quot;25 10,10 40, 50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot; transform=&quot;translate(100,0)&quot;/&gt;</span><br><span class="line">    &lt;text x=&quot;200&quot; y=&quot;150&quot; style=&quot;fill:purple;font-size:60;&quot; textLength=&quot;300&quot;&gt;</span><br><span class="line">        I love &lt;tspan fill=&quot;green&quot;&gt;D3.js&lt;/tspan&gt;</span><br><span class="line">    &lt;/text&gt;</span><br><span class="line">    //ä¸‡èƒ½pathï¼Œèƒ½ç”»ä»»ä½•çº¿æ¡</span><br><span class="line">    &lt;path d=&quot;M 200 200 A 200 200 0 0 1 400 400&quot; style=&quot;fill:none;stroke:orange;stroke-width:10;&quot; /&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure><h3 id="xmlns-ä¸-version"><a href="#xmlns-ä¸-version" class="headerlink" title="xmlns ä¸ version"></a>xmlns ä¸ version</h3><p>xmlnsæ˜¯å›ºå®šå†™æ³•ï¼Œå›ºå®šå€¼å¦‚ä¸‹ï¼Œversionä¹Ÿæ˜¯å›ºå®šå†™æ³•ï¼Œæœ€è¿‘çš„ç‰ˆæœ¬å°±æ˜¯1.1:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; width=&quot;600&quot; height=&quot;600&quot; version=&quot;1.1&quot;&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></p><h3 id="path"><a href="#path" class="headerlink" title="path"></a>path</h3><h4 id="pathå‘½ä»¤åŸºæœ¬è§„å¾‹ï¼š"><a href="#pathå‘½ä»¤åŸºæœ¬è§„å¾‹ï¼š" class="headerlink" title="pathå‘½ä»¤åŸºæœ¬è§„å¾‹ï¼š"></a>pathå‘½ä»¤åŸºæœ¬è§„å¾‹ï¼š</h4><p>1.åŒºåˆ†å¤§å°å†™ï¼šå¤§å†™è¡¨ç¤ºåæ ‡å‚æ•°ä¸ºç»å¯¹ä½ç½®ï¼Œå°å†™ä¸ºç›¸å¯¹ä½ç½®<br>2.æœ€åçš„å‚æ•°è¡¨ç¤ºæœ€ç»ˆè¦åˆ°è¾¾çš„ä½ç½®<br>3.ä¸Šä¸€ä¸ªå‘½ä»¤ç»“æŸçš„ä½ç½®å°±æ˜¯ä¸‹ä¸€ä¸ªå‘½ä»¤å¼€å§‹çš„ä½ç½®<br>4.å‘½ä»¤å¯ä»¥é‡å¤å‚æ•°è¡¨ç¤ºé‡å¤æ‰§è¡ŒåŒä¸€æ¡å‘½ä»¤</p><h4 id="å°å†™-ç›¸å¯¹åæ ‡-ä¸-å¤§å†™-ç»å¯¹åæ ‡"><a href="#å°å†™-ç›¸å¯¹åæ ‡-ä¸-å¤§å†™-ç»å¯¹åæ ‡" class="headerlink" title="å°å†™ ç›¸å¯¹åæ ‡ ä¸ å¤§å†™ ç»å¯¹åæ ‡"></a>å°å†™ ç›¸å¯¹åæ ‡ ä¸ å¤§å†™ ç»å¯¹åæ ‡</h4><p>ä¸Šé¢ä»‹ç»çš„éƒ½æ˜¯ç”¨ç»å¯¹åæ ‡ï¼Œå…¶å®ä¸€èˆ¬ç”»å›¾éƒ½ä½¿ç”¨ç›¸å¯¹åæ ‡å°å†™çš„ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æ•ˆæœè·Ÿä¸Šé¢çš„ ã€ŠpathæŒ‡ä»¤ M ã€Vã€ Hã€Zã€L --- demo2ã€‹æ˜¯ä¸€æ ·çš„ï¼Œä½†å¢åŠ äº†çµæ´»æ€§ï¼Œ</span><br><span class="line">//å½“éšæ„æ”¹å˜èµ·å§‹ç‚¹åæ ‡æ˜¯ï¼Œå›¾å½¢ä¸è¢«ç ´åï¼Œè¿™æ˜¯ç»å¯¹åæ ‡åšä¸åˆ°çš„ã€‚</span><br><span class="line">&lt;path stroke=&apos;orange&apos; stroke-width=&apos;.8&apos; fill=&apos;orange&apos; d=&apos;M 20 70 h 30 v -10 l 10 20 l -10 20 v -10 h -30 z&apos; /&gt;</span><br></pre></td></tr></table></figure></p><h4 id="é€—å·æœ‰æ²¡æœ‰ä¸å½±å“"><a href="#é€—å·æœ‰æ²¡æœ‰ä¸å½±å“" class="headerlink" title="é€—å·æœ‰æ²¡æœ‰ä¸å½±å“"></a>é€—å·æœ‰æ²¡æœ‰ä¸å½±å“</h4><p>æ¯”å¦‚ä¸‹é¢ä¸¤ä¸ªä»£ç ï¼Œä¸€ä¸ªæœ‰é€—å·ï¼Œä¸€ä¸ªæ²¡æœ‰ï¼Œå¯¹äºç”µè„‘è€Œè¨€éƒ½èƒ½æ­£å¸¸è¯†åˆ«ï¼ŒåŠ é€—å·åªæ˜¯ä¸ºäº†äººèƒ½å¤Ÿè¯†åˆ«ç†è§£<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;polygon points=&quot;25 10,10 40, 50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot;/&gt;</span><br><span class="line">&lt;polygon points=&quot;25  10 10 40  50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot;/&gt;</span><br></pre></td></tr></table></figure></p><h4 id="path-æŒ‡ä»¤"><a href="#path-æŒ‡ä»¤" class="headerlink" title="path æŒ‡ä»¤"></a>path æŒ‡ä»¤</h4><p>è¿™é‡Œåªåˆ—ä¸¾éƒ¨åˆ†ï¼Œ<a href="https://www.bbsmax.com/A/A7zgmMwW54/" target="_blank" rel="noopener">æ›´å¤šå‚è€ƒ</a>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">æŒ‡ä»¤ å‚æ•° è¯´æ˜</span><br><span class="line">Mx yå°†ç”»ç¬”ç§»åŠ¨åˆ°ç‚¹(x,y)</span><br><span class="line">Lx yç”»ç¬”ä»å½“å‰çš„ç‚¹ç»˜åˆ¶çº¿æ®µåˆ°ç‚¹(x,y)</span><br><span class="line">Hxç”»ç¬”ä»å½“å‰çš„ç‚¹ç»˜åˆ¶æ°´å¹³çº¿æ®µåˆ°ç‚¹(x,y0)</span><br><span class="line">Vy ç”»ç¬”ä»å½“å‰çš„ç‚¹ç»˜åˆ¶ç«–ç›´çº¿æ®µåˆ°ç‚¹(x0,y)</span><br><span class="line">Arx ry x-axis-rotation large-arc-flag sweep-flag x yç”»ç¬”ä»å½“å‰çš„ç‚¹ç»˜åˆ¶ä¸€æ®µåœ†å¼§åˆ°ç‚¹(x,y)</span><br><span class="line">Cx1 y1, x2 y2, x yç”»ç¬”ä»å½“å‰çš„ç‚¹ç»˜åˆ¶ä¸€æ®µä¸‰æ¬¡è´å¡å°”æ›²çº¿åˆ°ç‚¹(x,y)</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path d=&quot;M 200 200 A 200 200 0 0 1 400 400&quot; style=&quot;fill:none;stroke:orange;stroke-width:10;&quot; /&gt;</span><br></pre></td></tr></table></figure><h4 id="pathçš„è´å¡å°”æ›²çº¿"><a href="#pathçš„è´å¡å°”æ›²çº¿" class="headerlink" title="pathçš„è´å¡å°”æ›²çº¿"></a>pathçš„è´å¡å°”æ›²çº¿</h4><p>pså·¥å…·ä¸­çš„é’¢ç¬”å·¥å…·å°±æ˜¯ä¸€ä¸ªè´å¡å°”æ›²çº¿ï¼Œè´å¡å°”æ›²çº¿ç”±å‡ ä¸ªç‚¹ç»„æˆï¼Œ<a href="https://www.bilibili.com/video/av13105102/?spm_id_from=333.788.videocard.3" target="_blank" rel="noopener">å…·ä½“å‚è€ƒè¿™ä¸ªè§†é¢‘çš„æœ«å°¾æ®µçš„ä»‹ç»</a></p><h4 id="pathæŒ‡ä»¤-M-ã€Vã€-Hã€Zã€L"><a href="#pathæŒ‡ä»¤-M-ã€Vã€-Hã€Zã€L" class="headerlink" title="pathæŒ‡ä»¤ M ã€Vã€ Hã€Zã€L"></a>pathæŒ‡ä»¤ M ã€Vã€ Hã€Zã€L</h4><h5 id="æŒ‡ä»¤ä»‹ç»"><a href="#æŒ‡ä»¤ä»‹ç»" class="headerlink" title="æŒ‡ä»¤ä»‹ç»"></a>æŒ‡ä»¤ä»‹ç»</h5><ul><li>M åæ ‡ç‚¹</li><li>V å‚ç›´</li><li>H æ°´å¹³</li><li>Z é—­åˆ</li><li>L è¿çº¿åˆ°åæ ‡ç‚¹<h5 id="demo-1"><a href="#demo-1" class="headerlink" title="demo 1"></a>demo 1</h5>å¦‚ä¸‹ï¼ŒviewBoxä»£è¡¨ä»åŸç‚¹ 0 0 å¼€å§‹ï¼Œåƒxã€yè½´å„å»¶ä¼¸100ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg viewBox=&apos;0 0 100 100&apos; style=&apos;border:green solid&apos;&gt;</span><br><span class="line">//d=&apos;M 10 0 V 100&apos; ä»åæ ‡x 10 ã€ y 0å¼€å§‹ï¼Œå‚ç›´æ–¹å‘å»¶ä¼¸y 100ï¼›</span><br><span class="line">&lt;path stroke=&apos;green&apos; stroke-width=&apos;.2&apos; d=&apos;M 10 0 V 100&apos;/&gt;</span><br><span class="line">//d=&apos;M 0 10 H 100&apos; ä»åæ ‡x 0 ã€ y 10å¼€å§‹ï¼Œæ°´å¹³æ–¹å‘å»¶ä¼¸x 100ï¼›</span><br><span class="line">&lt;path stroke=&apos;green&apos; stroke-width=&apos;.2&apos; d=&apos;M 20 0 H 100&apos;/&gt;</span><br><span class="line">&lt;/svg&gt;</span><br></pre></td></tr></table></figure></li></ul><h5 id="demo2"><a href="#demo2" class="headerlink" title="demo2"></a>demo2</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//åœ¨åæ ‡ç‚¹20 10 å¼€å§‹ï¼Œæ°´å¹³ç§»åˆ° x50ï¼Œå†å‚ç›´ç§»åˆ°y0ï¼Œç„¶åè¿çº¿åˆ°åæ ‡ç‚¹60 20ï¼Œå†è¿çº¿åˆ°åæ ‡ç‚¹ 50 40ï¼Œç„¶åå‚ç›´ç§»åŠ¨åˆ°y30</span><br><span class="line">//ç„¶åæ°´å¹³ç§»åˆ°x20ï¼Œç„¶åè¿æ¥åˆ°èµ·å§‹ç‚¹é—­åˆã€‚</span><br><span class="line">&lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;blue&apos; d=&apos;M 20 10 H 50 V 0 L 60 20 L 50 40 V 30 H 20 Z&apos; /&gt;</span><br></pre></td></tr></table></figure><p>æ•ˆæœï¼š<br><figure class="image-box">                <img src="/image/d3/all/svg1.jpg" alt title class>                <p></p>            </figure></p><h3 id="polygon-ä¸-polyline"><a href="#polygon-ä¸-polyline" class="headerlink" title="polygon ä¸ polyline"></a>polygon ä¸ polyline</h3><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å¤šè¾¹å½¢æ¯”å¦‚ä¸‰è§’å½¢ã€çŸ©å½¢ã€æ¢¯å½¢ã€å¤šè¾¹å½¢ï¼Œä¼šè‡ªåŠ¨é—­åˆ</span><br><span class="line">//åæ ‡ 25 10ï¼Œ åæ ‡ç‚¹10ï¼Œ40ï¼Œ åæ ‡ç‚¹ 50ï¼Œ27 å½¢æˆä¸‰è§’å½¢</span><br><span class="line"> &lt;polygon points=&quot;25 10,10 40, 50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot;/&gt;</span><br><span class="line"> //æŠ˜çº¿ ä¹Ÿå¯ä»¥ç”»å¤šè¾¹å½¢ï¼Œ ä¸ä¼šè‡ªåŠ¨é—­åˆ</span><br><span class="line"> &lt;polyline points=&quot;25 10,10 40, 50 27&quot; style=&quot;fill:green;stroke:orange;stroke-width:4&quot; transform=&quot;translate(100,0)&quot;/&gt;</span><br></pre></td></tr></table></figure><h4 id="polygon-ç”»å¤šè¾¹å½¢"><a href="#polygon-ç”»å¤šè¾¹å½¢" class="headerlink" title="polygon ç”»å¤šè¾¹å½¢"></a>polygon ç”»å¤šè¾¹å½¢</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="polyline-ç”»æŠ˜çº¿"><a href="#polyline-ç”»æŠ˜çº¿" class="headerlink" title="polyline ç”»æŠ˜çº¿"></a>polyline ç”»æŠ˜çº¿</h4><p>å‚è€ƒä¸Šé¢ä»£ç </p><h4 id="äºŒè€…åŒºåˆ«"><a href="#äºŒè€…åŒºåˆ«" class="headerlink" title="äºŒè€…åŒºåˆ«"></a>äºŒè€…åŒºåˆ«</h4><p>polygon ä¼šè‡ªåŠ¨é—­åˆï¼Œç”»å¤šè¾¹å½¢æ¯”è¾ƒæ–¹ä¾¿ï¼Œpolylineä¸ä¼šè‡ªåŠ¨é—­åˆï¼Œå¯ä»¥ç”»å¤šè¾¹å½¢ï¼Œå½“ä¸æ–¹ä¾¿ï¼Œæ›´å¤šç”¨äºç”»æŠ˜çº¿ã€‚</p><h3 id="æŒ‡ä»¤Q-quadratic-äºŒæ¬¡æ›²çº¿"><a href="#æŒ‡ä»¤Q-quadratic-äºŒæ¬¡æ›²çº¿" class="headerlink" title="æŒ‡ä»¤Q - quadratic äºŒæ¬¡æ›²çº¿"></a>æŒ‡ä»¤Q - quadratic äºŒæ¬¡æ›²çº¿</h3><h4 id="QæŒ‡ä»¤"><a href="#QæŒ‡ä»¤" class="headerlink" title="QæŒ‡ä»¤"></a>QæŒ‡ä»¤</h4><p>å¦‚ä¸‹ Q åé¢è·Ÿä¸¤ä¸ªåæ ‡ç‚¹ï¼Œç¬¬ä¸€ä¸ªç‚¹ä¸ºæ›²çº¿æœ€é«˜æˆ–æœ€ä½ç‚¹ï¼Œç¬¬äºŒä¸ªç‚¹ä¸ºæ›²çº¿ç»ˆç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;red&apos; stroke-width=&apos;.8&apos; fill=&apos;none&apos; d=&apos;M 20 30 Q 25 0, 50 30 &apos; /&gt;</span><br></pre></td></tr></table></figure></p><h4 id="Qç¬¬ä¸€ä¸ªç‚¹yè½´å®é™…ä½ç½®ä¸º-è‡ªèº«y-èµ·å§‹ç‚¹y-2"><a href="#Qç¬¬ä¸€ä¸ªç‚¹yè½´å®é™…ä½ç½®ä¸º-è‡ªèº«y-èµ·å§‹ç‚¹y-2" class="headerlink" title="Qç¬¬ä¸€ä¸ªç‚¹yè½´å®é™…ä½ç½®ä¸º (è‡ªèº«y+èµ·å§‹ç‚¹y)/2"></a>Qç¬¬ä¸€ä¸ªç‚¹yè½´å®é™…ä½ç½®ä¸º (è‡ªèº«y+èµ·å§‹ç‚¹y)/2</h4><p>æ¯”å¦‚ä¸Šé¢ä»£ç <code>d=&#39;M 20 30 Q 25 0, 50 30 &#39;</code> qçš„ç¬¬ä¸€ä¸ªç‚¹ä¸º 25 0ï¼Œè‡ªèº«çš„yå€¼ä¸º0ï¼Œèµ·å§‹ç‚¹Mçš„yå€¼ä¸º30ï¼Œé‚£ä¹ˆå®é™…ä½ç½®ä¸º15.<br>ä¸éœ€çŸ¥é“ä¸ºä»€ä¹ˆï¼ŒçŸ¥é“æ˜¯è¿™ä¸ªè§„å¾‹å°±è¡Œã€‚</p><h4 id="Q-çš„é•œåƒæŒ‡ä»¤-TæŒ‡ä»¤"><a href="#Q-çš„é•œåƒæŒ‡ä»¤-TæŒ‡ä»¤" class="headerlink" title="Q çš„é•œåƒæŒ‡ä»¤ TæŒ‡ä»¤"></a>Q çš„é•œåƒæŒ‡ä»¤ TæŒ‡ä»¤</h4><p>Tè·Ÿç€çš„åæ ‡ç‚¹ä¸ºç»ˆç‚¹ã€‚ç»ˆç‚¹æ°å½“ä¸å¦ï¼Œå†³å®šé•œåƒæ˜¯å¦æ›´åƒã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;red&apos; stroke-width=&apos;.8&apos; fill=&apos;none&apos; d=&apos;M 20 50 Q 25 10, 50 50 T80 50&apos; /&gt;</span><br></pre></td></tr></table></figure></p><p><a href>å‚è€ƒdemo</a></p><h3 id="æŒ‡ä»¤C-curve-æ›²çº¿"><a href="#æŒ‡ä»¤C-curve-æ›²çº¿" class="headerlink" title="æŒ‡ä»¤C - curve æ›²çº¿"></a>æŒ‡ä»¤C - curve æ›²çº¿</h3><h4 id="CæŒ‡ä»¤"><a href="#CæŒ‡ä»¤" class="headerlink" title="CæŒ‡ä»¤"></a>CæŒ‡ä»¤</h4><p>å¦‚ä¸‹ C åé¢è·Ÿä¸‰ä¸ªåæ ‡ç‚¹ï¼Œç¬¬ä¸€å’Œç¬¬äºŒä¸ªç‚¹ç”¨æ¥æ§åˆ¶æ›²çº¿çš„å¼§åº¦ï¼Œç¬¬ä¸‰ä¸ªç‚¹ä¸ºç»ˆç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;none&apos; d=&apos;M 20 50 C 40 40, 60 40, 80 50&apos; /&gt;</span><br></pre></td></tr></table></figure></p><h4 id="CæŒ‡ä»¤-ä¸-QæŒ‡ä»¤å…³ç³»"><a href="#CæŒ‡ä»¤-ä¸-QæŒ‡ä»¤å…³ç³»" class="headerlink" title="CæŒ‡ä»¤ ä¸ QæŒ‡ä»¤å…³ç³»"></a>CæŒ‡ä»¤ ä¸ QæŒ‡ä»¤å…³ç³»</h4><p>äºŒè€…éƒ½ç”¨æ¥ç”»æ›²çº¿ï¼Œèƒ½è¾¾åˆ°ä¸€æ ·æ•ˆæœï¼Œä¸è¿‡ï¼Œcåé¢è·Ÿç€ä¸‰ä¸ªç‚¹ï¼Œæ‰€ä»¥ç›¸æ¯”Qï¼ˆä¸¤ä¸ªç‚¹ï¼‰ï¼Œæ›´èƒ½ç²¾ç¡®æ§åˆ¶æ›²çº¿å¼§åº¦ã€‚</p><h4 id="C-çš„é•œåƒæŒ‡ä»¤-SæŒ‡ä»¤"><a href="#C-çš„é•œåƒæŒ‡ä»¤-SæŒ‡ä»¤" class="headerlink" title="C çš„é•œåƒæŒ‡ä»¤ SæŒ‡ä»¤"></a>C çš„é•œåƒæŒ‡ä»¤ SæŒ‡ä»¤</h4><p>ç›¸æ¯”Qçš„é•œåƒTæŒ‡ä»¤ï¼ŒCæ—¶åªèƒ½ç”¨Sè¿›è¡Œé•œåƒï¼ŒSçš„æœ€åä¸€ä¸ªç‚¹ä¸ºç»ˆç‚¹ï¼Œä¹‹å‰çš„ç‚¹ç”¨æ¥è°ƒèŠ‚é•œåƒå¼§åº¦ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;yellow&apos; stroke-width=&apos;.8&apos; fill=&apos;none&apos; d=&apos;M 20 50 C 30 40, 40 40, 50 50 S 70 60 80 50&apos; /&gt;</span><br></pre></td></tr></table></figure></p><p><a href>å‚è€ƒdemo</a></p><h3 id="æŒ‡ä»¤A-Arc-åœ†å¼§"><a href="#æŒ‡ä»¤A-Arc-åœ†å¼§" class="headerlink" title="æŒ‡ä»¤A - Arc åœ†å¼§"></a>æŒ‡ä»¤A - Arc åœ†å¼§</h3><h4 id="AæŒ‡ä»¤"><a href="#AæŒ‡ä»¤" class="headerlink" title="AæŒ‡ä»¤"></a>AæŒ‡ä»¤</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;gray&apos; d=&apos;M 30 50 A 1 1, 0 , 0 0, 70 50&apos; /&gt;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Š C åé¢è·Ÿ7ä¸ªå‚æ•°ã€‚</p><ul><li>æœ€åä¸¤ä¸ªå‚æ•°ï¼š70 50ä¸ºç»ˆç‚¹</li><li>ç¬¬ä¸€ã€äºŒä¸ªå‚æ•°ï¼š<br>æƒ…å†µä¸€ï¼šæ¯”å¦‚æœ¬ä¾‹ï¼š 1 1 ï¼Œä¸ºåœ†å¼§çš„xã€yè½´æ¯”ä¾‹ï¼ŒM30 50 ä¸ç»ˆç‚¹70 50ï¼Œå·²ç»ç¡®å®šäº†åœ†åŠå¾„ï¼Œæ­¤æ—¶åœ†å¼§xyæ¯”ä¾‹ä¸ä¸€æ ·ï¼Œå°±å½¢æˆå¯¹åº”æ¯”ä¾‹çš„åœ†æˆ–æ¤­åœ†ã€‚<br>æƒ…å†µäºŒï¼šå½“å€¼å¤§äºåœ†å¼§åŠå¾„æ—¶ï¼Œæ­¤å‚æ•°å°±ä¸æ˜¯æ¯”ä¾‹äº†ï¼Œå°±æ˜¯åœ†å¼§çš„åœ†å¿ƒï¼Œæ­¤ç§æƒ…å†µå°±æœ‰äº›å¤æ‚äº†ã€‚</li><li><p>ç¬¬äº”ä¸ªå‚æ•°ï¼š 0 ï¼Œåé¢çš„0ä»£è¡¨ç”»ä¸‹åŠåœ†ï¼Œå¦‚æœæ˜¯1å°±æ˜¯ç”»ä¸ŠåŠåœ†,å¦‚ä¸‹ä¸Šä¸‹ä¸¤å¥å„ç”»åŠä¸ªåœ†ï¼Œä¸€èµ·æ‹¼èµ·æ¥å°±æ˜¯ä¸€ä¸ªåœ†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;gray&apos; d=&apos;M 30 50 A 1 1, 0 , 0 0, 70 50&apos; /&gt;</span><br><span class="line">  &lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;purple&apos; d=&apos;M 30 50 A 1 1, 0 , 0 1, 70 50&apos; /&gt;</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š 0 æ˜¯åœ†å¼§çš„æ—‹è½¬è§’åº¦ï¼Œç±»ä¼¼transformçš„scalï¼Œå½“å¤§äº45æ—¶ï¼Œåœ†å¼§çš„xã€yè½´å€¼å°†é¢ å€’ã€‚</p></li><li>ç¬¬å››ä¸ªå‚æ•°ï¼š å½“ä¸º0æ—¶ï¼Œæ˜¾ç¤ºåœ†å¼§ï¼Œå½“ä¸º1æ—¶ï¼Œæ˜¾ç¤ºåœ†å¼§å‰©ä½™éƒ¨åˆ†ã€‚ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;blue&apos; stroke-width=&apos;.8&apos; fill=&apos;purple&apos; d=&apos;M 30 50 A 50 50, 0 , 1 1, 70 50&apos; /&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="CæŒ‡ä»¤-ä¸-QæŒ‡ä»¤å…³ç³»-1"><a href="#CæŒ‡ä»¤-ä¸-QæŒ‡ä»¤å…³ç³»-1" class="headerlink" title="CæŒ‡ä»¤ ä¸ QæŒ‡ä»¤å…³ç³»"></a>CæŒ‡ä»¤ ä¸ QæŒ‡ä»¤å…³ç³»</h4><p>äºŒè€…éƒ½ç”¨æ¥ç”»æ›²çº¿ï¼Œèƒ½è¾¾åˆ°ä¸€æ ·æ•ˆæœï¼Œä¸è¿‡ï¼Œcåé¢è·Ÿç€ä¸‰ä¸ªç‚¹ï¼Œæ‰€ä»¥ç›¸æ¯”Qï¼ˆä¸¤ä¸ªç‚¹ï¼‰ï¼Œæ›´èƒ½ç²¾ç¡®æ§åˆ¶æ›²çº¿å¼§åº¦ã€‚</p><h4 id="C-çš„é•œåƒæŒ‡ä»¤-SæŒ‡ä»¤-1"><a href="#C-çš„é•œåƒæŒ‡ä»¤-SæŒ‡ä»¤-1" class="headerlink" title="C çš„é•œåƒæŒ‡ä»¤ SæŒ‡ä»¤"></a>C çš„é•œåƒæŒ‡ä»¤ SæŒ‡ä»¤</h4><p>ç›¸æ¯”Qçš„é•œåƒTæŒ‡ä»¤ï¼ŒCæ—¶åªèƒ½ç”¨Sè¿›è¡Œé•œåƒï¼ŒSçš„æœ€åä¸€ä¸ªç‚¹ä¸ºç»ˆç‚¹ï¼Œä¹‹å‰çš„ç‚¹ç”¨æ¥è°ƒèŠ‚é•œåƒå¼§åº¦ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;path stroke=&apos;yellow&apos; stroke-width=&apos;.8&apos; fill=&apos;none&apos; d=&apos;M 20 50 C 30 40, 40 40, 50 50 S 70 60 80 50&apos; /&gt;</span><br></pre></td></tr></table></figure></p><h3 id="text"><a href="#text" class="headerlink" title="text"></a>text</h3><h4 id="dx-ä¸-dy"><a href="#dx-ä¸-dy" class="headerlink" title="dx ä¸ dy"></a>dx ä¸ dy</h4><p>dxä¸dy è¡¨ç¤ºçš„æ˜¯ç›¸å¯¹äºå‰ä¸€ä¸ªå­—ç¬¦çš„é•¿åº¦ï¼Œ<a href="https://www.w3cplus.com/svg/how-to-manipulate-svg-text.html" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="g-ä¸-åæ ‡ç³»"><a href="#g-ä¸-åæ ‡ç³»" class="headerlink" title="g ä¸ åæ ‡ç³»"></a>g ä¸ åæ ‡ç³»</h3><h4 id="å…ƒç´ çš„xæ˜¯ç›¸å¯¹äºçˆ¶å±‚çš„gï¼Œè€ŒéåŸå§‹åæ ‡"><a href="#å…ƒç´ çš„xæ˜¯ç›¸å¯¹äºçˆ¶å±‚çš„gï¼Œè€ŒéåŸå§‹åæ ‡" class="headerlink" title="å…ƒç´ çš„xæ˜¯ç›¸å¯¹äºçˆ¶å±‚çš„gï¼Œè€ŒéåŸå§‹åæ ‡"></a>å…ƒç´ çš„xæ˜¯ç›¸å¯¹äºçˆ¶å±‚çš„gï¼Œè€ŒéåŸå§‹åæ ‡</h4><p>å¦‚ä¸‹rectçš„åæ ‡ 0 0 ï¼Œç›¸å¯¹çš„æ˜¯gå½¢æˆçš„åæ ‡ç³»ï¼Œè€ŒéåŸå§‹åæ ‡ï¼Œ<br><a href="https://github.com/YeWills/d3-note-demo/blob/d3-demo/pages/d3-jt-book/chapter6/6.8/6-8-1-lineChart.html" target="_blank" rel="noopener">è¯¦ç»†demo</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node.append(&quot;g&quot;)</span><br><span class="line">    .append(&quot;rect&quot;)</span><br><span class="line">    .attr(&quot;x&quot;,0)</span><br><span class="line">    .attr(&quot;y&quot;,0)</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒdemo"><a href="#å‚è€ƒdemo" class="headerlink" title="å‚è€ƒdemo"></a>å‚è€ƒdemo</h3><p><a href="https://github.com/YeWills/d3-note-demo/tree/d3-demo/pages/mars" target="_blank" rel="noopener">å‚è€ƒdemo -é‡Œé¢çš„å‡ ä¸ªsvg html</a></p><h2 id="svgè¿›é˜¶çŸ¥è¯†"><a href="#svgè¿›é˜¶çŸ¥è¯†" class="headerlink" title="svgè¿›é˜¶çŸ¥è¯†"></a>svgè¿›é˜¶çŸ¥è¯†</h2><h3 id="viewport-viewbox-preserveAspectRatio"><a href="#viewport-viewbox-preserveAspectRatio" class="headerlink" title="viewport viewbox preserveAspectRatio"></a>viewport viewbox preserveAspectRatio</h3><h4 id="ä¸‰è€…å…³ç³»"><a href="#ä¸‰è€…å…³ç³»" class="headerlink" title="ä¸‰è€…å…³ç³»"></a>ä¸‰è€…å…³ç³»</h4><p>å…¶å®ä¸‰è€…å…³ç³»å¾ˆå¥½ç†è§£ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä¸è¿‡ç½‘ä¸Šæœ‰å¾ˆå¤šåšå®¢æˆ–æ•™ç¨‹å°†æ­¤å¤æ‚åŒ–äº†ï¼Œå¦‚ä¸‹å›¾ï¼š<br>åœ¨åæ ‡ç³»ä¸Šç”»äº†ä¸€ä¸ªçŸ©å½¢ï¼Œç°åœ¨åªæƒ³æ˜¾ç¤ºé˜´å½±éƒ¨åˆ†ï¼Œå– viewbox 100 100 20 20ï¼›<br>ç°åœ¨è®¾ç½®svgçš„viewport ä¸º200 200ï¼›<br>åœ¨æ˜¾ç¤ºæ—¶ï¼Œ<br>svgçš„æœºåˆ¶ï¼Œä¼šè®©viewboxè‡ªåŠ¨ç¼©å°æˆ–æ”¾å¤§ä»¥å¡«å……æ•´ä¸ªviewportï¼›<br>æ”¾å¤§åï¼Œviewportæ˜¾ç¤ºäº†åˆšæ‰viewboxçš„å†…å®¹ã€‚<br><a href="http://127.0.0.1:3000/multy/SVG/Lesson2/viewbox.html" target="_blank" rel="noopener">demoå‚è€ƒ</a><br><figure class="image-box">                <img src="/image/svg/viewbox.jpg" alt title class>                <p></p>            </figure></p><h4 id="viewboxä¼šç¼©å°æˆ–è€…æ‰©å¤§å¡«æ»¡viewport"><a href="#viewboxä¼šç¼©å°æˆ–è€…æ‰©å¤§å¡«æ»¡viewport" class="headerlink" title="viewboxä¼šç¼©å°æˆ–è€…æ‰©å¤§å¡«æ»¡viewport"></a>viewboxä¼šç¼©å°æˆ–è€…æ‰©å¤§å¡«æ»¡viewport</h4><p>å‚è€ƒä¸Šé¢ã€‚</p><h4 id="preserveAspectRatio"><a href="#preserveAspectRatio" class="headerlink" title="preserveAspectRatio"></a>preserveAspectRatio</h4><p>å¯ç½‘ä¸ŠæŸ¥è¯¢ï¼Œæœºåˆ¶è·Ÿcss çš„background çš„å›¾ç‰‡å¡«å……ä¸€æ ·ã€‚</p><h3 id="defs"><a href="#defs" class="headerlink" title="defs"></a>defs</h3><p><a href="https://blog.csdn.net/chy555chy/article/details/53364561" target="_blank" rel="noopener">å‚è€ƒè¿™é‡Œ</a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.bilibili.com/video/av13492121/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener">è§†é¢‘æ•™ç¨‹æœ‰7ä¸ªï¼Œåœ¨è¿™ä¸ªç½‘ç«™ä¸Šæ˜¯èƒ½æ‰¾åˆ°è¿™ä¸ƒä¸ªè§†é¢‘çš„</a></p>]]></content>
      
      
      <categories>
          
          <category> å›¾å½¢åŒ– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> svg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ä»¥å¤–ç¬”è®°</title>
      <link href="/2020/05/01/tool/"/>
      <url>/2020/05/01/tool/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡ç¬”è®°ç”¨æ¥è®°å½•å‰ç«¯çŸ¥è¯†ä»¥å¤–çš„ç¬”è®°ï¼Œæˆ–è€…ä¸€æ—¶æ— æ³•åˆ†ç±»çš„ç¬”è®°</p><h2 id="githubç›´æ¥æµè§ˆdemoæ•ˆæœ"><a href="#githubç›´æ¥æµè§ˆdemoæ•ˆæœ" class="headerlink" title="githubç›´æ¥æµè§ˆdemoæ•ˆæœ"></a>githubç›´æ¥æµè§ˆdemoæ•ˆæœ</h2><p>åœ¨ç½‘ä¸Šä»‹ç»äº†å¾ˆå¤šå…³äºgithubç›´æ¥æµè§ˆdemoçš„æ•ˆæœï¼Œä¸è¿‡æœ‰å¾ˆå¤šæ–¹æ³•ç¡®å®ä¸å¤ªå¥½ï¼Œæ··æ·†è§†å¬ï¼Œæ¯”å¦‚previewçš„é‚£ç§æ–¹å¼ï¼Œå°±ä¸å€¼å¾—æ¨èã€‚<br>æ¨èçš„åšæ³•æ˜¯ä½¿ç”¨GitHub pagesæ–¹æ³•ã€‚</p><h3 id="GitHub-pagesæ–¹å¼-æ¨è"><a href="#GitHub-pagesæ–¹å¼-æ¨è" class="headerlink" title="GitHub pagesæ–¹å¼(æ¨è)"></a>GitHub pagesæ–¹å¼(æ¨è)</h3><p>ç½‘ä¸ŠæŸ¥æ‰¾ä¸‹ï¼Œå¾ˆå¤šæ•™ç¨‹ã€‚</p><h3 id="master-åˆ†æ”¯"><a href="#master-åˆ†æ”¯" class="headerlink" title="master åˆ†æ”¯"></a>master åˆ†æ”¯</h3><p>è¿™ç§æ–¹å¼ï¼Œå®ƒåªé’ˆå¯¹ä»“åº“çš„masteråˆ†æ”¯ï¼Œå› æ­¤è¯·å°†è¦æ˜¾ç¤ºçš„htmlæ”¾ç½®åœ¨masteråˆ†æ”¯ä¸Šã€‚</p><h3 id="æ ¹è·¯å¾„-æ–‡ä»¶åœ°å€å¯ä»¥æ˜¾ç¤ºä»»ä½•html"><a href="#æ ¹è·¯å¾„-æ–‡ä»¶åœ°å€å¯ä»¥æ˜¾ç¤ºä»»ä½•html" class="headerlink" title="æ ¹è·¯å¾„+æ–‡ä»¶åœ°å€å¯ä»¥æ˜¾ç¤ºä»»ä½•html"></a>æ ¹è·¯å¾„+æ–‡ä»¶åœ°å€å¯ä»¥æ˜¾ç¤ºä»»ä½•html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//æ ¹è·¯å¾„ï¼š</span><br><span class="line">https://yewills.github.io/d3-note-demo/</span><br><span class="line"></span><br><span class="line">æ–‡ä»¶è·¯å¾„ï¼š</span><br><span class="line">/pages/sar-chart/</span><br><span class="line"></span><br><span class="line">å®é™…åœ°å€ä¸ºï¼š</span><br><span class="line">https://yewills.github.io/d3-note-demo/pages/sar-chart/</span><br></pre></td></tr></table></figure><h3 id="srcå¼•ç”¨æ–‡ä»¶çš„netWorkè°ƒè¯•"><a href="#srcå¼•ç”¨æ–‡ä»¶çš„netWorkè°ƒè¯•" class="headerlink" title="srcå¼•ç”¨æ–‡ä»¶çš„netWorkè°ƒè¯•"></a>srcå¼•ç”¨æ–‡ä»¶çš„netWorkè°ƒè¯•</h3><p>æ–‡ä»¶ä½¿ç”¨github.ioæ—¶ï¼Œä¸€èˆ¬ä¸ä¼šæœ‰srcå¼•ç”¨é—®é¢˜ï¼ŒåŸæ¥çš„é¡¹ç›®å¼•ç”¨åœ°å€ï¼Œå°±æ˜¯ä»€ä¹ˆåœ°å€ï¼Œå¦‚æœäº§ç”Ÿé—®é¢˜ï¼Œå¯ä»¥æ‰“å¼€è°ƒè¯•ï¼Œé‡æ–°å†™ä¸Šå¯è®¿é—®åœ°å€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ä»¥å¤– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ä»¥å¤– </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>typescript ç¬”è®°</title>
      <link href="/2020/05/01/ts/"/>
      <url>/2020/05/01/ts/</url>
      
        <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>æœ¬æ–‡æ˜¯ä¸»è¦å‚è€ƒ <a href="https://ts.xcatliu.com/" target="_blank" rel="noopener">TypeScript å…¥é—¨æ•™ç¨‹</a>ï¼Œè®°å¾—å¾ˆéšæ„ï¼Œæ–­æ–­ç»­ç»­ï¼Œä¸å®Œæ•´ï¼Œå¯èƒ½åæœŸæ­¤ç¯‡ç¬”è®°ä¼šåˆ é™¤ï¼ŒèŠå½“æš‚æ—¶æ€§è‡ªç”¨ã€‚</p><h2 id="æŠŠç©tsçš„æ­£ç¡®å§¿åŠ¿"><a href="#æŠŠç©tsçš„æ­£ç¡®å§¿åŠ¿" class="headerlink" title="æŠŠç©tsçš„æ­£ç¡®å§¿åŠ¿"></a>æŠŠç©tsçš„æ­£ç¡®å§¿åŠ¿</h2><p>ä»»æ„ç›®å½•ä¸‹ï¼Œä½¿ç”¨tscå‘½ä»¤æ¥ï¼Œå¾ˆçº¯ç²¹ï¼Œå‰”é™¤å…¶ä»–å› ç´ å¯¼è‡´çš„ç†è§£åå·®ï¼Œä¸éœ€è¦é…åˆwebpackç­‰ç­‰ï¼Œæ›´å¤šå‚è€ƒï¼šã€Štscå‘½ä»¤çš„ä½¿ç”¨ã€‹</p><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><h3 id="å¯ä»¥æè¿°çš„ç±»å‹"><a href="#å¯ä»¥æè¿°çš„ç±»å‹" class="headerlink" title="å¯ä»¥æè¿°çš„ç±»å‹"></a>å¯ä»¥æè¿°çš„ç±»å‹</h3><h4 id="å®šä¹‰å¯¹è±¡"><a href="#å®šä¹‰å¯¹è±¡" class="headerlink" title="å®šä¹‰å¯¹è±¡"></a>å®šä¹‰å¯¹è±¡</h4><h5 id="æœ‰å¾ˆå¤šä¸ªå±æ€§æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªä»»æ„å±æ€§"><a href="#æœ‰å¾ˆå¤šä¸ªå±æ€§æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªä»»æ„å±æ€§" class="headerlink" title="æœ‰å¾ˆå¤šä¸ªå±æ€§æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªä»»æ„å±æ€§"></a>æœ‰å¾ˆå¤šä¸ªå±æ€§æ—¶ï¼Œå®šä¹‰ä¸€ä¸ªä»»æ„å±æ€§</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age?: number;</span><br><span class="line">    [propName: string]: any;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test:Person=&#123;</span><br><span class="line">    name:<span class="string">'qianqian'</span>,</span><br><span class="line">    age:<span class="number">18</span>,</span><br><span class="line">    intrest:<span class="string">'dance'</span>,</span><br><span class="line">    beatiful:<span class="string">'yes'</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰classç±»ï¼ˆimplementsï¼‰"><a href="#å®šä¹‰classç±»ï¼ˆimplementsï¼‰" class="headerlink" title="å®šä¹‰classç±»ï¼ˆimplementsï¼‰"></a>å®šä¹‰classç±»ï¼ˆimplementsï¼‰</h4><p>ç”¨äºç»™ç±»å®šä¹‰å±æ€§çš„ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Alarm &#123;</span><br><span class="line">    alert(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> <span class="title">implements</span> <span class="title">Alarm</span> </span>&#123;</span><br><span class="line">    alert() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'Car alert'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å®šä¹‰å‡½æ•°ï¼ˆèŒƒå‹æ¥å£ã€æ™®é€šæ¥å£ï¼‰"><a href="#å®šä¹‰å‡½æ•°ï¼ˆèŒƒå‹æ¥å£ã€æ™®é€šæ¥å£ï¼‰" class="headerlink" title="å®šä¹‰å‡½æ•°ï¼ˆèŒƒå‹æ¥å£ã€æ™®é€šæ¥å£ï¼‰"></a>å®šä¹‰å‡½æ•°ï¼ˆèŒƒå‹æ¥å£ã€æ™®é€šæ¥å£ï¼‰</h4><p>å‚è€ƒã€ŠèŒƒå‹ã€‹</p><h4 id="çº¦æŸèŒƒå‹ç±»å‹"><a href="#çº¦æŸèŒƒå‹ç±»å‹" class="headerlink" title="çº¦æŸèŒƒå‹ç±»å‹"></a>çº¦æŸèŒƒå‹ç±»å‹</h4><p>å‚è€ƒã€ŠèŒƒå‹ã€‹</p><h3 id="æ¥å£å®šä¹‰æ–¹å¼"><a href="#æ¥å£å®šä¹‰æ–¹å¼" class="headerlink" title="æ¥å£å®šä¹‰æ–¹å¼"></a>æ¥å£å®šä¹‰æ–¹å¼</h3><h4 id="å¸¸è§„æ¥å£å®šä¹‰"><a href="#å¸¸è§„æ¥å£å®šä¹‰" class="headerlink" title="å¸¸è§„æ¥å£å®šä¹‰"></a>å¸¸è§„æ¥å£å®šä¹‰</h4><p>è¿™é‡Œå°±ä¸å†™äº†ï¼Œæ¯”è¾ƒç®€å•ã€‚</p><h4 id="ç”¨ç±»ä¿®é¥°æ¥å£ï¼ˆæ¥å£å¯ä»¥ç»§æ‰¿ç±»ï¼‰"><a href="#ç”¨ç±»ä¿®é¥°æ¥å£ï¼ˆæ¥å£å¯ä»¥ç»§æ‰¿ç±»ï¼‰" class="headerlink" title="ç”¨ç±»ä¿®é¥°æ¥å£ï¼ˆæ¥å£å¯ä»¥ç»§æ‰¿ç±»ï¼‰"></a>ç”¨ç±»ä¿®é¥°æ¥å£ï¼ˆæ¥å£å¯ä»¥ç»§æ‰¿ç±»ï¼‰</h4><p>å¸¸è§çš„é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£æ˜¯ä¸èƒ½ç»§æ‰¿ç±»çš„ï¼Œä½†æ˜¯åœ¨ TypeScript ä¸­å´æ˜¯å¯ä»¥çš„ï¼š<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">    x: number;</span><br><span class="line">    y: number;</span><br><span class="line">    <span class="keyword">constructor</span>(x: number, y: number) &#123;</span><br><span class="line">        <span class="keyword">this</span>.x = x;</span><br><span class="line">        <span class="keyword">this</span>.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Pointçœ‹æˆå®ä¾‹å°±å¾ˆå¥½ç†è§£äº†</span></span><br><span class="line">interface Point3d extends Point &#123;</span><br><span class="line">    z: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> point3d: Point3d = &#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">z</span>: <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶"><a href="#ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶" class="headerlink" title="ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶"></a>ç”¨æ¥å£å®šä¹‰å‡½æ•°çš„å½¢çŠ¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface SearchFunc &#123;</span><br><span class="line">    (source: string, <span class="attr">subString</span>: string): boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySearch: SearchFunc;</span><br><span class="line">mySearch = <span class="function"><span class="keyword">function</span>(<span class="params">source: string, subString: string</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> source.search(subString) !== <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸æ­¤ç›¸å¯¹åº”ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySum: <span class="function">(<span class="params">x: number, y: number</span>) =&gt;</span> number = <span class="function"><span class="keyword">function</span> (<span class="params">x: number, y: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="classç±»ä½œä¸ºç±»å‹"><a href="#classç±»ä½œä¸ºç±»å‹" class="headerlink" title="classç±»ä½œä¸ºç±»å‹"></a>classç±»ä½œä¸ºç±»å‹</h2><p><a href="https://ts.xcatliu.com/basics/type-assertion.html" target="_blank" rel="noopener">å‚è€ƒ - å°†ä¸€ä¸ªçˆ¶ç±»æ–­è¨€ä¸ºæ›´åŠ å…·ä½“çš„å­ç±»</a></p><h3 id="ç›´æ¥ç”¨ç±»ä½œä¸ºç±»å‹"><a href="#ç›´æ¥ç”¨ç±»ä½œä¸ºç±»å‹" class="headerlink" title="ç›´æ¥ç”¨ç±»ä½œä¸ºç±»å‹"></a>ç›´æ¥ç”¨ç±»ä½œä¸ºç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ApiError</span> <span class="keyword">extends</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line">    code: number = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpError</span> <span class="keyword">extends</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line">    statusCode: number = <span class="number">200</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isApiError</span>(<span class="params">error: Error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (error <span class="keyword">instanceof</span> ApiError) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="èŒƒå‹"><a href="#èŒƒå‹" class="headerlink" title="èŒƒå‹"></a>èŒƒå‹</h2><p>å‚è€ƒ <a href="https://www.imooc.com/video/21306" target="_blank" rel="noopener">æ…•è¯¾è§†é¢‘</a></p><h3 id="èŒƒå‹ç±»å‹"><a href="#èŒƒå‹ç±»å‹" class="headerlink" title="èŒƒå‹ç±»å‹"></a>èŒƒå‹ç±»å‹</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;T&gt;(arg1:T,arg2:T)=&gt;T è¿™ä¸ªè¡¨è¾¾å¼ç§°ä¹‹ä¸º æ•°æ®ç±»å‹ï¼èŒƒå‹ç±»å‹ï¼èŒƒå‹å‡½æ•°</span></span><br></pre></td></tr></table></figure><h4 id="èŒƒå‹ç±»å‹æ˜¯å¹²å˜›çš„"><a href="#èŒƒå‹ç±»å‹æ˜¯å¹²å˜›çš„" class="headerlink" title="èŒƒå‹ç±»å‹æ˜¯å¹²å˜›çš„"></a>èŒƒå‹ç±»å‹æ˜¯å¹²å˜›çš„</h4><p>æˆ‘ä»¬çŸ¥é“å£°æ˜å˜é‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ç±»å‹ï¼Œæ™®é€šçš„ç±»å‹å¦‚ number stringç­‰ï¼›<br>è¿˜æœ‰é«˜çº§ç‚¹çš„ç±»å‹ï¼Œå¦‚èŒƒå‹ç±»å‹ï¼›<br>å› æ­¤èŒƒå‹ç±»å‹ä¸ numberä¸€æ ·ï¼Œéƒ½æ˜¯ç”¨äºå®šä¹‰å˜é‡çš„ç±»å‹ã€‚</p><p>ä»¥ä¸‹ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥å®šä¹‰ä¸€ä¸ªèŒƒå‹ç±»å‹<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;T&gt;(arg1:T,arg2:T)=&gt;T è¿™ä¸ªè¡¨è¾¾å¼ç§°ä¹‹ä¸º æ•°æ®ç±»å‹ï¼èŒƒå‹ç±»å‹ï¼èŒƒå‹å‡½æ•°</span></span><br><span class="line"><span class="comment">// let addFunc : &lt;T&gt;(arg1:T,arg2:T)=&gt;T; //ä¸ä½¿ç”¨èŠ±æ‹¬å·</span></span><br><span class="line"><span class="comment">// let addFunc : &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125;; //ä½¿ç”¨èŠ±æ‹¬å·ï¼Œå°†=&gt;æ”¹ä¸ºå†’å·:</span></span><br></pre></td></tr></table></figure></p><h4 id="ä¸ä½¿ç”¨èŠ±æ‹¬å·"><a href="#ä¸ä½¿ç”¨èŠ±æ‹¬å·" class="headerlink" title="ä¸ä½¿ç”¨èŠ±æ‹¬å·"></a>ä¸ä½¿ç”¨èŠ±æ‹¬å·</h4><p>å¦‚ä¸Š</p><h4 id="ä½¿ç”¨èŠ±æ‹¬å·"><a href="#ä½¿ç”¨èŠ±æ‹¬å·" class="headerlink" title="ä½¿ç”¨èŠ±æ‹¬å·"></a>ä½¿ç”¨èŠ±æ‹¬å·</h4><p>å¦‚ä¸Šï¼Œå®ƒçš„ç‰¹å¾æ˜¯ï¼Œå°†=&gt;æ”¹ä¸ºå†’å·:ã€‚</p><h4 id="èŒƒå‹ç±»å‹ä¸numberç­‰ä¸€æ ·"><a href="#èŒƒå‹ç±»å‹ä¸numberç­‰ä¸€æ ·" class="headerlink" title="èŒƒå‹ç±»å‹ä¸numberç­‰ä¸€æ ·"></a>èŒƒå‹ç±»å‹ä¸numberç­‰ä¸€æ ·</h4><p>èŒƒå‹ç±»å‹ä¸numberç­‰ä¸€æ ·ï¼ŒåŒå±äºå˜é‡ç±»å‹ï¼Œå‚è€ƒä¸Šé¢è®²è§£ï¼Œè¿™é‡Œå•ç‹¬æå‡ºæ¥æ˜¯è®©å¯¹èŒƒå‹ç±»å‹æœ‰ä¸€ä¸ªæ›´åŠ ç›´è§‚è®¤è¯†ï¼›</p><h3 id="èŒƒå‹æ¥å£"><a href="#èŒƒå‹æ¥å£" class="headerlink" title="èŒƒå‹æ¥å£"></a>èŒƒå‹æ¥å£</h3><h4 id="ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹æ¥å£"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹æ¥å£" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹æ¥å£"></a>ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹æ¥å£</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> addFunc : &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œç»™å˜é‡å®šä¹‰ç±»å‹ï¼Œå¤ªä¸ä¼˜é›…äº†ï¼Œæ˜¯å¦å¯ä»¥å°†èŒƒå‹ç±»å‹èµ‹ç»™ä¸€ä¸ªå˜é‡å‘¢:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ftype = &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125; <span class="comment">//è¯­æ³•æŠ¥é”™</span></span><br><span class="line"><span class="comment">//const ftype = &lt;T&gt;(arg1:T,arg2:T)=&gt;T //è¯­æ³•æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> addFunc : ftype;</span><br></pre></td></tr></table></figure></p><p>å™¢ï¼Œç»ˆäºçŸ¥é“æ— æ³•å°†èŒƒå‹ç±»å‹èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå› ä¸ºèŒƒå‹ç±»å‹åªèƒ½é€šè¿‡æ¥å£æ¥å®šä¹‰ï¼Œ<br>è¿™ç§å®šä¹‰èŒƒå‹ç±»å‹çš„æ¥å£ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º èŒƒå‹æ¥å£æˆ–å«èŒƒå‹çš„æ™®é€šæ¥å£ã€‚</p><p>æˆ‘ä»¬å°†ä¸Šé¢çš„èŒƒå‹ç±»å‹èµ‹å€¼ç»™æ¥å£GenAdderï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> GenAdder &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125;;</span><br><span class="line"><span class="keyword">let</span> addFunc : GenAdder;</span><br></pre></td></tr></table></figure></p><h4 id="å«èŒƒå‹çš„æ™®é€šæ¥å£"><a href="#å«èŒƒå‹çš„æ™®é€šæ¥å£" class="headerlink" title="å«èŒƒå‹çš„æ™®é€šæ¥å£"></a>å«èŒƒå‹çš„æ™®é€šæ¥å£</h4><p>è¿™æ˜¯æ™®é€šæ¥å£ï¼Œè™½ç„¶æ¥å£å†…æœ‰èŒƒå‹Tï¼Œä½†ï¼Œæ¥å£ååæœªç´§éš<code>&lt;T&gt;</code>;<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> GenAdder &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125;;</span><br></pre></td></tr></table></figure></p><h4 id="è½¬åŒ–ä¸ºèŒƒå‹æ¥å£"><a href="#è½¬åŒ–ä¸ºèŒƒå‹æ¥å£" class="headerlink" title="è½¬åŒ–ä¸ºèŒƒå‹æ¥å£"></a>è½¬åŒ–ä¸ºèŒƒå‹æ¥å£</h4><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä¸Šé¢æ™®é€šæ¥å£çš„Tä»èŠ±æ‹¬å·åï¼Œæå–å‡ºæ¥ï¼Œæ”¾åœ¨GenAdderåï¼ŒGenAdderå³è½¬åŒ–ä¸ºèŒƒå‹æ¥å£ï¼›<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> GenAdder&lt;T&gt; &#123;(arg1:T,arg2:T):T&#125;;</span><br></pre></td></tr></table></figure></p><h4 id="å«èŒƒå‹çš„æ™®é€šæ¥å£çš„ä½¿ç”¨"><a href="#å«èŒƒå‹çš„æ™®é€šæ¥å£çš„ä½¿ç”¨" class="headerlink" title="å«èŒƒå‹çš„æ™®é€šæ¥å£çš„ä½¿ç”¨"></a>å«èŒƒå‹çš„æ™®é€šæ¥å£çš„ä½¿ç”¨</h4><p>äºŒè€…åœ¨tsä¸­åº”ç”¨çš„åŒºåˆ«ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šæ¥å£</span></span><br><span class="line"><span class="keyword">interface</span> GenAdder &#123;&lt;T&gt;(arg1:T,arg2:T):T&#125;;</span><br><span class="line"><span class="keyword">let</span> addFunc : GenAdder;</span><br><span class="line">addFunc = <span class="function"><span class="keyword">function</span> (<span class="params">arg1, arg2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1+arg2;<span class="comment">//tsæŠ¥é”™ï¼Œå½“å‚æ•°ä¸ºnumberæˆ–stringæ—¶ï¼Œæˆç«‹ï¼Œå½“å‚æ•°ä¸ºundefinedã€nullæ—¶å€™ä¸æˆç«‹ï¼›</span></span><br><span class="line">&#125;;</span><br><span class="line">addFunc(<span class="string">''</span>,<span class="string">''</span>)</span><br></pre></td></tr></table></figure></p><h4 id="èŒƒå‹æ¥å£çš„ä½¿ç”¨"><a href="#èŒƒå‹æ¥å£çš„ä½¿ç”¨" class="headerlink" title="èŒƒå‹æ¥å£çš„ä½¿ç”¨"></a>èŒƒå‹æ¥å£çš„ä½¿ç”¨</h4><p>ä¸ºäº†è§£å†³ä¸Šé¢çš„tsæŠ¥é”™ï¼Œå¿…é¡»å°†æ™®é€šæ¥å£è½¬åŒ–ä¸ºèŒƒå‹æ¥å£ï¼Œå› ä¸ºèŒƒå‹æ¥å£åœ¨å£°æ˜ç±»å‹æ—¶ï¼Œä¼šé¢„è®¾ä¸Šç±»å‹ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> GenAdder&lt;T&gt; &#123;(arg1:T,arg2:T):T&#125;;</span><br><span class="line"><span class="comment">//é¢„è®¾ä¸Šç±»å‹ä¸ºnumber</span></span><br><span class="line"><span class="keyword">let</span> addFunc : GenAdder&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line">addFunc = <span class="function"><span class="keyword">function</span> (<span class="params">arg1, arg2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1+arg2;</span><br><span class="line">&#125;;</span><br><span class="line">addFunc(<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><h4 id="èŒƒå‹æ¥å£çš„ä½¿ç”¨è¯´æ˜"><a href="#èŒƒå‹æ¥å£çš„ä½¿ç”¨è¯´æ˜" class="headerlink" title="èŒƒå‹æ¥å£çš„ä½¿ç”¨è¯´æ˜"></a>èŒƒå‹æ¥å£çš„ä½¿ç”¨è¯´æ˜</h4><p><strong>èŒƒå‹æ¥å£ä½¿ç”¨æ—¶ï¼Œå¿…é¡»åœ¨æ¥å£åå®šä¹‰å¥½<code>&lt;ç±»å‹&gt;</code></strong>ï¼Œ<br>æˆ‘ä»¬ä¹Ÿå¯ä»æ¥å£å®šä¹‰çš„å¤–è§‚æ¥ç†è§£ï¼š<br>å®šä¹‰æ¥å£æ—¶ï¼Œè‹¥æ¥å£åç´§æŒ¨ç€ä¸€ä¸ª<code>&lt;T&gt;</code>ï¼Œåˆ™ä½¿ç”¨æ­¤æ¥å£æ—¶ï¼Œå¿…é¡»æ˜¯ <code>æ¥å£å&lt;T&gt;</code>ï¼›<br>è‹¥æ¥å£åæ˜¯å¹²å¹²å‡€å‡€çš„ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–ä¸œè¥¿ï¼Œåˆ™ä½¿ç”¨æ­¤æ¥å£æ—¶ï¼Œåº”è¯¥ä¸ºå•çº¯çš„ <code>æ¥å£å</code><br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">interface</span> GenAdder&lt;T&gt; &#123;(arg1:T,arg2:T):T&#125;;</span><br><span class="line"><span class="comment">//ä½¿ç”¨èŒƒå‹æ¥å£æ—¶ï¼Œéœ€å®šä¹‰å¥½Tç±»å‹</span></span><br><span class="line"> <span class="keyword">let</span> addFunc : GenAdder&lt;<span class="built_in">number</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> nomalGenAdder&#123; name:<span class="built_in">string</span>;&#125;;</span><br><span class="line"><span class="comment">//ä½¿ç”¨æ™®é€šæ¥å£æ—¶ï¼Œä¸éœ€å®šä¹‰å¥½Tç±»å‹ï¼Œå› ä¸ºæ²¡æœ‰T</span></span><br><span class="line"> <span class="keyword">let</span> addObj : nomalGenAdder;</span><br></pre></td></tr></table></figure></p><h3 id="èŒƒå‹ç±»"><a href="#èŒƒå‹ç±»" class="headerlink" title="èŒƒå‹ç±»"></a>èŒƒå‹ç±»</h3><h4 id="åŒ…å«èŒƒå‹ç±»å‹çš„æ™®é€šç±»"><a href="#åŒ…å«èŒƒå‹ç±»å‹çš„æ™®é€šç±»" class="headerlink" title="åŒ…å«èŒƒå‹ç±»å‹çš„æ™®é€šç±»"></a>åŒ…å«èŒƒå‹ç±»å‹çš„æ™®é€šç±»</h4><p>å¦‚ä¸‹Adderæ˜¯ä¸ªæ™®é€šç±»ï¼Œå› ä¸ºå®ƒçš„å±æ€§addä½¿ç”¨äº†èŒƒå‹ç±»ï¼Œå®ƒè¿˜æ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œåªæ˜¯å†…éƒ¨åŒ…å«äº†èŒƒå‹ç±»å‹å®šä¹‰ã€‚<br>è¿™æ ·çš„å†™æ³•åœ¨æŸäº›æƒ…å†µä¸‹å†™èµ·æ¥æ¯”è¾ƒè´¹åŠ²ï¼Œä¹Ÿæœ‰äº›æƒ…å†µéœ€è¦é¿å…ä¸€äº›æŠ¥é”™ï¼Œç­‰ç­‰ï¼Œäºæ˜¯å°±æƒ³å°†æ™®é€šç±»æ”¹é€ æˆèŒƒå‹ç±»ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Adder&#123;</span><br><span class="line">    add:&lt;T&gt;<span class="function">(<span class="params">arg1:T, arg2:T</span>)=&gt;</span>T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> adder = <span class="keyword">new</span> Adder();</span><br><span class="line">adder.add = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1, arg2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1+arg2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åŸåˆ™ä¸Šéœ€è¦å®šä¹‰&lt;number&gt;</span></span><br><span class="line">adder.add&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">adder.add&lt;<span class="built_in">string</span>&gt;(<span class="string">''</span>,<span class="string">''</span>)</span><br><span class="line"><span class="comment">// ä¸å®šä¹‰&lt;number&gt;ä¹Ÿå¯ä»¥ï¼Œtsé»˜è®¤ç»™å®šä¹‰</span></span><br><span class="line">adder.add(<span class="string">''</span>,<span class="string">''</span>)</span><br></pre></td></tr></table></figure></p><h4 id="èŒƒå‹ç±»-1"><a href="#èŒƒå‹ç±»-1" class="headerlink" title="èŒƒå‹ç±»"></a>èŒƒå‹ç±»</h4><p>æ”¹é€ ä¸Šé¢çš„ä»£ç ï¼Œç»è¿‡æ”¹é€ åå¦‚ä¸‹ï¼ŒAdderå°±æ˜¯ä¸€ä¸ªèŒƒå‹ç±»äº†ã€‚<br>å°†æ™®é€šç±»æ”¹æˆèŒƒå‹ç±»çš„å¥½å¤„æ˜¯ï¼Œå†™èµ·æ¥å¯èƒ½ä¼šä¼˜é›…ç‚¹ï¼Œç„¶åå¯ä»¥å¤„ç†ä¸€äº›æ™®é€šç±»ä¼šé‡åˆ°çš„tsæŠ¥é”™ã€‚<br>å¦å¤–ä¸€æ–¹é¢ï¼Œä»ä¸‹é¢æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œä¸€æ—¦å®šä¹‰æˆèŒƒå‹ç±»ï¼Œé‚£ä¹ˆè°ƒç”¨ç±»æ—¶ï¼Œå°±éœ€è¦é©¬ä¸ŠæŒ‡å®šå¥½ç±»å‹ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†èŒƒå‹æå–å‡ºæ¥æŒ¨ç€Adder</span></span><br><span class="line"><span class="keyword">class</span> Adder&lt;T&gt;&#123;</span><br><span class="line">    add:<span class="function">(<span class="params">arg1:T, arg2:T</span>)=&gt;</span>T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è°ƒç”¨çš„æ—¶å€™éœ€è¦&lt;number&gt;ï¼Œä¸€æ—¦å®šä¹‰æˆèŒƒå‹ç±»ï¼Œé‚£ä¹ˆè°ƒç”¨ç±»æ—¶ï¼Œå°±éœ€è¦é©¬ä¸ŠæŒ‡å®šå¥½ç±»å‹ã€‚</span></span><br><span class="line"><span class="keyword">const</span> adder = <span class="keyword">new</span> Adder&lt;<span class="built_in">number</span>&gt;();</span><br><span class="line">adder.add = <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1, arg2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1+arg2;</span><br><span class="line">&#125;</span><br><span class="line">adder.add(<span class="number">1</span>,<span class="number">3</span>)<span class="comment">//æ­£ç¡®</span></span><br><span class="line">adder.add(<span class="number">1</span>,<span class="string">''</span>)<span class="comment">//æŠ¥é”™</span></span><br></pre></td></tr></table></figure></p><h4 id="èŒƒå‹ç±»è°ƒç”¨æ–¹å¼â€“éœ€æŒ‡å®šå¥½ç±»å‹"><a href="#èŒƒå‹ç±»è°ƒç”¨æ–¹å¼â€“éœ€æŒ‡å®šå¥½ç±»å‹" class="headerlink" title="èŒƒå‹ç±»è°ƒç”¨æ–¹å¼â€“éœ€æŒ‡å®šå¥½ç±»å‹"></a>èŒƒå‹ç±»è°ƒç”¨æ–¹å¼â€“éœ€æŒ‡å®šå¥½ç±»å‹</h4><p>å¦‚ä¸Šé¢çš„æ™®é€šç±»ï¼Œè°ƒç”¨æ—¶ï¼Œç›´æ¥è°ƒç”¨ï¼Œæ”¹æˆèŒƒå‹ç±»æ—¶ï¼Œå°±éœ€è¦æŒ‡å®šå¥½ç±»å‹äº†ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> adder = <span class="keyword">new</span> Adder&lt;<span class="built_in">number</span>&gt;();</span><br></pre></td></tr></table></figure></p><h4 id="æ‰©å±•-èŒƒå‹å‡½æ•°"><a href="#æ‰©å±•-èŒƒå‹å‡½æ•°" class="headerlink" title="æ‰©å±•-èŒƒå‹å‡½æ•°"></a>æ‰©å±•-èŒƒå‹å‡½æ•°</h4><p>æ—¢ç„¶æœ‰æ™®é€šç±»å’ŒèŒƒå‹ç±»ï¼Œé‚£ä¹ˆå°±æœ‰æ™®é€šå‡½æ•°å’ŒèŒƒå‹å‡½æ•°ï¼Œç”¨æ³•å¯ä»¥ç±»æ¨èŒƒå‹ç±»ã€‚</p><h3 id="èŒƒå‹çº¦æŸ"><a href="#èŒƒå‹çº¦æŸ" class="headerlink" title="èŒƒå‹çº¦æŸ"></a>èŒƒå‹çº¦æŸ</h3><h4 id="ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹çº¦æŸ"><a href="#ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹çº¦æŸ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹çº¦æŸ"></a>ä¸ºä»€ä¹ˆè¦æœ‰èŒƒå‹çº¦æŸ</h4><p><a href="https://ts.xcatliu.com/advanced/generics.html#%E6%B3%9B%E5%9E%8B%E7%BA%A6%E6%9D%9F" target="_blank" rel="noopener">å‚è€ƒtså…¥é—¨æ•™ç¨‹-èŒƒå‹çº¦æŸ</a><br>åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨æ³›å‹å˜é‡çš„æ—¶å€™ï¼Œç”±äºäº‹å…ˆä¸çŸ¥é“å®ƒæ˜¯å“ªç§ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½éšæ„çš„æ“ä½œå®ƒçš„å±æ€§æˆ–æ–¹æ³•ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg.length);</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// index.ts(2,19): error TS2339: Property 'length' does not exist on type 'T'.</span></span><br></pre></td></tr></table></figure></p><h4 id="èŒƒå‹çš„ç‰¹æ€§å¯¼è‡´äº†å¿…ç„¶éœ€è¦èŒƒå‹çº¦æŸ"><a href="#èŒƒå‹çš„ç‰¹æ€§å¯¼è‡´äº†å¿…ç„¶éœ€è¦èŒƒå‹çº¦æŸ" class="headerlink" title="èŒƒå‹çš„ç‰¹æ€§å¯¼è‡´äº†å¿…ç„¶éœ€è¦èŒƒå‹çº¦æŸ"></a>èŒƒå‹çš„ç‰¹æ€§å¯¼è‡´äº†å¿…ç„¶éœ€è¦èŒƒå‹çº¦æŸ</h4><p>å‚è€ƒä¸Šé¢ã€‚</p><h4 id="ä½¿ç”¨æ™®é€šæ¥å£åšèŒƒå‹çº¦æŸ"><a href="#ä½¿ç”¨æ™®é€šæ¥å£åšèŒƒå‹çº¦æŸ" class="headerlink" title="ä½¿ç”¨æ™®é€šæ¥å£åšèŒƒå‹çº¦æŸ"></a>ä½¿ç”¨æ™®é€šæ¥å£åšèŒƒå‹çº¦æŸ</h4><p>æ³¨æ„çš„æ˜¯ï¼ŒèŒƒå‹çº¦æŸä½¿ç”¨<strong>æ™®é€šæ¥å£</strong>è€Œéä»€ä¹ˆèŒƒå‹æ¥å£æ¥çº¦æŸèŒƒå‹ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Lengthwise &#123;</span><br><span class="line">    length: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Lengthwise</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg.length);</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h4><p>ç”¨äºçº¦æŸèŒƒå‹çš„å…³é”®å­—ï¼Œå‚è€ƒä¸Šé¢ã€‚</p><h4 id="è¿›é˜¶-keyof"><a href="#è¿›é˜¶-keyof" class="headerlink" title="è¿›é˜¶ - keyof"></a>è¿›é˜¶ - keyof</h4><p>ä½¿ç”¨keyofè¿›è¡ŒèŒƒå‹çº¦æŸï¼Œ<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProp</span>&lt;<span class="title">T</span>, <span class="title">K</span>&gt;(<span class="params">obj:T,key:K</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj[key]<span class="comment">//ts error,objå†…ä¸ä¸€å®šæœ‰key</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶å¯é€šè¿‡ keyofæ¥çº¦æŸ Kï¼Œæ”¹é€ å¦‚ä¸‹ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getProp</span>&lt;<span class="title">T</span>, <span class="title">K</span> <span class="title">extends</span> <span class="title">keyof</span> <span class="title">T</span>&gt;(<span class="params">obj:T,key:K</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj[key]</span><br><span class="line">&#125;</span><br><span class="line">getProp(&#123;name:<span class="number">1</span>&#125;, <span class="string">'name'</span>)</span><br></pre></td></tr></table></figure></p><p>keyofä¸»è¦è¡¨ç¤º kæ˜¯Tå†…çš„å±æ€§ã€‚<br><a href="https://www.imooc.com/video/21306/0" target="_blank" rel="noopener">å‚è€ƒ</a></p><h2 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h2><h3 id="strictNullChecks"><a href="#strictNullChecks" class="headerlink" title="strictNullChecks"></a>strictNullChecks</h3><p>ä¸¥æ ¼ç±»å‹ï¼Œè®©ä»£ç åŒºåˆ†null undefinedçš„ç©ºä¸éç©ºç±»å‹ï¼›ä¸å†æœ‰åŒ…å«ï¼›</p><h3 id="å¼€å¯tsxçš„æ”¯æŒ"><a href="#å¼€å¯tsxçš„æ”¯æŒ" class="headerlink" title="å¼€å¯tsxçš„æ”¯æŒ"></a>å¼€å¯tsxçš„æ”¯æŒ</h3><p>å®šä¹‰tsconfig.jsonçš„ jsxä¸ºpreserveï¼›</p><h3 id="esModuleInterop-å¼€å¯export-default"><a href="#esModuleInterop-å¼€å¯export-default" class="headerlink" title="esModuleInterop å¼€å¯export default"></a>esModuleInterop å¼€å¯export default</h3><p>å½“tsæŠ¥é”™importæˆ–exportæ—¶ï¼›<br>æˆ–è€…tsæ··åˆä½¿ç”¨commonjsä¸es6æ¨¡å—æŠ¥é”™æ—¶ï¼›<br>å¯èƒ½æ˜¯æ²¡æœ‰export defaultæœ‰å…³ï¼Œæ­¤æ—¶å¯ä»¥è®¾ç½®ä¸åŒçš„esModuleInteropæ¥è§£å†³ï¼›</p><h3 id="noImplicitAny-å®šä¹‰å¯¹è±¡ä¸èƒ½æœ‰anyç±»å‹å±æ€§"><a href="#noImplicitAny-å®šä¹‰å¯¹è±¡ä¸èƒ½æœ‰anyç±»å‹å±æ€§" class="headerlink" title="noImplicitAny å®šä¹‰å¯¹è±¡ä¸èƒ½æœ‰anyç±»å‹å±æ€§"></a>noImplicitAny å®šä¹‰å¯¹è±¡ä¸èƒ½æœ‰anyç±»å‹å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> student = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">'name'</span>;</span><br><span class="line">student[key] = <span class="string">'qianqian'</span><span class="comment">//ts error</span></span><br></pre></td></tr></table></figure><h2 id="tscå‘½ä»¤çš„ä½¿ç”¨"><a href="#tscå‘½ä»¤çš„ä½¿ç”¨" class="headerlink" title="tscå‘½ä»¤çš„ä½¿ç”¨"></a>tscå‘½ä»¤çš„ä½¿ç”¨</h2><h3 id="å®‰è£…ä½¿ç”¨"><a href="#å®‰è£…ä½¿ç”¨" class="headerlink" title="å®‰è£…ä½¿ç”¨"></a>å®‰è£…ä½¿ç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript -g</span><br><span class="line">tsc -v</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆtsconfig-json"><a href="#ç”Ÿæˆtsconfig-json" class="headerlink" title="ç”Ÿæˆtsconfig.json"></a>ç”Ÿæˆtsconfig.json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘tsæ–‡ä»¶"><a href="#ç¼–è¯‘tsæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘tsæ–‡ä»¶"></a>ç¼–è¯‘tsæ–‡ä»¶</h3><p>åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªtest.tsï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°±ä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆç¼–è¯‘åç”Ÿæˆçš„æ–‡ä»¶ test.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc test.ts</span><br></pre></td></tr></table></figure></p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><h3 id="d-tsæ–‡ä»¶"><a href="#d-tsæ–‡ä»¶" class="headerlink" title="d.tsæ–‡ä»¶"></a>d.tsæ–‡ä»¶</h3><p>è¯¦è§ã€Štsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒã€‹</p><h3 id="asçš„ä½¿ç”¨-ç±»å‹æ–­è¨€"><a href="#asçš„ä½¿ç”¨-ç±»å‹æ–­è¨€" class="headerlink" title="asçš„ä½¿ç”¨ - ç±»å‹æ–­è¨€"></a>asçš„ä½¿ç”¨ - ç±»å‹æ–­è¨€</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCacheData</span>(<span class="params">key: string</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">window</span> <span class="keyword">as</span> any).cache[key];</span><br><span class="line">&#125;</span><br><span class="line">interface Cat &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    run(): <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tom = getCacheData(<span class="string">'tom'</span>) <span class="keyword">as</span> Cat;</span><br><span class="line">tom.run();</span><br></pre></td></tr></table></figure><h3 id="type-åˆ«å"><a href="#type-åˆ«å" class="headerlink" title="type åˆ«å"></a>type åˆ«å</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">type Name = string;</span><br><span class="line">type NameResolver = <span class="function"><span class="params">()</span> =&gt;</span> string;</span><br><span class="line">type NameOrResolver = Name | NameResolver;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params">n: NameOrResolver</span>): <span class="title">Name</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> n === <span class="string">'string'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> n();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">type EventNames = <span class="string">'click'</span> | <span class="string">'scroll'</span> | <span class="string">'mousemove'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">ele: Element, event: EventNames</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleEvent(<span class="built_in">document</span>.getElementById(<span class="string">'hello'</span>), <span class="string">'scroll'</span>);  <span class="comment">// æ²¡é—®é¢˜</span></span><br><span class="line">handleEvent(<span class="built_in">document</span>.getElementById(<span class="string">'world'</span>), <span class="string">'dbclick'</span>); <span class="comment">// æŠ¥é”™ï¼Œevent ä¸èƒ½ä¸º 'dbclick'</span></span><br></pre></td></tr></table></figure><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="tsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒ"><a href="#tsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒ" class="headerlink" title="tsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒ"></a>tsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒ</h3><p><a href="https://www.imooc.com/video/21605/0" target="_blank" rel="noopener">å‚è€ƒæ…•è¯¾ç½‘</a><br>å¦‚ä¸‹å›¾ï¼Œä½¿ç”¨commonjsæ—¶ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨css moduleï¼›<br>ä½†ä½¿ç”¨es6çš„importæ¥css moduleæ—¶ï¼Œå¿…é¡»å®šä¹‰d.tsæ–‡ä»¶ï¼›<br>è¿˜æœ‰ä¸€ä¸ªæƒ…å†µï¼Œå°±æ˜¯ä¸‹å›¾ä¸­ç¬¬ä¸€è¡Œ å…¨å±€cssçš„å†™æ³•ï¼Œimportå•çº¯å¼•å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¹Ÿæ˜¯ä¸æŠ¥é”™çš„ï¼›</p><p>è¿™æ˜¯å› ä¸ºï¼Œå½“ts import ä¸€ä¸ªcssæ–‡ä»¶æ—¶ï¼Œè¿™æ ·æ˜¯æ²¡é—®é¢˜çš„ï¼›<br>ä½†ä½¿ç”¨es6è¯­æ³•ï¼Œéœ€è¦ts å°†ä¸€ä¸ªcssæ–‡ä»¶å½“æˆå¯¹è±¡ï¼Œå°†æ­¤cssæ–‡ä»¶æŠ½è±¡æˆä¸€ä¸ªstyleså¯¹è±¡æ—¶ï¼›<br>tsæ˜¯ä¸è®¤è¯†çš„ï¼Œæ­¤æ—¶ï¼Œå°±éœ€è¦å‘Šè¯‰tsï¼Œè¿™ä¸ªcssæ–‡ä»¶æš´éœ²å‡ºæ¥çš„æ˜¯ä¸€ä¸ªstyleså¯¹è±¡ï¼›å¦‚ä½•å‘Šè¯‰å‘¢ï¼Œå°±æ˜¯é€šè¿‡d.tsæ–‡ä»¶ï¼›<br>å¦å¤–ä¸€æ–¹é¢ï¼Œå¦‚æœtsä¸­ä½¿ç”¨commonjsçš„è¯­æ³•æ¥è·å–stylesæ—¶ï¼Œåˆ™ä¸éœ€è¦å®šä¹‰d.tsæ–‡ä»¶ï¼Œå› ä¸ºcommonjsè§„èŒƒæ—¶webpacké»˜è®¤çš„è§„èŒƒï¼›</p><p>css modlue æŠ˜å°„äº† ts é€šè¿‡es6 å°†ä¸€ä¸ªæ–‡ä»¶å½“æˆä¸€ä¸ªå¯¹è±¡å¼•å…¥æ—¶ï¼Œéœ€è¦å®šä¹‰dtsæ–‡ä»¶ï¼›ä¸ºæ­¤ï¼Œå…¶ä»–çš„æ¯”å¦‚jqueryï¼Œlodashéƒ½éœ€è¦åšå£°æ˜æ–‡ä»¶d.ts.<br><figure class="image-box">                <img src="/image/ts/cssmodule.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/ts/css.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/ts/dts.jpg" alt title class>                <p></p>            </figure></p><h3 id="tsä¸­å¼•å…¥css-modlueå¼‚å¸¸çš„é—®é¢˜"><a href="#tsä¸­å¼•å…¥css-modlueå¼‚å¸¸çš„é—®é¢˜" class="headerlink" title="tsä¸­å¼•å…¥css modlueå¼‚å¸¸çš„é—®é¢˜"></a>tsä¸­å¼•å…¥css modlueå¼‚å¸¸çš„é—®é¢˜</h3><p>è¯¦è§ã€Štsä¸­ä½¿ç”¨commonjsè§„èŒƒä¸es6è§„èŒƒçš„ä¸åŒã€‹</p><h3 id="null-undefined-æ˜¯æ‰€æœ‰ç±»å‹å­é›†"><a href="#null-undefined-æ˜¯æ‰€æœ‰ç±»å‹å­é›†" class="headerlink" title="null undefined æ˜¯æ‰€æœ‰ç±»å‹å­é›†"></a>null undefined æ˜¯æ‰€æœ‰ç±»å‹å­é›†</h3><p>ä¸€ä¸ªå˜é‡å®šä¹‰ä¸ºnumberåï¼Œå†å®šä¹‰æˆstringï¼Œä¼šæŠ¥é”™ï¼Œä½†å®šä¹‰ä¸ºundefinedæˆ–nullä¸æŠ¥é”™ï¼›<br>å› ä¸ºundefinedå’Œnulléƒ½æ˜¯ç©ºç±»å‹ï¼Œå…¶ä»–éç©ºç±»å‹éƒ½åŒ…å«æ­¤ç©ºç±»å‹ï¼›<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> height:<span class="built_in">number</span></span><br><span class="line">height = <span class="number">100</span>;</span><br><span class="line">height = <span class="string">'str'</span>;<span class="comment">//error</span></span><br><span class="line">height = <span class="literal">undefined</span>;<span class="comment">//ä¸æŠ¥é”™</span></span><br><span class="line">height = <span class="literal">null</span>;<span class="comment">//ä¸æŠ¥é”™</span></span><br></pre></td></tr></table></figure></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.imooc.com/learn/1243" target="_blank" rel="noopener">æ…•è¯¾ç½‘ - TSå°è£…æ’­æ”¾å™¨ç»„ä»¶</a><br><a href="https://www.imooc.com/learn/1234" target="_blank" rel="noopener">å½“Reacté‡ä¸ŠTypeScriptå¼€å‘Antdç»„ä»¶</a><br><a href="https://ts.xcatliu.com/" target="_blank" rel="noopener">TypeScript å…¥é—¨æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> typescript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> typescript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯demoè®²è§£</title>
      <link href="/2020/01/18/js_demo/"/>
      <url>/2020/01/18/js_demo/</url>
      
        <content type="html"><![CDATA[<h2 id="ç”»ä¸€ä¸ªæ—¶é’Ÿ"><a href="#ç”»ä¸€ä¸ªæ—¶é’Ÿ" class="headerlink" title="ç”»ä¸€ä¸ªæ—¶é’Ÿ"></a>ç”»ä¸€ä¸ªæ—¶é’Ÿ</h2><h3 id="demoä¸æ•ˆæœ"><a href="#demoä¸æ•ˆæœ" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h3><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/clock.html" target="_blank" rel="noopener">æŸ¥çœ‹demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/clock.html">æŸ¥çœ‹demo æ•ˆæœ</a></p><figure class="image-box">                <img src="/image/js_demo/clock.jpg" alt title class>                <p></p>            </figure><h3 id="å°†å…ƒç´ æŒ‰åœ†å¼§æ’æ”¾çš„ä¸¤ç§æ–¹æ³•"><a href="#å°†å…ƒç´ æŒ‰åœ†å¼§æ’æ”¾çš„ä¸¤ç§æ–¹æ³•" class="headerlink" title="å°†å…ƒç´ æŒ‰åœ†å¼§æ’æ”¾çš„ä¸¤ç§æ–¹æ³•"></a>å°†å…ƒç´ æŒ‰åœ†å¼§æ’æ”¾çš„ä¸¤ç§æ–¹æ³•</h3><h4 id="cssæ–¹æ³•-â€“è¡¨ç›˜åˆ»åº¦"><a href="#cssæ–¹æ³•-â€“è¡¨ç›˜åˆ»åº¦" class="headerlink" title="cssæ–¹æ³• â€“è¡¨ç›˜åˆ»åº¦"></a>cssæ–¹æ³• â€“è¡¨ç›˜åˆ»åº¦</h4><p>å°†å…ƒç´ æ—‹è½¬åï¼Œè‡ªèº«åæ ‡ç³»æ”¹å˜ï¼Œå†å¯¹æ‰€æœ‰å…ƒç´ ç­‰è·ç¦»ç­‰æ–¹å‘ä½ç§»å³å¯ã€‚<br><figure class="image-box">                <img src="/image/js_demo/clock_css.jpg" alt title class>                <p></p>            </figure></p><h4 id="è®¡ç®—åæ ‡ç‚¹æ–¹æ³•-â€“è¡¨ç›˜æ•°å­—"><a href="#è®¡ç®—åæ ‡ç‚¹æ–¹æ³•-â€“è¡¨ç›˜æ•°å­—" class="headerlink" title="è®¡ç®—åæ ‡ç‚¹æ–¹æ³•  â€“è¡¨ç›˜æ•°å­—"></a>è®¡ç®—åæ ‡ç‚¹æ–¹æ³•  â€“è¡¨ç›˜æ•°å­—</h4><p>è§ä¸Šé¢ã€Šcssæ–¹æ³•ã€‹å›¾</p><h3 id="åº¦ä¸å¼§åº¦åˆ¶è½¬æ¢"><a href="#åº¦ä¸å¼§åº¦åˆ¶è½¬æ¢" class="headerlink" title="åº¦ä¸å¼§åº¦åˆ¶è½¬æ¢"></a>åº¦ä¸å¼§åº¦åˆ¶è½¬æ¢</h3><p>Ï€ ç›¸å½“äº 180åº¦ï¼Œ 1åº¦è½¬æ¢ä¸ºå¼§åº¦åˆ¶çš„å€¼å°±æ˜¯ Ï€ ï¼180ï¼š</p><p>1åº¦=Ï€ ï¼180=Math.PI/180</p><h3 id="cosã€sinä¸åœ†å‡ ä½•åº¦ç»å…¸åº”ç”¨"><a href="#cosã€sinä¸åœ†å‡ ä½•åº¦ç»å…¸åº”ç”¨" class="headerlink" title="cosã€sinä¸åœ†å‡ ä½•åº¦ç»å…¸åº”ç”¨"></a>cosã€sinä¸åœ†å‡ ä½•åº¦ç»å…¸åº”ç”¨</h3><h3 id="transform-originçš„ç»†å¾®å¤„ç†"><a href="#transform-originçš„ç»†å¾®å¤„ç†" class="headerlink" title="transform-originçš„ç»†å¾®å¤„ç†"></a>transform-originçš„ç»†å¾®å¤„ç†</h3><p>æ—¶é’ˆä¸åˆ»åº¦éƒ½ç”¨äº†transform-originï¼šleft centerï¼›</p><h3 id="æ›´å¤šè®²è§£å‚è€ƒ"><a href="#æ›´å¤šè®²è§£å‚è€ƒ" class="headerlink" title="æ›´å¤šè®²è§£å‚è€ƒ"></a>æ›´å¤šè®²è§£å‚è€ƒ</h3><p><a href="http://jiaolonghuang.github.io/2014/12/13/clock/" target="_blank" rel="noopener">å¦‚ä½•åˆ¶ä½œä¸€ä¸ªæ—¶é’Ÿ</a></p><h2 id="å…¨å±åˆ‡æ¢æ•ˆæœ-è½®æ’­"><a href="#å…¨å±åˆ‡æ¢æ•ˆæœ-è½®æ’­" class="headerlink" title="å…¨å±åˆ‡æ¢æ•ˆæœ(è½®æ’­)"></a>å…¨å±åˆ‡æ¢æ•ˆæœ(è½®æ’­)</h2><h3 id="demoä¸æ•ˆæœ-1"><a href="#demoä¸æ•ˆæœ-1" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h3><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/switch-plugin/demo.html" target="_blank" rel="noopener">æŸ¥çœ‹demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/switch-plugin/demo.html">æŸ¥çœ‹demoæ•ˆæœ</a><br><a href="https://www.imooc.com/learn/374" target="_blank" rel="noopener">demoè®²è§£è§†é¢‘</a><br><figure class="image-box">                <img src="/image/js_demo/switch.jpg" alt title class>                <p></p>            </figure></p><h3 id="è½®æ’­åˆ‡æ¢è®¾è®¡æ–¹æ¡ˆ"><a href="#è½®æ’­åˆ‡æ¢è®¾è®¡æ–¹æ¡ˆ" class="headerlink" title="è½®æ’­åˆ‡æ¢è®¾è®¡æ–¹æ¡ˆ"></a>è½®æ’­åˆ‡æ¢è®¾è®¡æ–¹æ¡ˆ</h3><h4 id="ä¸‰å±‚divè®¾è®¡"><a href="#ä¸‰å±‚divè®¾è®¡" class="headerlink" title="ä¸‰å±‚divè®¾è®¡"></a>ä¸‰å±‚divè®¾è®¡</h4><p>å¦‚ä¸‹å›¾,ä»£ç å¦‚ä¸‹ï¼Œè¯´æ˜çš„æ˜¯ï¼Œè®¾ç½®overflow: hidden;èµ·åˆ°è£å‰ªçš„ä½œç”¨ï¼Œè®¾ç½®å¤–å±‚ï¼ˆcontainerï¼‰æ˜¯ä¸ºäº†åœ¨æ–‡æ¡£æµä¸­é¢„å®šä½ç½®ã€‚<br><figure class="image-box">                <img src="/image/js_demo/switch_idea.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span> <span class="attr">data-PageSwitch</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sections"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section active"</span> <span class="attr">id</span>=<span class="string">"section0"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section"</span> <span class="attr">id</span>=<span class="string">"section1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section"</span> <span class="attr">id</span>=<span class="string">"section2"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"section"</span> <span class="attr">id</span>=<span class="string">"section3"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#container</span>&#123;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">/* sectionsè®¾ç½®æˆ100%ä¹Ÿå¥½ï¼Œå½“å†…éƒ¨é«˜åº¦ä¾èµ–å¤–å±‚é«˜åº¦æ—¶ï¼Œå°†ä¸‰å±‚é«˜åº¦éƒ½è®¾ç½®æˆ100% */</span></span><br><span class="line">    <span class="selector-id">#container</span>,<span class="selector-class">.sections</span>,<span class="selector-class">.section</span>&#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="translateYå®ç°åˆ‡æ¢æ˜¾ç¤º"><a href="#translateYå®ç°åˆ‡æ¢æ˜¾ç¤º" class="headerlink" title="translateYå®ç°åˆ‡æ¢æ˜¾ç¤º"></a>translateYå®ç°åˆ‡æ¢æ˜¾ç¤º</h4><p>æ ¹æ®ä¸Šé¢çš„ä¸‰å±‚divè®¾ç½®åï¼Œå¤–å±‚å› ä¸ºä½¿ç”¨overflow hidden é®æŒ¡äº† sectionså£³çš„å…¨éƒ¨å†…å®¹ï¼Œå½¢æˆè£å‰ªæ•ˆæœï¼Œä¸è¿‡sectionså®é™…æ˜¯å…¨éƒ¨æ˜¾ç¤ºçš„ï¼Œ<br>å› æ­¤å¯¹sectionsä½¿ç”¨translateYå®ç°åˆ‡æ¢æ˜¾ç¤ºã€‚</p><h4 id="å†…å¤–ä¸‰å±‚éƒ½ä½¿ç”¨-height-100-æŠ€å·§"><a href="#å†…å¤–ä¸‰å±‚éƒ½ä½¿ç”¨-height-100-æŠ€å·§" class="headerlink" title="å†…å¤–ä¸‰å±‚éƒ½ä½¿ç”¨ height: 100%æŠ€å·§"></a>å†…å¤–ä¸‰å±‚éƒ½ä½¿ç”¨ height: 100%æŠ€å·§</h4><p>å¦‚ä¸Šé¢ä»£ç ï¼Œ #container,.sections,.sectionéƒ½ä½¿ç”¨äº†height: 100%;è®©ä¸‰è€…çš„é«˜åº¦ä¿æŒä¸€è‡´ã€‚å› ä¸ºåˆ‡æ¢æ˜¾ç¤ºä¹Ÿæ˜¯å°†å†…å±‚çš„sectionå…¨å±å±•ç¤ºåœ¨containerä¸Šï¼Œå› æ­¤è¿™ç§æ–¹æ³•éå¸¸æ£’ã€‚</p><h4 id="offsetTopè·å–translateYåç§»å€¼"><a href="#offsetTopè·å–translateYåç§»å€¼" class="headerlink" title="offsetTopè·å–translateYåç§»å€¼"></a>offsetTopè·å–translateYåç§»å€¼</h4><p>offsetTopæ˜¯éå¸¸æ£’çš„æ–¹æ³•ï¼Œä½¿ç”¨æ–¹æ³•è‡ªè¡Œç½‘ä¸ŠæŸ¥è¯¢ã€‚è™½ç„¶ä¸Šé¢çš„section0 section1 section2 section3å¯èƒ½æ²¡æœ‰è¢«æ˜¾ç¤ºï¼Œä½†æ˜¯å®ƒä»¬ç›¸å¯¹äºcontaineræˆ–sectionsçš„offsetTopæ˜¯ç¡®å®šå¥½çš„ã€‚<br>æ¯æ¬¡è½®æ’­çš„æ—¶å€™ï¼Œè®°ä½indexå€¼ï¼Œæ ¹æ®indexè·å–è½®æ’­å•å…ƒ sectionï¼Œè·å–å®ƒçš„offsetTopè·å–translateYåç§»å€¼ã€‚</p><h3 id="è®°ä½è½®æ’­å•å…ƒçš„indexå¾ˆå…³é”®"><a href="#è®°ä½è½®æ’­å•å…ƒçš„indexå¾ˆå…³é”®" class="headerlink" title="è®°ä½è½®æ’­å•å…ƒçš„indexå¾ˆå…³é”®"></a>è®°ä½è½®æ’­å•å…ƒçš„indexå¾ˆå…³é”®</h3><p>æ˜¾ç¤ºå“ªä¸€é¡µéƒ½æ˜¯indexè¿›è¡Œæ ‡è¯†ï¼Œè®¾è®¡è¿™ä¸ªè½®æ’­æ’ä»¶ï¼Œå…³é”®æ˜¯å¤„ç†indexï¼Œå¤„ç†å¥½indexäº†ï¼Œå…¶ä»–éƒ½æ˜¯å›´ç»•è¿™ä¸ªå¤„ç†ã€‚</p><h3 id="æœ‰è¶£çš„åŠ¨ç”»ç›‘å¬äº‹ä»¶transitionend"><a href="#æœ‰è¶£çš„åŠ¨ç”»ç›‘å¬äº‹ä»¶transitionend" class="headerlink" title="æœ‰è¶£çš„åŠ¨ç”»ç›‘å¬äº‹ä»¶transitionend"></a>æœ‰è¶£çš„åŠ¨ç”»ç›‘å¬äº‹ä»¶transitionend</h3><p>æœ¬demoä¸ºäº†æ•ˆæœç«‹ä½“ï¼Œè®¾ç½®äº†transitionendï¼Œæœ‰å…´è¶£å¯å‚çœ‹demo</p><h2 id="å›¾ç‰‡è·‘é©¬ç¯-è½®æ’­"><a href="#å›¾ç‰‡è·‘é©¬ç¯-è½®æ’­" class="headerlink" title="å›¾ç‰‡è·‘é©¬ç¯(è½®æ’­)"></a>å›¾ç‰‡è·‘é©¬ç¯(è½®æ’­)</h2><h3 id="demoä¸æ•ˆæœ-2"><a href="#demoä¸æ•ˆæœ-2" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h3><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/animation-master/html/marquee-modify.html" target="_blank" rel="noopener">æŸ¥çœ‹demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/marquee-modify.html">æŸ¥çœ‹demoæ•ˆæœ</a></p><p>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ª<a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/animation-master/html/marquee.html" target="_blank" rel="noopener">jqueryç‰ˆæœ¬çš„demo</a> <a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/marquee.html">jqueryç‰ˆæœ¬çš„demo æ•ˆæœ</a>ï¼Œæ–¹ä¾¿ç†è§£ï¼Œå¯ä»¥çœ‹çœ‹ã€‚<br>åŸºæœ¬åŸç†åŒä¸Šé¢çš„ã€Šå…¨å±åˆ‡æ¢æ•ˆæœ(è½®æ’­)ã€‹</p><h3 id="æœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡"><a href="#æœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡" class="headerlink" title="æœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡"></a>æœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡</h3><p>å¦‚æœä¸åœ¨æœ€åçš„ä½ç½®æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œä¼šæœ‰ä¸€ä¸ªç•™ç™½çš„æ•ˆæœã€‚<br>åŸç†åœ¨äºï¼Œå½“transform: translateX(-1800px);æ—¶ï¼Œæ­¤æ—¶é¡µé¢å°†æ˜¾ç¤ºé‚£å¼ é‡å¤æ”¾ç½®çš„ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œ<br>å› ä¸ºanimationçš„åŠ¨ç”»åœ¨translateX(-1800px)æ—¶å®Œæˆï¼Œè®¾ç½®çš„infiniteç‰¹æ€§ï¼Œå°†ç¬é—´0ç§’å›åˆ°åˆå§‹ä½ç½®ï¼Œä¹Ÿå°±æ˜¯é¡µé¢åªæœ‰ç¬¬ä¸€å¼ å›¾ç‰‡çš„æ—¶å€™ï¼Œæ­¤æ—¶å°±ä¸ä¼šå‡ºç°ç©ºç™½é¡µï¼Œä¸”å›¾ç‰‡å¾ªç¯æ’­æ”¾æµç•…ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"marquee"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./../css/i/timg.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./../css/i/timg1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./../css/i/timg2.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é‡å¤æ”¾ç½®ç¬¬ä¸€å¼ å›¾ç‰‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./../css/i/timg.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.marquee</span>, <span class="selector-class">.content</span>, <span class="selector-class">.list</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.marquee</span>, <span class="selector-class">.list</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.content</span>&#123;</span><br><span class="line">  <span class="comment">/* width 600px * 3 */</span></span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1800px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: run <span class="number">9s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> run&#123;</span><br><span class="line">  100%&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">1800px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é¡µé¢ç•™ç™½é—®é¢˜åˆ†æä¸è§£å†³"><a href="#é¡µé¢ç•™ç™½é—®é¢˜åˆ†æä¸è§£å†³" class="headerlink" title="é¡µé¢ç•™ç™½é—®é¢˜åˆ†æä¸è§£å†³"></a>é¡µé¢ç•™ç™½é—®é¢˜åˆ†æä¸è§£å†³</h3><p>å‚è€ƒä¸Šé¢ã€Šæœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡ã€‹</p><h3 id="ä½¿ç”¨animationçš„infiniteç‰¹æ€§ä¿æŒå¾ªç¯æµç•…"><a href="#ä½¿ç”¨animationçš„infiniteç‰¹æ€§ä¿æŒå¾ªç¯æµç•…" class="headerlink" title="ä½¿ç”¨animationçš„infiniteç‰¹æ€§ä¿æŒå¾ªç¯æµç•…"></a>ä½¿ç”¨animationçš„infiniteç‰¹æ€§ä¿æŒå¾ªç¯æµç•…</h3><p>å‚è€ƒä¸Šé¢ã€Šæœ€åä½ç½®é‡å¤æ·»åŠ ç¬¬ä¸€å¼ å›¾ç‰‡ã€‹</p><h3 id="æ€ä¹ˆåšå·¦åˆ°å³çš„å¾ªç¯æ’­æ”¾"><a href="#æ€ä¹ˆåšå·¦åˆ°å³çš„å¾ªç¯æ’­æ”¾" class="headerlink" title="æ€ä¹ˆåšå·¦åˆ°å³çš„å¾ªç¯æ’­æ”¾"></a>æ€ä¹ˆåšå·¦åˆ°å³çš„å¾ªç¯æ’­æ”¾</h3><p>ä¸Šé¢çš„ä¾‹å­æ˜¯å³åˆ°å·¦çš„è½®æ’­ï¼Œå› æ­¤åœ¨æœ€åçš„ä½ç½®æ·»åŠ äº†ç¬¬ä¸€å¼ å›¾ç‰‡ï¼Œå¦‚æœéœ€è¦å·¦åˆ°å³è½®æ’­ï¼Œåˆ™åœ¨æœ€å¼€å§‹çš„ä½ç½®æ·»åŠ æœ€åä¸€å¼ å›¾ç‰‡ã€‚</p><h2 id="JSå®ç°äº¬ä¸œæ— å»¶è¿Ÿèœå•æ•ˆæœ"><a href="#JSå®ç°äº¬ä¸œæ— å»¶è¿Ÿèœå•æ•ˆæœ" class="headerlink" title="JSå®ç°äº¬ä¸œæ— å»¶è¿Ÿèœå•æ•ˆæœ"></a>JSå®ç°äº¬ä¸œæ— å»¶è¿Ÿèœå•æ•ˆæœ</h2><h3 id="demoä¸æ•ˆæœ-3"><a href="#demoä¸æ•ˆæœ-3" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/nonDelay/index.html" target="_blank" rel="noopener">æŸ¥çœ‹demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/nonDelay/index.html">æŸ¥çœ‹demo æ•ˆæœ</a></p><p><a href="https://www.imooc.com/video/14717" target="_blank" rel="noopener">demoè®²è§£è§†é¢‘</a><br><figure class="image-box">                <img src="/image/js_demo/delay.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸€çº§èœå•ä¸äºŒçº§èœå•"><a href="#ä¸€çº§èœå•ä¸äºŒçº§èœå•" class="headerlink" title="ä¸€çº§èœå•ä¸äºŒçº§èœå•"></a>ä¸€çº§èœå•ä¸äºŒçº§èœå•</h4><p>å¦‚ä¸Šå›¾ï¼Œå·¦ä¾§èœå•ç§°ä¹‹ä¸ºä¸€çº§ï¼Œå³ä¾§å†…å®¹æ˜¾ç¤ºç§°ä¹‹ä¸ºäºŒçº§èœå•ã€‚</p><h3 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h3><h4 id="å‚ç›´è¿åŠ¨ä¸å»¶æ—¶"><a href="#å‚ç›´è¿åŠ¨ä¸å»¶æ—¶" class="headerlink" title="å‚ç›´è¿åŠ¨ä¸å»¶æ—¶"></a>å‚ç›´è¿åŠ¨ä¸å»¶æ—¶</h4><p>åœ¨ä¸€çº§èœå•å¦‚ä¸‹å›¾åšå‚ç›´è¿åŠ¨æ—¶ä¸å»¶æ—¶ï¼Œå½“æµ‹æ–œè¿åŠ¨å¹¶å¤„äºä¸‰è§’åŒºå†…æ—¶ï¼Œåšå»¶æ—¶æ˜¾ç¤ºå³ä¾§é¢æ¿ï¼Œä»¥è¾¾åˆ°é€‰æ‹©å¥½ä¸€çº§åï¼Œå…‰æ ‡ç§»åˆ°å³ä¾§äºŒçº§æ—¶ï¼ŒäºŒçº§ä¸æ¶ˆå¤±ã€‚<br><figure class="image-box">                <img src="/image/js_demo/delay_idea.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸‰è§’åŒºå†…ç§»åˆ°äºŒçº§æ—¶åšå»¶æ—¶"><a href="#ä¸‰è§’åŒºå†…ç§»åˆ°äºŒçº§æ—¶åšå»¶æ—¶" class="headerlink" title="ä¸‰è§’åŒºå†…ç§»åˆ°äºŒçº§æ—¶åšå»¶æ—¶"></a>ä¸‰è§’åŒºå†…ç§»åˆ°äºŒçº§æ—¶åšå»¶æ—¶</h4><p>åˆ†æå¦‚ä¸Šã€Šå‚ç›´è¿åŠ¨ä¸å»¶æ—¶ã€‹</p><h3 id="åˆ¤æ–­ä¸‰è§’åŒºå†…çš„æ–¹æ¡ˆ"><a href="#åˆ¤æ–­ä¸‰è§’åŒºå†…çš„æ–¹æ¡ˆ" class="headerlink" title="åˆ¤æ–­ä¸‰è§’åŒºå†…çš„æ–¹æ¡ˆ"></a>åˆ¤æ–­ä¸‰è§’åŒºå†…çš„æ–¹æ¡ˆ</h3><h4 id="æ–¹æ¡ˆè®¾è®¡"><a href="#æ–¹æ¡ˆè®¾è®¡" class="headerlink" title="æ–¹æ¡ˆè®¾è®¡"></a>æ–¹æ¡ˆè®¾è®¡</h4><p>é€šè¿‡mousemoveè®°å½•å…‰æ ‡çš„ç§»åŠ¨è·¯å¾„ï¼Œåœ¨å…¨å±€å†…å­˜å‚¨å…‰æ ‡ç§»åŠ¨è·¯å¾„ï¼ˆåæ ‡ç‚¹ï¼‰ï¼Œä»¥äºŒçº§èœå•åŒºåŸŸçš„å³ä¸Šè§’å’Œå³ä¸‹è§’ä½œä¸ºä¸‰è§’åŒºå†…äº®ç‚¹ï¼Œ<br>ç»™ä¸€çº§èœå•éƒ½ç»‘å®šmouseenterã€‚<br>å½“mouseenterè§¦å‘æ—¶ï¼Œå–å…¨å±€ç§»åŠ¨è·¯å¾„çš„æœ€åä¸¤ä¸ªç‚¹ï¼Œå€’æ•°ç¬¬äºŒä¸ªç‚¹ä¸ºä¸‰è§’åŒºç¬¬ä¸‰ä¸ªç‚¹ï¼Œæœ€åä¸€ä¸ªç‚¹ä¸ºpç‚¹ï¼Œåˆ¤æ–­pç‚¹æ˜¯å¦å¤„äºä¸Šé¢ä¸‰ä¸ªç‚¹æ„æˆçš„ä¸‰è§’åŒºå†…ã€‚</p><h4 id="document-ç»‘å®šmouseenter"><a href="#document-ç»‘å®šmouseenter" class="headerlink" title="document ç»‘å®šmouseenter"></a>document ç»‘å®šmouseenter</h4><p>ä»¥æ­¤è®°å½•å…‰æ ‡ç§»åŠ¨è·¯å¾„ï¼Œè¿™æ˜¯å¸¸è§„åšæ³•ã€‚è®°ä½ä¸ç”¨çš„æ—¶å€™éœ€è¦è§£ç»‘ã€‚</p><h4 id="ä¸€çº§èœå•mouseenterè§¦å‘æ—¶è®¡ç®—ä¸‰è§’åŒº"><a href="#ä¸€çº§èœå•mouseenterè§¦å‘æ—¶è®¡ç®—ä¸‰è§’åŒº" class="headerlink" title="ä¸€çº§èœå•mouseenterè§¦å‘æ—¶è®¡ç®—ä¸‰è§’åŒº"></a>ä¸€çº§èœå•mouseenterè§¦å‘æ—¶è®¡ç®—ä¸‰è§’åŒº</h4><p>å¦‚ä¸Šé¢ã€Šæ–¹æ¡ˆåˆ†æã€‹</p><h4 id="äºŒç»´å‘é‡å‰ä¹˜åˆ¤æ–­æ˜¯å¦åœ¨ä¸‰è§’å†…"><a href="#äºŒç»´å‘é‡å‰ä¹˜åˆ¤æ–­æ˜¯å¦åœ¨ä¸‰è§’å†…" class="headerlink" title="äºŒç»´å‘é‡å‰ä¹˜åˆ¤æ–­æ˜¯å¦åœ¨ä¸‰è§’å†…"></a>äºŒç»´å‘é‡å‰ä¹˜åˆ¤æ–­æ˜¯å¦åœ¨ä¸‰è§’å†…</h4><ul><li>å‘é‡ï¼šVab=Pb-Pa</li><li>äºŒç»´å‘é‡å‰ä¹˜å…¬å¼ï¼š<br>a(x1,y1)<em>b(x2,y2)=x1</em>y2-x2*y1</li><li>ç”¨å‰ä¹˜æ³•åˆ¤æ–­ç‚¹åœ¨ä¸‰è§’å½¢å†…<figure class="image-box">                <img src="/image/js_demo/delay_ang.jpg" alt title class>                <p></p>            </figure>ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­ a b æ˜¯å¦å…¨éƒ¨ä¸ºè´Ÿæ•° æˆ– æ­£æ•°ï¼›</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sameSign</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span>(a * b) &gt; <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vector</span>(<span class="params">p, b</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">x: b.x - p.x,</span><br><span class="line">y: b.y - p.y</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">vectorProduct</span>(<span class="params">v1, v2</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> v1.x * v2.y - v2.x * v1.y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPointInTrangle</span>(<span class="params">p, a, b, c</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> pa = vector(p, a)</span><br><span class="line"><span class="keyword">var</span> pb = vector(p, b)</span><br><span class="line"><span class="keyword">var</span> pc = vector(p, c)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> t1 = vectorProduct(pa, pb)</span><br><span class="line"><span class="keyword">var</span> t2 = vectorProduct(pb, pc)</span><br><span class="line"><span class="keyword">var</span> t3 = vectorProduct(pc, pa)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sameSign(t1, t2) &amp;&amp; sameSign(t2, t3)</span><br><span class="line">&#125;</span><br><span class="line">isPointInTrangle(currMousePos, leftCorner, topLeft, bottomLeft)</span><br></pre></td></tr></table></figure></li></ul><h4 id="äºŒçº§èœå•å®šä¹‰mouseenter"><a href="#äºŒçº§èœå•å®šä¹‰mouseenter" class="headerlink" title="äºŒçº§èœå•å®šä¹‰mouseenter"></a>äºŒçº§èœå•å®šä¹‰mouseenter</h4><p>äºŒçº§èœå•å®šä¹‰mouseenterï¼Œå½“é¼ æ ‡ç§»åˆ°äºŒçº§èœå•æ—¶ï¼Œè¯´æ˜äºŒçº§èœå•å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œæ­¤æ—¶ï¼Œåœ¨å»¶æ—¶å¤„ç†æ—¶ä¸åšä»»ä½•å¤„ç†ã€‚</p><h3 id="å…‰æ ‡è·¯å¾„ç§»åŠ¨è¶‹åŠ¿åˆ†æ"><a href="#å…‰æ ‡è·¯å¾„ç§»åŠ¨è¶‹åŠ¿åˆ†æ" class="headerlink" title="å…‰æ ‡è·¯å¾„ç§»åŠ¨è¶‹åŠ¿åˆ†æ"></a>å…‰æ ‡è·¯å¾„ç§»åŠ¨è¶‹åŠ¿åˆ†æ</h3><p>é€šè¿‡å…‰æ ‡ç§»åŠ¨çš„æœ€åä¸¤ä¸ªç‚¹ï¼Œæ¥åˆ¤æ–­å…‰æ ‡çš„ç§»åŠ¨æ–¹å‘(è¶‹åŠ¿)ï¼Œè¿™ç‚¹éå¸¸å¦™ã€‚</p><h3 id="å‘é‡äºŒå‰ä¹˜"><a href="#å‘é‡äºŒå‰ä¹˜" class="headerlink" title="å‘é‡äºŒå‰ä¹˜"></a>å‘é‡äºŒå‰ä¹˜</h3><p>åªéœ€è¦çŸ¥é“åæ ‡ï¼Œå°±å¯ä»¥é€šè¿‡å‘é‡äºŒå‰ä¹˜çŸ¥é“æŸä¸€ç‚¹æ˜¯å¦å¤„äºåŒºåŸŸå†…ã€‚å¤ªå¦™ã€‚</p><h3 id="tabäºŒçº§èœå•æ˜¾ç¤ºæ–¹æ¡ˆ"><a href="#tabäºŒçº§èœå•æ˜¾ç¤ºæ–¹æ¡ˆ" class="headerlink" title="tabäºŒçº§èœå•æ˜¾ç¤ºæ–¹æ¡ˆ"></a>tabäºŒçº§èœå•æ˜¾ç¤ºæ–¹æ¡ˆ</h3><h4 id="äºŒçº§èœå•æ ·å¼éƒ½ä¸€æ ·"><a href="#äºŒçº§èœå•æ ·å¼éƒ½ä¸€æ ·" class="headerlink" title="äºŒçº§èœå•æ ·å¼éƒ½ä¸€æ ·"></a>äºŒçº§èœå•æ ·å¼éƒ½ä¸€æ ·</h4><p>äºŒçº§èœå•çš„å¸ƒå±€æ ·å¼éƒ½ä¸€æ ·ï¼ˆå¤§å°å®½é«˜ç­‰ï¼‰ï¼Œéœ€è¦æ˜¾ç¤ºå“ªä¸€ä¸ªæ—¶ï¼Œdisplay blockï¼noneè¿›è¡Œåˆ‡æ¢ã€‚</p><h4 id="displayçš„noneï¼block"><a href="#displayçš„noneï¼block" class="headerlink" title="displayçš„noneï¼block"></a>displayçš„noneï¼block</h4><p>æ¯æ¬¡åªæ˜¾ç¤ºå¯¹åº”çš„äºŒçº§èœå•ï¼Œå…¶ä»–äºŒçº§èœå• display ï¼šnoneã€‚</p><h2 id="åŠ¨ç”»demo-åŠ-cssåŠ¨ç”»çŸ¥è¯†ç‚¹"><a href="#åŠ¨ç”»demo-åŠ-cssåŠ¨ç”»çŸ¥è¯†ç‚¹" class="headerlink" title="åŠ¨ç”»demo åŠ cssåŠ¨ç”»çŸ¥è¯†ç‚¹"></a>åŠ¨ç”»demo åŠ cssåŠ¨ç”»çŸ¥è¯†ç‚¹</h2><h3 id="ä¼šåŠ¨çš„å…”å…«å…¬-ä¸-step"><a href="#ä¼šåŠ¨çš„å…”å…«å…¬-ä¸-step" class="headerlink" title="ä¼šåŠ¨çš„å…”å…«å…¬ ä¸ step"></a>ä¼šåŠ¨çš„å…”å…«å…¬ ä¸ step</h3><h4 id="demoä¸æ•ˆæœ-4"><a href="#demoä¸æ•ˆæœ-4" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h4><p><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/rabbit.html">æŸ¥çœ‹demoæ•ˆæœ</a><br><a href="https://github.com/YeWills/canvas-demo/tree/master/pages/multy/css-animation/animation-master/html/rabbit.html" target="_blank" rel="noopener">demoåœ°å€</a><br><figure class="image-box">                <img src="/image/js_demo/rabbit.jpg" alt title class>                <p></p>            </figure></p><h4 id="stepæ˜¯é’ˆå¯¹keyframeså†…å®šä¹‰çš„æ¯ä¸ªç™¾åˆ†æ¯”çš„"><a href="#stepæ˜¯é’ˆå¯¹keyframeså†…å®šä¹‰çš„æ¯ä¸ªç™¾åˆ†æ¯”çš„" class="headerlink" title="stepæ˜¯é’ˆå¯¹keyframeså†…å®šä¹‰çš„æ¯ä¸ªç™¾åˆ†æ¯”çš„"></a>stepæ˜¯é’ˆå¯¹keyframeså†…å®šä¹‰çš„æ¯ä¸ªç™¾åˆ†æ¯”çš„</h4><p>ä¸‹é¢æœ‰æ–¹å¼ä¸€å’Œæ–¹å¼äºŒï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œ<br>stepæ˜¯é’ˆå¯¹keyframeså†…å®šä¹‰çš„æ¯ä¸ªç™¾åˆ†æ¯”çš„ï¼Œåœ¨æ–¹å¼ä¸€ä¸­keyframeså†…åªå®šä¹‰äº†ä¸€ä¸ª100%ï¼Œ<br>å› æ­¤æ­¥è¿›èŒƒå›´ä¸é€Ÿåº¦ä¸º 100%ï¼12<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹å¼ä¸€</span><br><span class="line"><span class="selector-class">.tuzi0</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: run2 <span class="number">0.2s</span> <span class="built_in">steps</span>(<span class="number">12</span>) infinite;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(./i/tuzi.png) no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> run2 &#123;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">background-position-x</span>: -<span class="number">2400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åœ¨æ–¹å¼äºŒä¸­keyframeså†…åªå®šä¹‰äº†ä¸€ä¸ª50% 100%ï¼Œ<br>åœ¨0åˆ°50%æ—¶ï¼Œæ­¥è¿›èŒƒå›´ä¸é€Ÿåº¦ä¸º 50%ï¼6ï¼›<br>åœ¨50%åˆ°100%æ—¶ï¼Œæ­¥è¿›èŒƒå›´ä¸é€Ÿåº¦ä¸º(100%-50%)ï¼6ï¼›<br>å› æ­¤æ–¹å¼ä¸€æ–¹å¼äºŒæ•ˆæœä¸€è‡´ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//æ–¹å¼äºŒ</span><br><span class="line"><span class="selector-class">.tuzi</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: run <span class="number">0.2s</span> <span class="built_in">steps</span>(<span class="number">6</span>) infinite;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(./i/tuzi.png) no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> run &#123;</span><br><span class="line">  50% &#123;</span><br><span class="line">    <span class="attribute">background-position-x</span>: -<span class="number">1200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">background-position-x</span>: -<span class="number">2400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="stepçš„ä¸€äº›è®¤è¯†"><a href="#stepçš„ä¸€äº›è®¤è¯†" class="headerlink" title="stepçš„ä¸€äº›è®¤è¯†"></a>stepçš„ä¸€äº›è®¤è¯†</h4><p>åŠ¨ç”»ç‰‡ä¸€å®šè¦ç”¨stepï¼Œæ¯”å¦‚loading demoï¼›<br>loadingä¸ºä»€ä¹ˆå®šä¹‰æˆçº¿æ€§æ—¶é—´å‡½æ•°æ—¶ï¼Œä¼šå‡ºç°æ™•çœ¼çš„æƒ…å†µï¼Œæ˜¯å› ä¸ºä¸¤ä¸ªåŸå› ï¼š<br>ä¸Šä¸€ä¸ªloadingåˆ»åº¦åˆ°ä¸‹ä¸€ä¸ªstepæ—¶ï¼Œæ²¡æœ‰å®Œå…¨è¸©åœ¨ä¸Šä¸€æ­¥stepçš„è„šå°ä¸Šï¼Œä¼šä¹±ï¼ŒåŒæ—¶ä¹Ÿä¼šé€ æˆæ™•çœ¼ï¼›<br>åä¹‹æ¨ç®—å‡ºï¼Œè¦å®ç°è¿™ç§æ‹æµªæˆ–loadingçš„æ•ˆæœï¼Œæˆ–è·‘ç«è½¦çš„æ•ˆæœï¼Œå°±åªèƒ½å®Œå…¨è¸©åœ¨ä¸Šä¸€æ­¥çš„è„šå°ä¸Šçš„æ–¹æ¡ˆã€‚</p><h4 id="stepæ›´é€‚åˆåŠ¨ç”»ç‰‡ç›¸å…³åœºæ™¯"><a href="#stepæ›´é€‚åˆåŠ¨ç”»ç‰‡ç›¸å…³åœºæ™¯" class="headerlink" title="stepæ›´é€‚åˆåŠ¨ç”»ç‰‡ç›¸å…³åœºæ™¯"></a>stepæ›´é€‚åˆåŠ¨ç”»ç‰‡ç›¸å…³åœºæ™¯</h4><p>å‚è€ƒä¸Šé¢ã€Šä¼šåŠ¨çš„å…”å…«å…¬ ä¸ stepã€‹è®²è§£ã€‚</p><h3 id="loadingæ•ˆæœ-step"><a href="#loadingæ•ˆæœ-step" class="headerlink" title="loadingæ•ˆæœ - step"></a>loadingæ•ˆæœ - step</h3><h4 id="demoä¸æ•ˆæœ-5"><a href="#demoä¸æ•ˆæœ-5" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h4><p><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/loading.html">æŸ¥çœ‹demoæ•ˆæœ</a><br><a href="https://github.com/YeWills/canvas-demo/tree/master/pages/multy/css-animation/animation-master/html/loading.html" target="_blank" rel="noopener">demoåœ°å€</a></p><h4 id="stepæ—¶é—´å‡½æ•°çš„ç»å…¸åº”ç”¨"><a href="#stepæ—¶é—´å‡½æ•°çš„ç»å…¸åº”ç”¨" class="headerlink" title="stepæ—¶é—´å‡½æ•°çš„ç»å…¸åº”ç”¨"></a>stepæ—¶é—´å‡½æ•°çš„ç»å…¸åº”ç”¨</h4><p>çœ‹demoçš„æ•ˆæœå°±çŸ¥é“ï¼Œloadingå›¾ç‰‡æ˜¯ä¸€ä¸ª12ä¸ªåˆ»åº¦çš„åœ†ï¼Œä¸ºäº†ä¸æ™•å›¾æˆ–è€…æ··ä¹±ï¼Œæœ‰ä¸€ç§é€’è¿›çš„æ•ˆæœï¼Œå°±å¿…é¡»æ¯èµ°ä¸€ä¸ªstepï¼Œæ¯ä¸ªåˆ»åº¦è¸©åœ¨ä¸Šä¸€ä¸ªåˆ»åº¦çš„ä¸Šé¢ï¼Œè¿™æ ·å°±ä¸æ™•çœ¼ï¼Œå› æ­¤ï¼Œè®¾ç½®äº†step(12)ï¼Œæ¯ä¸ªstepæ—‹è½¬30åº¦ï¼›<br>è€ŒåŸå›¾çš„æ¯ä¸ªåˆ»åº¦ä¹‹é—´åˆšå¥½ä¹Ÿæ˜¯30åº¦ï¼›<br>å› æ­¤æ¯èµ°ä¸€ä¸ªstepï¼Œåˆšå¥½å®Œå…¨è¸©åœ¨ä¸Šä¸€ä¸ªåˆ»åº¦ä¸Šã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loading</span> &#123;</span><br><span class="line">       <span class="attribute">width</span>: <span class="number">108px</span>;</span><br><span class="line">       <span class="attribute">height</span>: <span class="number">108px</span>;</span><br><span class="line">       <span class="attribute">background</span>: <span class="built_in">url</span>(../css/i/loading.png) no-repeat;</span><br><span class="line">       <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">       <span class="attribute">animation</span>: round <span class="number">1s</span> <span class="built_in">steps</span>(<span class="number">12</span>) <span class="number">3</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">@keyframes</span> round &#123;</span><br><span class="line">       100% &#123;</span><br><span class="line">           <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">360deg</span>);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><h3 id="çº¢åŒ…é›¨"><a href="#çº¢åŒ…é›¨" class="headerlink" title="çº¢åŒ…é›¨"></a>çº¢åŒ…é›¨</h3><h4 id="demoä¸æ•ˆæœ-6"><a href="#demoä¸æ•ˆæœ-6" class="headerlink" title="demoä¸æ•ˆæœ"></a>demoä¸æ•ˆæœ</h4><p><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/rain.html">æŸ¥çœ‹demoæ•ˆæœ</a><br><a href="https://github.com/YeWills/canvas-demo/tree/master/pages/multy/css-animation/animation-master/html/rain.html" target="_blank" rel="noopener">demoåœ°å€</a></p><h4 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.content</span> <span class="selector-class">.yudi</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">-webkit-animation</span>: drops <span class="number">1.2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.54</span>, <span class="number">0</span>, <span class="number">0.18</span>, <span class="number">0.34</span>) infinite;</span><br><span class="line">          <span class="attribute">animation</span>: drops <span class="number">1.2s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.54</span>, <span class="number">0</span>, <span class="number">0.18</span>, <span class="number">0.34</span>) infinite;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(./i/hongbao.png) no-repeat;</span><br><span class="line">    <span class="comment">/* å› ä¸ºèƒŒæ™¯å›¾ç‰‡å°ºå¯¸å¤ªå¤§ï¼ŒèƒŒæ™¯å›¾ç‰‡å®½åº¦è‡ªé€‚åº”ï¼Œé«˜åº¦è®¾ç½®ä¸º60px */</span></span><br><span class="line">  <span class="attribute">background-size</span>: auto <span class="number">60px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> drops &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  20% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  90% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* å¯ä»¥è®¾ç½®translateYä¸º0ï¼Œè®¾ç½®ä¸º-10pxæœ‰ç«‹ä½“æ•ˆæœ */</span></span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translate3d</span>(<span class="number">10px</span>, <span class="number">100vh</span>, -<span class="number">10px</span>);</span><br><span class="line">            <span class="attribute">transform</span>: <span class="built_in">translate3d</span>(<span class="number">10px</span>, <span class="number">100vh</span>, -<span class="number">10px</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $content = $(<span class="string">'.content'</span>);</span><br><span class="line">   <span class="keyword">let</span> initNumber = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">30</span>;i++)&#123;</span><br><span class="line">       <span class="keyword">let</span> lefts =<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">5</span>+<span class="number">2</span>);</span><br><span class="line">       <span class="keyword">let</span> delay = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">50</span>+<span class="number">2</span>)</span><br><span class="line">       initNumber+= lefts;</span><br><span class="line">       <span class="keyword">let</span> $div = $(<span class="string">'&lt;div/&gt;'</span>).addClass(<span class="string">'yudi'</span>).css(&#123;</span><br><span class="line">           <span class="string">"left"</span>:<span class="string">`<span class="subst">$&#123;initNumber&#125;</span>%`</span>,</span><br><span class="line">           <span class="string">"top"</span>:<span class="string">`<span class="subst">$&#123;lefts&#125;</span>%`</span>,</span><br><span class="line">           <span class="string">"animation-delay"</span>:<span class="string">`<span class="subst">$&#123;delay<span class="regexp">/10&#125;s`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">       &#125;);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">       $content.append($div);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">   &#125;</span></span></span></span><br></pre></td></tr></table></figure><h4 id="animation-delayçš„åº”ç”¨"><a href="#animation-delayçš„åº”ç”¨" class="headerlink" title="animation-delayçš„åº”ç”¨"></a>animation-delayçš„åº”ç”¨</h4><p>è§ä¸Šé¢ä»£ç </p><h4 id="position-relative-ä¸-absoluteçš„æ–¹æ¡ˆ"><a href="#position-relative-ä¸-absoluteçš„æ–¹æ¡ˆ" class="headerlink" title="position: relative ä¸ absoluteçš„æ–¹æ¡ˆ;"></a>position: relative ä¸ absoluteçš„æ–¹æ¡ˆ;</h4><p>è§æºç </p><h4 id="å½©è›‹-background-size"><a href="#å½©è›‹-background-size" class="headerlink" title="å½©è›‹ - background-size"></a>å½©è›‹ - background-size</h4><p>è§ä¸Šé¢ä»£ç </p><h3 id="animationçš„æ—¶é—´å‡½æ•°"><a href="#animationçš„æ—¶é—´å‡½æ•°" class="headerlink" title="animationçš„æ—¶é—´å‡½æ•°"></a>animationçš„æ—¶é—´å‡½æ•°</h3><h4 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>ä¸‹é¢çš„ease-in-outå°±æ˜¯æ—¶é—´å‡½æ•°ï¼Œanimationçš„æ—¶é—´å‡½æ•°åˆ†ä¸ºçº¿æ€§æ—¶é—´å‡½æ•°ä¸éçº¿æ€§ï¼›<br>çº¿æ€§æ—¶é—´å‡½æ•°å…¨éƒ¨æ˜¯ä¸‰æ¬¡è´å¡å°”å‡½æ•°(æµè§ˆå™¨æ§åˆ¶å°è°ƒè¯•cssæ—¶é—´å‡½æ•°æ—¶ï¼Œé€šå¸¸æ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ªä¸‰æ¬¡è´å¡å°”å‡½æ•°æ­£å¥½å°è¯äº†è¿™ä¸€ç‚¹)ï¼Œ<br>éçº¿æ€§æ—¶é—´å‡½æ•°ä¸»è¦æŒ‡stepã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.tuzi</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">animation</span>: run <span class="number">0.2s</span> ease-in-out infinite;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(./i/tuzi.png) no-repeat;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="çº¿æ€§å‡½æ•°-ä¸‰æ¬¡è´å¡å°”å‡½æ•°bezier"><a href="#çº¿æ€§å‡½æ•°-ä¸‰æ¬¡è´å¡å°”å‡½æ•°bezier" class="headerlink" title="çº¿æ€§å‡½æ•° - ä¸‰æ¬¡è´å¡å°”å‡½æ•°bezier"></a>çº¿æ€§å‡½æ•° - ä¸‰æ¬¡è´å¡å°”å‡½æ•°bezier</h4><p>animationçš„çº¿æ€§æ—¶é—´å‡½æ•°éƒ½æ˜¯ä¸‰æ¬¡è´å¡å°”å‡½æ•°(cubic-bezier)ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.demo-3</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">40px</span> auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">animation</span>: jump <span class="number">1s</span> <span class="built_in">cubic-bezier</span>(<span class="number">0.41</span>, -<span class="number">0.04</span>, <span class="number">0.93</span>, <span class="number">0.29</span>) infinite alternate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ‰ä¸€äº›å¸¸è§„çš„cubic-bezier(x, x, x, x)å€¼ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨linear ease ease-in ease-out ease-in-outè¿™äº›å…³é”®å­—æ¥è¡¨ç¤ºï¼Œè¿™äº›å…³é”®å­—ä¹Ÿç§°ä¹‹ä¸ºé¢„è®¾å€¼ã€‚<br>å°±å¥½æ¯” æˆ‘ä»¬ç”¨ black å…³é”®å­—è¡¨ç¤º #000000 è¿™ç§é¢œè‰²ä¸€æ ·ã€‚</p><h4 id="éçº¿æ€§å‡½æ•°-step"><a href="#éçº¿æ€§å‡½æ•°-step" class="headerlink" title="éçº¿æ€§å‡½æ•° - step"></a>éçº¿æ€§å‡½æ•° - step</h4><p>æ—¶é—´å‡½æ•°çš„éçº¿æ€§å‡½æ•°ä¸€èˆ¬ç”¨stepï¼Œå‚è€ƒä¸Šé¢çš„è®²è§£ã€‚</p><h4 id="é¢„è®¾å€¼linear-ease"><a href="#é¢„è®¾å€¼linear-ease" class="headerlink" title="é¢„è®¾å€¼linear ease .."></a>é¢„è®¾å€¼linear ease ..</h4><p>å‚è€ƒä¸Šé¢ã€Šçº¿æ€§å‡½æ•°-ä¸‰æ¬¡è´å¡å°”å‡½æ•°bezierã€‹</p><h4 id="æ—¶é—´å‡½æ•°çš„æ§åˆ¶å°è°ƒè¯•"><a href="#æ—¶é—´å‡½æ•°çš„æ§åˆ¶å°è°ƒè¯•" class="headerlink" title="æ—¶é—´å‡½æ•°çš„æ§åˆ¶å°è°ƒè¯•"></a>æ—¶é—´å‡½æ•°çš„æ§åˆ¶å°è°ƒè¯•</h4><p>è°·æ­Œæµè§ˆå™¨æä¾›äº†å¼ºå¤§çš„cssæ—¶é—´å‡½æ•°è°ƒè¯•åŠŸèƒ½ï¼Œå‚è€ƒ<a href="https://beat-the-buzzer.github.io/2019/11/27/c3-animation/" target="_blank" rel="noopener">ä¸€ä½æœ‹å‹çš„åšå®¢ - CSS3 åŠ¨ç”»</a></p><h4 id="åŠ¨ç”»ç›‘å¬äº‹ä»¶animationstartç­‰ç­‰"><a href="#åŠ¨ç”»ç›‘å¬äº‹ä»¶animationstartç­‰ç­‰" class="headerlink" title="åŠ¨ç”»ç›‘å¬äº‹ä»¶animationstartç­‰ç­‰"></a>åŠ¨ç”»ç›‘å¬äº‹ä»¶animationstartç­‰ç­‰</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/animation-master/html/rabbit.html" target="_blank" rel="noopener">demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/animation-master/html/rabbit.html">demoæ•ˆæœ</a><br>ç”¨è¿™ä¸ªçš„æ—¶å€™ï¼Œæ³¨æ„ä»¥ä¸‹å…¼å®¹é—®é¢˜ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$loading.addEventListener(<span class="string">'animationstart'</span>,runstart);</span><br><span class="line">$loading.addEventListener(<span class="string">'webkitAnimationStart'</span>,runstart);</span><br><span class="line">$loading.addEventListener(<span class="string">'animationend'</span>,runend)</span><br><span class="line">$loading.addEventListener(<span class="string">'animationiteration'</span>,intertation)</span><br></pre></td></tr></table></figure></p><h2 id="è™šæ‹Ÿåˆ—è¡¨"><a href="#è™šæ‹Ÿåˆ—è¡¨" class="headerlink" title="è™šæ‹Ÿåˆ—è¡¨"></a>è™šæ‹Ÿåˆ—è¡¨</h2><h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><p>å†™ä¸€ä¸ªdivï¼Œå†…éƒ¨æœ‰ä¸¤ä¸ªdivï¼Œä¸€ä¸ªç”¨äºæ’‘å¼€é«˜åº¦ï¼Œè®©æ»šåŠ¨æ¡çœŸå®æ˜¾ç¤ºï¼Œä¸è¿‡éšè—æ˜¾ç¤ºï¼›<br>ä¸€ä¸ªç”¨äºçœŸæ­£æ¸²æŸ“æ•°æ®çš„divï¼›<br>ä¸‹é¢ç›‘å¬æ•´ä¸ªdivçš„ scrolläº‹ä»¶ï¼Œé€šè¿‡æ»‘åŠ¨è·ç¦»scrollTopï¼Œè®¡ç®—å®æ—¶æ˜¾ç¤ºçš„æ•°æ®ã€‚<br>ä¸»è¦é€šè¿‡scrollTopä¸æ¯æ¡æ•°æ®é«˜åº¦è¿›è¡Œè®¡ç®—æ­¤æ—¶scrollTopåº”è¯¥ä½äºå“ªä¸ªstart indexï¼Œç„¶åé€šè¿‡æ•´ä¸ªdivé«˜åº¦ï¼Œè®¡ç®—å‡ºend indexï¼Œ å®æ—¶æ”¹å˜æ¸²æŸ“çš„dataã€‚<br>æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦é€šè¿‡Transformæ¥æ¨¡æ‹Ÿæ»šåŠ¨çš„è¿™ä¸ªæŠ€å·§ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">updateVisibleData(scrollTop) &#123;</span><br><span class="line">   scrollTop = scrollTop || <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">const</span> visibleCount = <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.$el.clientHeight / <span class="keyword">this</span>.itemHeight);</span><br><span class="line">     <span class="keyword">const</span> start = <span class="built_in">Math</span>.floor(scrollTop / <span class="keyword">this</span>.itemHeight);</span><br><span class="line">     <span class="keyword">const</span> end = start + visibleCount;</span><br><span class="line">     <span class="keyword">this</span>.visibleData = <span class="keyword">this</span>.data.slice(start, end);</span><br><span class="line">     <span class="keyword">this</span>.$refs.content.style.webkitTransform = <span class="string">`translate3d(0, <span class="subst">$&#123; start * <span class="keyword">this</span>.itemHeight &#125;</span>px, 0)`</span>;</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="cssä¸htmlè®¾è®¡"><a href="#cssä¸htmlè®¾è®¡" class="headerlink" title="cssä¸htmlè®¾è®¡"></a>cssä¸htmlè®¾è®¡</h3><figure class="image-box">                <img src="/image/js_demo/list.png" alt title class>                <p></p>            </figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-view"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- æ’‘å¼€å…¨éƒ¨é•¿åº¦ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-view-phantom"</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å®é™…æ˜¾ç¤ºå†…å®¹åŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"list-view-content"</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-view</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: auto;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#aaa</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.list-view-phantom</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶æ»šåŠ¨åœ¨list-view-contentï¼Œä½†ä¼šå†’æ³¡åˆ° çˆ¶å±‚ï¼›<br>å½“æ»šåŠ¨å‘ç”Ÿæ—¶ï¼Œ.list-view-content ä¹Ÿéšç€æ»šåŠ¨ä¸Šå»ï¼Œå› ä¸ºæˆ‘ä»¬åªç»™.list-view-contentæ¸²æŸ“å¯è§†åŒºåŸŸé•¿åº¦ï¼Œæ»šåŠ¨å‘ç”Ÿæ—¶ï¼Œ.list-view-contentå†…å®¹å°†é©¬ä¸Šè¢«æ»šåŠ¨ä¸Šå»ï¼Œå†…å®¹éšè—çœ‹ä¸è§ï¼Œæ­¤æ—¶ï¼Œå°±å¿…é¡»ç»™.list-view-contentä¸€ä¸ª<code>webkitTransform = translate3d(0, ${ start * this.itemHeight }</code>. æ‰èƒ½è®©é¡µé¢æ­£å¸¸æ˜¾ç¤ºã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ç»å¯¹å®šä½,ç›´æ¥æ™®é€š */</span></span><br><span class="line"><span class="selector-class">.list-view-content</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é«˜åº¦ä¸å®šæ—¶"><a href="#é«˜åº¦ä¸å®šæ—¶" class="headerlink" title="é«˜åº¦ä¸å®šæ—¶"></a>é«˜åº¦ä¸å®šæ—¶</h3><h4 id="é¢„åˆ¤é«˜åº¦çš„ç­–ç•¥"><a href="#é¢„åˆ¤é«˜åº¦çš„ç­–ç•¥" class="headerlink" title="é¢„åˆ¤é«˜åº¦çš„ç­–ç•¥"></a>é¢„åˆ¤é«˜åº¦çš„ç­–ç•¥</h4><p>å‚è€ƒã€Šé«˜åº¦ä¸å®šæ—¶ï¼Œé¢„åˆ¤é«˜åº¦è®¾è®¡ä¸ºå›ºå®šé«˜åº¦ã€‹</p><h4 id="æ²¡æœ‰æ»šåŠ¨åˆ°åº•æ—¶ï¼Œæ€»é«˜åº¦ä¸€ç›´åœ¨å˜"><a href="#æ²¡æœ‰æ»šåŠ¨åˆ°åº•æ—¶ï¼Œæ€»é«˜åº¦ä¸€ç›´åœ¨å˜" class="headerlink" title="æ²¡æœ‰æ»šåŠ¨åˆ°åº•æ—¶ï¼Œæ€»é«˜åº¦ä¸€ç›´åœ¨å˜"></a>æ²¡æœ‰æ»šåŠ¨åˆ°åº•æ—¶ï¼Œæ€»é«˜åº¦ä¸€ç›´åœ¨å˜</h4><p>é«˜åº¦ä¸å®šæ—¶ï¼Œä¸€ç›´æ»šåŠ¨ï¼Œæ€»é«˜åº¦ä¸€ç›´å˜ï¼Œè¿™æ—¶å› ä¸ºæ²¡æœ‰æ»šåŠ¨åˆ°åº•æ—¶ï¼Œæ€»é«˜åº¦ç”¨çš„æ˜¯é¢„åˆ¤é«˜åº¦ï¼Œè€Œé¢„åˆ¤é«˜åº¦ä¸å®é™…è®¡ç®—é«˜åº¦æœ‰å·®è·ã€‚<br>å½“æ»šåˆ°åº•åï¼Œä½¿ç”¨çš„æ˜¯ç¼“å­˜é«˜åº¦ï¼Œæ€»é«˜åº¦ä¸å˜ã€‚</p><h3 id="ä½ æƒ³ä¸åˆ°çš„"><a href="#ä½ æƒ³ä¸åˆ°çš„" class="headerlink" title="ä½ æƒ³ä¸åˆ°çš„"></a>ä½ æƒ³ä¸åˆ°çš„</h3><h4 id="ç›‘å¬åˆ°çš„scrollTopå€¼ç”¨äºlist-viewåç§»æ—¶éå¸¸ç²¾ç¡®"><a href="#ç›‘å¬åˆ°çš„scrollTopå€¼ç”¨äºlist-viewåç§»æ—¶éå¸¸ç²¾ç¡®" class="headerlink" title="ç›‘å¬åˆ°çš„scrollTopå€¼ç”¨äºlist-viewåç§»æ—¶éå¸¸ç²¾ç¡®"></a>ç›‘å¬åˆ°çš„scrollTopå€¼ç”¨äºlist-viewåç§»æ—¶éå¸¸ç²¾ç¡®</h4><p>ç›‘å¬åˆ°çˆ¶å±‚åˆ°scrolltopå€¼ï¼Œç”¨äºç»™list-viewåç§»ï¼Œéå¸¸ç²¾ç¡®ï¼Œå§‹ç»ˆè®©list-viewåŸºæœ¬ä¸Šè¾¾åˆ°ä¸åä¸å€šæ­£å¸¸æ˜¾ç¤ºå†…å®¹åŒºã€‚</p><h4 id="é«˜åº¦ä¸å®šæ—¶ï¼Œé¢„åˆ¤é«˜åº¦è®¾è®¡ä¸ºå›ºå®šé«˜åº¦"><a href="#é«˜åº¦ä¸å®šæ—¶ï¼Œé¢„åˆ¤é«˜åº¦è®¾è®¡ä¸ºå›ºå®šé«˜åº¦" class="headerlink" title="é«˜åº¦ä¸å®šæ—¶ï¼Œé¢„åˆ¤é«˜åº¦è®¾è®¡ä¸ºå›ºå®šé«˜åº¦"></a>é«˜åº¦ä¸å®šæ—¶ï¼Œé¢„åˆ¤é«˜åº¦è®¾è®¡ä¸ºå›ºå®šé«˜åº¦</h4><p>å½“é«˜åº¦ä¸å®šæ—¶ï¼Œéœ€è¦é¢„å…ˆè®¡ç®—ä½ç½®çš„å‰©ä½™indexé«˜åº¦ï¼Œè¿™äº›é«˜åº¦è™½ç„¶å®é™…é«˜åº¦ä¸ä¸€æ ·ï¼Œä½†åœ¨æœªæ»šåŠ¨åˆ°å‰ï¼Œä¸€å¾‹è®¾å®šä¸€ä¸ªé»˜è®¤é«˜åº¦ï¼Œ<br>ç”¨äºè®¡ç®—æ•´ä¸ªåˆ—è¡¨é«˜åº¦ã€‚</p><h4 id="å¦‚ä½•ä¿è¯æ»šåŠ¨æ¡æ­£å¸¸é«˜åº¦"><a href="#å¦‚ä½•ä¿è¯æ»šåŠ¨æ¡æ­£å¸¸é«˜åº¦" class="headerlink" title="å¦‚ä½•ä¿è¯æ»šåŠ¨æ¡æ­£å¸¸é«˜åº¦"></a>å¦‚ä½•ä¿è¯æ»šåŠ¨æ¡æ­£å¸¸é«˜åº¦</h4><figure class="image-box">                <img src="/image/js_demo/scroll.png" alt title class>                <p></p>            </figure><p>è§£å†³ä¹‹é“åœ¨äºè¦è®¾è®¡ä¸€ä¸ªdivæ¡†æ‹¥æœ‰å®é™…åˆ—è¡¨æ€»é•¿ï¼Œéšè—è¿™ä¸ªdivï¼Œä½†åˆè®©æ­¤divæ’‘å¼€çˆ¶å±‚ï¼Œå› æ­¤è®¾è®¡z-index  -1 ã€‚</p><h4 id="è¦è®¾è®¡ä¸€ä¸ªdivæ¡†æ‹¥æœ‰å®é™…åˆ—è¡¨æ€»é•¿"><a href="#è¦è®¾è®¡ä¸€ä¸ªdivæ¡†æ‹¥æœ‰å®é™…åˆ—è¡¨æ€»é•¿" class="headerlink" title="è¦è®¾è®¡ä¸€ä¸ªdivæ¡†æ‹¥æœ‰å®é™…åˆ—è¡¨æ€»é•¿"></a>è¦è®¾è®¡ä¸€ä¸ªdivæ¡†æ‹¥æœ‰å®é™…åˆ—è¡¨æ€»é•¿</h4><p>å‚è€ƒã€Šå¦‚ä½•ä¿è¯æ»šåŠ¨æ¡æ­£å¸¸é«˜åº¦ã€‹</p><h4 id="ä¸ç”¨æ‹…å¿ƒçˆ¶å±‚æ»šåŠ¨æ¡è¢«é®ä½é—®é¢˜"><a href="#ä¸ç”¨æ‹…å¿ƒçˆ¶å±‚æ»šåŠ¨æ¡è¢«é®ä½é—®é¢˜" class="headerlink" title="ä¸ç”¨æ‹…å¿ƒçˆ¶å±‚æ»šåŠ¨æ¡è¢«é®ä½é—®é¢˜"></a>ä¸ç”¨æ‹…å¿ƒçˆ¶å±‚æ»šåŠ¨æ¡è¢«é®ä½é—®é¢˜</h4><p>å°±ç®—ä½ æœ‰å¤šå±‚divå åŠ ï¼Œä¸Šå±‚divä¹Ÿä¸ä¼šè¦†ç›–çˆ¶å±‚æ»šåŠ¨æ¡ï¼Œæµè§ˆå™¨åªä¼šè®©æ»šåŠ¨æ¡åœ¨å³ä¾§å†å¢åŠ ä¸ªä½ç½®æ”¾ç½®æ»šåŠ¨æ¡ã€‚</p><h4 id="è¢«è¯¯è§£çš„æ»šåŠ¨æ¡é®ä½é—®é¢˜"><a href="#è¢«è¯¯è§£çš„æ»šåŠ¨æ¡é®ä½é—®é¢˜" class="headerlink" title="è¢«è¯¯è§£çš„æ»šåŠ¨æ¡é®ä½é—®é¢˜"></a>è¢«è¯¯è§£çš„æ»šåŠ¨æ¡é®ä½é—®é¢˜</h4><p>ä¸€å¼€å§‹ä»¥ä¸ºå¦‚æœä¸Šå±‚ left 0  right 0 æ—¶ï¼Œçˆ¶å±‚çš„æ»šåŠ¨æ¡ä¼šè¢«é®ä½ï¼Œåæ¥å‘ç°æ˜¯å¯¹æµè§ˆå™¨çš„æ»šåŠ¨è¡Œä¸ºè¯¯è§£äº†ã€‚<br>å‚è€ƒä¸Šé¢ã€Šä¸ç”¨æ‹…å¿ƒçˆ¶å±‚æ»šåŠ¨æ¡è¢«é®ä½é—®é¢˜ã€‹</p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><h4 id="é«˜åº¦ä¸€è‡´æœ€å¥½"><a href="#é«˜åº¦ä¸€è‡´æœ€å¥½" class="headerlink" title="é«˜åº¦ä¸€è‡´æœ€å¥½"></a>é«˜åº¦ä¸€è‡´æœ€å¥½</h4><p>é«˜åº¦ä¸€è‡´ï¼Œæ„å‘³ç€ä¸ç”¨é‡æ–°è®¡ç®—å…¨éƒ¨æ¡æ•°æ®é«˜åº¦ï¼Œå•å‡­æ•°æ®lengthå³å¯è®¡ç®—ï¼Œæ€§èƒ½æœ€é«˜ã€‚</p><h4 id="æ‹“å±•ï¼šé«˜åº¦ä¸ä¸€è‡´ã€ç¼“å­˜è®¡ç®—"><a href="#æ‹“å±•ï¼šé«˜åº¦ä¸ä¸€è‡´ã€ç¼“å­˜è®¡ç®—" class="headerlink" title="æ‹“å±•ï¼šé«˜åº¦ä¸ä¸€è‡´ã€ç¼“å­˜è®¡ç®—"></a>æ‹“å±•ï¼šé«˜åº¦ä¸ä¸€è‡´ã€ç¼“å­˜è®¡ç®—</h4><p>å¦‚æœé«˜åº¦ä¸ä¸€è‡´æ—¶ï¼Œå°±éœ€è¦åšç¼“å­˜è®¡ç®—ï¼Œå¦åˆ™æ¯”è¾ƒè€—æ€§èƒ½ï¼Œ</p><h3 id="å‚è€ƒ-ä¸-æºç "><a href="#å‚è€ƒ-ä¸-æºç " class="headerlink" title="å‚è€ƒ ä¸ æºç "></a>å‚è€ƒ ä¸ æºç </h3><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://juejin.im/post/6844903577807241223" target="_blank" rel="noopener">å‚è€ƒåšå®¢</a><br><a href="https://www.bilibili.com/s/video/BV1qz4y1o7QA" target="_blank" rel="noopener">å…ˆçœ‹åŸç†è§†é¢‘</a></p><h4 id="æºç å¦‚ä¸‹"><a href="#æºç å¦‚ä¸‹" class="headerlink" title="æºç å¦‚ä¸‹"></a>æºç å¦‚ä¸‹</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.list-view</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#aaa</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-view-phantom</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-view-content</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.list-view-item</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//unpkg.com/vue@2.5.15/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/x-template"</span> <span class="attr">id</span>=<span class="string">"list-template"</span>&gt;</span></span><br><span class="line">  &lt;div </span><br><span class="line"><span class="javascript">    <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-view"</span> </span></span><br><span class="line"><span class="javascript">    ref=<span class="string">"list"</span> </span></span><br><span class="line"><span class="javascript">    @scroll=<span class="string">"handleScroll"</span>&gt;</span></span><br><span class="line"><span class="xml">     <span class="comment">&lt;!-- ç”¨äºæ’‘å¼€é«˜åº¦ï¼Œéšè—æ˜¾ç¤ºï¼Œè¿™ä¸ªæ˜¯å…¨éƒ¨æ•°æ®çš„é•¿åº¦ --&gt;</span></span></span><br><span class="line">    &lt;div     </span><br><span class="line"><span class="javascript">      <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-view-phantom"</span>       </span></span><br><span class="line">      :style="&#123;</span><br><span class="line">         height: contentHeight</span><br><span class="line">      &#125;"&gt;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- è¦†ç›–ä¸Šé¢çš„divï¼Œçˆ¶çº§ç›‘å¬scrollï¼Œå®æ—¶è®¾ç½®transformé©±åŠ¨æ­¤divï¼Œæ¨¡æ‹Ÿæ»šåŠ¨ï¼Œä¹Ÿç§°è™šæ‹Ÿæ»šåŠ¨ --&gt;</span></span></span><br><span class="line">    &lt;div</span><br><span class="line"><span class="javascript">      ref=<span class="string">"content"</span></span></span><br><span class="line"><span class="javascript">      <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-view-content"</span>&gt;</span></span><br><span class="line">      &lt;div</span><br><span class="line"><span class="javascript">        <span class="class"><span class="keyword">class</span></span>=<span class="string">"list-view-item"</span></span></span><br><span class="line">        :style="&#123;</span><br><span class="line"><span class="javascript">          height: itemHeight + <span class="string">'px'</span></span></span><br><span class="line">        &#125;"</span><br><span class="line"><span class="javascript">        v-<span class="keyword">for</span>=<span class="string">"item in visibleData"</span>&gt;</span></span><br><span class="line">        &#123;&#123; item.value &#125;&#125;</span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">list-view</span> <span class="attr">:data</span>=<span class="string">"data"</span>&gt;</span><span class="tag">&lt;/<span class="name">list-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ListView = &#123;</span><br><span class="line">name: <span class="string">'ListView'</span>,</span><br><span class="line"></span><br><span class="line">  template: <span class="string">'#list-template'</span>,</span><br><span class="line"></span><br><span class="line">props: &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    type: <span class="built_in">Array</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    itemHeight: &#123;</span><br><span class="line">      type: <span class="built_in">Number</span>,</span><br><span class="line">      <span class="keyword">default</span>: <span class="number">30</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  computed: &#123;</span><br><span class="line">  contentHeight() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.data.length * <span class="keyword">this</span>.itemHeight + <span class="string">'px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mounted() &#123;</span><br><span class="line">    <span class="keyword">this</span>.updateVisibleData();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      visibleData: []</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">  updateVisibleData(scrollTop) &#123;</span><br><span class="line">    scrollTop = scrollTop || <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> visibleCount = <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.$el.clientHeight / <span class="keyword">this</span>.itemHeight);</span><br><span class="line">      <span class="keyword">const</span> start = <span class="built_in">Math</span>.floor(scrollTop / <span class="keyword">this</span>.itemHeight);</span><br><span class="line">      <span class="keyword">const</span> end = start + visibleCount;</span><br><span class="line">      <span class="keyword">this</span>.visibleData = <span class="keyword">this</span>.data.slice(start, end);</span><br><span class="line">      <span class="keyword">this</span>.$refs.content.style.webkitTransform = <span class="string">`translate3d(0, <span class="subst">$&#123; start * <span class="keyword">this</span>.itemHeight &#125;</span>px, 0)`</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    handleScroll() &#123;</span><br><span class="line">      <span class="keyword">const</span> scrollTop = <span class="keyword">this</span>.$el.scrollTop;</span><br><span class="line">      <span class="keyword">this</span>.updateVisibleData(scrollTop);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">  ListView</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">const</span> data = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">      data.push(&#123; <span class="attr">value</span>: i &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      data</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–demo"><a href="#å…¶ä»–demo" class="headerlink" title="å…¶ä»–demo"></a>å…¶ä»–demo</h2><h3 id="å›¾ç‰‡é¢„åŠ è½½"><a href="#å›¾ç‰‡é¢„åŠ è½½" class="headerlink" title="å›¾ç‰‡é¢„åŠ è½½"></a>å›¾ç‰‡é¢„åŠ è½½</h3><h4 id="æ–¹æ¡ˆè®¾è®¡-1"><a href="#æ–¹æ¡ˆè®¾è®¡-1" class="headerlink" title="æ–¹æ¡ˆè®¾è®¡"></a>æ–¹æ¡ˆè®¾è®¡</h4><p>é€šå¸¸çš„åšæ³•æ˜¯ï¼Œåœ¨é¡µé¢æ‰“å¼€åï¼Œå…ˆæ·»åŠ ä¸€ä¸ªè¿›åº¦æ¡ï¼Œç›‘å¬åŠ è½½è¿›åº¦ï¼Œè®¾ç½®new Image()ç”¨æ¥åŠ è½½ï¼ŒåŠ è½½å¥½åï¼Œå›¾ç‰‡å“ªé‡Œéœ€è¦å°±åœ¨srcèµ‹å€¼ä¸Šå³å¯ã€‚</p><h4 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h4><p>å›¾ç‰‡é€šè¿‡new Image()åŠ è½½åï¼Œä¸‹ä¸€æ¬¡åœ¨å…·ä½“ä½ç½®å†ä½¿ç”¨srcæ—¶ï¼Œå°±ä¸ç”¨ç­‰å¾…äº†ï¼Œç›´æ¥å°±å¯ä»¥ç”¨ã€‚å› æ­¤ä½¿ç”¨new Image() è¾¾åˆ°é¢„åŠ è½½ç›®çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">var images = [&#123;</span><br><span class="line">        url: &apos;https://github.com/CruxF/IMOOC/blob/master/ProImages/ImgPreloading01.jpg?raw=true&apos;,</span><br><span class="line">        name: &apos;æ— æ•Œç¾å°‘å¥³ä¸€å·&apos;</span><br><span class="line">      &#125;]</span><br><span class="line">  var $progress = $(&apos;.progress&apos;);</span><br><span class="line">      // éå†æ•°ç»„,iä»£è¡¨çš„æ˜¯æ•°ç»„ä¸‹æ ‡ï¼Œsrcä»£è¡¨çš„æ˜¯å¯¹åº”æ•°ç»„ä¸‹æ ‡çš„å¯¹è±¡æˆ–è€…å±æ€§å€¼</span><br><span class="line">      $.each(images, function(i, src) &#123;</span><br><span class="line">  //æ­¤imgObjä¸ä¼šä½¿ç”¨ï¼Œåªç”¨æ¥é¢„åŠ è½½</span><br><span class="line">        var imgObj = new Image();</span><br><span class="line">//å½“å›¾ç‰‡æœ‰ç¼“å­˜æ—¶ï¼Œä¸è§¦å‘loadäº‹ä»¶ï¼Œåªèƒ½ä½¿ç”¨erroræ¥ç›‘å¬å…¼å®¹æ­¤æƒ…å†µ</span><br><span class="line">        $(imgObj).on(&apos;load error&apos;, function() &#123;</span><br><span class="line">//é€šè¿‡å·²åŠ è½½çš„å›¾ç‰‡ä¸ªæ•°ç™¾åˆ†æ¯”æ¥åšè¿›åº¦æ¡</span><br><span class="line">          $progress.html(Math.round((count + 1) / len * 100) + &apos;%&apos;);</span><br><span class="line">          if(count &gt;= len - 1) &#123;</span><br><span class="line">            $(&apos;.loading&apos;).hide();</span><br><span class="line">          &#125;</span><br><span class="line">          count++;</span><br><span class="line">        &#125;);</span><br><span class="line">        imgObj.src = src.url;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">  //ä»¥åä½¿ç”¨æ—¶ï¼Œç›´æ¥èµ‹ç»™srcï¼Œæ­¤æ—¶å› ä¸ºä¹‹å‰å·²ç»åŠ è½½è¿‡ï¼Œæ­¤æ—¶ä¸ä¼šå†æ¬¡åå°è¯·æ±‚ï¼Œç›´æ¥ç§’æ˜¾ç¤º</span><br><span class="line">   $(&apos;#img&apos;).attr(&#123;</span><br><span class="line">          &apos;src&apos;: images[index].url,</span><br><span class="line">          &apos;title&apos;: images[index].name,</span><br><span class="line">          &apos;alt&apos;: images[index].name</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></p><h4 id="æ‰€æœ‰å›¾ç‰‡æå‰åˆ°é¡µé¢åˆå§‹æ—¶ä¸€èµ·åŠ è½½"><a href="#æ‰€æœ‰å›¾ç‰‡æå‰åˆ°é¡µé¢åˆå§‹æ—¶ä¸€èµ·åŠ è½½" class="headerlink" title="æ‰€æœ‰å›¾ç‰‡æå‰åˆ°é¡µé¢åˆå§‹æ—¶ä¸€èµ·åŠ è½½"></a>æ‰€æœ‰å›¾ç‰‡æå‰åˆ°é¡µé¢åˆå§‹æ—¶ä¸€èµ·åŠ è½½</h4><p>å‚è€ƒã€ŠåŸç†ã€‹</p><h4 id="å›¾ç‰‡åŠ è½½ç™¾åˆ†æ¯”è¿›åº¦æ–¹æ¡ˆ"><a href="#å›¾ç‰‡åŠ è½½ç™¾åˆ†æ¯”è¿›åº¦æ–¹æ¡ˆ" class="headerlink" title="å›¾ç‰‡åŠ è½½ç™¾åˆ†æ¯”è¿›åº¦æ–¹æ¡ˆ"></a>å›¾ç‰‡åŠ è½½ç™¾åˆ†æ¯”è¿›åº¦æ–¹æ¡ˆ</h4><p>é€šè¿‡å·²åŠ è½½çš„å›¾ç‰‡ä¸ªæ•°ç™¾åˆ†æ¯”æ¥åšè¿›åº¦æ¡ï¼Œæ­¤æ–¹æ³•æ˜¯æ™®éåšæ³•ï¼Œè§ä¸Šé¢ä»£ç ã€ŠåŸç†ã€‹ï¼›</p><h4 id="è®¾ç½®new-Image"><a href="#è®¾ç½®new-Image" class="headerlink" title="è®¾ç½®new Image()"></a>è®¾ç½®new Image()</h4><p>å‚è€ƒã€ŠåŸç†ã€‹</p><h4 id="ç›‘å¬loadäº‹ä»¶"><a href="#ç›‘å¬loadäº‹ä»¶" class="headerlink" title="ç›‘å¬loadäº‹ä»¶"></a>ç›‘å¬loadäº‹ä»¶</h4><p>å‚è€ƒã€ŠåŸç†ã€‹</p><h4 id="ç›‘å¬erroräº‹ä»¶å…¼å®¹ç¼“å­˜"><a href="#ç›‘å¬erroräº‹ä»¶å…¼å®¹ç¼“å­˜" class="headerlink" title="ç›‘å¬erroräº‹ä»¶å…¼å®¹ç¼“å­˜"></a>ç›‘å¬erroräº‹ä»¶å…¼å®¹ç¼“å­˜</h4><p>å½“å›¾ç‰‡æœ‰ç¼“å­˜æ—¶ï¼Œä¸è§¦å‘loadäº‹ä»¶ï¼Œåªèƒ½ä½¿ç”¨erroræ¥ç›‘å¬å…¼å®¹æ­¤æƒ…å†µï¼Œå‚è€ƒã€ŠåŸç†ã€‹</p><h4 id="é¡µé¢è¦ç”¨æ—¶å†å–å€¼"><a href="#é¡µé¢è¦ç”¨æ—¶å†å–å€¼" class="headerlink" title="é¡µé¢è¦ç”¨æ—¶å†å–å€¼"></a>é¡µé¢è¦ç”¨æ—¶å†å–å€¼</h4><p>å‚è€ƒã€ŠåŸç†ã€‹</p><h4 id="loadä¸srcé¡ºåºæœ‰è®²ç©¶"><a href="#loadä¸srcé¡ºåºæœ‰è®²ç©¶" class="headerlink" title="loadä¸srcé¡ºåºæœ‰è®²ç©¶"></a>loadä¸srcé¡ºåºæœ‰è®²ç©¶</h4><p>ä¸Šé¢çš„ä»£ç ä¸­srcå¿…é¡»å†™åœ¨on(â€˜loadâ€™)ä¸‹é¢ï¼Œå…ˆloadï¼Œåsrcèµ‹å€¼ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€äº›éšè”½çš„é—®é¢˜ï¼Œæ¯”å¦‚å›¾ç‰‡ç¼“å­˜ç­‰ç­‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">var</span> imgObj = <span class="keyword">new</span> Image();</span><br><span class="line">$(imgObj).on(<span class="string">'load error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;);</span><br><span class="line">imgObj.src = src.url;</span><br></pre></td></tr></table></figure></p><h4 id="demoåœ°å€"><a href="#demoåœ°å€" class="headerlink" title="demoåœ°å€"></a>demoåœ°å€</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/ImgPreloading/index2-3_ok.html" target="_blank" rel="noopener">demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/ImgPreloading/index2-3_ok.html">demoæ•ˆæœ</a></p><h3 id="å¯è°ƒå¤§å°é¢æ¿å®ç°"><a href="#å¯è°ƒå¤§å°é¢æ¿å®ç°" class="headerlink" title="å¯è°ƒå¤§å°é¢æ¿å®ç°"></a>å¯è°ƒå¤§å°é¢æ¿å®ç°</h3><h4 id="demoä¸ä»‹ç»"><a href="#demoä¸ä»‹ç»" class="headerlink" title="demoä¸ä»‹ç»"></a>demoä¸ä»‹ç»</h4><p>æœ¬demoåŸºäº<a href="https://www.imooc.com/learn/193" target="_blank" rel="noopener">æ…•è¯¾ç½‘è§†é¢‘</a>ä¼˜åŒ–è€Œæ¥ï¼Œ<a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/resizeable.html" target="_blank" rel="noopener">demo åœ°å€</a> <a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/resizeable.html">demo æ•ˆæœ</a></p><h4 id="æ–¹æ¡ˆåˆ†æ"><a href="#æ–¹æ¡ˆåˆ†æ" class="headerlink" title="æ–¹æ¡ˆåˆ†æ"></a>æ–¹æ¡ˆåˆ†æ</h4><p>å¦‚ä¸‹å›¾ï¼Œè¦å®ç°å·¦ä¾§ï¼Œä¸‹è¾¹ï¼Œå³ä¸‹ä¾§ï¼Œä¸‰ä¸ªä½ç½®å¯ä»¥æ‹–åŠ¨ï¼Œ<br>å…·ä½“åšæ³•æ˜¯åœ¨è¿™ä¸‰ä¸ªåœ°æ–¹æ·»åŠ ä¸€ä¸ªçœ‹ä¸è§çš„æ‹–åŠ¨ç”¨çš„domï¼Œç»™è¿™ä¸‰ä¸ªdomç»‘å®šmouseäº‹ä»¶ï¼Œ<br>åœ¨mouseMoveä¸­å¯¹çŸ©å½¢æ¡†æŒç»­è®¾ç½®å®½é«˜æ ·å¼ï¼Œ<br>åŒæ—¶é€šè¿‡cssè®¾ç½®ä¸‰ä¸ªä½ç½®Domè·Ÿéšã€‚<br><figure class="image-box">                <img src="/image/js_demo/resizable.jpg" alt title class>                <p></p>            </figure><br>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><h4 id="è®¾ç½®å·¦ã€ä¸‹ã€å·¦ä¸‹ä¾§-æ‹–åŠ¨dom"><a href="#è®¾ç½®å·¦ã€ä¸‹ã€å·¦ä¸‹ä¾§-æ‹–åŠ¨dom" class="headerlink" title="è®¾ç½®å·¦ã€ä¸‹ã€å·¦ä¸‹ä¾§ æ‹–åŠ¨dom"></a>è®¾ç½®å·¦ã€ä¸‹ã€å·¦ä¸‹ä¾§ æ‹–åŠ¨dom</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">panelDom = document.getElementById(panelId);</span><br><span class="line">[&apos;right&apos;, &apos;bottom&apos;, &apos;lean&apos;].forEach(dragDomType=&gt;&#123;</span><br><span class="line">const dragDom = document.createElement(&quot;div&quot;);</span><br><span class="line">dragDom.class = dragDom.className   = `ui-Resizable-$&#123;dragDomType&#125; ui-Resizable-ctrl`;</span><br><span class="line">panelDom.appendChild(dragDom);</span><br><span class="line">dragDom.addEventListener(&apos;mousedown&apos;, onMousemove);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="cssè®¾ç½®æ‹–åŠ¨domæ ·å¼è·ŸéšçŸ©å½¢æ¡†"><a href="#cssè®¾ç½®æ‹–åŠ¨domæ ·å¼è·ŸéšçŸ©å½¢æ¡†" class="headerlink" title="cssè®¾ç½®æ‹–åŠ¨domæ ·å¼è·ŸéšçŸ©å½¢æ¡†"></a>cssè®¾ç½®æ‹–åŠ¨domæ ·å¼è·ŸéšçŸ©å½¢æ¡†</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.ui-Resizable-right&#123;</span><br><span class="line">position:absolute;</span><br><span class="line">right:0px;</span><br><span class="line">top:0px;</span><br><span class="line">width:10px;</span><br><span class="line">height:100%;</span><br><span class="line">cursor: e-resize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="mouseMoveä¸­æ”¹å˜çŸ©å½¢æ¡†å®½é«˜"><a href="#mouseMoveä¸­æ”¹å˜çŸ©å½¢æ¡†å®½é«˜" class="headerlink" title="mouseMoveä¸­æ”¹å˜çŸ©å½¢æ¡†å®½é«˜"></a>mouseMoveä¸­æ”¹å˜çŸ©å½¢æ¡†å®½é«˜</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">let newPanelWidth = panelDom.offsetWidth - 2 + moveDistance.x;</span><br><span class="line">let newPanelHeight = panelDom.offsetHeight - 2 + moveDistance.y;</span><br><span class="line">newPanelWidth = Math.max(newPanelWidth, 150);</span><br><span class="line">newPanelHeight = Math.max(newPanelHeight, 50);</span><br><span class="line">switch(mouseType)&#123;</span><br><span class="line">case &apos;movehorizontal&apos;:</span><br><span class="line">panelDom.style.width = newPanelWidth + &apos;px&apos;;</span><br><span class="line">break;</span><br><span class="line">case &apos;moveVertical&apos;:</span><br><span class="line">panelDom.style.height = newPanelHeight + &apos;px&apos;;</span><br><span class="line">break;</span><br><span class="line">case &apos;moveLean&apos;:</span><br><span class="line">panelDom.style.width = newPanelWidth + &apos;px&apos;;</span><br><span class="line">panelDom.style.height = newPanelHeight + &apos;px&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å›ºå®šä¾§è¾¹æ æ»šåŠ¨"><a href="#å›ºå®šä¾§è¾¹æ æ»šåŠ¨" class="headerlink" title="å›ºå®šä¾§è¾¹æ æ»šåŠ¨"></a>å›ºå®šä¾§è¾¹æ æ»šåŠ¨</h3><h4 id="demoä¸ä»‹ç»-1"><a href="#demoä¸ä»‹ç»-1" class="headerlink" title="demoä¸ä»‹ç»"></a>demoä¸ä»‹ç»</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/fixedSide/index.htm" target="_blank" rel="noopener">demo åœ°å€</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/fixedSide/index.htm">demo æ•ˆæœ</a></p><h4 id="éœ€æ±‚åˆ†æ-1"><a href="#éœ€æ±‚åˆ†æ-1" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h4><p>è¦æ±‚å³ä¾§çš„ä¾§è¾¹æ ï¼Œæ­£å¸¸æ»šåŠ¨çš„æ—¶å€™ï¼Œæ­£å¸¸æ»šåŠ¨ï¼›<br>å½“ä¾§è¾¹æ æ»šåˆ°åº•ï¼Œä½†å·¦ä¾§å†…å®¹è¿˜æœ‰ï¼Œéœ€è¦ç»§ç»­å¾€ä¸‹æ»šåŠ¨æ—¶ï¼Œå³ä¾§ä¾§è¾¹æ å›ºå®šæ˜¾ç¤ºæœ€åé¢ä¸€æ®µå†…å®¹ã€‚</p><h4 id="window-addEventListener-â€˜scrollâ€™-ç›‘å¬æ»šåŠ¨"><a href="#window-addEventListener-â€˜scrollâ€™-ç›‘å¬æ»šåŠ¨" class="headerlink" title="window.addEventListener(â€˜scrollâ€™)ç›‘å¬æ»šåŠ¨"></a>window.addEventListener(â€˜scrollâ€™)ç›‘å¬æ»šåŠ¨</h4><p>è®¾ç½®windowçš„æ»šåŠ¨äº‹ä»¶scrollï¼Œå½“å‘ç”Ÿæ»šåŠ¨æ—¶å®æ—¶ç›‘å¬å¹¶è®¾ç½®ä¾§è¾¹æ æ ·å¼ã€‚</p><h4 id="æ»šåŠ¨è·ç¦»-è§†å£é«˜åº¦-ä¸-ä¾§è¾¹æ å®é™…é«˜åº¦-æ¯”è¾ƒ"><a href="#æ»šåŠ¨è·ç¦»-è§†å£é«˜åº¦-ä¸-ä¾§è¾¹æ å®é™…é«˜åº¦-æ¯”è¾ƒ" class="headerlink" title="æ»šåŠ¨è·ç¦»+è§†å£é«˜åº¦ ä¸ ä¾§è¾¹æ å®é™…é«˜åº¦ æ¯”è¾ƒ"></a>æ»šåŠ¨è·ç¦»+è§†å£é«˜åº¦ ä¸ ä¾§è¾¹æ å®é™…é«˜åº¦ æ¯”è¾ƒ</h4><p>å½“ æ»šåŠ¨è·ç¦»+è§†å£é«˜åº¦ å¤§äº ä¾§è¾¹æ å®é™…é«˜åº¦ï¼Œå¯åŠ¨bottomä¸º0çš„ positionï¼šfixedï¼›<br>åä¹‹ï¼Œä¸€åˆ‡æ­£å¸¸ positionè®¾ç½®ä¸ºstaticã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sideHeight = domSider.offsetHeight;</span><br><span class="line"><span class="keyword">var</span> screenHeight =<span class="built_in">document</span>.documentElement.clientHeight||<span class="built_in">document</span>.body.clientHeight;</span><br><span class="line"><span class="keyword">var</span> scrollHeight = <span class="built_in">document</span>.documentElement.scrollTop||<span class="built_in">document</span>.body.scrollTop;</span><br><span class="line"><span class="comment">//è¿™ç§æ€æƒ³å€¼å¾—å€Ÿé‰´</span></span><br><span class="line"><span class="keyword">if</span>(scrollHeight+screenHeight&gt;sideHeight)&#123;</span><br><span class="line">domSider.style.cssText = <span class="string">'position:fixed;right:0px;bottom: 0px'</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">domSider.style.position=<span class="string">'static'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="scrollTopçš„åº”ç”¨"><a href="#scrollTopçš„åº”ç”¨" class="headerlink" title="scrollTopçš„åº”ç”¨"></a>scrollTopçš„åº”ç”¨</h4><p>å‚è€ƒä¸Šé¢ã€Šæ»šåŠ¨è·ç¦»+è§†å£é«˜åº¦ ä¸ ä¾§è¾¹æ å®é™…é«˜åº¦ æ¯”è¾ƒã€‹</p><h3 id="æ‹–åŠ¨å¯¼èˆªæ¡å®æ—¶æ˜¾ç¤ºå¯¹åº”å†…å®¹"><a href="#æ‹–åŠ¨å¯¼èˆªæ¡å®æ—¶æ˜¾ç¤ºå¯¹åº”å†…å®¹" class="headerlink" title="æ‹–åŠ¨å¯¼èˆªæ¡å®æ—¶æ˜¾ç¤ºå¯¹åº”å†…å®¹"></a>æ‹–åŠ¨å¯¼èˆªæ¡å®æ—¶æ˜¾ç¤ºå¯¹åº”å†…å®¹</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å¦‚ä¸‹ï¼Œå½“touchstart æŒ‰ä½å·¦ä¾§å¯¼èˆªæ¡ï¼Œå¾€ä¸‹æ‹–åŠ¨æ—¶ï¼Œè®©å·¦ä¾§æ˜¾ç¤ºå¯¹åº”å†…å®¹ã€‚<br><figure class="image-box">                <img src="/image/js_demo/touch.png" alt title class>                <p></p>            </figure></p><h4 id="å®ç°æ–¹æ¡ˆ"><a href="#å®ç°æ–¹æ¡ˆ" class="headerlink" title="å®ç°æ–¹æ¡ˆ"></a>å®ç°æ–¹æ¡ˆ</h4><p>å·¦ä¾§å†…å®¹åŒºæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå¯¼èˆªæ¡æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚<br>åœ¨å¯¼èˆªæ¡ä¸Šç›‘å¬ä¸‰ä¸ªäº‹ä»¶ touchstart ç­‰ï¼Œä¸‰ä¸ªäº‹ä»¶ï¼Œ<br><figure class="image-box">                <img src="/image/js_demo/touch1.png" alt title class>                <p></p>            </figure><br>é€šè¿‡touchmoveè®¡ç®—é¼ æ ‡å½“å‰ä½ç½®åæ ‡ï¼Œå·²çŸ¥å¯¼èˆªæ¡é¡¶éƒ¨Aå­—æ¯æ‰€åœ¨ä½ç½®çš„åæ ‡ï¼Œå·²çŸ¥æ¯ä¸ªå­—æ¯é«˜åº¦ï¼Œé¼ æ ‡ä½ç½®åæ ‡å‡å»å¯¼èˆªæ¡é¡¶éƒ¨åæ ‡ï¼Œå°±å¯è®¡ç®—é¼ æ ‡å½“å‰ä½äºå“ªä¸ªå­—æ¯ä¸Šé¢ï¼Œ<br>ç„¶åé€šè¿‡touchmoveå®æ—¶å°†å¯¹åº”çš„å­—æ¯ä¼ ç»™å·¦ä¾§å†…å®¹ç»„ä»¶ï¼Œ<br><figure class="image-box">                <img src="/image/js_demo/touch2.png" alt title class>                <p></p>            </figure><br>å†…å®¹ç»„ä»¶ä½¿ç”¨ä¸€ä¸ªscollæ’ä»¶ï¼Œæ­¤æ’ä»¶å¯è®¾ç½®æ»šåŠ¨åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œæˆ–æ»šåŠ¨åˆ°æŒ‡å®šçš„å…ƒç´ elementä¸Šã€‚<br>å› æ­¤è¦å®ç°ä¸Šé¢çš„åŠŸèƒ½ï¼Œéœ€è¦ä»¥ä¸‹å…ƒç´ ï¼š</p><ul><li>è·å–å¯¹åº”å­—æ¯çš„è®¡ç®—æ–¹æ¡ˆ</li><li>å·¦ä¾§å†…å®¹åŒºæœ€å¥½ç”¨ä¸€ä¸ªscollåŒ…è£¹ï¼Œå¯è®¾ç½®æ˜¾ç¤ºæŒ‡å®šä½ç½®</li></ul><h4 id="touchstart-touchmove-touchend"><a href="#touchstart-touchmove-touchend" class="headerlink" title="touchstart touchmove touchend"></a>touchstart touchmove touchend</h4><p>touchstart ä¸touchendçš„ä½œç”¨å°±æ˜¯è®¾ç½®ä¸€ä¸ªtouchStatusï¼Œæ ‡è¯†æŒ‰ä½å¼€å§‹æ‹–åŠ¨æ—¶ï¼Œå…è®¸åšæ»šåŠ¨é€»è¾‘å¤„ç†ï¼Œæ¾å¼€æ‹–åŠ¨æ—¶ï¼Œä¸å…è®¸é€»è¾‘å¤„ç†ã€‚<br>å‰©ä¸‹çš„é€»è¾‘å¤„ç†äº¤ç»™touchmoveã€‚</p><h3 id="ç½‘é¡µå®šä½å¯¼èˆªç‰¹æ•ˆ"><a href="#ç½‘é¡µå®šä½å¯¼èˆªç‰¹æ•ˆ" class="headerlink" title="ç½‘é¡µå®šä½å¯¼èˆªç‰¹æ•ˆ"></a>ç½‘é¡µå®šä½å¯¼èˆªç‰¹æ•ˆ</h3><h4 id="demoä¸ä»‹ç»-2"><a href="#demoä¸ä»‹ç»-2" class="headerlink" title="demoä¸ä»‹ç»"></a>demoä¸ä»‹ç»</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/location/location.html" target="_blank" rel="noopener">demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/location/location.html">demoæ•ˆæœ</a></p><figure class="image-box">                <img src="/image/js_demo/location.jpg" alt title class>                <p></p>            </figure><h4 id="htmlçš„é”šç‚¹åšä¸šå†…è·³è½¬"><a href="#htmlçš„é”šç‚¹åšä¸šå†…è·³è½¬" class="headerlink" title="htmlçš„é”šç‚¹åšä¸šå†…è·³è½¬"></a>htmlçš„é”šç‚¹åšä¸šå†…è·³è½¬</h4><p>å¦‚ä¸‹ï¼Œæ›´å¤šå‚è€ƒç½‘ä¸Šã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a name=&quot;add&quot;&gt;&lt;/a&gt; æˆ–è€… &lt;a id=&quot;add&quot;&gt;&lt;/a&gt; ï¼ˆpsï¼šç”¨idå…¼å®¹æ€§å¥½äº›ï¼‰</span><br><span class="line">&lt;a href=&quot;#add&quot;&gt;è·³è½¬åˆ°add&lt;/a&gt;</span><br></pre></td></tr></table></figure></p><h4 id="window-addEventListener-â€˜scrollâ€™-ç›‘å¬æ»šåŠ¨-1"><a href="#window-addEventListener-â€˜scrollâ€™-ç›‘å¬æ»šåŠ¨-1" class="headerlink" title="window.addEventListener(â€˜scrollâ€™)ç›‘å¬æ»šåŠ¨"></a>window.addEventListener(â€˜scrollâ€™)ç›‘å¬æ»šåŠ¨</h4><p>ç›‘å¬æ»šåŠ¨è·ç¦»ï¼Œå®æ—¶ç‚¹äº®ä¸Šå›¾å³ä¾§çš„èœå•ã€‚</p><h3 id="CSS-Spriteé›ªç¢§å›¾åº”ç”¨"><a href="#CSS-Spriteé›ªç¢§å›¾åº”ç”¨" class="headerlink" title="CSS Spriteé›ªç¢§å›¾åº”ç”¨"></a>CSS Spriteé›ªç¢§å›¾åº”ç”¨</h3><h4 id="demoä¸ä»‹ç»-3"><a href="#demoä¸ä»‹ç»-3" class="headerlink" title="demoä¸ä»‹ç»"></a>demoä¸ä»‹ç»</h4><p><a href="https://github.com/YeWills/canvas-demo/blob/master/pages/multy/css-animation/priatice/priatice.html" target="_blank" rel="noopener">demo</a><br><a href="https://yewills.github.io/canvas-demo/pages/multy/css-animation/priatice/priatice.html">demoæ•ˆæœ</a><br>é›ªç¢§å›¾ç”¨å¤šä¸ªå›¾æ ‡åˆæˆä¸€ä¸ªï¼Œå¯ä»¥ç”¨æ¥å‡å°‘httpè¯·æ±‚ï¼Œä¼˜åŒ–æ€§èƒ½ï¼Œä¸»è¦åŸç†æ˜¯å¯¹background-positionçš„åº”ç”¨ã€‚</p><h4 id="å‡å°‘httpè¯·æ±‚ï¼Œä¼˜åŒ–æ€§èƒ½"><a href="#å‡å°‘httpè¯·æ±‚ï¼Œä¼˜åŒ–æ€§èƒ½" class="headerlink" title="å‡å°‘httpè¯·æ±‚ï¼Œä¼˜åŒ–æ€§èƒ½"></a>å‡å°‘httpè¯·æ±‚ï¼Œä¼˜åŒ–æ€§èƒ½</h4><p>å‚è€ƒä¸Šé¢çš„è®²è§£ã€‚</p><h4 id="æ ¸å¿ƒæ˜¯å¯¹background-positionçš„åº”ç”¨"><a href="#æ ¸å¿ƒæ˜¯å¯¹background-positionçš„åº”ç”¨" class="headerlink" title="æ ¸å¿ƒæ˜¯å¯¹background-positionçš„åº”ç”¨"></a>æ ¸å¿ƒæ˜¯å¯¹background-positionçš„åº”ç”¨</h4><p>ä¸‹é¢æ˜¯background-positionçš„åæ ‡ç³»ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.regnow</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">url</span>(sp.png) no-repeat;</span><br><span class="line"><span class="attribute">background-position</span>: <span class="number">0</span> -<span class="number">38px</span>;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="image-box">                <img src="/image/js_demo/sprite.jpg" alt title class>                <p></p>            </figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯demoè®²è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodeæ¨¡å—</title>
      <link href="/2019/08/13/node_module/"/>
      <url>/2019/08/13/node_module/</url>
      
        <content type="html"><![CDATA[<h2 id="nodeå¥½ç”¨æ¨¡å—"><a href="#nodeå¥½ç”¨æ¨¡å—" class="headerlink" title="nodeå¥½ç”¨æ¨¡å—"></a>nodeå¥½ç”¨æ¨¡å—</h2><h3 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h3><p>ä¸€æ¬¾ç”¨äº ä½¿ç”¨nodeå¯åŠ¨çš„é¡¹ç›®ï¼Œç›‘å¬å½“é¡¹ç›®æ–‡ä»¶å˜åŠ¨æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨ç±»ä¼¼npm startå‘½ä»¤çš„æ¨¡å—ã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/master" target="_blank" rel="noopener">demoç¤ºä¾‹</a></p><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><p>ä½¿ç”¨éå¸¸ç®€å•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//package.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;koa-book-pro&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;server/index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;nodemon ./start.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;YeWills&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;koa&quot;: &quot;^2.4.1&quot;,</span><br><span class="line">    &quot;koa-bodyparser&quot;: &quot;^4.2.1&quot;,</span><br><span class="line">    &quot;koa-router&quot;: &quot;^7.4.0&quot;,</span><br><span class="line">    &quot;koa-static&quot;: &quot;^5.0.0&quot;,</span><br><span class="line">    &quot;koa2-cors&quot;: &quot;^2.0.6&quot;,</span><br><span class="line">    &quot;nodemon&quot;: &quot;^1.18.10&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>package.json åŒçº§ç›®å½•ä¸‹ é…ç½® nodemon.json<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//nodemon.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;restartable&quot;: &quot;rs&quot;,</span><br><span class="line">  &quot;ignore&quot;: [</span><br><span class="line">    &quot;.git&quot;,</span><br><span class="line">    &quot;node_modules/**/node_modules&quot;,</span><br><span class="line">    &quot;README.md&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;verbose&quot;: true,</span><br><span class="line">  &quot;execMap&quot;: &#123;</span><br><span class="line">    &quot;js&quot;: &quot;node --harmony&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;watch&quot;: [</span><br><span class="line">    &quot;server/&quot;,</span><br><span class="line">    &quot;src/&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;ext&quot;: &quot;js json&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç„¶åç”¨npm start å¯åŠ¨é¡¹ç›®ï¼Œfilesæ”¹å˜æ—¶ï¼Œä¼šè‡ªåŠ¨npm startï¼Œéå¸¸å¥½ç”¨ã€‚<br><a href="http://www.cnblogs.com/JuFoFu/p/5140302.html" target="_blank" rel="noopener">å…³äºä¸Šé¢ä»£ç çš„è§£é‡Š</a><br>æˆ–è‡ªè¡ŒæŸ¥è¯¢GitHubå®˜ç½‘</p><h4 id="ä½¿ç”¨æ³¨æ„"><a href="#ä½¿ç”¨æ³¨æ„" class="headerlink" title="ä½¿ç”¨æ³¨æ„"></a>ä½¿ç”¨æ³¨æ„</h4><p>ä»¥ä¸Šä»£ç æ³¨æ„çš„æ˜¯:<br>nodemon.json ä¸­ jså±æ€§é…ç½®äº† node â€“harmony å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;execMap&quot;: &#123;</span><br><span class="line">   &quot;js&quot;: &quot;node --harmony&quot;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><p>é‚£ä¹ˆè¯·åœ¨ package.jsonä¸­ startä¸­ï¼ŒæŠŠnodeå…³é”®å­—å»æ‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ­£ç¡®é…ç½®</span><br><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;nodemon ./start.js&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//é”™è¯¯é…ç½® ï¼Œé…ç½®äº†å¤šä½™çš„node</span><br><span class="line"> &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;nodemon node ./start.js&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h4 id="è§†é¢‘å‚è€ƒ"><a href="#è§†é¢‘å‚è€ƒ" class="headerlink" title="è§†é¢‘å‚è€ƒ"></a>è§†é¢‘å‚è€ƒ</h4><p><a href="https://www.imooc.com/video/20683" target="_blank" rel="noopener">nodemonä»‹ç»</a></p><h3 id="parcel"><a href="#parcel" class="headerlink" title="parcel"></a>parcel</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>parcel ä¸€æ¬¾éå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œä½ åªæ˜¯æƒ³å†™ä¸€ä¸ªå°é¡µé¢ï¼Œé¡µé¢åªæœ‰ä¸€ä¸ªå•çº¯çš„htmlï¼Œä½†ä½ åˆæƒ³ä½¿ç”¨lesså†™cssï¼›<br>æœ‰ä¸€å¤©ï¼Œä½ åˆæƒ³å†™ä¸€ä¸ªå°é¡µé¢ï¼Œéœ€è¦ç”¨åˆ°ä¸€äº›äº¤äº’ï¼Œæƒ³ä½¿ç”¨reactæ¡†æ¶ï¼Œå½“åˆä¸æƒ³é…ç½®webpackï¼Œåˆæƒ³ç”¨åˆ°lessï¼›<br>æ­¤æ—¶ï¼Œparcelå°±æ˜¯ä½ çš„ä¸äºŒé€‰æ‹©ã€‚<br>parcelæœ€å¤§çš„äº®ç‚¹ä¹‹ä¸€å°±æ˜¯ ç®€å•å’Œè‡ªå¸¦çƒ­é‡è½½ç‰¹æ€§ ï¼Œå°±å‡­è¿™ä¸¤ä¸ªï¼Œä½ å€¼å¾—æ‹¥æœ‰ã€‚</p><h4 id="æƒ³ä½¿ç”¨lessåˆä¸æƒ³é…ç½®webpack"><a href="#æƒ³ä½¿ç”¨lessåˆä¸æƒ³é…ç½®webpack" class="headerlink" title="æƒ³ä½¿ç”¨lessåˆä¸æƒ³é…ç½®webpack"></a>æƒ³ä½¿ç”¨lessåˆä¸æƒ³é…ç½®webpack</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="æ— éœ€webpackè®©ä½ ä½¿ç”¨reactã€vue"><a href="#æ— éœ€webpackè®©ä½ ä½¿ç”¨reactã€vue" class="headerlink" title="æ— éœ€webpackè®©ä½ ä½¿ç”¨reactã€vue"></a>æ— éœ€webpackè®©ä½ ä½¿ç”¨reactã€vue</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="ç®€å•ç®€å•ç®€å•"><a href="#ç®€å•ç®€å•ç®€å•" class="headerlink" title="ç®€å•ç®€å•ç®€å•"></a>ç®€å•ç®€å•ç®€å•</h4><p>é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œparceléå¸¸ç®€å•ï¼Œéå¸¸é€‚åˆå°å‹é¡¹ç›®ï¼Œæˆ–è€…å°å‹demoï¼Œæˆ–è€…è‡ªå·±çš„å°demo<br>å‚è€ƒä¸Šé¢</p><h4 id="çƒ­é‡è½½"><a href="#çƒ­é‡è½½" class="headerlink" title="çƒ­é‡è½½"></a>çƒ­é‡è½½</h4><h4 id="buildåŠŸèƒ½"><a href="#buildåŠŸèƒ½" class="headerlink" title="buildåŠŸèƒ½"></a>buildåŠŸèƒ½</h4><p>parcelåˆbuildåŠŸèƒ½ï¼Œbuildåç”Ÿæˆçš„æ–‡ä»¶ï¼Œå¯ç”¨äºç”Ÿäº§ã€‚</p><h4 id="demoï¼å‚è€ƒ"><a href="#demoï¼å‚è€ƒ" class="headerlink" title="demoï¼å‚è€ƒ"></a>demoï¼å‚è€ƒ</h4><p><a href="https://createapp.dev/parcel" target="_blank" rel="noopener">å®˜æ–¹demo</a><br><a href="https://github.com/YeWills/parcel-demo" target="_blank" rel="noopener">demo</a><br><a href="https://github.com/parcel-bundler/parcel" target="_blank" rel="noopener">github</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
            <tag> nodemon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>httpåè®®</title>
      <link href="/2019/05/21/http/"/>
      <url>/2019/05/21/http/</url>
      
        <content type="html"><![CDATA[<h2 id="htmlåè®®åŸºç¡€"><a href="#htmlåè®®åŸºç¡€" class="headerlink" title="htmlåè®®åŸºç¡€"></a>htmlåè®®åŸºç¡€</h2><h3 id="5å±‚ç½‘ç»œæ¨¡å‹"><a href="#5å±‚ç½‘ç»œæ¨¡å‹" class="headerlink" title="5å±‚ç½‘ç»œæ¨¡å‹"></a>5å±‚ç½‘ç»œæ¨¡å‹</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>å¦‚å›¾ï¼Œæˆ‘ä»¬åªéœ€ç†è§£åº”ç”¨å±‚ä¸ä¼ è¾“å±‚çš„ä½œç”¨ï¼Œå…¶ä»–ä¸‰å±‚ï¼ŒçŸ¥é“å°±è¡Œã€‚<br><figure class="image-box">                <img src="/image/http/compose.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¼ è¾“å±‚"><a href="#ä¼ è¾“å±‚" class="headerlink" title="ä¼ è¾“å±‚"></a>ä¼ è¾“å±‚</h4><p><a href="https://www.jianshu.com/p/e1f33cc26aca" target="_blank" rel="noopener">å‚è€ƒ</a></p><ul><li>å‘ç”¨æˆ·æä¾›å¯é çš„ç«¯åˆ°ç«¯ï¼ˆend-to-endï¼‰æœåŠ¡ï¼›</li><li>ä¼ è¾“å±‚å‘é«˜å±‚å±è”½äº†ä¸‹å±‚æ•°æ®é€šä¿¡çš„ç»†èŠ‚ï¼ˆæ¯”å¦‚ä¸€ä¸ªpostè¯·æ±‚ï¼Œå¦‚ä½•åˆ†ç‰‡å¦‚ä½•å‘é€ä½¿æœåŠ¡ç«¯å¾ˆå¥½æ¥æ”¶åˆ°ï¼Œè¿™ä¸ªè§„åˆ™ç”±ä¼ è¾“å±‚å®ç°ï¼Œåº”ç”¨å±‚çš„HTTPä¸ç”¨å…³å¿ƒè¿™äº›ï¼Œä½†æ˜¯é€‚å½“ç†è§£å¯¹HTTPæ›´å¥½åœ°ä½¿ç”¨æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼‰ã€‚</li></ul><h4 id="åº”ç”¨å±‚"><a href="#åº”ç”¨å±‚" class="headerlink" title="åº”ç”¨å±‚"></a>åº”ç”¨å±‚</h4><ul><li>ä¸ºåº”ç”¨è½¯ä»¶æä¾›äº†å¾ˆå¤šæœåŠ¡ï¼›</li><li>å¸®æˆ‘ä»¬å®ç°äº†HTTPåè®®ï¼Œæˆ‘ä»¬åªè¦æŒ‰ç…§è§„åˆ™å»ä½¿ç”¨HTTPåè®®ï¼›</li><li>å®ƒæ„å»ºäºTCPåè®®ä¹‹ä¸Šï¼›å±è”½äº†ç½‘ç»œä¼ è¾“ç›¸å…³ç»†èŠ‚ã€‚</li></ul><h3 id="HTTPåè®®çš„å‘å±•å†å²"><a href="#HTTPåè®®çš„å‘å±•å†å²" class="headerlink" title="HTTPåè®®çš„å‘å±•å†å²"></a>HTTPåè®®çš„å‘å±•å†å²</h3><h4 id="http-0-9"><a href="#http-0-9" class="headerlink" title="http/0.9"></a>http/0.9</h4><ul><li>åªæœ‰get</li><li>ä¹ˆæœ‰headerç­‰æè¿°ä¿¡æ¯</li><li>æœåŠ¡å™¨å‘é€å®Œæ¯•ï¼Œå°±å…³é—­tcpè¿æ¥<h4 id="http-1-0"><a href="#http-1-0" class="headerlink" title="http/1.0"></a>http/1.0</h4></li><li>å¢åŠ å¾ˆå¤šæ–¹å¼å¦‚ post putã€‚ã€‚ã€‚</li><li>å¢åŠ  status code å’Œ header</li><li>ç¼“å­˜ã€æƒé™ç­‰<h4 id="http-1-1-ï¼ˆå½“å‰çš„httpåè®®ï¼‰"><a href="#http-1-1-ï¼ˆå½“å‰çš„httpåè®®ï¼‰" class="headerlink" title="http/1.1 ï¼ˆå½“å‰çš„httpåè®®ï¼‰"></a>http/1.1 ï¼ˆå½“å‰çš„httpåè®®ï¼‰</h4></li><li>æŒä¹…è¿æ¥</li><li>pipeline</li><li>å¢åŠ hostå’Œå…¶ä»–å‘½ä»¤<h4 id="http2-ï¼ˆè¿˜æœªæ™®åŠï¼‰"><a href="#http2-ï¼ˆè¿˜æœªæ™®åŠï¼‰" class="headerlink" title="http2 ï¼ˆè¿˜æœªæ™®åŠï¼‰"></a>http2 ï¼ˆè¿˜æœªæ™®åŠï¼‰</h4></li><li>æ‰€æœ‰æ•°æ®ä»¥äºŒè¿›åˆ¶ä¼ è¾“</li><li>åŒä¸€ä¸ªè¿æ¥é‡Œé¢å‘é€å¤šä¸ªè¯·æ±‚ä¸å†éœ€è¦æŒ‰é¡ºåºæ¥</li><li>å¤´ä¿¡æ¯å‹ç¼©ä»¥åŠåç«¯ä¸»åŠ¨æ¨é€ç­‰åŠŸèƒ½<br>å…³äºå¤´ä¿¡æ¯å‹ç¼©ï¼š<br>åœ¨http1ä¸­ï¼Œå¤´ä¿¡æ¯å¦‚ Content-Typeç­‰ï¼Œéƒ½æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¿å­˜ï¼Œè¿™äº›éƒ½æ¯”è¾ƒå å¸¦å®½ï¼›<br>åœ¨http2ä¸­ï¼Œå¯¹å¤´ä¿¡æ¯è¿›è¡Œå‹ç¼©ï¼Œä»è€Œå‡å°‘å¯¹å¸¦å®½çš„å ç”¨ã€‚<br>å…³äº ä¸»åŠ¨æ¨é€ï¼š<br>åœ¨http1ä¸­ï¼Œå‘åå°å‘é€ä¸€ä¸ªhtmlè¯·æ±‚ï¼Œå‰å°è·å¾—htmlåï¼Œç»è¿‡æµè§ˆå™¨è§£æï¼Œå†æ¬¡å‘åå°å‘èµ·cssæˆ–jsçš„è¯·æ±‚ï¼›<br>http2ä¸­ï¼Œå‘åå°å‘èµ·ä¸€ä¸ªé¡µé¢è¯·æ±‚æ—¶ï¼Œåå°ä¼šå°†htmlå’Œhtmlå†…çš„css js ä¸»åŠ¨ä¸€æ¬¡æ€§æ¨é€ç»™æµè§ˆå™¨ï¼Œæé«˜æ€§èƒ½ã€‚</li></ul><h3 id="tcpä¸‰æ¬¡æ¡æ‰‹"><a href="#tcpä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="tcpä¸‰æ¬¡æ¡æ‰‹"></a>tcpä¸‰æ¬¡æ¡æ‰‹</h3><p>å¦‚å›¾ï¼Œtcpä¸‰æ¬¡æ¡æ‰‹ï¼Œ<strong>ä¸»è¦æ˜¯è§£å†³å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ç›¸éš”å¾ˆå¤šè¿œï¼Œé€šè¿‡å…‰çº¤ä¼ è¾“ï¼Œå®¹æ˜“å‡ºç°å»¶æ—¶å’Œè¿æ¥ä¸­æ–­ç­‰é—®é¢˜</strong>ï¼›<br>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æ¶ˆæ¯ç»™æœåŠ¡ç«¯ï¼Œç”³è¯·å»ºç«‹tcpè¿æ¥ï¼›<br>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ¥æ”¶è¯·æ±‚åï¼Œæ–°å»ºç«¯å£ï¼Œç”¨äºtcpè¿æ¥ï¼Œå¹¶ä¸”å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯ï¼ŒéªŒè¯å®¢æˆ·ç«¯æ˜¯å¦èƒ½æ­£å¸¸æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯ï¼›<br>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘æ¶ˆæ¯è¯´ï¼Œæˆ‘èƒ½æ­£å¸¸æ¥æ”¶åˆ°ä½ é‚£è¾¹å‘æ¥çš„æ¶ˆæ¯ï¼Œä½ å°±æ”¾å¿ƒçš„å»ºç«‹tcpè¿æ¥å§ã€‚æœåŠ¡ç«¯æ¥æ”¶åˆ°æ­¤æ¶ˆæ¯åï¼Œå»ºç«‹tcpè¿æ¥æˆåŠŸã€‚</p><p>è¿›ä¸€æ­¥è§£é‡Šä¸‹ï¼š<br>ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒéªŒè¯æœåŠ¡ç«¯èƒ½æ­£å¸¸æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯ï¼›<br>ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒéªŒè¯å®¢æœç«¯èƒ½æ­£å¸¸æ¥æ”¶åˆ°æœåŠ¡ç«¯æ¶ˆæ¯ï¼›<br>ä¸€æ¥ä¸€å¾€ï¼Œä¸¤è¾¹éƒ½èƒ½æ¥æ”¶åˆ°åŒæ–¹æ¶ˆæ¯ï¼›<br>ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œç›´æ¥ä¸æœåŠ¡ç«¯å»ºç«‹tcpè¿æ¥ã€‚<br><figure class="image-box">                <img src="/image/http/tcp.jpg" alt title class>                <p></p>            </figure></p><h3 id="uri-url-urn"><a href="#uri-url-urn" class="headerlink" title="uri url urn"></a>uri url urn</h3><p>uri åŒ…å« url å’Œ urnï¼›uriä¸urlä¸€æ ·ç”¨æ¥å®šä½èµ„æºåœ°å€ã€‚</p><h3 id="urlä¸Šçš„å“ˆå¸Œå€¼-èµ·åˆ°é”šç‚¹ä½œç”¨"><a href="#urlä¸Šçš„å“ˆå¸Œå€¼-èµ·åˆ°é”šç‚¹ä½œç”¨" class="headerlink" title="urlä¸Šçš„å“ˆå¸Œå€¼ èµ·åˆ°é”šç‚¹ä½œç”¨"></a>urlä¸Šçš„å“ˆå¸Œå€¼ èµ·åˆ°é”šç‚¹ä½œç”¨</h3><p><code>#</code>å·åçš„å“ˆå¸Œå€¼ï¼Œç”¨æ¥ç»™å‰ç«¯æ¸²æŸ“ç”¨ï¼Œèµ·åˆ°ä¸€ä¸ªé”šç‚¹ä½œç”¨ï¼Œæ¯”å¦‚åœ¨mokedownæ–‡æ¡£åšå®¢æ€»ï¼Œé€šè¿‡#è·³è½¬åˆ°æŸä¸ªç« èŠ‚ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:4000/2019/05/21/koa2#chapter1</span><br></pre></td></tr></table></figure></p><h3 id="http-æŠ¥æ–‡"><a href="#http-æŠ¥æ–‡" class="headerlink" title="http æŠ¥æ–‡"></a>http æŠ¥æ–‡</h3><h4 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h4><figure class="image-box">                <img src="/image/http/header.jpg" alt title class>                <p></p>            </figure><h4 id="é¦–è¡Œï¼èµ·å§‹è¡Œ"><a href="#é¦–è¡Œï¼èµ·å§‹è¡Œ" class="headerlink" title="é¦–è¡Œï¼èµ·å§‹è¡Œ"></a>é¦–è¡Œï¼èµ·å§‹è¡Œ</h4><p>é¦–è¡Œé‡Œé¢æ˜¯ä¸€äº›è¯·æ±‚å¤´ä»¥å¤–çš„ä¿¡æ¯ï¼Œä¸Šå›¾ä¸­ï¼Œè¯·æ±‚çš„é¦–è¡Œä¸Šå®šä¹‰äº†httpçš„ç‰ˆæœ¬ï¼Œmethodï¼›<br>å“åº”å¤´åŒ…å«äº†çŠ¶æ€ç ç­‰æ¶ˆæ¯ã€‚<br>é¦–è¡Œä¹Ÿæ˜¯ä¸‹é¢çš„çŸ©å½¢æ¡†å†…çš„ General<br><figure class="image-box">                <img src="/image/http/httpline.jpg" alt title class>                <p></p>            </figure></p><h4 id="è¯·æ±‚headerï¼å“åº”header"><a href="#è¯·æ±‚headerï¼å“åº”header" class="headerlink" title="è¯·æ±‚headerï¼å“åº”header"></a>è¯·æ±‚headerï¼å“åº”header</h4><p>å‚è€ƒä¸Šå›¾</p><h3 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h3><h4 id="è®¤è¯†è·¨åŸŸ"><a href="#è®¤è¯†è·¨åŸŸ" class="headerlink" title="è®¤è¯†è·¨åŸŸ"></a>è®¤è¯†è·¨åŸŸ</h4><p>è·¨åŸŸçº¯å±æµè§ˆå™¨ç«¯åšçš„é™åˆ¶ï¼Œè¯·æ±‚æ˜¯å¦è·¨åŸŸä¸å½±å“æµè§ˆå™¨æ˜¯å¦å°†å…¶å‘é€åˆ°åå°ï¼Œæµè§ˆå™¨éƒ½ä¼šå°†è¯·æ±‚å‘é€åˆ°åå°ï¼Œæ— è®ºè·¨åŸŸä¸å¦ã€‚<br>æœåŠ¡å™¨ï¼Œæ— è®ºè·¨åŸŸä¸å¦ï¼Œéƒ½ä¼šæ­£å¸¸å°†å“åº”æ•°æ®å‘é€ç»™æµè§ˆå™¨ã€‚<br>æµè§ˆå™¨æ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”æ•°æ®æ—¶ï¼Œä¸åŒçš„æ˜¯ï¼Œæµè§ˆå™¨å¯¹äºè·¨åŸŸè¯·æ±‚ï¼Œ<br>ä¼šè¯»å–å“åº”æ•°æ®çš„å‚æ•° <code>Access-Control-Allow-Origin</code>;<br>å¦‚æœæ²¡æœ‰æ­¤å‚æ•°ï¼Œæˆ–æ­¤å‚æ•°ä¸å…è®¸å®¢æˆ·ç«¯é¡µé¢çš„hostï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†ä¸ä¼šå°†å“åº”çš„æ•°æ®æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”æŠ›å¼‚å¸¸ä¸å…è®¸è·¨åŸŸã€‚</p><h4 id="æµè§ˆå™¨å¹¶éä¸å‘é€è·¨åŸŸè¯·æ±‚"><a href="#æµè§ˆå™¨å¹¶éä¸å‘é€è·¨åŸŸè¯·æ±‚" class="headerlink" title="æµè§ˆå™¨å¹¶éä¸å‘é€è·¨åŸŸè¯·æ±‚"></a>æµè§ˆå™¨å¹¶éä¸å‘é€è·¨åŸŸè¯·æ±‚</h4><p>å‚è€ƒä¸Šé¢ã€Šè®¤è¯†è·¨åŸŸã€‹</p><h4 id="è·¨åŸŸæ˜¯æµè§ˆå™¨åšçš„é™åˆ¶"><a href="#è·¨åŸŸæ˜¯æµè§ˆå™¨åšçš„é™åˆ¶" class="headerlink" title="è·¨åŸŸæ˜¯æµè§ˆå™¨åšçš„é™åˆ¶"></a>è·¨åŸŸæ˜¯æµè§ˆå™¨åšçš„é™åˆ¶</h4><p>è·¨åŸŸåªæ˜¯æµè§ˆå™¨åšçš„é™åˆ¶ï¼Œå…¶ä»–å®¢æˆ·ç«¯éƒ½ä¸åšè·¨åŸŸé™åˆ¶ï¼Œæ¯”å¦‚git bashä¸Šè¿è¡Œ curlï¼ŒæœåŠ¡å™¨ç«¯ç»™æœåŠ¡å™¨å‘è¯·æ±‚ç­‰ç­‰ï¼Œéƒ½ä¸ä¼šå±è”½è·¨åŸŸæ•°æ®ã€‚</p><h4 id="è·¨åŸŸæ˜¯æµè§ˆå™¨æ ¹æ®Access-Control-Allow-xxxåšçš„é™åˆ¶"><a href="#è·¨åŸŸæ˜¯æµè§ˆå™¨æ ¹æ®Access-Control-Allow-xxxåšçš„é™åˆ¶" class="headerlink" title="è·¨åŸŸæ˜¯æµè§ˆå™¨æ ¹æ®Access-Control-Allow-xxxåšçš„é™åˆ¶"></a>è·¨åŸŸæ˜¯æµè§ˆå™¨æ ¹æ®Access-Control-Allow-xxxåšçš„é™åˆ¶</h4><p>è·¨åŸŸä¸å¦ï¼Œå‡ ä¹åªäº ä¸åå°è®¾ç½®çš„Access-Control-Allow-xxxå€¼æœ‰å…³ï¼Œæµè§ˆå™¨åªæ˜¯æ ¹æ® Access-Control-Allow-xxxçš„å€¼ï¼Œå†³å®šæ˜¯å¦å±è”½å“åº”æ¶ˆæ¯ï¼Œé™åˆ¶è·¨åŸŸã€‚<br>Access-Control-Allow-xxxå¯ä»¥æ˜¯ä»¥ä¸‹å€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Origin</span><br><span class="line">Access-Control-Allow-Headers</span><br><span class="line">Access-Control-Allow-Methods</span><br><span class="line">Access-Control-Max-Age //å¤šé•¿æ—¶é—´å†…ï¼Œä¸éœ€è¦å†å‘é¢„è¯·æ±‚è¿›è¡ŒéªŒè¯</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢ä»¥ Access-Control-Allow-Originè®²è§£ã€‚</p><h4 id="Access-Control-Allow-Origin"><a href="#Access-Control-Allow-Origin" class="headerlink" title="Access-Control-Allow-Origin"></a>Access-Control-Allow-Origin</h4><p>çœ‹è¯·æ±‚æ˜¯å¦è·¨åŸŸï¼Œä¸»è¦æ˜¯çœ‹åå°çš„å“åº”å¤´å¦è®¾ç½®äº† Access-Control-Allow-Originï¼›<br>Access-Control-Allow-Originçš„å€¼å¯ä»¥ä¸º *,è¿™æ ·çš„è¯ï¼Œä»»ä½•åŸŸåä¸‹å‘çš„è¯·æ±‚ï¼Œå“åº”æ•°æ®éƒ½ä¼šå…è®¸è·å–åˆ°ï¼Œæ˜¯æœ‰ä¸€å®šå±é™©çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;Access-Control-Allow-Origin&apos;: &apos;*&apos;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥æ›´å¯è¡Œçš„æ–¹æ³•æ˜¯è®¾ç½®ä¸€ä¸ªå…·ä½“å€¼ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å…è®¸hostä¸ºhttp://127.0.0.1:8888çš„è¯·æ±‚æ˜¾ç¤ºæ•°æ®</span><br><span class="line">&apos;Access-Control-Allow-Origin&apos;: &apos;http://127.0.0.1:8888&apos;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœè¦å…è®¸å¤šä¸ªhostï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå€¼ï¼Œè¿™äº›éƒ½æ˜¯å¾ˆå¥½åšçš„ã€‚</p><p>Access-Control-Allow-xxxéƒ½å¯ä»¥åœ¨æµè§ˆå™¨çš„å“åº”å¤´ä¸­çœ‹åˆ°ï¼š<br><figure class="image-box">                <img src="/image/http/cor0.jpg" alt title class>                <p></p>            </figure></p><h4 id="è·¨åŸŸè§£å†³æ–¹å¼"><a href="#è·¨åŸŸè§£å†³æ–¹å¼" class="headerlink" title="è·¨åŸŸè§£å†³æ–¹å¼"></a>è·¨åŸŸè§£å†³æ–¹å¼</h4><ul><li>è®¾ç½® Access-Control-Allow-Originï¼›</li><li>jsonp</li><li>é€šè¿‡æœåŠ¡å™¨è½¬å‘è¯·æ±‚</li></ul><h4 id="å…¶ä»–è·¨åŸŸè§£å†³æ–¹æ³•"><a href="#å…¶ä»–è·¨åŸŸè§£å†³æ–¹æ³•" class="headerlink" title="å…¶ä»–è·¨åŸŸè§£å†³æ–¹æ³•"></a>å…¶ä»–è·¨åŸŸè§£å†³æ–¹æ³•</h4><p>è·¨åŸŸæ—¶ï¼Œé™¤äº†è¦æ”¾å¼€Access-Control-Allow-Originï¼Œæœ‰æ—¶å€™ï¼Œè¿˜ä¼šé™åˆ¶ä½ çš„è¯·æ±‚æ–¹æ³•ï¼Œè¯·æ±‚å¤´çš„è®¾ç½®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œ<br>åœ¨åå°å°±éœ€è¦è®¾ç½®å¦‚ä¸‹ï¼Œè¿›è¡Œapproveï¼š<br><figure class="image-box">                <img src="/image/http/cor5.jpg" alt title class>                <p></p>            </figure></p><h4 id="CORSé¢„è¯·æ±‚"><a href="#CORSé¢„è¯·æ±‚" class="headerlink" title="CORSé¢„è¯·æ±‚"></a>CORSé¢„è¯·æ±‚</h4><p>åœ¨è·¨åŸŸè¯·æ±‚æ—¶ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–é™åˆ¶ï¼ŒCORSé¢„è¯·æ±‚å°±æ˜¯å½“ä¸­çš„ä¸€ç§:<br>è·¨åŸŸè¯·æ±‚ä¸­ï¼Œä¸éœ€è¦é¢„è¯·æ±‚çš„æ–¹æ³•ï¼š</p><ul><li>GET </li><li>HEAD</li><li>POST<br>è·¨åŸŸè¯·æ±‚ä¸­ï¼Œä¸éœ€è¦é¢„è¯·æ±‚çš„content-Typeï¼š</li><li>text/plain</li><li>multipart/form-data</li><li>application/x-www-form-urlencoded<br>é™¤äº†ä¸Šè¿°è¯·æ±‚æ–¹æ³•æˆ–content-typeï¼Œå½“è·¨åŸŸæ—¶ï¼Œæµè§ˆå™¨éƒ½è¦è¿›è¡Œé¢„è¯·æ±‚ï¼Œ<br>æ¯”å¦‚DELETE PUT è¯·æ±‚ï¼Œ<br>é™¤ä»¥ä¸Šè®¾ç½®å¤–ï¼Œå¦‚æœä½ è‡ªå®šä¹‰headerå¤´ï¼Œä¹Ÿä¼šè¦æ±‚è¿›è¡Œé¢„è¯·æ±‚ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„é¢„è¯·æ±‚çš„é™åˆ¶ï¼Œå¯ä»¥ç½‘ä¸ŠæŸ¥é˜…ã€‚<br>ä¸‹é¢å±•ç¤ºä¸€ä¸‹é¢„è¯·æ±‚<h4 id="CORSé¢„è¯·æ±‚-ä¸-OPTIONS-method"><a href="#CORSé¢„è¯·æ±‚-ä¸-OPTIONS-method" class="headerlink" title="CORSé¢„è¯·æ±‚ ä¸ OPTIONS method"></a>CORSé¢„è¯·æ±‚ ä¸ OPTIONS method</h4>corsé¢„è¯·æ±‚æ˜¯é€šè¿‡OPTIONS methodè¯·æ±‚å®ç°ï¼Œåœ¨å‘é€å®é™…è¯·æ±‚å‰ï¼Œå‘ä¸€æ¬¡OPTIONS methodè¯·æ±‚ã€‚</li><li><p>è¿™æ˜¯æ­£å¸¸çš„post è·¨åŸŸè¯·æ±‚ï¼Œä¸éœ€è¦corsé¢„è¯·æ±‚</p><figure class="image-box">                <img src="/image/http/cor1.jpg" alt title class>                <p></p>            </figure></li><li><p>è¿™æ˜¯put è·¨åŸŸè¯·æ±‚ï¼Œéœ€è¦corsé¢„è¯·æ±‚<br>å› æ­¤é¦–å…ˆå‘ä¸€ä¸ªmethod OPTIONSçš„è¯·æ±‚ï¼Œå‘æœåŠ¡å™¨è¯¢é—®æ˜¯å¦å…è®¸è·å–æ•°æ®ã€‚<br>å¦‚æœå…è®¸ï¼Œåˆ™å†å‘å®é™…çš„putè¯·æ±‚ã€‚</p><figure class="image-box">                <img src="/image/http/cor2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/http/cor3.jpg" alt title class>                <p></p>            </figure></li><li><p>é»˜è®¤åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œå†æ¬¡å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œä¸éœ€å†æ¬¡å‘é€optionsè¯·æ±‚è¿›è¡Œcorsé¢„è¯·æ±‚<br>å½“ä¸Šé¢è¯·æ±‚æ­£å¸¸åï¼Œç«‹åˆ»å†æ¬¡å‘èµ·åŒæ ·çš„putè¯·æ±‚ï¼Œæµè§ˆå™¨ä¸ä¼šå†æ¬¡é‡å¤éœ€è¦è¿›è¡Œé¢„è¯·æ±‚ï¼Œå½“ç„¶è¿™ä¸ªæ—¶é—´æ˜¯å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šé…ç½®çš„ã€‚<br>é€šè¿‡ä¸‹é¢å¯ä»¥è®¾ç½®ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œå°±ä½¿ç”¨é»˜è®¤æ—¶é—´ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Max-Age : 1000, //å¤šé•¿æ—¶é—´å†…ï¼Œä¸éœ€è¦å†å‘é¢„è¯·æ±‚è¿›è¡ŒéªŒè¯</span><br></pre></td></tr></table></figure></li></ul><figure class="image-box">                <img src="/image/http/cor4.jpg" alt title class>                <p></p>            </figure><h4 id="CORSé¢„è¯·æ±‚-åª-ä¸-è·¨åŸŸæœ‰å…³"><a href="#CORSé¢„è¯·æ±‚-åª-ä¸-è·¨åŸŸæœ‰å…³" class="headerlink" title="CORSé¢„è¯·æ±‚ åª ä¸ è·¨åŸŸæœ‰å…³"></a>CORSé¢„è¯·æ±‚ åª ä¸ è·¨åŸŸæœ‰å…³</h4><p>å‚è€ƒä¸Šé¢çš„è®²è§£ã€‚</p><h3 id="CORSé¢„è¯·æ±‚-1"><a href="#CORSé¢„è¯·æ±‚-1" class="headerlink" title="CORSé¢„è¯·æ±‚"></a>CORSé¢„è¯·æ±‚</h3><p>å‚è€ƒã€Šè·¨åŸŸ â€” CORSé¢„è¯·æ±‚ã€‹</p><h3 id="Cache-control"><a href="#Cache-control" class="headerlink" title="Cache-control"></a>Cache-control</h3><p>Cache-controlæ˜¯æœåŠ¡ç«¯è®¾ç½®ï¼Œå‘Šè¯‰æµè§ˆå™¨èµ„æºçš„ç¼“å­˜æ–¹å¼,å¯å–çš„å€¼ï¼š</p><ul><li>public å…è®¸åŒ…å«<strong>ä»£ç†</strong>å®¢æˆ·ç«¯çš„æ‰€æœ‰å®¢æˆ·ç«¯è¿›è¡Œç¼“å­˜</li><li>private åªå…è®¸å‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯è¿›è¡Œç¼“å­˜</li><li>no-cache å…è®¸å®¢æˆ·ç«¯(ä½¿ç”¨)ç¼“å­˜èµ„æºï¼Œä½†éœ€è¦åˆ°æœåŠ¡å™¨ä¸Šå»éªŒè¯</li><li>no-store ä¸å…è®¸å®¢æˆ·ç«¯ç¼“å­˜<br>å…¶ä»–æŒ‡ï¼š</li><li>max-age ç¼“å­˜è¿‡æœŸæ—¶é—´<br>åœ¨<strong>koa æœåŠ¡ç«¯</strong>è®¾ç½®å¦‚ä¸‹ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.set(&apos;Cache-control&apos;, &apos;max-age=200, public&apos;); //å¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">  ctx.set(&apos;Content-Type&apos;, &apos;text/javascript&apos;);</span><br><span class="line">  ctx.set(&apos;Access-Control-Allow-Headers&apos;, &apos;Origin, X-Requested-With, Content-Type, Accept&apos;);</span><br><span class="line">  await next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h3 id="æµè§ˆå™¨è¯»å–ç¼“å­˜çš„è¿‡ç¨‹"><a href="#æµè§ˆå™¨è¯»å–ç¼“å­˜çš„è¿‡ç¨‹" class="headerlink" title="æµè§ˆå™¨è¯»å–ç¼“å­˜çš„è¿‡ç¨‹"></a>æµè§ˆå™¨è¯»å–ç¼“å­˜çš„è¿‡ç¨‹</h3><h4 id="æŠŠæœ¬åœ°ç¼“å­˜å½“æˆä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨"><a href="#æŠŠæœ¬åœ°ç¼“å­˜å½“æˆä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨" class="headerlink" title="æŠŠæœ¬åœ°ç¼“å­˜å½“æˆä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨"></a>æŠŠæœ¬åœ°ç¼“å­˜å½“æˆä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨</h4><p>æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œé¦–å…ˆè¯»å–æœ¬åœ°ç¼“å­˜ï¼Œç„¶åè¯»å–ä»£ç†ç¼“å­˜ï¼Œå¦‚æœéƒ½æ²¡æœ‰å‘½ä¸­ï¼Œå°±ä»æœåŠ¡å™¨è·å–èµ„æºã€‚<br><figure class="image-box">                <img src="/image/http/cache1.jpg" alt title class>                <p></p>            </figure></p><p>å¦‚ä¸Šå›¾çŸ¥é“ï¼Œå½“è®¾ç½®ç¼“å­˜æ—¶ï¼Œæˆ‘ä»¬å°±å¥½æ¯”å¤šäº†ä¸€ä¸ªæœ¬åœ°æœåŠ¡ç«¯ã€‚<br>å½“å†æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œè¯·æ±‚ç›´æ¥å‘é€åˆ°æœ¬åœ°ç¼“å­˜æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯åˆ°åç«¯æœåŠ¡å™¨ï¼Œæ‰€ä»¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç¼“å­˜è¯·æ±‚ï¼Œä¸ä¼šå†æ¬¡è§¦å‘åç«¯æœåŠ¡å™¨ç¨‹åºæ‰§è¡Œçš„åŸå› ã€‚<br>åŸæ¥è¯·æ±‚ç›´æ¥åˆ°äº†æµè§ˆå™¨çš„ç¼“å­˜æœåŠ¡å™¨ä¸Šã€‚</p><h4 id="æ³¨æ„ï¼Œæœ‰ä¸ªä»£ç†ç¼“å­˜"><a href="#æ³¨æ„ï¼Œæœ‰ä¸ªä»£ç†ç¼“å­˜" class="headerlink" title="æ³¨æ„ï¼Œæœ‰ä¸ªä»£ç†ç¼“å­˜"></a>æ³¨æ„ï¼Œæœ‰ä¸ªä»£ç†ç¼“å­˜</h4><p>å‚è€ƒä¸Šå›¾ã€‚</p><h3 id="ç¼“å­˜éªŒè¯-Last-Modifiedå’ŒEtagçš„ä½¿ç”¨"><a href="#ç¼“å­˜éªŒè¯-Last-Modifiedå’ŒEtagçš„ä½¿ç”¨" class="headerlink" title="ç¼“å­˜éªŒè¯ - Last-Modifiedå’ŒEtagçš„ä½¿ç”¨"></a>ç¼“å­˜éªŒè¯ - Last-Modifiedå’ŒEtagçš„ä½¿ç”¨</h3><h4 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h4><p>ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ï¼Œé…åˆ if-modified-sinceæˆ–if-unmodified-sinceä½¿ç”¨</p><h4 id="Etag"><a href="#Etag" class="headerlink" title="Etag"></a>Etag</h4><p>æ•°æ®ç­¾åï¼Œæ¯”Last-Modifiedæ›´ä¸ºä¸¥æ ¼çš„ä¸€ç§éªŒè¯æ–¹å¼ï¼›<br>é…åˆif-matchæˆ–if-non-matchä½¿ç”¨ï¼›</p><h4 id="åç«¯é…ç½®ï¼ˆkoaï¼‰"><a href="#åç«¯é…ç½®ï¼ˆkoaï¼‰" class="headerlink" title="åç«¯é…ç½®ï¼ˆkoaï¼‰"></a>åç«¯é…ç½®ï¼ˆkoaï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//If-Modified-Since: å¯¹åº”  Last-Modifiedå€¼</span><br><span class="line">//If-None-Match:  å¯¹åº”  etagå€¼</span><br><span class="line"> const etag = ctx.headers[&apos;if-none-match&apos;]</span><br><span class="line">    if (etag === &apos;777&apos;) &#123;</span><br><span class="line">      ctx.status=304;</span><br><span class="line">      ctx.set(&#123;</span><br><span class="line">        //ç¼“å­˜æœ‰æ•ˆæ—¶é—´ä¸º2000000ï¼Œå…è®¸ç¼“å­˜ï¼Œä½†éœ€è¦éªŒè¯</span><br><span class="line">        &apos;Cache-Control&apos;: &apos;max-age=2000000, no-cache&apos;,</span><br><span class="line">        &apos;Last-Modified&apos;: &apos;123&apos;,</span><br><span class="line">        &apos;Etag&apos;: &apos;777&apos;</span><br><span class="line">      &#125;);</span><br><span class="line">      //å› ä¸ºå®šä¹‰äº† 304ï¼Œæ­¤æ—¶å°±ä¸ç”¨ç»™å‰å°è¿”å›æ•°æ®ï¼Œå‰å°ä¼šå–ç¼“å­˜æ•°æ®ã€‚</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      ctx.status=200;</span><br><span class="line">      ctx.set(&#123;</span><br><span class="line">        &apos;Cache-Control&apos;: &apos;max-age=2000000, no-cache&apos;,</span><br><span class="line">        &apos;Last-Modified&apos;: &apos;123&apos;,</span><br><span class="line">        &apos;Etag&apos;: &apos;777&apos;</span><br><span class="line">      &#125;);</span><br><span class="line">      ctx.body = &#123;abc: &apos;good boy&apos;&#125;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="æµè§ˆå™¨è¡¨ç°è¡Œä¸º"><a href="#æµè§ˆå™¨è¡¨ç°è¡Œä¸º" class="headerlink" title="æµè§ˆå™¨è¡¨ç°è¡Œä¸º"></a>æµè§ˆå™¨è¡¨ç°è¡Œä¸º</h4><p>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œæ²¡æœ‰ç¼“å­˜ï¼ŒçŠ¶æ€å—ä¸º200ï¼Œæ­¤æ—¶çš„è¯·æ±‚å¤´ä¸Šæ˜¯æ²¡æœ‰etagç­‰ä¿¡æ¯çš„ï¼š<br><figure class="image-box">                <img src="/image/http/cache2.jpg" alt title class>                <p></p>            </figure><br>æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚å®Œåï¼Œç¬¬äºŒæ¬¡å‘èµ·è¯·æ±‚ï¼Œå‰å°ä¸ç”¨åšä»»ä½•è®¾ç½®ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç¬¬ä¸€æ¬¡è¯·æ±‚è¿”å›ç»™å‰å°çš„ etagã€Last-Modifiedç­‰ç›¸å…³éªŒè¯ç¼“å­˜çš„å‚æ•°ï¼Œå‘é€ç»™åå°ï¼Œåå°å¯¹æ¯”éªŒè¯åï¼Œé€šçŸ¥å‰å°ä½¿ç”¨ç¼“å­˜304.<br><figure class="image-box">                <img src="/image/http/cache3.jpg" alt title class>                <p></p>            </figure></p><h4 id="If-Modified-Since-å¯¹åº”-Last-Modified"><a href="#If-Modified-Since-å¯¹åº”-Last-Modified" class="headerlink" title="If-Modified-Since å¯¹åº” Last-Modified"></a>If-Modified-Since å¯¹åº” Last-Modified</h4><p>å½“åå°è¿”å›å‰å°çš„å“åº”å¤´åŒ…å« Last-Modifiedæ—¶ï¼Œæµè§ˆå™¨ä¸‹æ¬¡è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´å°†åŒ…å«Last-Modifiedä¿¡æ¯ï¼Œè€Œè¿™ä¸ªä¿¡æ¯æ¢æˆIf-Modified-Sinceæ¥è¡¨ç¤ºã€‚<br>åŒç†If-None-Match:  å¯¹åº”  etagå€¼</p><h4 id="If-None-Match-å¯¹åº”-etag"><a href="#If-None-Match-å¯¹åº”-etag" class="headerlink" title="If-None-Match å¯¹åº” etag"></a>If-None-Match å¯¹åº” etag</h4><p>å‚è€ƒã€ŠIf-Modified-Since å¯¹åº” Last-Modifiedã€‹</p><h4 id="æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†etagç­‰å‘ç»™åå°"><a href="#æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†etagç­‰å‘ç»™åå°" class="headerlink" title="æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†etagç­‰å‘ç»™åå°"></a>æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†etagç­‰å‘ç»™åå°</h4><p>æµè§ˆå™¨è‡ªåŠ¨å°†etagç­‰è‡ªåŠ¨ä¼ ç»™åå°ï¼Œä¸éœ€è¦å‰å°åšä»»ä½•è®¾ç½®ï¼Œè¿™æ˜¯æµè§ˆå™¨çš„httpåè®®æœºåˆ¶å†³å®šçš„ã€‚</p><h4 id="å‹¾é€‰æ§åˆ¶å°Disable-cache"><a href="#å‹¾é€‰æ§åˆ¶å°Disable-cache" class="headerlink" title="å‹¾é€‰æ§åˆ¶å°Disable cache"></a>å‹¾é€‰æ§åˆ¶å°Disable cache</h4><p>å‹¾é€‰æµè§ˆå™¨æ§åˆ¶å°Disable cacheæ—¶ï¼Œæµè§ˆå™¨å°†ä¸ä¼šæŠŠetagç­‰ç¼“å­˜éªŒè¯ç›¸å…³çš„å‚æ•°ä¼ ç»™åå°ï¼Œå› ä¸ºä¸éœ€è¦ç¼“å­˜äº†ã€‚</p><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><h4 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ul><li>é€šè¿‡set-cookieè®¾ç½®</li><li>ä¸‹æ¬¡è¯·æ±‚ä¼šè‡ªåŠ¨å¸¦ä¸Š</li><li>é”®å€¼å¯¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ª</li><li>é»˜è®¤å…³é—­æµè§ˆå™¨å¤±æ•ˆ</li><li>å¯é€šè¿‡è®¾ç½®cookieçš„æœ‰æ•ˆæœŸï¼Œè®©æµè§ˆå™¨å…³é—­åï¼Œcookieä»ç„¶æœ‰æ•ˆ</li></ul><h4 id="cookieæœ‰æ•ˆæœŸè¡¥å……"><a href="#cookieæœ‰æ•ˆæœŸè¡¥å……" class="headerlink" title="cookieæœ‰æ•ˆæœŸè¡¥å……"></a>cookieæœ‰æ•ˆæœŸè¡¥å……</h4><ul><li><p>æ²¡æœ‰è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼ˆä¼šè¯cookieï¼‰ï¼›<br>(1ï¼‰å…³é—­æµè§ˆå™¨ï¼›<br>ï¼ˆ2ï¼‰æ‰‹åŠ¨æ¸…é™¤Cookieï¼›</p></li><li><p>è®¾ç½®æ—¶é—´ï¼›<br>ï¼ˆ1ï¼‰æ—¶é—´åˆ°äº†å¤±æ•ˆï¼Œå³ä½¿å…³é—­äº†æµè§ˆå™¨ä¹Ÿä¸ä¼šè¢«æ¸…é™¤ï¼Œå› ä¸ºcookieä¿¡æ¯è¢«ä¿å­˜åœ¨äº†ç¡¬ç›˜ä¸Šï¼Œæµè§ˆå™¨å†æ¬¡æ‰“å¼€çš„æ—¶å€™å°±ä¼šè¯»å–ç¡¬ç›˜ä¸Šçš„æ•°æ®ï¼Œè€Œä¸”ä¸åŒçš„æµè§ˆå™¨ä¹‹é—´æ˜¯å¯ä»¥å…±äº«çš„ï¼›<br>ï¼ˆ2ï¼‰æ‰‹åŠ¨æ¸…é™¤Cookieï¼›</p></li></ul><figure class="image-box">                <img src="/image/http/setcookie1.jpg" alt title class>                <p></p>            </figure><h4 id="cookieæ¦‚è¿°"><a href="#cookieæ¦‚è¿°" class="headerlink" title="cookieæ¦‚è¿°"></a>cookieæ¦‚è¿°</h4><p>cookieæ˜¯åå°ä¼ ç»™å‰å°ï¼Œå‰å°å†åˆ©ç”¨æµè§ˆå™¨çš„cookieå¯ä»¥éšhttpå‘å›ç»™åå°çš„ç‰¹æ€§ï¼Œå¯¹å‘å›å¯¹cookieè¿›è¡ŒéªŒè¯ã€‚</p><ul><li>ç¬¬ä¸€æ¬¡å‘åå°å‘èµ·è¯·æ±‚åï¼Œåå°è¿”å›çš„å“åº”å¤´ï¼ˆresponse headersï¼‰åŒ…å«äº†ç»™æµè§ˆå™¨è®¾ç½®cookieå¯¹åŠŸèƒ½ï¼ˆset-cookieï¼‰<figure class="image-box">                <img src="/image/font_end/cookie.jpg" alt title class>                <p></p>            </figure></li><li>æµè§ˆå™¨æ‹¿åˆ°cookieåï¼Œcookieæœ‰ä¸ªç‰¹æ€§ï¼ŒåŒåŸŸåä¸‹çš„cookieåœ¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šå‘å›ç»™åå°</li><li>åå°é€šè¿‡æ¯”å¯¹sessionçš„cookieï¼Œè¿›è¡Œè¶…æ—¶ã€ç™»é™†ç­‰æ ¡éªŒ</li></ul><p>è¡¥å……ä¸€ç‚¹cookieçŸ¥è¯†ï¼š<br>å¦‚ä¸‹å›¾ Expiresï¼max-age çš„å€¼ä¸º Nï¼Aæ˜¯sessionæ°¸ä¹…æœ‰æ•ˆçš„æ„æ€ï¼Œå¦å¤–ä¸€ä¸ªæ¯ä¸ªcookieå¯¹åº”ä¸€ä¸ªåŸŸåã€‚<br><figure class="image-box">                <img src="/image/font_end/cookie1.jpg" alt title class>                <p></p>            </figure></p><h4 id="å…³äºcookieè®¾ç½®"><a href="#å…³äºcookieè®¾ç½®" class="headerlink" title="å…³äºcookieè®¾ç½®"></a>å…³äºcookieè®¾ç½®</h4><p>å‰åç«¯éƒ½å¯ä»¥è®¾ç½®cookieï¼Œä¸€æ¬¡è®¾ç½®å¥½ï¼Œä¸‹æ¬¡å‘è¯·æ±‚ï¼ŒåŒåŸŸåä¸‹ï¼Œcookieè‡ªåŠ¨å¸¦ä¸Šã€‚</p><h4 id="cookieä¸localStorageåŒºåˆ«"><a href="#cookieä¸localStorageåŒºåˆ«" class="headerlink" title="cookieä¸localStorageåŒºåˆ«"></a>cookieä¸localStorageåŒºåˆ«</h4><p>cookie ä¸»è¦ç»™åç«¯æœåŠ¡å™¨ç”¨çš„ï¼Œç”¨äºç”¨æˆ·çš„éªŒè¯ï¼Œå› ä¸ºä¸€æ—¦åç«¯æœåŠ¡å™¨è®¾ç½®äº†cookieï¼Œæ¯”å¦‚åœ¨ç™»é™†æˆåŠŸåï¼Œè®¾ç½®å¥½cookieï¼Œé‚£ä¹ˆåŒåŸŸåä¸‹ï¼Œå†æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œcookieä¼šè‡ªåŠ¨å¸¦ä¸Šï¼Œåå°å¯ä»¥å‡­å€Ÿè¿™ä¸ªcookieè¿›è¡Œè®¤è¯ã€‚<br>localStorageä¸»è¦ç»™å‰ç«¯ä½¿ç”¨ã€‚</p><h4 id="cookieå®ç°éªŒè¯çš„åŸç†"><a href="#cookieå®ç°éªŒè¯çš„åŸç†" class="headerlink" title="cookieå®ç°éªŒè¯çš„åŸç†"></a>cookieå®ç°éªŒè¯çš„åŸç†</h4><p>å‚è€ƒä¸Šé¢ã€Šcookieä¸localStorageåŒºåˆ«ã€‹</p><h4 id="koaç«¯è®¾ç½®cookie"><a href="#koaç«¯è®¾ç½®cookie" class="headerlink" title="koaç«¯è®¾ç½®cookie"></a>koaç«¯è®¾ç½®cookie</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">if(ctx.url === &apos;/getData&apos;)&#123;</span><br><span class="line">    ctx.cookies.set(&apos;abc1111&apos;,  &apos;123111&apos;)</span><br><span class="line">    ctx.cookies.set(</span><br><span class="line">      &apos;cid&apos;, </span><br><span class="line">      &apos;hello world1111&apos;,</span><br><span class="line">      &#123;</span><br><span class="line">        domain: &apos;127.0.0.1&apos;,  // å†™cookieæ‰€åœ¨çš„åŸŸå</span><br><span class="line">        maxAge: 80000, // cookieæœ‰æ•ˆæ—¶é•¿</span><br><span class="line">        httpOnly: false,  // æ˜¯å¦åªç”¨äºhttpè¯·æ±‚ä¸­è·å–</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">      ctx.set(&#123;</span><br><span class="line">        &apos;Cache-Control&apos;: &apos;max-age=2000000, no-cache&apos;,</span><br><span class="line">      &#125;);</span><br><span class="line">      ctx.body = &#123;abc: &apos;good boy&apos;&#125;;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="httpOnly-ä¸-document-cookie"><a href="#httpOnly-ä¸-document-cookie" class="headerlink" title="httpOnly ä¸ document.cookie"></a>httpOnly ä¸ document.cookie</h4><p>è®¾ç½® httpOnly ä¸ºtrueæ—¶ï¼Œ å°†æ— æ³•é€šè¿‡document.cookieè·å–åˆ°è¯¥cookieã€‚</p><h4 id="æ§åˆ¶å°çš„Application"><a href="#æ§åˆ¶å°çš„Application" class="headerlink" title="æ§åˆ¶å°çš„Application"></a>æ§åˆ¶å°çš„Application</h4><p>cookieå¯åœ¨æ§åˆ¶å°çš„ Applicationä¸ŠæŸ¥çœ‹ï¼Œå¦‚æœè®¾ç½®äº†cookieçš„maxAgeï¼Œæœ‰æ•ˆæœŸè¿‡åï¼ŒApplicationä¸Šå°†æŸ¥ä¸åˆ°æ­¤cookieã€‚<br><figure class="image-box">                <img src="/image/http/setcookie2.jpg" alt title class>                <p></p>            </figure></p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p>è¿™é‡Œæ˜¯ä¸€ä¸ªå‰åç«¯ä¸€ä½“çš„cookie demoï¼Œæ—¢å®ç°äº†å‰ç«¯ åˆå®ç°äº†åç«¯ è®¾ç½®cookieã€‚<br><a href="https://github.com/YeWills/learns/tree/master/node/cookie" target="_blank" rel="noopener">demo</a></p><h3 id="connectä¸HTTPé•¿è¿æ¥"><a href="#connectä¸HTTPé•¿è¿æ¥" class="headerlink" title="connectä¸HTTPé•¿è¿æ¥"></a>connectä¸HTTPé•¿è¿æ¥</h3><h4 id="é•¿è¿æ¥çš„æ„ä¹‰"><a href="#é•¿è¿æ¥çš„æ„ä¹‰" class="headerlink" title="é•¿è¿æ¥çš„æ„ä¹‰"></a>é•¿è¿æ¥çš„æ„ä¹‰</h4><p>httpè¯·æ±‚æ˜¯å»ºç«‹åœ¨tcpè¿æ¥ä¸Šçš„ï¼Œä¸€ä¸ªtcpè¿æ¥å¯å‘å¤šä¸ªhttpè¿æ¥ï¼›<br>å¦‚æœæ¯ä¸ªhttpè¯·æ±‚éƒ½è¦åˆ›å»ºä¸€ä¸ªtcpè¿æ¥ï¼Œå°±ç›¸å½“å½±å“æ€§èƒ½ï¼Œæ‰€ä»¥éœ€è¦é•¿è¿æ¥ï¼Œè®©å¤šä¸ªhttpè¯·æ±‚å…±ç”¨ä¸€ä¸ªtcpè¿æ¥ã€‚</p><h4 id="åå°è®¾ç½®é•¿é“¾æ¥"><a href="#åå°è®¾ç½®é•¿é“¾æ¥" class="headerlink" title="åå°è®¾ç½®é•¿é“¾æ¥"></a>åå°è®¾ç½®é•¿é“¾æ¥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">response.writeHead(200, &#123;</span><br><span class="line">     &apos;Content-Type&apos;: &apos;image/jpg&apos;,</span><br><span class="line">     &apos;Connection&apos;: &apos;keep-alive&apos; // or close</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><h4 id="æ§åˆ¶å°æŸ¥çœ‹connect-id"><a href="#æ§åˆ¶å°æŸ¥çœ‹connect-id" class="headerlink" title="æ§åˆ¶å°æŸ¥çœ‹connect-id"></a>æ§åˆ¶å°æŸ¥çœ‹connect-id</h4><p>ä¸€ä¸ªtcpè¿æ¥ä¼šäº§ç”Ÿä¸€ä¸ªå¯¹åº”çš„connect-idä½œä¸ºæ ‡è¯†ã€‚å¯é€šè¿‡connectidæ¥çœ‹å»ºç«‹äº†å¤šå°‘ä¸ªtcpè¿æ¥ã€‚<br><figure class="image-box">                <img src="/image/http/setcookie2.jpg" alt title class>                <p></p>            </figure></p><h4 id="ä¸åŒåŸŸåä¸‹çš„è¯·æ±‚ï¼Œconnect-idä¸ä¸€æ ·"><a href="#ä¸åŒåŸŸåä¸‹çš„è¯·æ±‚ï¼Œconnect-idä¸ä¸€æ ·" class="headerlink" title="ä¸åŒåŸŸåä¸‹çš„è¯·æ±‚ï¼Œconnect-idä¸ä¸€æ ·"></a>ä¸åŒåŸŸåä¸‹çš„è¯·æ±‚ï¼Œconnect-idä¸ä¸€æ ·</h4><p>åœ¨è°·æ­Œæµè§ˆå™¨ç”¨çš„æ˜¯http2ï¼Œä¸€ä¸ªé¡µé¢åªæœ‰ä¸€ä¸ªtcpè¿æ¥ï¼Œéƒ½æ˜¯é•¿é“¾æ¥ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªconnectidï¼Œä¸è¿‡ä¸åŒåŸŸåçš„èµ„æºéœ€è¦å†å»ºä¸€ä¸ªtcpè¿æ¥ã€‚</p><h4 id="http1-1-tcpæœ€å¤§httpè¯·æ±‚æ•°ä¸º6"><a href="#http1-1-tcpæœ€å¤§httpè¯·æ±‚æ•°ä¸º6" class="headerlink" title="http1.1 tcpæœ€å¤§httpè¯·æ±‚æ•°ä¸º6"></a>http1.1 tcpæœ€å¤§httpè¯·æ±‚æ•°ä¸º6</h4><h3 id="Content-Type-æ•°æ®åå•†"><a href="#Content-Type-æ•°æ®åå•†" class="headerlink" title="Content-Type (æ•°æ®åå•†)"></a>Content-Type (æ•°æ®åå•†)</h3><h4 id="è¯·æ±‚å¤´çš„Content-Type"><a href="#è¯·æ±‚å¤´çš„Content-Type" class="headerlink" title="è¯·æ±‚å¤´çš„Content-Type"></a>è¯·æ±‚å¤´çš„Content-Type</h4><p>è¿™é‡Œè¯´éƒ½æ˜¯ è¯·æ±‚å¤´ä¸Šéƒ½ Content-Typeï¼Œè¿™ä¸ªçš„ä½œç”¨ä¸»è¦æ˜¯å‘Šè¯‰æœåŠ¡å™¨ï¼Œè¯·æ±‚å‚æ•°è¦ä»¥ä»€ä¹ˆçš„å½¢å¼è¿›è¡Œè§£æï¼›<br>æ¯”å¦‚ï¼Œä¸€ä¸ªåŒ…å«å›¾ç‰‡ç­‰ä¿¡æ¯çš„formè¡¨å•æäº¤çš„æ—¶å€™ï¼Œå¦‚æœä¸è®¾ç½®Content-Typeï¼ŒæœåŠ¡å™¨å°±æ— æ³•æ­£ç¡®è§£æformè¡¨å•ä¸­çš„å›¾ç‰‡ä¿¡æ¯ï¼›<br>æ­¤æ—¶åº”è¯¥è®¾ç½®Content-Type:multipart/form-dataï¼Œè®©æœåŠ¡å™¨ç”¨æµçš„æ¥è§£æè¯·æ±‚å‚æ•°ã€‚</p><h4 id="å“åº”å¤´çš„Content-Type"><a href="#å“åº”å¤´çš„Content-Type" class="headerlink" title="å“åº”å¤´çš„Content-Type"></a>å“åº”å¤´çš„Content-Type</h4><p>å“åº”å¤´çš„Content-Typeï¼Œå‘Šè¯‰å‰å°æ•°æ®ç±»å‹ï¼Œè®©å‰å°æŒ‰æ­£ç¡®çš„æ–¹å¼è§£æå“åº”æ•°æ®ã€‚</p><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>æ‰€ä»¥Content-Typeå…¶å®å°±æ˜¯å‰åå°ç”¨æ¥è¿›è¡Œåå•†å¦‚ä½•è¿›è¡Œæ•°æ®è½¬æ¢çš„ã€‚</p><h3 id="é‡å®šå‘-Redirect"><a href="#é‡å®šå‘-Redirect" class="headerlink" title="é‡å®šå‘ (Redirect)"></a>é‡å®šå‘ (Redirect)</h3><h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><p>é‡å®šå‘ä¸€èˆ¬ç”¨äºä¸€ä¸ªurlåœ°å€å·²ç»è¢«åºŸå¼ƒï¼Œä½†ä¸ºäº†å…¼å®¹ï¼Œéœ€è¦å°†åºŸå¼ƒåœ°å€é‡å®šå‘åˆ°æ–°çš„urlä¸­ã€‚<br>æ‰€ä»¥å®ƒéœ€è¦åœ¨æœåŠ¡ç«¯è®¾ç½®å“åº”ç ä¸º301ï¼Œè¿™æ ·ï¼Œæµè§ˆå™¨çš„httpæœºåˆ¶å°±ä¼šè®°ä½ï¼Œä¸‹æ¬¡å‘åŒæ ·è¯·æ±‚æ—¶ï¼Œå°±è‡ªåŠ¨è·³è½¬åˆ°é‡å®šå‘çš„urlåœ°å€ã€‚</p><h4 id="éœ€è¦æœåŠ¡ç«¯è®¾ç½®302"><a href="#éœ€è¦æœåŠ¡ç«¯è®¾ç½®302" class="headerlink" title="éœ€è¦æœåŠ¡ç«¯è®¾ç½®302"></a>éœ€è¦æœåŠ¡ç«¯è®¾ç½®302</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (request.url === &apos;/&apos;) &#123;</span><br><span class="line">    response.writeHead(302, &#123;  // or 301</span><br><span class="line">      &apos;Location&apos;: &apos;/new&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">    response.end()</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯è®¿é—®æ—¶æ•ˆæœå¦‚ä¸‹,é‡å®šå‘å¯èƒ½ä¼šå¤šä¸€ä¸ªlocationå¤´ï¼š<br><figure class="image-box">                <img src="/image/http/redi1.jpg" alt title class>                <p></p>            </figure></p><h4 id="302-ä¸-301"><a href="#302-ä¸-301" class="headerlink" title="302 ä¸ 301"></a>302 ä¸ 301</h4><p>302æ˜¯ä¸´æ—¶é‡å®šå‘ï¼›<br>301æ˜¯æ°¸ä¹…é‡å®šå‘ï¼›</p><h4 id="301-302çš„ç‰¹æ®Šç‰¹æ€§"><a href="#301-302çš„ç‰¹æ®Šç‰¹æ€§" class="headerlink" title="301 302çš„ç‰¹æ®Šç‰¹æ€§"></a>301 302çš„ç‰¹æ®Šç‰¹æ€§</h4><p>å¦‚ä¸Šå¯çŸ¥ï¼Œ301å’Œ302æ˜¯ åœ¨åç«¯è®¾ç½®å¥½ï¼ŒåŒæ—¶æµè§ˆå™¨ä¹Ÿè¿›è¡Œäº†é…åˆï¼Œå®ç°çš„ä¸€ç§è¡Œä¸ºã€‚<br>æµè§ˆå™¨è¯»å–åˆ°æ˜¯302 301æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è·³è½¬åˆ°æŒ‡å®šçš„é‡å®šå‘åœ°å€ï¼Œè¿™æ˜¯æµè§ˆå™¨è‡ªå·±ä¼šåšçš„ï¼Œåº”è¯¥ä¹Ÿæ˜¯httpåè®®çš„ä¸€éƒ¨åˆ†ã€‚</p><h4 id="301åç»­è¯·æ±‚éƒ½æ˜¯è¯»å–ç¼“å­˜"><a href="#301åç»­è¯·æ±‚éƒ½æ˜¯è¯»å–ç¼“å­˜" class="headerlink" title="301åç»­è¯·æ±‚éƒ½æ˜¯è¯»å–ç¼“å­˜"></a>301åç»­è¯·æ±‚éƒ½æ˜¯è¯»å–ç¼“å­˜</h4><p>æ³¨æ„çš„æ˜¯ï¼Œ301æ˜¯ç‰¹æ®Šçš„å­˜åœ¨ï¼Œå¦‚æœä¸æ˜¯å¿…é¡»ï¼Œä¸è¦éšæ„è®¾ç½®301ï¼Œå› ä¸ºä¸€æ—¦è®¾ç½®301ï¼Œæµè§ˆå™¨å°†åœ¨ç¬¬ä¸€æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚åï¼Œ<br>åç»­å°†ä¸å†è¯·æ±‚æœåŠ¡å™¨ï¼Œç›´æ¥è¯»å–æµè§ˆå™¨ç¼“å­˜ã€‚é™¤éæ‰‹åŠ¨æ¸…æ¥šæµè§ˆå™¨ç¼“å­˜ã€‚</p><p>302æ²¡æœ‰æ­¤ç‰¹æ€§ã€‚</p><h4 id="å¦‚ä½•é€‰æ‹©301æˆ–302"><a href="#å¦‚ä½•é€‰æ‹©301æˆ–302" class="headerlink" title="å¦‚ä½•é€‰æ‹©301æˆ–302"></a>å¦‚ä½•é€‰æ‹©301æˆ–302</h4><p>301å› ä¸ºæµè§ˆå™¨åœ¨åç»­è¯·æ±‚éƒ½è¯»å–æµè§ˆå™¨ç¼“å­˜ï¼Œæ‰€ä»¥ä¸€æ—¦è®¾ç½®301ï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨åˆ é™¤ç¼“å­˜ï¼Œå¦åˆ™ç”¨æˆ·å†ä¹Ÿä¸ä¼šè¯·æ±‚æœåŠ¡å™¨ï¼Œè·å–æœ€æ–°çš„è·³è½¬åœ°å€ï¼›</p><p>302æ¯æ¬¡åç»­è¯·æ±‚ä¼šå†æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼Œè·å–æœ€æ–°çš„è·³è½¬åœ°å€ï¼Œæ‰€ä»¥æœåŠ¡å™¨èƒ½å¤Ÿæ›´å¥½åœ°æ§åˆ¶å®¢æˆ·ç«¯è¡Œä¸ºï¼Œè·å–æœ€æ–°è·³è½¬åœ°å€ï¼›<br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾ç½®302çš„ç¼“å­˜æœ‰æ•ˆæœŸã€‚</p><h3 id="èµ„æºè·å–ç­–ç•¥-Content-Security-Policy"><a href="#èµ„æºè·å–ç­–ç•¥-Content-Security-Policy" class="headerlink" title="èµ„æºè·å–ç­–ç•¥ Content-Security-Policy"></a>èµ„æºè·å–ç­–ç•¥ Content-Security-Policy</h3><p>æœåŠ¡ç«¯è®¾ç½®Content-Security-Policyï¼Œé™åˆ¶æ¥å£æ•°æ®è·å–çš„æ–¹å¼ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.writeHead(200, &#123;</span><br><span class="line">     &apos;Content-Type&apos;: &apos;text/html&apos;,</span><br><span class="line">     //é™åˆ¶æµè§ˆå™¨åªèƒ½é€šè¿‡httpsæ¥å‘èµ·è¯·æ±‚</span><br><span class="line">     &apos;Content-Security-Policy&apos;: &apos;script-src https&apos;</span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure></p><p>å‰å°æ¥åˆ°æœåŠ¡å™¨çš„è¿”å›åï¼Œè¯»å–Content-Security-Policyå€¼ï¼Œå¦‚æœæµè§ˆå™¨æ˜¯é€šè¿‡éhttpså‘èµ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆæ”¹å“åº”æ•°æ®å°†ä¸è¢«æ˜¾ç¤ºï¼Œå¹¶ä¸”æŠ›é”™æç¤ºèµ„æºè·å–ç­–ç•¥å¼‚å¸¸</p><h3 id="https"><a href="#https" class="headerlink" title="https"></a>https</h3><p><a href="https://coding.imooc.com/class/chapter/225.html#Anchor" target="_blank" rel="noopener">å‚è€ƒ4-3</a><br>httpsä¸»è¦é€šè¿‡å…¬é’¥å’Œç§é’¥å®ç°ã€‚<br><figure class="image-box">                <img src="/image/http/https.jpg" alt title class>                <p></p>            </figure></p><h3 id="è¾“å…¥ä¸€ä¸ªurlåå‘ç”Ÿäº†ä»€ä¹ˆ"><a href="#è¾“å…¥ä¸€ä¸ªurlåå‘ç”Ÿäº†ä»€ä¹ˆ" class="headerlink" title="è¾“å…¥ä¸€ä¸ªurlåå‘ç”Ÿäº†ä»€ä¹ˆ"></a>è¾“å…¥ä¸€ä¸ªurlåå‘ç”Ÿäº†ä»€ä¹ˆ</h3><figure class="image-box">                <img src="/image/http/page.jpg" alt title class>                <p></p>            </figure> ]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> httpåè®® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ç¬”è®°</title>
      <link href="/2019/05/21/font_end/"/>
      <url>/2019/05/21/font_end/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰ç«¯çŸ¥è¯†"><a href="#å‰ç«¯çŸ¥è¯†" class="headerlink" title="å‰ç«¯çŸ¥è¯†"></a>å‰ç«¯çŸ¥è¯†</h2><h3 id="æµè§ˆå™¨ç›´æ¥ä½¿ç”¨import-JavaScript-modules"><a href="#æµè§ˆå™¨ç›´æ¥ä½¿ç”¨import-JavaScript-modules" class="headerlink" title="æµè§ˆå™¨ç›´æ¥ä½¿ç”¨import (JavaScript modules)"></a>æµè§ˆå™¨ç›´æ¥ä½¿ç”¨import (JavaScript modules)</h3><p>å‚è€ƒã€Šd3å›¾å½¢ã€demoè®²è§£ã€ä½¿ç”¨ç»éªŒ  â€“   èµ°åŠ¿å›¾  â€“ import module çš„ç»å…¸ä½¿ç”¨ã€‹</p><h3 id="æµè§ˆå™¨ç¼“å­˜"><a href="#æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="æµè§ˆå™¨ç¼“å­˜"></a>æµè§ˆå™¨ç¼“å­˜</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>æµè§ˆå™¨ç¼“å­˜åˆ†ä¸ºå¼ºã€åå•†ç¼“å­˜ï¼›<br>ä¸Šé¢æ˜¯æ ¹æ®é¡µé¢å¦‚ä½•åˆ©ç”¨ç¼“å­˜çš„æ€åº¦æ¥åˆ†çš„ã€‚<br>å¼ºç¼“å­˜æ˜¯æŒ‡ï¼Œåªè¦æµè§ˆå™¨æœ‰è¿™ä¸ªç¼“å­˜ï¼Œé¡µé¢å°±ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä¹Ÿä¸å»é—®è¿™ä¸ªç¼“å­˜æ˜¯å¦æœ€æ–°æˆ–æ”¹å˜ï¼›<br>åå•†ç¼“å­˜æ˜¯æŒ‡ï¼Œé¡µé¢åœ¨ç”¨æµè§ˆå™¨ç¼“å­˜æ—¶ï¼Œä¼šæ ¹æ®è¿™ä¸ªç¼“å­˜çš„çŠ¶æ€ï¼Œå†³å®šæ˜¯å¦ä½¿ç”¨è¿™ä¸ªç¼“å­˜ã€‚<br><figure class="image-box">                <img src="/image/font_end/cache.jpg" alt title class>                <p></p>            </figure></p><h4 id="å¼ºç¼“å­˜"><a href="#å¼ºç¼“å­˜" class="headerlink" title="å¼ºç¼“å­˜"></a>å¼ºç¼“å­˜</h4><p>è§£é‡Šå¦‚ä¸Š</p><h4 id="åå•†ç¼“å­˜"><a href="#åå•†ç¼“å­˜" class="headerlink" title="åå•†ç¼“å­˜"></a>åå•†ç¼“å­˜</h4><p>è§£é‡Šå¦‚ä¸Š</p><h4 id="äºŒè€…åŒºåˆ«"><a href="#äºŒè€…åŒºåˆ«" class="headerlink" title="äºŒè€…åŒºåˆ«"></a>äºŒè€…åŒºåˆ«</h4><ul><li>å¼ºç¼“å­˜è¿”å›çŠ¶æ€ç æ˜¯200ï¼Œä½†ä¸å¾€æœåŠ¡å™¨å‘è¯·æ±‚ï¼›</li><li>åå•†ç¼“å­˜è¿”å›çŠ¶æ€ç æ˜¯304ï¼Œä¼šç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼›</li><li>äºŒè€…çš„åŒºåˆ«ä¹Ÿåœ¨è¿™ä¸ªå›¾ç‰‡ä¸Šï¼Œåå•†ç¼“å­˜ä¼šæœ‰ last-modifiedï¼Œif-modified-since ç­‰ï¼Œå¼ºç¼“å­˜åˆ™æ²¡æœ‰ï¼Œå¯ä¾æ­¤æ¥åˆ¤æ–­æ˜¯å¦å¼ºæˆ–åå•†ã€‚<figure class="image-box">                <img src="/image/font_end/cache.jpg" alt title class>                <p></p>            </figure></li></ul><h3 id="å®‰å…¨ç±»"><a href="#å®‰å…¨ç±»" class="headerlink" title="å®‰å…¨ç±»"></a>å®‰å…¨ç±»</h3><h4 id="CSRF-è·¨ç«™è¯·æ±‚ä¼ªé€ "><a href="#CSRF-è·¨ç«™è¯·æ±‚ä¼ªé€ " class="headerlink" title="CSRF è·¨ç«™è¯·æ±‚ä¼ªé€ "></a>CSRF è·¨ç«™è¯·æ±‚ä¼ªé€ </h4><ul><li><p>åŸç†<br>CSRFä¸­æ–‡ç§°ä¹‹ä¸º è·¨ç«™è¯·æ±‚ä¼ªé€ ã€‚<br>å¦‚ä¸‹ï¼Œç”¨æˆ·ç™»é™†ç½‘ç«™Aåï¼Œè·å¾—cookieï¼Œ<br>ä¹‹åï¼Œç”¨æˆ·å†ç™»é™†ç½‘ç«™Bï¼ŒBç«™å¼•è¯±ç”¨æˆ·è®¿é—®Aç½‘ç«™ï¼Œ<br>ç”±äºè¿™ä¸ªè®¿é—®æ¥å£ä¸ä¹‹å‰çš„cookieåŒåŸŸåï¼Œå› æ­¤å†æ¬¡è®¿é—®Aç½‘ç«™æ—¶æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Šcookieï¼Œ<br>ä»è€Œè®¿é—®æˆåŠŸï¼Œå¯¼è‡´éæ³•è½¬è´¦æˆ–è€…ç”¨æˆ·æ•°æ®ç›—å–ç­‰ç­‰ã€‚</p><figure class="image-box">                <img src="/image/font_end/csrf.jpg" alt title class>                <p></p>            </figure></li><li><p>é˜²å¾¡</p><ul><li>Token éªŒè¯ï¼šæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨ç»™æ¥å£å¸¦ä¸Štokenï¼Œå› æ­¤åå°å¦‚æœåštokenéªŒè¯ï¼Œæ˜¯å¯ä»¥é¿å…csrfçš„ã€‚</li><li>Referer éªŒè¯ï¼šæœåŠ¡ç«¯ä¼šæ¯”å¯¹æ¥å£è¯·æ±‚çš„referer(æ¥å£çš„é¡µé¢æ¥æº)ï¼Œå¦‚æœä¸æ˜¯æˆ‘è¿™ä¸ªç«™ç‚¹çš„refererï¼Œè‹¥ä¸æ˜¯å°±é˜»æ­¢ã€‚</li></ul></li><li><p>æ›´å¤š<br><a href="https://www.bilibili.com/video/BV1Dt411V7ao?p=1" target="_blank" rel="noopener">æŸ¥çœ‹</a></p></li></ul><h4 id="XSS-è·¨ç«™è„šæœ¬æ”»å‡»"><a href="#XSS-è·¨ç«™è„šæœ¬æ”»å‡»" class="headerlink" title="XSS è·¨ç«™è„šæœ¬æ”»å‡»"></a>XSS è·¨ç«™è„šæœ¬æ”»å‡»</h4><ul><li>åŸç†<br>æƒ³ç½‘ç«™æ³¨å…¥ä¸€äº›jsè„šæœ¬ï¼Œè¾“å…¥çš„è¿™äº›è„šæœ¬åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œå®ç°æ”»å‡»ï¼Œå¯è·å–cookieæˆ–è€…ä¸²æ”¹é¡µé¢ä¿¡æ¯ä»¥åŠè½¬è´¦ç­‰ç­‰ã€‚<br>å…¶ç‰¹ç‚¹ä¸»è¦æ˜¯ åˆ©ç”¨æµè§ˆå™¨ç«¯è¿è¡Œ æ³¨å…¥çš„jsè„šæœ¬ï¼Œå› æ­¤å…¶é˜²å¾¡ä¹Ÿä¸æ­¤æœ‰å…³ã€‚</li><li>é˜²å¾¡<ul><li>å¯¹ç”¨æˆ·è¾“å…¥å†…å®¹è¿›è¡Œè½¬ä¹‰ï¼Œå¯¹è„šæœ¬è¯­è¨€è¿›è¡Œè¯†åˆ«è¿‡æ»¤ã€‚</li><li>å¯¹cookieç­‰æ•æ„Ÿä¿¡æ¯è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚è®¾ç½®cookie é€šè¿‡jsä¸å¯è¯»ã€‚</li></ul></li><li>demo<br><a href="https://github.com/YeWills/learns/tree/master/node/xss" target="_blank" rel="noopener">å°demo</a></li></ul><h2 id="è¡¨å•æäº¤"><a href="#è¡¨å•æäº¤" class="headerlink" title="è¡¨å•æäº¤"></a>è¡¨å•æäº¤</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><a href="https://blog.csdn.net/java_xxxx/article/details/81205315" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒåšå®¢</a></p><h3 id="enctype"><a href="#enctype" class="headerlink" title="enctype"></a>enctype</h3><p>formé»˜è®¤è‡ªå¸¦ä»¥ä¸‹ä¸‰ç§enctypeï¼Œå…¶ä»–enctypeéœ€è¦è‡ªå·±å°è£…ï¼š<br>EncTypeè¡¨æ˜æäº¤æ•°æ®çš„æ ¼å¼ ç”¨ Enctype å±æ€§æŒ‡å®šå°†æ•°æ®å›å‘åˆ°æœåŠ¡å™¨æ—¶æµè§ˆå™¨ä½¿ç”¨çš„ç¼–ç ç±»å‹ã€‚<br>ä¸‹è¾¹æ˜¯è¯´æ˜ï¼š<br>application/x-www-form-urlencoded(form é»˜è®¤)ï¼š çª—ä½“æ•°æ®è¢«ç¼–ç ä¸ºåç§°/å€¼å¯¹ã€‚è¿™æ˜¯æ ‡å‡†çš„ç¼–ç æ ¼å¼ã€‚<br>multipart/form-dataï¼š çª—ä½“æ•°æ®è¢«ç¼–ç ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œé¡µä¸Šçš„æ¯ä¸ªæ§ä»¶å¯¹åº”æ¶ˆæ¯ä¸­çš„ä¸€ä¸ªéƒ¨åˆ†ã€‚<br>text/plainï¼š çª—ä½“æ•°æ®ä»¥çº¯æ–‡æœ¬å½¢å¼è¿›è¡Œç¼–ç ï¼Œå…¶ä¸­ä¸å«ä»»ä½•æ§ä»¶æˆ–æ ¼å¼å­—ç¬¦ã€‚</p><h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application/x-www-form-urlencoded"></a>application/x-www-form-urlencoded</h3><ul><li>getè¯·æ±‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">&lt;!-- form é»˜è®¤æ˜¯getè¯·æ±‚ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">enctype</span>=<span class="string">"application/x-www-form-urlencoded"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="image-box">                <img src="/image/http_again/form1.jpg" alt title class>                <p></p>            </figure><p>ç‚¹å‡»æµè§ˆå™¨æœªè§£ç ä¼ å‚å‰ï¼š<br><figure class="image-box">                <img src="/image/http_again/form2.jpg" alt title class>                <p></p>            </figure><br>ç‚¹å‡»æµè§ˆå™¨è§£ç åçš„ä¼ å‚view sourceï¼š<br><figure class="image-box">                <img src="/image/http_again/form3.jpg" alt title class>                <p></p>            </figure></p><ul><li>postè¯·æ±‚<br>æ”¹ä¸ºpostè¯·æ±‚ï¼š<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">enctype</span>=<span class="string">"application/x-www-form-urlencoded"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>ç‚¹å‡»æµè§ˆå™¨æœªè§£ç ä¼ å‚å‰ï¼š<br><figure class="image-box">                <img src="/image/http_again/form-1-post.jpg" alt title class>                <p></p>            </figure><br>ç‚¹å‡»æµè§ˆå™¨è§£ç åçš„ä¼ å‚view sourceï¼š<br><figure class="image-box">                <img src="/image/http_again/form-1-post1.jpg" alt title class>                <p></p>            </figure></p><p>ä¸Šé¢å‘ç°ä¸€ä¸ªç°è±¡ï¼Œå½“å˜æˆpostè¯·æ±‚æ—¶ï¼Œå˜æˆäº†Form Dataï¼›<br>åŸæ¥å½“getè¯·æ±‚æ—¶ï¼Œæ˜¯Query string parameters</p><h3 id="text-plain"><a href="#text-plain" class="headerlink" title="text/plain"></a>text/plain</h3><ul><li>getè¯·æ±‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»æµè§ˆå™¨æœªè§£ç ä¼ å‚å‰ï¼š<br><figure class="image-box">                <img src="/image/http_again/form-text1.jpg" alt title class>                <p></p>            </figure><br>ç‚¹å‡»æµè§ˆå™¨è§£ç åçš„ä¼ å‚view sourceï¼š<br><figure class="image-box">                <img src="/image/http_again/form-text2.jpg" alt title class>                <p></p>            </figure></p><ul><li>postè¯·æ±‚<br>æ”¹ä¸ºpostè¯·æ±‚ï¼š<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>æµè§ˆå™¨è²Œä¼¼ä¸ä½œä»»ä½•è§£æï¼š<br><figure class="image-box">                <img src="/image/http_again/form-text3.jpg" alt title class>                <p></p>            </figure></p><h3 id="multipart-form-data-åŸç”Ÿ"><a href="#multipart-form-data-åŸç”Ÿ" class="headerlink" title="multipart/form-data (åŸç”Ÿ)"></a>multipart/form-data (åŸç”Ÿ)</h3><p>ç”¨formè‡ªå¸¦åŸç”Ÿè¯·æ±‚è®²è§£ï¼š</p><ul><li>getè¯·æ±‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"GET"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»æµè§ˆå™¨æœªè§£ç ä¼ å‚å‰ï¼š<br><figure class="image-box">                <img src="/image/http_again/form-mul1.jpg" alt title class>                <p></p>            </figure><br>ç‚¹å‡»æµè§ˆå™¨è§£ç åçš„ä¼ å‚view sourceï¼š<br><figure class="image-box">                <img src="/image/http_again/form-mul2.jpg" alt title class>                <p></p>            </figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">boundary=----WebKitFormBoundaryeRRkatgcCfoB2RDW</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Š,boundaryæ˜¯åˆ†ç•Œçº¿ï¼Œåªè¦æ˜¯multipart/form-dataè¯·æ±‚ï¼Œæµè§ˆå™¨é»˜è®¤ä¼šç”Ÿæˆè¿™ä¸ªåˆ†å‰²çº¿å‚æ•°ã€‚<br>ä¸ºä»€ä¹ˆåŒ…å«äºŒè¿›åˆ¶æµ(æ–‡ä»¶)çš„å…¥å‚æ—¶ï¼Œåªèƒ½ç”¨multipart/form-data ä¸èƒ½ç”¨ä»¥å‰çš„application/x-www-form-urlencoded ï¼Œå› ä¸ºäºŒè¿›åˆ¶æµ æ— æ³•å­—ç¬¦ä¸²åŒ–ï¼Œåªèƒ½åˆ†å‰²å‘é€ç»™æœåŠ¡å™¨ï¼›<br>è€Œè¿™ä¸ªåˆ†å‰²æ˜¯é€šè¿‡ <code>boundary=----WebKitFormBoundaryeRRkatgcCfoB2RDW</code>æ¥åˆ†å‰²çš„</p><ul><li>postè¯·æ±‚<br>æ”¹ä¸ºpostè¯·æ±‚ï¼š<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"text/plain"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>æµè§ˆå™¨è²Œä¼¼ä¸ä½œä»»ä½•è§£æï¼Œç›®å‰åŸå› ä½ç½®ï¼ŒåŸç”Ÿformå‘é€çš„ï¼Œå¦‚æœå¸¦fileä¸€å¾‹ä¸è§£æï¼Œå› æ­¤æˆ‘ä»¬ç”¨fetchæ¥åšï¼š<br><figure class="image-box">                <img src="/image/http_again/form-mul3.jpg" alt title class>                <p></p>            </figure></p><h3 id="multipart-form-data-fetch"><a href="#multipart-form-data-fetch" class="headerlink" title="multipart/form-data (fetch)"></a>multipart/form-data (fetch)</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> &gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span></span><br><span class="line"><span class="javascript">       form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">           <span class="built_in">console</span>.log(form)</span></span><br><span class="line">           e.preventDefault()</span><br><span class="line"><span class="javascript">           <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</span></span><br><span class="line"><span class="javascript">           fetch(<span class="string">'/form'</span>,&#123;</span></span><br><span class="line"><span class="javascript">               method:<span class="string">'POST'</span>,</span></span><br><span class="line">               body:formData</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">       &#125;)</span><br><span class="line">   <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»æµè§ˆå™¨æœªè§£ç ä¼ å‚å‰ï¼š<br><figure class="image-box">                <img src="/image/http_again/form-mul4.jpg" alt title class>                <p></p>            </figure><br>ç‚¹å‡»æµè§ˆå™¨è§£ç åçš„ä¼ å‚view sourceï¼š<br><figure class="image-box">                <img src="/image/http_again/form-mul5.jpg" alt title class>                <p></p>            </figure></p><h3 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h3><h4 id="ä¸ºä»€ä¹ˆè¦ç”¨formdata"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨formdata" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨formdata"></a>ä¸ºä»€ä¹ˆè¦ç”¨formdata</h4><p>ä¸ºä»€ä¹ˆè¦ç”¨formdataï¼Œå› ä¸ºæœ‰multipart/form-dataï¼Œformdataåªæ˜¯multipart/form-dataçš„å®ç°æ–¹å¼ï¼›<br>ç›®å‰æµè§ˆå™¨ä¼ è¾“å’ŒæœåŠ¡ç«¯è§£æï¼ŒåŸºæœ¬ä¸Šç”¨ multipart/form-data ï¼Œéƒ½æœ‰äº†ä¸€å¥—æˆç†Ÿçš„æœåŠ¡ç«¯ä¼ è¾“æ–‡æœ¬æµï¼ŒæœåŠ¡ç«¯æ­£å¸¸è§£ææ–‡æœ¬æµçš„è§„èŒƒï¼Œ<br>æ‰€ä»¥ä¸Šä¼ å¿…é¡»ç”¨multipart/form-data æˆ–è€… formData<br>å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ application/jsonï¼Œä½†å¿…é¡»å°†æµè½¬base64æ–‡æœ¬ï¼Œä¸”åç«¯é…åˆè§£æï¼Œè¿™äº›éƒ½æ²¡æœ‰ç°æˆå·¥å…·ï¼Œå› æ­¤è¯·ç”¨multipart/form-dataã€‚</p><p><a href="https://segmentfault.com/a/1190000037411957" target="_blank" rel="noopener">å‚è€ƒå¥½æ–‡</a></p><h4 id="æ–‡ä»¶ä¸Šä¼ éš¾ç‚¹ï¼šå¦‚ä½•ä¼ è¾“æµ"><a href="#æ–‡ä»¶ä¸Šä¼ éš¾ç‚¹ï¼šå¦‚ä½•ä¼ è¾“æµ" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ éš¾ç‚¹ï¼šå¦‚ä½•ä¼ è¾“æµ"></a>æ–‡ä»¶ä¸Šä¼ éš¾ç‚¹ï¼šå¦‚ä½•ä¼ è¾“æµ</h4><p>æµè§ˆå™¨å¦‚ä½•å°†æµé€šè¿‡tcpä¼ è¾“åˆ°æœåŠ¡å™¨ï¼š<br>ç›®å‰æœ‰ä¸¤ç§æ€è·¯ï¼š</p><ul><li>é€šè¿‡ js çš„ formData æ¨¡æ‹Ÿform æˆ– ç›´æ¥ç”¨multipart/form-data form ï¼Œé…åˆxhr(ajax)å‘é€ç»™æœåŠ¡å™¨ï¼Œè¿™æ˜¯æµè§ˆå™¨æ”¯æŒçš„ä¼ é€æµçš„æŠ¥æ–‡ã€‚</li><li>å°†æµè½¬ä¸ºæ–‡æœ¬ï¼Œé€šè¿‡å…¶ä»–æ–¹å¼ä¼ è¾“éƒ½å¯ä»¥ï¼Œæ¯”å¦‚æµè½¬base64ã€‚ä½†æ˜¯ç›¸åº”çš„æœåŠ¡ç«¯ä¹Ÿè¦é…åˆè§£æè¿™ä¸²base64ï¼Œæ‰€ä»¥æ¯”è¾ƒéº»çƒ¦ï¼Œä¸€èˆ¬ä¸ç”¨è¿™ç§æ–¹å¼</li></ul><h4 id="ä¸¤ç‚¹ï¼šæµè§ˆå™¨èƒ½ä¼ æµï¼ŒæœåŠ¡ç«¯æœ‰å·¥å…·è§£ææµ"><a href="#ä¸¤ç‚¹ï¼šæµè§ˆå™¨èƒ½ä¼ æµï¼ŒæœåŠ¡ç«¯æœ‰å·¥å…·è§£ææµ" class="headerlink" title="ä¸¤ç‚¹ï¼šæµè§ˆå™¨èƒ½ä¼ æµï¼ŒæœåŠ¡ç«¯æœ‰å·¥å…·è§£ææµ"></a>ä¸¤ç‚¹ï¼šæµè§ˆå™¨èƒ½ä¼ æµï¼ŒæœåŠ¡ç«¯æœ‰å·¥å…·è§£ææµ</h4><p>å®ç°æ–‡ä»¶ä¸Šä¼ å¿…é¡»æ»¡è¶³ä»¥ä¸Šä¸¤ç‚¹ï¼Œç›®å‰æµè§ˆå™¨ä¼ è¾“æµçš„æ–¹å¼åªæœ‰multipart/form-data æˆ– js çš„ formData æ–¹å¼ã€‚<br>ä»¥ä¸‹æ˜¯formdataçš„è§£é‡Šï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A library to create readable &quot;multipart/form-data&quot; streams. Can be used to submit forms and file uploads to other web applications.</span><br><span class="line">The API of this library is inspired by the XMLHttpRequest-2 FormData Interface.</span><br></pre></td></tr></table></figure></p><p>å› ä¸ºæµè§ˆå™¨éƒ½æ˜¯é€šè¿‡formDataæ–¹å¼ä¼ é€’æµï¼Œæ‰€ä»¥æœåŠ¡ç«¯å¯¹å¾…æœ‰æµçš„è¯·æ±‚æ—¶ï¼Œä¹Ÿå¿…é¡»ç”¨é…å¥—çš„formdataå·¥å…·è§£æè¿™ä¸ªæµï¼Œè¿˜å¥½ï¼ŒæœåŠ¡ç«¯æœ‰ä¸€å¥—æ ‡å‡†è§£æformdataã€‚</p><h4 id="FormData-demo-1"><a href="#FormData-demo-1" class="headerlink" title="FormData demo 1"></a>FormData demo 1</h4><p>ç”¨ä¸‹é¢ä»»ä½•ç›®å½•ä¸‹å»ºä¸€ä¸ªhtmlï¼Œç„¶åä½¿ç”¨node çš„ http-server å¯åŠ¨ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè®¿é—®ï¼š<br><strong>å¦‚æœæ²¡æœ‰æœåŠ¡å™¨å°†å‘é€å¤±è´¥</strong><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcdn.net/ajax/libs/jquery/2.1.4/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span></span><br><span class="line"><span class="javascript">          form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span></span><br><span class="line">          e.preventDefault()</span><br><span class="line">      &#125;)</span><br><span class="line">       &#125;, 1000)</span><br><span class="line"><span class="javascript">      <span class="function"><span class="keyword">function</span> <span class="title">onclick1</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">var</span> data = <span class="keyword">new</span> FormData(form);</span></span><br><span class="line"><span class="javascript">          $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">              url: <span class="string">"/form"</span>,</span></span><br><span class="line"><span class="javascript">              type: <span class="string">'POST'</span>,</span></span><br><span class="line"><span class="javascript">              cache: <span class="literal">false</span>,</span></span><br><span class="line">              data: data,</span><br><span class="line"><span class="javascript">              processData: <span class="literal">false</span>,<span class="comment">//å¿…é¡»è¿™æ ·è®¾ç½®ï¼ŒåŸå› å¯å»ç™¾åº¦æŸ¥</span></span></span><br><span class="line"><span class="javascript">              contentType: <span class="literal">false</span>,<span class="comment">//å¿…é¡»è¿™æ ·è®¾ç½®ï¼ŒåŸå› å¯å»ç™¾åº¦æŸ¥</span></span></span><br><span class="line"><span class="javascript">              success: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span></span><br><span class="line">              &#125;,</span><br><span class="line"><span class="javascript">              error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/form"</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">method</span>=<span class="string">"POST"</span>  <span class="attr">enctype</span>=<span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usename"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"psw"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"freeword"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">onclick</span>=<span class="string">"onclick1()"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="FormData-demo2"><a href="#FormData-demo2" class="headerlink" title="FormData demo2"></a>FormData demo2</h4><p>htmlä¸€æ ·ï¼Œjsæ”¹ä¸º<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onclick1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          <span class="keyword">var</span> data = <span class="keyword">new</span> FormData();</span><br><span class="line">          data.append(<span class="string">'usename'</span>, <span class="number">112</span>)</span><br><span class="line">          data.append(<span class="string">'psw'</span>, <span class="number">11</span>)</span><br><span class="line">          data.append(<span class="string">'freeword'</span>, $(<span class="string">'#file1'</span>)[<span class="number">0</span>].files[<span class="number">0</span>])</span><br><span class="line">          $.ajax(&#123;</span><br><span class="line">              url: <span class="string">"/form"</span>,</span><br><span class="line">              type: <span class="string">'POST'</span>,</span><br><span class="line">              cache: <span class="literal">false</span>,</span><br><span class="line">              data: data,</span><br><span class="line">              processData: <span class="literal">false</span>,<span class="comment">//å¿…é¡»è¿™æ ·è®¾ç½®</span></span><br><span class="line">              contentType: <span class="literal">false</span>,</span><br><span class="line">              success: <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">              &#125;,</span><br><span class="line">              error: <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><h4 id="FormData-fetch"><a href="#FormData-fetch" class="headerlink" title="FormData fetch"></a>FormData fetch</h4><p>ä¸Šé¢htmlä¸å˜ï¼Œjsæ”¹å˜å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'form'</span>);</span><br><span class="line">           form.addEventListener(<span class="string">'submit'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(form)</span><br><span class="line">           e.preventDefault()</span><br><span class="line">           <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData(form);</span><br><span class="line">           fetch(<span class="string">'/form'</span>,&#123;</span><br><span class="line">               method:<span class="string">'POST'</span>,</span><br><span class="line">               body:formData</span><br><span class="line">           &#125;)</span><br><span class="line">       &#125;)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure></p><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://segmentfault.com/a/1190000037411957" target="_blank" rel="noopener">å‚è€ƒå¥½æ–‡</a><br><a href="https://segmentfault.com/a/1190000022331737" target="_blank" rel="noopener">å‚è€ƒå¥½æ–‡</a><br><a href="https://blog.csdn.net/u010216786/article/details/53168079" target="_blank" rel="noopener">å‚è€ƒå¥½æ–‡</a></p><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><h3 id="å¯†ç md5åŠ å¯†"><a href="#å¯†ç md5åŠ å¯†" class="headerlink" title="å¯†ç md5åŠ å¯†"></a>å¯†ç md5åŠ å¯†</h3><p>å¯†ç ä¿¡æ¯ä¸èƒ½æ˜æ–‡ä¼ è¾“ï¼Œæ•°æ®åº“ä¹Ÿä¸åº”çŸ¥é“ç”¨æˆ·çš„å¯†ç ï¼Œæ‰€ä»¥å‰åç«¯å¯é‡‡ç”¨åŒä¸€å¥—md5è¿›è¡ŒåŠ å¯†ã€‚<br>å‰ç«¯å¯é‡‡ç”¨ nodeçš„ä¸€ä¸ªmdnåŒ…åŠ å¯†ã€‚</p><h3 id="session-cookie"><a href="#session-cookie" class="headerlink" title="session\cookie"></a>session\cookie</h3><h4 id="è®¾ç½®cookie"><a href="#è®¾ç½®cookie" class="headerlink" title="è®¾ç½®cookie"></a>è®¾ç½®cookie</h4><p>ä¸€èˆ¬åº”ç”¨æœ‰ä¸¤ç§è®¾è®¡ï¼š</p><p>ç™»å½•æˆåŠŸåï¼š<br>ä¸€èˆ¬åå°è¿”å› ç”¨æˆ·ä¿¡æ¯çš„sessionIDã€‚å‰ç«¯é€šå¸¸ä¼šå°†æ­¤sessionIdè®¾ç½®ä¸ºcookieï¼Œè¿™ä¸ªå‰ç«¯æˆ–è€…åç«¯éƒ½å¯ä»¥è®¾ç½®ã€‚<br>è¿™ä¸ªcookie ç”¨äºåç»­ åˆ·æ–°é¡µé¢æ—¶ æˆ–è€…åç»­æ“ä½œæ—¶ æ›´æ–°åç«¯sessionIdã€‚</p><p>æŒ‰ç…§ç”¨æˆ·ä¿¡æ¯è¿”å›æ–¹å¼ä¸åŒ</p><ul><li>ç”¨æˆ·ä¿¡æ¯é€šè¿‡æ¥å£è¯·æ±‚è¿”å›</li><li>ç”¨æˆ·ä¿¡æ¯å­˜å‚¨äºæœ¬åœ°ç¼“å­˜</li></ul><p>é’ˆå¯¹è¿™ä¸¤ç§æ–¹å¼ï¼Œç™»å½•ä¹‹åæœ‰ä¸¤ç§å¯¹åº”çš„ç­–ç•¥ã€‚</p><h4 id="ç”¨æˆ·ä¿¡æ¯é€šè¿‡æ¥å£è¯·æ±‚è¿”å›-æ¨è"><a href="#ç”¨æˆ·ä¿¡æ¯é€šè¿‡æ¥å£è¯·æ±‚è¿”å›-æ¨è" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯é€šè¿‡æ¥å£è¯·æ±‚è¿”å›(æ¨è)"></a>ç”¨æˆ·ä¿¡æ¯é€šè¿‡æ¥å£è¯·æ±‚è¿”å›(æ¨è)</h4><p>æ­¤æ—¶ç™»å½•æˆåŠŸåï¼Œåªè¿”å›sessionidï¼Œä¸è¿”å›ç”¨æˆ·ä¿¡æ¯ã€‚<br>ç”¨æˆ·ä¿¡æ¯å¯é€šè¿‡ ç”¨æˆ·æ¥å£ï¼Œæºå¸¦cookieè¿›è¡Œè¯·æ±‚ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡å‰ç«¯è¯»å–cookieï¼Œå°†cookieä½œä¸ºå…¥å‚è¯·æ±‚ç”¨æˆ·æ¥å£ï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯ã€‚<br>ç”¨æˆ·æ¥å£è¿”å›ç”¨æˆ·ä¿¡æ¯åï¼Œå‰ç«¯å°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°reduxä¸Šï¼Œç”¨æˆ·é¡µé¢æ¸²æŸ“ï¼Œæˆ–è€…å¿…è¦çš„åç»­æ“ä½œçš„å…¥å‚ã€‚</p><h4 id="ç”¨æˆ·ä¿¡æ¯å­˜å‚¨äºæœ¬åœ°ç¼“å­˜"><a href="#ç”¨æˆ·ä¿¡æ¯å­˜å‚¨äºæœ¬åœ°ç¼“å­˜" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯å­˜å‚¨äºæœ¬åœ°ç¼“å­˜"></a>ç”¨æˆ·ä¿¡æ¯å­˜å‚¨äºæœ¬åœ°ç¼“å­˜</h4><p>æ­¤æ—¶ç™»å½•æˆåŠŸåï¼Œè¦æ±‚ç™»å½•æ¥å£è¿˜è¦è¿”å›ç”¨æˆ·å„ç§ä¿¡æ¯ï¼Œ<br>å‰ç«¯å³æ—¶å°†ç”¨æˆ·ä¿¡æ¯æ›´æ–°å‰ç«¯reduxè¿›è€Œæ¸²æŸ“é¡µé¢ï¼›<br>åŒæ—¶å‰ç«¯å°†æ­¤ä¿¡æ¯åˆ†åˆ«å­˜å‚¨æœ¬åœ°ç¼“å­˜ï¼Œç”¨äºé¡µé¢åˆ·æ–°æ—¶ æ›´æ–°å‰ç«¯reduxè¿›è€Œæ¸²æŸ“é¡µé¢ï¼›</p><h2 id="httpçŸ¥è¯†"><a href="#httpçŸ¥è¯†" class="headerlink" title="httpçŸ¥è¯†"></a>httpçŸ¥è¯†</h2><h3 id="cookie-ä¸-http"><a href="#cookie-ä¸-http" class="headerlink" title="cookie ä¸ http"></a>cookie ä¸ http</h3><p>å‚è€ƒå¦å¤–åšå®¢ã€Šhttpåè®®  - cookieã€‹</p><h3 id="postä¸getåŒºåˆ«"><a href="#postä¸getåŒºåˆ«" class="headerlink" title="postä¸getåŒºåˆ«"></a>postä¸getåŒºåˆ«</h3><p>1.getåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€Œpostä¼šå†æ¬¡æäº¤è¯·æ±‚ï¼›<br>2.getè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜ï¼Œè€Œpostä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ï¼›<br>3.getè¯·æ±‚åœ¨urlä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€Œpostæ²¡æœ‰é™åˆ¶ï¼›<br>4.getè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼Œè€Œpostè¯·æ±‚å‚æ•°ä¸ä¼šè¢«ä¿ç•™ï¼›</p><p>å…¶ä»–ä¸€äº›æ˜æ˜¾åŒºåˆ«ï¼Œåœ¨æ­¤ä¸åˆ—ä¸¾ ã€‚</p><h3 id="httpçŠ¶æ€ç "><a href="#httpçŠ¶æ€ç " class="headerlink" title="httpçŠ¶æ€ç "></a>httpçŠ¶æ€ç </h3><h4 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h4><p>2xxï¼šæˆåŠŸ â€“è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼›<br>3xxï¼šé‡å®šå‘ â€“è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ“ä½œï¼›<br>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯ â€“è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ï¼›<br>5xxï¼šæœåŠ¡å™¨é”™è¯¯ â€“æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•è¯·æ±‚ï¼›</p><h4 id="å¸¸ç”¨çŠ¶æ€ç "><a href="#å¸¸ç”¨çŠ¶æ€ç " class="headerlink" title="å¸¸ç”¨çŠ¶æ€ç "></a>å¸¸ç”¨çŠ¶æ€ç </h4><p>200 ok ï¼š æˆåŠŸï¼›<br>206 ï¼šå®¢æˆ·å‘èµ·ä¸€ä¸ªå¸¦æœ‰rangeå¤´çš„getè¯·æ±‚ï¼ŒæœåŠ¡å™¨å®Œæˆäº†å®ƒï¼›ï¼ˆé€šå¸¸ç”¨äºè§†é¢‘åˆ†ç‰‡æ®µçš„è¯·æ±‚ï¼‰ï¼›<br>301ï¼302 : è¯·æ±‚çš„é¡µé¢å·²ç»è½¬ç§»åˆ°æ–°çš„urlï¼Œå‰è€…æ˜¯æ°¸ä¹…é‡å®šå‘ï¼Œåè€…302æ˜¯ä¸´æ—¶é‡å®šå‘ï¼›<br>304 ï¼š æœåŠ¡å™¨æ•°æ®æ— å˜åŒ–ï¼Œä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ï¼›<br>401 ï¼š è¯·æ±‚æœªç»æˆæƒï¼›<br>403 ï¼š ç¦æ­¢è®¿é—®ï¼›<br>404 ï¼š è¯·æ±‚èµ„æºä¸å­˜åœ¨ï¼›<br>500ï¼503 ï¼š æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯ï¼›</p><h3 id="token"><a href="#token" class="headerlink" title="token"></a>token</h3><h4 id="tokenä¸Authorizationå…³ç³»"><a href="#tokenä¸Authorizationå…³ç³»" class="headerlink" title="tokenä¸Authorizationå…³ç³»"></a>tokenä¸Authorizationå…³ç³»</h4><p>Authorizationæ˜¯httpçš„è¯·æ±‚å¤´ï¼ŒAuthorizationçš„å€¼å°±æ˜¯tokenã€‚<br>å¯ä»¥è¯´tokenæ˜¯å®šä¹‰åœ¨httpä¸­çš„Authorizationå±æ€§ä¸Šçš„ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    url:<span class="string">"http://localhost:3000/api/userInfo"</span>,</span><br><span class="line">    beforeSend: <span class="function"><span class="keyword">function</span>(<span class="params">xhr</span>) </span>&#123; </span><br><span class="line">                xhr.setRequestHeader(<span class="string">"Authorization"</span>, <span class="string">"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiaWF0IjoxNTk4Mzg5OTIyLCJleHAiOjE1OTgzOTM1MjJ9.-SgGux78wAT2N9cxNCFOReg9v3EO8XVoH8M_2FzynXU"</span>);  </span><br><span class="line">            &#125;,&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>tokenä¹Ÿæˆä¸ºä»¤ç‰Œã€‚</p><h4 id="jsonwebtokenç”Ÿæˆtoken"><a href="#jsonwebtokenç”Ÿæˆtoken" class="headerlink" title="jsonwebtokenç”Ÿæˆtoken"></a>jsonwebtokenç”Ÿæˆtoken</h4><p>å‚è€ƒä¸‹é¢çš„demo</p><h4 id="jwtè¿›è¡ŒtokenéªŒè¯"><a href="#jwtè¿›è¡ŒtokenéªŒè¯" class="headerlink" title="jwtè¿›è¡ŒtokenéªŒè¯"></a>jwtè¿›è¡ŒtokenéªŒè¯</h4><p>å‚è€ƒä¸‹é¢çš„demo</p><h4 id="jsonwebtoken-ä¸-koa-jwt"><a href="#jsonwebtoken-ä¸-koa-jwt" class="headerlink" title="jsonwebtoken ä¸ koa-jwt"></a>jsonwebtoken ä¸ koa-jwt</h4><p>å‚è€ƒå¦å¤–ä¸€ç¯‡åšå®¢ã€Škoa2ç¬”è®° - jsonwebtoken ä¸ koa-jwtã€‹</p><h4 id="postmanè¿›è¡Œtokenè¯·æ±‚"><a href="#postmanè¿›è¡Œtokenè¯·æ±‚" class="headerlink" title="postmanè¿›è¡Œtokenè¯·æ±‚"></a>postmanè¿›è¡Œtokenè¯·æ±‚</h4><p>å‚è€ƒåšå®¢ã€Š0åˆ°1å¿«é€Ÿæ„å»ºè‡ªå·±çš„åå°ç®¡ç†ç³»ç»Ÿ   â€“ ç™»é™†å‰ç«¯é¡µé¢è·å–ä»¤ç‰Œã€‹<br>ã€Š0åˆ°1å¿«é€Ÿæ„å»ºè‡ªå·±çš„åå°ç®¡ç†ç³»ç»Ÿ   â€“ postmanä½¿ç”¨ä»¤ç‰Œè¯·æ±‚ã€‹</p><h4 id="cmdè¿›è¡Œtokenè¯·æ±‚"><a href="#cmdè¿›è¡Œtokenè¯·æ±‚" class="headerlink" title="cmdè¿›è¡Œtokenè¯·æ±‚"></a>cmdè¿›è¡Œtokenè¯·æ±‚</h4><p>å‚è€ƒä¸‹é¢çš„demo</p><h4 id="htmlè¿›è¡Œtokenè¯·æ±‚"><a href="#htmlè¿›è¡Œtokenè¯·æ±‚" class="headerlink" title="htmlè¿›è¡Œtokenè¯·æ±‚"></a>htmlè¿›è¡Œtokenè¯·æ±‚</h4><p>å‚è€ƒä¸‹é¢çš„demo</p><h4 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h4><p><a href="https://github.com/YeWills/koa-demo/tree/router-Token" target="_blank" rel="noopener">demo</a></p><h3 id="ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹"><a href="#ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹"></a>ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹</h3><p><a href="https://www.jianshu.com/p/d3725391af59" target="_blank" rel="noopener">å‚è€ƒ</a></p><h3 id="è®¿é—®ä¸€ä¸ªurlç»å†äº†å“ªäº›"><a href="#è®¿é—®ä¸€ä¸ªurlç»å†äº†å“ªäº›" class="headerlink" title="è®¿é—®ä¸€ä¸ªurlç»å†äº†å“ªäº›"></a>è®¿é—®ä¸€ä¸ªurlç»å†äº†å“ªäº›</h3><p><a href="https://blog.csdn.net/g291976422/article/details/88984859" target="_blank" rel="noopener">å‚è€ƒ</a><br>å®¢æˆ·ç«¯è·å–URL - &gt; DNSè§£æ - &gt; TCPè¿æ¥ - &gt;å‘é€HTTPè¯·æ±‚ - &gt;æœåŠ¡å™¨å¤„ç†è¯·æ±‚ - &gt;è¿”å›æŠ¥æ–‡ - &gt;æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ - &gt; TCPæ–­å¼€è¿æ¥<br>tcpè¿æ¥å±äº ä¼ è¾“å±‚ï¼Œåªç”¨äºè¿æ¥ï¼Œä¸ç”¨äºæ•°æ®æ”¶å‘ï¼Œ<br>httpè¿æ¥å±äº åº”ç”¨å±‚ï¼Œç”¨äºæ•°æ®æ”¶å‘ã€‚</p><h3 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h3><p><a href="https://github.com/YeWills/learns/tree/master/node/websocket" target="_blank" rel="noopener">websocketçš„å°demo</a></p><h2 id="jsé€šä¿¡"><a href="#jsé€šä¿¡" class="headerlink" title="jsé€šä¿¡"></a>jsé€šä¿¡</h2><h3 id="åŒæºç­–ç•¥åŠé™åˆ¶"><a href="#åŒæºç­–ç•¥åŠé™åˆ¶" class="headerlink" title="åŒæºç­–ç•¥åŠé™åˆ¶"></a>åŒæºç­–ç•¥åŠé™åˆ¶</h3><h4 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨ç«¯åšçš„å®‰å…¨ç­–ç•¥ã€‚<br>åŒ…å«ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><h4 id="Cookieã€LocalStaorageå’ŒindexDBæ— æ³•è¯»å–ï¼›"><a href="#Cookieã€LocalStaorageå’ŒindexDBæ— æ³•è¯»å–ï¼›" class="headerlink" title="Cookieã€LocalStaorageå’ŒindexDBæ— æ³•è¯»å–ï¼›"></a>Cookieã€LocalStaorageå’ŒindexDBæ— æ³•è¯»å–ï¼›</h4><p>éåŒæºä¸‹ï¼Œæ— æ³•è¯»å–éåŒæºçš„ä»¥ä¸Šç¼“å­˜ï¼›</p><h4 id="DOMæ— æ³•è·å–"><a href="#DOMæ— æ³•è·å–" class="headerlink" title="DOMæ— æ³•è·å–"></a>DOMæ— æ³•è·å–</h4><h4 id="æµè§ˆå™¨å±è”½éåŒæºè¯·æ±‚çš„æ¶ˆæ¯ï¼ˆè·¨åŸŸï¼‰"><a href="#æµè§ˆå™¨å±è”½éåŒæºè¯·æ±‚çš„æ¶ˆæ¯ï¼ˆè·¨åŸŸï¼‰" class="headerlink" title="æµè§ˆå™¨å±è”½éåŒæºè¯·æ±‚çš„æ¶ˆæ¯ï¼ˆè·¨åŸŸï¼‰"></a>æµè§ˆå™¨å±è”½éåŒæºè¯·æ±‚çš„æ¶ˆæ¯ï¼ˆè·¨åŸŸï¼‰</h4><h3 id="å‰åç«¯å¦‚ä½•é€šä¿¡"><a href="#å‰åç«¯å¦‚ä½•é€šä¿¡" class="headerlink" title="å‰åç«¯å¦‚ä½•é€šä¿¡"></a>å‰åç«¯å¦‚ä½•é€šä¿¡</h3><h4 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h4><h4 id="Websocket"><a href="#Websocket" class="headerlink" title="Websocket"></a>Websocket</h4><h4 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h4><p>corsæ˜¯ä¸€ä¸ªæ–°çš„é€šä¿¡æ ‡å‡†</p><h3 id="å¦‚ä½•åˆ›å»ºajax"><a href="#å¦‚ä½•åˆ›å»ºajax" class="headerlink" title="å¦‚ä½•åˆ›å»ºajax"></a>å¦‚ä½•åˆ›å»ºajax</h3><h4 id="xmlhttpRequestå¯¹è±¡çš„å·¥ä½œæµç¨‹"><a href="#xmlhttpRequestå¯¹è±¡çš„å·¥ä½œæµç¨‹" class="headerlink" title="xmlhttpRequestå¯¹è±¡çš„å·¥ä½œæµç¨‹"></a>xmlhttpRequestå¯¹è±¡çš„å·¥ä½œæµç¨‹</h4><h4 id="å…¼å®¹å¤„ç†-ï¼ˆieï¼‰"><a href="#å…¼å®¹å¤„ç†-ï¼ˆieï¼‰" class="headerlink" title="å…¼å®¹å¤„ç† ï¼ˆieï¼‰"></a>å…¼å®¹å¤„ç† ï¼ˆieï¼‰</h4><p>new XMLHttpRequest<br>new window.ActiveXObeject (ie å…¼å®¹)</p><h4 id="äº‹ä»¶è§¦å‘æ¡ä»¶"><a href="#äº‹ä»¶è§¦å‘æ¡ä»¶" class="headerlink" title="äº‹ä»¶è§¦å‘æ¡ä»¶"></a>äº‹ä»¶è§¦å‘æ¡ä»¶</h4><h4 id="äº‹ä»¶çš„è§¦å‘é¡ºåº"><a href="#äº‹ä»¶çš„è§¦å‘é¡ºåº" class="headerlink" title="äº‹ä»¶çš„è§¦å‘é¡ºåº"></a>äº‹ä»¶çš„è§¦å‘é¡ºåº</h4><h3 id="è·¨åŸŸé€šä¿¡çš„å‡ ç§æ–¹å¼"><a href="#è·¨åŸŸé€šä¿¡çš„å‡ ç§æ–¹å¼" class="headerlink" title="è·¨åŸŸé€šä¿¡çš„å‡ ç§æ–¹å¼"></a>è·¨åŸŸé€šä¿¡çš„å‡ ç§æ–¹å¼</h3><h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>åœ¨postMessageä¸CORSå‡ºç°å‰ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡jsonpæ¥å®ç°è·¨åŸŸï¼›<br>jsonpçš„åŸç†æ˜¯åˆ©ç”¨scriptå¼‚æ­¥åŠ è½½å®ç°ã€‚<br>æ­¤æ–¹æ³•éœ€è¦åå°é…åˆã€‚<br>å®ç°æ–¹æ³•ï¼š</p><ul><li><p>åœ¨scriptæ ‡ç­¾ä¸­å®šä¹‰ä¸€ä¸²urlï¼Œå¹¶ä¸”ä½¿ç”¨callbackä½œä¸ºå…³é”®å­—ï¼Œå‘Šè¯‰æœåŠ¡å™¨å‰å°å·²ç»å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å‡½æ•°jsonpCunstomFnNameæ¥æ¥æ”¶æ•°æ®ã€‚<br>ï¼ˆcallbackã€jsonpCunstomFnName è¿™äº›éƒ½å¯ä»¥éšä¾¿å®šä¹‰ï¼Œè·Ÿåå°å•†é‡å¥½å°±è¡Œï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;http://www.google.com/?data=name&amp;callback=jsonpCunstomFnName&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>jsä»£ç å®šä¹‰å…¨å±€å‡½æ•°jsonpCunstomFnName</p></li><li>æœåŠ¡å™¨è¿”å›ä¸€æ®µä»¥ä¸‹scriptå­—ç¬¦ï¼Œæ‰§è¡Œå…¨å±€å‡½æ•°jsonpCunstomFnName,å¹¶ä¸”å°†è¯·æ±‚è¿”å›æ•°æ®ä½œä¸ºå‚æ•°ï¼›<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    jsonpCunstomFnName(&#123;</span><br><span class="line">        data:[]</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><h4 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h4><figure class="image-box">                <img src="/image/font_end/f-postm.jpg" alt title class>                <p></p>            </figure><h4 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//åˆ©ç”¨hashï¼Œåœºæ™¯æ˜¯å½“å‰é¡µé¢Aé€šè¿‡iframeåµŒå…¥æ¥è·¨åŸŸçš„é¡µé¢B</span><br><span class="line">//åœ¨Açš„ä»£ç å¦‚ä¸‹</span><br><span class="line">var B = document.getElementsByTagName(&apos;iframe&apos;)</span><br><span class="line">B.src = B.src + &apos;#&apos; + &apos;data&apos;;</span><br><span class="line"></span><br><span class="line">//åœ¨Bçš„ä»£ç å¦‚ä¸‹</span><br><span class="line">window.onhashchange = function()&#123;</span><br><span class="line">    var data = window.location.hash</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="websocket-1"><a href="#websocket-1" class="headerlink" title="websocket"></a>websocket</h4><figure class="image-box">                <img src="/image/font_end/f-webs.jpg" alt title class>                <p></p>            </figure><h4 id="CORS-1"><a href="#CORS-1" class="headerlink" title="CORS"></a>CORS</h4><p>corsé€šä¿¡å¿…é¡»é…åˆfetchä½¿ç”¨ã€‚<br>corsæ˜¯å˜ç§çš„ajaxï¼Œæµè§ˆå™¨è¯†åˆ«åˆ°æ˜¯corsæ—¶ï¼Œè‡ªå®šå¢åŠ originå‚æ•°åˆ°è¯·æ±‚å¤´ä¸­ï¼Œè¾¾åˆ°å¯è·¨åŸŸè¯·æ±‚<br> <figure class="image-box">                <img src="/image/font_end/f-cors.jpg" alt title class>                <p></p>            </figure></p><h2 id="é¡µé¢ä¼˜åŒ–"><a href="#é¡µé¢ä¼˜åŒ–" class="headerlink" title="é¡µé¢ä¼˜åŒ–"></a>é¡µé¢ä¼˜åŒ–</h2><h3 id="èµ„æºåˆå¹¶ã€å‹ç¼©"><a href="#èµ„æºåˆå¹¶ã€å‹ç¼©" class="headerlink" title="èµ„æºåˆå¹¶ã€å‹ç¼©"></a>èµ„æºåˆå¹¶ã€å‹ç¼©</h3><p>gzipå‹ç¼©</p><h3 id="å‡å°‘httpè¯·æ±‚"><a href="#å‡å°‘httpè¯·æ±‚" class="headerlink" title="å‡å°‘httpè¯·æ±‚"></a>å‡å°‘httpè¯·æ±‚</h3><h3 id="åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜"><a href="#åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜" class="headerlink" title="åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜"></a>åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜</h3><p>å‚è€ƒã€Šé«˜æ•ˆå‰ç«¯ã€‹P72<br>cache-control\last-modified\if-Modified-Since\etag\if-None-Match</p><h3 id="éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½"><a href="#éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½" class="headerlink" title="éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½"></a>éæ ¸å¿ƒä»£ç å¼‚æ­¥åŠ è½½</h3><h4 id="å¼‚æ­¥åŠ è½½çš„æ–¹å¼"><a href="#å¼‚æ­¥åŠ è½½çš„æ–¹å¼" class="headerlink" title="å¼‚æ­¥åŠ è½½çš„æ–¹å¼"></a>å¼‚æ­¥åŠ è½½çš„æ–¹å¼</h4><p>åŠ¨æ€è„šæœ¬åŠ è½½(ç”¨jsåˆ›å»ºscriptæ ‡ç­¾)ï¼Œdeferï¼Œasyncã€‚</p><h4 id="defer"><a href="#defer" class="headerlink" title="defer"></a>defer</h4><p>deferæ˜¯åœ¨htmlè§£æå®Œåæ‰æ‰§è¡Œï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œï¼›<br><figure class="image-box">                <img src="/image/font_end/async.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/font_end/async-result.jpg" alt title class>                <p></p>            </figure></p><h4 id="async"><a href="#async" class="headerlink" title="async"></a>async</h4><p>asyncä½¿ç”¨æ–¹æ³•ä¸deferç›¸åŒã€‚<br>asyncæ˜¯åœ¨htmlè§£æå®Œåæ‰æ‰§è¡Œï¼Œå¦‚æœæ˜¯å¤šä¸ªï¼Œåˆ™åŒæ—¶æ‰§è¡Œå¤šä¸ªæ–‡ä»¶ï¼›</p><h3 id="ä½¿ç”¨cdn"><a href="#ä½¿ç”¨cdn" class="headerlink" title="ä½¿ç”¨cdn"></a>ä½¿ç”¨cdn</h3><h3 id="é¢„è§£ædns"><a href="#é¢„è§£ædns" class="headerlink" title="é¢„è§£ædns"></a>é¢„è§£ædns</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å¼ºåˆ¶æ‰“å¼€aæ ‡ç­¾çš„dnsè§£æï¼Œä¸€èˆ¬aæ ‡ç­¾é»˜è®¤å¼€å¯dnsè§£æï¼Œä½†å¯¹äºæœ‰äº›æµè§ˆå™¨å¯èƒ½æ²¡æœ‰æ‰“å¼€ï¼Œæ­¤æ—¶åŠ ä¸Šè¿™å¥è¯å¯å¼€å¯ã€‚</span><br><span class="line">&lt;meta http-equiv=&quot;x-dns-prefetch-control&quot; content=&quot;on&quot;&gt;</span><br><span class="line">//å¼€å¯é¡µé¢é¢„è§£ædns</span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot;  href=&quot;//host_name_to_prefetch.com&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="æŠŠcsså†™æˆå†…è”"><a href="#æŠŠcsså†™æˆå†…è”" class="headerlink" title="æŠŠcsså†™æˆå†…è”"></a>æŠŠcsså†™æˆå†…è”</h3><p>cssåªæœ‰10æˆ–20kæ—¶ï¼Œå†™æˆå†…è”ï¼Œè°·æ­Œå’Œç™¾åº¦å’Œæ·˜å®pcç‰ˆéƒ½æ˜¯è¿™æ ·å¹²çš„ã€‚<br>æ”¾åœ¨å†…è”ä¸Šï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯èŠ‚çœäº†ä¸€æ¬¡cdnè¯·æ±‚,ä»è€ŒåŠ å¿«é¡µé¢å“åº”ã€‚<br>æ³¨æ„åªé€‚åˆcssä¸æ˜¯éå¸¸å¤§çš„æƒ…å†µã€‚</p><h2 id="hybrid"><a href="#hybrid" class="headerlink" title="hybrid"></a>hybrid</h2><h3 id="ä¸ºä»€ä¹ˆhybridç‰ˆæœ¬æ›´æ–°æ–¹ä¾¿ï¼Œæ›´å¿«æ·"><a href="#ä¸ºä»€ä¹ˆhybridç‰ˆæœ¬æ›´æ–°æ–¹ä¾¿ï¼Œæ›´å¿«æ·" class="headerlink" title="ä¸ºä»€ä¹ˆhybridç‰ˆæœ¬æ›´æ–°æ–¹ä¾¿ï¼Œæ›´å¿«æ·"></a>ä¸ºä»€ä¹ˆhybridç‰ˆæœ¬æ›´æ–°æ–¹ä¾¿ï¼Œæ›´å¿«æ·</h3><p>å› ä¸ºhybridä½¿ç”¨çš„æ˜¯jsè¯­è¨€å¼€å‘ï¼Œç›¸æ¯”åŸç”Ÿå¼€å‘ä½¿ç”¨çš„javaè¯­è¨€ï¼Œjsè¯­è¨€æ— æ³•æ“ä½œè®¾å¤‡çš„ç›¸æœºã€æ¨ªå±ç«–å±ã€è¯­éŸ³ã€é€šè®¯å½•ç­‰ç­‰ï¼Œè€Œjavaæ˜¯èƒ½æ“ä½œè¿™äº›çš„ã€‚æ‰€ä»¥æ¯å½“ç‰ˆæœ¬æ›´æ–°æ—¶ï¼ŒjavaåŸç”Ÿå¼€å‘è¦è¿›è¡Œä»£ç å®¡æ ¸å®‰å…¨éªŒè¯ï¼Œjsçš„hybridåˆ™ä¸éœ€è¦ï¼Œæ‰€ä»¥ç‰ˆæœ¬æ›´æ–°æ›´åŠ ä¾¿æ·ï¼›</p><h3 id="é¡µé¢æ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œéœ€è¦åŸç”Ÿå±‚é¢ä¸­è½¬"><a href="#é¡µé¢æ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œéœ€è¦åŸç”Ÿå±‚é¢ä¸­è½¬" class="headerlink" title="é¡µé¢æ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œéœ€è¦åŸç”Ÿå±‚é¢ä¸­è½¬"></a>é¡µé¢æ— æ³•ç›´æ¥å‘æœåŠ¡å™¨å‘è¯·æ±‚ï¼Œéœ€è¦åŸç”Ÿå±‚é¢ä¸­è½¬</h3><p>hybridçš„jsé¡µé¢çš„ajaxéœ€è¦è°ƒå»åŸç”Ÿæä¾›çš„è¯·æ±‚APIï¼Œæ‰èƒ½å‘åç«¯å‘èµ·è¯·æ±‚ï¼Œæ‰€ä»¥çš„ajaxè¯·æ±‚ä¼šç»è¿‡åŸç”Ÿè½¬å‘</p><h3 id="webview"><a href="#webview" class="headerlink" title="webview"></a>webview</h3><ul><li>æ˜¯appä¸­çš„ä¸€ä¸ªç»„ä»¶ï¼ˆappå¯ä»¥æœ‰webviewï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰ï¼‰</li><li>ç”¨äºåŠ è½½h5é¡µé¢ï¼Œå³ä¸€ä¸ªå°å‹çš„æµè§ˆå™¨å†…æ ¸<h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><h3 id="éœ€è¦äº†è§£çš„ç®—æ³•ï¼š"><a href="#éœ€è¦äº†è§£çš„ç®—æ³•ï¼š" class="headerlink" title="éœ€è¦äº†è§£çš„ç®—æ³•ï¼š"></a>éœ€è¦äº†è§£çš„ç®—æ³•ï¼š</h3>è¿˜æœ‰å…´è¶£çš„è¯ï¼Œä¹Ÿå­¦ä¹ ä¸‹ å†’æ³¡æ’åºï¼š<figure class="image-box">                <img src="/image/font_end/f-calc1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/font_end/f-calc2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/font_end/f-calc3.jpg" alt title class>                <p></p>            </figure><h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="è·å–å¹¶ä½¿ç”¨å­—ä½“å›¾æ ‡"><a href="#è·å–å¹¶ä½¿ç”¨å­—ä½“å›¾æ ‡" class="headerlink" title="è·å–å¹¶ä½¿ç”¨å­—ä½“å›¾æ ‡"></a>è·å–å¹¶ä½¿ç”¨å­—ä½“å›¾æ ‡</h3><a href="https://www.iconfont.cn/" target="_blank" rel="noopener">å¯ä»¥é€šè¿‡é˜¿é‡Œçš„å¼€æºå­—ä½“åº“</a>ä½¿ç”¨</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> js </tag>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsç¬”è®°</title>
      <link href="/2019/05/21/js/"/>
      <url>/2019/05/21/js/</url>
      
        <content type="html"><![CDATA[<h2 id="js-å¸¸ç”¨çŸ¥è¯†"><a href="#js-å¸¸ç”¨çŸ¥è¯†" class="headerlink" title="js å¸¸ç”¨çŸ¥è¯†"></a>js å¸¸ç”¨çŸ¥è¯†</h2><h3 id="è‡ªè¿è¡Œå‡½æ•°"><a href="#è‡ªè¿è¡Œå‡½æ•°" class="headerlink" title="è‡ªè¿è¡Œå‡½æ•°"></a>è‡ªè¿è¡Œå‡½æ•°</h3><h4 id="è‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•"><a href="#è‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•" class="headerlink" title="è‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•"></a>è‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">( function() &#123;&#125;() );</span><br><span class="line">( function() &#123;&#125; )();</span><br><span class="line">[ function() &#123;&#125;() ];</span><br><span class="line"></span><br><span class="line">~ function() &#123;&#125;();</span><br><span class="line">! function() &#123;&#125;();</span><br><span class="line">+ function() &#123;&#125;();</span><br><span class="line">- function() &#123;&#125;();</span><br><span class="line"></span><br><span class="line">delete function() &#123;&#125;();</span><br><span class="line">typeof function() &#123;&#125;();</span><br><span class="line">void function() &#123;&#125;();</span><br><span class="line">new function() &#123;&#125;();</span><br><span class="line">new function() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">var f = function() &#123;&#125;();</span><br><span class="line"></span><br><span class="line">1, function() &#123;&#125;();</span><br><span class="line">1 ^ function() &#123;&#125;();</span><br><span class="line">1 &gt; function() &#123;&#125;();</span><br><span class="line"></span><br><span class="line">;( function() &#123;&#125;() );</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°è¡¨è¾¾å¼-å’Œ-å‡½æ•°å£°æ˜"><a href="#å‡½æ•°è¡¨è¾¾å¼-å’Œ-å‡½æ•°å£°æ˜" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼ å’Œ å‡½æ•°å£°æ˜"></a>å‡½æ•°è¡¨è¾¾å¼ å’Œ å‡½æ•°å£°æ˜</h4><p>è¦å¼„æ‡‚è‡ªè¿è¡Œå‡½æ•°çš„åŸç†ï¼Œéœ€å¼„æ‡‚å‡½æ•°è¡¨è¾¾å¼ å’Œ å‡½æ•°å£°æ˜æ¦‚å¿µï¼›<br>å‡½æ•°å£°æ˜ï¼Œä¹Ÿå«å‡½æ•°å®šä¹‰ï¼›<br><a href="https://www.cnblogs.com/lenther2002/p/5894964.html" target="_blank" rel="noopener">å‚è€ƒ</a><br>Javascriptä¸­æœ‰2ä¸ªè¯­æ³•éƒ½ä¸functionå…³é”®å­—æœ‰å…³ï¼Œåˆ†åˆ«æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‡½æ•°å£°æ˜ï¼šfunction FunctionName(FormalParameterList) &#123; FunctionBody &#125;</span><br><span class="line">å‡½æ•°è¡¨è¾¾å¼ï¼šfunction [FunctionName](FormalParameterList) &#123; FunctionBody &#125;</span><br></pre></td></tr></table></figure></p><p>ä»è¯­æ³•çš„å®šä¹‰ä¸Šçœ‹ï¼Œè¿™ä¸¤è€…å‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼ˆå”¯ä¸€çš„åŒºåˆ«æ˜¯å‡½æ•°è¡¨è¾¾å¼å¯ä»¥çœç•¥å‡½æ•°åç§°ï¼‰ï¼Œé‚£ä¹ˆå°±è§£é‡Šå™¨è€Œè¨€ï¼Œå½“é‡åˆ°è¿™ä¸ªç»“æ„çš„è¯­å¥æ—¶ï¼Œåˆ¤å®šä¸ºå‡½æ•°è¡¨è¾¾å¼è¿˜æ˜¯å‡½æ•°å®šä¹‰å‘¢ï¼Ÿ<br>å°±javascriptçš„è¯­æ³•è€Œè¨€ï¼Œå¦‚æœä¸€æ¡è¯­å¥æ˜¯ä»¥functionå…³é”®å­—å¼€å§‹ï¼Œé‚£ä¹ˆè¿™æ®µä¼šè¢«åˆ¤å®šä¸ºå‡½æ•°å®šä¹‰(å£°æ˜)ï¼›<br>å¦‚æœä¸æ˜¯ä»¥functionå…³é”®å­—å¼€å§‹ï¼Œé‚£ä¹ˆå°±æ˜¯å‡½æ•°è¡¨è¾¾å¼ï¼›</p><p><strong>ä¸ºä»€ä¹ˆè¦åˆ†æ¸… å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜å‘¢?</strong><br>å› ä¸º<a href="https://www.zhihu.com/question/20249179" target="_blank" rel="noopener">å‡½æ•°è¡¨è¾¾å¼æ˜¯ä¸èƒ½æ‹¿æ¥ç›´æ¥ç”¨çš„</a>ï¼Œå¿…é¡»åœ¨<strong>å·¦ä¾§</strong>æœ‰å­—ç¬¦æˆ–è¡¨è¾¾å¼ä¸è¿™ä¸ªå‡½æ•°è¡¨è¾¾å¼å…±åŒæ„æˆä¸€å¥å¯æ‰§è¡Œçš„å‡½æ•°è¯­å¥ï¼›<br>ï¼ˆä¹‹æ‰€ä»¥åœ¨å·¦ä¾§ï¼Œä¸æ˜¯å³ä¾§ï¼Œæ˜¯å› ä¸ºåœ¨ä¸è¦è¡Œå‡½æ•°è¯­å¥ä»¥å…³é”®å­—functionå¼€å§‹ï¼Œé¿å…è¢«è¯†åˆ«ä¸ºå‡½æ•°å£°æ˜ï¼Œå¯¼è‡´æŠ¥é”™ï¼‰<br>å‡½æ•°å£°æ˜æ˜¯å¯ä»¥æ‹¿è¿‡æ¥ç›´æ¥ç”¨ï¼›<br>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function fn()&#123;&#125;</span><br><span class="line">fn()//ä¸æŠ¥é”™ï¼›</span><br><span class="line">function ()&#123;&#125;() //æŠ¥é”™</span><br><span class="line">-function ()&#123;console.log(5)&#125;() //ä¸æŠ¥é”™ å› ä¸ºåœ¨funtionå·¦ä¾§æœ‰è¡¨è¾¾å¼-</span><br></pre></td></tr></table></figure></p><h4 id="16ç§å«å‡½æ•°è¡¨è¾¾å¼çš„ä¸æŠ¥é”™çš„å‡½æ•°è¯­å¥"><a href="#16ç§å«å‡½æ•°è¡¨è¾¾å¼çš„ä¸æŠ¥é”™çš„å‡½æ•°è¯­å¥" class="headerlink" title="16ç§å«å‡½æ•°è¡¨è¾¾å¼çš„ä¸æŠ¥é”™çš„å‡½æ•°è¯­å¥"></a>16ç§å«å‡½æ•°è¡¨è¾¾å¼çš„ä¸æŠ¥é”™çš„å‡½æ•°è¯­å¥</h4><p>ç»“åˆä¸ŠèŠ‚çš„çŸ¥è¯†ï¼Œå°†ã€Šè‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•ã€‹æ•´ç†ä¸‹ï¼Œä»¥ä¸‹17ç§åŒ…å«äº†å‡½æ•°è¡¨è¾¾å¼çš„å‡½æ•°è¯­å¥ä¸æŠ¥é”™,æ³¨æ„çš„æ˜¯ï¼Œ<br>ä»¥ä¸‹å‡½æ•°è¡¨è¾¾å¼å†…çš„å‡½æ•°ä½“éƒ½å°†ä¸ä¼šæ‰§è¡Œï¼Œè‡³äºå¦‚ä½•æ‰§è¡Œï¼Œä¸‹é¢ä¼šè®²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">( function() &#123;&#125; );</span><br><span class="line">( function() &#123;&#125; );</span><br><span class="line">[ function() &#123;&#125; ];</span><br><span class="line"></span><br><span class="line">~ function() &#123;&#125;;</span><br><span class="line">! function() &#123;&#125;;</span><br><span class="line">+ function() &#123;&#125;;</span><br><span class="line">- function() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">delete function() &#123;&#125;;</span><br><span class="line">typeof function() &#123;&#125;;</span><br><span class="line">void function() &#123;&#125;;</span><br><span class="line">new function() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">var f = function() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">1, function() &#123;&#125;;</span><br><span class="line">1 ^ function() &#123;&#125;;</span><br><span class="line">1 &gt; function() &#123;&#125;;</span><br><span class="line"></span><br><span class="line">;( function() &#123;&#125; );</span><br></pre></td></tr></table></figure><h4 id="æ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦"><a href="#æ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦" class="headerlink" title="æ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦"></a>æ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦</h4><p><a href="https://www.zhihu.com/question/20249179" target="_blank" rel="noopener">å‚è€ƒ</a><br>ä»¥ä¸‹ä¸¤ç§æŠ¥é”™å½¢å¼çš„åŸå› åˆ†æï¼š</p><ul><li>function (){ }()<br>æœŸæœ›æ˜¯ç«‹å³è°ƒç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°è¡¨è¾¾å¼ï¼Œç»“æœæ˜¯è¿›è¡Œäº†å‡½æ•°å£°æ˜ï¼Œå‡½æ•°å£°æ˜å¿…é¡»è¦æœ‰æ ‡è¯†ç¬¦åšä¸ºå‡½æ•°åç§°ã€‚</li><li>function g(){ }()<br>æœŸæœ›æ˜¯ç«‹å³è°ƒç”¨ä¸€ä¸ªå…·åå‡½æ•°è¡¨è¾¾å¼ï¼Œç»“æœæ˜¯å£°æ˜äº†å‡½æ•° gã€‚æœ«å°¾çš„æ‹¬å·ä½œä¸ºåˆ†ç»„è¿ç®—ç¬¦ï¼Œ<strong>å¿…é¡»è¦æä¾›è¡¨è¾¾å¼åšä¸ºå‚æ•°</strong>ï¼Œè¿™ä¸ªè¡¨è¾¾å¼å¯ä»¥æ˜¯ä¸€ä¸ªå€¼æˆ–ä¸€ä¸ªè¯­å¥ï¼Œä¾‹å¦‚æ”¹æˆä¸‹é¢çš„å°±ä¸ä¼šæŠ¥é”™ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function g()&#123; &#125;(1) //ä¸æŠ¥é”™ï¼Œå› ä¸ºæœ«å°¾çš„å°æ‹¬å·æœ‰å€¼ä½œä¸ºè¡¨è¾¾å¼</span><br><span class="line">function g()&#123; &#125;(1,2) //ä¸æŠ¥é”™</span><br></pre></td></tr></table></figure></li></ul><p>ä»¥ä¸Šè¯´æ˜äº†ï¼Œæ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦;<br>å¦‚æœä»¥functionå¼€å§‹ï¼Œjsè§£é‡Šå™¨ä¼šè®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼Œæ­¤æ—¶å°±è¦ç¬¦åˆå‡½æ•°å£°æ˜çš„æ ‡å‡†ï¼Œå¦åˆ™æŠ¥é”™ï¼›<br>å¦‚æœfunctionå·¦ä¾§è¿˜æœ‰è¡¨è¾¾å¼ï¼Œjsè§£é‡Šå™¨ä¼šè®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œæ­¤æ—¶è¯¥å‡½æ•°è¡¨è¾¾å¼é…åˆå·¦å³ä¸¤ä¾§çš„è¡¨è¾¾å¼å°±æ„æˆäº†ä¸€ä¸ªå‡½æ•°è¯­å¥,è¦ç¬¦åˆå‡½æ•°è¯­å¥æ ‡å‡†ï¼›<br>ï¼ˆä¾‹å¦‚ var a = function(){} è¿™å°±æ˜¯ä¸€æ¡å‡½æ•°è¯­å¥ï¼‰</p><h4 id="1ç§ç«‹å³æ‰§è¡Œçš„å‡½æ•°å£°æ˜å½¢å¼"><a href="#1ç§ç«‹å³æ‰§è¡Œçš„å‡½æ•°å£°æ˜å½¢å¼" class="headerlink" title="1ç§ç«‹å³æ‰§è¡Œçš„å‡½æ•°å£°æ˜å½¢å¼"></a>1ç§ç«‹å³æ‰§è¡Œçš„å‡½æ•°å£°æ˜å½¢å¼</h4><p>ç›®å‰çŸ¥é“çš„ï¼Œå¯ä»¥è®©å‡½æ•°å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œçš„åªæœ‰è¿™ç§æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function g(a)&#123;console.log(a) &#125;(1) //ä¸æŠ¥é”™</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼Œæœ«å°¾å°æ‹¬å·ä¸€å®šè¦æœ‰ è¡¨è¾¾å¼ï¼ŒåŸå› æŸ¥çœ‹ã€Šæ˜¯å¦ä»¥functionå¼€å§‹å¯¹jsè§£é‡Šå™¨å¾ˆé‡è¦ã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function g(a)&#123;console.log(a) &#125;() //æŠ¥é”™</span><br></pre></td></tr></table></figure></p><h4 id="å¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ"><a href="#å¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ" class="headerlink" title="å¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ"></a>å¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ</h4><p>å¦‚ä½•è®© å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜ å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œå‘¢ï¼›<br><strong>åªèƒ½</strong>é€šè¿‡å°æ‹¬å·();<br>ä¾‹å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var a = function()&#123;console.log(&apos;work&apos;)&#125; //ä¸æ‰“å°</span><br><span class="line">var a = function()&#123;console.log(&apos;work&apos;)&#125;() //æ‰“å°work</span><br></pre></td></tr></table></figure></p><p>å› æ­¤å¯ä»¥è®¤ä¸º()æ˜¯ä¸€ä¸ªè®©ç«‹å³æ‰§è¡Œçš„è¿ç®—ç¬¦ï¼Œå¯ä»¥è®©å‡½æ•°è¡¨è¾¾å¼æˆ–å‡½æ•°å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œï¼›</p><h4 id="å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜-ä¸-ç«‹å³æ‰§è¡Œ-å…³ç³»"><a href="#å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜-ä¸-ç«‹å³æ‰§è¡Œ-å…³ç³»" class="headerlink" title="å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜ ä¸ ç«‹å³æ‰§è¡Œ å…³ç³»"></a>å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜ ä¸ ç«‹å³æ‰§è¡Œ å…³ç³»</h4><p>å‚çœ‹ä¸Šé¢çš„ã€Šå¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œã€‹</p><h4 id="ä¸-ç«‹å³æ‰§è¡Œ"><a href="#ä¸-ç«‹å³æ‰§è¡Œ" class="headerlink" title="() ä¸ ç«‹å³æ‰§è¡Œ"></a>() ä¸ ç«‹å³æ‰§è¡Œ</h4><p>å‚çœ‹ä¸Šé¢çš„ã€Šå¦‚ä½•è®©å‡½æ•°è¡¨è¾¾å¼ã€å£°æ˜å†…çš„å‡½æ•°ä½“ç«‹å³æ‰§è¡Œã€‹</p><h4 id="æ”¾åœ¨å“ªäº›ä½ç½®å¯ä»¥è®©å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ"><a href="#æ”¾åœ¨å“ªäº›ä½ç½®å¯ä»¥è®©å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ" class="headerlink" title="()æ”¾åœ¨å“ªäº›ä½ç½®å¯ä»¥è®©å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ"></a>()æ”¾åœ¨å“ªäº›ä½ç½®å¯ä»¥è®©å‡½æ•°ä½“ç«‹å³æ‰§è¡Œ</h4><p>ä¸€èˆ¬è€Œè¨€ï¼Œ() ç´§è·Ÿåœ¨ function(){} çš„èŠ±æ‹¬å·åé¢çš„ä½ç½®ï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼è®©å‡½æ•°è¡¨è¾¾å¼æˆ–å‡½æ•°å£°æ˜ å†…çš„å‡½æ•°ä½“ç«‹åˆ»æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = function()&#123;console.log(&apos;work&apos;)&#125;()</span><br><span class="line">~ function() &#123;&#125;()</span><br><span class="line">( function() &#123;&#125;() )</span><br><span class="line">function fn(t)&#123;console.log(t)&#125;(&apos;work&apos;)</span><br></pre></td></tr></table></figure></p><p>ä¸è¿‡æœ‰ä¸ªä¾‹å¤–ï¼Œè¯·çœ‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">( function() &#123;&#125;() ); //å¯ä»¥ç«‹å³æ‰§è¡Œå‡½æ•°ä½“</span><br><span class="line">( function() &#123;&#125; )(); //()æ”¾åœ¨äº†å·¦ä¾§(  )çš„å³ä¾§ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥ç«‹å³æ‰§è¡Œå‡½æ•°ä½“</span><br></pre></td></tr></table></figure></p><p>()ç´§è·Ÿåœ¨ä¸­æ‹¬å·åå°±ä¸è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ function() &#123;&#125;()]; //ä¸æŠ¥é”™ï¼Œè¿™ä¸ªå‡½æ•°è¯­å¥å…¶å®å°±æ˜¯ä¸€ä¸ªæ•°ç»„</span><br><span class="line">[ function() &#123;&#125;](); //æŠ¥é”™ï¼Œå› ä¸º[]æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸æ˜¯æ–¹æ³•ï¼Œç±»ä¼¼è¿™ç§å†™æ³•ï¼Œéƒ½é”™ï¼š[]()</span><br></pre></td></tr></table></figure></p><p><strong>å°ç»“ï¼Œä»ç›®å‰çœ‹ï¼Œå°æ‹¬å·ä¸€èˆ¬ç´§è·Ÿå¦‚ä¸Šçš„èŠ±æ‹¬å·ï¼Œä¹Ÿå¯è·Ÿåœ¨å¦‚ä¸Šçš„ (  )åé¢ã€‚</strong>ç°åœ¨å†å›è¿‡å¤´ï¼Œçœ‹è¿™ã€Šè‡ªè¿è¡Œå‡½æ•°çš„17ç§å†™æ³•ã€‹åº”è¯¥å°±æ˜ç™½äº†å§</p><h4 id="ä¸-å‡½æ•°ä¼ å‚"><a href="#ä¸-å‡½æ•°ä¼ å‚" class="headerlink" title="() ä¸ å‡½æ•°ä¼ å‚"></a>() ä¸ å‡½æ•°ä¼ å‚</h4><p>è¿™ä¸ªç®€å•ï¼Œä¸å¤šä»‹ç»ï¼Œä¸€èˆ¬è‡ªè¿è¡Œä¼ å‚çš„æ–¹å¼å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( function(a) &#123;console.log(a)&#125; )(888) //888</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„çš„æ˜¯ï¼Œå°†()å†™åœ¨é‡Œé¢ä¹Ÿæ˜¯å¯ä»¥ä¼ å‚çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( function(a) &#123;console.log(a)&#125;(888) ) //888</span><br></pre></td></tr></table></figure></p><h4 id="åˆ†å·-ä¸-ç«‹å³æ‰§è¡Œ"><a href="#åˆ†å·-ä¸-ç«‹å³æ‰§è¡Œ" class="headerlink" title="åˆ†å· ; ä¸ ç«‹å³æ‰§è¡Œ"></a>åˆ†å· ; ä¸ ç«‹å³æ‰§è¡Œ</h4><p>æœ‰äº›äººå–œæ¬¢ç”¨åˆ†å·;æ¥é…åˆå‡½æ•°è¡¨è¾¾å¼å†™ä¸€ä¸ªè‡ªè¿è¡Œï¼Œ;åˆ†å·æœ¬æ¥æ˜¯ç”¨æ¥ç»™å‡½æ•°è¯­å¥æ–­å¥çš„ï¼›<br>æ‰€ä»¥ç”¨è¿™ä¸ªçš„å¥½å¤„å°±æ˜¯è‡ªå¸¦æ–­å¥åŠŸèƒ½ï¼Œé¿å…ä¸å¿…è¦çš„é”™è¯¯ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//ä¼šæŠ¥é”™</span><br><span class="line">var f = function() &#123;&#125;;</span><br><span class="line">f()</span><br><span class="line">( function() &#123;&#125; )();</span><br></pre></td></tr></table></figure></p><p>åŠ åˆ†å·;åä¸æŠ¥é”™<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//ä¼šæŠ¥é”™</span><br><span class="line">var f = function() &#123;&#125;;</span><br><span class="line">f()</span><br><span class="line">;( function() &#123;&#125; )();</span><br></pre></td></tr></table></figure></p><h4 id="ï¼Œ-ï¼Œï¼æ¯”ï¼ˆ-ï¼‰ç«‹å³æ‰§è¡Œæ–¹å¼å°‘ä¸€ä¸ªå­—ç¬¦"><a href="#ï¼Œ-ï¼Œï¼æ¯”ï¼ˆ-ï¼‰ç«‹å³æ‰§è¡Œæ–¹å¼å°‘ä¸€ä¸ªå­—ç¬¦" class="headerlink" title="+ï¼Œ-ï¼Œï¼æ¯”ï¼ˆ ï¼‰ç«‹å³æ‰§è¡Œæ–¹å¼å°‘ä¸€ä¸ªå­—ç¬¦"></a>+ï¼Œ-ï¼Œï¼æ¯”ï¼ˆ ï¼‰ç«‹å³æ‰§è¡Œæ–¹å¼å°‘ä¸€ä¸ªå­—ç¬¦</h4><p>é€šè¿‡+ï¼Œ-ï¼Œï¼è¿™ä¸‰ä¸ªç¬¦å·è¿è¡Œçš„åŒ¿åå‡½æ•°æ¯”ï¼ˆï¼‰è¿è¡Œçš„åŒ¿åå‡½æ•°å¯ä»¥å‡å°‘ä¸€ä¸ªå­—ç¬¦çš„ä½¿ç”¨<br>å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">( function() &#123;&#125; );</span><br><span class="line">~ function() &#123;&#125;;</span><br></pre></td></tr></table></figure></p><p>ä¸è¿‡è¿™ä¸å½±å“ä½¿ç”¨(  )è¿˜æ˜¯+ï¼Œ-ï¼Œï¼ é…åˆä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™é‡Œåªæ˜¯æå–è¿™ä¸ªç°è±¡å‡ºæ¥ã€‚</p><h4 id="éš¾ç‚¹ç«‹å³æ‰§è¡Œçš„demoåˆ†æ"><a href="#éš¾ç‚¹ç«‹å³æ‰§è¡Œçš„demoåˆ†æ" class="headerlink" title="éš¾ç‚¹ç«‹å³æ‰§è¡Œçš„demoåˆ†æ"></a>éš¾ç‚¹ç«‹å³æ‰§è¡Œçš„demoåˆ†æ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new(function P()&#123;console.log(1)&#125;)()</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šç›¸å½“äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new (function P()&#123;console.log(1)&#125;)()</span><br></pre></td></tr></table></figure></p><p>å·¦ä¾§æ˜¯newè¡¨è¾¾å¼ï¼Œå³ä¾§æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„å‡½æ•°ï¼›<br>å³ä¾§ç«‹å³æ‰§è¡Œçš„å‡½æ•°å…¶å®å°±æ˜¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function P()&#123;console.log(1)&#125;</span><br><span class="line">P()</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥ä»¥ä¸Šç›¸å½“äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">function P()&#123;console.log(1)&#125;</span><br><span class="line">new P()</span><br></pre></td></tr></table></figure></p><p>é—®é¢˜ï¼šä¸ºä»€ä¹ˆnew(function() {})()ï¼Œnewå¯ä»¥ä¸()ç´§æŒ¨ç€ï¼Œä¸ç”¨ç©ºæ ¼ï¼›<br>å› ä¸º(function() {})()æ˜¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼è¯­å¥ï¼Œå¯ä»¥æŒ¨ç€ï¼Œä¹Ÿå¯ä»¥ä¸æŒ¨ç€ï¼Œéƒ½ä¸ä¼šæŠ¥é”™<br>ä½ æŠŠnewå½“æˆ+ - ï¼ ~æ¥çœ‹ï¼Œå°±å¥½ç†è§£äº†ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~ function() &#123;&#125;; //ä¸ç´§æŒ¨ç€ï¼Œä¸æŠ¥é”™</span><br><span class="line">~function() &#123;&#125;; //ç´§æŒ¨ç€ï¼Œä¸æŠ¥é”™</span><br></pre></td></tr></table></figure></p><h4 id="é‡è¦è¿ç”¨ä¹‹ä¸€"><a href="#é‡è¦è¿ç”¨ä¹‹ä¸€" class="headerlink" title="é‡è¦è¿ç”¨ä¹‹ä¸€"></a>é‡è¦è¿ç”¨ä¹‹ä¸€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var map = document.querySelector(&apos;#id&apos;)</span><br><span class="line">map.style.height=&apos;600px&apos;;</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸‹é¢çš„å†™æ³•ï¼Œmapå˜æˆå—çº§å˜é‡ï¼Œä¸å†æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">;(function()&#123;</span><br><span class="line">    var map = document.querySelector(&apos;#id&apos;)</span><br><span class="line">    map.style.height=&apos;600px&apos;;</span><br><span class="line">     &#125;())</span><br></pre></td></tr></table></figure></p><h4 id="è‡ªè¿è¡Œ-å‚è€ƒèµ„æ–™"><a href="#è‡ªè¿è¡Œ-å‚è€ƒèµ„æ–™" class="headerlink" title="è‡ªè¿è¡Œ å‚è€ƒèµ„æ–™"></a>è‡ªè¿è¡Œ å‚è€ƒèµ„æ–™</h4><p><a href="http://www.softwhy.com/article-2022-1.html" target="_blank" rel="noopener">JavaScript å°æ‹¬å·()åˆ†ç»„è¿ç®—ç¬¦</a><br><a href="https://www.cnblogs.com/lenther2002/p/5894964.html" target="_blank" rel="noopener">JSä¸­å‡½æ•°å®šä¹‰å’Œå‡½æ•°è¡¨è¾¾å¼çš„åŒºåˆ«</a><br><a href="https://www.zhihu.com/question/20249179" target="_blank" rel="noopener">JavaScript åŒ¿åå‡½æ•°æœ‰å“ªå‡ ç§æ‰§è¡Œæ–¹å¼?</a></p><h3 id="jsè§„èŒƒå†™æ³•"><a href="#jsè§„èŒƒå†™æ³•" class="headerlink" title="jsè§„èŒƒå†™æ³•"></a>jsè§„èŒƒå†™æ³•</h3><h4 id="ç»™å¸¸é‡èµ·ä¸ªå"><a href="#ç»™å¸¸é‡èµ·ä¸ªå" class="headerlink" title="ç»™å¸¸é‡èµ·ä¸ªå"></a>ç»™å¸¸é‡èµ·ä¸ªå</h4><p>å¿…è¦çš„æ—¶å€™ï¼Œç»™å¸¸é‡èµ·ä¸ªåï¼Œå¯è¯»æ€§æ›´å¼º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">car.handle(&apos;seller&apos;,&apos;sell&apos;,5,true);</span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹åï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var carType = &apos;seller&apos;;</span><br><span class="line">var carName = &apos;sell&apos;;</span><br><span class="line">var sellNum = 5;</span><br><span class="line">var isNeedLoan = true;</span><br><span class="line">car.handle(carType,carName,sellNum,isNeedLoan);</span><br></pre></td></tr></table></figure></p><h3 id="jsè¿è¡Œæœºåˆ¶"><a href="#jsè¿è¡Œæœºåˆ¶" class="headerlink" title="jsè¿è¡Œæœºåˆ¶"></a>jsè¿è¡Œæœºåˆ¶</h3><h4 id="å¦‚ä½•ç†è§£jsçš„å•çº¿ç¨‹"><a href="#å¦‚ä½•ç†è§£jsçš„å•çº¿ç¨‹" class="headerlink" title="å¦‚ä½•ç†è§£jsçš„å•çº¿ç¨‹"></a>å¦‚ä½•ç†è§£jsçš„å•çº¿ç¨‹</h4><p>jsçš„å•çº¿ç¨‹æŒ‡çš„æ˜¯ï¼Œä¸€ä¸ªæ—¶é—´å†…åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚</p><h4 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h4><p>ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡å°†è¢«è¿è¡Œæ ˆ(æ‰§è¡Œæ ˆã€è°ƒç”¨æ ˆ)æ‰§è¡Œ</p><h4 id="event-loop-äº‹ä»¶å¾ªç¯"><a href="#event-loop-äº‹ä»¶å¾ªç¯" class="headerlink" title="event loop (äº‹ä»¶å¾ªç¯)"></a>event loop (äº‹ä»¶å¾ªç¯)</h4><p>æ¯”è¾ƒå¤šï¼Œå•ç‹¬å‡ºæ¥åˆ†æï¼Œå‚è€ƒã€Ševent loop (äº‹ä»¶å¾ªç¯)ã€‹</p><h4 id="å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡"></a>å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</h4><p>å…¶å®æ¯”è¾ƒç®€å•ï¼Œå‚è€ƒ<a href="https://www.jianshu.com/p/a697e9bfdaef" target="_blank" rel="noopener">è¿™ç¯‡è®²å¾—å¥½</a>ã€‚<br>å¤§ç™½è¯ï¼Œç”±è¯­è¨€æ ‡å‡†æä¾›çš„å°±æ˜¯å¾®ä»»åŠ¡ï¼Œæ¯”å¦‚ES6æä¾›çš„promiseã€‚<br>å½“å‰ç”¨å¾—æœ€å¤šå¾®ä»»åŠ¡ä¹Ÿå°±promiseã€‚<br>å…¶ä»–ç”±æµè§ˆå™¨æˆ–nodeè¿è¡Œç¯å¢ƒæä¾›çš„ï¼Œæ¯”å¦‚setTimeoutã€ajaxç­‰æ˜¯å®ä»»åŠ¡ã€‚</p><h4 id="ç†è§£setTimeout-0"><a href="#ç†è§£setTimeout-0" class="headerlink" title="ç†è§£setTimeout 0"></a>ç†è§£setTimeout 0</h4><p>å°äº4æ¯«ç§’æ—¶ï¼Œæµè§ˆå™¨è®¤ä¸ºéƒ½æ˜¯0ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(()=&gt;&#123;&#125;, 2)</span><br></pre></td></tr></table></figure></p><h4 id="è§¦å‘å¼‚æ­¥ä»»åŠ¡çš„API"><a href="#è§¦å‘å¼‚æ­¥ä»»åŠ¡çš„API" class="headerlink" title="è§¦å‘å¼‚æ­¥ä»»åŠ¡çš„API"></a>è§¦å‘å¼‚æ­¥ä»»åŠ¡çš„API</h4><p>setTimeoutæˆ–setInInterval<br>Domäº‹ä»¶<br>Promise</p><h3 id="event-loop-äº‹ä»¶å¾ªç¯-1"><a href="#event-loop-äº‹ä»¶å¾ªç¯-1" class="headerlink" title="event loop (äº‹ä»¶å¾ªç¯)"></a>event loop (äº‹ä»¶å¾ªç¯)</h3><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><figure class="image-box">                <img src="/image/js/loop.jpg" alt title class>                <p></p>            </figure><h4 id="åŒºåˆ†å‡ºåŒæ­¥ã€å¼‚æ­¥ä»»åŠ¡"><a href="#åŒºåˆ†å‡ºåŒæ­¥ã€å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="åŒºåˆ†å‡ºåŒæ­¥ã€å¼‚æ­¥ä»»åŠ¡"></a>åŒºåˆ†å‡ºåŒæ­¥ã€å¼‚æ­¥ä»»åŠ¡</h4><p>æµè§ˆå™¨å¼•æ“ä¼šå¯¹æ‰€æœ‰ä»»åŠ¡è¿›è¡Œè¯†åˆ«ï¼Œä¼šå°†åŒæ­¥ä»»åŠ¡æ”¾ç½®åˆ°è¿è¡Œæ ˆä¸­;<br>ä¼šå°†å…¶ä¸­çš„å¼‚æ­¥ä»»åŠ¡å–å‡ºæ”¾åœ¨æµè§ˆå™¨çš„çº¿ç¨‹ä¸­ï¼Œç­‰å¾…å¦‚setTimeoutä»»åŠ¡çš„æ—¶é—´åˆ°äº†å˜æˆ0åï¼Œå†æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼›</p><h4 id="å¼‚æ­¥ä»»åŠ¡æ—¶é—´ä¸º0åæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­"><a href="#å¼‚æ­¥ä»»åŠ¡æ—¶é—´ä¸º0åæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡æ—¶é—´ä¸º0åæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­"></a>å¼‚æ­¥ä»»åŠ¡æ—¶é—´ä¸º0åæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­</h4><p>å‚è€ƒä¸Šé¢</p><h4 id="è¿è¡Œæ ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡"><a href="#è¿è¡Œæ ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡" class="headerlink" title="è¿è¡Œæ ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡"></a>è¿è¡Œæ ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡</h4><p>è¿è¡Œæ ˆä¹Ÿæˆä¸ºæ‰§è¡Œæ ˆã€è°ƒç”¨æ ˆã€‚<br>åŒæ­¥ä»»åŠ¡æ”¾åœ¨è¿è¡Œæ ˆä¸­ï¼Œè¿è¡Œæ ˆåªä¼šæ”¾ç½®åŒæ­¥ä»»åŠ¡ï¼Œè¿è¡Œæ ˆæ‰§è¡Œçš„æ˜¯åŒæ­¥ä»»åŠ¡ï¼›</p><h4 id="è¿è¡Œæ ˆä¸ä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´çš„Loopå¾ªç¯"><a href="#è¿è¡Œæ ˆä¸ä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´çš„Loopå¾ªç¯" class="headerlink" title="è¿è¡Œæ ˆä¸ä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´çš„Loopå¾ªç¯"></a>è¿è¡Œæ ˆä¸ä»»åŠ¡é˜Ÿåˆ—ä¹‹é—´çš„Loopå¾ªç¯</h4><p>è¿è¡Œæ ˆæ‰§è¡Œå®Œåï¼Œå‘ç°è¿è¡Œæ ˆæ¸…ç©ºåï¼›<br>è¿è¡Œæ ˆå°±ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ‰§è¡Œã€‚<br>è¿è¡Œæ ˆå†æ¬¡æ‰§è¡Œå®Œåï¼Œå‘ç°è¿è¡Œæ ˆä¸­åˆæ¸…ç©ºäº†ï¼Œ<br>äºæ˜¯è¿è¡Œæ ˆåˆä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ‰§è¡Œã€‚<br>å¦‚æ­¤è¿è¡Œï¼Œå°±æ˜¯äº‹ä»¶å¾ªç¯ï¼Œä¹Ÿå«Event Loop</p><h3 id="generator-yeild"><a href="#generator-yeild" class="headerlink" title="generator yeild"></a>generator yeild</h3><h4 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>yeildç”¨äºå•æ­¥æ‰§è¡Œä»£ç ï¼›<br>æ¯æ‰§è¡Œä¸€æ¬¡it.next,å°±ä¼šæŒ‰å®šä¹‰çš„yeildé¡ºåºå•æ­¥æ‰§è¡Œåˆ°ç»™å®šçš„ä»£ç ä¸­ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> a = <span class="keyword">yield</span> <span class="string">'hel'</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'step one'</span>,a);<span class="comment">//1</span></span><br><span class="line">    <span class="keyword">const</span> b = <span class="keyword">yield</span> <span class="string">'wol'</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'step two'</span>,b);<span class="comment">//66</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> it = test();</span><br><span class="line"><span class="built_in">console</span>.log(it.next())<span class="comment">//ç¬¬ä¸€æ¬¡nextä¼ å‚æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„//&#123; value: 'hel', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">1</span>))<span class="comment">//ä¼ é€’ä¸Šä¸€æ¬¡çš„yieldè¿”å›å€¼&#123; value: 'wol', done: false &#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(it.next(<span class="number">66</span>))<span class="comment">//&#123; value: undefined, done: false &#125;</span></span><br></pre></td></tr></table></figure></p><h4 id="it-next-è¿”å›-value-done"><a href="#it-next-è¿”å›-value-done" class="headerlink" title="it.next()è¿”å›{value,done}"></a>it.next()è¿”å›{value,done}</h4><p>å‚è€ƒã€Šæ¦‚è¿°ã€‹</p><h4 id="it-nextçš„ä¼ å‚æ˜¯ä¸Šä¸€ä¸ªyeildçš„å€¼"><a href="#it-nextçš„ä¼ å‚æ˜¯ä¸Šä¸€ä¸ªyeildçš„å€¼" class="headerlink" title="it.nextçš„ä¼ å‚æ˜¯ä¸Šä¸€ä¸ªyeildçš„å€¼"></a>it.nextçš„ä¼ å‚æ˜¯ä¸Šä¸€ä¸ªyeildçš„å€¼</h4><p>å‚è€ƒã€Šæ¦‚è¿°ã€‹</p><h3 id="asyncæ˜¯-generator-co-promiseçš„è¯­æ³•ç³–"><a href="#asyncæ˜¯-generator-co-promiseçš„è¯­æ³•ç³–" class="headerlink" title="asyncæ˜¯ generator+co+promiseçš„è¯­æ³•ç³–"></a>asyncæ˜¯ generator+co+promiseçš„è¯­æ³•ç³–</h3><h4 id="co"><a href="#co" class="headerlink" title="co"></a>co</h4><p><a href="https://github.com/tj/co" target="_blank" rel="noopener">co</a> æ˜¯koaä½œè€…tjçš„ä¸€ä¸ªå¼€æºåº“ï¼Œå¦‚ä¸‹ï¼Œåœ¨readå‡½æ•°å†…ï¼Œå®ç°äº†å°†å¼‚æ­¥ä»£ç ä½¿ç”¨åŒæ­¥çš„æ–¹å¼ç¼–å†™ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">read</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> content1 = <span class="keyword">yield</span> axios.get(<span class="string">'http://127.0.0.1:3000'</span>).then(<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'å…ˆæ‰§è¡Œ'</span>);<span class="keyword">return</span> e&#125;)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'step one'</span>,content1.data)</span><br><span class="line">        <span class="keyword">let</span> content2 = <span class="keyword">yield</span> axios.get(<span class="string">'http://127.0.0.1:3000'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'step two'</span>,content2.data)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'err'</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//coç®€åŒ–ç‰ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">co</span>(<span class="params">it</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> &#123; value, done&#125; = it.next(data);</span><br><span class="line">            <span class="keyword">if</span>(!done)&#123;</span><br><span class="line">                <span class="built_in">Promise</span>.resolve(value).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">                    next(data);</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(data);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        next();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">co(read()).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'result'</span>,data.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="ä½¿ç”¨asyncå®ç°"><a href="#ä½¿ç”¨asyncå®ç°" class="headerlink" title="ä½¿ç”¨asyncå®ç°"></a>ä½¿ç”¨asyncå®ç°</h4><p>è¦æƒ³å®ç°ä¸Šé¢åŒæ ·çš„åŠŸèƒ½ï¼šåœ¨readå‡½æ•°å†…ï¼Œå®ç°äº†å°†å¼‚æ­¥ä»£ç ä½¿ç”¨åŒæ­¥çš„æ–¹å¼ç¼–å†™ï¼Œä½¿ç”¨asyncå¾ˆç®€å•ï¼Œasyncåº•å±‚åŸºäºgenerator+co+promiseå®ç°<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncRead</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> content1 = <span class="keyword">await</span> axios.get(<span class="string">'http://127.0.0.1:3000'</span>).then(<span class="function"><span class="params">e</span>=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'å…ˆæ‰§è¡Œ'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'async step one'</span>,content1.data)</span><br><span class="line">        <span class="keyword">let</span> content2 = <span class="keyword">await</span> axios.get(<span class="string">'http://127.0.0.1:3000'</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'async step two'</span>,content2.data)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'err'</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncRead()</span><br></pre></td></tr></table></figure></p><h3 id="æ‰‹å†™promise"><a href="#æ‰‹å†™promise" class="headerlink" title="æ‰‹å†™promise"></a>æ‰‹å†™promise</h3><h4 id="æ‰‹å†™æºç è¦ç‚¹"><a href="#æ‰‹å†™æºç è¦ç‚¹" class="headerlink" title="æ‰‹å†™æºç è¦ç‚¹"></a>æ‰‹å†™æºç è¦ç‚¹</h4><ul><li>å®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°<ul><li>æ„é€ å‡½æ•°å†…ä¸‰ä¸ªçŠ¶æ€ï¼špending resolved rejected</li><li>å®šä¹‰å†…éƒ¨resolveä¸rejectæ–¹æ³•</li><li>rejectæ—¶å€™å­˜å‚¨valueï¼Œä»¥ä¾¿ç»™ä¸‹ä¸ªthenä½¿ç”¨ï¼Œä»¥æ­¤ç±»æ¨reject</li></ul></li><li>å®šä¹‰ä¸€ä¸ªåŸå‹æ–¹æ³•then</li><li>thenæ–¹æ³•å†…é€’å½’æ„é€ å‡½æ•°å®ç°é“¾å¼è°ƒç”¨</li><li>å®šä¹‰é™æ€æ–¹æ³•allã€raceã€resolveç­‰ç­‰</li><li>åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼</li></ul><p>é™¤æ­¤ä¹‹å¤–ï¼Œä»¥ä¸‹å‡ ç‚¹è¦æ³¨æ„ï¼š</p><h4 id="setTimeoutå†…éœ€è¦é‡æ–°try-catch"><a href="#setTimeoutå†…éœ€è¦é‡æ–°try-catch" class="headerlink" title="setTimeoutå†…éœ€è¦é‡æ–°try catch"></a>setTimeoutå†…éœ€è¦é‡æ–°try catch</h4><p>å°½ç®¡,è¿™é‡Œå·²ç»åšäº†try catchã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="comment">// ç«‹å³åŒæ­¥æ‰§è¡Œexecutor</span></span><br><span class="line">      executor(resolve,reject)</span><br><span class="line">  &#125;<span class="keyword">catch</span> (e) &#123; <span class="comment">// å¦‚æœæ‰§è¡Œå™¨æŠ›å‡ºå¼‚å¸¸ï¼Œpromiseå¯¹è±¡å˜ä¸ºrejectedçŠ¶æ€</span></span><br><span class="line">      reject(e)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯setTimeoutå†…è¿˜å¿…é¡»åŠ tryï¼Œå› ä¸ºtry catchæ— æ³•æ•æ‰ä¸€ä¸ªå®šæ—¶å™¨å†…éƒ¨å‡½æ•°çš„é”™è¯¯ï¼Œå› æ­¤æœ‰å®šæ—¶å™¨æ—¶ï¼Œå¿…é¡»è¿™æ ·ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">              <span class="keyword">try</span>&#123;</span><br><span class="line">              </span><br><span class="line">              &#125;<span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                  </span><br><span class="line">              &#125;</span><br><span class="line">              &#125;)</span><br><span class="line">  &#125;<span class="keyword">catch</span> (e) &#123; </span><br><span class="line">      reject(e)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h4 id="å»ºè®®ä½¿ç”¨classè€ŒéfunctionåŸå‹æ¥åšç»§æ‰¿"><a href="#å»ºè®®ä½¿ç”¨classè€ŒéfunctionåŸå‹æ¥åšç»§æ‰¿" class="headerlink" title="å»ºè®®ä½¿ç”¨classè€ŒéfunctionåŸå‹æ¥åšç»§æ‰¿"></a>å»ºè®®ä½¿ç”¨classè€ŒéfunctionåŸå‹æ¥åšç»§æ‰¿</h4><p>classå¯ä»¥é¿å…åŸå‹çš„æµ…æ‹·è´é—®é¢˜ã€‚</p><h4 id="reslove-rejectæ˜¯å¼‚æ­¥å› ä¸ºç”¨äº†setTimeout"><a href="#reslove-rejectæ˜¯å¼‚æ­¥å› ä¸ºç”¨äº†setTimeout" class="headerlink" title="reslove\rejectæ˜¯å¼‚æ­¥å› ä¸ºç”¨äº†setTimeout"></a>reslove\rejectæ˜¯å¼‚æ­¥å› ä¸ºç”¨äº†setTimeout</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">       handle(onResolved)</span><br><span class="line">   &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">                resolve(result)</span><br><span class="line">           &#125;</span><br></pre></td></tr></table></figure><h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://www.bilibili.com/video/BV1AA411h75Q/?spm_id_from=333.788.videocard.0" target="_blank" rel="noopener">ç å³°å…¬å¼€è¯¾ï¼ˆæ‰‹å†™promise - ä¸Šï¼‰</a><br><a href="https://www.bilibili.com/video/BV1sZ4y1j71K/?spm_id_from=333.788.videocard.1" target="_blank" rel="noopener">ç å³°å…¬å¼€è¯¾ï¼ˆæ‰‹å†™promise - ä¸‹ï¼‰</a><br><a href="https://juejin.im/post/6856213486633304078" target="_blank" rel="noopener">promise åŒå­¦ç¬”è®°ï¼‰</a><br><a href="https://github.com/Sunny-lucking/howToBuildMyPromise" target="_blank" rel="noopener">åŒå­¦æºç  </a><br><a href="https://github.com/YeWills/learns/tree/master/promise" target="_blank" rel="noopener">demo</a></p><h2 id="Dom-API"><a href="#Dom-API" class="headerlink" title="Dom API"></a>Dom API</h2><h3 id="ä¸ºä»€ä¹ˆéƒ½å¯ç»‘å®šäº‹ä»¶ï¼šdom-onclick-function-dom-addEventListener-â€˜clickâ€™"><a href="#ä¸ºä»€ä¹ˆéƒ½å¯ç»‘å®šäº‹ä»¶ï¼šdom-onclick-function-dom-addEventListener-â€˜clickâ€™" class="headerlink" title="ä¸ºä»€ä¹ˆéƒ½å¯ç»‘å®šäº‹ä»¶ï¼šdom.onclick=function(){}\dom.addEventListener(â€˜clickâ€™)"></a>ä¸ºä»€ä¹ˆéƒ½å¯ç»‘å®šäº‹ä»¶ï¼šdom.onclick=function(){}\dom.addEventListener(â€˜clickâ€™)</h3><p>è¿™æ˜¯domäº‹ä»¶çº§åˆ«ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯æ–°è€æ—¶ä»£çš„ç»‘å®šäº‹ä»¶æ–¹å¼ï¼Œå‚è€ƒã€Šdomäº‹ä»¶çº§åˆ«ã€‹</p><h3 id="domäº‹ä»¶çº§åˆ«"><a href="#domäº‹ä»¶çº§åˆ«" class="headerlink" title="domäº‹ä»¶çº§åˆ«"></a>domäº‹ä»¶çº§åˆ«</h3><p>dom0 æ—¶ä»£ ï¼šdom.onclick=function(){}<br>dom2 æ—¶ä»£ ï¼šdom.addEventListener(â€˜clickâ€™, function(){})<br>dom3 æ—¶ä»£ï¼Œç»‘å®šäº‹ä»¶æ–¹å¼ä¸dom2ç›¸åŒï¼Œä¸åŒçš„æ˜¯ï¼Œdom3æ—¶ä»£å¢åŠ äº†å¾ˆå¤šäº‹ä»¶ç±»å‹ï¼Œä¾‹å¦‚ é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶â€˜keyupâ€™ï¼›</p><h3 id="äº‹ä»¶æ¨¡å‹"><a href="#äº‹ä»¶æ¨¡å‹" class="headerlink" title="äº‹ä»¶æ¨¡å‹"></a>äº‹ä»¶æ¨¡å‹</h3><p>äº‹ä»¶æ¨¡å‹æœ‰ å†’æ³¡å’Œæ•è· ä¸¤ç§ã€‚</p><h3 id="äº‹ä»¶æµ"><a href="#äº‹ä»¶æµ" class="headerlink" title="äº‹ä»¶æµ"></a>äº‹ä»¶æµ</h3><p><a href="https://www.jianshu.com/p/e7c403e6e2da" target="_blank" rel="noopener">å‚è€ƒ</a><br>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ— è®ºä½ åšäº†ä»€ä¹ˆï¼Œäº‹ä»¶éƒ½ä¼šå®Œæ•´ç»å†æ•è·ã€ç›®æ ‡å¤„ç†ã€å†’æ³¡é˜¶æ®µã€‚è¿™é‡Œå¾ˆå¤šäººæ­§ä¹‰ï¼Œè®¤ä¸ºäº‹ä»¶åªä¼šå•ç‹¬æ‰§è¡Œæ•è·æˆ–å†’æ³¡é˜¶æ®µï¼Œè¿™æ˜¯ä¸å¯¹çš„ï¼Œäº‹ä»¶ä¼šå®Œæ•´ç»å†ä»¥ä¸Šä¸‰é˜¶æ®µã€‚<br>åªæ˜¯ç»‘å®šäº‹ä»¶æ—¶ï¼Œå¯ä»¥é€‰æ‹©äº‹ä»¶åœ¨å†’æ³¡æˆ–æ•è·é˜¶æ®µè§¦å‘ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//true æ•è·ï¼Œ false å†’æ³¡ (é»˜è®¤)ï¼Œ æ— è®ºè®¾ç½®ä¸ºtrueæˆ–falseï¼Œäº‹ä»¶éƒ½ä¼šæ‰§è¡Œ</span><br><span class="line">document.addEventListener(&quot;click&quot;, myFunction, true);</span><br></pre></td></tr></table></figure></p><p>domäº‹ä»¶æµåˆ†ä¸ºä¸‰é˜¶æ®µï¼š</p><h4 id="æ•è·é˜¶æ®µ"><a href="#æ•è·é˜¶æ®µ" class="headerlink" title="æ•è·é˜¶æ®µ"></a>æ•è·é˜¶æ®µ</h4><p>ä¸€ä¸ªäº‹ä»¶æ¯”å¦‚ clickï¼Œé¡¶çº§å¯¹è±¡windowå‘å‡ºä¸€ä¸ªäº‹ä»¶æµï¼Œäº‹ä»¶ä»window&gt;document&gt;html&gt;body&gt;buttonåˆ°è¾¾ç›®æ ‡å…ƒç´ ã€‚<br>æ³¨æ„æ­¤é˜¶æ®µä¸å‡ºå‘äº‹ä»¶ç»‘å®šçš„å‡½æ•°ã€‚</p><h4 id="ç›®æ ‡å¤„ç†é˜¶æ®µ"><a href="#ç›®æ ‡å¤„ç†é˜¶æ®µ" class="headerlink" title="ç›®æ ‡å¤„ç†é˜¶æ®µ"></a>ç›®æ ‡å¤„ç†é˜¶æ®µ</h4><p>äº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ åï¼Œç›®æ ‡å…ƒç´ åˆ†æä¼ ç»™è‡ªå·±çš„æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Œæ˜¯clickè¿˜æ˜¯changeç­‰ç­‰äº‹ä»¶ï¼Ÿç¡®è®¤å¥½äº‹ä»¶ç±»å‹åï¼Œå¼€å§‹è§¦å‘äº‹ä»¶å¯¹åº”çš„ç»‘å®šå‡½æ•°ã€‚<br>è¿›å…¥å†’æ³¡é˜¶æ®µã€‚</p><h4 id="å†’æ³¡é˜¶æ®µ"><a href="#å†’æ³¡é˜¶æ®µ" class="headerlink" title="å†’æ³¡é˜¶æ®µ"></a>å†’æ³¡é˜¶æ®µ</h4><p>æ²¿ç€ç›®æ ‡å‡½æ•°ä¸€æ­¥æ­¥åˆ°windowå¯¹è±¡ï¼Œè§¦å‘å¯¹åº”äº‹ä»¶ç»‘å®šå‡½æ•°ã€‚</p><h4 id="document-addEventListener"><a href="#document-addEventListener" class="headerlink" title="document.addEventListener"></a>document.addEventListener</h4><p>document.addEventListener(â€œclickâ€, myFunction, true)çš„ç¬¬ä¸‰ä¸ªå‚æ•° trueæˆ–falseï¼Œè¿™ç¬¬ä¸‰ä¸ªå‚æ•°ç±»ä¼¼ä¸€ä¸ªè½¬æ¢é˜€ï¼Œå½“ä¸ºtrueæ—¶ï¼Œæ•è·é˜¶æ®µå°±æ‰§è¡Œã€‚<br>å½“falseæ—¶ï¼Œå†’æ³¡é˜¶æ®µæ‰æ‰§è¡Œã€‚</p><h3 id="äº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹"><a href="#äº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹" class="headerlink" title="äº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹"></a>äº‹ä»¶æ•è·çš„å…·ä½“æµç¨‹</h3><p>äº‹ä»¶æ•è·å…·ä½“æµç¨‹æ˜¯window&gt;document&gt;html&gt;body&gt;buttonã€‚<br>è¿™ä¹Ÿå°±è§£é‡Šäº†ï¼Œå¾ˆå¤šäººå°†<strong>å…¨å±€</strong>äº‹ä»¶ç»‘å®šåœ¨bodyæˆ–documentæˆ–windowä¸Šï¼Œæ”¾åœ¨è¿™äº›åœ°æ–¹ï¼Œåœ¨é¡¹ç›®ä¸­ä»»ä½•åœ°æ–¹éƒ½èƒ½è¢«æ•è·è§¦å‘å¯¹åº”äº‹ä»¶å‡½æ•°ã€‚</p><h3 id="Eventå¯¹è±¡å¸¸è§è¿ç”¨"><a href="#Eventå¯¹è±¡å¸¸è§è¿ç”¨" class="headerlink" title="Eventå¯¹è±¡å¸¸è§è¿ç”¨"></a>Eventå¯¹è±¡å¸¸è§è¿ç”¨</h3><h4 id="event-preventDefault"><a href="#event-preventDefault" class="headerlink" title="event.preventDefault()"></a>event.preventDefault()</h4><p>é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸ºï¼Œä¾‹å¦‚aæ ‡ç­¾å®šä¹‰clickäº‹ä»¶ï¼Œåœ¨äº‹ä»¶å‡½æ•°ä¸ŠåŠ ä¸Šè¿™ä¸ªï¼Œå¯ä»¥é˜»æ­¢aæ ‡ç­¾è·³è½¬ã€‚</p><h4 id="event-stopPropagation"><a href="#event-stopPropagation" class="headerlink" title="event.stopPropagation()"></a>event.stopPropagation()</h4><p>é˜»æ­¢å†’æ³¡æˆ–æ•è·ï¼Œå½“å…ƒç´ ä½¿ç”¨è¿™ä¸ªçš„æ—¶å€™ï¼Œç›‘å¬äº‹ä»¶æ¯”å¦‚clickï¼Œæ‰€è§¦å‘çš„å‡½æ•°å°±åˆ°æ­¤ä¸ºæ­¢ï¼Œå†ä¹Ÿä¸ä¼šå‘ä¸Šå†’æ³¡æˆ–åƒä¸‹æ•è·ã€‚</p><h4 id="event-stopImmediatePropagation"><a href="#event-stopImmediatePropagation" class="headerlink" title="event.stopImmediatePropagation()"></a>event.stopImmediatePropagation()</h4><p>åŒä¸€ä¸ªå…ƒç´ ç»‘å®šåŒä¸€äº‹ä»¶å¦‚clickå¤šæ¬¡æ—¶ï¼Œå½“å…ƒç´ clickè§¦å‘æ—¶ï¼Œæ‰€æœ‰çš„clickäº‹ä»¶å…¨éƒ¨è¢«è§¦å‘ã€‚<br>å¦‚æœä¸æƒ³å…¨éƒ¨è§¦å‘ç»‘å®šçš„clickäº‹ä»¶ï¼Œå¯ä»¥åœ¨æŸä¸ªclickäº‹ä»¶å‡½æ•°ä¸­åŠ è¿™ä¸ªï¼Œé˜»æ­¢å†è§¦å‘å…¶ä»–clickäº‹ä»¶å‡½æ•°ã€‚</p><h4 id="event-currentTarget"><a href="#event-currentTarget" class="headerlink" title="event.currentTarget"></a>event.currentTarget</h4><p>è·å–çœŸæ­£å†™onclickå‡½æ•°çš„å…ƒç´ ï¼Œå¦‚ä¸‹ï¼Œå½“ç‚¹å‡»child1æ—¶ï¼Œé€šè¿‡event.currentTargetè·å–åˆ°çš„æ˜¯wrapçš„domï¼Œé€šè¿‡event.targetè·å–åˆ°çš„æ˜¯çœŸæ­£è¢«ç‚¹å‡»çš„ç›®æ ‡å…ƒç´ child1ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;wrap&quot; onclick=&quot;function(e)&#123;e.target&#125;&quot;&gt;</span><br><span class="line">           &lt;div class=&quot;child1&quot;&gt;&lt;/div&gt;</span><br><span class="line">           &lt;div class=&quot;child2&quot;&gt;&lt;/div&gt;</span><br><span class="line">       &lt;/div&gt;</span><br></pre></td></tr></table></figure></p><h4 id="event-target"><a href="#event-target" class="headerlink" title="event.target"></a>event.target</h4><p>è§ã€Ševent.currentTargetã€‹</p><h4 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h4><p>eventè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„ä½œç”¨ï¼Œæ¯”å¦‚è·å–é”®ç›˜å€¼ç­‰ç­‰ã€‚</p><h3 id="è‡ªå®šä¹‰äº‹ä»¶"><a href="#è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="è‡ªå®šä¹‰äº‹ä»¶"></a>è‡ªå®šä¹‰äº‹ä»¶</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var eve = new Event(&apos;abcTest&apos;);</span><br><span class="line">dom.addEventListener(&apos;abcTest&apos;, ()=&gt;&#123;&#125;, false)</span><br><span class="line">dom.dispatchEvent(eve)</span><br></pre></td></tr></table></figure><p>IEä¸‹æœ‰ä¸€å®šå…¼å®¹é—®é¢˜ï¼Œè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œå‚çœ‹mdnå…³äº<code>new Event</code>ç« èŠ‚ã€‚</p><h3 id="é”®ç›˜äº‹ä»¶"><a href="#é”®ç›˜äº‹ä»¶" class="headerlink" title="é”®ç›˜äº‹ä»¶"></a>é”®ç›˜äº‹ä»¶</h3><h4 id="keyDown"><a href="#keyDown" class="headerlink" title="keyDown"></a>keyDown</h4><p>å½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„ä»»æ„é”®æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½ä¸æ”¾çš„è¯ï¼Œä¼š<strong>é‡å¤</strong>è§¦å‘æ­¤äº‹ä»¶ï¼Œæ³¨æ„ï¼Œå¦‚æœäº‹ä»¶å¯é€‰ç”¨keyDownä¸keyUpæ—¶ï¼Œè¯·ä½¿ç”¨keyUpï¼Œå› ä¸ºå®ƒä¸ä¼šé‡å¤è§¦å‘ã€‚</p><h4 id="keyPress"><a href="#keyPress" class="headerlink" title="keyPress"></a>keyPress</h4><p>å½“ç”¨æˆ·æŒ‰ä¸‹é”®ç›˜ä¸Šçš„<strong>å­—ç¬¦é”®</strong>æ—¶è§¦å‘ï¼Œè€Œä¸”å¦‚æœæŒ‰ä½ä¸æ”¾çš„è¯ï¼Œä¼š<strong>é‡å¤</strong>è§¦å‘æ­¤äº‹ä»¶</p><h4 id="keyUp"><a href="#keyUp" class="headerlink" title="keyUp"></a>keyUp</h4><p>å½“ç”¨æˆ·é‡Šæ”¾é”®ç›˜ä¸Šçš„é”®æ—¶è§¦å‘,å¤©ç„¶åœ°<strong>ä¸ä¼šé‡å¤</strong>è§¦å‘</p><h4 id="ç”¨keyUpä»£æ›¿keyDown"><a href="#ç”¨keyUpä»£æ›¿keyDown" class="headerlink" title="ç”¨keyUpä»£æ›¿keyDown"></a>ç”¨keyUpä»£æ›¿keyDown</h4><p>å› ä¸ºkeyUpçš„ä¸ä¼šé‡å¤è§¦å‘æ€§ï¼Œåœ¨åšé”®ç›˜äº‹ä»¶æ—¶ï¼Œå¯ä»¥é€‰æ‹©keyUpï¼Œè€Œé¿å…keyDownã€‚</p><h4 id="é¿å…thisçš„ä½¿ç”¨-åŒæ—¶æ”¯æŒé¼ æ ‡ä¸é”®ç›˜äº‹ä»¶æ—¶"><a href="#é¿å…thisçš„ä½¿ç”¨-åŒæ—¶æ”¯æŒé¼ æ ‡ä¸é”®ç›˜äº‹ä»¶æ—¶" class="headerlink" title="é¿å…thisçš„ä½¿ç”¨-(åŒæ—¶æ”¯æŒé¼ æ ‡ä¸é”®ç›˜äº‹ä»¶æ—¶)"></a>é¿å…thisçš„ä½¿ç”¨-(åŒæ—¶æ”¯æŒé¼ æ ‡ä¸é”®ç›˜äº‹ä»¶æ—¶)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> play=<span class="built_in">document</span>.getElementById(<span class="string">'play'</span>);</span><br><span class="line">    <span class="comment">// å¼€å§‹æŠ½å¥–</span></span><br><span class="line">    play.onclick=playFun;</span><br><span class="line">   <span class="comment">// é”®ç›˜äº‹ä»¶</span></span><br><span class="line">   <span class="built_in">document</span>.onkeyup=<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">      event = event || <span class="built_in">window</span>.event;</span><br><span class="line">      <span class="keyword">if</span>(event.keyCode==<span class="number">13</span>)&#123;</span><br><span class="line">        playFun();</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">playFun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//æœ€å¥½ä¸è¦ç”¨thisï¼Œé¼ æ ‡äº‹ä»¶æ—¶ï¼Œthisæ—¶è¢«ç‚¹å‡»èŠ‚ç‚¹ï¼›é”®ç›˜äº‹ä»¶æ—¶thisæŒ‡å‘document</span></span><br><span class="line">    <span class="comment">//this.style.background='#999';</span></span><br><span class="line">    play.style.background=<span class="string">'#999'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Dom-API-é»‘çŸ¥è¯†"><a href="#Dom-API-é»‘çŸ¥è¯†" class="headerlink" title="Dom API é»‘çŸ¥è¯†"></a>Dom API é»‘çŸ¥è¯†</h2><h3 id="è·å–dom-width-ä¸-å†…è”æ ·å¼-çš„å…³ç³»"><a href="#è·å–dom-width-ä¸-å†…è”æ ·å¼-çš„å…³ç³»" class="headerlink" title="è·å–dom width ä¸ å†…è”æ ·å¼ çš„å…³ç³»"></a>è·å–dom width ä¸ å†…è”æ ·å¼ çš„å…³ç³»</h3><h4 id="dom-style-width-åªèƒ½è·å–å†…è”æ ·å¼"><a href="#dom-style-width-åªèƒ½è·å–å†…è”æ ·å¼" class="headerlink" title="dom.style.width åªèƒ½è·å–å†…è”æ ·å¼"></a>dom.style.width åªèƒ½è·å–å†…è”æ ·å¼</h4><p>dom.style.width åªèƒ½è·å–å†…è”æ ·å¼ï¼Œæ— æ³•è·å– é€šè¿‡cssç»™domè®¾ç½®çš„widthã€‚<br>è¿™å°±é€ æˆæ˜æ˜domæ˜¯æœ‰å®½é«˜çš„ï¼Œä½†ä½¿ç”¨dom.style.widthè·å–çš„é«˜åº¦ä¸º0ï¼›<br>è§£å†³çš„æ–¹æ³•æ˜¯ï¼Œä½¿ç”¨ window.getComputedStyle(dom).width è·å–ï¼Œæ­¤æ–¹æ³•å§‹ç»ˆèƒ½è·å–å®½é«˜åº¦ã€‚</p><h4 id="window-getComputedStyle-dom-width-è·å–å®½é«˜"><a href="#window-getComputedStyle-dom-width-è·å–å®½é«˜" class="headerlink" title="window.getComputedStyle(dom).width è·å–å®½é«˜"></a>window.getComputedStyle(dom).width è·å–å®½é«˜</h4><p>æ¨èä½¿ç”¨æ­¤æ–¹æ³•è·å–domå®½é«˜åº¦ã€‚<br>å‚è€ƒã€Šdom.style.width åªèƒ½è·å–å†…è”æ ·å¼ã€‹</p><h4 id="dom-getBoundingClientRect-width"><a href="#dom-getBoundingClientRect-width" class="headerlink" title="dom.getBoundingClientRect().width"></a>dom.getBoundingClientRect().width</h4><p>æ­¤æ–¹æ³•æ˜¯ä¸€ä¸ªdom APIç¥å™¨ï¼Œèƒ½åšå¾ˆå¤šäº‹æƒ…ï¼Œè·å–å®½é«˜åº¦ä¸åœ¨è¯ä¸‹ã€‚</p><h2 id="Jquery"><a href="#Jquery" class="headerlink" title="Jquery"></a>Jquery</h2><h3 id="ä¸ºä»€ä¹ˆjqæ’ä»¶è¦å†™åœ¨-fnå¯¹è±¡ä¸­"><a href="#ä¸ºä»€ä¹ˆjqæ’ä»¶è¦å†™åœ¨-fnå¯¹è±¡ä¸­" class="headerlink" title="ä¸ºä»€ä¹ˆjqæ’ä»¶è¦å†™åœ¨$.fnå¯¹è±¡ä¸­"></a>ä¸ºä»€ä¹ˆjqæ’ä»¶è¦å†™åœ¨$.fnå¯¹è±¡ä¸­</h3><p>æœ¬å¯ä»¥å°†jqæ’ä»¶ç›´æ¥æ‰©å±•åˆ°$.prototypeåŸå‹ä¸Šï¼Œä¸ºä»€ä¹ˆè¦åœ¨$.fnä¸Šå‘¢ï¼ŒåŸå› æ˜¯ä¸ºäº†å¹¿å¤§jqç”¨æˆ·ï¼Œæœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼ˆfnå¯¹è±¡ï¼‰æ¥è¿›è¡Œæ’ä»¶æ‰©å±•ã€‚<br>è¿™æ ·ï¼Œå¤§å®¶æ’ä»¶çš„å†™æ³•ä¹Ÿæ›´åŠ ç»Ÿä¸€ã€‚</p><h2 id="åœºæ™¯è¿ç”¨"><a href="#åœºæ™¯è¿ç”¨" class="headerlink" title="åœºæ™¯è¿ç”¨"></a>åœºæ™¯è¿ç”¨</h2><h3 id="æ‹–æ‹½çš„åŸç”Ÿå®ç°"><a href="#æ‹–æ‹½çš„åŸç”Ÿå®ç°" class="headerlink" title="æ‹–æ‹½çš„åŸç”Ÿå®ç°"></a>æ‹–æ‹½çš„åŸç”Ÿå®ç°</h3><h4 id="onmousemoveçš„åæ ‡å®æ—¶è®¡ç®—"><a href="#onmousemoveçš„åæ ‡å®æ—¶è®¡ç®—" class="headerlink" title="onmousemoveçš„åæ ‡å®æ—¶è®¡ç®—"></a>onmousemoveçš„åæ ‡å®æ—¶è®¡ç®—</h4><p>è§ä¸‹é¢ä»£ç </p><h4 id="clientX-ä¸-offsetLeft"><a href="#clientX-ä¸-offsetLeft" class="headerlink" title="clientX ä¸ offsetLeft"></a>clientX ä¸ offsetLeft</h4><p>è§ä¸‹é¢ä»£ç </p><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=drag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drag</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> oTitle=getByClass(<span class="string">'login_logo_webqq'</span>,<span class="string">'loginPanel'</span>)[<span class="number">0</span>];</span><br><span class="line">   <span class="comment">// æ‹–æ›³</span></span><br><span class="line">   oTitle.onmousedown=fnDown;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnDown</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event = event || <span class="built_in">window</span>.event;</span><br><span class="line">  <span class="keyword">var</span> oDrag=<span class="built_in">document</span>.getElementById(<span class="string">'loginPanel'</span>),</span><br><span class="line">      <span class="comment">// å…‰æ ‡æŒ‰ä¸‹æ—¶å…‰æ ‡å’Œé¢æ¿ä¹‹é—´çš„è·ç¦»</span></span><br><span class="line">      disX=event.clientX-oDrag.offsetLeft,</span><br><span class="line">      disY=event.clientY-oDrag.offsetTop;</span><br><span class="line">  <span class="comment">// ç§»åŠ¨</span></span><br><span class="line">  <span class="built_in">document</span>.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  event = event || <span class="built_in">window</span>.event;</span><br><span class="line">  fnMove(event,disX,disY);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é‡Šæ”¾é¼ æ ‡</span></span><br><span class="line">  <span class="built_in">document</span>.onmouseup=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.onmousemove=<span class="literal">null</span>;</span><br><span class="line">  <span class="built_in">document</span>.onmouseup=<span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fnMove</span>(<span class="params">e,posX,posY</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> oDrag=<span class="built_in">document</span>.getElementById(<span class="string">'loginPanel'</span>),</span><br><span class="line">      l=e.clientX-posX,</span><br><span class="line">      t=e.clientY-posY,</span><br><span class="line">      winW=<span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth,</span><br><span class="line">      winH=<span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight,</span><br><span class="line">      maxW=winW-oDrag.offsetWidth<span class="number">-10</span>,</span><br><span class="line">      maxH=winH-oDrag.offsetHeight;</span><br><span class="line">  <span class="comment">//è¾¹ç•Œæ§åˆ¶</span></span><br><span class="line">  <span class="keyword">if</span>(l&lt;<span class="number">0</span>)&#123;</span><br><span class="line">    l=<span class="number">0</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(l&gt;maxW)&#123;</span><br><span class="line">    l=maxW;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(t&lt;<span class="number">0</span>)&#123;</span><br><span class="line">    t=<span class="number">10</span>;</span><br><span class="line">  &#125;<span class="keyword">else</span> <span class="keyword">if</span>(t&gt;maxH)&#123;</span><br><span class="line">    t=maxH;</span><br><span class="line">  &#125;</span><br><span class="line">  oDrag.style.left=l+<span class="string">'px'</span>;</span><br><span class="line">  oDrag.style.top=t+<span class="string">'px'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è‡ªè¿è¡Œå‡½æ•°å†™æ³•å½¢å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>koa2ç¬”è®°</title>
      <link href="/2019/05/21/koa2/"/>
      <url>/2019/05/21/koa2/</url>
      
        <content type="html"><![CDATA[<h2 id="koa2å¸¸ç”¨çŸ¥è¯†"><a href="#koa2å¸¸ç”¨çŸ¥è¯†" class="headerlink" title="koa2å¸¸ç”¨çŸ¥è¯†"></a>koa2å¸¸ç”¨çŸ¥è¯†</h2><h3 id="contextçš„åˆ«å"><a href="#contextçš„åˆ«å" class="headerlink" title="contextçš„åˆ«å"></a>contextçš„åˆ«å</h3><p><a href="https://koajs.com/#introduction" target="_blank" rel="noopener">æ›´å¤šå‚çœ‹ å®˜ç½‘ Request aliases Response aliases</a><br>æ‘˜å½•éƒ¨åˆ†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//Request aliases ä¸‹é¢çš„ç®€å†™ï¼Œéƒ½æŒ‡çš„æ˜¯Request</span><br><span class="line">ctx.url  -- ctx.request.url çš„åˆ«å</span><br><span class="line">ctx.method  -- ctx.request.method çš„åˆ«å</span><br><span class="line">ctx.header</span><br><span class="line">ctx.path</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//Response aliases ä¸‹é¢çš„ç®€å†™ï¼Œéƒ½æŒ‡çš„æ˜¯Request</span><br><span class="line">ctx.body  -- ctx.response.body çš„åˆ«å</span><br><span class="line">ctx.status  -- ctx.response.status çš„åˆ«å</span><br></pre></td></tr></table></figure><p>å¦å¤– ctx.req æ˜¯ ctx.request çš„åˆ«åï¼›<br>å¦å¤– ctx.res æ˜¯ ctx.response çš„åˆ«åï¼›</p><h3 id="POSTè¯·æ±‚å‚æ•°çš„è·å–"><a href="#POSTè¯·æ±‚å‚æ•°çš„è·å–" class="headerlink" title="POSTè¯·æ±‚å‚æ•°çš„è·å–"></a>POSTè¯·æ±‚å‚æ•°çš„è·å–</h3><p>koa æ²¡æœ‰å°è£…è·å–postè¯·æ±‚å‚æ•°çš„æ–¹æ³•ï¼Œè¦ä¹ˆé€šè¿‡ctx.req.onåŸç”Ÿæ–¹å¼ï¼Œè¦ä¹ˆé€šè¿‡koa-bodyparser</p><h4 id="æ–¹å¼ä¸€ï¼š"><a href="#æ–¹å¼ä¸€ï¼š" class="headerlink" title="æ–¹å¼ä¸€ï¼š"></a>æ–¹å¼ä¸€ï¼š</h4><p>ä½¿ç”¨ctx.req.onåŸç”Ÿæ–¹å¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx)=&gt;&#123;</span><br><span class="line">  let postdata=&apos;&apos;;</span><br><span class="line">  ctx.req.on(&apos;data&apos;, (data)=&gt;&#123;</span><br><span class="line">    postdata +=data;</span><br><span class="line">  &#125;)</span><br><span class="line">  ctx.req.on(&apos;end&apos;, ()=&gt;&#123;</span><br><span class="line">    console.log(postdata);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// å¦èµ·ä¸€ä¸ªgit bash çª—å£æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ³¨æ„ï¼Œ</span><br><span class="line">//ä¸€å®šç”¨git bashï¼Œ å› ä¸ºcmd æ²¡æœ‰curlå‘½ä»¤</span><br><span class="line">curl -d &quot;param1=abc&amp;param2=qqw&quot; http://localhost:3000/</span><br><span class="line"></span><br><span class="line">// åœ¨npm start æ‰€åœ¨çš„cmdæˆ–git bashçª—å£ï¼Œä¼šå‡ºç° æ‰“å°ï¼š</span><br><span class="line">//param1=abc&amp;param2=qqw</span><br></pre></td></tr></table></figure></p><h4 id="æ–¹å¼äºŒï¼š"><a href="#æ–¹å¼äºŒï¼š" class="headerlink" title="æ–¹å¼äºŒï¼š"></a>æ–¹å¼äºŒï¼š</h4><p>ä½¿ç”¨koa-bodyparseræ–¹å¼ã€‚koa-bodyparserçš„åº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨ctx.req.onå®ç°çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const bodyparser = require(&apos;koa-bodyparser&apos;)</span><br><span class="line">const app = new Koa()</span><br><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  let postData = ctx.request.body;</span><br><span class="line">  console.log(postData);</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br><span class="line"></span><br><span class="line">// å¦èµ·ä¸€ä¸ªgit bash çª—å£æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œ</span><br><span class="line">curl -d &quot;param1=abc&amp;param2=qqw&quot; http://localhost:3000/</span><br><span class="line"></span><br><span class="line">// åœ¨npm start æ‰€åœ¨çš„cmdæˆ–git bashçª—å£ï¼Œä¼šå‡ºç° æ‰“å°ï¼š</span><br><span class="line">//&#123; param1: &apos;abc&apos;, param2: &apos;qqw&apos; &#125;</span><br></pre></td></tr></table></figure></p><h3 id="æœ‰å…³content-type"><a href="#æœ‰å…³content-type" class="headerlink" title="æœ‰å…³content-type"></a>æœ‰å…³content-type</h3><h4 id="å…ˆæ¥çœ‹ä¸€ä¸ªå®ä¾‹demoï¼Œæ„Ÿå—ä¸‹ï¼š"><a href="#å…ˆæ¥çœ‹ä¸€ä¸ªå®ä¾‹demoï¼Œæ„Ÿå—ä¸‹ï¼š" class="headerlink" title="å…ˆæ¥çœ‹ä¸€ä¸ªå®ä¾‹demoï¼Œæ„Ÿå—ä¸‹ï¼š"></a>å…ˆæ¥çœ‹ä¸€ä¸ªå®ä¾‹demoï¼Œæ„Ÿå—ä¸‹ï¼š</h4><p>å‰ç«¯ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;http://127.0.0.1:3000/test&apos;, &#123;</span><br><span class="line">    method: &apos;GET&apos;, // or &apos;PUT&apos;</span><br><span class="line">    headers: new Headers(&#123;</span><br><span class="line">      &apos;Content-Type&apos;: &apos;image/png&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(res =&gt; res.text())</span><br><span class="line">  .catch(error =&gt; console.error(&apos;Error:&apos;, error))</span><br><span class="line">  .then(response =&gt; console.log(&apos;Success:&apos;, response));</span><br></pre></td></tr></table></figure></p><p>åå°ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const bodyparser = require(&apos;koa-bodyparser&apos;)</span><br><span class="line">var cors = require(&apos;koa2-cors&apos;);</span><br><span class="line"></span><br><span class="line">const app = new Koa()</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  ctx.response.type=&apos;text&apos;;</span><br><span class="line">  ctx.response.body=&apos;&lt;p/&gt;999&lt;p/&gt;&apos;;</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><p>é¡µé¢å“åº”ï¼š<br><figure class="image-box">                <img src="/image/koa2/content-type.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/koa2/content-res.png" alt title class>                <p></p>            </figure></p><p>åç»­æ“ä½œï¼š</p><ul><li>å½“åˆ‡æ¢è®¾ç½®ä¸åŒçš„ctx.response.type=â€™textâ€™;å¯¹åº”çš„Response Header çš„ Content-typeéšä¹‹æ”¹å˜</li></ul><h4 id="å¦å¤–ä¸€ä¸ªå®éªŒï¼š"><a href="#å¦å¤–ä¸€ä¸ªå®éªŒï¼š" class="headerlink" title="å¦å¤–ä¸€ä¸ªå®éªŒï¼š"></a>å¦å¤–ä¸€ä¸ªå®éªŒï¼š</h4><p>å‰ç«¯ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fetch(&apos;http://127.0.0.1:3000/test&apos;, &#123;</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  headers: new Headers(&#123;</span><br><span class="line">    &apos;Content-Type&apos;: &apos;image/png&apos;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">.then(res =&gt; res.json())</span><br><span class="line">.catch(error =&gt; console.error(&apos;Error:&apos;, error))</span><br><span class="line">.then(response =&gt; console.log(&apos;Success:&apos;, response));</span><br></pre></td></tr></table></figure></p><p>åå°ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const bodyparser = require(&apos;koa-bodyparser&apos;)</span><br><span class="line">var cors = require(&apos;koa2-cors&apos;);</span><br><span class="line"></span><br><span class="line">const app = new Koa()</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  ctx.response.type=&apos;html&apos;;</span><br><span class="line">  ctx.response.body=&#123;data:&apos;Hello World&apos;&#125;;</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><p>å‘ç°çš„ç°è±¡ï¼š</p><ul><li>è®¾ç½®ä¸åŒçš„ctx.response.type=â€™htmlâ€™æ—¶ï¼ŒResponse Header çš„ Content-typeæ²¡æœ‰éšä¹‹æ”¹å˜ï¼Œè¿˜æ˜¯æ˜¾ç¤ºä¸ºapplication/json</li><li>åå°ctx.response.body={data:â€™Hello Worldâ€™};æ”¹æˆ  ctx.response.body=â€™<html>â€˜;<br>å‰å°ä»£ç ä¸å˜ï¼Œå‘ç°res.json()è§£ææŠ¥é”™ï¼ŒUnexpected token &lt; in JSON at position 0ï¼Œ<br>å°†res.jsonæ”¹æˆres.textå°±å¥½äº†</html></li><li>åç«¯å®é™…çš„æ•°æ®æ˜¯jsonæ•°æ®(ctx.response.body={data:â€™Hello Worldâ€™})ï¼Œä½†è®¾ç½® ctx.response.type=â€™htmlâ€™;ç„¶è€Œå¹¶ä¸å½±å“å‰å°é€šè¿‡res.json()æ­£å¸¸è§£æåˆ°æ­£ç¡®æ•°æ®ï¼›</li><li>åç«¯å®é™…çš„æ•°æ®æ˜¯jsonæ•°æ®(ctx.response.body={data:â€™Hello Worldâ€™})ï¼Œè™½ç„¶å‰ç«¯è®¾ç½®äº†è‡ªå®šä¹‰Header content-typeä¸ºimage/pngï¼Œä½†ä¸å½±å“å‰ç«¯æ­£å¸¸è§£æï¼Œå‰ç«¯ä¸€æ ·èƒ½æ­£å¸¸è·å–æ•°æ®ã€‚</li></ul><h4 id="å¾—å‡ºç»“è®ºï¼š"><a href="#å¾—å‡ºç»“è®ºï¼š" class="headerlink" title="å¾—å‡ºç»“è®ºï¼š"></a>å¾—å‡ºç»“è®ºï¼š</h4><p>ç»“åˆä¸Šé¢é¡µé¢å“åº”çš„å›¾ç‰‡ä¸­ï¼š</p><ul><li>ä¸€ä¸ªè¯·æ±‚ï¼Œæœ‰ä¸¤ä¸ªcontent-type,åˆ†åˆ«æ˜¯Response Header å’Œ Request Headerä¸Šçš„ã€‚</li><li>å°åŒºåˆ«æ˜¯ Response Header çš„æ˜¯é¦–å­—æ¯å¤§å†™çš„ Content-type ï¼ŒRequest Header çš„æ˜¯é¦–å­—æ¯å°å†™çš„ content-type;</li><li>fetch çš„ headers: new Headers({â€˜Content-Typeâ€™: â€˜image/pngâ€™}) è®¾ç½®çš„æ˜¯ Request Header çš„ content-typeï¼›</li><li>Response Header çš„ Content-type æ˜¯ åŸåˆ™ä¸Šæ˜¯ctx.response.typeæ§åˆ¶è®¾ç½®çš„ï¼Œä½†å¦‚ä¸Šä¾‹ï¼Œæœ‰æ—¶Response Header çš„ Content-type æ˜¯ æµè§ˆå™¨æˆ–koaè‡ªåŠ¨è¯†åˆ«ctx.response.bodyæ•°æ®ç±»å‹è®¾ç½®çš„ã€‚</li><li>fetchè¦æƒ³æ­£ç¡®è§£ææ•°æ®ï¼Œéœ€è¦æ ¹æ®åå°å®é™…æ•°æ®ï¼Œä½¿ç”¨å¯¹åº”çš„è§£ææ–¹å¼ï¼Œå¦‚ res.json() ã€res.text()ç­‰ç­‰ï¼Œå¦‚æœè§£ææ–¹å¼ä¸å¯¹ï¼Œå°±æŠ¥é”™ã€‚</li><li>å¦å¤–æ³¨æ„çš„æ˜¯ï¼Œå‰ç«¯fetchçš„æ—¶å€™ï¼Œå¦‚æœè‡ªå®šä¹‰headerï¼Œè€Œä¸”è¯·æ±‚æ˜¯è·¨åŸŸçš„ï¼Œæ¯å‘ä¸€æ¬¡fetchï¼Œå¯èƒ½ä¼šäº§ç”Ÿä¸¤æ¬¡è¯·æ±‚ï¼Œå…·ä½“åˆ†æå‚è§ã€Škoa2é»‘çŸ¥è¯† â€“ è·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ã€‹ï¼š</li></ul><h4 id="å¸¸è§çš„-content-typeå€¼â€“å¯¹åº”çš„ctx-response-typeï¼š"><a href="#å¸¸è§çš„-content-typeå€¼â€“å¯¹åº”çš„ctx-response-typeï¼š" class="headerlink" title="å¸¸è§çš„ content-typeå€¼â€“å¯¹åº”çš„ctx.response.typeï¼š"></a>å¸¸è§çš„ content-typeå€¼â€“å¯¹åº”çš„ctx.response.typeï¼š</h4><p>application/json  â€“ ctx.response.type=â€™jsonâ€™<br>text/html  â€“ ctx.response.type=â€™htmlâ€™<br>image/png  â€“ ctx.response.type=â€™image/pngâ€™<br>text/plain  â€“ ctx.response.type=â€™textâ€™  æµè§ˆå™¨é»˜è®¤text/plain</p><h3 id="è®¾ç½®å“åº”çŠ¶æ€ç "><a href="#è®¾ç½®å“åº”çŠ¶æ€ç " class="headerlink" title="è®¾ç½®å“åº”çŠ¶æ€ç "></a>è®¾ç½®å“åº”çŠ¶æ€ç </h3><p>é€šè¿‡ctx.statusè®¾ç½®ï¼Œctx.statusæ˜¯ctx.response.statusçš„åˆ«å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const bodyparser = require(&apos;koa-bodyparser&apos;)</span><br><span class="line">var cors = require(&apos;koa2-cors&apos;);</span><br><span class="line"></span><br><span class="line">const app = new Koa()</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  ctx.response.type=&apos;text&apos;;</span><br><span class="line">  ctx.status=562;</span><br><span class="line">  ctx.response.body=&apos;&lt;p/&gt;999&lt;p/&gt;&apos;;</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><p>é¡µé¢å“åº”ï¼š<br><figure class="image-box">                <img src="/image/koa2/status.png" alt title class>                <p></p>            </figure></p><h4 id="æ³¨æ„ç‚¹ï¼š"><a href="#æ³¨æ„ç‚¹ï¼š" class="headerlink" title="æ³¨æ„ç‚¹ï¼š"></a>æ³¨æ„ç‚¹ï¼š</h4><p>koa-bodyparserçš„åº•å±‚ä¹Ÿæ˜¯ä½¿ç”¨ctx.req.onå®ç°çš„ï¼Œæ‰€ä»¥ä¸èƒ½åŒæ—¶ä½¿ç”¨ koa-bodyparserä¸ctx.req.onï¼Œå¦åˆ™ï¼Œå¯èƒ½æŠ¥é”™ï¼Œ<br>è¯¦è§ã€Škoa2é»‘çŸ¥è¯† â€“ koa-bodyparserå¯¼è‡´ctx.req.onäº‹ä»¶å¤±æ•ˆã€‹</p><h3 id="å¦‚ä½•åœ¨koaä½¿ç”¨ä¸­é—´ä»¶"><a href="#å¦‚ä½•åœ¨koaä½¿ç”¨ä¸­é—´ä»¶" class="headerlink" title="å¦‚ä½•åœ¨koaä½¿ç”¨ä¸­é—´ä»¶"></a>å¦‚ä½•åœ¨koaä½¿ç”¨ä¸­é—´ä»¶</h3><h4 id="ä¸­é—´ä»¶æ˜¯ç”±app-useåŠ è½½çš„"><a href="#ä¸­é—´ä»¶æ˜¯ç”±app-useåŠ è½½çš„" class="headerlink" title="ä¸­é—´ä»¶æ˜¯ç”±app.useåŠ è½½çš„"></a>ä¸­é—´ä»¶æ˜¯ç”±app.useåŠ è½½çš„</h4><p>ä¸­é—´ä»¶ä¸€èˆ¬éƒ½é€šè¿‡ app.use å‡½æ•°æ¥åŠ è½½ä¸­é—´ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const app = new Koa()</span><br><span class="line">app.use(cors());</span><br><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  ctx.response.type=&apos;text&apos;;</span><br><span class="line">  ctx.response.body=&apos;&lt;p/&gt;999&lt;p/&gt;&apos;;</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><h4 id="ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº"><a href="#ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº" class="headerlink" title="ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº"></a>ä¸­é—´ä»¶æ‰§è¡Œé¡ºåº</h4><p>ä¸­é—´ä»¶åœ¨ koaä¸­æ‰§è¡Œé¡ºåºï¼Œéµå¾ªæ´‹è‘±æ¨¡å‹æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](/image/koa2/middle.jpg)</span><br></pre></td></tr></table></figure></p><p>ä»£ç å±•ç¤ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  console.log(&apos;one start&apos;);</span><br><span class="line">  await next();</span><br><span class="line">  console.log(&apos;one end&apos;);</span><br><span class="line">&#125;)</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  console.log(&apos;two start&apos;);</span><br><span class="line">  await next();</span><br><span class="line">  console.log(&apos;two end&apos;);</span><br><span class="line">&#125;)</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  console.log(&apos;three start&apos;);</span><br><span class="line">  await next();</span><br><span class="line">  console.log(&apos;three end&apos;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// one start</span><br><span class="line">// two start</span><br><span class="line">// three start</span><br><span class="line">// three end</span><br><span class="line">// two end</span><br><span class="line">// one end</span><br></pre></td></tr></table></figure></p><h4 id="next"><a href="#next" class="headerlink" title="next()"></a>next()</h4><p>next()è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œé…åˆawaitä½¿ç”¨ï¼Œå¯ä»¥è¾¾åˆ°é˜»å¡åé¢ç¨‹åºæ‰§è¡Œï¼Œç­‰å¾… next() è¿”å›ç±»ä¼¼reject()æ‰æœ€ç»ˆæ‰§è¡Œnex()åé¢çš„ç¨‹åºã€‚<br>æ¯ä¸ªä¸­é—´ä»¶å¿…é¡»ä½¿ç”¨next()ï¼Œå¦åˆ™å¼‚å¸¸ã€‚</p><h3 id="å†™ä¸€ä¸ªä¸­é—´ä»¶"><a href="#å†™ä¸€ä¸ªä¸­é—´ä»¶" class="headerlink" title="å†™ä¸€ä¸ªä¸­é—´ä»¶"></a>å†™ä¸€ä¸ªä¸­é—´ä»¶</h3><p>è¿™é‡ŒåŠ¨æ‰‹å†™ä¸€ä¸ªloggerä¸­é—´ä»¶å°demoï¼Œç”¨æ¥æ‰“å°æ—¥å¿—ï¼š<br>åŸä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  console.log(ctx.method,ctx.host + ctx.url)</span><br><span class="line">  await next();</span><br><span class="line">  ctx.body = &apos;hellow world&apos;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>åŠ¨æ‰‹å†™ä¸€ä¸ªloggerä¸­é—´ä»¶ï¼Œç”¨äºæ‰“å°æ—¥å¿—ï¼Œæ”¹é€ åå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const app = new Koa()</span><br><span class="line">const logger = async function(ctx, next)&#123;</span><br><span class="line">  console.log(ctx.method,ctx.host + ctx.url)</span><br><span class="line">  await next();</span><br><span class="line">&#125;</span><br><span class="line">app.use(logger)</span><br><span class="line">app.use(async (ctx, next)=&gt;&#123;</span><br><span class="line">  ctx.body = &apos;hellow world&apos;</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(3000)</span><br></pre></td></tr></table></figure></p><h3 id="ä¸¤ç§é‰´æƒæ–¹å¼"><a href="#ä¸¤ç§é‰´æƒæ–¹å¼" class="headerlink" title="ä¸¤ç§é‰´æƒæ–¹å¼"></a>ä¸¤ç§é‰´æƒæ–¹å¼</h3><p>ä¸€ç§æ˜¯å¹¿æ³›ä½¿ç”¨çš„Cookieè®¤è¯æ¨¡å¼ï¼›<br>ä¸€ç§æ˜¯åŸºäºTokençš„è®¤è¯æ¨¡å¼, koaä¸­å¯ä»¥ç»“åˆjsonwebtoken ä¸ koa-jwtå®ç°Tokené‰´æƒ.å¼‚æ­¥åˆ°è¿™é‡Œäº†è§£æ›´å¤šã€Šjsonwebtoken ä¸ koa-jwtã€‹.<br><a href="https://github.com/YeWills/koa-demo/tree/router-Token" target="_blank" rel="noopener">è¿™é‡Œæ˜¯ä¸€ä¸ªåŸºäºTokençš„é‰´æƒdemo</a></p><h3 id="å†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£"><a href="#å†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£" class="headerlink" title="å†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£"></a>å†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£</h3><h4 id="ä½¿ç”¨fså®ç°çš„æ–¹å¼"><a href="#ä½¿ç”¨fså®ç°çš„æ–¹å¼" class="headerlink" title="ä½¿ç”¨fså®ç°çš„æ–¹å¼"></a>ä½¿ç”¨fså®ç°çš„æ–¹å¼</h4><p>å†™ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å°†æœ¬åœ°çš„æ–‡ä»¶ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯,ä¸»è¦ä½¿ç”¨fså¼€å®Œæˆï¼Œæ ¸å¿ƒä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const fs = require(&apos;fs&apos;);</span><br><span class="line">const path = require(&apos;path&apos;);</span><br><span class="line">const extname = path.extname;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const fpath = path.join(__dirname, &apos;./files/test.xlsx&apos;);</span><br><span class="line">const fstat = await stat(fpath);</span><br><span class="line">if (fstat.isFile()) &#123;</span><br><span class="line">  ctx.type = extname(fpath);</span><br><span class="line">  ctx.body = fs.createReadStream(fpath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function stat(file) &#123;</span><br><span class="line">  return new Promise(function(resolve, reject) &#123;</span><br><span class="line">    fs.stat(file, function(err, stat) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        reject(err);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        resolve(stat);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p><a href="https://github.com/YeWills/koa-demo/tree/response-file" target="_blank" rel="noopener">å®Œæ•´demo</a>;<br>æœ¬demo å‚è€ƒäº† <a href="https://github.com/YeWills/examples" target="_blank" rel="noopener">koa å®˜ç½‘example</a>ï¼Œkoa å®˜ç½‘exampleæŒºå¥½ï¼Œå±•ç¤ºäº†å¾ˆå¤šåŠŸèƒ½ï¼Œå¦‚æœæœ‰éœ€æ±‚ï¼Œå¯å…ˆåˆ°è¿™é‡Œæ‰¾ç¤ºä¾‹å®ç°ã€‚</p><h4 id="ä½¿ç”¨koa-staticå®ç°çš„æ–¹å¼"><a href="#ä½¿ç”¨koa-staticå®ç°çš„æ–¹å¼" class="headerlink" title="ä½¿ç”¨koa-staticå®ç°çš„æ–¹å¼"></a>ä½¿ç”¨koa-staticå®ç°çš„æ–¹å¼</h4><p>æ­¤æ–¹æ³•å‚è§ã€Škoa-staticã€‹ï¼Œå¼Šç«¯æ˜¯ï¼Œæ— æ³•è‡ªå®šä¹‰è·¯ç”±åç§°ï¼Œåªèƒ½ä»¥æ–‡ä»¶åç§°ä¸ºæ¥å£urlã€‚</p><h3 id="è®©htmlåœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„å››ç§æ–¹æ³•"><a href="#è®©htmlåœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„å››ç§æ–¹æ³•" class="headerlink" title="è®©htmlåœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„å››ç§æ–¹æ³•"></a>è®©htmlåœ¨æµè§ˆå™¨ä¸­è®¿é—®çš„å››ç§æ–¹æ³•</h3><p>æœ¬æ–¹æ³•åŒæ ·é€‚ç”¨äº jpgã€txtã€docxç­‰ç­‰æ–‡ä»¶ã€‚</p><h4 id="æµè§ˆå™¨è®¿é—®htmlçš„å‰èº«"><a href="#æµè§ˆå™¨è®¿é—®htmlçš„å‰èº«" class="headerlink" title="æµè§ˆå™¨è®¿é—®htmlçš„å‰èº«"></a>æµè§ˆå™¨è®¿é—®htmlçš„å‰èº«</h4><p>è¿™æ˜¯ä¸€ç§åŸå§‹çš„æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx) =&gt; &#123;</span><br><span class="line">    let html = `</span><br><span class="line">  &lt;h1&gt;ç™»å½•&lt;\h1&gt;</span><br><span class="line">  &lt;form method = &quot;POST&quot; action= &quot;/&quot;&gt;</span><br><span class="line">  &lt;p&gt;ç”¨æˆ·å&lt;/p&gt;</span><br><span class="line">  &lt;input name=&quot;userName&quot; /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;p&gt;å¯†ç &lt;/p&gt;</span><br><span class="line">  &lt;input name=&quot;password&quot; type=&quot;password&quot; /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot;&gt;submit&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  `;</span><br><span class="line">  ctx.body=html;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="koa-viewæ–¹æ³•ä¸€"><a href="#koa-viewæ–¹æ³•ä¸€" class="headerlink" title="koa-viewæ–¹æ³•ä¸€"></a>koa-viewæ–¹æ³•ä¸€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const views = require(&apos;koa-views&apos;)</span><br><span class="line">const &#123; resolve &#125; = require(&apos;path&apos;)</span><br><span class="line">const handlePath = path =&gt; resolve(__dirname, path)</span><br><span class="line">app.use(views(handlePath(&apos;../pages&apos;)), &#123;</span><br><span class="line">  extension: &apos;html&apos;</span><br><span class="line">&#125;)</span><br><span class="line">router.get(&apos;/gethtml&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    await ctx.render(&apos;/static/test.html&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="koa-viewæ–¹æ³•äºŒ"><a href="#koa-viewæ–¹æ³•äºŒ" class="headerlink" title="koa-viewæ–¹æ³•äºŒ"></a>koa-viewæ–¹æ³•äºŒ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const views = require(&apos;koa-views&apos;)</span><br><span class="line">const &#123; resolve &#125; = require(&apos;path&apos;)</span><br><span class="line">const handlePath = path =&gt; resolve(__dirname, path)</span><br><span class="line">app.use(views(handlePath(&apos;../pages&apos;)), &#123;</span><br><span class="line">  extension: &apos;html&apos;</span><br><span class="line">&#125;)</span><br><span class="line">app.use(async (ctx) =&gt; &#123;</span><br><span class="line">    await ctx.render(&apos;/static/test.html&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">// ç¼ºç‚¹åœ¨äºæ— æ³•è®¿é—®åˆ° http://localhost:3000/abc æ­¤è·¯ç”±ï¼Œéƒ½ä¼šè¢«æˆªè·è½¬å‘ä¸Šé¢çš„/static/test.html</span><br><span class="line">router.get(&apos;/abc&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.body=&apos;888999&apos;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="koa-staticæ–¹æ³•ä¸€"><a href="#koa-staticæ–¹æ³•ä¸€" class="headerlink" title="koa-staticæ–¹æ³•ä¸€"></a>koa-staticæ–¹æ³•ä¸€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const serve = require(&apos;koa-static&apos;)</span><br><span class="line">const &#123; resolve &#125; = require(&apos;path&apos;)</span><br><span class="line">const handlePath = path =&gt; resolve(__dirname, path)</span><br><span class="line">// http://localhost:3000/redis.html</span><br><span class="line">app.use(serve(handlePath(&apos;../pages/static/test_redirect&apos;)))</span><br><span class="line">// http://localhost:3000</span><br><span class="line">app.use(async (ctx) =&gt; &#123;</span><br><span class="line">  ctx.redirect(&apos;/redis.html&apos;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æœ€ä½³æ–¹æ³•-koa-staticæ–¹æ³•äºŒ"><a href="#æœ€ä½³æ–¹æ³•-koa-staticæ–¹æ³•äºŒ" class="headerlink" title="æœ€ä½³æ–¹æ³•(koa-staticæ–¹æ³•äºŒ)"></a>æœ€ä½³æ–¹æ³•(koa-staticæ–¹æ³•äºŒ)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const serve = require(&apos;koa-static&apos;)</span><br><span class="line">const &#123; resolve &#125; = require(&apos;path&apos;)</span><br><span class="line">const handlePath = path =&gt; resolve(__dirname, path)</span><br><span class="line">// åœ¨staticå†…å®šä¹‰ä¸€ä¸ªindex.htmlï¼Œåˆ©ç”¨æœåŠ¡å™¨é»˜è®¤æ‰¾index.htmlç‰¹æ€§</span><br><span class="line">app.use(serve(handlePath(&apos;../pages/static&apos;)))</span><br></pre></td></tr></table></figure><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://localhost:3000ï¼Œç„¶åæ˜¾ç¤ºè‡ªå·±çš„index.htmlæ–‡ä»¶ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯koa-staticæˆ–è€…æ˜¯koa-viewsæ¥å®ç°ã€‚" target="_blank" rel="noopener">http://localhost:3000ï¼Œç„¶åæ˜¾ç¤ºè‡ªå·±çš„index.htmlæ–‡ä»¶ï¼Œä¸€èˆ¬ä½¿ç”¨çš„æ˜¯koa-staticæˆ–è€…æ˜¯koa-viewsæ¥å®ç°ã€‚</a><br>æœ€å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨koa-staticæ¥åšï¼Œå¥½å¤„å¤šå¤š,çªé—¨åœ¨äºç»™åœ¨staticå†…å®šä¹‰ä¸€ä¸ªindex.htmlï¼Œåˆ©ç”¨æœåŠ¡å™¨é»˜è®¤æ‰¾index.htmlç‰¹æ€§ï¼Œè¿™æ ·åœ¨æµè§ˆå™¨ä¸­åªå¹²å¹²å‡€å‡€æ˜¾ç¤ºurl <a href="http://localhost:3000ï¼Œéå¸¸å¥½ï¼Œè€Œä¸”koa-staticè‡ªå·±å°è£…è·¯ç”±å¤„ç†å¾ˆå¥½ï¼Œä¸ä¼šå½±å“ä½ åœ¨koaä¸­å®šä¹‰çš„å…¶ä»–è·¯ç”±ã€‚" target="_blank" rel="noopener">http://localhost:3000ï¼Œéå¸¸å¥½ï¼Œè€Œä¸”koa-staticè‡ªå·±å°è£…è·¯ç”±å¤„ç†å¾ˆå¥½ï¼Œä¸ä¼šå½±å“ä½ åœ¨koaä¸­å®šä¹‰çš„å…¶ä»–è·¯ç”±ã€‚</a><br>ç”¨koa-viewä¹Ÿèƒ½è¾¾åˆ°ç›®çš„ï¼Œå±€é™æ€§å¤§ï¼Œä¼šè®©ä½ å®šä¹‰çš„å…¶ä»–è·¯ç”±å¤±æ•ˆ,å¦‚æœæœ‰ç–‘é—®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„demoæµ‹è¯•ç ”ç©¶ä¸€ç•ªã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/show-file-in-Browser" target="_blank" rel="noopener">ä»¥ä¸Šå››ç§æƒ…å†µï¼Œè¯¦ç»†çš„demo</a></p><h3 id="å‰åç«¯ä¸€ä½“çš„å°demo"><a href="#å‰åç«¯ä¸€ä½“çš„å°demo" class="headerlink" title="å‰åç«¯ä¸€ä½“çš„å°demo"></a>å‰åç«¯ä¸€ä½“çš„å°demo</h3><p>é€šè¿‡å¯¹ä¸Šé¢ä¸¤èŠ‚çš„æ€»ç»“ï¼Œå†™äº†ä¸€ä¸ªæœ‰å›¾ç‰‡ã€xlsã€æ­£å¸¸jsonçš„ä¸‰ç§æ¥å£ï¼Œ<br>ä»¥åŠå‰ç«¯å¯¹äºè¿™ä¸‰ç§ä¸åŒç±»å‹æ•°æ®å¦‚ä½•å¤„ç†ã€‚<br>æœ¬demoä¹Ÿå¯ç”¨äºç†è§£blobã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/response-file" target="_blank" rel="noopener">ã€Šå†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£ â€“ä¸ºåŒä¸€ä¸ªdemoã€‹</a></p><h3 id="æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼"><a href="#æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼"></a>æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼</h3><p>æœåŠ¡ç«¯ä¸»è¦è¿ç”¨ koa-multerã€‚<br><a href="https://github.com/YeWills/file-upload" target="_blank" rel="noopener">è¯¦ç»†å‚è€ƒdemo</a><br>ä¹Ÿå¯å‚è€ƒï¼š<br>ã€Šhtmlç¬”è®°â€“æ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼ã€‹</p><h3 id="æˆªå–å‰ç«¯è¯·æ±‚æ–¹æ¡ˆ"><a href="#æˆªå–å‰ç«¯è¯·æ±‚æ–¹æ¡ˆ" class="headerlink" title="æˆªå–å‰ç«¯è¯·æ±‚æ–¹æ¡ˆ"></a>æˆªå–å‰ç«¯è¯·æ±‚æ–¹æ¡ˆ</h3><p>koaå¯åŠ¨æœåŠ¡ï¼Œä½¿ç”¨koa-view render æ•´ä¸ªç¼–è¯‘å¥½çš„å‰ç«¯å·¥ç¨‹index.html, æ­¤æ—¶index.htmlè‡ªç„¶å¤„äºkoaçš„åŒåŸŸåä¸‹ï¼Œindex.htmlå‘çš„æ¯ä¸ªè¯·æ±‚éƒ½è¢«koa çš„app.useæˆªå–ï¼Œåœ¨app.useå†…ï¼Œå†ä½¿ç”¨ã€ŠæœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•ã€‹ï¼Œç»„è£…æ•°æ®ï¼Œä¿®æ”¹urlï¼Œå‘æŒ‡å®šæœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨ä¹‹é—´è¯·æ±‚æ²¡æœ‰è·¨åŸŸé™åˆ¶ï¼ŒæˆåŠŸçš„è§£å†³è·¨åŸŸã€‚<br>è¿™ç§æ–¹å¼æœ€ç†æƒ³ï¼Œå› ä¸ºä¸ç”¨ä¿®æ”¹åå°ï¼Œå› ä¸ºå¾ˆå¤šå…¬å¸å‡çº§æ”¹é€ æ—¶ï¼Œåå°å¯ä»¥ç»™ä½ æä¾›æµ‹è¯•ç”¨æˆ·è´¦å·ï¼Œå› ä¸ºè€çš„é¡¹ç›®å®¢æˆ·æ­£åœ¨ä½¿ç”¨ï¼Œä¸èƒ½ä¿®æ”¹æ”¾å¼€è·¨åŸŸé™åˆ¶çš„ä»£ç ,é‡åˆ°è¿™ç§åœºæ™¯ï¼Œå°±å¿…é¡»ä½¿ç”¨ä»¥ä¸Šè§£å†³è·¨åŸŸçš„æ–¹å¼ã€‚<br><a href="https://github.com/YeWills/koa2_films/tree/forward-cors" target="_blank" rel="noopener">æœåŠ¡ç«¯æˆªå–è¯·æ±‚å‘å¦å¤–æœåŠ¡å™¨å‘è¯·æ±‚çš„demo</a><br>å‚è€ƒã€ŠæœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•ã€‹äº†è§£æ›´å¤š<br>å‚è€ƒã€Šè·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ã€‹äº†è§£æ›´å¤š</p><h3 id="æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•"><a href="#æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•" class="headerlink" title="æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•"></a>æœåŠ¡ç«¯å‘èµ·è¯·æ±‚çš„æ–¹æ³•</h3><p>æœåŠ¡ç«¯å‘èµ·è¯·æ±‚å¯ä»¥è½»æ¾å®ç°ï¼Œkoaæˆªå–å‰ç«¯è¯·æ±‚ç»„è£…æ•°æ®å è½¬å‘è¯·æ±‚çš„åŠŸèƒ½ã€‚</p><h4 id="httpæ–¹å¼"><a href="#httpæ–¹å¼" class="headerlink" title="httpæ–¹å¼"></a>httpæ–¹å¼</h4><p>å‚è€ƒã€Šhttpã€‹</p><h4 id="requestæ–¹å¼"><a href="#requestæ–¹å¼" class="headerlink" title="requestæ–¹å¼"></a>requestæ–¹å¼</h4><p>å‚è€ƒã€Šrequest-promise-native requestã€‹</p><h3 id="ctx-state"><a href="#ctx-state" class="headerlink" title="ctx.state"></a>ctx.state</h3><p>æ­¤å±æ€§ï¼Œåœ¨åšç¬”è®°ä¸ºæ­¢ï¼Œç”¨çš„æ¯”è¾ƒå°‘ï¼Œä¸ç”¨æ·±ç©¶ï¼Œç”¨æ—¶å†äº†è§£ã€‚<br>Koa è¿˜çº¦å®šäº†ä¸€ä¸ªä¸­é—´ä»¶çš„å­˜å‚¨ç©ºé—´ ctx.stateã€‚é€šè¿‡ state å¯ä»¥å­˜å‚¨ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·æ•°æ®ï¼Œç‰ˆæœ¬ä¿¡æ¯ç­‰ã€‚å¦‚æœä½ ä½¿ç”¨ webpack æ‰“åŒ…çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶ï¼Œå°†åŠ è½½èµ„æºçš„æ–¹æ³•ä½œä¸º ctx.state çš„å±æ€§ä¼ å…¥åˆ° view å±‚ï¼Œæ–¹ä¾¿è·å–èµ„æºè·¯å¾„ã€‚<a href="https://www.jianshu.com/p/d3afa36aa17a" target="_blank" rel="noopener">æ‘˜è‡ªæ­¤æ–‡</a></p><h2 id="koa2é»‘çŸ¥è¯†"><a href="#koa2é»‘çŸ¥è¯†" class="headerlink" title="koa2é»‘çŸ¥è¯†"></a>koa2é»‘çŸ¥è¯†</h2><h3 id="favicon-ico"><a href="#favicon-ico" class="headerlink" title="/favicon.ico"></a>/favicon.ico</h3><p>æˆ‘ä»¬å¸¸åŠ è½½domæ—¶ï¼Œä¼šçœ‹åˆ°æœ‰ä¸€ä¸ª/favicon.icoè¯·æ±‚ï¼Œè¿™ä¸ªæ˜¯Domæ¸²æŸ“æ—¶ï¼Œé»˜è®¤è‡ªå¸¦çš„é™æ€èµ„æºã€‚</p><h3 id="this-æŒ‡å‘-ctx"><a href="#this-æŒ‡å‘-ctx" class="headerlink" title="this æŒ‡å‘ ctx"></a>this æŒ‡å‘ ctx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(async (ctx)=&gt;&#123;</span><br><span class="line"> this; //æ­¤thiså…¶å®å°±æ˜¯ctxï¼Œå°±æ˜¯Context</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&apos;run in 3000&apos;)</span><br></pre></td></tr></table></figure><h3 id="koa-bodyparserå¯¼è‡´ctx-req-onäº‹ä»¶å¤±æ•ˆ"><a href="#koa-bodyparserå¯¼è‡´ctx-req-onäº‹ä»¶å¤±æ•ˆ" class="headerlink" title="koa-bodyparserå¯¼è‡´ctx.req.onäº‹ä»¶å¤±æ•ˆ"></a>koa-bodyparserå¯¼è‡´ctx.req.onäº‹ä»¶å¤±æ•ˆ</h3><p>ä¸‹é¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºkoa-bodyparserçš„åº•å±‚å°±æ˜¯åŸºäºctx.req.onå®ç°çš„ï¼Œå¦‚æœä½¿ç”¨äº†koa-bodyparserï¼Œå®ƒå¯èƒ½ä¼šåŠ«æŒctx.req.onè¿™ä¸ªäº‹ä»¶ï¼Œå¯¼è‡´ctx.req.onäº‹ä»¶å¤±æ•ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.use(bodyparser())</span><br><span class="line">app.use(async (ctx)=&gt;&#123;</span><br><span class="line">  let postdata=&apos;&apos;;</span><br><span class="line">  ctx.req.on(&apos;data&apos;, (data)=&gt;&#123;</span><br><span class="line">    postdata +=data;</span><br><span class="line">  &#125;)</span><br><span class="line">  ctx.req.on(&apos;end&apos;, ()=&gt;&#123;</span><br><span class="line">    console.log(postdata);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&apos;run in 3000&apos;)</span><br></pre></td></tr></table></figure></p><p>è§£å†³çš„æ–¹æ³•ä¹Ÿç®€å•ï¼Œkoa-bodyparseræœ¬æ¥æ˜¯ä¸ºäº†æ–¹ä¾¿è·å–ctx.req.on,ä½¿ç”¨äº†koa-bodyparserå°±æ²¡å¿…è¦ä½¿ç”¨ctx.req.onã€‚<br>æˆ–è€…ç”¨kctx.req.onï¼Œå°±ä¸è¦ç”¨koa-bodyparserï¼›</p><h3 id="è·¨åŸŸçš„ä¸¤ç§è§£å†³æ–¹å¼"><a href="#è·¨åŸŸçš„ä¸¤ç§è§£å†³æ–¹å¼" class="headerlink" title="è·¨åŸŸçš„ä¸¤ç§è§£å†³æ–¹å¼"></a>è·¨åŸŸçš„ä¸¤ç§è§£å†³æ–¹å¼</h3><h4 id="koa2-corsè§£å†³è·¨åŸŸ"><a href="#koa2-corsè§£å†³è·¨åŸŸ" class="headerlink" title="koa2-corsè§£å†³è·¨åŸŸ"></a>koa2-corsè§£å†³è·¨åŸŸ</h4><h5 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h5><p>var cors = require(â€˜koa2-corsâ€™);<br>app.use(cors());</p><h5 id="å°†koa2-corsæ”¾åœ¨æœ€ä¸Šé¢"><a href="#å°†koa2-corsæ”¾åœ¨æœ€ä¸Šé¢" class="headerlink" title="å°†koa2-corsæ”¾åœ¨æœ€ä¸Šé¢"></a>å°†koa2-corsæ”¾åœ¨æœ€ä¸Šé¢</h5><p>å°†koa2-corsæ”¾åœ¨æœ€ä¸Šé¢ï¼Œè®©koa2-corså…ˆäºå…¶ä»–ä¸­é—´ä»¶æ‰§è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">app.use(cors()) // è§£å†³è·¨åŸŸï¼Œè·¨åŸŸä»£ç æœ€å¥½æ”¾åœ¨æ‰€æœ‰ä¸­é—´ä»¶å‰é¢</span><br><span class="line">const views = require(&apos;koa-views&apos;)</span><br><span class="line">const serve = require(&apos;koa-static&apos;)</span><br><span class="line">const &#123; resolve &#125; = require(&apos;path&apos;)</span><br><span class="line">const handlePath = path =&gt; resolve(__dirname, path)</span><br><span class="line">app.use(serve(handlePath(&apos;../pages/static&apos;)))</span><br><span class="line">app.use(views(handlePath(&apos;../pages&apos;)), &#123;</span><br><span class="line">  extension: &apos;html&apos;</span><br><span class="line">&#125;)</span><br><span class="line">app.use(async (ctx) =&gt; &#123;</span><br><span class="line">  await ctx.render(&apos;index.html&apos;)</span><br><span class="line">&#125;)</span><br><span class="line">app.use(bodyparser())// è§£æpostå‚æ•°</span><br><span class="line">app.use(router.routes())// è°ƒç”¨è·¯ç”±ä¸­é—´ä»¶</span><br><span class="line">app.use(router.allowedMethods())// å¯¹å¼‚å¸¸çŠ¶æ€ç å¤„ç†</span><br><span class="line">app.listen(3000, ()=&gt;&#123;</span><br><span class="line">  console.log(&apos;server is running at http://localhost:3000&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h5 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h5><p>éœ€è¦ä¿®æ”¹åå°ï¼Œéœ€è¦åå°æ”¾å¼€è·¨åŸŸé™åˆ¶ï¼Œå¦‚æœåå°å·²ç»æŠ•äº§ï¼Œå®¢æˆ·æ­£åœ¨ä½¿ç”¨è¯¥åå°ï¼Œé‚£ä¹ˆè‚¯å®šä¸èƒ½æ”¾å¼€è·¨åŸŸé™åˆ¶ï¼Œè¿™ç§è·¨åŸŸè§£å†³æ–¹æ³•å°±æ»¡è¶³ä¸äº†éœ€æ±‚ã€‚</p><h4 id="æœåŠ¡ç«¯å‘æœåŠ¡ç«¯å‘è¯·æ±‚è§£å†³è·¨åŸŸ"><a href="#æœåŠ¡ç«¯å‘æœåŠ¡ç«¯å‘è¯·æ±‚è§£å†³è·¨åŸŸ" class="headerlink" title="æœåŠ¡ç«¯å‘æœåŠ¡ç«¯å‘è¯·æ±‚è§£å†³è·¨åŸŸ"></a>æœåŠ¡ç«¯å‘æœåŠ¡ç«¯å‘è¯·æ±‚è§£å†³è·¨åŸŸ</h4><h5 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h5><p>å‚è€ƒã€Šæˆªå–å‰ç«¯è¯·æ±‚æ–¹æ¡ˆã€‹<br>å‚è€ƒã€Šè·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ã€‹<br>å‚è€ƒã€Šè·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚ã€‹<br>è¿™é‡Œæœ‰ä¸€ä¸ªæœåŠ¡ç«¯æˆªå–å‰ç«¯è¯·æ±‚ï¼Œè½¬å‘ç»™æŒ‡å®šæœåŠ¡å™¨çš„<a href="https://github.com/YeWills/koa2_films/tree/forward-cors" target="_blank" rel="noopener">demo</a>ï¼Œä¸è¿‡è¯¥demoåªåšäº†ä¸€ä¸ªæ¥å£çš„è½¬å‘,çœ‹æœ¬ä¾‹äº†è§£ä¸‹è¿™ç§æ¨¡å¼</p><h5 id="ä¼˜ç¼ºç‚¹-1"><a href="#ä¼˜ç¼ºç‚¹-1" class="headerlink" title="ä¼˜ç¼ºç‚¹"></a>ä¼˜ç¼ºç‚¹</h5><p>ä¼˜ç‚¹æ˜¯ï¼Œä¸ç”¨ä¿®æ”¹åå°ï¼Œè¿™ç§æ–¹æ³•éå¸¸é€‚åˆåå°åœ¨ä½¿ç”¨ï¼Œè€Œè¦åšäº§å“å‡çº§çš„é¡¹ç›®ï¼Œç¼ºç‚¹æ˜¯ï¼Œå‰ç«¯é¡¹ç›®å·¥ç¨‹é…ç½®éº»çƒ¦ã€‚</p><h3 id="home-id-name-è·¯ç”±å¯¹åº”çš„url"><a href="#home-id-name-è·¯ç”±å¯¹åº”çš„url" class="headerlink" title="/home/:id/:name è·¯ç”±å¯¹åº”çš„url"></a>/home/:id/:name è·¯ç”±å¯¹åº”çš„url</h3><p>router.get(â€˜/homeâ€™  â€”å¯¹åº” <a href="http://localhost:3000/home?id=01&amp;name=admin" target="_blank" rel="noopener">http://localhost:3000/home?id=01&amp;name=admin</a><br>router.get(â€˜/home/:id/:nameâ€™  â€”å¯¹åº” <a href="http://localhost:3000/home/01/admin" target="_blank" rel="noopener">http://localhost:3000/home/01/admin</a></p><h3 id="è·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚"><a href="#è·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚" class="headerlink" title="è·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚"></a>è·¨åŸŸè¯·æ±‚æœ‰æ—¶ä¼šå‘ä¸¤æ¬¡è¯·æ±‚</h3><p>å½“å‰ç«¯fetchè‡ªå®šäº†headeræ—¶ï¼Œä¸”æ¥å£è·¨åŸŸæ—¶ï¼Œfetchä¸€æ¬¡ï¼Œå¯èƒ½ä¼šå‘ä¸¤æ¬¡ç›¸åŒè¯·æ±‚ï¼Œä¸¤æ¬¡è¯·æ±‚ä¸€æ¬¡æ˜¯Request Method: OPTIONSçš„ï¼Œ<br>ä¸€æ¬¡æ˜¯Request Method: GETçš„ï¼Œ<br>åŸæ¥fetchåœ¨å‘é€çœŸæ­£çš„è¯·æ±‚å‰, ä¼šå…ˆå‘é€ä¸€ä¸ªæ–¹æ³•ä¸ºOPTIONSçš„é¢„è¯·æ±‚(preflight request), ç”¨äºè¯•æ¢æœåŠ¡ç«¯æ˜¯å¦èƒ½æ¥å—çœŸæ­£çš„è¯·æ±‚<a href="https://blog.csdn.net/cc1314_/article/details/78272329" target="_blank" rel="noopener">è¯¦ç»†åŸå› å‚è§è¿™é‡Œ</a>ï¼›<br>è§£å†³ä¹‹é“å°±æ˜¯æŠŠè‡ªå®šä¹‰headerså­—æ®µåˆ æ‰åï¼›<br>æˆ–è€…ä¸è¦ä½¿ç”¨require(â€˜koa2-corsâ€™)çš„æ–¹å¼è§£å†³è·¨åŸŸï¼Œå¯ä»¥é€šè¿‡æœåŠ¡ç«¯è¯·æ±‚æœåŠ¡å™¨çš„æ–¹å¼è§£å†³è·¨åŸŸï¼›<br>å› ä¸ºè·¨åŸŸæ˜¯æµè§ˆå™¨çš„é™åˆ¶æœºåˆ¶ï¼Œè€ŒæœåŠ¡å™¨ä¸æœåŠ¡å™¨ä¹‹é—´ä¸å­˜åœ¨è·¨åŸŸé—®é¢˜ï¼Œå…·ä½“æ€è·¯ï¼š<br>åœ¨åŒåŸŸåä¸‹é€šè¿‡ koa æˆªå– é¡¹ç›®çš„æ‰€æœ‰fetchè¯·æ±‚ï¼Œç„¶åä½¿ç”¨ request æ¨¡å—ï¼Œé€šè¿‡ request ç»™å¦å¤–åŸŸåä¸‹çš„æœåŠ¡å™¨å‘è¯·æ±‚,<a href="https://github.com/YeWills/koa2_films/tree/forward-cors" target="_blank" rel="noopener">æœåŠ¡ç«¯æˆªå–è¯·æ±‚å‘å¦å¤–æœåŠ¡å™¨å‘è¯·æ±‚çš„demo</a></p><h3 id="åå°æŠ¥é”™appæœ‰é”™è¯¯æ—¥å¿—ï¼Œä¹Ÿä¼šæŠ¥è·¨åŸŸé”™è¯¯"><a href="#åå°æŠ¥é”™appæœ‰é”™è¯¯æ—¥å¿—ï¼Œä¹Ÿä¼šæŠ¥è·¨åŸŸé”™è¯¯" class="headerlink" title="åå°æŠ¥é”™appæœ‰é”™è¯¯æ—¥å¿—ï¼Œä¹Ÿä¼šæŠ¥è·¨åŸŸé”™è¯¯"></a>åå°æŠ¥é”™appæœ‰é”™è¯¯æ—¥å¿—ï¼Œä¹Ÿä¼šæŠ¥è·¨åŸŸé”™è¯¯</h3><p>å¦‚æœé…ç½®äº†koa2-corsè§£å†³è·¨åŸŸï¼Œä½†è¯·æ±‚æ—¶æœ‰è·¨åŸŸæŠ¥é”™ï¼Œå¯èƒ½æ˜¯app.useå†…éƒ¨ç¨‹åºæ‰§è¡ŒæŠ¥é”™ï¼Œä¼šå¯¼è‡´åå°å“åº”å¼‚å¸¸ï¼Œç„¶åå‰å°å¯èƒ½æ˜¾ç¤ºä¸ºè·¨åŸŸé™åˆ¶é”™è¯¯</p><h3 id="å¥‡æ€ªçš„é˜»å¡"><a href="#å¥‡æ€ªçš„é˜»å¡" class="headerlink" title="å¥‡æ€ªçš„é˜»å¡"></a>å¥‡æ€ªçš„é˜»å¡</h3><h4 id="ä¸å¸¦async"><a href="#ä¸å¸¦async" class="headerlink" title="ä¸å¸¦async"></a>ä¸å¸¦async</h4><p>å¦‚ä¸‹ï¼Œæ‰§è¡Œé¡ºåºå°†ä¸ºï¼š 1 3 2 4ã€‚<br>é¦–å…ˆæ‰“å°1ï¼›<br>ç„¶åè¿›å…¥ä¸‹ä¸ªä¸­é—´ä»¶ï¼Œæ‰“å°3ï¼›<br>å› ä¸ºåŠ äº†awaitï¼Œæ‰€ä»¥ä¸‹é¢çš„ç¨‹åºè¢«é˜»å¡äº†ï¼›<br>ä¸€æ—¦é˜»å¡ï¼Œç¨‹åºå°†å…ˆæ‰§è¡Œæœªè¢«é˜»å¡çš„ 2ï¼Œæ‰€ä»¥æ‰“å°äº†2ï¼›<br>å½“getè¯·æ±‚å®Œæ¯•ï¼Œé˜»å¡è§£é™¤ï¼Œæ‰§è¡Œ4ï¼›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>);</span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">'axios'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> koa();</span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">     ctx.body = <span class="string">'Hello World'</span>;</span><br><span class="line">     next()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.use(<span class="keyword">async</span>(ctx, next)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    <span class="keyword">await</span> axios.get(<span class="string">'https://www.baidu.com/'</span>)</span><br><span class="line">    next()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ç§æ‰§è¡Œé¡ºåºæ²¡æœ‰æŒ‰ç…§æ´‹è‘±æ¨¡å‹é¡ºåºæ‰§è¡Œï¼Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><h4 id="å¸¦async"><a href="#å¸¦async" class="headerlink" title="å¸¦async"></a>å¸¦async</h4><p>å…¶ä»–ä¸å˜ï¼Œå°±ä¸‹é¢çš„å˜åŒ–,æ‰“å°é¡ºåºå°±æ˜¯æ´‹è‘±æ¨¡å‹æ‰§è¡Œçš„æ­£å¸¸é¡ºåºï¼š<br>1 3 4 2<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="keyword">async</span>(ctx, next)=&gt;&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">     ctx.body = <span class="string">'Hello World'</span>;</span><br><span class="line">     <span class="keyword">await</span> next()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="ä¿è¯æ´‹è‘±æ¨¡å‹-ä¸­é—´ä»¶å¿…é¡»å¸¦asyncã€await"><a href="#ä¿è¯æ´‹è‘±æ¨¡å‹-ä¸­é—´ä»¶å¿…é¡»å¸¦asyncã€await" class="headerlink" title="ä¿è¯æ´‹è‘±æ¨¡å‹-ä¸­é—´ä»¶å¿…é¡»å¸¦asyncã€await"></a>ä¿è¯æ´‹è‘±æ¨¡å‹-ä¸­é—´ä»¶å¿…é¡»å¸¦asyncã€await</h3><p>å…·ä½“å‚è€ƒã€Šå¥‡æ€ªçš„é˜»å¡ã€‹ï¼Œä¸ºäº†ä¿è¯ä¸­é—´ä»¶åƒæ´‹è‘±æ¨¡å‹çš„é¡ºåºä¸€å±‚ä¸€å±‚æ‰§è¡Œç¨‹åºï¼Œå¿…é¡»å¸¦ä¸Šasyncã€awaitã€‚</p><h3 id="ä¸ºä»€ä¹ˆè¦ä¿è¯æ´‹è‘±æ¨¡å‹"><a href="#ä¸ºä»€ä¹ˆè¦ä¿è¯æ´‹è‘±æ¨¡å‹" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä¿è¯æ´‹è‘±æ¨¡å‹"></a>ä¸ºä»€ä¹ˆè¦ä¿è¯æ´‹è‘±æ¨¡å‹</h3><p>å¦‚æœä¿è¯äº†æ´‹è‘±æ¨¡å‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šï¼Œawait next()ä¹‹åï¼Œæ‰§è¡Œçš„ä»£ç è‚¯å®šæ˜¯åé¢ä¸­é—´ä»¶ä»¥åŠæ‰§è¡Œå®Œæˆäº†çš„ï¼›<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œconsole.log(2)è‚¯å®šæ˜¯ä¸‹é¢çš„ä¸­é—´ä»¶ç¨‹åºæ‰§è¡Œå®Œåæ‰æ‰§è¡Œçš„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="keyword">async</span>(ctx, next)=&gt;&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">     <span class="keyword">await</span> next()</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="number">2</span>)<span class="comment">//ä¿è¯è¿™ä¸ªæ‰“å°æ˜¯åœ¨ä¸‹é¢æ‰€ä»¥ä¸­é—´ä»¶æ‰§è¡Œå®Œæˆä¹‹åï¼Œæ‰æ‰§è¡Œã€‚</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="koa2æ¨¡å—ä¸Š"><a href="#koa2æ¨¡å—ä¸Š" class="headerlink" title="koa2æ¨¡å—ä¸Š"></a>koa2æ¨¡å—ä¸Š</h2><h3 id="koa-router"><a href="#koa-router" class="headerlink" title="koa-router"></a>koa-router</h3><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const Koa = require(&apos;koa&apos;)</span><br><span class="line">const bodyparser = require(&apos;koa-bodyparser&apos;)</span><br><span class="line">const router = require(&apos;koa-router&apos;)()</span><br><span class="line">var cors = require(&apos;koa2-cors&apos;);</span><br><span class="line">const app = new Koa()</span><br><span class="line"> router.get(&apos;/&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.response.body = `&lt;h1&gt;index page&lt;/h1&gt;`</span><br><span class="line">&#125;)</span><br><span class="line">router.get(&apos;/home&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.response.body = &apos;&lt;h1&gt;HOME page&lt;/h1&gt;&apos;</span><br><span class="line">&#125;)</span><br><span class="line">router.get(&apos;/404&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    ctx.response.body = &apos;&lt;h1&gt;404 Not Found&lt;/h1&gt;&apos;</span><br><span class="line">&#125;)</span><br><span class="line">app.use(cors()) // è§£å†³è·¨åŸŸ</span><br><span class="line">app.use(bodyparser())// è§£æpostå‚æ•°</span><br><span class="line">app.use(router.routes())// æ³¨å†Œè·¯ç”±ä¸­é—´ä»¶</span><br><span class="line">app.use(router.allowedMethods())// å¯¹å¼‚å¸¸çŠ¶æ€ç å¤„ç†</span><br><span class="line">app.listen(3000, ()=&gt;&#123;</span><br><span class="line">  console.log(&apos;server is running at http://localhost:3000&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å…³é”® æ˜¯åœ¨æœ€åä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.use(router.routes())// è°ƒç”¨è·¯ç”±ä¸­é—´ä»¶</span><br><span class="line">app.use(router.allowedMethods())// å¯¹å¼‚å¸¸çŠ¶æ€ç å¤„ç†</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶ï¼Œå¦‚æœä½ ä¸æƒ³å¤„ç†å¼‚å¸¸çŠ¶æ€ç ï¼Œå®Œå…¨å¯ä»¥ä¸ä½¿ç”¨router.allowedMethods(),å•ç‹¬ä½¿ç”¨router.routes()å³å¯ã€‚</p><h4 id="æ¨¡æ‹Ÿè·¯ç”±ä¸­é—´ä»¶"><a href="#æ¨¡æ‹Ÿè·¯ç”±ä¸­é—´ä»¶" class="headerlink" title="æ¨¡æ‹Ÿè·¯ç”±ä¸­é—´ä»¶"></a>æ¨¡æ‹Ÿè·¯ç”±ä¸­é—´ä»¶</h4><p>ä¸‹é¢æ¨¡æ‹Ÿè·¯ç”±å†™çš„ä¸­é—´ä»¶ï¼Œå¯ä»¥åŠ æ·±å¯¹è·¯ç”±ä¸­é—´ä»¶çš„ç†è§£<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">class Router&#123;</span><br><span class="line">  constructor()&#123;</span><br><span class="line">    this._routers = [];</span><br><span class="line">  &#125;</span><br><span class="line">  get(url, handler)&#123;</span><br><span class="line">    this._routers.push(&#123;</span><br><span class="line">      url:url,</span><br><span class="line">      method:&apos;GET&apos;,</span><br><span class="line">      handler</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  routes()&#123;</span><br><span class="line">    return async (ctx, next) =&gt; &#123;</span><br><span class="line">      const &#123;method, url&#125; = ctx;</span><br><span class="line">      const matchedRouter = this._routers.find(r =&gt; r.method === method &amp;&amp; r.url === url);</span><br><span class="line">      if( matchedRouter &amp;&amp;</span><br><span class="line">        matchedRouter.handler)&#123;</span><br><span class="line">          await matchedRouter.handler(context, next);</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">          await next();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="koa-static"><a href="#koa-static" class="headerlink" title="koa-static"></a>koa-static</h3><h4 id="ä»‹ç»-å’Œ-demo"><a href="#ä»‹ç»-å’Œ-demo" class="headerlink" title="ä»‹ç» å’Œ demo"></a>ä»‹ç» å’Œ demo</h4><p>koa-staticæ˜¯é™æ€èµ„æºè¯·æ±‚ä¸­é—´ä»¶ï¼Œè¿™é‡Œå†™äº†ä¸€ä¸ª<a href="https://github.com/YeWills/koa-demo/tree/static-views" target="_blank" rel="noopener">ç®€å•çš„demo</a>ï¼Œå¯å¯åŠ¨æ„Ÿå—ä¸‹ï¼Œä¸‹é¢ä»¥è¯¥demoæºç ä½œä¸ºç¤ºä¾‹è®²è§£koa-staticï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(serve(handlePath(&apos;../pages/static&apos;)))</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡å›¾ç‰‡å¯ä»¥çœ‹å‡ºé¡¹ç›®é™æ€æ–‡ä»¶ç›®å½•ç»“æ„<br><figure class="image-box">                <img src="/image/koa2/static.jpg" alt title class>                <p></p>            </figure></p><p>é…ç½®ä¸Šé¢è¿™å¥ä»£ç åï¼Œä½ è®²å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œå¯ç°å®æ–‡ä»¶å†…å®¹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:3000/css/style.css</span><br><span class="line">http://127.0.0.1:3000/img/films.jpg</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„å“¦ï¼Œä¸æ˜¯ <a href="http://127.0.0.1:3000/pages/static/css/style.css" target="_blank" rel="noopener">http://127.0.0.1:3000/pages/static/css/style.css</a> !!è¿™ä¸ªåœ°å€æ˜¯æ‰¾ä¸åˆ°çš„ï¼Œå¾ˆå¤šåˆšç”¨koa-staticæ—¶éƒ½ä¼šçŠ¯è¿™ä¸ªé”™ï¼Œè®¤ä¸ºå°±æ˜¯handlePath(â€˜../pages/staticâ€™) å®šä¹‰çš„urlï¼Œç„¶åå°±æ‹¼æ¥æˆäº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸ªåœ°å€æ˜¯è®¿é—®ä¸åˆ°çš„</span><br><span class="line">http://127.0.0.1:3000/pages/static/css/style.css</span><br></pre></td></tr></table></figure></p><h4 id="ç†è§£koa-static"><a href="#ç†è§£koa-static" class="headerlink" title="ç†è§£koa-static"></a>ç†è§£koa-static</h4><p>koa-staticæ˜¯é™æ€èµ„æºè¯·æ±‚ä¸­é—´ä»¶ï¼Œä¸è¿‡è¿™æ ·è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½ç›´è§‚ç†è§£koa-staticæ˜¯ä»€ä¹ˆï¼ŒåŸç†æ˜¯ä»€ä¹ˆã€‚<br>æˆ‘ä»¬å¤§å¯å°†koa-staticçœ‹æˆæ˜¯ä¸€ä¸ª ä¸ºæä¾›ç›®å½•ä¸‹æ¯ä¸ªæ–‡ä»¶ é…ç½®è·¯ç”±çš„ä¸­é—´ä»¶ï¼Œ<br>åªè¦ä½ æä¾›ä¸€ä¸ªæ–‡ä»¶çš„å…·ä½“ä½ç½®ç»™koa-staticï¼Œkoa-staticä¼šç»“åˆè·¯ç”±çš„åŠŸèƒ½ï¼Œä¸ºæ¯ä¸ªè¯¥æ–‡ä»¶ä½ç½®ä¸‹çš„æ–‡ä»¶é…ç½®ä¸€ä¸ª url è·¯ç”±ï¼›<br>è¿™ä¸ªurlè·¯ç”±å…¶å®å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„æ¥å£urlï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ™®é€šçš„urlè¾“å…¥æµè§ˆå™¨ï¼Œå›è½¦å°±å¯ä»¥çœ‹åˆ°æ”¹æ¥å£urlçš„è¿”å›å†…å®¹ï¼›</p><h4 id="koa-staticæ˜¯ä¸ªæ‰¹é‡é…ç½®æ¥å£urlçš„ä¸­é—´ä»¶"><a href="#koa-staticæ˜¯ä¸ªæ‰¹é‡é…ç½®æ¥å£urlçš„ä¸­é—´ä»¶" class="headerlink" title="koa-staticæ˜¯ä¸ªæ‰¹é‡é…ç½®æ¥å£urlçš„ä¸­é—´ä»¶"></a>koa-staticæ˜¯ä¸ªæ‰¹é‡é…ç½®æ¥å£urlçš„ä¸­é—´ä»¶</h4><p>æ‰€ä»¥ï¼Œkoa-staticå…¶å®æ˜¯ä¸€ä¸ªå¾ˆæ£’æ‰¹é‡é…ç½®æ¥å£urlçš„ä¸­é—´ä»¶ï¼Œå¯ä»¥ä¸ºä½ æä¾›çš„æ–‡ä»¶ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‰¹é‡é…ç½®å¥½urlæ¥å£ï¼Œ<br>ä½ å°±å¯ä»¥è½»æ¾é€šè¿‡æ­¤urlæ¥å£è®¿é—®æ­¤æ–‡ä»¶ã€‚</p><h3 id="koa-views"><a href="#koa-views" class="headerlink" title="koa-views"></a>koa-views</h3><h4 id="ä»‹ç»-å’Œ-demo-1"><a href="#ä»‹ç»-å’Œ-demo-1" class="headerlink" title="ä»‹ç» å’Œ demo"></a>ä»‹ç» å’Œ demo</h4><p>å¦‚æœæˆ‘ä»¬åªéœ€è¦ctx.bodyåªéœ€è¦è¿”å›ä¸€æ®µç®€å•çš„ä»£ç å¦‚ä¸‹ï¼Œé‚£ä¹ˆå°±ç”¨ä¸åˆ°koa-viewsã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.response.body = &apos;&lt;h1&gt;404 Not Found&lt;/h1&gt;&apos;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœæˆ‘ä»¬è¦ctx.response.bodyç›´æ¥è¿”å›ä¸€ä¸ªå¦‚ä¸‹å¤æ‚çš„htmlï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå†å»æ‹¼æ¥å­—ç¬¦ä¸²å¤ªéº»çƒ¦ï¼Œ<br>koa-viewså°±æ˜¯è®©bodyè¿”å›htmlå˜å¾—ç®€å•ï¼Œä½ ç›´æ¥å•ç‹¬å®šä¹‰å¥½ä¸€ä¸ªhtmlï¼Œç„¶åç›´æ¥å¼•ç”¨æ­¤htmlå³å¯ï¼Œéå¸¸æ–¹ä¾¿ã€‚<br>koa-viewså¯ä»¥ç”¨äº<strong>æ™®é€šçš„htmlæ–‡ä»¶</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ¨¡æ¿å¼•æ“ï¼Œç”¨äºæ¨¡æ¿å¼•æ“çš„æ—¶å€™ï¼Œå¯é€šè¿‡ctx.stateä¼ å€¼ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">let html = `</span><br><span class="line">  &lt;h1&gt;ç™»å½•&lt;\h1&gt;</span><br><span class="line">  &lt;form method = &quot;POST&quot; action= &quot;/&quot;&gt;</span><br><span class="line">  &lt;p&gt;ç”¨æˆ·å&lt;/p&gt;</span><br><span class="line">  &lt;input name=&quot;userName&quot; /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;p&gt;å¯†ç &lt;/p&gt;</span><br><span class="line">  &lt;input name=&quot;password&quot; type=&quot;password&quot; /&gt;&lt;br/&gt;</span><br><span class="line">  &lt;button type=&quot;submit&quot;&gt;submit&lt;/button&gt;</span><br><span class="line">  &lt;/form&gt;</span><br><span class="line">  `</span><br><span class="line">  ctx.body=html;</span><br></pre></td></tr></table></figure></p><p>è¿™é‡Œå†™äº†ä¸€ä¸ª<a href="https://github.com/YeWills/koa-demo/tree/static-views" target="_blank" rel="noopener">ç®€å•çš„demo</a>ï¼Œå¯å¯åŠ¨æ„Ÿå—ä¸‹åŠ æ·±ç†è§£ã€‚<br>æ­¤demoå’Œã€Škoa-staticã€‹demoæ˜¯åŒä¸€ä¸ª</p><h4 id="koa-viewsçš„ä½¿ç”¨"><a href="#koa-viewsçš„ä½¿ç”¨" class="headerlink" title="koa-viewsçš„ä½¿ç”¨"></a>koa-viewsçš„ä½¿ç”¨</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const views = require(&apos;koa-views&apos;)</span><br><span class="line">app.use(views(handlePath(&apos;../pages&apos;)), &#123;</span><br><span class="line">  extension: &apos;html&apos;</span><br><span class="line">&#125;)</span><br><span class="line">app.use(async (ctx) =&gt; &#123;</span><br><span class="line">  await ctx.render(&apos;index.html&apos;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="renderæ˜¯koa-viewsé›†æˆåˆ°ctxçš„"><a href="#renderæ˜¯koa-viewsé›†æˆåˆ°ctxçš„" class="headerlink" title="renderæ˜¯koa-viewsé›†æˆåˆ°ctxçš„"></a>renderæ˜¯koa-viewsé›†æˆåˆ°ctxçš„</h4><p>å¦‚ä¸Šçš„ä»£ç ï¼Œctxæœ¬èº«æ²¡æœ‰renderæ–¹æ³•ï¼Œåªæ˜¯ä½¿ç”¨koa-viewsä¸­é—´ä»¶åï¼Œctxæ‰æœ‰è¿™ä¸ªæ–¹æ³•çš„</p><h4 id="index-htmlä¸­é™æ€æ–‡ä»¶çš„è·¯å¾„"><a href="#index-htmlä¸­é™æ€æ–‡ä»¶çš„è·¯å¾„" class="headerlink" title="index.htmlä¸­é™æ€æ–‡ä»¶çš„è·¯å¾„"></a>index.htmlä¸­é™æ€æ–‡ä»¶çš„è·¯å¾„</h4><p>è¯·ç»“åˆä¸Šé¢demoæºç çœ‹(æ­¤demoå’Œã€Škoa-staticã€‹demoæ˜¯åŒä¸€ä¸ª)<br>é¡¹ç›®è·¯å¾„å’Œè¯·çœ‹å‚çœ‹ ã€Škoa-staticã€‹çš„å›¾ç‰‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(serve(handlePath(&apos;../pages/static&apos;)))</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ã€Škoa-staticã€‹ä¸­çŸ¥é“csså’Œjpgçš„è®¿é—®æ¥å£urlæ˜¯:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:3000/css/style.css</span><br><span class="line">http://127.0.0.1:3000/img/films.jpg</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶ï¼Œindex.htmlçš„csså’Œimgçš„è·¯å¾„åº”è¯¥é…ç½®ä¸ºå¦‚ä¸‹ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">  &lt;title&gt;ä¸œæˆè¥¿å°±&lt;/title&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;/css/style.css&quot;&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div class=&quot;films&quot;&gt;ä¸œæˆè¥¿å°±å°±æ˜¯æ£’ï¼&lt;/div&gt;</span><br><span class="line">  &lt;img src=&quot;/img/films.jpg&quot; /&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><h3 id="koa-bodyparser"><a href="#koa-bodyparser" class="headerlink" title="koa-bodyparser"></a>koa-bodyparser</h3><p>æ­¤ä¸­é—´ä»¶çš„ä½œç”¨ æ˜¯ æŠŠPOSTè¯·æ±‚çš„å‚æ•°è§£æåˆ°ctx.request.bodyä¸­ï¼Œkoa-bodyparseråº•å±‚å°±æ˜¯åŸºäºctx.req.onå®ç°çš„ã€‚<br>å…¶ä»–ä¿¡æ¯è§ã€Škoa-bodyparserå¯¼è‡´ctx.req.onäº‹ä»¶å¤±æ•ˆã€‹  ã€ŠPOSTè¯·æ±‚å‚æ•°çš„è·å–ã€‹</p><h3 id="jsonwebtoken-ä¸-koa-jwt"><a href="#jsonwebtoken-ä¸-koa-jwt" class="headerlink" title="jsonwebtoken ä¸ koa-jwt"></a>jsonwebtoken ä¸ koa-jwt</h3><p>jsonwebtoken ç®€ç§° JWTï¼Œç”¨æ¥å®ç°Tokençš„ç”Ÿæˆã€æ ¡éªŒå’Œè§£ç ã€‚<br>ä½¿ç”¨koa-jwtä¸­é—´ä»¶å¯ä»¥å°† jsonwebtokenä¸koaæœ‰æœºç»“åˆèµ·æ¥ã€‚<br>jsonwebtoken ä¸ koa-jwt çš„å…³ç³»ï¼Œå°±è·Ÿ redux ä¸react-reduxçš„å…³ç³»ã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/router-Token" target="_blank" rel="noopener">è¿™é‡Œæ˜¯ä¸€ä¸ªåŸºäºTokençš„é‰´æƒdemo</a>ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š<br>ä¸€èˆ¬æ–¹æ¡ˆä¸ºï¼šç™»å½•æ˜¯ï¼Œkoaé€šè¿‡jsonwebtokenç»™ç”¨æˆ·ä¸€ä¸ªTokenç¼–ç ï¼Œä¹‹åå®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œåœ¨Headerä¸Šéƒ½å¸¦ä¸Šæ­¤Tokenç ï¼Œ<br>åç«¯æ¥å—è¯·æ±‚æ—¶ï¼ŒéªŒè¯æ­¤Tokenç è¿›è¡Œé‰´æƒã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const &#123; sign &#125; = require(&apos;jsonwebtoken&apos;);</span><br><span class="line">const secret = &apos;demo&apos;;</span><br><span class="line">const jwt = require(&apos;koa-jwt&apos;)(&#123; secret &#125;);</span><br><span class="line"></span><br><span class="line">//ç”ŸæˆTokenï¼Œsecretä½œä¸ºå¯†é’¥å¼€å‘è€…è‡ªå®šä¹‰è®¾ç½®ï¼ŒexpiresInä¸ºå¤±æ•ˆæ—¶é—´ï¼Œä¸è¦è®¾ç½®å¤ªä¹…</span><br><span class="line">//ç™»é™†æˆåŠŸåï¼Œåå°é€šè¿‡jsonwebtokenä¸ºè¯¥ç”¨æˆ·ç”ŸæˆTokenç¼–ç ï¼Œ</span><br><span class="line">//å®¢æˆ·ç«¯æ‹¿åˆ°Tokenç¼–ç åï¼Œä¸‹æ¬¡å‘è¯·æ±‚æ—¶ï¼Œåœ¨Headerä¸­å¸¦ä¸ŠTokenç </span><br><span class="line">router.post(&apos;/api/login&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    const &#123; username &#125; = ctx.request.body;</span><br><span class="line">    const token = sign(&#123; username &#125;, secret, &#123; expiresIn: &apos;1h&apos; &#125;);</span><br><span class="line">    ctx.body = &#123;</span><br><span class="line">      message: &apos;Get Token Success&apos;,</span><br><span class="line">      code: 1,</span><br><span class="line">      token</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)</span><br><span class="line">  //ç™»å½•ä¹‹åçš„æ¥å£è¯·æ±‚ï¼Œéƒ½è¦éªŒè¯Tokenï¼Œæ‰€ä»¥éƒ½è¦åœ¨Headerä¸­å°†ä¸Šä¸€æ­¥ç™»å½•æ˜¯è·å¾—çš„Tokenä¼ ç»™åå°</span><br><span class="line">    .get(&apos;/api/userInfo&apos;, jwt, async ctx =&gt; &#123;</span><br><span class="line">    ctx.body = &#123;</span><br><span class="line">      username: ctx.state.user.username</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><p>httpè¯´çš„æ˜¯ require(â€˜httpâ€™)æ¨¡å—ã€‚<br>koaåˆ©ç”¨httpç›´æ¥ä»æœåŠ¡ç«¯å‘å…¶ä»–æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œ<br>å¦‚ä¸‹ï¼ŒkoaæœåŠ¡ç«¯ï¼Œæ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œåœ¨è·¯ç”±å‡½æ•°ä½“å†…ï¼Œå°†è¯·æ±‚å‚æ•°é‡æ–°ç»„è£…ï¼Œé€šè¿‡httpï¼Œè½¬å‘ç»™å¯¹åº”æœåŠ¡å™¨ã€‚<br>è¿™ç§æ–¹æ³•å¥½å¤„ä¹‹ä¸€æ˜¯é¿å…è·¨åŸŸé—®é¢˜ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const Http = require(&apos;http&apos;);</span><br><span class="line">router.get(&apos;/&apos;, async (ctx, next) =&gt; &#123;</span><br><span class="line">    let &#123; kw &#125; = ctx.query;</span><br><span class="line">    let resData = await new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">          //http://m.maoyan.com/ajax/search?kw=æ‰å¦–è®°&amp;cityId=10</span><br><span class="line">            Http.request(&#123;</span><br><span class="line">                hostname: &apos;m.maoyan.com&apos;,</span><br><span class="line">                path: &apos;/ajax/search?&apos; + Querystring.stringify(&#123;</span><br><span class="line">                    kw,</span><br><span class="line">                    cityId: 10</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;, (res) =&gt; &#123;</span><br><span class="line">                res.setEncoding(&apos;utf8&apos;);</span><br><span class="line">                let data = [];</span><br><span class="line">                res.on(&apos;data&apos;, (chunk) =&gt; &#123;</span><br><span class="line">                    data.push(chunk)</span><br><span class="line">                &#125;).on(&apos;end&apos;, () =&gt; &#123;</span><br><span class="line">                    resolve(data.join(&apos;&apos;));</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;).end();</span><br><span class="line">        &#125;);</span><br><span class="line">    ctx.body = Render(JSON.parse(resData), kw);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><a href="https://github.com/YeWills/koa-demo/tree/http-request" target="_blank" rel="noopener">å®Œæ•´http requestçš„demo</a></p><h3 id="request-promise-native-request"><a href="#request-promise-native-request" class="headerlink" title="request-promise-native request"></a>request-promise-native request</h3><p>ä»¥ä¸‹æ˜¯è‡ªå·±å¯¹request-promise-native requestçš„ç›´è§‚ç†è§£ï¼Œæ²¡æœ‰æ·±å…¥ç ”ç©¶ï¼Œå¯¹ä¸å¯¹å¾…è€ƒï¼š<br>request-promise-native å¯èƒ½ä¾èµ– requestï¼Œå®‰è£…å¥½request-promise-nativeä¼šè‡ªåŠ¨å®‰è£…requestï¼Œ<br>æ‰€ä»¥request-promise-native å’Œrequestæ˜¯ä¸€å›äº‹ï¼Œrequest-promise-nativeæ˜¯requestçš„å¢å¼ºç‰ˆï¼Œ<br>ä»–ä»¬éƒ½åªåšä¸€ä»¶äº‹ï¼Œåœ¨æœåŠ¡å™¨å‘èµ·æ¥å£è¯·æ±‚ï¼Œä¸åŒä¸ºæœåŠ¡å™¨å‘è¯·æ±‚çš„httpæ•ˆæœä¸€æ ·ï¼›<br>ä¸æµè§ˆå™¨ç«¯å‘è¯·æ±‚çš„fetch axiosåŠŸèƒ½ä¸€æ ·ï¼Œä½œç”¨çš„ç¯å¢ƒä¸ä¸€æ ·è€Œå·²ã€‚</p><p>æš‚æ—¶ä¸ç”¨è¿‡å¤šäº†è§£ï¼Œç”¨æ—¶æ·±ç©¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç”¨åˆ°request-promise-native requestçš„demoï¼Œ<br><a href="https://github.com/YeWills/koa-demo/tree/http-request" target="_blank" rel="noopener">å®Œæ•´http requestçš„demo</a>ã€‚</p><h3 id="koa-multer"><a href="#koa-multer" class="headerlink" title="koa-multer"></a>koa-multer</h3><p>expressæˆ–koaï¼Œæ”¶åˆ°å‰å°çš„ä¸Šä¼ è¯·æ±‚åï¼Œå› ä¸ºä¸Šä¼ æ–‡ä»¶çš„è¯·æ±‚æ—¶ä¸€ä¸ªå¤šç±»å‹æ–‡ä»¶æ•°æ®(multipart/form-data)è¯·æ±‚ï¼Œ<br>å¿…é¡»é€šè¿‡require(â€˜multerâ€™)æ‰èƒ½æ­£å¸¸å¤„ç†è¿™æ ·çš„è¯·æ±‚ã€‚<br>multerå°±æ˜¯ä¸ºäº† å¤„ç†å¤šæ–‡ä»¶æ¥å£è€Œç”Ÿã€‚<br>multeråŒkoa-multerï¼Œå»koa-multerçš„GitHubä¸Šï¼Œå·²ç»è¯´æ˜å…¶æ–‡æ¡£ç›´æ¥å‚è€ƒexpressçš„multerã€‚<br>æ›´å¤šå‚è€ƒã€Šæ–‡ä»¶ä¸Šä¼ -fileå’Œdrapæ‹–æ‹½ä¸¤ç§æ–¹å¼ã€‹<br>koa-multer ç”¨æ¥åšæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œéœ€è¦é…åˆ fsæ¨¡å—ä¸€èµ·ï¼Œæ¯”è¾ƒç®€å•ï¼Œ<a href="https://github.com/YeWills/koa-demo/tree/upload-file" target="_blank" rel="noopener">è¿™æ˜¯æ–‡ä»¶ä¸Šä¼ koa-multer å’Œfs demo</a>ã€‚</p><h3 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h3><p>demoå’Œä»‹ç»ï¼Œå‚è€ƒã€Škoa-multerã€‹ã€Šå†™ä¸€ä¸ªè¿”å›æ–‡ä»¶çš„æ¥å£ã€‹ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æœ‰demoï¼Œä½¿ç”¨fsåšäº†ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å’Œè¯»å–æœ¬åœ°æ–‡ä»¶å¹¶è¿”å›ç»™å‰å°çš„åŠŸèƒ½</p><h2 id="koa2æ¨¡å—ä¸‹"><a href="#koa2æ¨¡å—ä¸‹" class="headerlink" title="koa2æ¨¡å—ä¸‹"></a>koa2æ¨¡å—ä¸‹</h2><h3 id="koa2-cors"><a href="#koa2-cors" class="headerlink" title="koa2-cors"></a>koa2-cors</h3><p>å‚è€ƒã€Škoa2-corsè§£å†³è·¨åŸŸã€‹</p><h3 id="querystring"><a href="#querystring" class="headerlink" title="querystring"></a>querystring</h3><p>querystringæ¨¡å—æœ‰ä»¥ä¸‹ä½œç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const Querystring = require(&apos;querystring&apos;)</span><br><span class="line">Querystring.escape(&apos;id=1&apos;) //è¿”å› id%3D1</span><br><span class="line">Querystring.unescape(&apos;id%3D1&apos;) //è¿”å› id=1</span><br><span class="line">querystring.parse(&apos;foo=bar&amp;abc=xyz&amp;abc=123&apos;) //è¿”å› &#123;foo: &apos;bar&apos;,abc: [&apos;xyz&apos;, &apos;123&apos;]&#125;</span><br><span class="line">querystring.stringify(&#123; foo: &apos;bar&apos;, baz: [&apos;qux&apos;, &apos;quux&apos;], corge: &apos;&apos; &#125;) // è¿”å› &apos;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=&apos;</span><br></pre></td></tr></table></figure></p><p><a href="http://nodejs.cn/api/querystring.html" target="_blank" rel="noopener">æ›´å¤šç‚¹å‡»å®˜ç½‘</a></p><p><a href="https://github.com/YeWills/koa-demo/tree/http-request" target="_blank" rel="noopener">è¿™é‡Œæœ‰ä¸€ä¸ªquerystringçš„demo</a></p><h3 id="koa-jsonã€log4jsã€ip"><a href="#koa-jsonã€log4jsã€ip" class="headerlink" title="koa-jsonã€log4jsã€ip"></a>koa-jsonã€log4jsã€ip</h3><p><a href="https://github.com/YeWills/koa-demo/tree/pro-static" target="_blank" rel="noopener">è¿™é‡Œåªæ”¾ä¸€ä¸ªdemo</a>ï¼Œä¸æ·±å…¥äº†è§£ï¼Œç”¨åˆ°çš„æ—¶å€™å†æ·±ç©¶ï¼Œæ­¤demoåŒ…å«koa-staticã€log4jsä¸ipã€koa-jsonã€koa-nunjucks</p><h3 id="koa-nunjucks"><a href="#koa-nunjucks" class="headerlink" title="koa-nunjucks"></a>koa-nunjucks</h3><p>koa-nunjucksæ˜¯åŸºäºnunjucksçš„html æ¨¡æ¿ä¸­é—´ä»¶ã€‚<br>æ²¡æœ‰ä»€ä¹ˆå¤ªå¤æ‚çš„éœ€æ±‚ï¼Œåªæ˜¯ç”¨koaç©ç©ï¼Œå¦‚æœä¸ç”¨htmlæ¨¡æ¿ï¼Œç”¨koa-viewså°±å¯ä»¥äº†ï¼Œå¦‚æœè¦ç”¨htmlæ¨¡æ¿ï¼Œå¯ä»¥ç”¨koa-nunjucksï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨ejsæ¨¡æ¿ï¼Œç­‰ç­‰ï¼Œæœ‰å¾ˆå¤šè¿™æ–¹é¢çš„æ¨¡æ¿ã€‚<br>è¿™é‡Œåªæ”¾ä¸€ä¸ªdemoï¼Œä¸è¿‡å¤šè§£é‡Šï¼Œç”¨åˆ°çš„æ—¶å€™å†äº†è§£ã€‚<br><a href="https://github.com/YeWills/koa-demo/tree/web-pro" target="_blank" rel="noopener">koa-nunjucksçš„ä½¿ç”¨demo</a></p><h3 id="ejs-pug"><a href="#ejs-pug" class="headerlink" title="ejs pug"></a>ejs pug</h3><p>æš‚æ—¶ä¸ç”¨è¿‡å¤šäº†è§£ï¼Œç”¨æ—¶æ·±ç©¶ï¼Œ<a href="https://github.com/YeWills/koa2_films/tree/koa_web" target="_blank" rel="noopener">å‚è§demo</a>ã€‚</p><h3 id="puppeteer-parcel-bundler-glob"><a href="#puppeteer-parcel-bundler-glob" class="headerlink" title="puppeteer parcel-bundler  glob"></a>puppeteer parcel-bundler  glob</h3><p>æš‚æ—¶ä¸ç”¨è¿‡å¤šäº†è§£ï¼Œç”¨æ—¶æ·±ç©¶ï¼Œ<a href="https://github.com/YeWills/koa2_films/tree/koa_web" target="_blank" rel="noopener">å‚è§demo</a>ã€‚</p><h2 id="RESTfull-å’Œ-http"><a href="#RESTfull-å’Œ-http" class="headerlink" title="RESTfull å’Œ  http"></a>RESTfull å’Œ  http</h2><h3 id="RESTful-è§„èŒƒ"><a href="#RESTful-è§„èŒƒ" class="headerlink" title="RESTful è§„èŒƒ"></a>RESTful è§„èŒƒ</h3><p>éRESTfulè§„èŒƒå®šä¹‰çš„æ¥å£ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.get(/app/adduser)</span><br><span class="line">router.get(/app/edituser)</span><br><span class="line">router.get(/app/deleteuser)</span><br></pre></td></tr></table></figure></p><p>åŸºäºRESTfulè§„èŒƒè®¾è®¡çš„APIï¼Œå…¨å±€åªæä¾›å”¯ä¸€çš„URI /app/user<br>è®¾è®¡å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.post(/app/user) //æ–°å¢ç”¨æˆ·id</span><br><span class="line">router.edit(/app/user:id) ç¼–è¾‘åå­—ä¸ºidçš„ç”¨æˆ·</span><br><span class="line">router.delete(/app/user:id) åˆ é™¤åå­—ä¸ºidçš„ç”¨æˆ·</span><br></pre></td></tr></table></figure></p><h3 id="URL-çš„7ä¸ªéƒ¨åˆ†ç»„æˆï¼š"><a href="#URL-çš„7ä¸ªéƒ¨åˆ†ç»„æˆï¼š" class="headerlink" title="URL çš„7ä¸ªéƒ¨åˆ†ç»„æˆï¼š"></a>URL çš„7ä¸ªéƒ¨åˆ†ç»„æˆï¼š</h3><p>scheme:[//[user[:password]@]host[:post][/path][?query][#fragemnt]<br>scheme:ä½¿ç”¨åè®® å¦‚FTPã€HTTPç­‰<br>user[:password] : è¡¨ç¤ºè®¿é—®èµ„æºçš„ç”¨æˆ·å’Œå¯†ç ï¼Œå¸¸è§äºFTPåè®®<br>host ä¸»æœº<br>port ç«¯å£<br>path è®¿é—®èµ„æºè·¯å¾„<br>query è¯·æ±‚æ•°æ®ï¼Œä»¥ï¼Ÿå¼€å¤´<br>fragment å®šä½é”šç‚¹ï¼Œä»¥#å¼€å¤´ï¼Œå¯ç”¨äºå¿«é€Ÿå®šä½ç½‘é¡µå¯¹åº”æ®µè½</p><h3 id="å¸¸ç”¨httpçŠ¶æ€ç "><a href="#å¸¸ç”¨httpçŠ¶æ€ç " class="headerlink" title="å¸¸ç”¨httpçŠ¶æ€ç "></a>å¸¸ç”¨httpçŠ¶æ€ç </h3><p>1<strong> æ¶ˆæ¯   100 ç»§ç»­ï¼Œç»§ç»­å“åº”å‰©ä½™éƒ¨åˆ†ï¼Œå¦‚å·²å®Œæˆï¼Œå¯å¿½ç•¥<br>2</strong> æˆåŠŸ<br>3<strong> é‡å®šå‘  301 æ°¸ä¹…ç§»åŠ¨ï¼› 302 ä¸´æ—¶ç§»åŠ¨ï¼› 304 æœªä¿®æ”¹ï¼Œè¯·æ±‚èµ„æºå¯¹æ¯”ä¸Šæ¬¡æ²¡æœ‰ä¿®æ”¹<br>4</strong> è¯·æ±‚é”™è¯¯ 401 æœªæˆæƒ ï¼› 403 ç¦æ­¢ï¼› 404 æœªæ‰¾åˆ°ï¼›<br>5<strong> å’Œ 6</strong> æœåŠ¡å™¨é”™è¯¯  500 æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼› 503 æœåŠ¡ä¸å¯ç”¨ï¼›</p><h2 id="ç›¸å…³demo"><a href="#ç›¸å…³demo" class="headerlink" title="ç›¸å…³demo"></a>ç›¸å…³demo</h2><h3 id="koa-demo"><a href="#koa-demo" class="headerlink" title="koa-demo"></a>koa-demo</h3><p>ä¸»è¦çš„ç¤ºä¾‹demo:<a href="https://github.com/YeWills/koa-demo" target="_blank" rel="noopener">koa-demo</a>;</p><h3 id="koa2-films"><a href="#koa2-films" class="headerlink" title="koa2_films"></a>koa2_films</h3><p>å¾ˆå¥½çš„ç»¼åˆè¿è¡Œdemo(å«çˆ¬è™«ï¼Œmongodbï¼Œkoa,å‰åç«¯ä¸€ä½“åŒ–ç¼–è¯‘å¼€å‘):<a href="https://github.com/YeWills/koa2_films/tree/koa_web" target="_blank" rel="noopener">koa2_films/koa_web</a>,<br>æ­¤ä»“åº“å…¶ä»–åˆ†æ”¯è¿˜æœ‰å•çº¯çš„ å¼€å‘åå°çš„åˆ†æ”¯;<br>ä¹Ÿæœ‰å•çº¯çš„çˆ¬è™«demoï¼š<a href="https://github.com/YeWills/koa2_films/tree/puppeteer" target="_blank" rel="noopener">çˆ¬è™«å°demo</a>ï¼›<br>è¿˜æœ‰ä¸€ä¸ªåˆ†æ”¯ä¸ºï¼š<a href="https://github.com/YeWills/koa2_films/tree/event_IO_loop" target="_blank" rel="noopener">nodejs å¼‚æ­¥ioçš„ç†è§£ é˜»å¡éé˜»å¡ï¼Œäº‹ä»¶å¾ªç¯ä¸é©±åŠ¨ï¼Œå•çº¿ç¨‹ï¼Œå­è¿›ç¨‹ï¼Œè¿›ç¨‹é€šè®¯)events æ¡†æ¶demo</a>ï¼›<br><a href="https://github.com/YeWills/koa2_films/tree/forward-cors" target="_blank" rel="noopener">æœåŠ¡ç«¯æˆªå–è¯·æ±‚å‘å¦å¤–æœåŠ¡å™¨å‘è¯·æ±‚çš„demo</a>;</p><h3 id="films-new"><a href="#films-new" class="headerlink" title="films_new"></a>films_new</h3><p><a href="https://github.com/YeWills/react-redux-demo/tree/films_new" target="_blank" rel="noopener">films_new</a>æ˜¯react-redux-demoä»“åº“ä¸‹çš„åˆ†æ”¯ã€‚<br>è¿™æ˜¯å‰ç«¯ä»£ç ï¼Œç”¨æ¥åƒåå°å‘èµ·è¯·æ±‚ã€‚</p><h3 id="koa-miniprogram"><a href="#koa-miniprogram" class="headerlink" title="koa-miniprogram"></a>koa-miniprogram</h3><p>æ­¤é¡¹ç›®ä¸ºå¾®ä¿¡å¼€å‘ï¼Œã€Škoaä¸node.jså¼€å‘å®æˆ˜ã€‹ ä¹¦ç¬¬ä¹ç« ä»¥åçš„ä»£ç ï¼Œåœ¨æ­¤ä»“åº“ï¼Œæˆ‘æ•´ç†æˆå•ç‹¬å‡ ä»½ï¼Œæš‚æ—¶æ²¡æœ‰å¾®ä¿¡å­¦ä¹ ï¼Œå°†æºç æ•´ç†å¤‡ä»½ï¼Œä»¥å¤‡ä»¥åç”¨ã€‚<br>å…¶ä¸­<a href="https://github.com/YeWills/koa-miniprogram/tree/particle-css" target="_blank" rel="noopener">particle-cssåˆ†æ”¯</a>æŒºå¥½çš„ä¸€ä¸ªcssé¡µé¢ï¼ŒåŒæ—¶è¿˜æœ‰è¶…ç‚«èƒŒæ™¯ç²’å­-particlesJSæ’ä»¶çš„ä½¿ç”¨ æ•ˆæœï¼š</p><h2 id="å‚è€ƒå’Œå­¦ä¹ èµ„æ–™"><a href="#å‚è€ƒå’Œå­¦ä¹ èµ„æ–™" class="headerlink" title="å‚è€ƒå’Œå­¦ä¹ èµ„æ–™"></a>å‚è€ƒå’Œå­¦ä¹ èµ„æ–™</h2><p><a href>koaä¸node.jså¼€å‘å®æˆ˜</a><br><a href>Koa2æ¡†æ¶ä»0å¼€å§‹æ„å»ºé¢„å‘Šç‰‡ç½‘ç«™</a><br><a href="https://koajs.com/#context" target="_blank" rel="noopener">koa å®˜ç½‘</a><br><a href="https://github.com/koajs/koa#readme" target="_blank" rel="noopener">koa github </a><br><a href="https://github.com/YeWills/examples" target="_blank" rel="noopener">koa exampleï¼ŒæŒºå¥½çš„å®˜æ–¹ç¤ºä¾‹ï¼Œæ¯”è¾ƒå…¨ï¼Œåšéœ€æ±‚æ—¶å¯å…ˆåœ¨è¿™æ‰¾ç¤ºä¾‹</a><br><a href="https://www.jianshu.com/p/d3afa36aa17a" target="_blank" rel="noopener">koa2å…¥é—¨ç¬”è®°</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> koa2 </tag>
            
            <tag> é‰´æƒ </tag>
            
            <tag> content-type </tag>
            
            <tag> RESTfull </tag>
            
            <tag> è§£å†³è·¨åŸŸ </tag>
            
            <tag> æˆªå–å‰ç«¯è¯·æ±‚ </tag>
            
            <tag> æœåŠ¡ç«¯è½¬å‘è¯·æ±‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wills-react-proé¡¹ç›®ç¬”è®°</title>
      <link href="/2019/05/21/wills_react_pro/"/>
      <url>/2019/05/21/wills_react_pro/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç¯‡åšå®¢é’ˆå¯¹ github çš„<a href="https://github.com/YeWills/react-redux-demo" target="_blank" rel="noopener">react_redux_demoé¡¹ç›®</a>ä¸€äº›çŸ¥è¯†ç‚¹è®²è§£ã€‚</p><h2 id="redux-thunk"><a href="#redux-thunk" class="headerlink" title="redux-thunk"></a>redux-thunk</h2><p>é¡¹ç›®ä½¿ç”¨äº†redux-thunkæ¥å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œredux-thunkæœ€é‡è¦çš„æ€æƒ³ï¼Œå°±æ˜¯å¯ä»¥æ¥å—ä¸€ä¸ªè¿”å›å‡½æ•°çš„action creatorã€‚å¦‚æœè¿™ä¸ªaction creator è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ‰§è¡Œå®ƒï¼Œå¦‚æœä¸æ˜¯ï¼Œå°±æŒ‰ç…§åŸæ¥çš„next(action)æ‰§è¡Œã€‚<br>æ­£å› ä¸ºè¿™ä¸ªaction creatorå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­æ‰§è¡Œä¸€äº›å¼‚æ­¥çš„æ“ä½œã€‚<br><a href="https://www.jianshu.com/p/a27ab19d3657" target="_blank" rel="noopener">å‚è€ƒ</a><br>è¯¦ç»†ç¤ºä¾‹å¯å‚è€ƒ é¡¹ç›®çš„tag login_pro_v1.0<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//src/views/login/index.js</span><br><span class="line">const mapDispatchToProps = &#123;</span><br><span class="line">  loginUser: appAction.loginUser,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="ajaxå°è£…"><a href="#ajaxå°è£…" class="headerlink" title="ajaxå°è£…"></a>ajaxå°è£…</h2><h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦successæç¤º"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦successæç¤º" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦successæç¤º"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦successæç¤º</h3><p>ajaxåˆ†ä¸ºä¸¤ç§ï¼š<br>ä¸€ç§æ˜¯è¿›å…¥é¡µé¢è¯·æ±‚æ•°æ®æ¸²æŸ“é¡µé¢çš„ï¼Œæ­¤æ—¶ä¸éœ€è¦æç¤ºæ¥å£å“åº”æˆåŠŸï¼Œåªéœ€loadingå³å¯ã€‚<br>ä¸€ç§æ˜¯ä¸åå°äº¤äº’ï¼Œéœ€è¦å“åº”ç»“æœçš„ï¼Œå¦‚äº¤æ˜“ã€åˆ é™¤ã€ç¼–è¾‘ç­‰ï¼Œæäº¤åˆ°åå°ï¼Œåå°å‘ŠçŸ¥æ˜¯å¦æˆåŠŸã€‚<br>å› æ­¤åœ¨åšajaxå°è£…æ—¶ï¼Œå¯ä»¥ä¸ç”¨é…ç½®success çš„æç¤ºå¤„ç†ï¼Œéœ€è¦æç¤ºçš„æ¥å£è‡ªè¡Œé…ç½®successæç¤ºå¤„ç†ã€‚</p><h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦loading"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦loading" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦loading"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦loading</h3><p>åŸåˆ™ä¸Šæ¯ä¸ªè¯·æ±‚éƒ½åº”è¯¥æœ‰loadingï¼Œä½†æ˜¯æœ‰å¾ˆå¤šç»„ä»¶æœ‰è‡ªå·±çš„loadingæ ·å¼ï¼Œä¾‹å¦‚åœ¨éåˆ·æ–°æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œç»„ä»¶å†…åˆ·æ–°girdï¼Œåªéœ€åœ¨gridå†…æ˜¾ç¤ºloadingï¼Œä¸éœ€è¦ç»Ÿä¸€çš„loadingæ ¼å¼ã€‚<br>å› æ­¤ajaxå°è£…æ—¶ï¼Œé…ç½®å¯é€‰çš„ loadingæ ‡è¯†æ˜¯å¦loadingã€‚</p><h3 id="ä»€ä¹ˆæ—¶å€™éœ€è¦erroræç¤º"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦erroræç¤º" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦erroræç¤º"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦erroræç¤º</h3><p>ajaxå°è£…éœ€è¦å°è£…è¯·æ±‚å¼‚å¸¸å¤„ç†å¹¶æç¤ºï¼Œç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†å’Œæç¤ºåº”è¯¥æ”¾åœ¨æœ€åï¼Œä¸ºäº†ä¸åŒæ¥å£ä¸ªæ€§åŒ–errorhandleï¼Œé…ç½®errorhandleï¼Œä¼˜å…ˆçº§é«˜äºç»Ÿä¸€å¤„ç†æ¨¡å¼ã€‚</p><h3 id="æ–­ç½‘æ—¶ã€è¯·æ±‚è¶…æ—¶çš„çš„erroræç¤º"><a href="#æ–­ç½‘æ—¶ã€è¯·æ±‚è¶…æ—¶çš„çš„erroræç¤º" class="headerlink" title="æ–­ç½‘æ—¶ã€è¯·æ±‚è¶…æ—¶çš„çš„erroræç¤º"></a>æ–­ç½‘æ—¶ã€è¯·æ±‚è¶…æ—¶çš„çš„erroræç¤º</h3><p>æ–­ç½‘å’Œè¯·æ±‚å“åº”è¶…æ—¶æ—¶ï¼Œåº”è¯¥ç»Ÿä¸€å¤„ç†ï¼Œå¹¶ä¼˜å…ˆçº§æœ€é«˜ã€‚</p><h3 id="ä½¿ç”¨options"><a href="#ä½¿ç”¨options" class="headerlink" title="ä½¿ç”¨options"></a>ä½¿ç”¨options</h3><p>loadingï¼Œerrorhandleç­‰ç­‰ï¼Œæœ‰å¾ˆå¤šå‚æ•°ï¼Œä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å‚æ•°optionsã€‚</p><h3 id="ajaxè®¾è®¡"><a href="#ajaxè®¾è®¡" class="headerlink" title="ajaxè®¾è®¡"></a>ajaxè®¾è®¡</h3><p>é¡¹ç›®é€šè¿‡ä¸¤æ–¹é¢æ¥å°è£… ajaxï¼š</p><ul><li>é€šè¿‡api.js å°è£…ä¸‰ä¸ªå¸¸ç”¨çš„ajaxæ–¹æ³• postã€getã€deleteï¼Œåœ¨æ­¤jsä¸Šï¼Œä¸»è¦å°è£…axiosç›¸å…³ã€‚</li><li>é€šè¿‡createAsyncAction.js æŠ½è±¡å‡º å…¬å…±çš„è¯·æ±‚çš„æˆåŠŸå’Œå¼‚å¸¸å¤„ç†ã€‚<br>è¿™æ ·çš„è®¾è®¡å¥½å¤„åœ¨äº<br>å¯ä»¥å°†axiosä¸ å›è°ƒå¤„ç†çš„ä»£ç åˆ†ç¦»ç®¡ç†ï¼Œå‡å°‘è€¦åˆæ€§ã€‚<br>è¯¦ç»†ç¤ºä¾‹å¯å‚è€ƒ é¡¹ç›®çš„tag login_pro_v1.0<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//src/views/login/index.js</span><br><span class="line">const mapDispatchToProps = &#123;</span><br><span class="line">  loginUser: appAction.loginUser,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ajaxè¿‡ç¨‹çš„ä¸‰æ¬¡dispatch"><a href="#ajaxè¿‡ç¨‹çš„ä¸‰æ¬¡dispatch" class="headerlink" title="ajaxè¿‡ç¨‹çš„ä¸‰æ¬¡dispatch"></a>ajaxè¿‡ç¨‹çš„ä¸‰æ¬¡dispatch</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dispatch(&#123;</span><br><span class="line">    meta,</span><br><span class="line">    type: `$&#123;name&#125;_REQUEST`,</span><br><span class="line">  &#125;);</span><br><span class="line">dispatch(&#123;</span><br><span class="line">  meta,</span><br><span class="line">  type: `$&#123;name&#125;_SUCCESS`,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">dispatch(&#123;</span><br><span class="line">  meta,</span><br><span class="line">  type: `$&#123;name&#125;_ERROR`,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰æ¬¡dispatchå¯ä»¥ç”¨ä½œå¦‚loadingçš„æ§åˆ¶ç­‰ç­‰ã€‚</p><h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><p>å‚è€ƒã€Šeslintç¬”è®°ã€‹</p><h2 id="é…ç½®æ–‡ä»¶æˆ–ç›¸å…³"><a href="#é…ç½®æ–‡ä»¶æˆ–ç›¸å…³" class="headerlink" title="é…ç½®æ–‡ä»¶æˆ–ç›¸å…³"></a>é…ç½®æ–‡ä»¶æˆ–ç›¸å…³</h2><h3 id="jsconfig-json"><a href="#jsconfig-json" class="headerlink" title="jsconfig.json"></a>jsconfig.json</h3><h4 id="è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜"><a href="#è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜" class="headerlink" title="è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜"></a>è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜</h4><p><a href="https://www.jianshu.com/p/4ea2c5571123" target="_blank" rel="noopener">å‚è€ƒ</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    &quot;baseUrl&quot;: &quot;.&quot;,</span><br><span class="line">    &quot;paths&quot;: &#123;</span><br><span class="line">      &quot;@/*&quot;: [</span><br><span class="line">        &quot;./src/*&quot;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="vscodeå¯¹webpackåˆ«åæç¤ºè¡¥å…¨"><a href="#vscodeå¯¹webpackåˆ«åæç¤ºè¡¥å…¨" class="headerlink" title="vscodeå¯¹webpackåˆ«åæç¤ºè¡¥å…¨"></a>vscodeå¯¹webpackåˆ«åæç¤ºè¡¥å…¨</h3><p>é…ç½®ä¸ ã€Šè§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜ã€‹ç±»ä¼¼ï¼Œå¯è‡ªè¡Œç½‘ä¸ŠæŸ¥è¯¢ã€‚</p><h3 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h3><h4 id="è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜-1"><a href="#è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜-1" class="headerlink" title="è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜"></a>è§£å†³webpackåˆ«åç‚¹å‡»ä¸è·³è½¬é—®é¢˜</h4><p>é“ç†åŒã€Šjsconfig.jsonã€‹</p><h4 id="å…¶ä»–åŠŸèƒ½"><a href="#å…¶ä»–åŠŸèƒ½" class="headerlink" title="å…¶ä»–åŠŸèƒ½"></a>å…¶ä»–åŠŸèƒ½</h4><p>å¾…ç ”ç©¶</p><h2 id="jest"><a href="#jest" class="headerlink" title="jest"></a>jest</h2><h3 id="mockçš„ç”¨æ³•"><a href="#mockçš„ç”¨æ³•" class="headerlink" title="mockçš„ç”¨æ³•"></a>mockçš„ç”¨æ³•</h3><p>ç¤ºä¾‹è§ <a href="https://github.com/YeWills/wills-react-pro" target="_blank" rel="noopener">wills-react-pro çš„ Login.test.js</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const mockPost = jest.fn(testPost(&#123; success: false &#125;));</span><br></pre></td></tr></table></figure></p><h2 id="enzyme"><a href="#enzyme" class="headerlink" title="enzyme"></a>enzyme</h2><h3 id="shallowçš„ä¸¤ç§æƒ…å†µ"><a href="#shallowçš„ä¸¤ç§æƒ…å†µ" class="headerlink" title="shallowçš„ä¸¤ç§æƒ…å†µ"></a>shallowçš„ä¸¤ç§æƒ…å†µ</h3><p>shallowä¸€ä¸ªç»„ä»¶æ—¶ï¼Œå’Œshallowç»„ä»¶å†…ä¸€ä¸ªè¿”å›divçš„å‡½æ•°ç”¨æ³•ç¨å¾®æœ‰åŒºåˆ«ï¼Œ<br>å‰è€…éœ€è¦é€šè¿‡â€™&lt;&gt;â€˜æ‹¬å·èµ·æ¥ï¼Œåè€…ä¸éœ€è¦ã€‚<br>ç¤ºä¾‹è§ <a href="https://github.com/YeWills/wills-react-pro" target="_blank" rel="noopener">wills-react-pro çš„ Login.test.js</a></p><h4 id="shallowä¸€ä¸ªç»„ä»¶"><a href="#shallowä¸€ä¸ªç»„ä»¶" class="headerlink" title="shallowä¸€ä¸ªç»„ä»¶"></a>shallowä¸€ä¸ªç»„ä»¶</h4><p>è¿™ç§æƒ…å†µæœ€é€šç”¨ï¼Œä¸å¤šè¯´ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shallow(&lt;Login /&gt;);</span><br></pre></td></tr></table></figure></p><h4 id="shallowç»„ä»¶å†…çš„å‡½æ•°è¿”å›çš„div"><a href="#shallowç»„ä»¶å†…çš„å‡½æ•°è¿”å›çš„div" class="headerlink" title="shallowç»„ä»¶å†…çš„å‡½æ•°è¿”å›çš„div"></a>shallowç»„ä»¶å†…çš„å‡½æ•°è¿”å›çš„div</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">renderErrorMsg = () =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div className=&#123;`$&#123;prefixCls&#125;-errorMsg`&#125;&gt;</span><br><span class="line">          &#123;errorMsg&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      );</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  //æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</span><br><span class="line">  const ErrorComponent = warpInstance.renderErrorMsg();</span><br><span class="line">  const errorWrap = shallow(ErrorComponent);</span><br><span class="line">  expect(errorWrap.exists(&apos;.view-login-errorMsg&apos;)).toBeTruthy();</span><br></pre></td></tr></table></figure><h3 id="shallowæµ‹è¯•hoc"><a href="#shallowæµ‹è¯•hoc" class="headerlink" title="shallowæµ‹è¯•hoc"></a>shallowæµ‹è¯•hoc</h3><p>shallowä¸€ä¸ªç»è¿‡hocçš„ç»„ä»¶æ—¶ï¼Œåªèƒ½shallowåˆ°hocå±‚é¢ï¼Œä¸ºäº†èƒ½ç›´æ¥æµ‹è¯•è¯¥ç»„ä»¶æ—¶ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ï¼›<br>åœ¨hocå±‚é¢ä¸Šï¼Œè¦å†™ä¸€å¥è¿™æ ·çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FinalComponent.WrappedComponent = WrappedComponent;</span><br></pre></td></tr></table></figure></p><p>ç„¶åé€šè¿‡typeå±æ€§ï¼Œå¯ä»¥æ•æ‰è¿™ä¸ªç»„ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const getComponentFromHoc = warp =&gt; (warp.type &amp;&amp; warp.type.WrappedComponent</span><br><span class="line">  ? &lt;warp.type.WrappedComponent &#123;...warp.props&#125; /&gt; : warp);</span><br></pre></td></tr></table></figure></p><p>è¯¦ç»†demoè§:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/YeWills/wills-react-pro/blob/master/src/utils/testUtil.js</span><br><span class="line">https://github.com/YeWills/wills-react-pro/blob/master/src/utils/connectWills.js</span><br><span class="line">https://github.com/YeWills/wills-react-pro/blob/master/test/Login.test.js</span><br></pre></td></tr></table></figure></p><h2 id="connected-react-router-ä¸-history"><a href="#connected-react-router-ä¸-history" class="headerlink" title="connected-react-router ä¸ history"></a>connected-react-router ä¸ history</h2><p>è¿™æ˜¯ä¸€ç§å›ºå®šå†™æ³•ï¼Œä¸ç”¨è¿‡å¤šå…³æ³¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//å‚è€ƒ é¡¹ç›®çš„tag login_pro_v1.0</span><br><span class="line">//src/app/init/createStore.js</span><br><span class="line">import &#123; connectRouter, routerMiddleware &#125; from &apos;connected-react-router&apos;;</span><br><span class="line"></span><br><span class="line">connectRouter(history)(combineReducers(reducers)),</span><br></pre></td></tr></table></figure></p><h2 id="è·¯ç”±è®¾è®¡"><a href="#è·¯ç”±è®¾è®¡" class="headerlink" title="è·¯ç”±è®¾è®¡"></a>è·¯ç”±è®¾è®¡</h2><h3 id="ConnectedRouteré…ç½®"><a href="#ConnectedRouteré…ç½®" class="headerlink" title="ConnectedRouteré…ç½®"></a>ConnectedRouteré…ç½®</h3><p>ConnectedRouterç±»ä¼¼BrowserRouterã€‚MultiIntlProviderå¯ä»¥ä¸ç”¨ç®¡å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ConnectedRouter history=&#123;history&#125;&gt;</span><br><span class="line">    &lt;MultiIntlProvider defaultLocale=&#123;locale&#125; messageMap=&#123;messages&#125; &gt;</span><br><span class="line">        &lt;Switch&gt;</span><br><span class="line">            &lt;Route key=&#123;path&#125; path=&quot;/dashboard/analysis/realtime&quot; component=&#123;Page&#125; /&gt;</span><br><span class="line">        &lt;/Switch&gt;</span><br><span class="line">    &lt;/MultiIntlProvider&gt;</span><br><span class="line"> &lt;/ConnectedRouter&gt;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨BrowserRouter"><a href="#ä½¿ç”¨BrowserRouter" class="headerlink" title="ä½¿ç”¨BrowserRouter"></a>ä½¿ç”¨BrowserRouter</h3><p>é¡¹ç›®çš„å…·ä½“å¸ƒå±€ä¸»è¦çœ‹ src/src-acl-router/AclRouter.jsx;<br>æœ¬é¡¹ç›®åº”è¯¥ç”¨çš„æ˜¯BrowserRouterï¼Œè€ŒéHashRouterï¼Œå› ä¸ºé¡µé¢çš„è·¯ç”±éƒ½æ²¡æœ‰#ã€‚<br>æ•´ç†å‡ºæ¥å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;BrowserRouter history=&#123;history&#125;&gt;</span><br><span class="line">    &lt;Switch&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/&quot;</span><br><span class="line">        render=&#123;() =&gt; &lt;Redirect to=&quot;/outlets&quot; /&gt;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/login&quot;</span><br><span class="line">        render=&#123;props =&gt; (</span><br><span class="line">          &lt;NormalLayout &#123;...props&#125;&gt;</span><br><span class="line">            &lt;RouteComponent &#123;...props&#125; /&gt;</span><br><span class="line">          &lt;/NormalLayout&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/outlets&quot;</span><br><span class="line">        render=&#123;props =&gt; (</span><br><span class="line">          &lt;BasicLayout &#123;...props&#125;&gt;</span><br><span class="line">            &lt;RouteComponent &#123;...props&#125; /&gt;</span><br><span class="line">          &lt;/BasicLayout&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/exception/403&quot;</span><br><span class="line">        render=&#123;props =&gt; (</span><br><span class="line">          &lt;BasicLayout &#123;...props&#125;&gt;</span><br><span class="line">            &lt;Unauthorized &#123;...props&#125; /&gt;</span><br><span class="line">          &lt;/BasicLayout&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        render=&#123;props =&gt; (</span><br><span class="line">          &lt;NotFound &#123;...props&#125; /&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/Switch&gt;</span><br><span class="line"> &lt;/BrowserRouter&gt;</span><br></pre></td></tr></table></figure></p><h3 id="é¡µé¢æƒé™ç®¡ç†"><a href="#é¡µé¢æƒé™ç®¡ç†" class="headerlink" title="é¡µé¢æƒé™ç®¡ç†"></a>é¡µé¢æƒé™ç®¡ç†</h3><p>é€šè¿‡ permissions é…ç½®ï¼Œé€šè¿‡æ¯”å¯¹ ç™»é™†å ä¸ªäººçš„æƒé™user.authorities ä¸ é¡µé¢çš„ permissionsï¼Œæ¥é‡ç»„æ‹¼åˆ ä¸Šé¢çš„ ã€Šä½¿ç”¨BrowserRouterã€‹ï¼š<br><strong>æœ¬é¡¹ç›®åœ¨ç™»é™†åä¼šé‡æ–°é‡ç»„æ¸²æŸ“ä¸Šé¢çš„ ã€Šä½¿ç”¨BrowserRouterã€‹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &apos;/dashboard/analysis/offline&apos;,</span><br><span class="line">  exact: true,</span><br><span class="line">  permissions: [&apos;admin&apos;, &apos;user&apos;],</span><br><span class="line">  redirect: &apos;/login&apos;,</span><br><span class="line">  component: W11orkInProgress,</span><br><span class="line">  pageTitle: &apos;&apos;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h3><p>åœºæ™¯ä¸€ï¼šå½“ç”¨æˆ·å¯¹æŸä¸ªé¡µé¢æ²¡æœ‰æƒé™æ—¶ï¼ŒAclRouterä¼šå°†æ­¤é¡µé¢ é‡å®šå‘åˆ°403é¡µé¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route</span><br><span class="line">        path=&quot;/outlets&quot;</span><br><span class="line">        render=&#123;() =&gt; &lt;Redirect to=&quot;/exception/403&quot; /&gt;&#125;</span><br><span class="line">      /&gt;</span><br></pre></td></tr></table></figure></p><h3 id="NotFound"><a href="#NotFound" class="headerlink" title="NotFound"></a>NotFound</h3><p>åœ¨ã€Šä½¿ç”¨BrowserRouterã€‹ä¸­çš„NotFoundé¡µé¢çš„è·¯ç”±è®¾è®¡æŒºå¥½ï¼Œæ­¤è·¯ç”±æ²¡æœ‰é…ç½®pathï¼Œå½“ä¸Šé¢çš„è·¯ç”±éƒ½æœªåŒ¹é…æ—¶ï¼Œå°±é¡ºå»¶åˆ°NotFoundé¡µé¢ã€‚</p><h3 id="è·¯ç”±é…ç½®é¡¹ä»‹ç»"><a href="#è·¯ç”±é…ç½®é¡¹ä»‹ç»" class="headerlink" title="è·¯ç”±é…ç½®é¡¹ä»‹ç»"></a>è·¯ç”±é…ç½®é¡¹ä»‹ç»</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &apos;/outlets&apos;,</span><br><span class="line">  exact: true,</span><br><span class="line">  //æƒé™</span><br><span class="line">  permissions: [&apos;admin&apos;, &apos;user&apos;],</span><br><span class="line">  //å½“æœ‰æƒé™æ—¶ï¼Œä¸€åˆ‡æ­£å¸¸æ—¶æ˜¾ç¤ºOutlets</span><br><span class="line">  component: Outlets,</span><br><span class="line">  //å½“æ²¡æœ‰æƒé™æ—¶ï¼Œæ¢æˆæ˜¾ç¤ºUnauthorized</span><br><span class="line">  unauthorized: Unauthorized,</span><br><span class="line">  pageTitle: &apos;pageTitle_outlets&apos;,</span><br><span class="line">  //é¢åŒ…å±‘</span><br><span class="line">  breadcrumb: [&apos;/outlets&apos;],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AclRouter"><a href="#AclRouter" class="headerlink" title="AclRouter"></a>AclRouter</h3><p>æ‰€æœ‰è·¯ç”±é‡ç»„ï¼Œå…¨éƒ¨åœ¨ AclRouter.js.<br>è¿™ä¸ªjsäº®ç‚¹åœ¨äºï¼Œåœ¨ç™»é™†å‰ä¸ç™»é™†åï¼Œæ”¹å˜ mapStateToProps ä¸­çš„ user propså€¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">const Router = (&#123; history, user &#125;) =&gt; (</span><br><span class="line">  &lt;ConnectedRouter history=&#123;history&#125;&gt;</span><br><span class="line">    &lt;MultiIntlProvider</span><br><span class="line">      defaultLocale=&#123;locale&#125;</span><br><span class="line">      messageMap=&#123;messages&#125;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;AclRouter</span><br><span class="line">        authorities=&#123;user.authorities&#125;</span><br><span class="line">        authorizedRoutes=&#123;authorizedRoutes&#125;</span><br><span class="line">        authorizedLayout=&#123;BasicLayout&#125;</span><br><span class="line">        normalRoutes=&#123;normalRoutes&#125;</span><br><span class="line">        normalLayout=&#123;NormalLayout&#125;</span><br><span class="line">        notFound=&#123;NotFound&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/MultiIntlProvider&gt;</span><br><span class="line">  &lt;/ConnectedRouter&gt;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">const mapStateToProps = state =&gt; (&#123;</span><br><span class="line">  user: state.app.user,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Router.propTypes = propTypes;</span><br><span class="line">export default connect(mapStateToProps)(Router);</span><br></pre></td></tr></table></figure></p><p>æ ¹æ®ç™»é™†å‰åçš„user propså€¼åœ¨ AclRouter.jsä¸­é‡ç»„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;BrowserRouter history=&#123;history&#125;&gt;</span><br><span class="line">    &lt;Switch&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/&quot;</span><br><span class="line">        render=&#123;() =&gt; &lt;Redirect to=&quot;/outlets&quot; /&gt;&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;Route</span><br><span class="line">        path=&quot;/login&quot;</span><br><span class="line">        render=&#123;props =&gt; (</span><br><span class="line">          &lt;NormalLayout &#123;...props&#125;&gt;</span><br><span class="line">            &lt;RouteComponent &#123;...props&#125; /&gt;</span><br><span class="line">          &lt;/NormalLayout&gt;</span><br><span class="line">        )&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">      ......</span><br><span class="line">    &lt;/Switch&gt;</span><br><span class="line"> &lt;/BrowserRouter&gt;</span><br></pre></td></tr></table></figure></p><p>çœŸæ­£åšåˆ°äº†æ ¹æ®ç”¨æˆ·æƒé™ï¼ŒåŠ¨æ€æ”¹å˜é‡ç»„æ•´ä¸ªBrowserRouterç»„ä»¶ã€‚</p><h3 id="BrowserRouteræ˜¯ç»„ä»¶"><a href="#BrowserRouteræ˜¯ç»„ä»¶" class="headerlink" title="BrowserRouteræ˜¯ç»„ä»¶"></a>BrowserRouteræ˜¯ç»„ä»¶</h3><p>å¦‚ä¸Šï¼ŒBrowserRouter å¯é€šè¿‡connect çš„ mapStateToProps ä¸­çš„ user propså€¼ é‡æ–°æ¸²æŸ“ BrowserRouterã€‚<br>è¿™ä¹ŸéªŒè¯äº† react-routerä¸­è¯´çš„æ‰€æœ‰routeréƒ½æ˜¯ç»„ä»¶çš„è¯´æ³•ã€‚</p><h3 id="å› ä¸ºBrowserRouteræ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥èƒ½ç†æ‰€å½“ç„¶åœ°ä½¿ç”¨connect"><a href="#å› ä¸ºBrowserRouteræ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥èƒ½ç†æ‰€å½“ç„¶åœ°ä½¿ç”¨connect" class="headerlink" title="å› ä¸ºBrowserRouteræ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥èƒ½ç†æ‰€å½“ç„¶åœ°ä½¿ç”¨connect"></a>å› ä¸ºBrowserRouteræ˜¯ç»„ä»¶ï¼Œæ‰€ä»¥èƒ½ç†æ‰€å½“ç„¶åœ°ä½¿ç”¨connect</h3><p>è§ã€ŠBrowserRouteræ˜¯ç»„ä»¶ã€‹<br>å‚è€ƒdemo /src/app/init/Router.js</p><h2 id="redux-è®¾è®¡"><a href="#redux-è®¾è®¡" class="headerlink" title="redux è®¾è®¡"></a>redux è®¾è®¡</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>åœ¨åˆå§‹åŒ–å…¬å…±ç›®å½•ä¸‹çš„jsä¸­ç»Ÿä¸€æ³¨å…¥reducerï¼Œå¹¶å†™äº†ä¸€ä¸ªå…¬å…±çš„actionå’Œreducerï¼Œæ­¤å…¬å…±çš„actionå’Œreducerå¯èƒ½å¾ˆå¤šé¡µé¢éƒ½è¦ç”¨ï¼Œå› æ­¤å†™åœ¨å…¬å…±ç›®å½•ä¸‹ï¼Œä¾›å¾ˆå¤šé¡µé¢ä½¿ç”¨<br>ï¼šå‚è€ƒï¼šsrc/app.<br>æ¯ä¸ªé¡µé¢çš„reducerä¸actionå†™åœ¨æ¯ä¸ªé¡µé¢ç›®å½•ä¸‹,ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- outlets</span><br><span class="line">  - action.js</span><br><span class="line">  - index.js</span><br><span class="line">  - index.scss</span><br><span class="line">  - reducer.js</span><br></pre></td></tr></table></figure></p><h3 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h3><p>åœ¨åˆå§‹åŒ–jsä¸­ï¼Œç»Ÿä¸€æ³¨å…¥reducer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import outlets from &apos;views/outlets/reducer&apos;;</span><br><span class="line">import outletDetail from &apos;views/outletDetail/reducer&apos;;</span><br><span class="line">import app from &apos;../reducer&apos;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  app,</span><br><span class="line">  outlets,</span><br><span class="line">  outletDetail,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>æ¯ä¸ªé¡µé¢çš„reducerå†™åœ¨æ¯ä¸ªé¡µé¢çš„ç›®å½•ä¸‹ã€‚</p><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><p>å‚è€ƒä¸Šé¢ã€‚</p><h3 id="connect"><a href="#connect" class="headerlink" title="connect"></a>connect</h3><p>æ¯ä¸ªé¡µé¢éƒ½è¦å¤„ç† connect(mapStateToProps, mapDispatchToProps)(injectIntl(OutletDetail));</p><h3 id="ç­‰å¾…æ”¹è¿›éƒ¨åˆ†"><a href="#ç­‰å¾…æ”¹è¿›éƒ¨åˆ†" class="headerlink" title="ç­‰å¾…æ”¹è¿›éƒ¨åˆ†"></a>ç­‰å¾…æ”¹è¿›éƒ¨åˆ†</h3><p>connect å’Œ å…¬å…±çš„action å•ç‹¬æ•´ç† æˆconnecté«˜é˜¶ä»¶ï¼Œç„¶åå¯¹æ¯” è€ƒè™‘å¦‚ä½•å°†postç­‰ç»§æ‰¿å…¶ä¸­</p><h2 id="å¾…åš"><a href="#å¾…åš" class="headerlink" title="å¾…åš"></a>å¾…åš</h2><ul><li>jsæºç è°ƒè¯•</li><li>css-source map</li><li>mock</li><li>è·¨åŸŸè¯·æ±‚ koa</li><li>webpack ä»£ç åˆ†ç¦» DllPlugin</li></ul><h1 id="ç‰ˆæœ¬v0-01"><a href="#ç‰ˆæœ¬v0-01" class="headerlink" title="ç‰ˆæœ¬v0.01"></a>ç‰ˆæœ¬v0.01</h1><h2 id="ç‰ˆæœ¬ä»‹ç»"><a href="#ç‰ˆæœ¬ä»‹ç»" class="headerlink" title="ç‰ˆæœ¬ä»‹ç»"></a>ç‰ˆæœ¬ä»‹ç»</h2><p>æ­¤ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„å·¥ç¨‹é…ç½®ç‰ˆæœ¬ï¼ŒæŒ‡åŒ…å«ä¸€ä¸ªç®€å•ç•Œé¢å’Œé¡¹ç›®æœ€åŸºæœ¬çš„html js css webpackå¤„ç†ã€‚</p><h2 id="å¦‚ä½•å¼€å§‹ä»0å¯åŠ¨ä¸€ä¸ªwebpacké¡¹ç›®"><a href="#å¦‚ä½•å¼€å§‹ä»0å¯åŠ¨ä¸€ä¸ªwebpacké¡¹ç›®" class="headerlink" title="å¦‚ä½•å¼€å§‹ä»0å¯åŠ¨ä¸€ä¸ªwebpacké¡¹ç›®"></a>å¦‚ä½•å¼€å§‹ä»0å¯åŠ¨ä¸€ä¸ªwebpacké¡¹ç›®</h2><h3 id="æ³¨é‡-webpack-å…¥å£-ï¼š"><a href="#æ³¨é‡-webpack-å…¥å£-ï¼š" class="headerlink" title="æ³¨é‡ webpack å…¥å£ ï¼š"></a>æ³¨é‡ webpack å…¥å£ ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;webpack-dev-server --config webpack.dev.js&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="é¡¹ç›®æœ€åŸºæœ¬é…ç½®ï¼š"><a href="#é¡¹ç›®æœ€åŸºæœ¬é…ç½®ï¼š" class="headerlink" title="é¡¹ç›®æœ€åŸºæœ¬é…ç½®ï¼š"></a>é¡¹ç›®æœ€åŸºæœ¬é…ç½®ï¼š</h3><p>ä¸€ä¸ªé¡¹ç›®æ— éå›´ç»• htmlï¼Œcssï¼Œjsï¼Œå›¾ç‰‡ï¼Œaxiosè¿›è¡Œï¼Œå› æ­¤å¯¹åº”çš„é…ç½®å¦‚ä¸‹ï¼Œæœ¬ç‰ˆæœ¬ä¸‹çš„package.jsoné…ç½®çš„ä¾èµ–éƒ½æ˜¯åŸºäºä»¥ä¸‹æœ€åŸºæœ¬çš„é…ç½®ï¼š</p><h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><p>htmlæ¨¡ç‰ˆæ’ä»¶</p><h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><p>scssã€cssã€å›¾ç‰‡ loader<br>cssã€å›¾ç‰‡ä¸htmlåˆ†ç¦»<br>css3åŠ å…¼å®¹æ€§å‰ç¼€</p><h4 id="js"><a href="#js" class="headerlink" title="js"></a>js</h4><p>es6ã€es7ç¼–è¯‘æˆes5<br>es6ã€es7çš„api(å¦‚Promiseç­‰ç­‰)è¿è¡Œprofill<br>ä¸€äº›es6ç­‰ç›¸å…³çš„babel jsæ’ä»¶</p><h4 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h4><h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><h4 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h4><p>webpackæ— éå°±æ˜¯å¯¹html css js å›¾ç‰‡æ–‡ä»¶çš„æ‰“åŒ…ï¼Œå› ä¸ºåˆå¤šäº†babelå¯¹jsçš„æ‰“åŒ…ï¼Œå¯ä»¥è¯´å·¥ç¨‹é¡¹ç›®ä¸­å¯¹jsçš„æ‰“åŒ…æ˜¯æœ€ä¸°å¯Œçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
            <tag> redux-thunk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨ç®—æ³•</title>
      <link href="/2019/04/09/calc/"/>
      <url>/2019/04/09/calc/</url>
      
        <content type="html"><![CDATA[<h2 id="é˜…è¯»è¯´æ˜"><a href="#é˜…è¯»è¯´æ˜" class="headerlink" title="é˜…è¯»è¯´æ˜"></a>é˜…è¯»è¯´æ˜</h2><p>ä¸ºäº†è®©æ¯ä¸ªç®—æ³•æ¨¡å—èƒ½å¤Ÿæœ‰æ›´å¤šçš„çš„ç›®å½•å±‚çº§ï¼Œæœ¬æ–‡ç›´æ¥å°†å„æ¨¡å—å•åˆ—å‡ºä¸€ä¸ªç« èŠ‚è®²ï¼Œè¿™æ ·çš„å¼Šç«¯æ˜¯ï¼ŒçŸ¥è¯†ç‚¹çœ‹èµ·æ¥æ¯”è¾ƒä¹±ï¼Œ<br>ä¸€çœ¼çœ‹ä¸å‡ºä»–ä»¬å¯¹åº”çš„æ˜¯ä»€ä¹ˆç®—æ³•å†…å®¹ã€‚<br>æ‰€ä»¥æœ¬ç« èŠ‚ç”¨äºå°†å„ç« èŠ‚å¯¹åº”çš„ç®—æ³•çŸ¥è¯†ç‚¹ï¼Œè¿›è¡Œç›®å½•åˆ†ç±»ã€‚å…·ä½“æ¨¡å—å†…å®¹è¯·è·³è½¬åˆ°ç›¸å…³ç« èŠ‚çœ‹ã€‚</p><p>ç®—æ³•æ¨¡å—ï¼š</p><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><h4 id="ç”µè¯å·ç "><a href="#ç”µè¯å·ç " class="headerlink" title="ç”µè¯å·ç "></a>ç”µè¯å·ç </h4><h4 id="å¡ç‰Œåˆ†ç»„"><a href="#å¡ç‰Œåˆ†ç»„" class="headerlink" title="å¡ç‰Œåˆ†ç»„"></a>å¡ç‰Œåˆ†ç»„</h4><h4 id="ç§èŠ±é—®é¢˜"><a href="#ç§èŠ±é—®é¢˜" class="headerlink" title="ç§èŠ±é—®é¢˜"></a>ç§èŠ±é—®é¢˜</h4><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><h4 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><h4 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h4><h4 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><h4 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h4><h4 id="æœ€å¤§é—´è·-å†’æ³¡æ’åºå®ç°"><a href="#æœ€å¤§é—´è·-å†’æ³¡æ’åºå®ç°" class="headerlink" title="æœ€å¤§é—´è· (å†’æ³¡æ’åºå®ç°)"></a>æœ€å¤§é—´è· (å†’æ³¡æ’åºå®ç°)</h4><h4 id="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ -å†’æ³¡æ’åºå®ç°"><a href="#æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ -å†’æ³¡æ’åºå®ç°" class="headerlink" title="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´  (å†’æ³¡æ’åºå®ç°)"></a>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´  (å†’æ³¡æ’åºå®ç°)</h4><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><h4 id="å¤åŸipåœ°å€"><a href="#å¤åŸipåœ°å€" class="headerlink" title="å¤åŸipåœ°å€"></a>å¤åŸipåœ°å€</h4><h4 id="é€’å½’é˜¶ä¹˜"><a href="#é€’å½’é˜¶ä¹˜" class="headerlink" title="é€’å½’é˜¶ä¹˜"></a>é€’å½’é˜¶ä¹˜</h4><h4 id="æ–æ³¢é‚£å¥‘æ•°"><a href="#æ–æ³¢é‚£å¥‘æ•°" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°"></a>æ–æ³¢é‚£å¥‘æ•°</h4><h3 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h3><h4 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h4><h4 id="å¯¹ç§°äºŒå‰æ ‘"><a href="#å¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘"></a>å¯¹ç§°äºŒå‰æ ‘</h4><h4 id="éªŒè¯äºŒå‰æœç´¢æ ‘"><a href="#éªŒè¯äºŒå‰æœç´¢æ ‘" class="headerlink" title="éªŒè¯äºŒå‰æœç´¢æ ‘"></a>éªŒè¯äºŒå‰æœç´¢æ ‘</h4><p><strong>åŸºç¡€ç®—æ³•ç¯‡</strong></p><h2 id="ç”µè¯å·ç -1"><a href="#ç”µè¯å·ç -1" class="headerlink" title="ç”µè¯å·ç "></a>ç”µè¯å·ç </h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“ ç”µè¯å·ç çš„å­—æ¯ç»„åˆ</a><br>ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚<br>ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function calc(str) &#123;</span><br><span class="line">     let map = [&apos;&apos;, 1, &apos;abc&apos;, &apos;def&apos;, &apos;ghi&apos;, &apos;jkl&apos;, &apos;mno&apos;, &apos;pqrs&apos;, &apos;tuv&apos;, &apos;wxyz&apos;]</span><br><span class="line">     let num = str.split(&apos;&apos;)</span><br><span class="line">     let code = []</span><br><span class="line">     num.forEach(item =&gt; &#123;</span><br><span class="line">       if (map[item]) &#123;</span><br><span class="line">         code.push(map[item])</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">     let comb = (arr) =&gt; &#123;</span><br><span class="line">       // ä¸´æ—¶å˜é‡ç”¨æ¥ä¿å­˜å‰ä¸¤ä¸ªç»„åˆçš„ç»“æœ</span><br><span class="line">       let tmp = []</span><br><span class="line">       // æœ€å¤–å±‚çš„å¾ªç¯æ˜¯éå†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡Œå±‚çš„å¾ªç¯æ˜¯éå†ç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line">       for (let i = 0; i &lt; arr[0].length; i++) &#123;</span><br><span class="line">         for (let j = 0; j &lt; arr[1].length; j++) &#123;</span><br><span class="line">           tmp.push(`$&#123;arr[0][i]&#125;$&#123;arr[1][j]&#125;`)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       arr.splice(0, 2, tmp)</span><br><span class="line">       if (arr.length &gt; 1) &#123;</span><br><span class="line">         comb(arr)</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">         return tmp</span><br><span class="line">       &#125;</span><br><span class="line">       return arr[0]</span><br><span class="line">     &#125;</span><br><span class="line">     return comb(code)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   //calc(&apos;32&apos;)</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨å¯¹ä¸Šé¢æ–¹æ³•è¿›è¡Œæ€è·¯å’Œè¦ç‚¹è§£æ</p><h3 id="æ¯æ¬¡åªè®©ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ ä¸¤ä¸¤ç»„åˆ"><a href="#æ¯æ¬¡åªè®©ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ ä¸¤ä¸¤ç»„åˆ" class="headerlink" title="æ¯æ¬¡åªè®©ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ ä¸¤ä¸¤ç»„åˆ"></a>æ¯æ¬¡åªè®©ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå…ƒç´ ä¸¤ä¸¤ç»„åˆ</h3><p>ä¸ç®¡è¾“å…¥å¤šå°‘ä½æ•°ï¼Œéƒ½è®©å‰ä¸¤ä½æ•°å­—è¿›è¡Œç»„åˆï¼Œç»„åˆçš„ç»“æœ å†è·Ÿ ç¬¬ä¸‰ä½æ•°å­—è¿›è¡Œç»„åˆï¼Œé€»è¾‘ä¸€æ ·ï¼Œä¾æ¬¡ç±»æ¨ã€‚ é€»è¾‘ä¸€æ ·çš„éƒ¨åˆ†ï¼Œåˆ™çªå‡ºäº†ä½¿ç”¨é€’å½’çš„éœ€æ±‚ã€‚<br><figure class="image-box">                <img src="/image/calc/phone.jpg" alt title class>                <p></p>            </figure></p><h3 id="é€’å½’æ˜¯é‡å¤´æˆ"><a href="#é€’å½’æ˜¯é‡å¤´æˆ" class="headerlink" title="é€’å½’æ˜¯é‡å¤´æˆ"></a>é€’å½’æ˜¯é‡å¤´æˆ</h3><p>å‚è€ƒä¸Šé¢ã€Šä¸¤ä¸¤ç»„åˆã€‹</p><h3 id="return-arr-0-å¾ˆéœ€è¦"><a href="#return-arr-0-å¾ˆéœ€è¦" class="headerlink" title="return arr[0] å¾ˆéœ€è¦"></a>return arr[0] å¾ˆéœ€è¦</h3><p>å’‹ä¸€çœ‹ï¼Œè§‰å¾—è¿™ä¸€å¥ä¸éœ€è¦ï¼Œä»¥ä¸ºæœ‰ if elseï¼Œå°±ä¸ä¼šèµ°åˆ° return arr[0]ã€‚è¿™ä¹Ÿæ˜¯æˆ‘è¯¯è§£çš„ï¼Œå…¶å®ä¸‹é¢çš„comb(arr)é€’å½’ï¼Œæ‰§è¡Œå®Œåï¼Œå°±ä¼šæ‰§è¡Œåé¢çš„return arr[0]ã€‚<br>ä»¥ä¸Šä¹Ÿæ˜¯æˆ‘å¯¹äºé€’å½’çš„è¯¯åŒºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if (arr.length &gt; 1) &#123;</span><br><span class="line">       comb(arr)</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">       return tmp</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">return arr[0]</span><br></pre></td></tr></table></figure></p><h3 id="é€’å½’å®Œäº†è¿˜ä¼šå¾€ä¸‹æ‰§è¡Œ"><a href="#é€’å½’å®Œäº†è¿˜ä¼šå¾€ä¸‹æ‰§è¡Œ" class="headerlink" title="é€’å½’å®Œäº†è¿˜ä¼šå¾€ä¸‹æ‰§è¡Œ"></a>é€’å½’å®Œäº†è¿˜ä¼šå¾€ä¸‹æ‰§è¡Œ</h3><p>å‚è€ƒä¸Šé¢ ã€Šreturn arr[0] å¾ˆéœ€è¦ã€‹</p><h3 id="è§£å†³æ–¹æ³•ä¼˜åŒ–"><a href="#è§£å†³æ–¹æ³•ä¼˜åŒ–" class="headerlink" title="è§£å†³æ–¹æ³•ä¼˜åŒ–"></a>è§£å†³æ–¹æ³•ä¼˜åŒ–</h3><p>ä¸Šé¢è§£å†³ä»£ç ä¸­ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (arr.length &gt; 1) &#123;</span><br><span class="line">         comb(arr)</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">         //å¸¦æœ‰ä¸€å®šæ­§ä¹‰</span><br><span class="line">         return tmp</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><p>å¯å†™æˆå¦‚ä¸‹æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function calc(str) &#123;</span><br><span class="line">   let map = [&apos;&apos;, 1, &apos;abc&apos;, &apos;def&apos;, &apos;ghi&apos;, &apos;jkl&apos;, &apos;mno&apos;, &apos;pqrs&apos;, &apos;tuv&apos;, &apos;wxyz&apos;]</span><br><span class="line">   let num = str.split(&apos;&apos;)</span><br><span class="line">   let code = []</span><br><span class="line">   num.forEach(item =&gt; &#123;</span><br><span class="line">     if (map[item]) &#123;</span><br><span class="line">       code.push(map[item])</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   let comb = (arr) =&gt; &#123;</span><br><span class="line">     // ä¸´æ—¶å˜é‡ç”¨æ¥ä¿å­˜å‰ä¸¤ä¸ªç»„åˆçš„ç»“æœ</span><br><span class="line">     let tmp = []</span><br><span class="line">     // æœ€å¤–å±‚çš„å¾ªç¯æ˜¯éå†ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé‡Œå±‚çš„å¾ªç¯æ˜¯éå†ç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line">     for (let i = 0; i &lt; arr[0].length; i++) &#123;</span><br><span class="line">       for (let j = 0; j &lt; arr[1].length; j++) &#123;</span><br><span class="line">         tmp.push(`$&#123;arr[0][i]&#125;$&#123;arr[1][j]&#125;`)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     arr.splice(0, 2, tmp)</span><br><span class="line">     if (arr.length &gt; 1) &#123;</span><br><span class="line">       return comb(arr)</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">       return arr[0]</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   return comb(code)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><h3 id="å†ä¸€æ¬¡ä¼˜åŒ–"><a href="#å†ä¸€æ¬¡ä¼˜åŒ–" class="headerlink" title="å†ä¸€æ¬¡ä¼˜åŒ–"></a>å†ä¸€æ¬¡ä¼˜åŒ–</h3><p>ä¸Šé¢çš„ä»£ç çœ‹èµ·æ¥æœ‰ç‚¹æ™•ï¼Œä¸‹é¢å°†ä¸¤ä¸¤ç»„åˆçš„é€»è¾‘æå‡ºæ¥ï¼Œè®©ä»£ç æ›´æ¸…æ™°ï¼Œæœ¬æ¬¡ä¼˜åŒ–çš„é€»è¾‘ä¸ä¸Šé¢æ˜¯ä¸€æ ·çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">function combile(a1,b1)&#123;</span><br><span class="line">    let arr=[];</span><br><span class="line">    a1.forEach(ai=&gt;&#123;</span><br><span class="line">        b1.forEach(bi=&gt;&#123;</span><br><span class="line">            arr.push(`$&#123;ai&#125;$&#123;bi&#125;`);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    return arr;</span><br><span class="line">&#125;</span><br><span class="line">function calc1(str)&#123;</span><br><span class="line">   let map = [&apos;&apos;, 1, &apos;abc&apos;, &apos;def&apos;, &apos;ghi&apos;, &apos;jkl&apos;, &apos;mno&apos;, &apos;pqrs&apos;, &apos;tuv&apos;, &apos;wxyz&apos;];</span><br><span class="line">   const allStr = str.split(&apos;&apos;).map(num=&gt;map[Number(num)]);</span><br><span class="line">   const cur = (strarr)=&gt;&#123;</span><br><span class="line">     //ç¬¬ä¸€æ¬¡strarr[0]æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ ä»¥åstrarr[0]ç»è¿‡spliceåï¼Œéƒ½æ˜¯æ•°ç»„</span><br><span class="line">    const one = typeof strarr[0] === &apos;string&apos; ? strarr[0].split(&apos;&apos;) : strarr[0];</span><br><span class="line">    const two = strarr[1].split(&apos;&apos;);</span><br><span class="line">    const newItem0 = combile(one, two);</span><br><span class="line">    strarr.splice(0,2,newItem0);</span><br><span class="line">       if(strarr.length&lt;2)&#123;</span><br><span class="line">           return strarr[0];</span><br><span class="line">       &#125;</span><br><span class="line">     return cur(strarr)</span><br><span class="line">   &#125;</span><br><span class="line">  return cur(allStr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="è€ƒå¯Ÿç®—æ³•è¦ç‚¹"><a href="#è€ƒå¯Ÿç®—æ³•è¦ç‚¹" class="headerlink" title="è€ƒå¯Ÿç®—æ³•è¦ç‚¹"></a>è€ƒå¯Ÿç®—æ³•è¦ç‚¹</h3><p>ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå¦‚ä½•è®©å†…éƒ¨å…ƒç´ ä¸¤ä¸¤ç»„å’Œï¼Œè¿”å›ä¸€ä¸ªå…¨ç»„åˆç»“æœï¼›<br>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œä¸ç®¡æ•°ç»„æœ‰å¤šå°‘å…ƒç´ ï¼Œæ¯æ¬¡åªè®©ç¬¬ä¸€ä¸ªå…ƒç´ å’Œç¬¬äºŒä¸ªå…ƒç´ ä¸¤ä¸¤ç»„å’Œï¼›<br>é€’å½’ä»¥ä¸Šè¡Œä¸ºï¼Œç»è¿‡é€’å½’åï¼Œæœ€ç»ˆæ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ã€‚è¿™ä¸ªå…ƒç´ å°±æ˜¯ç»„åˆç»“æœã€‚<br>æ‰€ä»¥æ ¸å¿ƒæ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä¸¤ä¸¤ç»„å’Œï¼›<br>æŠ€æœ¯å®æ–½æ˜¯é€’å½’ï¼›<br>åˆ©ç”¨çš„åŸåˆ™æ˜¯æ•°ç»„ä¸¤ä¸¤ç»„å’Œåˆ°æœ€åå¿…ç„¶åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼›</p><h2 id="å¡ç‰Œåˆ†ç»„-1"><a href="#å¡ç‰Œåˆ†ç»„-1" class="headerlink" title="å¡ç‰Œåˆ†ç»„"></a>å¡ç‰Œåˆ†ç»„</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ç»™å®šä¸€å‰¯ç‰Œï¼Œæ¯å¼ ç‰Œä¸Šéƒ½å†™ç€ä¸€ä¸ªæ•´æ•°ã€‚<br>æ­¤æ—¶ï¼Œä½ éœ€è¦é€‰å®šä¸€ä¸ªæ•°å­— Xï¼Œä½¿æˆ‘ä»¬å¯ä»¥å°†æ•´å‰¯ç‰ŒæŒ‰ä¸‹è¿°è§„åˆ™åˆ†æˆ 1 ç»„æˆ–æ›´å¤šç»„ï¼š<br>æ¯ç»„éƒ½æœ‰ X å¼ ç‰Œã€‚<br>ç»„å†…æ‰€æœ‰çš„ç‰Œä¸Šéƒ½å†™ç€ç›¸åŒçš„æ•´æ•°ã€‚<br>ä»…å½“ä½ å¯é€‰çš„ X &gt;= 2 æ—¶è¿”å› trueã€‚<br><a href="https://leetcode-cn.com/problems/x-of-a-kind-in-a-deck-of-cards" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“ å¡ç‰Œåˆ†ç»„</a></p><p>ç”¨ç™½è¯è§£é‡ŠåŸé¢˜ï¼šç»™å®šä¸€å‰¯ç‰Œï¼Œè¿™å‰¯ç‰Œå¯ä»¥æ˜¯1å¼ æˆ–1ä¸‡å¼ ï¼Œå°†è¿™å‰¯ç‰Œåˆ†æˆä¸€ç»„æˆ–å¤šç»„ï¼Œæ¯ç»„ç‰Œçš„æ•°å­—éƒ½ç›¸åŒï¼Œæ¯ç»„ç‰Œçš„ä¸ªæ•°ä¸å°‘äº2.</p><h3 id="è§£æ³•ä¸€ï¼š-æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ"><a href="#è§£æ³•ä¸€ï¼š-æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ" class="headerlink" title="è§£æ³•ä¸€ï¼š æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ"></a>è§£æ³•ä¸€ï¼š æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function calc(arr) &#123;</span><br><span class="line">      // å°†å¡ç‰ŒæŒ‰å€¼æ’åºä¿è¯ç›¸åŒçš„å¡ç‰Œæ˜¯æŒ¨ç€çš„</span><br><span class="line">      let str = arr.sort((a, b) =&gt; a - b).join(&apos;&apos;)</span><br><span class="line">      // åˆ†ç»„(å•å¼ æˆ–è€…å¤šå¼ )  \1 åœ¨æ­£åˆ™ä¸­è¡¨ç¤ºè¿ç»­ä¸€æ ·çš„åŒ¹é…</span><br><span class="line">      let group = str.match(/(\d)\1+|\d/g)</span><br><span class="line">      // æ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°</span><br><span class="line">      let gcd = (a, b) =&gt; &#123;    </span><br><span class="line">        if(b === 0)  return a;   </span><br><span class="line">        return gcd(b, a % b)</span><br><span class="line">       &#125;</span><br><span class="line">      // æ€æƒ³ï¼šåªè¦æ‰€æœ‰çš„åˆ†ç»„å…·æœ‰æœ€å¤§å…¬çº¦æ•°(å¤§äº1)å°±æ»¡è¶³æ¡ä»¶</span><br><span class="line">      // å¯¹æ‰€æœ‰çš„åˆ†ç»„è¿›è¡Œæœ€å¤§å…¬çº¦æ•°éªŒè¯ï¼Œç›¸é‚»ä¸¤ä¸ªåˆ†ç»„çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå†ä¸åé¢çš„å…¬çº¦æ•°è¿›è¡ŒéªŒè¯ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæœ‰ä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°ä¸º1å°±é€€å‡º</span><br><span class="line">      while (group.length &gt; 1) &#123;</span><br><span class="line">        let a = group.shift().length</span><br><span class="line">        let b = group.shift().length</span><br><span class="line">        let v = gcd(a, b)</span><br><span class="line">        if (v === 1) &#123;</span><br><span class="line">          return false</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          // å°†å‰ä¸¤ä¸ªåˆ†ç»„çš„æœ€å¤§å…¬çº¦æ•°æ¨è¿›æ•°ç»„ä¸ä¸‹ä¸€ä¸ªåˆ†ç»„å†æ¬¡éªŒè¯æ˜¯å¦æœ‰æœ€å¤§å…¬çº¦æ•°</span><br><span class="line">          group.unshift(&apos;0&apos;.repeat(v))</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      // è€ƒè™‘è¾¹ç•Œ[&apos;11&apos;]å³åªæœ‰ä¸€ä¸ªåˆ†ç»„çš„æ—¶å€™</span><br><span class="line">      return group.length ? group[0].length &gt; 1 : false</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="æœ€å¤§å…¬çº¦æ•°"><a href="#æœ€å¤§å…¬çº¦æ•°" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°"></a>æœ€å¤§å…¬çº¦æ•°</h3><h4 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h4><p>ä¸‹é¢æ˜¯æœ€å¤§å…¬çº¦æ•°çš„æ±‚æ³•ï¼Œå¯ä»¥ä¸å¿…ç†è§£ï¼ŒçŸ¥é“è¿™æ ·ç”¨å°±è¡Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let gcd = (a, b) =&gt; &#123;    </span><br><span class="line">    if(b === 0)  return a;   </span><br><span class="line">    return gcd(b, a % b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="æœ€å¤§å…¬çº¦æ•°é™¤äº†1å€¼å¤–ï¼Œå…¶ä»–å€¼éƒ½åˆæ³•"><a href="#æœ€å¤§å…¬çº¦æ•°é™¤äº†1å€¼å¤–ï¼Œå…¶ä»–å€¼éƒ½åˆæ³•" class="headerlink" title="æœ€å¤§å…¬çº¦æ•°é™¤äº†1å€¼å¤–ï¼Œå…¶ä»–å€¼éƒ½åˆæ³•"></a>æœ€å¤§å…¬çº¦æ•°é™¤äº†1å€¼å¤–ï¼Œå…¶ä»–å€¼éƒ½åˆæ³•</h4><h3 id="æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ"><a href="#æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ" class="headerlink" title="æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ"></a>æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while (group.length &gt; 1) &#123;</span><br><span class="line">        let a = group.shift().length</span><br><span class="line">        let b = group.shift().length</span><br><span class="line">      ...</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•-æ¨è-â€“matchæ­£åˆ™"><a href="#æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•-æ¨è-â€“matchæ­£åˆ™" class="headerlink" title="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•(æ¨è)â€“matchæ­£åˆ™"></a>æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•(æ¨è)â€“matchæ­£åˆ™</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ†ç»„(å•å¼ æˆ–è€…å¤šå¼ )  \1 åœ¨æ­£åˆ™ä¸­è¡¨ç¤ºè¿ç»­ä¸€æ ·çš„åŒ¹é…</span><br><span class="line"> let group = str.match(/(\d)\1+|\d/g)</span><br></pre></td></tr></table></figure><h3 id="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object-keyæ–¹å¼"><a href="#æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object-keyæ–¹å¼" class="headerlink" title="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object keyæ–¹å¼"></a>æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object keyæ–¹å¼</h3><p>å‚è€ƒä¸‹é¢çš„ã€Šæœ€å°ç›¸åŒæ•°ä¸æ‰€æœ‰ç›¸åŒæ•°æ¯”è¾ƒçš„ å®ç°æ–¹å¼ã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const hash = deck.reduce((pre, num) =&gt; &#123;    //ç»Ÿè®¡å‡ºæ¯ç§æ•°å­—çš„æ•°ç›®</span><br><span class="line">  if(!pre[num]) &#123;</span><br><span class="line">    pre[num] = 1</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    pre[num]++</span><br><span class="line">  &#125;</span><br><span class="line">  return pre</span><br><span class="line">&#125;, &#123;&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="while-å®ç°-é€’å½’æ•ˆæœ"><a href="#while-å®ç°-é€’å½’æ•ˆæœ" class="headerlink" title="while å®ç° é€’å½’æ•ˆæœ"></a>while å®ç° é€’å½’æ•ˆæœ</h3><p>è§ä¸Šé¢çš„ä»£ç ã€‚</p><h3 id="è§£æ³•ä¸€ä¼˜åŒ–ï¼šç”¨é€’å½’ä»£æ›¿whileå†™æ³•"><a href="#è§£æ³•ä¸€ä¼˜åŒ–ï¼šç”¨é€’å½’ä»£æ›¿whileå†™æ³•" class="headerlink" title="è§£æ³•ä¸€ä¼˜åŒ–ï¼šç”¨é€’å½’ä»£æ›¿whileå†™æ³•"></a>è§£æ³•ä¸€ä¼˜åŒ–ï¼šç”¨é€’å½’ä»£æ›¿whileå†™æ³•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function calc(arr) &#123;</span><br><span class="line">     let str = arr.sort((a, b) =&gt; a - b).join(&apos;&apos;)</span><br><span class="line">     let group = str.match(/(\d)\1+|\d/g)</span><br><span class="line">     let gcd = (a, b) =&gt; &#123;    </span><br><span class="line">       if(b === 0)  return a;   </span><br><span class="line">       return gcd(b, a % b)</span><br><span class="line">      &#125;</span><br><span class="line">      const cur = (arr)=&gt;&#123;</span><br><span class="line">        if(arr.length&lt;2)&#123;</span><br><span class="line">          return arr[0].length &gt; 1;</span><br><span class="line">        &#125;</span><br><span class="line">        const one = arr.shift().length;</span><br><span class="line">        const two = arr.shift().length;</span><br><span class="line">        let v = gcd(one, two);</span><br><span class="line">        if (v === 1) &#123;</span><br><span class="line">         return false</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">         arr.unshift(&apos;0&apos;.repeat(v));</span><br><span class="line">        return cur(arr);</span><br><span class="line">       &#125;</span><br><span class="line">      &#125;</span><br><span class="line">     return cur(group);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="è§£æ³•äºŒï¼šæœ€å°ç›¸åŒæ•°ä¸æ‰€æœ‰ç›¸åŒæ•°æ¯”è¾ƒ"><a href="#è§£æ³•äºŒï¼šæœ€å°ç›¸åŒæ•°ä¸æ‰€æœ‰ç›¸åŒæ•°æ¯”è¾ƒ" class="headerlink" title="è§£æ³•äºŒï¼šæœ€å°ç›¸åŒæ•°ä¸æ‰€æœ‰ç›¸åŒæ•°æ¯”è¾ƒ"></a>è§£æ³•äºŒï¼šæœ€å°ç›¸åŒæ•°ä¸æ‰€æœ‰ç›¸åŒæ•°æ¯”è¾ƒ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var hasGroupsSizeX = function(deck) &#123;</span><br><span class="line">  let getResult = (a, b) =&gt; &#123;    //å®šä¹‰ä¸€ä¸ªå¯»æ‰¾å…¬çº¦æ•°çš„æ–¹æ³•</span><br><span class="line">    if(b === 0)  return a;   </span><br><span class="line">    return getResult(b, a % b)</span><br><span class="line">  &#125;</span><br><span class="line">  const hash = deck.reduce((pre, num) =&gt; &#123;    //ç»Ÿè®¡å‡ºæ¯ç§æ•°å­—çš„æ•°ç›®</span><br><span class="line">    if(!pre[num]) &#123;</span><br><span class="line">      pre[num] = 1</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      pre[num]++</span><br><span class="line">    &#125;</span><br><span class="line">    return pre</span><br><span class="line">  &#125;, &#123;&#125;)</span><br><span class="line">  const numCount = Object.values(hash)     //å°†hashä¸­çš„æ¯é¡¹æ•°å€¼å­˜å…¥æ•°ç»„ï¼Œä¾¿äºåç»­éå†</span><br><span class="line">  const min = numCount.sort((a, b) =&gt; a-b)[0];         //åˆ©ç”¨æ•°ç»„æ’åºå¿«é€Ÿè·å–æœ€å°å€¼</span><br><span class="line">  if (min &lt; 2) return false; //æ ¹æ®é¢˜æ„ï¼Œå¦‚æœæœ€åˆ†ç»„æœ€å°æ•°é‡å°äº2ï¼Œç›´æ¥è¿”å›false</span><br><span class="line">  return !numCount.some((item,index) =&gt; &#123;</span><br><span class="line">    if(index &gt; 0) return getResult(item, min) === 1</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸¤ç§æ–¹æ¡ˆçš„åˆ©å¼Š"><a href="#ä¸¤ç§æ–¹æ¡ˆçš„åˆ©å¼Š" class="headerlink" title="ä¸¤ç§æ–¹æ¡ˆçš„åˆ©å¼Š"></a>ä¸¤ç§æ–¹æ¡ˆçš„åˆ©å¼Š</h3><p>å°½ç®¡ä¸¤ç§æ–¹æ³•éƒ½èƒ½å®ç°ï¼Œä½†æ˜¯è§£æ³•ä¸€æ¯”è§£æ³•äºŒèŠ‚çœäº†ä¸€æ¬¡éå†ï¼Œå½“æ•°æ®é‡å¤§æ—¶ï¼Œè¿™ç§æ€§èƒ½ä¸Šçš„å·®åˆ«å°±ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æ¨èç¬¬ä¸€ç§æ–¹æ¡ˆã€‚</p><h2 id="ç§èŠ±é—®é¢˜-1"><a href="#ç§èŠ±é—®é¢˜-1" class="headerlink" title="ç§èŠ±é—®é¢˜"></a>ç§èŠ±é—®é¢˜</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªå¾ˆé•¿çš„èŠ±å›ï¼Œä¸€éƒ¨åˆ†åœ°å—ç§æ¤äº†èŠ±ï¼Œå¦ä¸€éƒ¨åˆ†å´æ²¡æœ‰ã€‚å¯æ˜¯ï¼ŒèŠ±å‰ä¸èƒ½ç§æ¤åœ¨ç›¸é‚»çš„åœ°å—ä¸Šï¼Œå®ƒä»¬ä¼šäº‰å¤ºæ°´æºï¼Œä¸¤è€…éƒ½ä¼šæ­»å»ã€‚<br>ç»™å®šä¸€ä¸ªèŠ±å›ï¼ˆè¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„åŒ…å«0å’Œ1ï¼Œå…¶ä¸­0è¡¨ç¤ºæ²¡ç§æ¤èŠ±ï¼Œ1è¡¨ç¤ºç§æ¤äº†èŠ±ï¼‰ï¼Œå’Œä¸€ä¸ªæ•° n ã€‚èƒ½å¦åœ¨ä¸æ‰“ç ´ç§æ¤è§„åˆ™çš„æƒ…å†µä¸‹ç§å…¥ n æœµèŠ±ï¼Œç®—å‡ºnçš„æœ€å¤§å€¼ã€‚<br><a href="https://leetcode-cn.com/problems/can-place-flowers" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“ ç§èŠ±é—®é¢˜</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function calc(arr)&#123;</span><br><span class="line">    // è®¡æ•°å™¨</span><br><span class="line">    let max = 0</span><br><span class="line">    for (let i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">      //åªæœ‰arr[i] === 0æ—¶ï¼Œè¯´æ˜å¯ä»¥ç§èŠ±ï¼Œå› æ­¤åªéœ€è€ƒè™‘arr[i] === 0çš„é€»è¾‘ï¼Œå…¶ä»–æƒ…å†µä¸ç”¨è€ƒè™‘</span><br><span class="line">      if (arr[i] === 0) &#123;</span><br><span class="line">        //å½“ arr[i] === 0 æ—¶éƒ½ç¬¦åˆæ¡ä»¶ï¼Œå”¯æœ‰è¾¹ç•Œå€¼ i===0 ä¸ i === arr.length-2 æ—¶éœ€è¦ç‰¹æ®Šè€ƒè™‘</span><br><span class="line">        if (i === 0 &amp;&amp; arr[1] === 0) &#123;</span><br><span class="line">          max++</span><br><span class="line">          //è·³è½¬ï¼Œè¿™é‡Œi++ï¼ŒåŠ ä¸Šforå¾ªç¯è‡ªåŠ¨ä¹Ÿ++ï¼Œæ‰€ä»¥iå®é™…åŠ äº†2</span><br><span class="line">          i++</span><br><span class="line">        &#125; else if (i === arr.length-2 &amp;&amp; arr[arr.length-1] === 0) &#123;</span><br><span class="line">          max++</span><br><span class="line">        &#125;else if (arr[i - 1] === 0 &amp;&amp; arr[i + 1] === 0) &#123;</span><br><span class="line">          max++</span><br><span class="line">           //è·³è½¬ï¼Œè¿™é‡Œi++ï¼ŒåŠ ä¸Šforå¾ªç¯è‡ªåŠ¨ä¹Ÿ++ï¼Œæ‰€ä»¥iå®é™…åŠ äº†2</span><br><span class="line">          i++</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return max</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  calc([1, 0, 0, 0, 1, 0, 0])// 2</span><br><span class="line">  calc([1, 0, 0, 0, 1])//1</span><br><span class="line">  calc([0,0,1, 0, 0, 0, 1])//2</span><br></pre></td></tr></table></figure><h3 id="è¦ç‚¹åˆ†æ"><a href="#è¦ç‚¹åˆ†æ" class="headerlink" title="è¦ç‚¹åˆ†æ"></a>è¦ç‚¹åˆ†æ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,0,0,0,0,0,0,0,1]</span><br></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯åœ¨æ•°ç»„ä¸­æ‰¾000çš„æ¨¡å‹ï¼Œæœ‰000å°±å¯ä»¥å˜æˆ010ï¼Œè¾¾åˆ°è¦æ±‚ã€‚<br>å¦å¤–ä¸€ä¸ªè¦è€ƒè™‘çš„æ˜¯è¾¹ç•Œé—®é¢˜ï¼Œæ¯”å¦‚ï¼Œ[0,0,1]ï¼Œè¿™ä¸ç¬¦åˆ 000ï¼Œä½†ä¾ç„¶å¯ä»¥åœ¨æœ€å·¦ä¾§åŠ 1ï¼›<br>è¿™ç§é—®é¢˜å…¶å®å°±æ˜¯åœ¨æ•°ç»„ä¸­æ‰¾ 000 è¿™ç§æ¨¡å‹ï¼Œå°±æ¶‰åŠåˆ°ç”¨æ•°å­¦å»ºæ¨¡çš„æ€æƒ³æ¥è§£å†³ã€‚</p><h3 id="æ ¸å¿ƒä¸€ï¼š-000çš„æ•°å­¦å»ºæ¨¡"><a href="#æ ¸å¿ƒä¸€ï¼š-000çš„æ•°å­¦å»ºæ¨¡" class="headerlink" title="æ ¸å¿ƒä¸€ï¼š 000çš„æ•°å­¦å»ºæ¨¡"></a>æ ¸å¿ƒä¸€ï¼š 000çš„æ•°å­¦å»ºæ¨¡</h3><p>ä»¥åé‡åˆ°ç±»ä¼¼çš„æ‰¾è¿™ç§000çš„å½¢å¼çš„ä¸œè¥¿ï¼Œå°±è€ƒè™‘ç”¨æ•°å­¦å»ºæ¨¡ã€‚</p><h3 id="æ ¸å¿ƒäºŒï¼š-éå†"><a href="#æ ¸å¿ƒäºŒï¼š-éå†" class="headerlink" title="æ ¸å¿ƒäºŒï¼š éå†"></a>æ ¸å¿ƒäºŒï¼š éå†</h3><p>ç§èŠ±é—®é¢˜ï¼Œä¸»è¦è¿ç”¨éå†æ¥è§£å†³ï¼Œä½¿ç”¨äº†å¾ˆå¤šéå†æŠ€å·§ï¼Œæ¯”å¦‚è·³çº§å¿½ç•¥éå†ï¼Œä»¥åŠi+1ç­‰çš„å¤„ç†ï¼Œ<br>i+1çš„éå†æŠ€å·§æœ¬è´¨ä¸Šå°±æ˜¯å¤šä¸ªéå†å…ƒç´ çš„æŠ€å·§ï¼›<br>å› ä¸ºä¸€èˆ¬éå†å…ƒç´ åªæœ‰ä¸€ä¸ªarr[i]ï¼ˆå§‘ä¸”ç§°è¿™ç§éå†ä¸ºå•å…ƒéå†ï¼‰,å¤šä¸ªéå†å…ƒç´ æ˜¯æŒ‡éå†ä½“ä¸­åŒæ—¶å­˜åœ¨ arr[i] arr[i+n] ï¼ˆå¤šå…ƒéå†ï¼‰ã€‚</p><h3 id="å•å…ƒéå†-ä¸-å¤šå…ƒéå†"><a href="#å•å…ƒéå†-ä¸-å¤šå…ƒéå†" class="headerlink" title="å•å…ƒéå† ä¸ å¤šå…ƒéå†"></a>å•å…ƒéå† ä¸ å¤šå…ƒéå†</h3><p>å‚è€ƒã€Šæ ¸å¿ƒäºŒï¼š éå†ã€‹</p><h3 id="éå†ä½“ç”¨-i-è·³çº§å¿½ç•¥éå†"><a href="#éå†ä½“ç”¨-i-è·³çº§å¿½ç•¥éå†" class="headerlink" title="éå†ä½“ç”¨ i++ è·³çº§å¿½ç•¥éå†"></a>éå†ä½“ç”¨ i++ è·³çº§å¿½ç•¥éå†</h3><p>ä¾‹å¦‚ä¸‹é¢çš„ï¼Œindexä½ç½® 1 2 3 ç¬¦åˆ 000ï¼›<br>2 3 4 ä¹Ÿç¬¦åˆ 000ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1,0,0,0,0,1]</span><br></pre></td></tr></table></figure></p><p>ä½†å®é™…ä¸Šå½“éå†äº†index 123åï¼Œä¸‹ä¸€æ¬¡åªè¦æ±‚éå†index 345ï¼›<br>å¦‚ä½•åšåˆ°å‘¢ï¼Œå¯é€šè¿‡åœ¨forå¾ªç¯å†…ï¼Œi++ :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (let i = 0, len = arr.length - 1; i &lt; len; i++) &#123;</span><br><span class="line">   //è·³è½¬ï¼Œè¿™é‡Œi++ï¼ŒåŠ ä¸Šforå¾ªç¯è‡ªåŠ¨ä¹Ÿ++ï¼Œæ‰€ä»¥iå®é™…åŠ äº†2</span><br><span class="line">   i++</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="è¾¹ç•Œé—®é¢˜"><a href="#è¾¹ç•Œé—®é¢˜" class="headerlink" title="è¾¹ç•Œé—®é¢˜"></a>è¾¹ç•Œé—®é¢˜</h3><p>å‚è€ƒã€Šè¦ç‚¹åˆ†æã€‹</p><h3 id="arr-i-1-ä¸arr-i-1-çš„éå†æŠ€å·§"><a href="#arr-i-1-ä¸arr-i-1-çš„éå†æŠ€å·§" class="headerlink" title="arr[i+1]ä¸arr[i-1]çš„éå†æŠ€å·§"></a>arr[i+1]ä¸arr[i-1]çš„éå†æŠ€å·§</h3><h4 id="arr-i-1-ä¸-arr-i-1-ä¸-i-lt-arr-length-1-çš„å¦™ç”¨"><a href="#arr-i-1-ä¸-arr-i-1-ä¸-i-lt-arr-length-1-çš„å¦™ç”¨" class="headerlink" title="arr[i-1] ä¸ arr[i+1] ä¸ i&lt;arr.length-1 çš„å¦™ç”¨"></a>arr[i-1] ä¸ arr[i+1] ä¸ i&lt;arr.length-1 çš„å¦™ç”¨</h4><p>å› ä¸ºforå¾ªç¯ä½“å†…ç”¨äº†arr[i+1]ï¼Œé‚£ä¹ˆåœ¨forçš„titleä¸Šèƒ½éå†çš„æœ€å¤§å€¼æ˜¯ arr.length - 2ï¼Œä¹Ÿå°±æ˜¯i &lt; arr.length - 1ï¼›<br>è¿™ä¸ªæ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„ç”¨æ³•ï¼Œæˆ‘ä»¬åœ¨å†™forå¾ªç¯æ—¶ï¼Œå¦‚æœforå¾ªç¯ä½“å†…æœ‰è¿™æ ·çš„æƒ…å†µï¼Œå°±åº”è¯¥è€ƒè™‘å¥½forçš„titleä¸Šæœ€å¤§çš„i &lt; arr.lengthå€¼ä¹Ÿåº”å“åº”é…åˆå¢åŠ æˆ–å‡å°‘ã€‚å¹¶ä¸”è¿™ä¸ªæœ€å¤§çš„arr.lengthå€¼åˆ°åº•å¤šå°‘<strong>ä¸å‡½æ•°ä½“å†…æœ€å¤§çš„arr[i+1]æœ‰å…³ï¼Œè€Œä¸arr[i-1]æ— å…³ã€‚</strong>ï¼Œå½“ç„¶ï¼Œå¦‚æœç”¨åˆ°arr[i-1]æ—¶ï¼Œ<strong>å°±è¦è€ƒè™‘è¾¹ç•Œå€¼çš„é—®é¢˜</strong>ï¼Œä¹Ÿå°±æ˜¯å½“iä¸º0æ—¶çš„æƒ…å†µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">for (let i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">       ...</span><br><span class="line">         &#125; else if (arr[i - 1] === 0 &amp;&amp; arr[i + 1] === 0) &#123;</span><br><span class="line">       ...</span><br><span class="line">       </span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure></p><h4 id="arr-i-1-æ—¶è€ƒè™‘è¾¹ç•Œå€¼ï¼Œarr-i-1-æ—¶è€ƒè™‘iå€¼æœ€å¤§å€¼"><a href="#arr-i-1-æ—¶è€ƒè™‘è¾¹ç•Œå€¼ï¼Œarr-i-1-æ—¶è€ƒè™‘iå€¼æœ€å¤§å€¼" class="headerlink" title="arr[i-1]æ—¶è€ƒè™‘è¾¹ç•Œå€¼ï¼Œarr[i-1]æ—¶è€ƒè™‘iå€¼æœ€å¤§å€¼"></a>arr[i-1]æ—¶è€ƒè™‘è¾¹ç•Œå€¼ï¼Œarr[i-1]æ—¶è€ƒè™‘iå€¼æœ€å¤§å€¼</h4><p>å‚è€ƒã€Šarr[i-1] ä¸ arr[i+1] ä¸ i&lt;arr.length-1 çš„å¦™ç”¨ã€‹</p><h3 id="éå†çš„ç»å…¸ç»ƒä¹ é¢˜"><a href="#éå†çš„ç»å…¸ç»ƒä¹ é¢˜" class="headerlink" title="éå†çš„ç»å…¸ç»ƒä¹ é¢˜"></a>éå†çš„ç»å…¸ç»ƒä¹ é¢˜</h3><p>ç§èŠ±é—®é¢˜åŸºäºéå†å®ç°ï¼Œç”¨åˆ°äº†æ¯”è¾ƒå¤šçš„éå†æŠ€å·§ï¼Œå¯ç§°ä¸ºç»å…¸éå†çš„è¿ç”¨ç»ƒä¹ é¢˜ã€‚</p><h2 id="å†’æ³¡æ’åº-1"><a href="#å†’æ³¡æ’åº-1" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><h3 id="æ¦‚è¿°-3"><a href="#æ¦‚è¿°-3" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å†’æ³¡æ’åºå¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼Œå°†æ•°ç»„å†…çš„æœ€å¤§å€¼ï¼Œä»å·¦åˆ°å³æˆ–å³å¸¦å·¦åœ°æ’åºï¼Œè¿™ä¸ªè¿‡ç¨‹å¥½åƒæ•°ç»„å†…çš„æœ€å¤§å€¼å¥½åƒå†’æ³¡ä¸€æ ·ï¼Œä»æ°´åº•ä¸Šæµ®çš„è¿‡ç¨‹ã€‚<br>å†’æ³¡æ’åºæ˜¯æ¯æ¬¡æ¯”è¾ƒå·¦å³ä¸¤ä¸ªå€¼ï¼Œæ¯æ¬¡è¿›è¡Œæ¯”è¾ƒäº¤æ¢ä½ç½®ã€‚<br><figure class="image-box">                <img src="/image/calc/water.jpg" alt title class>                <p></p>            </figure><br>å¦‚ä¸‹å›¾ï¼Œè¦å®ç°å¦‚ä¸‹çš„ä¸€ä¸ªæ¸è¿›çš„æ’åºè¿‡ç¨‹ï¼š<br><figure class="image-box">                <img src="/image/calc/bubble.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/calc/bubble1.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/calc/bubble2.jpg" alt title class>                <p></p>            </figure></p><h3 id="å°†æœ€å€¼ç§»åˆ°è¾¹ç¼˜çš„æŠ€å·§"><a href="#å°†æœ€å€¼ç§»åˆ°è¾¹ç¼˜çš„æŠ€å·§" class="headerlink" title="å°†æœ€å€¼ç§»åˆ°è¾¹ç¼˜çš„æŠ€å·§"></a>å°†æœ€å€¼ç§»åˆ°è¾¹ç¼˜çš„æŠ€å·§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; arr.length<span class="number">-1</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">let</span> c = arr[j];</span><br><span class="line">            arr[j] = arr[j + <span class="number">1</span>]</span><br><span class="line">            arr[j + <span class="number">1</span>] = c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="æ’åºæ˜¯æœ€å€¼ç§»åŠ¨çš„å¤šæ¬¡é‡å¤"><a href="#æ’åºæ˜¯æœ€å€¼ç§»åŠ¨çš„å¤šæ¬¡é‡å¤" class="headerlink" title="æ’åºæ˜¯æœ€å€¼ç§»åŠ¨çš„å¤šæ¬¡é‡å¤"></a>æ’åºæ˜¯æœ€å€¼ç§»åŠ¨çš„å¤šæ¬¡é‡å¤</h3><p>æ—¢ç„¶æœ‰ä¸€ç§ç®—æ³•å¯ä»¥å°†æœ€å€¼ç§»åŠ¨è‡³è¾¹ç¼˜ï¼Œé‚£ä¹ˆè¿™ç§ç®—æ³•å°±æ„æˆäº†æ’åºçš„å¯èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ€å€¼ç§»åŠ¨ç§°ä¹‹ä¸ºæ’åºçš„æœ€å°ç»„æˆã€‚<br>å°±å¥½æ¯”ï¼Œå¤æ‚çš„ç°è±¡ æ— ééƒ½æ˜¯ å°†ç®€å•çš„ç°è±¡é‡å¤å¤šéçš„ç»“æœã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calc</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å†’æ³¡æ’åº</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = arr.length - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>]) &#123;</span><br><span class="line">            <span class="keyword">let</span> c = arr[j];</span><br><span class="line">            arr[j] = arr[j + <span class="number">1</span>]</span><br><span class="line">            arr[j + <span class="number">1</span>] = c;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">calc([<span class="number">1</span>, <span class="number">9</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">999</span>,<span class="number">6</span>]) <span class="comment">//[0, 1, 2, 3, 4, 5, 6, 9, 999]</span></span><br></pre></td></tr></table></figure></p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>é€šè¿‡æœ€å€¼ç§»åŠ¨ï¼Œå°†æœ€å€¼ç§»è‡³è¾¹ç¼˜ï¼Œé‚£ä¹ˆä¸‹æ¬¡éå†çš„æ—¶å€™ï¼Œåªéœ€æ’é™¤è¿™ä¸ªæœ€å€¼ï¼Œå°†å‰©ä½™çš„å…ƒç´ é‡å¤æœ€å€¼çš„ç§»åŠ¨ã€‚<br>ç°åœ¨æœ€å€¼ç§»åŠ¨çš„ç®—æ³•æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼Œè¦åšçš„æ˜¯ï¼Œæ¯æ¬¡æœ€å€¼ç§»åŠ¨æ—¶ä¸åŒ…å«è¾¹ç¼˜çš„æœ€å€¼ã€‚</p><h3 id="å¤„ç†i-1-éå†çš„æŠ€å·§"><a href="#å¤„ç†i-1-éå†çš„æŠ€å·§" class="headerlink" title="å¤„ç†i+1 éå†çš„æŠ€å·§"></a>å¤„ç†i+1 éå†çš„æŠ€å·§</h3><p>å‚è€ƒ ã€Šå°†æœ€å€¼ç§»åˆ°è¾¹ç¼˜çš„æŠ€å·§ã€‹</p><h2 id="é€‰æ‹©æ’åº-1"><a href="#é€‰æ‹©æ’åº-1" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><h3 id="æ¦‚è¿°-ä»¥åŠ-é€‰æ‹©ã€å†’æ³¡åŒºåˆ«"><a href="#æ¦‚è¿°-ä»¥åŠ-é€‰æ‹©ã€å†’æ³¡åŒºåˆ«" class="headerlink" title="æ¦‚è¿° ä»¥åŠ é€‰æ‹©ã€å†’æ³¡åŒºåˆ«"></a>æ¦‚è¿° ä»¥åŠ é€‰æ‹©ã€å†’æ³¡åŒºåˆ«</h3><figure class="image-box">                <img src="/image/calc/select-dubble.jpeg" alt title class>                <p></p>            </figure><p>å¦‚ä¸‹å›¾ï¼Œè¦å®ç°å¦‚ä¸‹çš„ä¸€ä¸ªæ¸è¿›çš„æ’åºè¿‡ç¨‹ï¼š<br><figure class="image-box">                <img src="/image/calc/select.jpg" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/calc/select1.jpg" alt title class>                <p></p>            </figure></p><h3 id="é€‰å®šç¬¬1ä¸ªä½ç½®æ”¾ç½®æœ€å°å€¼"><a href="#é€‰å®šç¬¬1ä¸ªä½ç½®æ”¾ç½®æœ€å°å€¼" class="headerlink" title="é€‰å®šç¬¬1ä¸ªä½ç½®æ”¾ç½®æœ€å°å€¼"></a>é€‰å®šç¬¬1ä¸ªä½ç½®æ”¾ç½®æœ€å°å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var i = 0 //ç¬¬1ä¸ªä½ç½®</span><br><span class="line"> for (let j = i + 1; j &lt; len; j++) &#123;</span><br><span class="line">          if (arr[j] &lt; arr[i]) &#123;</span><br><span class="line">            let c = arr[i]</span><br><span class="line">            arr[i] = arr[j]</span><br><span class="line">            arr[j] = c</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="é€‰å®šç¬¬2ä¸ªä½ç½®æ”¾ç½®å‰©ä½™æ•°ç»„çš„æœ€å°å€¼"><a href="#é€‰å®šç¬¬2ä¸ªä½ç½®æ”¾ç½®å‰©ä½™æ•°ç»„çš„æœ€å°å€¼" class="headerlink" title="é€‰å®šç¬¬2ä¸ªä½ç½®æ”¾ç½®å‰©ä½™æ•°ç»„çš„æœ€å°å€¼"></a>é€‰å®šç¬¬2ä¸ªä½ç½®æ”¾ç½®å‰©ä½™æ•°ç»„çš„æœ€å°å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var i = 1 //ç¬¬2ä¸ªä½ç½®</span><br><span class="line"> for (let j = i + 1; j &lt; len; j++) &#123;</span><br><span class="line">          if (arr[j] &lt; arr[i]) &#123;</span><br><span class="line">            let c = arr[i]</span><br><span class="line">            arr[i] = arr[j]</span><br><span class="line">            arr[j] = c</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><p>å°†ä¸Šé¢é€‰å®šä½ç½®æœ€å€¼ç®—æ³•é‡å¤å¤šéï¼Œå°±è¾¾åˆ°æ’åºçš„æ•ˆæœã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function calc(arr) &#123;</span><br><span class="line">      // é€‰æ‹©æ’åº</span><br><span class="line">      for (let i = 0, len = arr.length; i &lt; len; i++) &#123;</span><br><span class="line">        for (let j = i + 1; j &lt; len; j++) &#123;</span><br><span class="line">          if (arr[j] &lt; arr[i]) &#123;</span><br><span class="line">            let c = arr[i]</span><br><span class="line">            arr[i] = arr[j]</span><br><span class="line">            arr[j] = c</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      return arr</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h2 id="æœ€å¤§é—´è·"><a href="#æœ€å¤§é—´è·" class="headerlink" title="æœ€å¤§é—´è·"></a>æœ€å¤§é—´è·</h2><h3 id="æ¦‚è¿°-4"><a href="#æ¦‚è¿°-4" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><a href="https://leetcode-cn.com/problems/maximum-gap/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“ æœ€å¤§é—´è·</a><br>ç»™å®šä¸€ä¸ªæ— åºçš„æ•°ç»„ï¼Œæ‰¾å‡ºæ•°ç»„åœ¨æ’åºä¹‹åï¼Œç›¸é‚»å…ƒç´ ä¹‹é—´æœ€å¤§çš„å·®å€¼ã€‚<br>å¦‚æœæ•°ç»„å…ƒç´ ä¸ªæ•°å°äº 2ï¼Œåˆ™è¿”å› 0ã€‚</p><h3 id="æ¨èæ–¹æ³•"><a href="#æ¨èæ–¹æ³•" class="headerlink" title="æ¨èæ–¹æ³•"></a>æ¨èæ–¹æ³•</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><p>è¿™ç§é¢˜ä¸€èˆ¬é€šè¿‡æ’åºå®Œæˆï¼Œå¹¶ä¸”åœ¨æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œè·å–æœ€å¤§å€¼ï¼Œä»¥ä¸‹é€šè¿‡ å†’æ³¡æ’åºçš„æ–¹å¼æ¥åšï¼Œä¸»è¦åˆ©ç”¨å†’æ³¡çš„æ—¶å€™ï¼Œå…¶ä»–å·²ç»é€æ­¥æ’åºå¥½æœ€å¤§å€¼äº†ï¼Œåˆ©ç”¨è¿™é€æ­¥æ’åºå¥½çš„æœ€å¤§å€¼ï¼Œé€æ­¥æ±‚å‡ºé—´è·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">function getDistance(a, b, max) &#123;</span><br><span class="line">     const num = a - b;</span><br><span class="line">     if (max &lt; num) &#123;</span><br><span class="line">       max = Math.abs(num);</span><br><span class="line">     &#125;</span><br><span class="line">     return max;</span><br><span class="line">   &#125;</span><br><span class="line">   function calc(arr) &#123;</span><br><span class="line">     let max=0;</span><br><span class="line">     for (let i = arr.length - 1, tmp; i &gt; 0; i--) &#123;</span><br><span class="line">       for (let j = 0; j &lt; i; j++) &#123;</span><br><span class="line">         if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">           let c = arr[j];</span><br><span class="line">           arr[j] = arr[j + 1];</span><br><span class="line">           arr[j + 1] = c;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       if (i &lt; (arr.length - 1)) &#123;</span><br><span class="line">         max = getDistance(arr[i + 1], arr[i], max);</span><br><span class="line">         if (i === 1) &#123;</span><br><span class="line">           max = getDistance(arr[1], arr[0], max);</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return max;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><h4 id="è¾¹ç•Œå¤„ç†"><a href="#è¾¹ç•Œå¤„ç†" class="headerlink" title="è¾¹ç•Œå¤„ç†"></a>è¾¹ç•Œå¤„ç†</h4><p>å½“i === (arr.length - 2)ä¸i=1æ—¶éœ€è¦å¤„ç†ä¸åŒé€»è¾‘ã€‚</p><h3 id="å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°"><a href="#å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°" class="headerlink" title="å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°"></a>å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°</h3><p>å¦‚ä¸Šä»£ç ï¼Œå› ä¸ºå†’æ³¡æˆ–é€‰æ‹©æ’åºæ˜¯ï¼Œæœ€å·¦æˆ–æœ€å³ç«¯å€¼å·²ç»æ’åºå¥½ï¼Œæ’åºå¥½çš„å°±å¯ä»¥è®¡ç®—å·®å€¼ã€‚æ‰€ä»¥å¯åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œæ‰¾å‡ºæœ€å¤§é—´è·ã€‚</p><h3 id="ä¸æ¨èæ–¹æ³•"><a href="#ä¸æ¨èæ–¹æ³•" class="headerlink" title="ä¸æ¨èæ–¹æ³•"></a>ä¸æ¨èæ–¹æ³•</h3><p>ä¸æ¨èç†ç”±ï¼Œåˆ©ç”¨sortè¿›è¡Œäº†ä¸€æ¬¡éå†ï¼Œç„¶ååˆç”¨éå†æ±‚æœ€å¤§é—´è·ï¼Œç”¨äº†ä¸¤æ¬¡éå†ï¼Œç›¸æ¯”ä¸Šé¢çš„æ¨èæ–¹æ³•çš„ä¸€æ¬¡éå†ï¼Œè¿™ç§æ–¹æ³•æ€§èƒ½ä¸å¥½ã€‚<br><figure class="image-box">                <img src="/image/calc/max.jpg" alt title class>                <p></p>            </figure></p><h3 id="éå†æ˜¯æ ¸å¿ƒ"><a href="#éå†æ˜¯æ ¸å¿ƒ" class="headerlink" title="éå†æ˜¯æ ¸å¿ƒ"></a>éå†æ˜¯æ ¸å¿ƒ</h3><p>æœ€å¤§é—´è·çš„è§£å†³ä¸»è¦å€ŸåŠ©éå†å®ç°ã€‚</p><h2 id="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ "><a href="#æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ " class="headerlink" title="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ "></a>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </h2><p><a href="https://leetcode-cn.com/problems/kth-largest-element-in-an-array/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“ æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </a><br>åœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚<br>ç¤ºä¾‹ 1:<br>è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2<br>è¾“å‡º: 5<br>ç¤ºä¾‹ 2:</p><p>è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4<br>è¾“å‡º: 4<br>è¯´æ˜:</p><p>å…ˆè¯´ä¸æ¨èæ–¹æ³•</p><h3 id="ä¸æ¨èæ–¹æ³•-1"><a href="#ä¸æ¨èæ–¹æ³•-1" class="headerlink" title="ä¸æ¨èæ–¹æ³•"></a>ä¸æ¨èæ–¹æ³•</h3><p>è¿™ç§æ–¹æ³•éå¸¸å®¹æ˜“ç†è§£ï¼Œä½†æ˜¯å´æœ‰æµªè´¹ä¹‹å«Œï¼Œå› ä¸ºæ ¹æœ¬ä¸éœ€è¦å¯¹æ•´ä¸ªæ•°ç»„å…ˆæ’åºå†æŸ¥æ‰¾ï¼Œå› ä¸ºä¸€æ—¦æ‰¾åˆ°ç¬¬kä¸ªå€¼ï¼Œå°±å¯ä»¥åœæ­¢ç¨‹åºäº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export default (arr, k) =&gt; &#123;</span><br><span class="line">  return arr.sort((a, b) =&gt; b - a)[k - 1]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ¨èæ–¹æ³•-1"><a href="#æ¨èæ–¹æ³•-1" class="headerlink" title="æ¨èæ–¹æ³•"></a>æ¨èæ–¹æ³•</h3><p>åˆ©ç”¨å†’æ³¡æ’åºæ¥åšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">export default (arr, k) =&gt; &#123;</span><br><span class="line">  let len = arr.length - 1</span><br><span class="line">  for (let i = len, tmp; i &gt; len - k; i--) &#123;</span><br><span class="line">    for (let j = 0; j &lt; i; j++) &#123;</span><br><span class="line">      if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">        tmp = arr[j]</span><br><span class="line">        arr[j] = arr[j + 1]</span><br><span class="line">        arr[j + 1] = tmp</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  // arr[len+1-k]</span><br><span class="line">  return arr[len - (k - 1)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°-1"><a href="#å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°-1" class="headerlink" title="å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°"></a>å€ŸåŠ©å†’æ³¡æˆ–é€‰æ‹©æ’åºå®ç°</h3><p>å¦‚ä¸Šä»£ç ï¼Œå› ä¸ºå†’æ³¡æˆ–é€‰æ‹©æ’åºæ˜¯ï¼Œæœ€å·¦æˆ–æœ€å³ç«¯å€¼å·²ç»æ’åºå¥½ï¼Œæ’åºåˆ°ç¬¬kä¸ªæ—¶ï¼Œé©¬ä¸Šåœæ­¢éå†ï¼Œæœ‰åŠ©äºæ€§èƒ½ã€‚</p><h2 id="å¿«é€Ÿæ’åº-æœ€å¥½çš„æ’åºæ–¹å¼"><a href="#å¿«é€Ÿæ’åº-æœ€å¥½çš„æ’åºæ–¹å¼" class="headerlink" title="å¿«é€Ÿæ’åº(æœ€å¥½çš„æ’åºæ–¹å¼)"></a>å¿«é€Ÿæ’åº(æœ€å¥½çš„æ’åºæ–¹å¼)</h2><h3 id="è¦ç‚¹åˆ†æ-1"><a href="#è¦ç‚¹åˆ†æ-1" class="headerlink" title="è¦ç‚¹åˆ†æ"></a>è¦ç‚¹åˆ†æ</h3><p>å¿«é€Ÿæ’åºï¼Œä»¥æ•°ç»„ä¸­é—´ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†ï¼Œå°äºçš„æ”¾åœ¨å·¦è¾¹ï¼Œå¤§äºçš„æ”¾åœ¨å³è¾¹ï¼Œç„¶åé€’å½’ï¼Œæ’åºå®Œæˆã€‚<br><figure class="image-box">                <img src="/image/calc/quick0.jpg" alt title class>                <p></p>            </figure><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function quickSort(ary)&#123;</span><br><span class="line">       if(ary.length&lt;=1)&#123;</span><br><span class="line">           return ary;</span><br><span class="line">       &#125;</span><br><span class="line">       var pointIndex = Math.floor(ary.length/2);</span><br><span class="line">       //ä»aryä¸­åˆ é™¤pointIndexï¼Œå¹¶ä¸”é€šè¿‡[0]å–å‡ºpointValueå€¼</span><br><span class="line">       var pointValue = ary.splice(pointIndex, 1)[0];</span><br><span class="line">       var left = [];</span><br><span class="line">       var right = [];</span><br><span class="line">       for (var i=0; i&lt;ary.length; i++)&#123;</span><br><span class="line">           var cur = ary[i];</span><br><span class="line">           cur &lt; pointValue ? left.push(cur) : right.push(cur);</span><br><span class="line">       &#125;</span><br><span class="line">       return quickSort(left).concat([pointValue],quickSort(right));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä¸­é—´å…ƒç´ ï¼Œå·¦å³ä¸¤è¾¹åˆ†ç»„"><a href="#ä¸­é—´å…ƒç´ ï¼Œå·¦å³ä¸¤è¾¹åˆ†ç»„" class="headerlink" title="ä¸­é—´å…ƒç´ ï¼Œå·¦å³ä¸¤è¾¹åˆ†ç»„"></a>ä¸­é—´å…ƒç´ ï¼Œå·¦å³ä¸¤è¾¹åˆ†ç»„</h3><p>å¿«é€Ÿæ’åºæ˜¯é€‰ä¸€ä¸ªæ•°ç»„ä¸­é—´å…ƒç´ å€¼ä¸ºå‡†ï¼Œå·¦å³åˆ†ä¸¤ç»„ï¼Œè¿™ç§æ“ä½œç±»ä¼¼æ˜“ç»å¤§è¡ç­®æ³•å åœçš„æ‰‹æ³•ã€‚<br>ä¸è¿‡å¿«é€Ÿæ’åºä¸æ˜¯ä¸€å®šè¦æ•°ç»„ä¸­é—´å€¼ï¼Œä»»æ„ä¸€ä¸ªå…ƒç´ ä¸ºå‡†éƒ½å¯ä»¥ï¼Œåªæ˜¯æ¨èä½¿ç”¨ä¸­é—´å…ƒç´ ã€‚</p><h3 id="æ¨èä½¿ç”¨ä¸­é—´å…ƒç´ -ä½†ä¹Ÿå¯ä½¿ç”¨å…¶ä»–å…ƒç´ "><a href="#æ¨èä½¿ç”¨ä¸­é—´å…ƒç´ -ä½†ä¹Ÿå¯ä½¿ç”¨å…¶ä»–å…ƒç´ " class="headerlink" title="æ¨èä½¿ç”¨ä¸­é—´å…ƒç´ ,ä½†ä¹Ÿå¯ä½¿ç”¨å…¶ä»–å…ƒç´ "></a>æ¨èä½¿ç”¨ä¸­é—´å…ƒç´ ,ä½†ä¹Ÿå¯ä½¿ç”¨å…¶ä»–å…ƒç´ </h3><p>è¿™é‡Œæœ‰ä¸€ä¸ªä»¥å…¶ä»–å…ƒç´ ä¸ºå‡†çš„å¿«é€Ÿæ’åºå†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function quickSort(arr) &#123;</span><br><span class="line">    if (arr.length &lt;= 1) &#123;</span><br><span class="line">        return arr;</span><br><span class="line">    &#125;</span><br><span class="line">    let leftArr = [];</span><br><span class="line">    let rightArr = [];</span><br><span class="line">    let q = arr[0];</span><br><span class="line">    for (let i = 1, l = arr.length; i &lt; l; i++) &#123;</span><br><span class="line">        if (arr[i] &gt; q) &#123;</span><br><span class="line">            rightArr.push(arr[i]);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            leftArr.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    return [].concat(quickSort(leftArr), [q], quickSort(rightArr));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="é€’å½’çš„ç»å…¸è¿ç”¨"><a href="#é€’å½’çš„ç»å…¸è¿ç”¨" class="headerlink" title="é€’å½’çš„ç»å…¸è¿ç”¨"></a>é€’å½’çš„ç»å…¸è¿ç”¨</h3><p>é€’å½’æ˜¯å¿«é€Ÿæ’åºçš„æ ¸å¿ƒï¼Œå¦‚æœæ— æ³•ç†è§£ï¼Œæš‚ä¸”å°±è®°ä½è¿™ç§åœºæ™¯è§£æ³•ï¼Œç”¨å¤šäº†ï¼Œè‡ªç„¶å°±æœ‰äº†è¿™ç§é€»è¾‘æ€ç»´äº†ã€‚</p><h3 id="é€’å½’æœ€åå‘ˆç°çš„ç”±æœ€åçš„è¾¹ç•Œå€¼å†³å®š"><a href="#é€’å½’æœ€åå‘ˆç°çš„ç”±æœ€åçš„è¾¹ç•Œå€¼å†³å®š" class="headerlink" title="é€’å½’æœ€åå‘ˆç°çš„ç”±æœ€åçš„è¾¹ç•Œå€¼å†³å®š"></a>é€’å½’æœ€åå‘ˆç°çš„ç”±æœ€åçš„è¾¹ç•Œå€¼å†³å®š</h3><p>æ¯”å¦‚ä¸Šé¢çš„ä»£ç :<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">ary</span>)</span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(ary.length&lt;=<span class="number">1</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> ary;<span class="comment">//è¿™æ˜¯è¾¹ç•Œå€¼</span></span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">var</span> pointIndex = <span class="built_in">Math</span>.floor(ary.length/<span class="number">2</span>);</span><br><span class="line">       <span class="comment">//ä»aryä¸­åˆ é™¤pointIndexï¼Œå¹¶ä¸”é€šè¿‡[0]å–å‡ºpointValueå€¼</span></span><br><span class="line">       <span class="keyword">var</span> pointValue = ary.splice(pointIndex, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line">       <span class="keyword">var</span> left = [];</span><br><span class="line">       <span class="keyword">var</span> right = [];</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;ary.length; i++)&#123;</span><br><span class="line">           <span class="keyword">var</span> cur = ary[i];</span><br><span class="line">           cur &lt; pointValue ? left.push(cur) : right.push(cur);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> quickSort(left).concat([pointValue],quickSort(right));<span class="comment">//return è¡¨è¾¾å¼</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p>æ— è®ºquickSort(left)é€’å½’äº†å¤šå°‘æ¬¡ï¼ŒquickSort(left)çš„å€¼ï¼Œè‚¯å®šæ˜¯ ary ï¼Œ<br>åŒç†ï¼ŒquickSort(right))çš„å€¼ï¼Œè‚¯å®šæ˜¯ aryã€‚</p><h3 id="é€’å½’ç»“æœæ˜¯è¾¹ç•Œå€¼ä¸returnè¡¨è¾¾å¼ä½œç”¨çš„ç»“æœ"><a href="#é€’å½’ç»“æœæ˜¯è¾¹ç•Œå€¼ä¸returnè¡¨è¾¾å¼ä½œç”¨çš„ç»“æœ" class="headerlink" title="é€’å½’ç»“æœæ˜¯è¾¹ç•Œå€¼ä¸returnè¡¨è¾¾å¼ä½œç”¨çš„ç»“æœ"></a>é€’å½’ç»“æœæ˜¯è¾¹ç•Œå€¼ä¸returnè¡¨è¾¾å¼ä½œç”¨çš„ç»“æœ</h3><p>å› æ­¤ï¼Œæ— è®ºæ€ä¹ˆæ ·ï¼ŒquickSort(ary)æ‰§è¡Œçš„ç»“æœï¼Œå¿…å°†å½¢å¼å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quickSort(left).concat([pointValue],quickSort(right))</span><br></pre></td></tr></table></figure></p><p>ç»è¿‡ä¸Šé¢çš„åˆ†æï¼ŒquickSort(left)ç­‰æ•ˆ aryï¼Œ<br>ä¸Šé¢ç­‰æ•ˆ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>].concat([<span class="number">1</span>],[<span class="number">1</span>])</span><br></pre></td></tr></table></figure></p><p>è¿™è¯´æ˜äº†ï¼Œé€’å½’æœ€åå‘ˆç°çš„ç”±æœ€åçš„è¾¹ç•Œå€¼å†³å®šï¼Œä¸”è¿”å›çš„ç»“æœ å°±æ˜¯è¾¹ç•Œå€¼ä¸returnè¡¨è¾¾å¼ä½œç”¨çš„ç»“æœã€‚</p><h2 id="æ’å…¥æ’åº-1"><a href="#æ’å…¥æ’åº-1" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><h3 id="é€šå¸¸æ–¹æ¡ˆ"><a href="#é€šå¸¸æ–¹æ¡ˆ" class="headerlink" title="é€šå¸¸æ–¹æ¡ˆ"></a>é€šå¸¸æ–¹æ¡ˆ</h3><h4 id="æ¦‚è¿°-5"><a href="#æ¦‚è¿°-5" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å°†åŸæ¥æ•°ç»„æ‰“æ•£é‡æ–°å°†æ‰€æœ‰å…ƒç´ ä¸€ä¸ªä¸ªæ”¾ç½®ï¼Œæ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºæ¥æ”¶æ”¾ç½®çš„å…ƒç´ ã€‚<br>å…ƒç´ åœ¨æ–°æ•°ç»„ä¸­ï¼ŒæŒ‰ç…§å¤§å°é¡ºåºæ’å…¥æ”¾ç½®ã€‚</p><figure class="image-box">                <img src="/image/calc/insort1.jpg" alt title class>                <p></p>            </figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">insertSort</span>(<span class="params">ary</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newAry=[];</span><br><span class="line">    newAry.push(ary[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>; i&lt;ary.length; i++)&#123;</span><br><span class="line">        <span class="keyword">var</span> cur =ary[i];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j = newAry.length - <span class="number">1</span>; j&gt;=<span class="number">0</span>;j--)&#123;</span><br><span class="line">            <span class="comment">//å…¶å®è¿™é‡Œå°±è€ƒè™‘ä¸¤ç§æƒ…å†µï¼Œå°†æœ€å¤§å€¼æ”¾å…¥å³ä¾§ï¼Œæˆ–è€…æ‰¾ä¸åˆ°æœ€å¤§å€¼ï¼Œå°±è¯´æ˜è¿™ä¸ªæ˜¯æœ€å°å€¼ï¼Œæ”¾å…¥å·¦ä¾§ï¼Œ</span></span><br><span class="line">            <span class="keyword">if</span>(cur&gt;newAry[j])&#123;</span><br><span class="line">                newAry.splice(j+<span class="number">1</span>,<span class="number">0</span>,cur);<span class="comment">//æœ€å¤§å€¼æ”¾åˆ°å³ä¾§</span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="comment">//j===0ï¼Œæ•°ç»„è¡¨ç¤ºéå†å®Œäº†ï¼Œè¯´æ˜æ­¤æ—¶æ•°ç»„çš„å…¨éƒ¨å…ƒç´ éƒ½å¤§äºcur</span></span><br><span class="line">                <span class="keyword">if</span>(j===<span class="number">0</span>)&#123;</span><br><span class="line">                  newAry.unshift(cur);<span class="comment">//æœ€å°å€¼æ”¾å…¥å·¦ä¾§</span></span><br><span class="line">                  <span class="keyword">break</span>;<span class="comment">//è¿™ä¸ªbreakå¯ä»¥ä¸ç”¨ï¼Œå†™å‡ºæ¥ï¼Œåªæ˜¯æ–¹ä¾¿ç†è§£ï¼Œå‘Šè¯‰ä½ ï¼Œå¦‚æœæ”¹å˜äº†newAryï¼Œé‚£ä¹ˆå°†ç»“æŸéå†</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newAry;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æé«˜"><a href="#æé«˜" class="headerlink" title="æé«˜"></a>æé«˜</h3><h4 id="å¯ä¸ç”¨äº†è§£"><a href="#å¯ä¸ç”¨äº†è§£" class="headerlink" title="å¯ä¸ç”¨äº†è§£"></a>å¯ä¸ç”¨äº†è§£</h4><p>ä¸‹é¢çš„æé«˜åšæ³•ï¼Œæ˜¯ç½‘ä¸Šæ¯”è¾ƒæµè¡Œçš„æ’å…¥æ’åºç®—æ³•ï¼Œæœ‰ç²¾åŠ›å¯ä»¥äº†è§£ä¸‹</p><h4 id="ä¸æ–°å»ºæ•°ç»„ç›´æ¥æ’åºçš„å®ç°"><a href="#ä¸æ–°å»ºæ•°ç»„ç›´æ¥æ’åºçš„å®ç°" class="headerlink" title="ä¸æ–°å»ºæ•°ç»„ç›´æ¥æ’åºçš„å®ç°"></a>ä¸æ–°å»ºæ•°ç»„ç›´æ¥æ’åºçš„å®ç°</h4><p>è¿™ç§æ–¹æ³•ä¸æ–¹æ¡ˆä¸€ä¸åŒçš„æ˜¯ï¼Œæ–¹æ¡ˆäºŒæ²¡æœ‰å•ç‹¬åˆ›å»ºæ–°æ•°ç»„æ¥å­˜æ”¾æ’åºå…ƒç´ ï¼Œè€Œæ˜¯ç›´æ¥åŸºäºåŸæ•°ç»„è¿›è¡Œæ”¹é€ ï¼Œç›¸å¯¹æ¥è¯´ç†è§£èµ·æ¥è¦éš¾ä¸€ç‚¹ã€‚<br>å…¶å®æ‰¾åˆ°çªé—¨åï¼Œç†è§£èµ·æ¥å°±å¥½äº†ï¼Œç†è§£æ’å…¥æ’åºï¼Œåªéœ€è¦ç†è§£<strong>å†…å±‚éå†å¦‚ä½•æ’åº</strong>ï¼Œå°±ç†è§£äº†æ•´ä¸ªæ’å…¥æ’åºçš„æ€æƒ³ï¼Œåé¢æœ‰è®²åˆ°ã€‚</p><figure class="image-box">                <img src="/image/calc/insort2.jpg" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> function insertSort(ary)&#123;</span><br><span class="line">    var key,j;</span><br><span class="line">    for(var i=1;i&lt;ary.length;i++)&#123;</span><br><span class="line">            key=ary[i];</span><br><span class="line">            for(var j=i-1;j&gt;-1;j--)&#123;</span><br><span class="line">                if(ary[j]&gt;key)&#123;</span><br><span class="line">                  å¦‚æœary[j]å¤§äºkeyï¼Œé‚£ä¹ˆå°†ary[j]å¾€å³æŒªä¸€æ­¥</span><br><span class="line">                    ary[j+1]=ary[j];</span><br><span class="line">                    if(j===0)&#123;</span><br><span class="line">                        //èƒ½èµ°åˆ°j===0è¯´æ˜ary[j]éƒ½å¤§äºkeyï¼ŒåŸæ¥çš„j æ•°ç»„å·²ç»æ•´ä½“å¾€å³æŒªä¸€æ­¥ï¼Œæ­¤æ—¶ary[0]å€¼å°±æ˜¯keyï¼›</span><br><span class="line">                        ary[0]=key;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    å¦‚æœary[j]å°äºkeyï¼Œé‚£ä¹ˆå°†keyç½®äºå…¶å³ä¾§</span><br><span class="line">                    ary[j+1]=key;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return ary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¤–å±‚éå†æä¾›å…ƒç´ ï¼Œå†…å±‚éå†è¿›è¡Œæ’åº"><a href="#å¤–å±‚éå†æä¾›å…ƒç´ ï¼Œå†…å±‚éå†è¿›è¡Œæ’åº" class="headerlink" title="å¤–å±‚éå†æä¾›å…ƒç´ ï¼Œå†…å±‚éå†è¿›è¡Œæ’åº"></a>å¤–å±‚éå†æä¾›å…ƒç´ ï¼Œå†…å±‚éå†è¿›è¡Œæ’åº</h4><h4 id="å†…å±‚æ’åºæŠ€å·§"><a href="#å†…å±‚æ’åºæŠ€å·§" class="headerlink" title="å†…å±‚æ’åºæŠ€å·§"></a>å†…å±‚æ’åºæŠ€å·§</h4><p>å¤–å±‚éå†æ¯æ¬¡ç»™å†…å±‚éå†è¾“å…¥ä¸€ä¸ªå…ƒç´ ï¼›<br>å†…å±‚éå† æ¥æ”¶è¿™ä¸ªå…ƒç´ åï¼Œå¦‚ä½•æ’åºï¼›<br>æ¥æ”¶ä¸€ä¸ªå…ƒç´ åŠ¿å¿…å¢åŠ é•¿åº¦ï¼›<br>æ‰€ä»¥é€šè¿‡j+1ï¼Œé€šè¿‡æ¯”è¾ƒï¼Œæ•°ç»„æ•´ä½“å¹³ç§»æ•´ä¸ªæ•°ç»„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">key=ary[i];</span><br><span class="line">            for(var j=i-1;j&gt;-1;j--)&#123;</span><br><span class="line">                if(ary[j]&gt;key)&#123;</span><br><span class="line">                  å¦‚æœary[j]å¤§äºkeyï¼Œé‚£ä¹ˆå°†ary[j]å¾€å³æŒªä¸€æ­¥</span><br><span class="line">                    ary[j+1]=ary[j];</span><br><span class="line">                    if(j===0)&#123;</span><br><span class="line">                        //èƒ½èµ°åˆ°j===0è¯´æ˜ary[j]éƒ½å¤§äºkeyï¼ŒåŸæ¥çš„j æ•°ç»„å·²ç»æ•´ä½“å¾€å³æŒªä¸€æ­¥ï¼Œæ­¤æ—¶ary[0]å€¼å°±æ˜¯keyï¼›</span><br><span class="line">                        ary[0]=key;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    å¦‚æœary[j]å°äºkeyï¼Œé‚£ä¹ˆå°†keyç½®äºå…¶å³ä¾§</span><br><span class="line">                    ary[j+1]=key;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></p><h4 id="éå†çš„ç»å…¸åº”ç”¨"><a href="#éå†çš„ç»å…¸åº”ç”¨" class="headerlink" title="éå†çš„ç»å…¸åº”ç”¨"></a>éå†çš„ç»å…¸åº”ç”¨</h4><p>æ­¤æ–¹æ¡ˆæ˜¯ç»å…¸çš„</p><h4 id="ç”¨whileæ¥æ”¹å†™æ–¹æ¡ˆäºŒ"><a href="#ç”¨whileæ¥æ”¹å†™æ–¹æ¡ˆäºŒ" class="headerlink" title="ç”¨whileæ¥æ”¹å†™æ–¹æ¡ˆäºŒ"></a>ç”¨whileæ¥æ”¹å†™æ–¹æ¡ˆäºŒ</h4><p>æ­¤å†™æ³•å…¶æ€æƒ³è·Ÿæ–¹æ¡ˆäºŒæ˜¯ä¸€æ ·çš„ã€‚<br>whileçš„å¥½å¤„æ˜¯ä»£ç ååˆ†ç®€æ´ï¼Œä½†æ˜¯æ­¤ä»£ç æå…·è¯¯å¯¼æ€§ï¼Œå•å‡­æ­¤ï¼Œå°±å¯ä»¥è®¤å®šè¿™ç§å†™æ³•æ˜¯ä¸æ¨èçš„ã€‚<br>è¿™é‡Œæœ‰ä¸€ä¸ªç†è§£è¯¯åŒºï¼Œa[0] å¯ä»¥è¿›å…¥ whileä½“å†…ï¼Œç­‰å‡ºæ¥çš„æ—¶å€™jå°±å˜æˆäº† -1 ï¼Œary[-1+1]å°±æ˜¯a[0]ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function insertSort1(ary)&#123;</span><br><span class="line">    var key,j;</span><br><span class="line">    for(var i=1;i&lt;ary.length;i++)&#123;</span><br><span class="line">            key=ary[i];</span><br><span class="line">            j=i-1;</span><br><span class="line">            while(j&gt;-1&amp;&amp;ary[j]&gt;key)&#123;</span><br><span class="line">                ary[j+1]=ary[j];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            ary[j+1]=key;</span><br><span class="line">        &#125;</span><br><span class="line">        return ary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å¤åŸipåœ°å€-1"><a href="#å¤åŸipåœ°å€-1" class="headerlink" title="å¤åŸipåœ°å€"></a>å¤åŸipåœ°å€</h2><h3 id="æ¦‚è¿°-6"><a href="#æ¦‚è¿°-6" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²ï¼Œå¤åŸå®ƒå¹¶è¿”å›æ‰€æœ‰å¯èƒ½çš„ IP åœ°å€æ ¼å¼ã€‚<br>ç¤ºä¾‹:<br>è¾“å…¥: â€œ25525511135â€<br>è¾“å‡º: [â€œ255.255.11.135â€, â€œ255.255.111.35â€]<br><a href="https://leetcode-cn.com/problems/restore-ip-addresses/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜ â€“  å¤åŸIPåœ°å€</a></p><p>ç”¨ç™½è¯è§£é‡ŠåŸé¢˜ï¼šç»™å‡ºä¸€ä¸²å­—ç¬¦ï¼Œå†™å‡ºå®ƒèƒ½ç»„æˆçš„æ‰€æœ‰çš„ip.</p><h3 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h3><p>ä»£ç å¦‚ä¸‹ï¼Œä¸ªäººè§‰å¾—ä»£ç ä¸å®¹æ˜“ç†è§£ï¼Œè¯·å…ˆçœ‹ä¸‹é¢å½“ä»£ç åˆ†æ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">function calc(str) &#123;</span><br><span class="line">      // ä¿å­˜æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„IPåœ°å€</span><br><span class="line">      let r = []</span><br><span class="line">      // åˆ†å››æ­¥é€’å½’å¤„ç†ipåˆ†æ®µ</span><br><span class="line">      let search = (cur, sub) =&gt; &#123;</span><br><span class="line">        // éæ³•è¾“å…¥è¿‡æ»¤ ipåœ°å€æœ€å¤šä¸è¶…è¿‡12ä¸ªå­—ç¬¦é•¿</span><br><span class="line">        if (sub.length &gt; 12) &#123;</span><br><span class="line">          return</span><br><span class="line">        &#125;</span><br><span class="line">        // è¾¹ç•Œæ¡ä»¶</span><br><span class="line">        if (cur.length === 4 &amp;&amp; cur.join(&apos;&apos;) === str) &#123;</span><br><span class="line">          r.push(cur.join(&apos;.&apos;))</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          // æ­£å¸¸çš„å¤„ç†è¿‡ç¨‹ </span><br><span class="line">          // Math.min(3, sub.length) iå¿…é¡»å°äºç­‰äº3</span><br><span class="line">          for (let i = 0, tmp; i &lt; Math.min(3, sub.length); i++) &#123;</span><br><span class="line">            tmp = sub.substr(0, i + 1)</span><br><span class="line">            if (tmp - 256 &lt; 0) &#123;</span><br><span class="line">              const newCur = cur.concat([tmp]);</span><br><span class="line">              const newSub = sub.substr(i + 1);</span><br><span class="line">              //å½“ newCurçš„æ•°ç»„å…ƒç´ è¶…è¿‡4æ—¶ï¼Œå°±ä¸æ˜¯ipåœ°å€äº†ï¼›</span><br><span class="line">              //å½“newCuræœ‰ä¸‰ä¸ªå…ƒç´ ï¼Œå‡†å¤‡è¡¥å……ç¬¬å››ä¸ªå…ƒç´ æ—¶ï¼Œå¦‚æœç¬¬å››ä¸ªå…ƒç´ å½“å­—ç¬¦é•¿åº¦å¤§äº3ä½ï¼Œå°±æ²¡æœ‰å¿…è¦å†ç»§ç»­ä¸‹å»</span><br><span class="line">              if(newCur.length &gt; 4 || (newCur.length === 3 &amp;&amp; newSub.length&gt;3))&#123;</span><br><span class="line">                continue</span><br><span class="line">              &#125;</span><br><span class="line">              search(newCur, newSub)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      search([], str)</span><br><span class="line">      return r</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h3 id="ä»£ç åˆ†æ"><a href="#ä»£ç åˆ†æ" class="headerlink" title="ä»£ç åˆ†æ"></a>ä»£ç åˆ†æ</h3><p>å¦‚ä¸‹å›¾ï¼Œ25525511135 è¿™æ ·ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¦ç»„æˆä¸€ä¸ªipæ—¶ï¼›<br>ipç”±å››ä¸ªä¸å¤§äº256çš„æ•°å­—æ’åˆ—ç»„æˆï¼›<br>ç¬¬ä¸€ä¸ªæ•°å­—å¯ä»¥æ˜¯ 2 25 255ï¼›<br>å½“ç¬¬ä¸€ä¸ªæ•°å­—ä¸º2æ—¶ å‰©ä¸‹çš„ä»£ç ä¸º 5525511135ï¼›<br>æ­¤æ—¶å®ƒçš„ç¬¬äºŒä¸ªæ•°å­—å¯ä»¥æ˜¯ 5 55 552(å¤§äº256ï¼Œä¸ç¬¦åˆè§„åˆ™)ï¼›<br>å½“ç¬¬äºŒä¸ªæ•°å­—ä¸º5æ—¶ï¼Œå‰©ä¸‹çš„ä»£ç ä¸º 525511135ï¼›<br>æ­¤æ—¶å®ƒç¬¬ä¸‰ä¸ªæ•°å­—å¯ä»¥æ˜¯ 5 52 525ï¼›<br>å½“ç¬¬ä¸‰ä¸ªæ•°å­—ä¸º5æ—¶ï¼Œ å‰©ä¸‹ä»£ç ä¸º25511136 ä¸ç¬¦åˆè§„åˆ™ï¼›<br>ä¾æ¬¡ç±»æ¨â€“é€’å½’ã€‚<br>å¦‚æœä½ è¿˜æ˜¯å¯¹åˆ†ææˆ–åˆ™ä¸Šé¢ä»£ç ä¸å¤ªç†è§£ï¼Œè¯·æ‹¿å‡ºä½ å¯¹çº¸å’Œç¬”ï¼Œå°†ä¸Šé¢ä»£ç åœ¨çº¸ä¸Šéå†å‡ æ¬¡ï¼Œå°±æ˜ç™½äº†ã€‚<br><figure class="image-box">                <img src="/image/calc/cur.jpg" alt title class>                <p></p>            </figure></p><h3 id="é€’å½’è®¾è®¡ä¸­-å¿…ä¸å¯å°‘çš„-è¾¹ç•Œæ¡ä»¶"><a href="#é€’å½’è®¾è®¡ä¸­-å¿…ä¸å¯å°‘çš„-è¾¹ç•Œæ¡ä»¶" class="headerlink" title="é€’å½’è®¾è®¡ä¸­ å¿…ä¸å¯å°‘çš„ è¾¹ç•Œæ¡ä»¶"></a>é€’å½’è®¾è®¡ä¸­ å¿…ä¸å¯å°‘çš„ è¾¹ç•Œæ¡ä»¶</h3><p>è¦å†™ä¸€ä¸ªé€’å½’ï¼Œå¿…é¡»è¦å†™ç»ˆæ­¢é€’å½’æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¾¹ç•Œæ¡ä»¶ã€‚ä¸Šé¢ä»£ç çš„è¾¹ç•Œæ¡ä»¶å°±æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (cur.length === 4 &amp;&amp; cur.join(&apos;&apos;) === str) &#123;</span><br><span class="line">         r.push(cur.join(&apos;.&apos;))</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h2 id="å¯¹ç§°äºŒå‰æ ‘-1"><a href="#å¯¹ç§°äºŒå‰æ ‘-1" class="headerlink" title="å¯¹ç§°äºŒå‰æ ‘"></a>å¯¹ç§°äºŒå‰æ ‘</h2><p> <a href="https://leetcode-cn.com/problems/symmetric-tree/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜â€“å¯¹ç§°äºŒå‰æ ‘</a></p><h3 id="åˆ›å»ºå¯¹ç§°äºŒå‰æ ‘"><a href="#åˆ›å»ºå¯¹ç§°äºŒå‰æ ‘" class="headerlink" title="åˆ›å»ºå¯¹ç§°äºŒå‰æ ‘"></a>åˆ›å»ºå¯¹ç§°äºŒå‰æ ‘</h3><h4 id="äºŒå‰æ ‘æ¨¡å‹å›¾"><a href="#äºŒå‰æ ‘æ¨¡å‹å›¾" class="headerlink" title="äºŒå‰æ ‘æ¨¡å‹å›¾"></a>äºŒå‰æ ‘æ¨¡å‹å›¾</h4> <figure class="image-box">                <img src="/image/calc/tree.jpg" alt title class>                <p></p>            </figure><h4 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h4><p> ä»¥ä¸‹æ˜¯åˆ›å»ºäºŒå‰æ ‘ä»£ç ï¼Œåé¢ä¼šé’ˆå¯¹ä»£ç ç–‘é—®è¿›è¡Œè§£ç­”</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"> // äºŒå‰æ ‘çš„èŠ‚ç‚¹</span><br><span class="line">class Node &#123;</span><br><span class="line">  constructor(val) &#123;</span><br><span class="line">    this.val = val</span><br><span class="line">    this.left = this.right = undefined</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Tree &#123;</span><br><span class="line">  constructor(data) &#123;</span><br><span class="line">    // ä¸´æ—¶å­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ–¹ä¾¿å¯»æ‰¾çˆ¶å­èŠ‚ç‚¹</span><br><span class="line">    let nodeList = []</span><br><span class="line">    // é¡¶èŠ‚ç‚¹</span><br><span class="line">    let root</span><br><span class="line">    for (let i = 0, len = data.length; i &lt; len; i++) &#123;</span><br><span class="line">      let node = new Node(data[i])</span><br><span class="line">      nodeList.push(node)</span><br><span class="line">      if (i &gt; 0) &#123;</span><br><span class="line">        // è®¡ç®—å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚</span><br><span class="line">        let n = Math.floor(Math.sqrt(i + 1))</span><br><span class="line">        // è®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„index</span><br><span class="line">        let q = Math.pow(2, n) - 1</span><br><span class="line">        // è®°å½•ä¸Šä¸€å±‚çš„èµ·å§‹nodelistçš„index</span><br><span class="line">        let p = Math.pow(2, n - 1) - 1</span><br><span class="line">        // æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚nodelistçš„index</span><br><span class="line">        let parent = nodeList[p + Math.floor((i - q) / 2)]</span><br><span class="line">        // å°†å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸€å±‚çš„çˆ¶èŠ‚ç‚¹åšå…³è”</span><br><span class="line">        if (parent.left) &#123;</span><br><span class="line">          parent.right = node</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          parent.left = node</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //åªæœ‰ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯èµ·å§‹èŠ‚ç‚¹ï¼Œ</span><br><span class="line">    root = nodeList.shift()</span><br><span class="line">    //å…¶ä»–å…ƒç´ å®Œæˆä½¿å‘½ï¼Œå¯ä»¥å»æ‰</span><br><span class="line">    nodeList.length = 0</span><br><span class="line">    return root</span><br><span class="line">  &#125;</span><br><span class="line">  //éªŒè¯äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°</span><br><span class="line">  static isSymmetry(root) &#123;</span><br><span class="line">    if (!root) &#123;</span><br><span class="line">      return true</span><br><span class="line">    &#125;</span><br><span class="line">    let walk = (left, right) =&gt; &#123;</span><br><span class="line">      if (!left &amp;&amp; !right) &#123;</span><br><span class="line">        return true</span><br><span class="line">      &#125;</span><br><span class="line">      if ((left &amp;&amp; !right) || (!left &amp;&amp; right) || (left.val !== right.val)) &#123;</span><br><span class="line">        return false</span><br><span class="line">      &#125;</span><br><span class="line">      return walk(left.left, right.right) &amp;&amp; walk(left.right, right.left)</span><br><span class="line">    &#125;</span><br><span class="line">    return walk(root.left, root.right)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">new Tree([1, 2, 2, 3, 4, 4, 3])</span><br><span class="line">//è¿”å›ï¼š</span><br><span class="line">const tree = &#123;</span><br><span class="line">  &quot;val&quot;: 1,</span><br><span class="line">  &quot;right&quot;: &#123;</span><br><span class="line">    &quot;val&quot;: 2,</span><br><span class="line">    &quot;right&quot;: &#123;</span><br><span class="line">      &quot;val&quot;: 3</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;left&quot;: &#123;</span><br><span class="line">      &quot;val&quot;: 4</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;left&quot;: &#123;</span><br><span class="line">    &quot;val&quot;: 2,</span><br><span class="line">    &quot;right&quot;: &#123;</span><br><span class="line">      &quot;val&quot;: 4</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;left&quot;: &#123;</span><br><span class="line">      &quot;val&quot;: 3</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚"><a href="#å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚" class="headerlink" title="å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚"></a>å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚</h4><p> å¦‚æœç†è§£ä¸äº†ï¼Œè¯·è®°ä½ï¼Œè¿™æ˜¯ä¸šå†…å¾—å‡ºçš„å…¬å¼ï¼Œæ— éœ€å¤ªè¾ƒçœŸç†è§£ï¼Œè®°ä½è¿™ä¸ªå®šç†å…¬å¼å°±è¡Œã€‚<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// è®¡ç®—å½“å‰èŠ‚ç‚¹å±äºé‚£ä¸€å±‚</span><br><span class="line"> let n = Math.floor(Math.sqrt(i + 1))</span><br></pre></td></tr></table></figure></p><h4 id="è®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„index"><a href="#è®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„index" class="headerlink" title="è®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„index"></a>è®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„index</h4><p> ç”±ä¸Šé¢çš„äºŒå‰æ ‘æ¨¡å‹å›¾çœ‹å‡ºï¼Œæ¯ä¸€å±‚çš„å…ƒç´ çš„èµ·å§‹ç‚¹èµ·å§‹å°±æ˜¯å‰é¢æ‰€æœ‰å±‚å…ƒç´ ä¸ªæ•°ä¹‹å’Œï¼Œ<br> è€Œè¿™ä¸ªå’Œçš„å€¼æ­£å¥½æ˜¯2çš„næ¬¡å¹‚ï¼Œæ‰€ä»¥æ¯ä¸€å±‚å¯¹åº”åˆ°nodelistæ•°ç»„çš„indexå°±æ˜¯å¦‚ä¸‹å…¬å¼ï¼š<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// è®°å½•å½“å‰å±‚çš„èµ·å§‹ nodelistçš„index</span><br><span class="line">  let q = Math.pow(2, n) - 1</span><br><span class="line">  // è®°å½•ä¸Šä¸€å±‚çš„èµ·å§‹ nodelistçš„index</span><br><span class="line">  let p = Math.pow(2, n - 1) - 1</span><br></pre></td></tr></table></figure></p><h4 id="æ¯ä¸€å±‚æœ‰å¤šå°‘ä¸ªå…ƒç´ "><a href="#æ¯ä¸€å±‚æœ‰å¤šå°‘ä¸ªå…ƒç´ " class="headerlink" title="æ¯ä¸€å±‚æœ‰å¤šå°‘ä¸ªå…ƒç´ "></a>æ¯ä¸€å±‚æœ‰å¤šå°‘ä¸ªå…ƒç´ </h4><p> å‚è€ƒä¸Šé¢ã€Šè®°å½•å½“å‰å±‚çš„èµ·å§‹nodelistçš„indexã€‹</p><h4 id="æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚nodelistçš„index"><a href="#æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚nodelistçš„index" class="headerlink" title="æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚nodelistçš„index"></a>æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚nodelistçš„index</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</span><br><span class="line">        let parent = nodeList[p + Math.floor((i - q) / 2)]</span><br></pre></td></tr></table></figure><p>æœ‰å‡ ä¸ªçŸ¥è¯†ç‚¹è¦äº†è§£ï¼š<br>å½“å‰å±‚çš„èµ·å§‹ç‚¹ Math.pow(2, n) - 1 ï¼Œä¾‹å¦‚ç¬¬äºŒå±‚ï¼Œèµ·å§‹ç‚¹æ˜¯3ï¼›<br>é‚£ä¹ˆè¿™ä¸ª3å°±æ˜¯ä¸Šé¢ä»£ç ä¸­çš„nodelistçš„indexï¼Œ<br>ç¬¬ä¸€å±‚ï¼Œèµ·å§‹ç‚¹æ˜¯0ï¼›é‚£ä¹ˆè¿™ä¸ª0å°±æ˜¯nodelistçš„indexï¼›<br>æ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ è¿›è¡Œforéå†æ—¶ï¼Œiå°±æ˜¯nodelistçš„ä¸‹æ ‡ï¼Œqæˆ–pä¹Ÿæ˜¯nodelistçš„ä¸‹æ ‡ã€‚<br>ç”±äºæ¯ä¸¤ä¸ªå­èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦é™¤ä»¥2</p><h4 id="æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½ç”Ÿæˆä¸€ä¸ªnodeèŠ‚ç‚¹"><a href="#æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½ç”Ÿæˆä¸€ä¸ªnodeèŠ‚ç‚¹" class="headerlink" title="æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½ç”Ÿæˆä¸€ä¸ªnodeèŠ‚ç‚¹"></a>æ•°ç»„æ¯ä¸ªå…ƒç´ éƒ½ç”Ÿæˆä¸€ä¸ªnodeèŠ‚ç‚¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> for (let i = 0, len = data.length; i &lt; len; i++) &#123;</span><br><span class="line">      let node = new Node(data[i])</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="åˆ©ç”¨nodeèŠ‚ç‚¹Objectæµ…æ‹·è´ç‰¹æ€§"><a href="#åˆ©ç”¨nodeèŠ‚ç‚¹Objectæµ…æ‹·è´ç‰¹æ€§" class="headerlink" title="åˆ©ç”¨nodeèŠ‚ç‚¹Objectæµ…æ‹·è´ç‰¹æ€§"></a>åˆ©ç”¨nodeèŠ‚ç‚¹Objectæµ…æ‹·è´ç‰¹æ€§</h4><p>åˆ©ç”¨è¿™ä¸€æµ…æ‹·è´ç‰¹ç‚¹ï¼Œè®©ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ æˆä¸ºæ‰€æœ‰æ•°ç»„å…¶ä»–å…ƒç´ å½¢æˆçš„èŠ‚ç‚¹çš„å…±åŒçˆ¶èŠ‚ç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let parent = nodeList[p + Math.floor((i - q) / 2)]</span><br><span class="line">       // å°†å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸€å±‚çš„çˆ¶èŠ‚ç‚¹åšå…³è”</span><br><span class="line">       if (parent.left) &#123;</span><br><span class="line">         parent.right = node</span><br><span class="line">       &#125; else &#123;</span><br><span class="line">         parent.left = node</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><h3 id="éªŒè¯äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°"><a href="#éªŒè¯äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°" class="headerlink" title="éªŒè¯äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°"></a>éªŒè¯äºŒå‰æ ‘æ˜¯å¦æ˜¯å¯¹ç§°</h3><h4 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h4><p>ä»£ç è§ä¸Šé¢ã€Šåˆ›å»ºäºŒå‰æ ‘ã€‹</p><h4 id="é€’å½’-1"><a href="#é€’å½’-1" class="headerlink" title="é€’å½’"></a>é€’å½’</h4><p>ä¸»è¦è¿ç”¨äº†é€’å½’åŸç†éªŒè¯äºŒå‰æ ‘æ˜¯å¦å¯¹ç§°ã€‚</p><h2 id="éªŒè¯äºŒå‰æœç´¢æ ‘-1"><a href="#éªŒè¯äºŒå‰æœç´¢æ ‘-1" class="headerlink" title="éªŒè¯äºŒå‰æœç´¢æ ‘"></a>éªŒè¯äºŒå‰æœç´¢æ ‘</h2><p><a href="https://leetcode-cn.com/problems/validate-binary-search-tree/" target="_blank" rel="noopener">åŠ›æ‰£åŸé¢˜â€“éªŒè¯äºŒå‰æœç´¢æ ‘</a></p><h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3> <figure class="image-box">                <img src="/image/calc/tree1.jpg" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">class Node &#123;</span><br><span class="line">  constructor (val) &#123;</span><br><span class="line">    this.val = val</span><br><span class="line">    this.left = this.right = undefined</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Tree &#123;</span><br><span class="line">  constructor (data) &#123;</span><br><span class="line">    let root = new Node(data.shift())</span><br><span class="line">    // éå†æ‰€æœ‰çš„æ•°æ®ï¼Œé€æ¸æ’å…¥åˆ°å½“å‰è¿™æ£µæœç´¢æ ‘ä¸­å»</span><br><span class="line">    data.forEach(item =&gt; &#123;</span><br><span class="line">      this.insert(root, item)</span><br><span class="line">    &#125;)</span><br><span class="line">    return root</span><br><span class="line">  &#125;</span><br><span class="line">  insert (node, data) &#123;</span><br><span class="line">    if (node.val &gt; data) &#123;</span><br><span class="line">      if (node.left === undefined) &#123;</span><br><span class="line">        node.left = new Node(data)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.insert(node.left, data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      if (node.right === undefined) &#123;</span><br><span class="line">        node.right = new Node(data)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.insert(node.right, data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  static walk (root) &#123;</span><br><span class="line">    if (!root.left &amp;&amp; !root.right) &#123;</span><br><span class="line">      return true</span><br><span class="line">    &#125; else if ((root.left &amp;&amp; root.val &lt; root.left.val) || (root.right &amp;&amp; root.val &gt; root.right.val)) &#123;</span><br><span class="line">      return false</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      return Tree.walk(root.left) &amp;&amp; Tree.walk(root.right)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> new Tree([2, 1, 3,6,8,9])</span><br></pre></td></tr></table></figure><h3 id="å°å·¦å¤§å³"><a href="#å°å·¦å¤§å³" class="headerlink" title="å°å·¦å¤§å³"></a>å°å·¦å¤§å³</h3><p>æœ¬æœç´¢äºŒå‰æ ‘æŒ‰ç…§å·¦å¤§å³å°æ’åˆ—ã€‚</p><h3 id="é€’å½’-2"><a href="#é€’å½’-2" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ— è®ºç”ŸæˆäºŒå‰æ ‘ä¸éªŒè¯äºŒå‰æ ‘éƒ½ä½¿ç”¨äº†äºŒå‰æ ‘ï¼Œæ³¨æ„é€’å½’ä¸­ è¾¹ç•Œå€¼å¤„ç†æŠ€å·§ã€‚</p><h2 id="é€’å½’-3"><a href="#é€’å½’-3" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><h3 id="é€’å½’çš„ç»“æ„"><a href="#é€’å½’çš„ç»“æ„" class="headerlink" title="é€’å½’çš„ç»“æ„"></a>é€’å½’çš„ç»“æ„</h3><p>æ¯ä¸ªé€’å½’ç”±ä¸€ä¸ªé€’å½’ä½“ä»¥åŠä¸€ä¸ªè¾¹ç•Œå€¼ç»„æˆã€‚ä¸”å¿…é¡»æœ‰ä¸€ä¸ªè¾¹ç•Œå€¼ã€‚</p><h3 id="é˜¶ä¹˜"><a href="#é˜¶ä¹˜" class="headerlink" title="é˜¶ä¹˜"></a>é˜¶ä¹˜</h3> <figure class="image-box">                <img src="/image/calc/recursion.jpg" alt title class>                <p></p>            </figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function foctorial(n)&#123;</span><br><span class="line">  if(n === 1 || n === 0)&#123;</span><br><span class="line">    return 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return n * foctorial(n-1)</span><br><span class="line">&#125;</span><br><span class="line">foctorial(5)//120</span><br></pre></td></tr></table></figure><h4 id="è¾¹ç•Œå€¼-åˆç§°åŸºçº¿æ¡ä»¶"><a href="#è¾¹ç•Œå€¼-åˆç§°åŸºçº¿æ¡ä»¶" class="headerlink" title="è¾¹ç•Œå€¼(åˆç§°åŸºçº¿æ¡ä»¶)"></a>è¾¹ç•Œå€¼(åˆç§°åŸºçº¿æ¡ä»¶)</h4><p>è¾¹ç•Œå€¼ä¸åŸºçº¿æ¡ä»¶æ˜¯ä¸€ä¸ªé“ç†ï¼Œå³ä¸€ä¸ªåœæ­¢ç‚¹ã€‚<br>å¦‚ä¸‹ï¼Œé€’å½’ä¸­ï¼Œå¾ˆå¤šæœ€ç»ˆéƒ½æ˜¯é€šè¿‡è¾¹ç•Œå€¼æ¥è®¡ç®—ï¼Œä¸”ç»ˆæ­¢é€’å½’ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æˆ‘ä»¬åªéœ€å†™å‡ºè¾¹ç•Œï¼ˆ1ï¼‰çš„å®ç°å°±è¡Œã€‚</span><br><span class="line">foctorial(5) = 5*4*3*2*(1)ï¼›</span><br></pre></td></tr></table></figure></p><p>è¾¹ç•Œå€¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if(n === 1 || n === 0)&#123;</span><br><span class="line">   return 1;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><h3 id="æ–æ³¢é‚£å¥‘æ•°-1"><a href="#æ–æ³¢é‚£å¥‘æ•°-1" class="headerlink" title="æ–æ³¢é‚£å¥‘æ•°"></a>æ–æ³¢é‚£å¥‘æ•°</h3><h4 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h4><p>æ–æ³¢é‚£å¥‘æ•°åˆ— æ˜¯ä¸€ä¸ªç”± 0, 1, 1, 2, 3, 5, 8, 13, 21 ç­‰ç»„æˆç­‰åºåˆ—ã€‚æ•°2ç”±1åŠ 1å¾—åˆ°ï¼Œæ•°3ç”±2åŠ 1å¾—åˆ°â€¦ã€‚<br>æ–æ³¢é‚£å¥‘æ•°åˆ—æœ‰ä¸ªå®šä¹‰ï¼š</p><ul><li>ä½ç½®0çš„æ•°æ˜¯0ï¼›</li><li>1å’Œ2çš„æ•°æ˜¯1ï¼›</li><li>n(n&gt;2)çš„æ•°æ˜¯n-1ã€ n-2 ä¹‹å’Œã€‚<h4 id="å®ç°ä¸€ï¼ˆå¸¸è§„å®ç°ï¼‰"><a href="#å®ç°ä¸€ï¼ˆå¸¸è§„å®ç°ï¼‰" class="headerlink" title="å®ç°ä¸€ï¼ˆå¸¸è§„å®ç°ï¼‰"></a>å®ç°ä¸€ï¼ˆå¸¸è§„å®ç°ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function fn(n)&#123;</span><br><span class="line">     if(n&lt;1) return 0;</span><br><span class="line">     if(n&lt;=2) return 1;</span><br><span class="line">     let prepreStartval = 0;</span><br><span class="line">     let preStartval = 1;</span><br><span class="line">     //å‰ä¸€ä¸ªçš„å‰ä¸€ä¸ªä½ç½®çš„å€¼</span><br><span class="line">     let prepre=prepreStartval;</span><br><span class="line">     //å‰ä¸€ä¸ªä½ç½®çš„å€¼</span><br><span class="line">     let pre=preStartval;</span><br><span class="line">     //æœ¬ä½ç½®çš„å€¼</span><br><span class="line">     let item= &apos;&apos;;</span><br><span class="line">     for(let i=2;i&lt;=n;i++)&#123;</span><br><span class="line">         //æœ¬ä½ç½®çš„å€¼ = å‰ä¸€ä¸ªä½ç½®å€¼ + å‰ä¸€ä¸ªçš„å‰ä¸€ä¸ªä½ç½®å€¼</span><br><span class="line">         item=pre+prepre;</span><br><span class="line">         //æ–°çš„å‰ä¸€ä¸ªçš„å‰ä¸€ä¸ªçš„å€¼ å˜æˆä¸Šä¸ªä½ç½®çš„å‰ä¸€ä¸ªä½ç½®çš„å€¼</span><br><span class="line">         prepre=pre;</span><br><span class="line">         //æ–°çš„å‰ä¸€ä¸ªçš„å€¼ å˜æˆä¸Šä¸€ä¸ªä½ç½®çš„å€¼</span><br><span class="line">         pre=item;</span><br><span class="line">     &#125;</span><br><span class="line">     return item;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="å®ç°äºŒ-ï¼ˆé€’å½’å®ç°ï¼‰"><a href="#å®ç°äºŒ-ï¼ˆé€’å½’å®ç°ï¼‰" class="headerlink" title="å®ç°äºŒ ï¼ˆé€’å½’å®ç°ï¼‰"></a>å®ç°äºŒ ï¼ˆé€’å½’å®ç°ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function fn(n)&#123;</span><br><span class="line">    if(n&lt;1) return 0;</span><br><span class="line">    if(n&lt;=2) return 1;</span><br><span class="line">    return fn(n-1) + fn(n-2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…åˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> function calculate(n, fn)&#123;</span><br><span class="line">    var arr=[];</span><br><span class="line">    for(var j=0; j&lt;n; j++)&#123; </span><br><span class="line">        arr[j]=fn(j) </span><br><span class="line">    &#125; </span><br><span class="line">    return arr; </span><br><span class="line">&#125;</span><br><span class="line">calculate(8, fn)  //Â [0, 1, 1, 2, 3, 5, 8, 13]</span><br></pre></td></tr></table></figure></p><h4 id="å®ç°ä¸‰-ï¼ˆè®°å¿†åŒ–ä¼˜åŒ–ï¼‰"><a href="#å®ç°ä¸‰-ï¼ˆè®°å¿†åŒ–ä¼˜åŒ–ï¼‰" class="headerlink" title="å®ç°ä¸‰ ï¼ˆè®°å¿†åŒ–ä¼˜åŒ–ï¼‰"></a>å®ç°ä¸‰ ï¼ˆè®°å¿†åŒ–ä¼˜åŒ–ï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function calcFactory()&#123;</span><br><span class="line">    const memo = [0, 1];</span><br><span class="line">    const fn=(n)=&gt;&#123;</span><br><span class="line">        //memo[n]===0  0æ˜¯éï¼Œä½†æœ¬ä¾‹ä¸­æ˜¯ä¸€ä¸ªå€¼ï¼›</span><br><span class="line">        if(memo[n] || memo[n]===0) return memo[n];</span><br><span class="line">        return memo[n] = fn(n-1) + fn(n-2);</span><br><span class="line">    &#125;</span><br><span class="line">    return fn;</span><br><span class="line">&#125;</span><br><span class="line">var calc = calcFactory()ï¼›</span><br><span class="line">calc(8) //13;</span><br></pre></td></tr></table></figure><h3 id="è¾¹ç•Œå€¼-ä¸-æœ€å°åŒ–åˆ†æ"><a href="#è¾¹ç•Œå€¼-ä¸-æœ€å°åŒ–åˆ†æ" class="headerlink" title="è¾¹ç•Œå€¼ ä¸ æœ€å°åŒ–åˆ†æ"></a>è¾¹ç•Œå€¼ ä¸ æœ€å°åŒ–åˆ†æ</h3><p>å¾ˆå¤šé€’å½’é—®é¢˜æˆ–å…¶ä»–ç®—æ³•é—®é¢˜ï¼Œä»–ä»¬å‡ ä¹éƒ½æ˜¯ç”±æœ€å°å€¼æˆ–è¾¹ç•Œå€¼é‡å¤æˆ–è®¡ç®—è€Œæ¥ï¼Œåœ¨è§£å†³é—®é¢˜æ—¶ï¼Œå¯ä»¥å°†é—®é¢˜ä½¿ç”¨è¾¹ç•Œå€¼æœ€å°åŒ–åˆ†æ</p><h3 id="é€’å½’è®°å¿†åŒ–æŠ€å·§"><a href="#é€’å½’è®°å¿†åŒ–æŠ€å·§" class="headerlink" title="é€’å½’è®°å¿†åŒ–æŠ€å·§"></a>é€’å½’è®°å¿†åŒ–æŠ€å·§</h3><p>å‚è€ƒã€Šæ–æ³¢é‚£å¥‘æ•°  â€“  å®ç°ä¸‰ ï¼ˆè®°å¿†ä¼˜åŒ–ï¼‰ã€‹</p><h3 id="é€’å½’ä¸while"><a href="#é€’å½’ä¸while" class="headerlink" title="é€’å½’ä¸while"></a>é€’å½’ä¸while</h3><p>æœ‰æ—¶å€™é€’å½’èƒ½å®ç°çš„ï¼Œé€šè¿‡whileä¹Ÿèƒ½å®ç°ï¼Œwhileå…·æœ‰ä¸€äº›é€’å½’çš„è´¨èƒ½ã€‚<br>å‚è€ƒã€Šå¡ç‰Œåˆ†ç»„ â€” while å®ç° é€’å½’æ•ˆæœã€‹</p><h3 id="é€’å½’ç»å…¸åº”ç”¨ç¤ºä¾‹"><a href="#é€’å½’ç»å…¸åº”ç”¨ç¤ºä¾‹" class="headerlink" title="é€’å½’ç»å…¸åº”ç”¨ç¤ºä¾‹"></a>é€’å½’ç»å…¸åº”ç”¨ç¤ºä¾‹</h3><h4 id="å¿«é€Ÿæ’åº-1"><a href="#å¿«é€Ÿæ’åº-1" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h4><p>å‚è€ƒã€Šå¿«é€Ÿæ’åºã€‹</p><h4 id="ç”µè¯å·ç -2"><a href="#ç”µè¯å·ç -2" class="headerlink" title="ç”µè¯å·ç "></a>ç”µè¯å·ç </h4><p>å‚è€ƒã€Šç”µè¯å·ç ã€‹</p><h4 id="å¡ç‰Œåˆ†ç»„-2"><a href="#å¡ç‰Œåˆ†ç»„-2" class="headerlink" title="å¡ç‰Œåˆ†ç»„"></a>å¡ç‰Œåˆ†ç»„</h4><p>å‚è€ƒã€Šå¡ç‰Œåˆ†ç»„ã€‹</p><h4 id="å¤åŸipåœ°å€-2"><a href="#å¤åŸipåœ°å€-2" class="headerlink" title="å¤åŸipåœ°å€"></a>å¤åŸipåœ°å€</h4><p>å‚è€ƒã€Šå¤åŸipåœ°å€ã€‹</p><h2 id="éå†"><a href="#éå†" class="headerlink" title="éå†"></a>éå†</h2><h3 id="éå†ç±»å‹"><a href="#éå†ç±»å‹" class="headerlink" title="éå†ç±»å‹"></a>éå†ç±»å‹</h3><h4 id="å¤šå…ƒéå†"><a href="#å¤šå…ƒéå†" class="headerlink" title="å¤šå…ƒéå†"></a>å¤šå…ƒéå†</h4><p>ä¸Šé¢çš„ ç§èŠ±é—®é¢˜ï¼Œå†’æ³¡æ’åºï¼Œ é€‰æ‹©æ’åºï¼Œéƒ½æ˜¯å¤šå…ƒéå†çš„è¿ç”¨ï¼›</p><h4 id="å¤šå±‚éå†"><a href="#å¤šå±‚éå†" class="headerlink" title="å¤šå±‚éå†"></a>å¤šå±‚éå†</h4><p>å†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åº æ˜¯å¤šå±‚éå†çš„è¿ç”¨ï¼›</p><h4 id="è·³çº§-å¿½ç•¥-éå†"><a href="#è·³çº§-å¿½ç•¥-éå†" class="headerlink" title="è·³çº§(å¿½ç•¥)éå†"></a>è·³çº§(å¿½ç•¥)éå†</h4><p>å‚è€ƒ ã€Šç§èŠ±é—®é¢˜ â€” éå†ä½“ç”¨ i++ è·³çº§å¿½ç•¥éå†ã€‹</p><h4 id="å¤šå±‚éå†-å†…å±‚éå†j-1"><a href="#å¤šå±‚éå†-å†…å±‚éå†j-1" class="headerlink" title="å¤šå±‚éå† å†…å±‚éå†j+1"></a>å¤šå±‚éå† å†…å±‚éå†j+1</h4><p>å†…å¤–ä¸¤å±‚éå†ï¼Œå†…å±‚éå†é€šè¿‡j+1,è…¾å‡ºå¤šä¸€ä¸ªä½ç½®æ¥æ¥æ”¶ä¸€ä¸ªå…ƒç´ ï¼Œè¿›è¡Œæ’åºçš„æŠ€å·§ï¼Œå‚è€ƒ<br>ã€Šæ’å…¥æ’åº â€” æ–¹æ¡ˆäºŒ (æ¨è)ã€‹</p><h3 id="ç»å…¸åº”ç”¨ç¤ºä¾‹"><a href="#ç»å…¸åº”ç”¨ç¤ºä¾‹" class="headerlink" title="ç»å…¸åº”ç”¨ç¤ºä¾‹"></a>ç»å…¸åº”ç”¨ç¤ºä¾‹</h3><h4 id="æ’å…¥æ’åº-ï¼ˆéå¸¸ç»å…¸ï¼‰"><a href="#æ’å…¥æ’åº-ï¼ˆéå¸¸ç»å…¸ï¼‰" class="headerlink" title="æ’å…¥æ’åº ï¼ˆéå¸¸ç»å…¸ï¼‰"></a>æ’å…¥æ’åº ï¼ˆéå¸¸ç»å…¸ï¼‰</h4><p>æ˜¯éå¸¸ç»å…¸çš„æ’åºæ–¹å¼ï¼Œå°¤å…¶æ˜¯æ–¹æ¡ˆäºŒã€‚<br>æ’å…¥æ’åºä¸å†’æ³¡æ’åºå½¢æˆäº†ä¸¤ç§æ€è·¯çš„éå†æ€æƒ³ï¼›<br>æ’å…¥ç”±å†…éƒ¨éå†æ’åºï¼Œå†’æ³¡ç”±å¤–éƒ¨éå†æ’åºã€‚</p><h4 id="ç§èŠ±é—®é¢˜-2"><a href="#ç§èŠ±é—®é¢˜-2" class="headerlink" title="ç§èŠ±é—®é¢˜"></a>ç§èŠ±é—®é¢˜</h4><p>è¿™é‡Œæ˜¯éå†çš„ç»å…¸è¿ç”¨ï¼Œå‚è€ƒã€Šç§èŠ±é—®é¢˜ã€‹</p><h4 id="å†’æ³¡æ’åº-2"><a href="#å†’æ³¡æ’åº-2" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h4><p>å‚è€ƒã€Šå†’æ³¡æ’åºã€‹</p><h4 id="é€‰æ‹©æ’åº-2"><a href="#é€‰æ‹©æ’åº-2" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h4><p>å‚è€ƒã€Šé€‰æ‹©æ’åºã€‹</p><h4 id="æœ€å¤§é—´è·-1"><a href="#æœ€å¤§é—´è·-1" class="headerlink" title="æœ€å¤§é—´è·"></a>æœ€å¤§é—´è·</h4><p>å‚è€ƒ ã€Šæœ€å¤§é—´è·ã€‹</p><h4 id="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ -1"><a href="#æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ -1" class="headerlink" title="æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ "></a>æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ </h4><p>å‚è€ƒ ã€Šæ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ã€‹</p><h2 id="å¸¸ç”¨ç®—æ³•åœºæ™¯"><a href="#å¸¸ç”¨ç®—æ³•åœºæ™¯" class="headerlink" title="å¸¸ç”¨ç®—æ³•åœºæ™¯"></a>å¸¸ç”¨ç®—æ³•åœºæ™¯</h2><h3 id="æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ-1"><a href="#æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ-1" class="headerlink" title="æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ"></a>æ•°ç»„å‰åä¸¤ä¸¤æ¯”è¾ƒ</h3><h4 id="æ¦‚è¿°-7"><a href="#æ¦‚è¿°-7" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>å‚è€ƒï¼šã€Šç”µè¯å·ç ã€‹ä¸­çš„æºç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const cur = (strarr)=&gt;&#123;</span><br><span class="line">    //ç¬¬ä¸€æ¬¡strarr[0]æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ ä»¥åstrarr[0]ç»è¿‡spliceåï¼Œéƒ½æ˜¯æ•°ç»„</span><br><span class="line">   const one = typeof strarr[0] === &apos;string&apos; ? strarr[0].split(&apos;&apos;) : strarr[0];</span><br><span class="line">   const two = strarr[1].split(&apos;&apos;);</span><br><span class="line">   const newItem0 = combile(one, two);</span><br><span class="line">   strarr.splice(0,2,newItem0);</span><br><span class="line">      if(strarr.length&lt;2)&#123;</span><br><span class="line">          return strarr[0];</span><br><span class="line">      &#125;</span><br><span class="line">    return cur(strarr)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>æ›´å¤šå‚è€ƒ ã€Šå¡ç‰Œåˆ†ç»„ã€‹</p><h4 id="æ¯æ¬¡åªæ¯”è¾ƒæ•°ç»„çš„ç¬¬ä¸€å’Œç¬¬äºŒé¡¹"><a href="#æ¯æ¬¡åªæ¯”è¾ƒæ•°ç»„çš„ç¬¬ä¸€å’Œç¬¬äºŒé¡¹" class="headerlink" title="æ¯æ¬¡åªæ¯”è¾ƒæ•°ç»„çš„ç¬¬ä¸€å’Œç¬¬äºŒé¡¹"></a>æ¯æ¬¡åªæ¯”è¾ƒæ•°ç»„çš„ç¬¬ä¸€å’Œç¬¬äºŒé¡¹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const one = typeof strarr[0] === &apos;string&apos; ? strarr[0].split(&apos;&apos;) : strarr[0];</span><br><span class="line">const two = strarr[1].split(&apos;&apos;);</span><br><span class="line">const newItem0 = combile(one, two);</span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤ç¬¬ä¸€å’Œç¬¬äºŒé¡¹ï¼Œå°†æ¯”è¾ƒç»“æœé‡æ–°ç½®ä¸ºç¬¬ä¸€é¡¹"><a href="#åˆ é™¤ç¬¬ä¸€å’Œç¬¬äºŒé¡¹ï¼Œå°†æ¯”è¾ƒç»“æœé‡æ–°ç½®ä¸ºç¬¬ä¸€é¡¹" class="headerlink" title="åˆ é™¤ç¬¬ä¸€å’Œç¬¬äºŒé¡¹ï¼Œå°†æ¯”è¾ƒç»“æœé‡æ–°ç½®ä¸ºç¬¬ä¸€é¡¹"></a>åˆ é™¤ç¬¬ä¸€å’Œç¬¬äºŒé¡¹ï¼Œå°†æ¯”è¾ƒç»“æœé‡æ–°ç½®ä¸ºç¬¬ä¸€é¡¹</h4><p>å¦‚ä¸Šä»£ç ï¼Œæ¯æ¬¡æ¯”è¾ƒå®Œç¬¬ä¸€å’Œç¬¬äºŒé¡¹åï¼Œåˆ é™¤ä»–ä»¬ï¼Œå¹¶å°†æ¯”è¾ƒç»“æœç½®ä¸ºç¬¬ä¸€é¡¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strarr.splice(0,2,newItem0);</span><br></pre></td></tr></table></figure></p><h4 id="é€’å½’æ˜¯æ ¸å¿ƒ"><a href="#é€’å½’æ˜¯æ ¸å¿ƒ" class="headerlink" title="é€’å½’æ˜¯æ ¸å¿ƒ"></a>é€’å½’æ˜¯æ ¸å¿ƒ</h4><p>è§ä»£ç </p><h4 id="è¾¹ç•Œå€¼ï¼šstrarr-length-lt-2"><a href="#è¾¹ç•Œå€¼ï¼šstrarr-length-lt-2" class="headerlink" title="è¾¹ç•Œå€¼ï¼šstrarr.length&lt;2"></a>è¾¹ç•Œå€¼ï¼šstrarr.length&lt;2</h4><p>ä¸¤ä¸¤æ¯”è¾ƒåˆ°æœ€åï¼Œæ•°ç»„åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶é€’å½’åœæ­¢ï¼Œæ‰€ä»¥è¾¹ç•Œå€¼ï¼šstrarr.length&lt;2ã€‚</p><h3 id="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°"><a href="#æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°" class="headerlink" title="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°"></a>æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°</h3><h4 id="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•-æ¨è-â€“matchæ­£åˆ™-1"><a href="#æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•-æ¨è-â€“matchæ­£åˆ™-1" class="headerlink" title="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•(æ¨è)â€“matchæ­£åˆ™"></a>æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•(æ¨è)â€“matchæ­£åˆ™</h4><p>è¯¦ç»†å‚è€ƒ ã€Šå¡ç‰Œåˆ†ç»„ã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆ†ç»„(å•å¼ æˆ–è€…å¤šå¼ )  \1 åœ¨æ­£åˆ™ä¸­è¡¨ç¤ºè¿ç»­ä¸€æ ·çš„åŒ¹é…</span><br><span class="line"> let group = str.match(/(\d)\1+|\d/g)</span><br></pre></td></tr></table></figure></p><h4 id="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object-keyæ–¹å¼-1"><a href="#æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object-keyæ–¹å¼-1" class="headerlink" title="æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object keyæ–¹å¼"></a>æ‰¾å‡ºå…ƒç´ å‡ºç°æ¬¡æ•°çš„æ–¹æ³•â€“object keyæ–¹å¼</h4><p>è¯¦ç»†å‚è€ƒ ã€Šå¡ç‰Œåˆ†ç»„ã€‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const hash = deck.reduce((pre, num) =&gt; &#123;    //ç»Ÿè®¡å‡ºæ¯ç§æ•°å­—çš„æ•°ç›®</span><br><span class="line">  if(!pre[num]) &#123;</span><br><span class="line">    pre[num] = 1</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    pre[num]++</span><br><span class="line">  &#125;</span><br><span class="line">  return pre</span><br><span class="line">&#125;, &#123;&#125;)</span><br></pre></td></tr></table></figure></p><h2 id="æ—¶é—´ï¼ç©ºé—´å¤æ‚åº¦"><a href="#æ—¶é—´ï¼ç©ºé—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´ï¼ç©ºé—´å¤æ‚åº¦"></a>æ—¶é—´ï¼ç©ºé—´å¤æ‚åº¦</h2><h3 id="æ¦‚è¿°-8"><a href="#æ¦‚è¿°-8" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ç®€è¨€ä¹‹ï¼Œ<br>æ—¶é—´å¤æ‚åº¦æ˜¯å¯¹è¿è¡Œæ¬¡æ•°çš„æè¿°ï¼Œå› ä¸ºè¿è¡Œæ¬¡æ•°çš„å¤šå°‘å†³å®šäº†èŠ±å¤šå°‘æ—¶é—´ã€‚<br>ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹è¿è¡Œå†…å­˜çš„æè¿°ï¼Œåœ¨æ’åºæ—¶å®šä¹‰äº†å¤šå°‘å˜é‡ï¼Œå°±ä¼šæ¶ˆè€—å¤šå°‘å†…å­˜ã€‚<br>ä¸€èˆ¬å…³æ³¨å¥½æ—¶é—´å¤æ‚åº¦å³å¯ã€‚<br><figure class="image-box">                <img src="/image/calc/time.jpg" alt title class>                <p></p>            </figure></p><h3 id="æ—¶é—´å¤æ‚åº¦"><a href="#æ—¶é—´å¤æ‚åº¦" class="headerlink" title="æ—¶é—´å¤æ‚åº¦"></a>æ—¶é—´å¤æ‚åº¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//æ—¶é—´å¤æ‚åº¦ä¸º O(9)</span><br><span class="line">for (let j = 0; j &lt; 9; j++) &#123;</span><br><span class="line">     console.log(j)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æ—¶é—´å¤æ‚åº¦ä¸º O(9*9)</span><br><span class="line">  for (let i = 9; i &gt; 0; i--) &#123;</span><br><span class="line">        for (let j = 0; j &lt; 9; j++) &#123;</span><br><span class="line">             console.log(j)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://coding.imooc.com/class/chapter/315.html#Anchor" target="_blank" rel="noopener">JavaScriptç‰ˆ æ•°æ®ç»“æ„ä¸ç®—æ³•</a><br><a href="https://v.youku.com/v_show/id_XMjQ4MjMxMDIwNA==.html?spm=a2h0j.11185381.listitem_page1.5!18~A" target="_blank" rel="noopener">ç å³°æ•™è‚² â€“jsæ’åº</a><br><a href="http://www.ituring.com.cn/book/2653" target="_blank" rel="noopener">å­¦ä¹ JavaScriptæ•°æ®ç»“æ„ä¸ç®—æ³•ï¼ˆç¬¬3ç‰ˆï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> js </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
            <tag> æ’åº </tag>
            
            <tag> é€’å½’ </tag>
            
            <tag> äºŒå‰æ ‘ </tag>
            
            <tag> æ•°ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpackç¬”è®°</title>
      <link href="/2019/01/01/webpack/"/>
      <url>/2019/01/01/webpack/</url>
      
        <content type="html"><![CDATA[<h2 id="webpackå¸¸ç”¨çŸ¥è¯†-ä¸Š"><a href="#webpackå¸¸ç”¨çŸ¥è¯†-ä¸Š" class="headerlink" title="webpackå¸¸ç”¨çŸ¥è¯† ä¸Š"></a>webpackå¸¸ç”¨çŸ¥è¯† ä¸Š</h2><h3 id="sourcemapçš„å¤„ç†"><a href="#sourcemapçš„å¤„ç†" class="headerlink" title="sourcemapçš„å¤„ç†"></a>sourcemapçš„å¤„ç†</h3><h4 id="cssæ¨¡å—-sourcemapçš„å¤„ç†"><a href="#cssæ¨¡å—-sourcemapçš„å¤„ç†" class="headerlink" title="cssæ¨¡å— sourcemapçš„å¤„ç†"></a>cssæ¨¡å— sourcemapçš„å¤„ç†</h4><p>ç»™ä¸€ä¸‹loaderåŠ ä¸ŠsourceMap: trueï¼Œå°±å¯ä»¥åšåˆ°cssçš„sourcemapè°ƒè¯•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          &apos;style-loader&apos;, &#123;</span><br><span class="line">            loader: &apos;css-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;postcss-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &apos;postcss&apos;,</span><br><span class="line">              sourceMap: true,</span><br><span class="line">              plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;sass-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><h3 id="jsæ¨¡å—-sourcemapçš„å¤„ç†"><a href="#jsæ¨¡å—-sourcemapçš„å¤„ç†" class="headerlink" title="jsæ¨¡å— sourcemapçš„å¤„ç†"></a>jsæ¨¡å— sourcemapçš„å¤„ç†</h3><p>å¾ˆç®€å•ï¼ŒåŠ ä¸€ä¸ªè¿™ä¸ªé…ç½®å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtool: &apos;inline-source-map&apos;, // å¼€å‘é˜¶æ®µå¼€å¯ sourcemap</span><br></pre></td></tr></table></figure></p><h3 id="è¦ä¸è¦é…ç½®index-html"><a href="#è¦ä¸è¦é…ç½®index-html" class="headerlink" title="è¦ä¸è¦é…ç½®index.html"></a>è¦ä¸è¦é…ç½®index.html</h3><p>æœ‰æ—¶å€™å®¹æ˜“è¯¯è§£ï¼Œwebpackä¼šè‡ªåŠ¨ç”Ÿæˆindex.htmlï¼Œè¿™æ˜¯ä¸å¯¹çš„ã€‚<br>å…¥å£æ–‡ä»¶index.htmlå¿…é¡»è¦è‡ªå·±æ‰‹åŠ¨é…ç½®ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//index.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>å…¶å®webpackåªæ˜¯ä¸€ä¸ªjsæ‰“åŒ…å™¨ï¼Œä¼šæŠŠindex.htmlç”¨åˆ°çš„jså…¨éƒ¨æ‰“åŒ…æˆä¸€ä¸ªjsï¼Œå°±æ˜¯ä¸Šé¢çš„index.jsã€‚<br>åªæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡webpackçš„æ’ä»¶html-webpack-pluginï¼Œå†™ä¸€ä¸ªindex.htmlæ¨¡æ¿ï¼Œä¸ç”¨æ‰‹åŠ¨è¾“å…¥index.jsçš„å¼•ç”¨ï¼Œä¸”ä¸ç”¨æ¯æ¬¡æ‰‹åŠ¨å°†index.htmlæ‹·è´åˆ°buildç›®å½•ã€‚<br>å°†ä¸Šé¢çš„index.htmlï¼Œæ”¹æˆæ¨¡æ¿ï¼Œå…¶å®å°±æ˜¯å°±æ˜¯å»æ‰è¿™å¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><p>æ”¹æˆçš„index.htmlå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//index.htmlæ¨¡æ¿</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥åœ¨é¡¹ç›®ä¸­ï¼Œä½ å¿…é¡»å†™ä¸€ä¸ªindex.htmlï¼Œæˆ–è€…ä¸€ä¸ªindex.htmlæ¨¡æ¿ã€‚<br>çœ‹è¿™ä¸ªç« èŠ‚åŠ æ·± é¡¹ç›®ä¸­index.html çš„ç†è§£ï¼šã€Šwebpackå¸¸ç”¨çŸ¥è¯† â€”è§£å†³cssæ–‡ä»¶æˆ–è€…jsæ–‡ä»¶åå­—å“ˆå¸Œå€¼å˜åŒ–çš„é—®é¢˜ã€‹</p><h3 id="output-publicPath-output-path-exports-context-devServer-publicPath"><a href="#output-publicPath-output-path-exports-context-devServer-publicPath" class="headerlink" title="output.publicPath output.path exports.context devServer.publicPath"></a>output.publicPath output.path exports.context devServer.publicPath</h3><ul><li>exports.context ä¸ output.path<br>exports.context æ˜¯æä¾›ä¸€ä¸ªå…¨å±€çš„æ ¹ç›®å½•ï¼Œä¸ºé…ç½®æä¾›æ–¹ä¾¿,ä½ ä¹Ÿå¯ä¸é…ç½®ï¼›å¦‚æœé…ç½®æ­¤ç›®å½•ä¸‹é¢çš„output.path åŸºäºæ­¤ç›®å½•ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context: path.resolve(__dirname, &apos;src&apos;),</span><br><span class="line">output: &#123;</span><br><span class="line">  path: &apos;version1.0.0&apos;,</span><br><span class="line">  publicPath: &apos;/&apos;,</span><br><span class="line">  filename: &apos;assets/[name].[hash:8].js&apos;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><p>ç›¸å½“äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  path: path.resolve(__dirname, &apos;version1.0.0/version1.0.0&apos;),</span><br><span class="line">  publicPath: &apos;/&apos;,</span><br><span class="line">  filename: &apos;assets/[name].[hash:8].js&apos;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><ul><li>output.publicPath<br>output.publicPathæ˜¯ç»™index.htmlæ–‡ä»¶å†…æ‰€ä»¥linkæˆ–jså¼•ç”¨ï¼Œåœ¨åŸç¼–è¾‘ç»“æœä¸‹ï¼Œåœ¨æœ€å·¦ä¾§ç»Ÿä¸€åŠ ä¸€ä¸ªç›®å½•ï¼Œé€šå¸¸ä¹Ÿå¯ä¸é…ç½®ã€‚<br>å¦‚ï¼š<br>ä¸åŠ output.publicPath<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">context: path.resolve(__dirname, &apos;src&apos;),</span><br><span class="line">output: &#123;</span><br><span class="line">  path: &apos;version1.0.0&apos;,</span><br><span class="line">  filename: &apos;assets/[name].[hash:8].js&apos;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><p>ç¼–è¯‘å‡ºæ¥çš„index.htmlä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;robots&quot; content=&quot;noindex, nofollow&quot;&gt;</span><br><span class="line">    &lt;title&gt;React App Pro&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;preload&quot; href=&quot;assets/css/1.db782111.css&quot;  as=&quot;style&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;preload&quot; href=&quot;assets/css/style.db782111.css&quot;  as=&quot;style&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;preload&quot; href=&quot;assets/vendors.db782111.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line">    &lt;link rel=&quot;preload&quot; href=&quot;assets/client.db782111.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;assets/vendors.db782111.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script type=&quot;text/javascript&quot; src=&quot;assets/client.db782111.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p><p>åŠ äº†output.publicPath<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">context: path.resolve(__dirname, &apos;src&apos;),</span><br><span class="line">output: &#123;</span><br><span class="line">  path: &apos;version1.0.0&apos;,</span><br><span class="line">  publicPath: &apos;/&apos;,</span><br><span class="line">  filename: &apos;assets/[name].[hash:8].js&apos;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>ç¼–è¯‘å‡ºæ¥çš„index.htmlæ¯ä¸ªå¼•ç”¨è·¯å¾„å‰éƒ½åŠ äº†ä¸€ä¸ªâ€™/â€˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;/assets/css/1.2e0f42df.css&quot;  as=&quot;style&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;/assets/css/style.2e0f42df.css&quot;  as=&quot;style&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;/assets/vendors.2e0f42df.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;/assets/client.2e0f42df.js&quot; as=&quot;script&quot;&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/vendors.2e0f42df.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/assets/client.2e0f42df.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p><ul><li>devServer.publicPath<br>è¿™ä¹ˆæ²¡ä»€ä¹ˆè¯´çš„ï¼Œé»˜è®¤é…ç½®ä¸º â€˜/â€˜ï¼Œå¤§å¤šæ—¶å€™æˆ‘ä»¬ä¸ä¼šå»æ”¹ï¼Œä½¿ç”¨é»˜è®¤é…ç½®ã€‚</li></ul><h3 id="ç»™cssåŠ å‰ç¼€-postcss-loader"><a href="#ç»™cssåŠ å‰ç¼€-postcss-loader" class="headerlink" title="ç»™cssåŠ å‰ç¼€  postcss-loader"></a>ç»™cssåŠ å‰ç¼€  postcss-loader</h3><p><a href="https://www.webpackjs.com/loaders/postcss-loader/#options" target="_blank" rel="noopener">postcss-loader</a>æœ‰å¾ˆå¤šç”¨å¤„ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ç»™å„ä¸ªæµè§ˆå™¨æ·»åŠ css3å…¼å®¹æ ·å¼ã€‚</p><p>postcss-loader è¦ä¸ autoprefixerä¸€èµ·ä½¿ç”¨ï¼Œ autoprefixer ç”¨æ¥é…ç½® postcss-loaderã€‚ä½¿ç”¨æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          &apos;style-loader&apos;, &#123;</span><br><span class="line">            loader: &apos;css-loader&apos;,</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;postcss-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &apos;postcss&apos;,//è¿™é‡Œä¸€å®šè¦å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„åå­—ï¼Œä¸€èˆ¬å–œæ¬¢å®šä¹‰ä¸ºpostcssï¼Œä½ ä¹Ÿå¯ä»¥å®šä¹‰ä»»æ„å…¶ä»–å”¯ä¸€åå­—</span><br><span class="line">              //&gt; 0.15% in CN å¤§è‡´æ˜¯æŒ‡å…¼å®¹ä»€ä¹ˆèŒƒå›´å†…çš„æµè§ˆå™¨ï¼Œè¿™æ ·å†™å°±è¡Œï¼Œä¸€å®šè¦è®¾ç½®ï¼Œå¦åˆ™å¯èƒ½ä¸åŠ å‰ç¼€ï¼Œ</span><br><span class="line">              //ä¸”æ•°å€¼ä¸€å®šè¦è®¾ç½®åˆé€‚ï¼Œå¦åˆ™è®¾ç½®æµè§ˆå™¨å¤ªæ–°ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šç”Ÿæˆå‰ç¼€</span><br><span class="line">              plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;sass-loader&apos;,</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸Šï¼Œç»™postcss-loaderé…ç½®æ¥optionsï¼Œ<strong>å¦‚æœä¸é…ç½®optionsï¼Œåˆ™ä¸€å®šè¦é…ç½®postcss.config.jsï¼Œ</strong>å¦åˆ™ä¼šæŠ¥é”™ã€‚<br>å¦‚æœé…ç½®äº†  postcss-loaderï¼Œå¦‚æœä½ è¿˜ä½¿ç”¨äº†happypack,å°±å¿…é¡»è¦ åœ¨æ ¹ç›®å½• (é€šå¸¸æ˜¯webpack.comfig.jsåŒçº§ç›®å½•)é…ç½® postcss.config.jsã€‚è¯¦ç»†è¯·çœ‹ä¸‹é¢ç« èŠ‚ ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–â€“happypackã€‹</p><h3 id="æŠ½ç¦»cssæ ·å¼æ–‡ä»¶"><a href="#æŠ½ç¦»cssæ ·å¼æ–‡ä»¶" class="headerlink" title="æŠ½ç¦»cssæ ·å¼æ–‡ä»¶"></a>æŠ½ç¦»cssæ ·å¼æ–‡ä»¶</h3><p>æ³¨æ„ï¼š1.webpack4å¼€å§‹ä½¿ç”¨mini-css-extract-plugin ï¼Œ1-3ç‰ˆæœ¬å¯ä»¥ç”¨ extract-text-webpack-pluginã€‚<br>     2.åªæœ‰ mode: â€˜productionâ€™ æ’ä»¶æ‰ç”Ÿæ•ˆã€‚<br>     3.å¼€å‘é˜¶æ®µä½¿ç”¨style-loaderå°±è¡Œäº†<br>æ–¹æ³•ï¼š<br>1.mode: â€˜productionâ€™<br>2.æŠ½ç¦»åªéœ€å°†åŸå…ˆstyle-loaderçš„å¯¹è±¡æ¢æˆmini-css-extract-pluginï¼›<br>3.é…ç½®pluginsï¼›</p><p>é…ç½®ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);</span><br><span class="line">...</span><br><span class="line">mode: &apos;production&apos;,</span><br><span class="line">...</span><br><span class="line">&#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader, &#123;</span><br><span class="line">            loader: &apos;css-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;postcss-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &apos;postcss&apos;,</span><br><span class="line">              sourceMap: true,</span><br><span class="line">              plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;sass-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line"> ....</span><br><span class="line"> plugins: [</span><br><span class="line">   new MiniCssExtractPlugin(&#123;</span><br><span class="line">     filename: &apos;[name][hash].css&apos;, // è®¾ç½®æœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶åï¼Œè¿™ä¸ªnameæœ€ç»ˆæ ¹æ®output.filenameä¸€è‡´ã€‚</span><br><span class="line">     chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">   &#125;)</span><br><span class="line"> ],</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯cssæœªä»htmlä¸ŠæŠ½ç¦»çš„åŸå…ˆé…ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;style-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,&#123;</span><br><span class="line">            loader: &apos;css-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;postcss-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &apos;postcss&apos;,</span><br><span class="line">              sourceMap: true,</span><br><span class="line">              plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;sass-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="å‹ç¼©css"><a href="#å‹ç¼©css" class="headerlink" title="å‹ç¼©css"></a>å‹ç¼©css</h3><p>æ‰€è°“å‹ç¼©ä»£ç ï¼Œå°±æ˜¯æŠŠcsså‹ç¼©æˆç´§å‡‘çš„ä¸€è¡Œã€‚<br>æ³¨æ„ï¼š1.webpack5å†…ç½®å‹ç¼© ï¼Œ4ç‰ˆæœ¬å¯ä»¥è®¾ç½®æ’ä»¶optimize-css-assets-webpack-pluginå³å¯ã€‚<br>     2.åªæœ‰ mode: â€˜productionâ€™ ã€‚<br>é…ç½®ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const OptimizeCSSAssetsPlugin = require(&apos;optimize-css-assets-webpack-plugin&apos;);</span><br><span class="line">...</span><br><span class="line">mode: &apos;production&apos;</span><br><span class="line">...</span><br><span class="line">optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      new OptimizeCSSAssetsPlugin(&#123;&#125;), // å‹ç¼©CSSæ’ä»¶</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="è§£å†³cssæ–‡ä»¶æˆ–è€…jsæ–‡ä»¶åå­—å“ˆå¸Œå€¼å˜åŒ–çš„é—®é¢˜"><a href="#è§£å†³cssæ–‡ä»¶æˆ–è€…jsæ–‡ä»¶åå­—å“ˆå¸Œå€¼å˜åŒ–çš„é—®é¢˜" class="headerlink" title="è§£å†³cssæ–‡ä»¶æˆ–è€…jsæ–‡ä»¶åå­—å“ˆå¸Œå€¼å˜åŒ–çš„é—®é¢˜"></a>è§£å†³cssæ–‡ä»¶æˆ–è€…jsæ–‡ä»¶åå­—å“ˆå¸Œå€¼å˜åŒ–çš„é—®é¢˜</h3><p>html-webpack-pluginæ’ä»¶ï¼Œå¯ä»¥æŠŠæ‰“åŒ…åçš„cssæˆ–jsæ–‡ä»¶å¼•ç”¨ç›´æ¥æ³¨å…¥åˆ°HTMLæ¨¡æ¿ä¸­ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶å¼•ç”¨äº†ã€‚<br>å› æ­¤ï¼Œåªè¦é¡¹ç›®ä¸­ä½¿ç”¨äº†hashï¼Œå°±å¿…é¡»é…å¥—ä½¿ç”¨html-webpack-pluginã€‚<br>å¦å¤–å¦‚æœè¦ä½¿ç”¨æ¨¡æ¿htmlï¼Œä¹Ÿå¿…é¡»é…å¥—ä½¿ç”¨html-webpack-pluginã€‚<br>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨æ¨¡æ¿ï¼Œå°±ç®—æœ‰å“ˆå¸Œå€¼ï¼Œä½ ä¸æ€•éº»çƒ¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸é€‚ç”¨html-webpack-plugin,ä½ è‡ªå·±æ‰‹å†™htmlï¼Œç„¶åå°†æ‰“åŒ…ç”Ÿæˆçš„js\cssæ–‡ä»¶æ‰‹åŠ¨å¼•ç”¨ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚<br>é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">new HtmlWebpackPlugin(&#123;</span><br><span class="line">  title: &apos;AICODER test&apos;, // é»˜è®¤å€¼ï¼šWebpack App</span><br><span class="line">  filename: &apos;index.html&apos;, // é»˜è®¤å€¼ï¼š &apos;index.html&apos;</span><br><span class="line">  template: path.resolve(__dirname, &apos;src/main.html&apos;),</span><br><span class="line">  minify: &#123;</span><br><span class="line">    collapseWhitespace: true, // æŠ˜å ç©ºç™½</span><br><span class="line">    removeComments: true, // æ˜¯å¦ç§»é™¤æ³¨é‡Š</span><br><span class="line">    removeAttributeQuotes: true // ç§»é™¤å±æ€§çš„å¼•å·</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="æ¯æ¬¡æ‰“åŒ…è‡ªåŠ¨æ¸…é™¤ä¸Šä¸€ä¸ªdistç›®å½•"><a href="#æ¯æ¬¡æ‰“åŒ…è‡ªåŠ¨æ¸…é™¤ä¸Šä¸€ä¸ªdistç›®å½•" class="headerlink" title="æ¯æ¬¡æ‰“åŒ…è‡ªåŠ¨æ¸…é™¤ä¸Šä¸€ä¸ªdistç›®å½•"></a>æ¯æ¬¡æ‰“åŒ…è‡ªåŠ¨æ¸…é™¤ä¸Šä¸€ä¸ªdistç›®å½•</h3><p>ä½¿ç”¨æ’ä»¶ï¼šclean-webpack-pluginï¼Œé…ç½®å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const CleanWebpackPlugin = require(&apos;clean-webpack-plugin&apos;);</span><br><span class="line">plugins: [</span><br><span class="line">    new CleanWebpackPlugin([&apos;dist&apos;])</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®å¦‚ä½•è§£æreact-ä¸-jsx"><a href="#é…ç½®å¦‚ä½•è§£æreact-ä¸-jsx" class="headerlink" title="é…ç½®å¦‚ä½•è§£æreact ä¸ jsx"></a>é…ç½®å¦‚ä½•è§£æreact ä¸ jsx</h3><p>è§£å†³æ–¹å¼å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°éƒ½æ˜¯é€šè¿‡.babelrcå®Œæˆï¼Œæ‰€ä»¥è¦é‡è§†.babelrcçš„ä½œç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//.babelrc</span><br><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;react&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//package.json</span><br><span class="line"> &quot;babel-preset-react&quot;: &quot;^6.24.1&quot;,</span><br></pre></td></tr></table></figure></p><h3 id="å‹ç¼©å›¾ç‰‡"><a href="#å‹ç¼©å›¾ç‰‡" class="headerlink" title="å‹ç¼©å›¾ç‰‡"></a>å‹ç¼©å›¾ç‰‡</h3><p>ä½¿ç”¨loaderï¼šimage-webpack-loaderï¼Œä¸€å®šåœ¨url-loaderä¹‹å‰æ‰§è¡Œimage-webpack-loaderã€‚<br>image-webpack-loaderå¯ä»¥è®©åŸæ¥90kbçš„å›¾ç‰‡ï¼Œå˜æˆ70kbï¼Œè€Œä¸æ€ä¹ˆå½±å“è´¨é‡ã€‚<br>é…ç½®å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(png|svg|jpg|gif|jpeg)$/,</span><br><span class="line">        include: [path.resolve(__dirname, &apos;src/&apos;)],</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;url-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: 10000</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;image-webpack-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              mozjpeg: &#123;</span><br><span class="line">                progressive: true,</span><br><span class="line">                quality: 65</span><br><span class="line">              &#125;,</span><br><span class="line">              optipng: &#123;</span><br><span class="line">                enabled: false</span><br><span class="line">              &#125;,</span><br><span class="line">              pngquant: &#123;</span><br><span class="line">                quality: &apos;65-90&apos;,</span><br><span class="line">                speed: 4</span><br><span class="line">              &#125;,</span><br><span class="line">              gifsicle: &#123;</span><br><span class="line">                interlaced: false</span><br><span class="line">              &#125;,</span><br><span class="line">              webp: &#123;</span><br><span class="line">                quality: 75</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><h3 id="file-loader-ä¸-url-loader-å¼‚åŒ"><a href="#file-loader-ä¸-url-loader-å¼‚åŒ" class="headerlink" title="file-loader ä¸ url-loader å¼‚åŒ"></a>file-loader ä¸ url-loader å¼‚åŒ</h3><p>ä»–ä»¬éƒ½æ˜¯ç”¨æ¥å¤„ç†é¡¹ç›®ä¸­å›¾ç‰‡çš„ã€‚<br>file-loader æœ‰çš„åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šurl-loaderéƒ½ç”¨ï¼›<br>è€Œä¸”url-loaderè¿˜å¯ä»¥å°†å›¾ç‰‡è¿›è¡Œbase64å‹ç¼©çš„åŠŸèƒ½ï¼ˆä½ å¯ä»¥ä¸ä½¿ç”¨æ­¤åŠŸèƒ½ï¼‰ï¼›<br>å› æ­¤ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨url-loaderè€Œä¸é€‚ç”¨file-loaderã€‚<br>url-loader é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(png|svg|jpg|gif|jpeg)$/,</span><br><span class="line">        include: [path.resolve(__dirname, &apos;src/&apos;)],</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;url-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: 10000 //1kbä»¥å†…çš„å›¾ç‰‡å°†è¢«base64å‹ç¼©</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure></p><p>url-loaderå°†å›¾ç‰‡è¿›è¡Œbase64å‹ç¼©åå°±æ˜¯ä¸€ä¸²DataURLï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">    background: url(data:image/png;base64,UklGRkYwAABXRUJQVlA4WAoAAAAQAAAA/QIA8AAAQUxQSMAcAAABbâ€¦KnjLJNbGNAMFRe2WQhUfMAAAA19AAAkbAAAAAAAAAAAAAAABrYAAAAAD0gAAAAAAAAAAAAAAAA);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨åŸºæœ¬ä¸Šå¸¸ç”¨çš„æµè§ˆå™¨å’Œç§»åŠ¨ç«¯éƒ½å¯å¾ˆå¥½å…¼å®¹DataURLï¼Œæ‰€ä»¥å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚<br>base64å‹ç¼©å›¾ç‰‡ä¸ºä¸€ä¸²DataURLçš„å¥½å¤„åœ¨äºå‡å°‘htmlé¡µé¢çš„httpè¯·æ±‚ã€‚ç¼ºç‚¹åœ¨äºä¼šåŠ å¤§æ‰“åŒ…æ–‡ä»¶å¤§å°ã€‚<br>ä¸€èˆ¬ç½‘é¡µæ€§èƒ½ä¼˜åŒ–æ—¶ï¼š<br>å¯¹äºå°å›¾ç‰‡ï¼Œä¼šä½¿ç”¨base64å‹ç¼©ï¼Œå‡å°‘httpè¯·æ±‚ï¼›<br>å¯¹äºå¤§å›¾ç‰‡ï¼Œè¿˜æ˜¯ä½¿ç”¨httpè¯·æ±‚ã€‚</p><h3 id="å­—ä½“æ–‡ä»¶å¤„ç†"><a href="#å­—ä½“æ–‡ä»¶å¤„ç†" class="headerlink" title="å­—ä½“æ–‡ä»¶å¤„ç†"></a>å­—ä½“æ–‡ä»¶å¤„ç†</h3><p>å­—ä½“æ–‡ä»¶å¤„ç†åŒå›¾ç‰‡æ–‡ä»¶å¤„ç†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.(woff|woff2|eot|ttf|otf)$/,</span><br><span class="line">    include: [path.resolve(__dirname, &apos;src/&apos;)],</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader: &apos;file-loader&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="proxy"><a href="#proxy" class="headerlink" title="proxy"></a>proxy</h3><h4 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h4><figure class="image-box">                <img src="/image/webpack/proxy1.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/webpack/proxy2.jpg" alt title class>                <p></p>            </figure><figure class="image-box">                <img src="/image/webpack/proxy3.jpg" alt title class>                <p></p>            </figure><h4 id="changeOriginä¸å…¶ä»–æ³¨æ„"><a href="#changeOriginä¸å…¶ä»–æ³¨æ„" class="headerlink" title="changeOriginä¸å…¶ä»–æ³¨æ„"></a>changeOriginä¸å…¶ä»–æ³¨æ„</h4><p>ä»£ç†æœ‰ä¸‰ç§æƒ…å†µï¼š<br>localhost<br>httpçš„å…¶ä»–ä¸»æœºå<br>httpsçš„å…¶ä»–ä¸»æœºå<br>æ¶‰åŠåˆ°å…¶ä»–ä¸»æœºåæ—¶ï¼Œè¦é…ç½®changeOrigin: trueï¼Œ<br>æ¶‰åŠåˆ°httpsæ—¶ï¼Œè¦é…ç½®secure: false,ä¸è¿‡ç»æµ‹è¯•ï¼Œä¸è®¾ç½®secure: falseï¼Œä¹Ÿå¯ä»¥è¿è¡Œæ­£å¸¸<br>è¯¦ç»†å‚è€ƒ <a href="https://www.webpackjs.com/configuration/dev-server/#devserver-proxy" target="_blank" rel="noopener">webpackå®˜ç½‘ devServer.proxy</a><br><a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener">http-proxy-middleware</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">proxy: &#123;</span><br><span class="line">     &quot;/j&quot;: &#123; </span><br><span class="line">       target: &quot;https://read.douban.com&quot;,</span><br><span class="line">       changeOrigin: true,</span><br><span class="line">       secure: false,</span><br><span class="line">     &#125;,</span><br><span class="line">     &quot;/ajax&quot;: &#123; </span><br><span class="line">       target: &quot;http://m.maoyan.com&quot;,</span><br><span class="line">       changeOrigin: true</span><br><span class="line">     &#125;,</span><br><span class="line">     &quot;/test&quot;: &#123; </span><br><span class="line">       target: &quot;http://127.0.0.1:8080&quot;,</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><h3 id="å¤–éƒ¨æ‰©å±•-externals"><a href="#å¤–éƒ¨æ‰©å±•-externals" class="headerlink" title="å¤–éƒ¨æ‰©å±•(externals)"></a>å¤–éƒ¨æ‰©å±•(externals)</h3><p> æŠŠä¸€ä¸ªæ¨¡å—åšæˆå¤–éƒ¨ä¾èµ–ä¹Ÿå°±æ˜¯ç”¨cdnçš„æ–¹å¼ä¾èµ–ï¼Œä¸ä¼šæ‰“åŒ…åˆ° jsæ–‡ä»¶ä¸­ã€‚<br> ä¾‹å¦‚lodash,jqueryåŸºæœ¬ä¸Šæ¯ä¸ªé¡µé¢éƒ½è¦ç”¨åˆ°ï¼Œè¿™ä¸ªæ—¶å€™æŠŠå®ƒä»¬æ”¾åœ¨index.htmlæ¨¡æ¿ä¸­ï¼Œ<br> æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥é€šè¿‡externalså®šä¹‰çš„åç§°è¿›è¡Œå¼•ç”¨ã€‚<br> ä»è€Œå¯ä»¥å‡å°‘æ‰“åŒ…åjsçš„å¤§å°ã€‚<br> é…ç½®å¦‚ä¸‹ï¼š<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//index.htmlæ¨¡æ¿ä¸­</span><br><span class="line">&lt;script</span><br><span class="line">  src=&quot;https://code.jquery.com/jquery-3.1.0.js&quot;</span><br><span class="line">  integrity=&quot;sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=&quot;</span><br><span class="line">  crossorigin=&quot;anonymous&quot;&gt;</span><br><span class="line"></span><br><span class="line">  //webpack.config.js</span><br><span class="line">   externals: &#123;  // æŠŠä¸€ä¸ªæ¨¡å—åšæˆå¤–éƒ¨ä¾èµ–ï¼Œä¸ä¼šæ‰“åŒ…åˆ° jsæ–‡ä»¶ä¸­ã€‚</span><br><span class="line">      jquery: &apos;jQuery&apos;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    //index.jsä½¿ç”¨jquery</span><br><span class="line">    import $ from &apos;jquery&apos;; //æ³¨æ„æ˜¯å°å†™</span><br></pre></td></tr></table></figure></p><h3 id="webpack-bundle-analyzerç»Ÿè®¡åˆ†æ"><a href="#webpack-bundle-analyzerç»Ÿè®¡åˆ†æ" class="headerlink" title="webpack-bundle-analyzerç»Ÿè®¡åˆ†æ"></a>webpack-bundle-analyzerç»Ÿè®¡åˆ†æ</h3><p>æ³¨æ„ï¼Œè¿™ä¸ªæ˜¯åœ¨å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨,é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const BundleAnalyzerPlugin = require(&apos;webpack-bundle-analyzer&apos;).BundleAnalyzerPlugin;</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">   new BundleAnalyzerPlugin(), // æ‰“åŒ…æ¨¡å—æŠ¥è¡¨</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure></p><p>é…ç½®å¥½åï¼Œæ‰§è¡Œnpm start ï¼Œä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨æ‰“å¼€åˆ†æé¡µé¢ï¼š<br><figure class="image-box">                <img src="/image/webpack/analyzer.png" alt title class>                <p></p>            </figure><br>ç”±å›¾çœ‹å‡ºï¼Œloadsh.jsçš„ä½“ç§¯æœ€å¤§ï¼Œç»è¿‡åˆ†æï¼Œå¯ä»¥å°†loadsh.jsåšæˆå¤–éƒ¨ä¾èµ–ï¼Œä»è€Œå‡å°‘æ‰“åŒ…åjsçš„ä½“ç§¯ã€‚</p><h3 id="åˆ†ç¦»-åº“ä¸ä¸šåŠ¡ä»£ç "><a href="#åˆ†ç¦»-åº“ä¸ä¸šåŠ¡ä»£ç " class="headerlink" title="åˆ†ç¦» åº“ä¸ä¸šåŠ¡ä»£ç "></a>åˆ†ç¦» åº“ä¸ä¸šåŠ¡ä»£ç </h3><h4 id="é…ç½®æ–¹æ³•ä¸€"><a href="#é…ç½®æ–¹æ³•ä¸€" class="headerlink" title="é…ç½®æ–¹æ³•ä¸€"></a>é…ç½®æ–¹æ³•ä¸€</h4><p>é…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">   filename: &apos;[name].[hash].js&apos;, //å®šä¹‰åº“ä»£ç ä»¥å¤–çš„ä»£ç æ‰“åŒ…æˆçš„js appIndex.54c949dd739536531ad5.js</span><br><span class="line">   chunkFilename: &apos;[name].chunk.js&apos;,//å®šä¹‰åº“ä»£ç æ‰“åŒ…æˆçš„js customChunkNameQQ.chunk.js</span><br><span class="line">   path: path.resolve(__dirname, &apos;dist&apos;) //æ‰“åŒ…åè¾“å‡ºçš„è·¯å¾„</span><br><span class="line"> &#125;,</span><br><span class="line">optimization: &#123;</span><br><span class="line">   splitChunks: &#123;</span><br><span class="line">           cacheGroups: &#123;</span><br><span class="line">             commons: &#123;</span><br><span class="line">                chunks: &apos;initial&apos;,</span><br><span class="line">                test: path.resolve(__dirname,&apos;node_modules&apos;),//åŒ¹é…åˆ°çš„æ–‡ä»¶éƒ½å°†è¢«ä¸€èµ·æ‰“åŒ…æˆåº“js</span><br><span class="line">                enforce: true,</span><br><span class="line">                name: &apos;customChunkNameQQ&apos;,//å®šä¹‰æ‰“åŒ…å[name]å€¼</span><br><span class="line">             &#125;</span><br><span class="line">           &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></p><p>åº“ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦» ä½¿ç”¨çš„æ˜¯splitChunksé…ç½®ï¼Œå…¶å®å®ƒæ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè¢«æ•´åˆåˆ°webpack4äº†ã€‚<br>è¿™ä¸ªæ’ä»¶çš„æ€è·¯æ˜¯ï¼Œåˆ©ç”¨teståŒ¹é…æ–‡ä»¶ï¼Œåªè¦åŒ¹é…åˆ°çš„å°±æ‰“åŒ…æˆåº“jsï¼Œå‰©ä¸‹æ²¡æœ‰è¢«åŒ¹é…åˆ°çš„ï¼Œå°±è¢«æ‰“åŒ…æˆä¸šåŠ¡jsï¼›<br>æ‰€ä»¥å¦‚æœteståŒ¹é…ä¸åˆ°ä»»ä½•æ–‡ä»¶ï¼Œå°†ä¸ä¼šæœ‰åº“jsç”Ÿæˆï¼Œæ‰€æœ‰çš„jsèµ„æºéƒ½ä¼šè¢«å‰©ä¸‹ï¼Œéƒ½è¢«æ‰“åŒ…åˆ°ä¸šåŠ¡jsä¸­ã€‚</p><p>ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œåªæœ‰ä¸šåŠ¡jsç”Ÿæˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">   appIndex:&apos;./src/index.js&apos;</span><br><span class="line"> &#125;,</span><br><span class="line"> optimization: &#123;</span><br><span class="line">   splitChunks: &#123;</span><br><span class="line">           cacheGroups: &#123;</span><br><span class="line">             commons: &#123;</span><br><span class="line">                chunks: &apos;initial&apos;,</span><br><span class="line">                test: path.resolve(__dirname,&apos;node_modules11&apos;),//å› ä¸ºé¡¹ç›®æ²¡æœ‰node_modules11ç›®å½•,å°†åªä¼šæœ‰ä¸€ä¸ªä¸šåŠ¡jsç”Ÿæˆ</span><br><span class="line">                enforce: true,</span><br><span class="line">                name: &apos;customChunkNameQQ&apos;,</span><br><span class="line">             &#125;</span><br><span class="line">           &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></p><p> <strong>webpackæ‰“åŒ…çš„åŸåˆ™å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœæ²¡æœ‰æ’ä»¶,æ‰€æœ‰çš„jså°†è¢«webpackç³»ç»Ÿæ‰“åŒ…æˆä¸€ä¸ªjsï¼Œå¦‚æœæœ‰æ’ä»¶åšä»£ç åˆ†ç¦»ï¼Œæ’ä»¶åŒ¹é…çš„éƒ¨åˆ†å°†è¢«æ’ä»¶æ‰“åŒ…æˆjsï¼Œå‰©ä¸‹çš„å°†è¢«webpackç³»ç»Ÿæ‰“åŒ…æˆä¸€ä¸ªjsï¼Œå¦‚æœæ’ä»¶æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•jsï¼Œ,æ‰€æœ‰çš„jså°†è¢«webpackç³»ç»Ÿæ‰“åŒ…æˆä¸€ä¸ªjs</strong></p><p>è¿˜æœ‰å…¶ä»–å‡ ç§å®šä¹‰æ–¹æ³•ï¼š</p><h4 id="æ˜¾ç¤ºé…ç½®æ–¹æ³•-æ¨è"><a href="#æ˜¾ç¤ºé…ç½®æ–¹æ³•-æ¨è" class="headerlink" title="æ˜¾ç¤ºé…ç½®æ–¹æ³•(æ¨è)"></a>æ˜¾ç¤ºé…ç½®æ–¹æ³•(æ¨è)</h4><p>æ³¨æ„ä¸‹é¢è¿™ä¸ªç¤ºä¾‹é…ç½®æœ‰ä¸€ç‚¹ç‚¹é—®é¢˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//å°†&apos;lodash&apos;,&apos;axios&apos;ä¸¤ä¸ªåº“çš„ä»£ç åˆå¹¶æ‰“åŒ…æˆä¸€ä¸ªåå­—ä¸ºcustomChunkNameQQ çš„ jsï¼Œæ–‡ä»¶ï¼›</span><br><span class="line">//å‰©ä¸‹æ‰€æœ‰jsåŒ…å«å…¶ä»–ä¾èµ–åº“å’Œä¸šåŠ¡jså°†è¢«åˆå¹¶æ‰“åŒ…æˆå¦ä¸ªä¸€ä¸ªjsã€‚</span><br><span class="line"> entry: &#123;</span><br><span class="line">    appIndex:&apos;./src/index.js&apos;,</span><br><span class="line">    lodashAndAxios:[&apos;lodash&apos;,&apos;axios&apos;],//æ˜¾ç¤ºå®šä¹‰éœ€è¦å°†è¿™äº›ä¾èµ–åº“æ‰“æˆä¸€ä¸ªjs</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: &apos;lodashAndAxios&apos;, //ä¸€å®šè¦åŒ¹é…entryå¯¹è±¡å†…ï¼Œkeyå€¼ï¼ŒlodashAndAxioså°±æ˜¯entryä¸­çš„keyå€¼</span><br><span class="line">                 enforce: true,</span><br><span class="line">                 name: &apos;customChunkNameQQ&apos;,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢é…ç½®æœ‰äº›é—®é¢˜ï¼Œæ‰“åŒ…åï¼Œä¼šç”Ÿæˆä¸‰ä¸ªjsï¼š<br><figure class="image-box">                <img src="/image/webpack/verder2.png" alt title class>                <p></p>            </figure><br>æ‰€ä»¥ä¿®æ”¹ä»¥ä¸Šé…ç½®ï¼Œå°†cacheGroups.commons.nameä¸cacheGroups.commons.testç»Ÿä¸€å®šä¹‰æˆentryä¸­çš„lodashAndAxiosè¿™æ ·ç”Ÿæˆçš„æ–‡ä»¶å°±æ­£å¸¸äº†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ­£ç¡®é…ç½®æ–¹æ³• --&gt;</span><br><span class="line"> entry: &#123;</span><br><span class="line">    appIndex:&apos;./src/index.js&apos;,</span><br><span class="line">    lodashAndAxios:[&apos;lodash&apos;,&apos;axios&apos;],//æ˜¾ç¤ºå®šä¹‰éœ€è¦å°†è¿™äº›ä¾èµ–åº“æ‰“æˆä¸€ä¸ªjs</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: &apos;lodashAndAxios&apos;, //ä¸€å®šè¦åŒ¹é…entryå¯¹è±¡å†…ï¼Œkeyå€¼ï¼ŒlodashAndAxioså°±æ˜¯entryä¸­çš„keyå€¼</span><br><span class="line">                 enforce: true,</span><br><span class="line">                 name: &apos;lodashAndAxios&apos;,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>æ‰“åŒ…ç»“æœä¸ºï¼š<br><figure class="image-box">                <img src="/image/webpack/verder2.png" alt title class>                <p></p>            </figure></p><h4 id="ç›´æ¥ç”¨teståŒ¹é…æ–¹æ³•"><a href="#ç›´æ¥ç”¨teståŒ¹é…æ–¹æ³•" class="headerlink" title="ç›´æ¥ç”¨teståŒ¹é…æ–¹æ³•"></a>ç›´æ¥ç”¨teståŒ¹é…æ–¹æ³•</h4><p>ä¸Šé¢çš„æ–¹æ³•ä¹Ÿå¯ä»¥å†™æˆå¦‚ä¸‹ï¼Œæ•ˆæœä¸€æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//å°†&apos;lodash&apos;,&apos;axios&apos;ä¸¤ä¸ªåº“çš„ä»£ç åˆå¹¶æ‰“åŒ…æˆä¸€ä¸ªåå­—ä¸ºcustomChunkNameQQ çš„ jsï¼Œæ–‡ä»¶ï¼›</span><br><span class="line">//å‰©ä¸‹æ‰€æœ‰jsåŒ…å«å…¶ä»–ä¾èµ–åº“å’Œä¸šåŠ¡jså°†è¢«åˆå¹¶æ‰“åŒ…æˆå¦ä¸ªä¸€ä¸ªjsã€‚</span><br><span class="line"> entry: &#123;</span><br><span class="line">    appIndex:&apos;./src/index.js&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: /lodash|axios/,  //ç›´æ¥ä½¿ç”¨testå»åŒ¹é…</span><br><span class="line">                 enforce: true,</span><br><span class="line">                 name: &apos;customChunkNameQQ&apos;,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><h3 id="entryå¤šç§é…ç½®å½¢å¼"><a href="#entryå¤šç§é…ç½®å½¢å¼" class="headerlink" title="entryå¤šç§é…ç½®å½¢å¼"></a>entryå¤šç§é…ç½®å½¢å¼</h3><p>å…¥å£å¯ä»¥ä½¿ç”¨ entry å­—æ®µæ¥è¿›è¡Œé…ç½®ï¼Œwebpack æ”¯æŒé…ç½®å¤šä¸ªå…¥å£æ¥è¿›è¡Œæ„å»ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &apos;./src/index.js&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä¸Šè¿°é…ç½®ç­‰åŒäº</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &apos;./src/index.js&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æˆ–è€…é…ç½®å¤šä¸ªå…¥å£</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    foo: &apos;./src/page-foo.js&apos;,</span><br><span class="line">    bar: &apos;./src/page-bar.js&apos;,</span><br><span class="line">    // ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨æ•°ç»„æ¥å¯¹å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: [</span><br><span class="line">      &apos;./src/foo.js&apos;,</span><br><span class="line">      &apos;./src/bar.js&apos;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æœ€åçš„ä¾‹å­ï¼Œå¯ä»¥ç†è§£ä¸ºå¤šä¸ªæ–‡ä»¶ä½œä¸ºä¸€ä¸ªå…¥å£ï¼Œwebpack ä¼šè§£æä¸¤ä¸ªæ–‡ä»¶çš„ä¾èµ–åè¿›è¡Œæ‰“åŒ…ã€‚</p><p>è¿˜æœ‰ä¸€ç§å½¢å¼ï¼Œå°±æ˜¯ä½¿ç”¨åº“ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»optimization.splitChunksæ—¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//å°†&apos;lodash&apos;,&apos;axios&apos;ä¸¤ä¸ªåº“çš„ä»£ç åˆå¹¶æ‰“åŒ…æˆä¸€ä¸ªåå­—ä¸ºcustomChunkNameQQ çš„ jsï¼Œæ–‡ä»¶ï¼›</span><br><span class="line">//å‰©ä¸‹æ‰€æœ‰jsåŒ…å«å…¶ä»–ä¾èµ–åº“å’Œä¸šåŠ¡jså°†è¢«åˆå¹¶æ‰“åŒ…æˆå¦ä¸ªä¸€ä¸ªjsã€‚</span><br><span class="line"> entry: &#123;</span><br><span class="line">    appIndex:&apos;./src/index.js&apos;,</span><br><span class="line">    lodashAndAxios:[&apos;lodash&apos;,&apos;axios&apos;],//æ˜¾ç¤ºå®šä¹‰éœ€è¦å°†è¿™äº›ä¾èµ–åº“æ‰“æˆä¸€ä¸ªjs</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">  filename: &apos;[name].[hash].js&apos;,//åº“jså‰©ä¸‹çš„ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ä¸šåŠ¡js</span><br><span class="line">  chunkFilename: &apos;[name].chunk.js&apos;, //æ‰“åŒ…å‡ºæ¥çš„åº“js</span><br><span class="line">  path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">&#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        commons: &#123;</span><br><span class="line">           chunks: &apos;initial&apos;,</span><br><span class="line">           test: &apos;lodashAndAxios&apos;,</span><br><span class="line">           enforce: true,</span><br><span class="line">           name: &apos;lodashAndAxios&apos;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p><strong>entry å€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯å¯¹è±¡ï¼›å½“entryä¸ºå¯¹è±¡æ—¶ï¼Œå¯¹è±¡å…ƒç´ çš„keyï¼Œvalueï¼›valueå¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ã€‚</strong></p><h3 id="ç”Ÿäº§ä¸å¼€å‘ç¯å¢ƒå·®å¼‚é…ç½®"><a href="#ç”Ÿäº§ä¸å¼€å‘ç¯å¢ƒå·®å¼‚é…ç½®" class="headerlink" title="ç”Ÿäº§ä¸å¼€å‘ç¯å¢ƒå·®å¼‚é…ç½®"></a>ç”Ÿäº§ä¸å¼€å‘ç¯å¢ƒå·®å¼‚é…ç½®</h3><p>å‰é¢æåŠçš„ä½¿ç”¨ç¯å¢ƒå˜é‡çš„æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒçš„æ„å»ºç¯å¢ƒä¸­å®Œæˆä¸åŒçš„æ„å»ºéœ€æ±‚ï¼Œè¿™é‡Œåˆ—ä¸¾ä¸€ä¸‹å¸¸è§çš„ webpack æ„å»ºå·®å¼‚é…ç½®ï¼š</p><ul><li>ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦åˆ†ç¦» CSS æˆå•ç‹¬çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ª CSS æ–‡ä»¶</li><li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼© HTML/CSS/JS ä»£ç </li><li>ç”Ÿäº§ç¯å¢ƒéœ€è¦å‹ç¼©å›¾ç‰‡</li><li>å¼€å‘ç¯å¢ƒéœ€è¦ç”Ÿæˆ sourcemap æ–‡ä»¶</li><li>å¼€å‘ç¯å¢ƒéœ€è¦æ‰“å° debug ä¿¡æ¯</li><li>å¼€å‘ç¯å¢ƒéœ€è¦ live reload æˆ–è€… hot reload çš„åŠŸèƒ½</li></ul><h3 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h3><ul><li>Entry: å…¥å£ã€‚</li><li>Module: æ¨¡å—ã€‚åœ¨webpacké‡Œï¼Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ï¼Œwebpackä¼šä»é…ç½®çš„entryå¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚</li><li>Chunk: ä»£ç å—ã€‚ä¸€ä¸ªChunkç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶å’Œåˆ†å‰²ã€‚</li><li>loader: æ¨¡å—è½¬æ¢å™¨ã€‚</li><li>Plugin: æ‰©å±•æ’ä»¶ã€‚</li><li>Output: è¾“å‡ºç»“æœã€‚<br>webpack åœ¨å¯åŠ¨åä¼šä»Entryé‡Œé…ç½®çš„Mouleå¼€å§‹ï¼Œé€’å½’è§£æEntryä¾èµ–çš„æ‰€æœ‰moduleï¼Œæ¯æ‰¾åˆ°ä¸€ä¸ªmoduleï¼Œå°±ä¼šæ ¹æ®é…ç½®çš„loaderå»æ‰¾å‡ºå¯¹åº”çš„è½¬æ¢è§„åˆ™ï¼Œå¯¹moduleè¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå½“å‰moduleä¾èµ–çš„moduleã€‚è¿™äº›æ¨¡å—ä¼šä»¥entryä¸ºå•ä½è¿›è¡Œåˆ†ç»„ï¼Œä¸€ä¸ªentryåŠå…¶æ‰€æœ‰ä¾èµ–çš„moduleè¢«åˆ†åˆ°ä¸€ä¸ªç»„ä¹Ÿå°±æ˜¯ä¸€ä¸ªchunkï¼Œæœ€åwebpackä¼šå°†æ‰€æœ‰chunkè½¬æ¢æˆæ–‡ä»¶è¾“å‡ºã€‚<br><strong>åœ¨webpackä¸­chunkæ¦‚å¿µå¾ˆé‡è¦ï¼Œä¹Ÿå¾ˆä¸å¥½ç†è§£ï¼Œä¹Ÿå®¹æ˜“è¢«å¿½è§†ï¼Œå…¶å®webpackç›®çš„æ˜¯ä¸€ä¸ªæ‰“åŒ…å·¥å…·ï¼Œç„¶è€Œå°†æ•´ä¸ªåŒ…æ‰“æˆå‡ ä¸ªä»£ç å—ï¼Œéƒ½æ˜¯ç”±chunkæ§åˆ¶ï¼Œæ‰€ä»¥ç†è§£chunkå¯¹ç†è§£webpackï¼Œè‡³å…³é‡è¦ã€‚</strong></li></ul><h3 id="babelrcç›¸å…³"><a href="#babelrcç›¸å…³" class="headerlink" title=".babelrcç›¸å…³"></a>.babelrcç›¸å…³</h3><h4 id="babelrcæ’ä»¶å®‰è£…"><a href="#babelrcæ’ä»¶å®‰è£…" class="headerlink" title="babelrcæ’ä»¶å®‰è£…"></a>babelrcæ’ä»¶å®‰è£…</h4><p>å¦‚ä¸‹ï¼Œè¦å®‰è£… syntax-dynamic-import ï¼Œå®é™…ä¸Šå®‰è£…çš„æ˜¯ babel-plugin-syntax-dynamic-importï¼Œè¦åœ¨åå­—å‰åŠ  babel-plugin-ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;syntax-dynamic-import&quot;,</span><br><span class="line">    &quot;transform-class-properties&quot;,</span><br><span class="line">    &quot;transform-object-rest-spread&quot;,</span><br><span class="line">    [&quot;module-resolver&quot;, &#123;</span><br><span class="line">      &quot;root&quot;: [&quot;./src&quot;]</span><br><span class="line">    &#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="webpackå¸¸ç”¨çŸ¥è¯†-ä¸‹"><a href="#webpackå¸¸ç”¨çŸ¥è¯†-ä¸‹" class="headerlink" title="webpackå¸¸ç”¨çŸ¥è¯† ä¸‹"></a>webpackå¸¸ç”¨çŸ¥è¯† ä¸‹</h2><h3 id="å¦‚ä½•è®©æŸä¸ªæ’ä»¶-åœ¨å…¶ä»–ä»£ç ä¹‹å‰æ‰§è¡Œ"><a href="#å¦‚ä½•è®©æŸä¸ªæ’ä»¶-åœ¨å…¶ä»–ä»£ç ä¹‹å‰æ‰§è¡Œ" class="headerlink" title="å¦‚ä½•è®©æŸä¸ªæ’ä»¶ åœ¨å…¶ä»–ä»£ç ä¹‹å‰æ‰§è¡Œ"></a>å¦‚ä½•è®©æŸä¸ªæ’ä»¶ åœ¨å…¶ä»–ä»£ç ä¹‹å‰æ‰§è¡Œ</h3><p>å¦‚ä¸‹ï¼Œä»ä¸Šåˆ°å°ï¼Œå…ˆåæ‰§è¡Œ babel-polyfill â€“&gt;  react-hot-loader/patch â€“&gt; src/indexï¼Œè¿™æ˜¯å°†react-hot-loader/patchå…ˆäºindexæ‰§è¡Œçš„æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">entry: [</span><br><span class="line">  &apos;babel-polyfill&apos;,</span><br><span class="line">  &apos;react-hot-loader/patch&apos;,</span><br><span class="line">  path.resolve(__dirname, &apos;src/index&apos;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure></p><h2 id="webpack-é»‘çŸ¥è¯†"><a href="#webpack-é»‘çŸ¥è¯†" class="headerlink" title="webpack é»‘çŸ¥è¯†"></a>webpack é»‘çŸ¥è¯†</h2><h3 id="åˆå¹¶ä¸¤ä¸ªwebpackçš„jsé…ç½®"><a href="#åˆå¹¶ä¸¤ä¸ªwebpackçš„jsé…ç½®" class="headerlink" title="åˆå¹¶ä¸¤ä¸ªwebpackçš„jsé…ç½®"></a>åˆå¹¶ä¸¤ä¸ªwebpackçš„jsé…ç½®</h3><p>ä½¿ç”¨webpack-mergeå³å¯ï¼Œé…ç½®å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//webpack.common</span><br><span class="line">module.exports = &#123;&#125;  //module.exportsæ˜¯nodeçš„è¯­æ³•ï¼Œæ˜¯commonjsæ ‡å‡†</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//webpack.dev.js</span><br><span class="line">const merge = require(&apos;webpack-merge&apos;);</span><br><span class="line">const common = require(&apos;./webpack.common&apos;);</span><br><span class="line">let devConfig = &#123;&#125;</span><br><span class="line">module.exports = merge(common, devConfig);</span><br></pre></td></tr></table></figure><h3 id="â€“watch-ä¸-çƒ­æ›´æ–°"><a href="#â€“watch-ä¸-çƒ­æ›´æ–°" class="headerlink" title="â€“watch ä¸ çƒ­æ›´æ–°"></a>â€“watch ä¸ çƒ­æ›´æ–°</h3><p>åœ¨å‘½ä»¤ä¸­åŠ å…¥ â€“watchï¼Œå¯ä»¥è¾¾åˆ°æ•ˆæœï¼šå½“æ–‡ä»¶æ”¹åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨ç¼–è¯‘ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;watch&quot;: &quot;npx webpack --watch --config webpack.dev.js&quot;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>è‡ªåŠ¨ç¼–è¯‘è¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬è¿˜æƒ³å®ƒèƒ½å¤Ÿç¼–è¯‘åè‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼Œä¹Ÿå°±æ˜¯çƒ­æ›´æ–°ï¼Œæœ€å¸¸è§çš„æ˜¯npm startï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;npm webpack-dev-server --config webpack.dev.js&quot;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­devServer.hotç½®ä¸ºtrueï¼Œå°±å¯ä»¥è¾¾åˆ°çƒ­æ›´æ–°ã€‚</p><p>æ‰€ä»¥å¯åŠ¨ webpack-dev-serverï¼Œå¯ä»¥è¾¾åˆ°è‡ªåŠ¨ç¼–è¯‘(â€“watchåŠŸèƒ½)å’Œçƒ­æ›´æ–°åŠŸèƒ½ã€‚</p><h3 id="è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶"><a href="#è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶" class="headerlink" title="è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶"></a>è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶</h3><p>éœ€è¦åŒæ—¶å¦‚ä¸‹é…ç½®ï¼Œæ‰èƒ½è¿›è¡Œè‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&apos;webpack&apos;);</span><br><span class="line"></span><br><span class="line">devServer: &#123;</span><br><span class="line">   hot: true, // å¯ç”¨ webpack çš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§, è¿™ä¸ªéœ€è¦é…åˆï¼š webpack.HotModuleReplacementPluginæ’ä»¶</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line">  new webpack.NamedModulesPlugin(), // æ›´å®¹æ˜“æŸ¥çœ‹(patch)çš„ä¾èµ–</span><br><span class="line">  new webpack.HotModuleReplacementPlugin() // æ›¿æ¢æ’ä»¶</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="webpack-dev-serveré»‘çŸ¥è¯†"><a href="#webpack-dev-serveré»‘çŸ¥è¯†" class="headerlink" title="webpack-dev-serveré»‘çŸ¥è¯†"></a>webpack-dev-serveré»‘çŸ¥è¯†</h3><p>å¦‚ä¸‹ï¼Œå°†çœ‹åˆ°ä»¥ä¸‹å‡ ç‚¹é»‘çŸ¥è¯†ï¼š</p><h4 id="ä¸ºä»€ä¹ˆæ˜¯-0-0-0-0ï¼›"><a href="#ä¸ºä»€ä¹ˆæ˜¯-0-0-0-0ï¼›" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯ 0.0.0.0ï¼›"></a>ä¸ºä»€ä¹ˆæ˜¯ 0.0.0.0ï¼›</h4><p>å½“ç„¶ï¼ŒæœåŠ¡å™¨ä¹Ÿå¯ä»¥è®¾ç½®ä¸º127.0.0.1ï¼Œè¿™ä¸ªéšä½ ï¼Œæ³¨æ„çš„æ˜¯è®¾ç½®ä¸º0.0.0.0æ—¶ï¼Œå¯èƒ½0.0.0.0:58080æœ‰é—®é¢˜ï¼Œåœ¨æµè§ˆå™¨ä¸Šæ”¹ä¸º127å³å¯æ­£å¸¸è®¿é—®ã€‚</p><h4 id="npm-startåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼›"><a href="#npm-startåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼›" class="headerlink" title="npm startåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼›"></a>npm startåè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ï¼›</h4><h4 id="ç¼–è¯‘ç›‘å¬çš„é˜²æŠ–è®¾ç½®ï¼›"><a href="#ç¼–è¯‘ç›‘å¬çš„é˜²æŠ–è®¾ç½®ï¼›" class="headerlink" title="ç¼–è¯‘ç›‘å¬çš„é˜²æŠ–è®¾ç½®ï¼›"></a>ç¼–è¯‘ç›‘å¬çš„é˜²æŠ–è®¾ç½®ï¼›</h4><h4 id="å¿½ç•¥ç›‘æ§æ–‡ä»¶èŒƒå›´è®¾ç½®ï¼›"><a href="#å¿½ç•¥ç›‘æ§æ–‡ä»¶èŒƒå›´è®¾ç½®ï¼›" class="headerlink" title="å¿½ç•¥ç›‘æ§æ–‡ä»¶èŒƒå›´è®¾ç½®ï¼›"></a>å¿½ç•¥ç›‘æ§æ–‡ä»¶èŒƒå›´è®¾ç½®ï¼›</h4><h4 id="proxyçš„ä»£ç†é‡å†™pathRewriteï¼›"><a href="#proxyçš„ä»£ç†é‡å†™pathRewriteï¼›" class="headerlink" title="proxyçš„ä»£ç†é‡å†™pathRewriteï¼›"></a>proxyçš„ä»£ç†é‡å†™pathRewriteï¼›</h4><h4 id="publicPathçš„é»‘çŸ¥è¯†ï¼›"><a href="#publicPathçš„é»‘çŸ¥è¯†ï¼›" class="headerlink" title="publicPathçš„é»‘çŸ¥è¯†ï¼›"></a>publicPathçš„é»‘çŸ¥è¯†ï¼›</h4><figure class="image-box">                <img src="/image/webpack/publicPath.jpg" alt title class>                <p></p>            </figure><p>publicPath çš„ä¼˜å…ˆçº§é«˜äº contentBaseã€‚contentBase ç”¨äºé…ç½®æä¾›é¢å¤–é™æ€æ–‡ä»¶å†…å®¹çš„ç›®å½•ï¼Œä¹‹å‰æåˆ°çš„ publicPath æ˜¯é…ç½®æ„å»ºå¥½çš„ç»“æœä»¥ä»€ä¹ˆæ ·çš„è·¯å¾„å»è®¿é—®ï¼Œè€Œ contentBase æ˜¯é…ç½®é¢å¤–çš„é™æ€æ–‡ä»¶å†…å®¹çš„è®¿é—®è·¯å¾„ï¼Œå³é‚£äº›ä¸ç»è¿‡ webpack æ„å»ºï¼Œä½†æ˜¯éœ€è¦åœ¨ webpack-dev-server ä¸­æä¾›è®¿é—®çš„é™æ€èµ„æºï¼ˆå¦‚éƒ¨åˆ†å›¾ç‰‡ç­‰ï¼‰<br>ä½ ä¸æ‡‚contentBase publicPathä¸ºä»€ä¹ˆï¼Œæ²¡å…³ç³»ï¼Œå…ˆè¿™æ ·ç”¨ç€ã€‚<br>æ›´å¤šé…ç½®è¯´æ˜å¯å‚è€ƒæ˜é‡‘å°å†Œçš„ç¬¬å…­ç« èŠ‚ã€‚</p><p>webpack-dev-serverçš„é…ç½®devServer å®Œæ•´ä»£ç åŠè§£é‡Šå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">    clientLogLevel: &apos;warning&apos;, // å¯èƒ½çš„å€¼æœ‰ none, error, warning æˆ–è€… infoï¼ˆé»˜è®¤å€¼)</span><br><span class="line">    hot: true, // å¯ç”¨ webpack çš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§, è¿™ä¸ªéœ€è¦é…åˆï¼š webpack.HotModuleReplacementPluginæ’ä»¶</span><br><span class="line">    contentBase: path.join(__dirname, &quot;dist&quot;), // å‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ï¼Œ é»˜è®¤æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä½œä¸ºæä¾›å†…å®¹çš„ç›®å½•</span><br><span class="line">    compress: true, // ä¸€åˆ‡æœåŠ¡éƒ½å¯ç”¨gzip å‹ç¼©</span><br><span class="line">    host: &apos;0.0.0.0&apos;, // æŒ‡å®šä½¿ç”¨ä¸€ä¸ª hostã€‚é»˜è®¤æ˜¯ localhostã€‚å¦‚æœä½ å¸Œæœ›æœåŠ¡å™¨å¤–éƒ¨å¯è®¿é—® 0.0.0.0</span><br><span class="line">    port: 58080, // ç«¯å£</span><br><span class="line">    open: true, // æ˜¯å¦æ‰“å¼€æµè§ˆå™¨</span><br><span class="line">    overlay: &#123; // å‡ºç°é”™è¯¯æˆ–è€…è­¦å‘Šçš„æ—¶å€™ï¼Œæ˜¯å¦è¦†ç›–é¡µé¢çº¿ä¸Šé”™è¯¯æ¶ˆæ¯ã€‚</span><br><span class="line">      warnings: true,</span><br><span class="line">      errors: true</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    publicPath: &apos;/&apos;, // æ­¤è·¯å¾„ä¸‹çš„æ‰“åŒ…æ–‡ä»¶å¯åœ¨æµè§ˆå™¨ä¸­è®¿é—®ã€‚ï¼ˆæ³¨æ„è‹¥æ— ç‰¹æ®Šè¦æ±‚ï¼Œä¸€å®šè®¾ç½®ä¸º&apos;/&apos;,é»˜è®¤é…ç½®ä¸º &apos;/                   //&apos;ï¼Œå¤§å¤šæ—¶å€™æˆ‘ä»¬ä¸ä¼šå»æ”¹ï¼Œä½¿ç”¨é»˜è®¤é…ç½®ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">    proxy: &#123; // è®¾ç½®ä»£ç†</span><br><span class="line">      &quot;/api&quot;: &#123; // è®¿é—®apiå¼€å¤´çš„è¯·æ±‚ï¼Œä¼šè·³è½¬åˆ°  ä¸‹é¢çš„targeté…ç½®</span><br><span class="line">        target: &quot;http://192.168.0.102:8080&quot;,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          &quot;^/api&quot;: &quot;/mockjsdata/5/api&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        //ä»¥ä¸Šé…ç½®çš„æ„æ€å°±æ˜¯ /api/getuser     =&gt;  http://192.168.0.102:8080//mockjsdata/5/api/getuser</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    quiet: true, // necessary for FriendlyErrorsPlugin. å¯ç”¨ quiet åï¼Œé™¤äº†åˆå§‹å¯åŠ¨ä¿¡æ¯ä¹‹å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¸ä¼šè¢«æ‰“å°åˆ°æ§åˆ¶å°ã€‚è¿™ä¹Ÿæ„å‘³ç€æ¥è‡ª webpack çš„é”™è¯¯æˆ–è­¦å‘Šåœ¨æ§åˆ¶å°ä¸å¯è§ã€‚</span><br><span class="line">    watchOptions: &#123; // ç›‘è§†æ–‡ä»¶ç›¸å…³çš„æ§åˆ¶é€‰é¡¹</span><br><span class="line">      poll: true, // webpack ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ(file system)è·å–æ–‡ä»¶æ”¹åŠ¨çš„é€šçŸ¥ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸ä¼šæ­£å¸¸å·¥ä½œã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ Network File System (NFS) æ—¶ã€‚Vagrant ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨è½®è¯¢. poll: trueã€‚å½“ç„¶ pollä¹Ÿå¯ä»¥è®¾ç½®æˆæ¯«ç§’æ•°ï¼Œæ¯”å¦‚ï¼š  poll: 1000</span><br><span class="line">      ignored: /node_modules/, // å¿½ç•¥ç›‘æ§çš„æ–‡ä»¶å¤¹ï¼Œæ­£åˆ™</span><br><span class="line">      aggregateTimeout: 300 // é»˜è®¤å€¼ï¼Œå½“ç¬¬ä¸€ä¸ªæ–‡ä»¶æ›´æ”¹ï¼Œä¼šåœ¨é‡æ–°æ„å»ºå‰å¢åŠ å»¶è¿Ÿï¼Œé˜²æŠ–çš„åŠŸèƒ½ï¼Œå¦‚æœä½ è¿ç»­å‡ æ¬¡æ”¹çš„æ–‡ä»¶é—´éš”å°äº300æ¯«ç§’ï¼Œä¼šå»¶è¿Ÿç¼–è¯‘</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="æœåŠ¡å™¨é»˜è®¤è¯»å–index-html"><a href="#æœåŠ¡å™¨é»˜è®¤è¯»å–index-html" class="headerlink" title="æœåŠ¡å™¨é»˜è®¤è¯»å–index.html"></a>æœåŠ¡å™¨é»˜è®¤è¯»å–index.html</h3><p>å…¥å£HTMLè‹¥ä¸æ˜¯index.htmlåˆ™éœ€è¡¥å…¨ï¼š<br><figure class="image-box">                <img src="/image/webpack/index.jpg" alt title class>                <p></p>            </figure></p><h3 id="resolveä¹‹é»˜è®¤æ‰©å±•æ–‡ä»¶å"><a href="#resolveä¹‹é»˜è®¤æ‰©å±•æ–‡ä»¶å" class="headerlink" title="resolveä¹‹é»˜è®¤æ‰©å±•æ–‡ä»¶å"></a>resolveä¹‹é»˜è®¤æ‰©å±•æ–‡ä»¶å</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    alias: &#123; // é…ç½®åˆ«å</span><br><span class="line">      &apos;@&apos;: path.resolve(__dirname, &apos;src/&apos;)</span><br><span class="line">    &#125;,</span><br><span class="line">    extensions: [&quot;.js&quot;, &quot;.vue&quot;, &quot;.json&quot;] // é»˜è®¤å€¼: [&quot;.js&quot;,&quot;.json&quot;]  æ¨¡å—åå­—å¯ä»¥çœç•¥çš„åç¼€å</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="name-id-hash-chunkhash"><a href="#name-id-hash-chunkhash" class="headerlink" title="[name][id][hash][chunkhash]"></a>[name][id][hash][chunkhash]</h3><h4 id="name"><a href="#name" class="headerlink" title="[name]"></a>[name]</h4><p>æ‰€æœ‰çš„nameï¼Œé»˜è®¤ä¸ºentryä¸­å®šä¹‰çš„ï¼Œå¦‚æœentryçš„å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™é»˜è®¤ä¸ºmainã€‚<br>å¦‚ï¼š<br>ä¸‹é¢ä»£ç æ˜¯entryä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œ[name] ä¸ºé»˜è®¤çš„main<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">entry: &apos;./src/index.js&apos;,</span><br><span class="line"></span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: path.resolve(__dirname,&apos;node_modules&apos;),</span><br><span class="line">                 enforce: true,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"> output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,//main.24673fe716edfcec07a9.js</span><br><span class="line">    chunkFilename: &apos;[name].chunk.js&apos;, //commons~main.chunk.js è¿™é‡Œå¤šäº†ä¸€ä¸ªcommonsï¼Œæ˜¯å› ä¸ºsplitChunksçš„commonsé…ç½®çš„ï¼Œé»˜è®¤åŠ commons</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line"> new HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: &apos;AICODER å…¨æ ˆçº¿ä¸‹å®ä¹ &apos;, // é»˜è®¤å€¼ï¼šWebpack App</span><br><span class="line">      filename: &apos;indexMyApp.html&apos;, // é»˜è®¤å€¼ï¼š &apos;index.html&apos;</span><br><span class="line">      template: path.resolve(__dirname, &apos;src/tempHtml.html&apos;),</span><br><span class="line">      minify: &#123;</span><br><span class="line">        collapseWhitespace: true,</span><br><span class="line">        removeComments: true, // æ˜¯å¦ç§»é™¤æ³¨é‡Š</span><br><span class="line">        removeAttributeQuotes: true // ç§»é™¤å±æ€§çš„å¼•å·</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">  new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &apos;[name][hash].css&apos;, // main24673fe716edfcec07a9.css</span><br><span class="line">      chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸‹é¢ä»£ç æ˜¯entryä¸ºå¯¹è±¡æ—¶ï¼Œ[name] ä¸ºentryçš„keyå€¼ï¼Œä¸‹é¢çš„ä¾‹å­ï¼Œ[name]å°±æ˜¯appIndexï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  appIndex:&apos;./src/index.js&apos;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: path.resolve(__dirname,&apos;node_modules&apos;),</span><br><span class="line">                 enforce: true,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"> output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,//appIndex.90feeea169ea4a86288d.js</span><br><span class="line">    chunkFilename: &apos;[name].chunk.js&apos;, //commons~appIndex.chunk.js</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line"> new HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: &apos;AICODER å…¨æ ˆçº¿ä¸‹å®ä¹ &apos;, // é»˜è®¤å€¼ï¼šWebpack App</span><br><span class="line">      filename: &apos;indexMyApp.html&apos;, // é»˜è®¤å€¼ï¼š &apos;index.html&apos;</span><br><span class="line">      template: path.resolve(__dirname, &apos;src/tempHtml.html&apos;),</span><br><span class="line">      minify: &#123;</span><br><span class="line">        collapseWhitespace: true,</span><br><span class="line">        removeComments: true, // æ˜¯å¦ç§»é™¤æ³¨é‡Š</span><br><span class="line">        removeAttributeQuotes: true // ç§»é™¤å±æ€§çš„å¼•å·</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">  new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &apos;[name][hash].css&apos;, // appIndex90feeea169ea4a86288d.css</span><br><span class="line">      chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></p><p>å¯åœ¨æ’ä»¶ä¸­è‡ªå®šä¹‰å¯¹åº”æ¨¡å—çš„[name]ï¼Œä¾‹å¦‚å®šä¹‰splitChunksæ¨¡å—ä¸‹name: â€˜custom_chunkNameâ€™ï¼Œä»–ä¼šè¦†ç›–entryä¸­å®šä¹‰çš„nameï¼Œç”±æ­¤splitChunksæ’ä»¶ç”Ÿæˆçš„æ–‡ä»¶å°†[name]å€¼ä¸ºcustom_chunkName:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">entry: &#123;</span><br><span class="line">  appIndex:&apos;./src/index.js&apos;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: path.resolve(__dirname,&apos;node_modules&apos;),</span><br><span class="line">                 enforce: true,</span><br><span class="line">                 name: &apos;custom_chunkName&apos;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"> output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,//appIndex.c81ab09b0bd828f71845.js</span><br><span class="line">    chunkFilename: &apos;[name].chunk.js&apos;, //customChunkNameQQ.chunk.js</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &apos;[name][hash].css&apos;, // appIndexc81ab09b0bd828f71845.css</span><br><span class="line">      chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">//å…¶ä»–è·Ÿä¸Šé¢ä»£ç ä¸€æ ·ï¼Œåªåˆ—ä¸ä¸Šä¸åŒçš„ä»£ç ï¼š</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡filenameå®šä¹‰splitChunksæ¨¡å—ä¸‹è¾“å‡ºæ–‡ä»¶çš„åå­—ï¼Œè¿™ä¸ªä¼˜å…ˆçº§æœ€é«˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  appIndex:&apos;./src/index.js&apos;</span><br><span class="line">&#125;,</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">              commons: &#123;</span><br><span class="line">                 chunks: &apos;initial&apos;,</span><br><span class="line">                 test: path.resolve(__dirname,&apos;node_modules&apos;),</span><br><span class="line">                 enforce: true,</span><br><span class="line">                 name: &apos;customChunkNameQQ&apos;,</span><br><span class="line">                 filename: &apos;chunckNiceName.js&apos;,</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line"> output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,//appIndex.c81ab09b0bd828f71845.js</span><br><span class="line">    chunkFilename: &apos;[name].chunk.js&apos;, //chunckNiceName.js</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &apos;[name][hash].css&apos;, // appIndexc81ab09b0bd828f71845.css</span><br><span class="line">      chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">//å…¶ä»–è·Ÿä¸Šé¢ä»£ç ä¸€æ ·ï¼Œåªåˆ—ä¸ä¸Šä¸åŒçš„ä»£ç ï¼š</span><br></pre></td></tr></table></figure><p>å…³äº[name]å°ç»“ï¼š<br>å¦‚æœentryä¸ºå­—ç¬¦ä¸²ï¼Œnameå€¼é»˜è®¤ä¸ºmainï¼›<br>å¦‚æœentryä»¥å¯¹è±¡å½¢å¼ï¼Œnameå€¼ä¸ºå¯¹è±¡çš„keyå€¼ï¼›<br>å„ä¸ªæ’ä»¶(å¦‚cssã€jså¤„ç†æ’ä»¶)å¯è‡ªå®šä¹‰æœ¬æ’ä»¶ç”Ÿæˆçš„jsçš„æ–‡ä»¶åï¼Œæˆ–è‡ªå®šnameå€¼è¦†ç›–entryä¸­å®šä¹‰çš„nameå€¼ã€‚</p><h4 id="id"><a href="#id" class="headerlink" title="[id]"></a>[id]</h4><p>è¿™ä¸ªæœ€ç®€å•ï¼Œ[id]å…¶å®å°±æ˜¯æ•°å­—1,2,3,4â€¦..ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,</span><br><span class="line">    chunkFilename: &apos;[id].chunk.js&apos;,</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="hash"><a href="#hash" class="headerlink" title="[hash]"></a>[hash]</h4><p>è¿™å°±æ˜¯ä¸€ä¸ªhashç ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ¯æ¬¡buildçš„hashå€¼éƒ½æ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯æ‰“åŒ…å®Œæˆåï¼Œjs\cssæ–‡ä»¶åçš„hashå€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚<br>hashä¸€ä¸ªå…¸å‹ç‰¹å¾æ˜¯ï¼Œåªæœ‰æœ‰ä¸€ä¸ªæ–‡ä»¶æ”¹å˜ï¼Œé‚£ä¹ˆé‡æ–°æ‰“åŒ…åhashå€¼å°†å˜åŒ–ï¼Œæ‰€ä»¥ä½¿ç”¨hashè¾“å‡ºæ–‡ä»¶åçš„éƒ½å°†å˜åŒ–ï¼Œ<br>æ‰€ä»¥ä¸šåŠ¡jsï¼Œå¿…é¡»ä½¿ç”¨hashï¼Œè€Œä¸èƒ½ä½¿ç”¨chunkhashã€‚</p><h4 id="chunkhash-åŠ-chunkhash-ä¸-hash-çš„å¼‚åŒ"><a href="#chunkhash-åŠ-chunkhash-ä¸-hash-çš„å¼‚åŒ" class="headerlink" title="[chunkhash]åŠ [chunkhash]ä¸[hash]çš„å¼‚åŒ"></a>[chunkhash]åŠ [chunkhash]ä¸[hash]çš„å¼‚åŒ</h4><p>ä¾èµ–åº“çš„æºç ï¼Œæˆ‘ä»¬ä¸€èˆ¬å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ªåº“jsï¼Œè¿™ä¸ªjså¿…é¡»ä½¿ç”¨chunkhashï¼Œ<br>chunkhashçš„åŸåˆ™æ˜¯åªè¦chunkhashå¯¹åº”çš„æ¨¡å—æ–‡ä»¶ä¸å˜ï¼Œå°±ç®—å…¶ä»–æ–‡ä»¶æœ‰å˜åŒ–äº†ï¼Œé‡æ–°æ‰“åŒ…äº†ï¼Œæ”¹å˜çš„æ˜¯hashå€¼ï¼Œchunkhashå€¼ä¿æŒä¸å˜ã€‚<br><strong>éœ€ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¿®æ”¹æ–‡ä»¶å’Œå¢åŠ æ–‡ä»¶ï¼Œwebpackç¼–è¯‘ç”Ÿæˆchunkhashçš„ç­–ç•¥æ˜¯ä¸åŒçš„ï¼Œä¸Šé¢æ‰€è¯´çš„åªé€‚åˆä¿®æ”¹æ–‡ä»¶çš„æƒ…å†µï¼Œå¦‚æœå¢åŠ æ–‡ä»¶æˆ–åˆ é™¤æ–‡ä»¶ï¼Œå°±ç®—åº“æ–‡ä»¶ä¸å˜ï¼Œè¿˜æ˜¯ä¼šäº§ç”Ÿä¸åŒçš„chunkhashï¼ŒåŸå› åœ¨ä¸webpackä¼šæ ¹æ®æ€»ä½“æ–‡ä»¶ï¼Œä¸ºæ¯ä¸ªæ–‡ä»¶è®¾ç½®ä¸€ä¸ªindexè¿›è¡Œç¼–è¯‘ï¼Œå¢åŠ æˆ–åˆ é™¤æ–‡ä»¶éƒ½ä¼šæ”¹å˜æ•´ä½“çš„indexï¼Œä»è€Œå¯¼è‡´chunkhashæ”¹å˜ï¼Œä¸ºäº†é˜²æ­¢è¿™ä¸€æƒ…å†µï¼Œå¯é…ç½®webpack.HashedModuleIdsPlugin</strong><br>å…³äºchunkhashçš„è§„åˆ™ï¼Œæ›´å¤šè¯·çœ‹ç« èŠ‚3.12:ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ– ä¹‹ webpack.HashedModuleIdsPluginã€‹<br>å¯¹äº chunkhashä¸HashedModuleIdsPlugin çœ‹å‚çœ‹ <a href="https://www.cnblogs.com/zhishaofei/p/8590627.html" target="_blank" rel="noopener">è¿™é‡Œ</a><br><strong>æ‰€ä»¥ä¸ºäº†åˆ©ç”¨httpç¼“å­˜ï¼Œå¯¹äºä¾èµ–æºç åº“jsï¼Œå¿…é¡»ä½¿ç”¨chunkhashï¼Œä¸šåŠ¡jså¿…é¡»ä½¿ç”¨hashï¼Œå¦åˆ™å°†å¤±å»åº“ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»çš„æ„ä¹‰</strong></p><h3 id="å…³äºchunkFilename"><a href="#å…³äºchunkFilename" class="headerlink" title="å…³äºchunkFilename"></a>å…³äºchunkFilename</h3><p>chunkFilenameæ˜¯ç”¨æ¥é…ç½®æ— å…¥å£çš„chunkè¾“å‡ºçš„åå­—çš„ã€‚<br>1.ä»£ç å¦‚ä¸‹ï¼Œè¿›è¡Œæ‰“åŒ…ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">    appIndex:&apos;./src/index.js&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mode: &apos;production&apos;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &apos;[name].[hash].js&apos;,</span><br><span class="line">    path: path.resolve(__dirname, &apos;dist&apos;)</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        commons: &#123;</span><br><span class="line">           chunks: &apos;initial&apos;,</span><br><span class="line">           test: path.resolve(__dirname,&apos;node_modules&apos;),</span><br><span class="line">           enforce: true,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>æ‰“åŒ…åç”Ÿæˆï¼š<br><figure class="image-box">                <img src="/image/webpack/chunkfilename1.png" alt title class>                <p></p>            </figure><br>å› ä¸ºsplitChunks.cacheGroups.commonsæ²¡æœ‰å®šä¹‰nameï¼Œæ‰€ä»¥è¾“å‡ºæ–‡ä»¶ï¼Œé»˜è®¤åŠ  commons~â€¦.js;</p><p>2.ä¸1å…¶ä»–é…ç½®ä¸å˜ï¼ŒåŠ ä¸Šnameï¼Œå†æ‰“åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">    cacheGroups: &#123;</span><br><span class="line">      commons: &#123;</span><br><span class="line">        ...</span><br><span class="line">         name: &apos;lodashAndAxios&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ‰“åŒ…åç”Ÿæˆï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªåˆ†ç¦»å‡ºæ¥çš„ä»£ç å—ï¼Œç”¨çš„æ˜¯output.filenameçš„é…ç½®ï¼š<br><figure class="image-box">                <img src="/image/webpack/chunkfilename2.png" alt title class>                <p></p>            </figure></p><p>3.ä¸2å…¶ä»–é…ç½®ä¸å˜ï¼ŒåŠ ä¸Šchunkfilenameï¼Œå†æ‰“åŒ…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">    ...</span><br><span class="line">    chunkFilename: &apos;[name]._chunk_[chunkhash].js&apos;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure></p><p>æ‰“åŒ…åç”Ÿæˆï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªåˆ†ç¦»å‡ºæ¥çš„ä»£ç å—ï¼Œç”¨çš„æ˜¯output.chunkFilenameçš„é…ç½®ï¼š<br><figure class="image-box">                <img src="/image/webpack/chunkfilename3.png" alt title class>                <p></p>            </figure></p><p>è¿™å•ç‹¬åˆ†ç¦»çš„ä»£ç ï¼Œåœ¨entryä¸­æ²¡æœ‰å…¥å£ï¼Œåªé€šè¿‡splitChunks.cacheGroups.testè¿›è¡ŒåŒ¹é…ï¼Œæ‰€ä»¥chunkFilename æ˜¯ç”¨æ¥é…ç½®æ²¡æœ‰å…¥å£çš„åç§°çš„ï¼Œ<br>å¦‚æœä¸é…ç½®chunkFilenameï¼Œå°†ä¼šæ ¹æ®filenameè¾“å‡ºã€‚ä¸é…ç½®splitChunks.cacheGroups.nameï¼Œä¼šç»™è¾“å‡ºæ–‡ä»¶åé»˜è®¤åŠ commons~</p><h3 id="chunkçš„åç§°"><a href="#chunkçš„åç§°" class="headerlink" title="chunkçš„åç§°"></a>chunkçš„åç§°</h3><p>chunkçš„åç§°å’Œentryçš„é…ç½®æœ‰å…³ï¼›</p><ul><li>å¦‚æœentryæ˜¯ä¸€ä¸ªstringæˆ–arrayï¼Œåªä¼šç”Ÿæˆä¸€ä¸ªchunkï¼Œè¿™æ˜¯çš„chunkçš„åç§°å°±æ˜¯mainï¼›</li><li>å¦‚æœentryæ˜¯ä¸€ä¸ªObjectï¼Œå°±å¯èƒ½ä¼šå‡ºç°å¤šä¸ªchunk,è¿™æ—¶chunkçš„åç§°æ˜¯Objecté”®å€¼å¯¹ä¸­å¥çš„åç§°ã€‚</li></ul><h3 id="ä»ä»£ç åˆ†ç¦»çœ‹chunkä¸minChunks"><a href="#ä»ä»£ç åˆ†ç¦»çœ‹chunkä¸minChunks" class="headerlink" title="ä»ä»£ç åˆ†ç¦»çœ‹chunkä¸minChunks"></a>ä»ä»£ç åˆ†ç¦»çœ‹chunkä¸minChunks</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">entry: &#123;</span><br><span class="line">  a: &apos;./path/to/my/entry/file.js&apos;,</span><br><span class="line">  b: &apos;./path/to/my/entry/app.js&apos;,</span><br><span class="line">&#125;</span><br><span class="line">optimization: &#123;</span><br><span class="line">  splitChunks: &#123;</span><br><span class="line">    cacheGroups: &#123;</span><br><span class="line">      commons: &#123;</span><br><span class="line">        &lt;!-- å¦‚æœä¸æŒ‡å®šchunksï¼Œå°†ä¼šä»ç°æœ‰çš„æ‰€æœ‰chunkä¸­æå–å…¬å…±ä»£ç  --&gt;</span><br><span class="line">         chunks: [&apos;a&apos;,&apos;b&apos;],//aã€bæ˜¯entryä¸­çš„ä¸¤ä¸ªchunkï¼Œä»aï¼Œbä¸­æŠ½å–å…¬å…±çš„ä»£ç ï¼Œæœ€ç»ˆä¼šå½¢æˆä¸€ä¸ªåå­—ä¸ºappCommonçš„jsï¼Œå’Œa.jså’Œb.js</span><br><span class="line">         name: &apos;appCommon&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªå‚æ•°æ˜¯minChunksï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">minChunks = 2;</span><br><span class="line">chunks = [&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;,&apos;e&apos;]</span><br></pre></td></tr></table></figure></p><p>åªè¦åœ¨abcdeæ¨¡å—ä¸­ä»»æ„ä¸¤ä¸ªæ¨¡å—å‡ºç°äº†å…¬å…±ä»£ç çš„ï¼Œéƒ½è¢«æå–ã€‚<br>minChunksä¸»è¦åº”å¯¹ï¼Œå¾ˆå¯èƒ½abcdeæ²¡æœ‰ä¸€ä¸ªå…¬å…±ä»£ç ï¼Œåœ¨æ‰€æœ‰æ¨¡å—ä¸­éƒ½æœ‰çš„æƒ…å†µã€‚</p><h3 id="devæ¨¡å¼ç¦chunkhash"><a href="#devæ¨¡å¼ç¦chunkhash" class="headerlink" title="devæ¨¡å¼ç¦chunkhash"></a>devæ¨¡å¼ç¦chunkhash</h3><p>åœ¨devæ¨¡å¼ä¸‹ï¼Œåªèƒ½ç”¨hashï¼Œä¸èƒ½ä½¿ç”¨chunkhashï¼Œå¦åˆ™æŠ¥é”™ã€‚</p><h3 id="æ¨¡å—è§£æè§„åˆ™ä¸resolve"><a href="#æ¨¡å—è§£æè§„åˆ™ä¸resolve" class="headerlink" title="æ¨¡å—è§£æè§„åˆ™ä¸resolve"></a>æ¨¡å—è§£æè§„åˆ™ä¸resolve</h3><h4 id="è§£æç›¸å¯¹è·¯å¾„"><a href="#è§£æç›¸å¯¹è·¯å¾„" class="headerlink" title="è§£æç›¸å¯¹è·¯å¾„"></a>è§£æç›¸å¯¹è·¯å¾„</h4><ul><li>æŸ¥æ‰¾ç›¸å¯¹å½“å‰æ¨¡å—çš„è·¯å¾„ä¸‹æ˜¯å¦æœ‰å¯¹åº”æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</li><li>æ˜¯æ–‡ä»¶åˆ™ç›´æ¥åŠ è½½</li><li>æ˜¯æ–‡ä»¶å¤¹åˆ™ç»§ç»­æŸ¥æ‰¾æ–‡ä»¶å¤¹ä¸‹çš„ package.json æ–‡ä»¶</li><li>æœ‰ package.json æ–‡ä»¶åˆ™æŒ‰ç…§æ–‡ä»¶ä¸­ main å­—æ®µçš„æ–‡ä»¶åæ¥æŸ¥æ‰¾æ–‡ä»¶</li><li>æ—  package.json æˆ–è€…æ—  main å­—æ®µåˆ™æŸ¥æ‰¾ index.js æ–‡ä»¶<h4 id="è§£ææ¨¡å—å"><a href="#è§£ææ¨¡å—å" class="headerlink" title="è§£ææ¨¡å—å"></a>è§£ææ¨¡å—å</h4>æŸ¥æ‰¾å½“å‰æ–‡ä»¶ç›®å½•ä¸‹ï¼Œçˆ¶çº§ç›®å½•åŠä»¥ä¸Šç›®å½•ä¸‹çš„ node_modules æ–‡ä»¶å¤¹ï¼Œçœ‹æ˜¯å¦æœ‰å¯¹åº”åç§°çš„æ¨¡å—<h4 id="è§£æç»å¯¹è·¯å¾„ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"><a href="#è§£æç»å¯¹è·¯å¾„ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="è§£æç»å¯¹è·¯å¾„ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"></a>è§£æç»å¯¹è·¯å¾„ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h4>ç›´æ¥æŸ¥æ‰¾å¯¹åº”è·¯å¾„çš„æ–‡ä»¶</li></ul><p>åœ¨ webpack é…ç½®ä¸­ï¼Œå’Œæ¨¡å—è·¯å¾„è§£æç›¸å…³çš„é…ç½®éƒ½åœ¨ resolve å­—æ®µä¸‹ã€‚</p><h4 id="resolve-å¸¸ç”¨é…ç½®ï¼š"><a href="#resolve-å¸¸ç”¨é…ç½®ï¼š" class="headerlink" title="resolve å¸¸ç”¨é…ç½®ï¼š"></a>resolve å¸¸ç”¨é…ç½®ï¼š</h4><p>module.exports = {<br>   resolve: {<br>      alias: { // é…ç½®åˆ«å<br>         utils: path.resolve(<strong>dirname, â€˜src/utilsâ€™), // æ¨¡ç³ŠåŒ¹é…ï¼Œæ„å‘³ç€åªè¦æ¨¡å—è·¯å¾„ä¸­æºå¸¦utils å°±å¯ä»¥è¢«æ›¿æ¢æ‰<br>         component$: path.resolve(</strong>dirname, â€˜src/componentâ€™) // åªä¼šåŒ¹é… import â€˜componentâ€™ï¼Œ è¿™æ˜¯ç²¾ç¡®åŒ¹é…æ–¹æ³•ã€‚<br>      },<br>      modules: [<br>        path.resolve(__dirname, â€˜node_modulesâ€™), // æŒ‡å®šå½“å‰ç›®å½•ä¸‹çš„ node_modules ä¼˜å…ˆæŸ¥æ‰¾<br>        â€˜node_modulesâ€™, // å¦‚æœæœ‰ä¸€äº›ç±»åº“æ˜¯æ”¾åœ¨ä¸€äº›å¥‡æ€ªçš„åœ°æ–¹çš„ï¼Œä½ å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„è·¯å¾„æˆ–è€…ç›®å½•<br>      ],<br>      mainFiles: [â€˜indexâ€™], //å½“ç›®å½•ä¸‹æ²¡æœ‰ package.json æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬è¯´ä¼šé»˜è®¤ä½¿ç”¨ç›®å½•ä¸‹çš„ index.js è¿™ä¸ªæ–‡ä»¶,å°±æ˜¯è¿™ä¸ªå­—æ®µé…ç½®çš„ã€‚// ä½ å¯ä»¥æ·»åŠ å…¶ä»–é»˜è®¤ä½¿ç”¨çš„æ–‡ä»¶å<br>      extensions: [â€œ.jsâ€, â€œ.vueâ€, â€œ.jsonâ€] // é»˜è®¤å€¼: [â€œ.jsâ€,â€.jsonâ€]  æ¨¡å—åå­—å¯ä»¥çœç•¥çš„åç¼€å<br>  },<br>}</p><h3 id="loaderçš„è§„åˆ™æ¡ä»¶é…ç½®"><a href="#loaderçš„è§„åˆ™æ¡ä»¶é…ç½®" class="headerlink" title="loaderçš„è§„åˆ™æ¡ä»¶é…ç½®"></a>loaderçš„è§„åˆ™æ¡ä»¶é…ç½®</h3><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé…ç½® loader çš„åŒ¹é…æ¡ä»¶æ—¶ï¼Œåªè¦ä½¿ç”¨ test å­—æ®µå°±å¥½äº†ï¼Œå¾ˆå¤šæ—¶å€™éƒ½åªéœ€è¦åŒ¹é…æ–‡ä»¶åç¼€åæ¥å†³å®šä½¿ç”¨ä»€ä¹ˆ loaderï¼Œä½†ä¹Ÿä¸æ’é™¤åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®æ¯”è¾ƒå¤æ‚çš„åŒ¹é…æ¡ä»¶ã€‚webpack çš„è§„åˆ™æä¾›äº†å¤šç§é…ç½®å½¢å¼ï¼š</p><ul><li>{ test: â€¦ } åŒ¹é…ç‰¹å®šæ¡ä»¶</li><li>{ include: â€¦ } åŒ¹é…ç‰¹å®šè·¯å¾„</li><li>{ exclude: â€¦ } æ’é™¤ç‰¹å®šè·¯å¾„</li><li>{ and: [â€¦] }å¿…é¡»åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶</li><li>{ or: [â€¦] } åŒ¹é…æ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶</li><li><p>{ not: [â€¦] } æ’é™¤åŒ¹é…æ•°ç»„ä¸­æ‰€æœ‰æ¡ä»¶<br>ä¸Šè¿°çš„æ‰€è°“æ¡ä»¶çš„å€¼å¯ä»¥æ˜¯ï¼š</p></li><li><p>å­—ç¬¦ä¸²ï¼šå¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ï¼Œæ‰€ä»¥æ˜¯å­—ç¬¦ä¸²çš„è¯ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æä¾›ç»å¯¹è·¯å¾„</p></li><li>æ­£åˆ™è¡¨è¾¾å¼ï¼šè°ƒç”¨æ­£åˆ™çš„ test æ–¹æ³•æ¥åˆ¤æ–­åŒ¹é…</li><li>å‡½æ•°ï¼š(path) =&gt; booleanï¼Œè¿”å› true è¡¨ç¤ºåŒ¹é…</li><li>æ•°ç»„ï¼šè‡³å°‘åŒ…å«ä¸€ä¸ªæ¡ä»¶çš„æ•°ç»„</li><li>å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§å€¼çš„æ¡ä»¶</li></ul><h3 id="å…³äºoutput"><a href="#å…³äºoutput" class="headerlink" title="å…³äºoutput"></a>å…³äºoutput</h3><p>å•ä¸ªå…¥å£æ˜¯é…ç½®æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const config = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    main: &apos;./path/to/my/entry/file.js&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">const config = &#123;</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &apos;bundle.js&apos;,</span><br><span class="line">    path: &apos;/home/proj/public/assets&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><p>å¤šä¸ªå…¥å£æ—¶é…ç½®æ–¹æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    app: &apos;./src/app.js&apos;,</span><br><span class="line">    search: &apos;./src/search.js&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: &apos;[name].js&apos;,//å¤šä¸ªæ—¶ï¼Œç”¨å ä½ç¬¦[name]çš„æ–¹å¼å®šä¹‰</span><br><span class="line">    path: __dirname + &apos;/dist&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="css-jsæ˜¯æ€ä¹ˆåµŒå…¥html"><a href="#css-jsæ˜¯æ€ä¹ˆåµŒå…¥html" class="headerlink" title="css\jsæ˜¯æ€ä¹ˆåµŒå…¥html"></a>css\jsæ˜¯æ€ä¹ˆåµŒå…¥html</h3><p>æ— è®ºoutputå‡ºæ¥ä¸€ä¸ªæˆ–å¤šä¸ªjsï¼Œhtml-webpack-pluginéƒ½ä¼šå°†jsã€cssåµŒå…¥åˆ°htmlå†…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br><span class="line">new HtmlWebpackPlugin(&#123;</span><br><span class="line">      title: &apos;AICODER å…¨æ ˆçº¿ä¸‹å®ä¹ &apos;, // é»˜è®¤å€¼ï¼šWebpack App</span><br><span class="line">      filename: &apos;indexMyApp.html&apos;, // é»˜è®¤å€¼ï¼š &apos;index.html&apos;</span><br><span class="line">      template: path.resolve(__dirname, &apos;src/tempHtml.html&apos;),</span><br><span class="line">      minify: &#123;</span><br><span class="line">        collapseWhitespace: true,</span><br><span class="line">        removeComments: true, // æ˜¯å¦ç§»é™¤æ³¨é‡Š</span><br><span class="line">        removeAttributeQuotes: true // ç§»é™¤å±æ€§çš„å¼•å·</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br></pre></td></tr></table></figure></p><h3 id="æ¨¡æ¿index-htmlçš„ejså†™æ³•ä¸html-webpack-pluginé…åˆ"><a href="#æ¨¡æ¿index-htmlçš„ejså†™æ³•ä¸html-webpack-pluginé…åˆ" class="headerlink" title="æ¨¡æ¿index.htmlçš„ejså†™æ³•ä¸html-webpack-pluginé…åˆ"></a>æ¨¡æ¿index.htmlçš„ejså†™æ³•ä¸html-webpack-pluginé…åˆ</h3><p>æ¨¡æ¿æ–‡ä»¶index.htmlå¯ä»¥å†™ejsï¼Œejsè¯­æ³•å…è®¸å†™jsï¼Œç„¶åæ¯è¡Œç”¨&lt;%= %&gt;åŒ…èµ·æ¥å³å¯:<br><figure class="image-box">                <img src="/image/webpack/tpl1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/tpl2.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/tpl3.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/tpl4.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/tpl5.png" alt title class>                <p></p>            </figure></p><p>æ³¨æ„ï¼š1.å½“æœ‰éœ€æ±‚æŠŠä¸€ä¸ªjsæ”¾åœ¨html çš„headerä¸Šï¼Œä¸€ä¸ªåœ¨bodyä¸Šæ—¶ï¼Œå¯ä»¥å®šä¹‰æ¨¡æ¿scriptå¼•ç”¨ï¼Œæ­¤æ—¶å¿…é¡»è®¾ç½®injectä¸ºfasleï¼Œè¡¨ç¤ºä¸é€‚ç”¨æ’ä»¶é»˜è®¤åµŒå…¥ã€‚<br>2.ä¸Šé¢ejsæ¨¡æ¿ä¸Šä¸€å®šè¦å†™æˆhtmlWebpackPluginï¼Œå¦åˆ™undefinedï¼Œç›®å‰ä¸çŸ¥é“ä¸ºä»€ä¹ˆå†™æˆHtmlWebpackPluginå°±å¯ä»¥å…³è”åˆ°æ’ä»¶html-webpack-plugin</p><h3 id="å¤šé¡µé¢htmlçš„é…ç½®æ‰“åŒ…"><a href="#å¤šé¡µé¢htmlçš„é…ç½®æ‰“åŒ…" class="headerlink" title="å¤šé¡µé¢htmlçš„é…ç½®æ‰“åŒ…"></a>å¤šé¡µé¢htmlçš„é…ç½®æ‰“åŒ…</h3><p>è¦ç”Ÿæˆå¤šä¸ªhtmlï¼Œå°±éœ€è¦åœ¨webpack.config.jsä¸­å¤šé…ç½®å‡ æ¬¡new  html-webpack-plugin<br><figure class="image-box">                <img src="/image/webpack/mutilPage1.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/mutilPage2.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/mutilPage3.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/mutilPage4.png" alt title class>                <p></p>            </figure><br><figure class="image-box">                <img src="/image/webpack/mutilPage5.png" alt title class>                <p></p>            </figure></p><h3 id="autoprefixer-é…ç½®-postcss-loader"><a href="#autoprefixer-é…ç½®-postcss-loader" class="headerlink" title="autoprefixer é…ç½® (postcss-loader)"></a>autoprefixer é…ç½® (postcss-loader)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">è¦ç”Ÿæˆå¤šä¸ªhtmlï¼Œå°±éœ€è¦åœ¨webpack.config.jsä¸­å¤šé…ç½®å‡ æ¬¡new  html-webpack-plugin</span><br><span class="line">&#123;</span><br><span class="line">  loader: &apos;postcss-loader&apos;,</span><br><span class="line">  options: &#123;</span><br><span class="line">    ident: &apos;postcss&apos;,</span><br><span class="line">    sourceMap: true,</span><br><span class="line">    //æ ¹æ®ä¸­å›½ä½¿ç”¨æµè§ˆå™¨æƒ…å†µç»Ÿè®¡ï¼Œå…¼å®¹ä½¿ç”¨ç‡å¤§äºç™¾åˆ†ä¹‹0.15çš„æ‰€æœ‰æµè§ˆå™¨</span><br><span class="line">    plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">browsers: [&apos;&gt; 5% in US&apos;] //æ ¹æ®ç¾å›½ä½¿ç”¨æµè§ˆå™¨æƒ…å†µç»Ÿè®¡ï¼Œå…¼å®¹ä½¿ç”¨ç‡å¤§äºç™¾åˆ†ä¹‹5çš„æ‰€æœ‰æµè§ˆå™¨</span><br><span class="line">browsers: [&apos;last 5 versions&apos;] //å…¼å®¹æ‰€æœ‰æµè§ˆå™¨æœ€æ–°çš„äº”ä¸ªç‰ˆæœ¬</span><br></pre></td></tr></table></figure><p><a href="https://github.com/browserslist/browserslist#best-practices" target="_blank" rel="noopener">ç‚¹å‡»æŸ¥çœ‹æ›´å¤š</a></p><h3 id="htmlå†…imgå›¾ç‰‡å¼•ç”¨è·¯å¾„"><a href="#htmlå†…imgå›¾ç‰‡å¼•ç”¨è·¯å¾„" class="headerlink" title="htmlå†…imgå›¾ç‰‡å¼•ç”¨è·¯å¾„"></a>htmlå†…imgå›¾ç‰‡å¼•ç”¨è·¯å¾„</h3><p>åœ¨htmlæˆ–ejsæ¨¡æ¿æ–‡ä»¶ï¼Œæ­¤æ—¶å¦‚æœå†™ç»å¯¹è·¯å¾„å¼•ç”¨å›¾ç‰‡æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¦‚æœè¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå°±å¿…é¡»ä½¿ç”¨requireï¼Œ<br>è¿™æ˜¯index.htmlæ–‡ä»¶ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> &lt;div class=img&gt;</span><br><span class="line">     &lt;img src=&quot;$&#123; require(&apos;./assets/img/WechatIMG92.jpeg&apos;) &#125;&quot;  alt=&quot;æ ‡å¿—&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯ejsæ¨¡æ¿æ–‡ä»¶ï¼š<br><figure class="image-box">                <img src="/image/webpack/htmltpl.png" alt title class>                <p></p>            </figure><br>ä¸è¿‡åœ¨é¡¹ç›®ä¸­ï¼Œæ‰€ä»¥ç±»å‹çš„ï¼Œå¯¹å›¾ç‰‡çš„å¼•ç”¨ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„éƒ½æ²¡é—®é¢˜ï¼Œåªæœ‰ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ‰ä¼šæœ‰ä»¥ä¸Šé—®é¢˜ã€‚<br>ä¸è¿‡åœ¨cssä¸­ï¼Œå¼•ç”¨å›¾ç‰‡ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„éƒ½æ²¡é—®é¢˜ã€‚</p><h3 id="ç»™å›¾ç‰‡æŒ‡å®šç”Ÿæˆç›®å½•"><a href="#ç»™å›¾ç‰‡æŒ‡å®šç”Ÿæˆç›®å½•" class="headerlink" title="ç»™å›¾ç‰‡æŒ‡å®šç”Ÿæˆç›®å½•"></a>ç»™å›¾ç‰‡æŒ‡å®šç”Ÿæˆç›®å½•</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        test: /\.(png|svg|jpg|gif|jpeg)$/,</span><br><span class="line">        include: [path.resolve(__dirname, &apos;src/&apos;)],</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: &apos;url-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              limit: 10000,</span><br><span class="line">              //nameæ—¢å¯ä»¥å®šä¹‰æ–‡ä»¶åå­—ï¼Œä¹Ÿå¯ä»¥å®šä¹‰cssç”Ÿæˆè·¯å¾„ï¼Œå ä½ç¬¦[ext]æ˜¯æ‰©å±•externalsçš„ç®€å†™æŒ‡å›¾ç‰‡æ‰©å±•å</span><br><span class="line">              name: &apos;image/[name]_image.[ext]&apos;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¦ejsçš„å…¥å£index-htmlæ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹"><a href="#å¸¦ejsçš„å…¥å£index-htmlæ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹" class="headerlink" title="å¸¦ejsçš„å…¥å£index.htmlæ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹"></a>å¸¦ejsçš„å…¥å£index.htmlæ¨¡æ¿æ–‡ä»¶ç¤ºä¾‹</h3><p>å¯¹ejsçš„ä¸€ç‚¹è§£é‡Š</p><ol><li>&lt;%  %&gt; ä¸è¾“å‡ºæ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸Šçš„å†™æ³•ï¼Œä¸“é—¨ç”¨æ¥è¿ç®—jsï¼›</li><li>&lt;%=  %&gt; åŠ äº†ä¸€ä¸ª=åï¼Œè¾“å‡ºæ˜¾ç¤ºåˆ°æµè§ˆå™¨ä¸Šçš„å†™æ³•ï¼›<br>å®Œæ•´ç¤ºä¾‹çœ‹ çœ‹<a href="https://github.com/YeWills/webpack-code/tree/ejsHtml" target="_blank" rel="noopener">github ä»“åº“ä¸­çš„ ejsHtml åˆ†æ”¯ demo </a>ï¼Œå¯¹åº”çš„tagå‘å¸ƒç‰ˆæœ¬ä¸ºejsHtmlV1.0</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">  &lt;script</span><br><span class="line">  src=&quot;https://code.jquery.com/jquery-3.1.0.js&quot;</span><br><span class="line">  integrity=&quot;sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=&quot;</span><br><span class="line">  crossorigin=&quot;anonymous&quot;&gt;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> &lt;% for (var key of htmlWebpackPlugin.files.css) &#123; %&gt;</span><br><span class="line">  &lt;link href=&quot;&lt;%= key %&gt;&quot; rel=&quot;stylesheet&quot;&gt;</span><br><span class="line"> &lt;% &#125; %&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;dmo&quot;&gt;æˆ‘æ˜¯æ¨¡æ¿æ–‡ä»¶è‡ªå¸¦çš„å†…å®¹1&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;% for (var key in htmlWebpackPlugin.files) &#123; %&gt;</span><br><span class="line">        &lt;%= key %&gt; : &lt;%= JSON.stringify(htmlWebpackPlugin.files.css) %&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=img&gt;</span><br><span class="line">      &lt;img src=&quot;$&#123; require(&apos;./assets/img/WechatIMG92.jpeg&apos;) &#125;&quot;  alt=&quot;æ ‡å¿—&quot; /&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">  &lt;script</span><br><span class="line">  src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.appIndex.entry %&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script</span><br><span class="line">  src=&quot;&lt;%= htmlWebpackPlugin.files.chunks.lodashAndAxios.entry %&gt;&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¸¤ä¸ªæ¨ªæ å‘½ä»¤"><a href="#ä¸¤ä¸ªæ¨ªæ å‘½ä»¤" class="headerlink" title="ä¸¤ä¸ªæ¨ªæ å‘½ä»¤"></a>ä¸¤ä¸ªæ¨ªæ å‘½ä»¤</h3><p>webpack â€“devtool source-map;<br>å‘ç°å‡¡æ˜¯å¸¦ä¸¤ä¸ªâ€“çš„å‘½ä»¤ï¼Œéƒ½æ˜¯é…ç½® webpack çš„é…ç½®é¡¹ã€‚</p><h3 id="babelçš„presetsä¸plugins"><a href="#babelçš„presetsä¸plugins" class="headerlink" title="babelçš„presetsä¸plugins"></a>babelçš„presetsä¸plugins</h3><p>pluginsæ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼›<br>presetsé‡Œé¢å®šä¹‰çš„æ˜¯ä¸€ç³»åˆ—åŠŸèƒ½ï¼›<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"presets"</span>:[</span><br><span class="line">    <span class="string">"@babel/preset-env"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"plugins"</span>:[</span><br><span class="line">    <span class="string">"@babel/proposal-class-properties"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="æ„å»ºä¸æ€§èƒ½ä¼˜åŒ–"><a href="#æ„å»ºä¸æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ„å»ºä¸æ€§èƒ½ä¼˜åŒ–"></a>æ„å»ºä¸æ€§èƒ½ä¼˜åŒ–</h2><p>æ„å»ºä¸æ€§èƒ½ä¼˜åŒ–å¾ˆå¤šæ€è·¯å—ç›Šäºkangshenï¼Œè†œæ‹œä¸‹å¤§ç¥ã€‚</p><h3 id="å‡çº§åˆ°æœ€æ–°çš„webpackç¨³å®šç‰ˆæœ¬"><a href="#å‡çº§åˆ°æœ€æ–°çš„webpackç¨³å®šç‰ˆæœ¬" class="headerlink" title="å‡çº§åˆ°æœ€æ–°çš„webpackç¨³å®šç‰ˆæœ¬"></a>å‡çº§åˆ°æœ€æ–°çš„webpackç¨³å®šç‰ˆæœ¬</h3><p>è¿™æ— ç–‘æ˜¯æ€§èƒ½æ˜¾è‘—æå‡çš„</p><h3 id="babel-loader-çš„ä¼˜åŒ–"><a href="#babel-loader-çš„ä¼˜åŒ–" class="headerlink" title="babel-loader çš„ä¼˜åŒ–"></a>babel-loader çš„ä¼˜åŒ–</h3><p>æŠŠ loader åº”ç”¨çš„æ–‡ä»¶èŒƒå›´ç¼©å°,ä¹Ÿå°±æ˜¯è¯´ï¼Œé…ç½®loaderçš„includeæ¥é™å®šæŸ¥è¯¢èŒƒå›´<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rules: [ </span><br><span class="line">  &#123;</span><br><span class="line">    test: /\.jsx?/,</span><br><span class="line">    include: [ </span><br><span class="line">      path.resolve(__dirname, &apos;src&apos;), </span><br><span class="line">      // é™å®šåªåœ¨ src ç›®å½•ä¸‹çš„ js/jsx æ–‡ä»¶éœ€è¦ç» babel-loader å¤„ç†</span><br><span class="line">      // é€šå¸¸æˆ‘ä»¬éœ€è¦ loader å¤„ç†çš„æ–‡ä»¶éƒ½æ˜¯å­˜æ”¾åœ¨ src ç›®å½•</span><br><span class="line">    ],</span><br><span class="line">    use: &apos;babel-loader&apos;,</span><br><span class="line">  &#125;,</span><br><span class="line">  // ...</span><br><span class="line">],</span><br></pre></td></tr></table></figure></p><h4 id="è®¾ç½®exclude"><a href="#è®¾ç½®exclude" class="headerlink" title="è®¾ç½®exclude"></a>è®¾ç½®exclude</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  modules: [</span><br><span class="line">    path.resolve(__dirname, &apos;node_modules&apos;), // ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‡å®š node_modulesï¼Œä¸åšè¿‡å¤šæŸ¥è¯¢</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  // åˆ é™¤ä¸å¿…è¦çš„åç¼€è‡ªåŠ¨è¡¥å…¨ï¼Œå°‘äº†æ–‡ä»¶åç¼€çš„è‡ªåŠ¨åŒ¹é…ï¼Œå³å‡å°‘äº†æ–‡ä»¶è·¯å¾„æŸ¥è¯¢çš„å·¥ä½œ</span><br><span class="line">  // å…¶ä»–æ–‡ä»¶å¯ä»¥åœ¨ç¼–ç æ—¶æŒ‡å®šåç¼€ï¼Œå¦‚ import(&apos;./index.scss&apos;)</span><br><span class="line">  extensions: [&quot;.js&quot;], </span><br><span class="line"></span><br><span class="line">  // é¿å…æ–°å¢é»˜è®¤æ–‡ä»¶ï¼Œç¼–ç æ—¶ä½¿ç”¨è¯¦ç»†çš„æ–‡ä»¶è·¯å¾„ï¼Œä»£ç ä¼šæ›´å®¹æ˜“è§£è¯»ï¼Œä¹Ÿæœ‰ç›Šäºæé«˜æ„å»ºé€Ÿåº¦</span><br><span class="line">  mainFiles: [&apos;index&apos;],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="å¯ç”¨ç¼“å­˜"><a href="#å¯ç”¨ç¼“å­˜" class="headerlink" title="å¯ç”¨ç¼“å­˜"></a>å¯ç”¨ç¼“å­˜</h4><p>æ€»ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: /\.js$/,</span><br><span class="line">    exclude: /(node_modules)/, // åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œä¸åŒ…å«node_modulesæ–‡ä»¶å¤¹å†…å®¹</span><br><span class="line">    use: &#123;</span><br><span class="line">      loader: &apos;babel-loader&apos;,</span><br><span class="line">      options: &#123;</span><br><span class="line">        cacheDirectory: true // å¯ç”¨ç¼“å­˜ï¼Œæé«˜ç¼–è¯‘é€Ÿåº¦ï¼Œç”Ÿæˆå’Œå¼€å‘éƒ½è¦å¦‚æ­¤è®¾ç½®</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»"><a href="#ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»" class="headerlink" title="ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»"></a>ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»</h3><p>å¯¹äºå•é¡µé¢åº”ç”¨ ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»ï¼Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨httpè¯·æ±‚ç¼“å­˜æœºåˆ¶ï¼Œæé«˜ä¸‹ä¸€æ¬¡è®¿é—®é€Ÿåº¦ã€‚<br>å¯¹äºå¤šé¡µé¢åº”ç”¨ ç”Ÿäº§ä¸‹åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»ï¼Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨httpè¯·æ±‚ç¼“å­˜æœºåˆ¶ï¼Œæé«˜è®¿é—®ä¸‹ä¸€é¡µçš„é€Ÿåº¦ã€‚</p><p>æ›´å¤šè¯¦ç»†åº“ä¸ä¸šåŠ¡jsåˆ†ç¦»é…ç½®æ–¹æ³• è¯·çœ‹ 1.13ç« èŠ‚ ã€Šwebpackå¸¸ç”¨çŸ¥è¯†â€“åˆ†ç¦» åº“ä¸ä¸šåŠ¡ä»£ç ã€‹</p><p>æ›´å¤šä¿¡æ¯ï¼Œçœ‹<a href="https://github.com/YeWills/webpack-code/tree/master" target="_blank" rel="noopener">demoç¤ºä¾‹</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        commons: &#123;</span><br><span class="line">           chunks: &apos;initial&apos;,</span><br><span class="line">           test: &apos;lodashAndAxios&apos;,</span><br><span class="line">           enforce: true,</span><br><span class="line">           name: &apos;lodashAndAxios&apos;,//å¯¹åº”è¦†ç›–entry.chunkFilenameä¸­çš„nameå ä½ç¬¦[name]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>optimization.splitChunks.cacheGroups.chunksä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        styles: &#123;</span><br><span class="line">           chunks: &apos;all&apos;,</span><br><span class="line">           test: /\.(sc|c|sa)ss$/,</span><br><span class="line">           enforce: true,</span><br><span class="line">           name: &apos;styles&apos;,//å¯¹åº”è¦†ç›–entry.chunkFilenameä¸­çš„nameå ä½ç¬¦[name]</span><br><span class="line">        &#125;,</span><br><span class="line">        commons: &#123;</span><br><span class="line">           chunks: (chunk) =&gt; &#123;</span><br><span class="line">             return chunk.name !== &apos;styles&apos;;//é¿å¼€ä¸Šé¢å®šä¹‰çš„styles chunk</span><br><span class="line">           &#125;,</span><br><span class="line">           test: &apos;lodashAndAxios&apos;,</span><br><span class="line">           enforce: true,</span><br><span class="line">           name: &apos;lodashAndAxios&apos;,//å¯¹åº”è¦†ç›–entry.chunkFilenameä¸­çš„nameå ä½ç¬¦[name]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨èŠ±æ‹¬å·-è¿›è¡Œimport"><a href="#ä½¿ç”¨èŠ±æ‹¬å·-è¿›è¡Œimport" class="headerlink" title="ä½¿ç”¨èŠ±æ‹¬å·{}è¿›è¡Œimport"></a>ä½¿ç”¨èŠ±æ‹¬å·{}è¿›è¡Œimport</h3><p>ä¾‹å¦‚ ä½¿ç”¨lodashï¼Œæ¨èè¿™ç§å†™æ³•import { filter } from â€˜lodashâ€™;<br>ç”¨ä»€ä¹ˆå°±èŠ±æ‹¬å·ï¼Œå–ä»€ä¹ˆã€‚</p><h3 id="ä¾èµ–åŒ…å’Œä¸šåŠ¡jsåˆ†ç¦»"><a href="#ä¾èµ–åŒ…å’Œä¸šåŠ¡jsåˆ†ç¦»" class="headerlink" title="ä¾èµ–åŒ…å’Œä¸šåŠ¡jsåˆ†ç¦»"></a>ä¾èµ–åŒ…å’Œä¸šåŠ¡jsåˆ†ç¦»</h3><p>ä¸€èˆ¬ä¾èµ–åŒ…å¦‚loadshï¼Œjqè¿™äº›å¾ˆå°‘æ”¹å˜ï¼Œè€Œä¸€èˆ¬åªæ”¹å˜ä¸šåŠ¡jsï¼Œåˆ†å¼€æ‰“åŒ…åï¼Œä¾èµ–åŒ…jsæ–‡ä»¶åï¼Œæ¯æ¬¡å‘å¸ƒç‰ˆæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ<br>æµè§ˆå™¨çš„httpè¯·æ±‚ç¼“å­˜æœºåˆ¶ï¼Œæµè§ˆå™¨ä¸ä¼šé‡å¤è¯·æ±‚ï¼Œç›´æ¥æ‹¿æµè§ˆå™¨ç¼“å­˜çš„ä¾èµ–åŒ…jså³å¯ï¼Œå¯æé«˜æ€§èƒ½ï¼Œå‡å°‘æµé‡ã€‚æ¯æ¬¡å‘å¸ƒç‰ˆæœ¬ï¼Œ<br>åªéœ€è¦è¯·æ±‚ä¸šåŠ¡jsã€‚</p><h3 id="è®¾ç½®å¤–éƒ¨ä¾èµ–"><a href="#è®¾ç½®å¤–éƒ¨ä¾èµ–" class="headerlink" title="è®¾ç½®å¤–éƒ¨ä¾èµ–"></a>è®¾ç½®å¤–éƒ¨ä¾èµ–</h3><p>å°†ç¬¨é‡çš„å¾ˆå¤šé¡µé¢éƒ½ç”¨åˆ°çš„jsé€šè¿‡externalsè®¾ç½®æˆå¤–éƒ¨ä¾èµ–ã€‚</p><h3 id="åˆ©ç”¨æµè§ˆå™¨httpç¼“è§£æœºåˆ¶"><a href="#åˆ©ç”¨æµè§ˆå™¨httpç¼“è§£æœºåˆ¶" class="headerlink" title="åˆ©ç”¨æµè§ˆå™¨httpç¼“è§£æœºåˆ¶"></a>åˆ©ç”¨æµè§ˆå™¨httpç¼“è§£æœºåˆ¶</h3><p>åˆ©ç”¨æµè§ˆå™¨httpç¼“è§£æœºåˆ¶ï¼Œåº“ä¸jsä»£ç åˆ†ç¦»ï¼Œå¯ä»¥æé«˜é€Ÿåº¦ï¼Œå‡å°‘æµé‡ã€‚(è¿™ä¸ªåº”è¯¥å±äº é¡¹ç›®æ€§èƒ½ä¼˜åŒ–èŒƒç•´)</p><h3 id="autodll-webpack-plugin"><a href="#autodll-webpack-plugin" class="headerlink" title="autodll-webpack-plugin"></a>autodll-webpack-plugin</h3><p>è¯¥æ’ä»¶èƒ½å¤Ÿå¿«é€Ÿæ‰“åŒ…ï¼Œèƒ½æŠŠç¬¬ä¸‰æ–¹ä¾èµ–çš„æ–‡ä»¶èƒ½æå‰è¿›è¡Œé¢„ç¼–è¯‘æ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢å»ã€‚æé«˜äº†æ„å»ºé€Ÿåº¦ã€‚å› ä¸ºå¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶æˆ‘ä»¬å¹¶ä¸éœ€è¦æ”¹åŠ¨å®ƒï¼Œæ‰€ä»¥æˆ‘ä»¬æƒ³è¿™äº›ç¬¬ä¸‰æ–¹åº“åœ¨æˆ‘ä»¬æ¯æ¬¡ç¼–è¯‘çš„æ—¶å€™ä¸è¦å†æ¬¡æ„å»ºå®ƒå°±å¥½,å¯ä»¥éå¸¸æ˜æ˜¾æé«˜rebuildé€Ÿåº¦<br>è¯¥æ’ä»¶æœ‰ä¸¤ä¸ªä½œç”¨ï¼š<br>1ã€å¯ä»¥æ˜æ˜¾æé«˜rebuildçš„é€Ÿåº¦ï¼›<br>2ã€å¯ä»¥è°ƒè¯•åº“æºç ï¼›</p><p>æ›´å¤šä¿¡æ¯ï¼Œçœ‹<a href="https://github.com/YeWills/webpack-code/tree/master" target="_blank" rel="noopener">demoç¤ºä¾‹</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const AutoDllPlugin = require(&apos;autodll-webpack-plugin&apos;);</span><br><span class="line"> new AutoDllPlugin(&#123;</span><br><span class="line">      filename: &apos;[name]_chunk.js&apos;,</span><br><span class="line">      // å¦‚æœéœ€è¦è°ƒè¯•åº“æºç ï¼Œå°†inheritè®¾ç½®ä¸ºtrueï¼Œæ˜¯è°ƒè¯•æºç çš„å°–åˆ€åˆ©å™¨ï¼Œä¸è¿‡ä¼šå½±å“rebuildé€Ÿåº¦</span><br><span class="line">      inherit: false,//å½“ä¸ºfalseæ—¶ï¼Œé€Ÿåº¦æ›´å¿«ï¼›å½“ä¸ºtrueæ—¶ï¼Œå¯ä»¥æ‰“å¼€webpackæ²¡æœ‰å‹ç¼©è¿‡çš„æºç sourcemapè°ƒè¯•</span><br><span class="line">      inject: true,</span><br><span class="line">      debug: true,</span><br><span class="line">      entry: &#123;</span><br><span class="line">        appVendor: [</span><br><span class="line">          &apos;axios&apos;,</span><br><span class="line">          &apos;lodash&apos;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br></pre></td></tr></table></figure><h3 id="happypack"><a href="#happypack" class="headerlink" title="happypack"></a>happypack</h3><p>webpack åªèƒ½ä¸€ä¸ªloaderå¤„ç†å®Œåå¤„ç†ä¸‹ä¸€ä¸ªloaderï¼Œè¿™æ ·ï¼Œé€Ÿåº¦å°±æ…¢ï¼Œä¸ºäº†åŒæ—¶è¿›è¡Œå¤šçº¿ç¨‹loaderï¼ŒåŒæ—¶å¤„ç†å¤šä¸ªloaderï¼Œå¯ä»¥ä½¿ç”¨happypackï¼›<br>é…ç½®happypackå¯ä»¥æ˜æ˜¾æé«˜æ„å»ºé€Ÿåº¦ã€‚</p><ul><li>å…¶ä»–çš„éƒ½å¥½é…ç½®ï¼Œå°±postcss-loader æ¯”è¾ƒç‰¹æ®Šï¼Œå¿…é¡»è¦å¦å¤–æ–°å»º postcss.config.js å¦åˆ™æŠ¥é”™ï¼›</li><li>happypack é‡å†™åŸæ¥loaderé…ç½®æ—¶ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å¤åˆ¶ï¼Œä¸æ”¹å˜ï¼Œåªæœ‰postcsså¯èƒ½ç¨å¾®æ”¹åŠ¨ä¸‹</li></ul><p>æ›´å¤šä¿¡æ¯ï¼Œçœ‹<a href="https://github.com/YeWills/webpack-code/tree/master" target="_blank" rel="noopener">demoç¤ºä¾‹</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">const HappyPack = require(&apos;happypack&apos;);</span><br><span class="line"> module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        loader: &apos;happypack/loader?id=handerStyle&apos;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"> new HappyPack(&#123;</span><br><span class="line">      id:&apos;handerStyle&apos;,</span><br><span class="line">      loaders:[</span><br><span class="line">        &apos;style-loader&apos;, </span><br><span class="line">        &#123;</span><br><span class="line">          loader: &apos;css-loader&apos;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            sourceMap: true</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &apos;postcss-loader&apos;, </span><br><span class="line">        &#123;</span><br><span class="line">          loader: &apos;sass-loader&apos;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            sourceMap: true</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//postcss.config.js</span><br><span class="line">module.exports = &#123;</span><br><span class="line">  ident: &apos;postcss&apos;,</span><br><span class="line">  sourceMap: true,</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    &apos;autoprefixer&apos;: &#123;</span><br><span class="line">      browsers: [&apos;&gt; 0.15% in CN&apos;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webpack-parallel-uglify-plugin"><a href="#webpack-parallel-uglify-plugin" class="headerlink" title="webpack-parallel-uglify-plugin"></a>webpack-parallel-uglify-plugin</h3><p>ç”Ÿäº§ç¯å¢ƒé…ç½®ã€‚<br>happypackæ˜¯å¤šçº¿ç¨‹æ“ä½œloaderè¿›è¡Œå¤šçº¿ç¨‹è½¬è¯‘æ–‡ä»¶ï¼›ä¸æ­¤ç›¸ä¼¼ï¼Œwebpack-parallel-uglify-pluginæ˜¯å¤šçº¿ç¨‹è¿›è¡Œå‹ç¼©jsï¼Œæé«˜ç”Ÿäº§ç¯å¢ƒä¸‹çš„æ‰“åŒ…é€Ÿåº¦ã€‚<br>æ›´å¤šä¿¡æ¯ï¼Œçœ‹<a href="https://github.com/YeWills/webpack-code/tree/master" target="_blank" rel="noopener">demoç¤ºä¾‹</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    // ä½¿ç”¨ ParallelUglifyPlugin å¹¶è¡Œå‹ç¼©è¾“å‡ºJSä»£ç </span><br><span class="line">    new ParallelUglifyPlugin(&#123;</span><br><span class="line">      // ä¼ é€’ç»™ UglifyJSçš„å‚æ•°å¦‚ä¸‹ï¼š</span><br><span class="line">      uglifyJS: &#123;</span><br><span class="line">        output: &#123;</span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦è¾“å‡ºå¯è¯»æ€§è¾ƒå¼ºçš„ä»£ç ï¼Œå³ä¼šä¿ç•™ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼Œé»˜è®¤ä¸ºè¾“å‡ºï¼Œä¸ºäº†è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœï¼Œ</span><br><span class="line">           å¯ä»¥è®¾ç½®ä¸ºfalse</span><br><span class="line">          */</span><br><span class="line">          beautify: false,</span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦ä¿ç•™ä»£ç ä¸­çš„æ³¨é‡Šï¼Œé»˜è®¤ä¸ºä¿ç•™ï¼Œä¸ºäº†è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœï¼Œå¯ä»¥è®¾ç½®ä¸ºfalse</span><br><span class="line">          */</span><br><span class="line">          comments: false</span><br><span class="line">        &#125;,</span><br><span class="line">        compress: &#123;</span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦åœ¨UglifyJSåˆ é™¤æ²¡æœ‰ç”¨åˆ°çš„ä»£ç æ—¶è¾“å‡ºè­¦å‘Šä¿¡æ¯ï¼Œé»˜è®¤ä¸ºè¾“å‡ºï¼Œå¯ä»¥è®¾ç½®ä¸ºfalseå…³é—­è¿™äº›ä½œç”¨</span><br><span class="line">           ä¸å¤§çš„è­¦å‘Š</span><br><span class="line">          */</span><br><span class="line">          warnings: false,</span><br><span class="line"></span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦åˆ é™¤ä»£ç ä¸­æ‰€æœ‰çš„consoleè¯­å¥ï¼Œé»˜è®¤ä¸ºä¸åˆ é™¤ï¼Œå¼€å¯åï¼Œä¼šåˆ é™¤æ‰€æœ‰çš„consoleè¯­å¥</span><br><span class="line">          */</span><br><span class="line">          drop_console: true,</span><br><span class="line"></span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦å†…åµŒè™½ç„¶å·²ç»å®šä¹‰äº†ï¼Œä½†æ˜¯åªç”¨åˆ°ä¸€æ¬¡çš„å˜é‡ï¼Œæ¯”å¦‚å°† var x = 1; y = x, è½¬æ¢æˆ y = 5, é»˜è®¤ä¸ºä¸</span><br><span class="line">           è½¬æ¢ï¼Œä¸ºäº†è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœï¼Œå¯ä»¥è®¾ç½®ä¸ºfalse</span><br><span class="line">          */</span><br><span class="line">          collapse_vars: true,</span><br><span class="line"></span><br><span class="line">          /*</span><br><span class="line">           æ˜¯å¦æå–å‡ºç°äº†å¤šæ¬¡ä½†æ˜¯æ²¡æœ‰å®šä¹‰æˆå˜é‡å»å¼•ç”¨çš„é™æ€å€¼ï¼Œæ¯”å¦‚å°† x = &apos;xxx&apos;; y = &apos;xxx&apos;  è½¬æ¢æˆ</span><br><span class="line">           var a = &apos;xxxx&apos;; x = a; y = a; é»˜è®¤ä¸ºä¸è½¬æ¢ï¼Œä¸ºäº†è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœï¼Œå¯ä»¥è®¾ç½®ä¸ºfalse</span><br><span class="line">          */</span><br><span class="line">          reduce_vars: true</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ContextReplacementPlugin"><a href="#ContextReplacementPlugin" class="headerlink" title="ContextReplacementPlugin"></a>ContextReplacementPlugin</h3><p>é…ç½®ContextReplacementPluginï¼Œæ˜¯ä¼˜åŒ–é…ç½®ï¼Œä¸‹é¢ç« èŠ‚ã€Šå…¶ä»–å¸¸ç”¨æ’ä»¶ã€‹æœ‰è®²</p><h3 id="webpack-HashedModuleIdsPlugin"><a href="#webpack-HashedModuleIdsPlugin" class="headerlink" title="webpack.HashedModuleIdsPlugin"></a>webpack.HashedModuleIdsPlugin</h3><p>æ‰“åŒ…ä¸­chunkhashçš„è§„åˆ™ï¼š<br>å½“æ²¡æœ‰åˆ é™¤æˆ–å¢åŠ æ–‡ä»¶ï¼Œå¦‚æœå¯¹äºchunkçš„ä»£ç æ²¡æœ‰å˜åŒ–ï¼Œchunkhashå€¼ä¸ä¼šå˜ï¼Œå¯ä»¥èµ·åˆ°æµè§ˆå™¨ç¼“å­˜çš„ä½œç”¨ï¼›<br>ä½†å½“æœ‰åˆ é™¤æˆ–å¢åŠ æ–‡ä»¶æ˜¯ï¼Œå¦‚æœå¯¹åº”chunkçš„ä»£ç æ²¡æœ‰å˜åŒ–ï¼Œæ‰“åŒ…æ˜¯ï¼Œchunkhashè¿˜æ˜¯ä¼šå˜ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæˆ‘ä»¬åªå¸Œæœ›å¯¹åº”chunkä»£ç å¦‚æœæ²¡å˜åŒ–ï¼Œ<br>æ— è®ºå…¶ä»–ä»£ç æ–‡ä»¶åˆ é™¤æˆ–å¢åŠ ï¼Œchunkhashéƒ½ä¸å˜ã€‚<br>ï¼ˆä¸ºä»€ä¹ˆä¼šå˜ï¼Œwebpackè‡ªå¸¦æ‰“åŒ…ç­–ç•¥æ˜¯ç»™æ¯ä¸ªæ–‡ä»¶é…ç½®äº†ä¸€ä¸ªæ•°å­—indexï¼Œæ— è®ºå¢åŠ æˆ–åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œéƒ½ä¼šæ‰“ä¹±æ•´ä¸ª indexï¼Œå¯¼è‡´chunkhashå˜åŒ–ï¼Œ<br>HashedModuleIdsPluginï¼Œæ”¹å˜ç­–ç•¥ä¸ºï¼Œæ ¹æ®æ–‡ä»¶è·¯å¾„é…ç½®ï¼Œæ‰€ä»¥è¾¾åˆ°äº†ç¨³å®šchunkhashï¼‰<br>ä¸ºäº†è¾¾åˆ°ä»¥ä¸Šæ•ˆæœï¼Œè¯·é…ç½®HashedModuleIdsPluginæ’ä»¶ï¼š<br>new webpack.HashedModuleIdsPlugin({<br>  hashDigestLengthï¼š20<br>})</p><p>è¯¥æ’ä»¶ä¼šæ ¹æ®æ¨¡å—çš„ç›¸å¯¹è·¯å¾„ç”Ÿæˆä¸€ä¸ªå››ä½æ•°çš„hashä½œä¸ºæ¨¡å—id, å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚<br>ç”¨ HashedModuleIdsPlugin å¯ä»¥è½»æ¾åœ°å®ç° chunkhash çš„ç¨³å®šåŒ–ï¼Œå¯ä»¥å®ç°æŒä¹…åŒ–ç¼“å­˜ã€‚<br>å»ºè®®ç”Ÿäº§é…ç½®ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨åˆ°äº†chunkhashï¼Œåˆ™æœ€å¥½é…ç½®HashedModuleIdsPluginã€‚<br>æ›´å¤šè¯·çœ‹ç« èŠ‚2.7.4:ã€Šwebpack é»‘çŸ¥è¯† ä¹‹ [name][id][hash][chunkhash][name]ã€‹<br>æˆ–çœ‹å®˜ç½‘<br>å¯¹äº chunkhashä¸HashedModuleIdsPlugin çœ‹å‚çœ‹ <a href="https://www.cnblogs.com/zhishaofei/p/8590627.html" target="_blank" rel="noopener">è¿™é‡Œ</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  new webpack.HashedModuleIdsPlugin(&#123;</span><br><span class="line">    hashDigestLength: 20</span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="webpack-NormalModuleReplacementPlugin"><a href="#webpack-NormalModuleReplacementPlugin" class="headerlink" title="webpack.NormalModuleReplacementPlugin"></a>webpack.NormalModuleReplacementPlugin</h3><p>webpack.NormalModuleReplacementPlugin(a,b)ç¼–è¯‘æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°é€šå¸¸æ˜¯æ­£åˆ™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ­£åˆ™åŒ¹é…åˆ°æ–‡ä»¶åï¼Œä¼šå°†æ­¤æ–‡ä»¶æ›¿æ¢ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä»è€Œè¾¾åˆ°ç”Ÿäº§æˆ–å¼€å‘æ—¶ï¼Œç¼–è¯‘ä¸åŒæ–‡ä»¶çš„ç›®çš„ï¼Œæ¯”å¦‚ç”Ÿäº§å’Œå¼€å‘æ—¶ç¼–è¯‘ä¸åŒçš„è·¯ç”±æ–‡ä»¶ã€‚<br>æ‰€ä»¥é…ç½®æ—¶ï¼Œåœ¨webpack.config.pluginsä¸­ï¼Œä½äºæœ€å‰é¢ï¼Œä¿è¯webpackæ‰§è¡Œç¼–è¯‘æ—¶ï¼Œé¦–å…ˆå¯ç”¨æ­¤æ’ä»¶æ›¿æ¢æ–‡ä»¶ã€‚<br>æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ’ä»¶çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€èˆ¬éƒ½è®¾ç½®ä¸ºæ­£åˆ™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">  new webpack.NormalModuleReplacementPlugin(</span><br><span class="line">    /some\/path\/config\.development\.js/,</span><br><span class="line">    &apos;./config.production.js&apos;</span><br><span class="line">  ),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="webpack-optimize-OccurrenceOrderPlugin"><a href="#webpack-optimize-OccurrenceOrderPlugin" class="headerlink" title="webpack.optimize.OccurrenceOrderPlugin"></a>webpack.optimize.OccurrenceOrderPlugin</h3><p>OccurrenceOrderPluginæ’ä»¶ï¼šæ ¹æ®å‡ºç°æ¬¡æ•°ä¸ºæ¯ä¸€ä¸ªæ¨¡å—æˆ–è€…chunkè®¾ç½®id,ç»å¸¸ä½¿ç”¨çš„æ¨¡å—åˆ™ä¼šè·å–åˆ°è¾ƒçŸ­çš„id(å’Œå‰ç¼€æ ‘ç±»ä¼¼)ï¼Œè¿™å¯ä»¥ä½¿idå¯é¢„æµ‹å¹¶æœ‰æ•ˆå‡å°‘æ–‡ä»¶å¤§å°ï¼Œå»ºè®®ä½¿ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï½<br><a href="https://www.cnblogs.com/xuepei/p/7992423.html" target="_blank" rel="noopener">å‚è€ƒ</a><br>æœ‰äº›è¯´æ˜¯å¯ä»¥ä¼˜åŒ–æ’åºè¾“å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">  new webpack.optimize.OccurrenceOrderPlugin(),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="webpack-optimize-AggressiveMergingPlugin"><a href="#webpack-optimize-AggressiveMergingPlugin" class="headerlink" title="webpack.optimize.AggressiveMergingPlugin"></a>webpack.optimize.AggressiveMergingPlugin</h3><p>AggressiveMergingPluginç”¨äºåˆå¹¶å—ã€‚<br>AggressiveMergingPluginç”¨äºè§£å†³å¦‚è·¯ç”±åˆ†é…ä¸åˆç†ï¼Œä¼šæ‰“åŒ…å‡ºå¾ˆå¤šå¾ˆå°çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶æˆ–è®¸åªæœ‰å‡ kï¼Œå´å¤šäº†å¾ˆå¤šç½‘ç»œè¯·æ±‚ï¼Œå¾—ä¸å¿å¤±ã€‚<br>ç”¨æ³•å¾ˆç®€å•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins:[</span><br><span class="line">  new webpack.optimize.AggressiveMergingPlugin(),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><h3 id="react-loadable-æ‡’åŠ è½½ä¼˜åŒ–ç”Ÿäº§æ¨¡å¼æ„å»ºé€Ÿåº¦ä»¥åŠé¡µé¢è®¿é—®é€Ÿåº¦"><a href="#react-loadable-æ‡’åŠ è½½ä¼˜åŒ–ç”Ÿäº§æ¨¡å¼æ„å»ºé€Ÿåº¦ä»¥åŠé¡µé¢è®¿é—®é€Ÿåº¦" class="headerlink" title="react-loadable æ‡’åŠ è½½ä¼˜åŒ–ç”Ÿäº§æ¨¡å¼æ„å»ºé€Ÿåº¦ä»¥åŠé¡µé¢è®¿é—®é€Ÿåº¦"></a>react-loadable æ‡’åŠ è½½ä¼˜åŒ–ç”Ÿäº§æ¨¡å¼æ„å»ºé€Ÿåº¦ä»¥åŠé¡µé¢è®¿é—®é€Ÿåº¦</h3><p>è¿™æ¡ä¼˜åŒ–ç»éªŒå—kangshenå¯å‘ï¼Œè¡¨ç¤ºå¯¹å¤§ç¥çš„è†œæ‹œï¼Œå…·ä½“æ€è·¯æ˜¯ï¼š<br>åˆ©ç”¨react-loadableæ‡’åŠ è½½ï¼Œå°†ç”Ÿäº§æ¨¡å¼ä¸‹çš„è·¯ç”±é…åˆreact-loadableæ‡’åŠ è½½ï¼Œæ˜¾ç¤ºå“ªä¸ªè·¯ç”±é¡µé¢ï¼Œå°±ç¼–è¯‘åŠ è½½æŸä¸ªè·¯ç”±é¡µé¢ï¼Œè¿™æ ·æ—¢æé«˜webpackç¼–è¯‘é€Ÿåº¦ï¼Œåˆæé«˜é¡µé¢è®¿é—®é€Ÿåº¦ã€‚<br>å°†è·¯ç”±è¿›è¡Œæ‡’åŠ è½½æœ‰ä¸€ä¸ªå¼Šç«¯æ˜¯åªèƒ½çœ‹åˆ°ä½ æ‰“å¼€é¡µé¢çš„æŠ¥é”™ï¼Œæ²¡æœ‰æ‰“å¼€çš„é¡µé¢æŠ¥é”™ä½ æ— æ³•çœ‹åˆ°ã€‚</p><p>react-loadable æ˜¯2017å¹´5æœˆå·¦å³æ‰å‡ºç°ï¼Œåˆ°å¦‚ä»Šï¼ŒGitHubä¸Šå·²ç»æœ‰ä¸€ä¸‡å¤šé¢—starï¼Œæ˜¯å¯ä»¥æ¯”æ‹Ÿreact-reduxçš„æ’ä»¶ï¼Œéå¸¸æ£’ï¼Œé¡¹ç›®ä¸­å¦‚æœæœ‰ç”¨åˆ°æ‡’åŠ è½½ï¼Œç”¨è¿™ä¸ªæ¡†æ¶éå¸¸å¥½react-loadable</p><h3 id="å‡å°‘ä¸å¿…è¦çš„plugin"><a href="#å‡å°‘ä¸å¿…è¦çš„plugin" class="headerlink" title="å‡å°‘ä¸å¿…è¦çš„plugin"></a>å‡å°‘ä¸å¿…è¦çš„plugin</h3><h2 id="çƒ­é‡è½½ä¸çƒ­æ›¿æ¢"><a href="#çƒ­é‡è½½ä¸çƒ­æ›¿æ¢" class="headerlink" title="çƒ­é‡è½½ä¸çƒ­æ›¿æ¢"></a>çƒ­é‡è½½ä¸çƒ­æ›¿æ¢</h2><h3 id="çƒ­é‡è½½-ä¸-â€“inline"><a href="#çƒ­é‡è½½-ä¸-â€“inline" class="headerlink" title="çƒ­é‡è½½ ä¸ â€“inline"></a>çƒ­é‡è½½ ä¸ â€“inline</h3><p>åœ¨ä½¿ç”¨webpackçš„ devServeræ—¶ï¼Œåªéœ€åœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--inline</code>,å³å¯è‡ªåŠ¨ç¼–è¯‘ï¼Œè‡ªåŠ¨é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚<a href="https://www.webpackjs.com/configuration/dev-server/#devserver-inline" target="_blank" rel="noopener">å‚è€ƒ é…ç½®-å¼€å‘ä¸­ Server(devServer)</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server --inline</span><br></pre></td></tr></table></figure></p><h3 id="çƒ­æ›¿æ¢ä»‹ç»"><a href="#çƒ­æ›¿æ¢ä»‹ç»" class="headerlink" title="çƒ­æ›¿æ¢ä»‹ç»"></a>çƒ­æ›¿æ¢ä»‹ç»</h3><p>çƒ­æ›¿æ¢æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ä½¿ç”¨webpack-dev-serverï¼Œä¸€ç§æ˜¯ä½¿ç”¨webpack-hot-loaderï¼›</p><h3 id="çƒ­æ›¿æ¢æ–¹å¼ä¸€ï¼š-webpack-dev-server"><a href="#çƒ­æ›¿æ¢æ–¹å¼ä¸€ï¼š-webpack-dev-server" class="headerlink" title="çƒ­æ›¿æ¢æ–¹å¼ä¸€ï¼š webpack-dev-server"></a>çƒ­æ›¿æ¢æ–¹å¼ä¸€ï¼š webpack-dev-server</h3><p>webpack-dev-serveræœ‰ä¸¤ç§æ–¹æ³•ï¼Œ<br>ä¸€ç§æ˜¯ç›´æ¥åœ¨webpack.config.jsä¸­çš„devSeverä¸Šé…ç½®hotå®ç°ã€‚<br>ä¸€ç§æ˜¯è‡ªå®šä¹‰é…ç½®ã€‚</p><h4 id="devSever"><a href="#devSever" class="headerlink" title="devSever"></a>devSever</h4><p>åªéœ€åœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--hot</code>,<a href="https://www.webpackjs.com/configuration/dev-server/#devserver-hot" target="_blank" rel="noopener">å‚è€ƒ é…ç½®-å¼€å‘ä¸­ Server(devServer)-devServer.hot</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server --hot</span><br></pre></td></tr></table></figure></p><p>åœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--hot</code>è¿™ä¸€å¥ä»£ç ç›¸å½“äº åœ¨webpack.config.jsçš„è®¾ç½®devServer.hotä¸º<code>true</code>,å¹¶ä¸”åœ¨pluginsä¸­åŠ äº† :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new webpack.HotModuleReplacementPlugin()</span><br></pre></td></tr></table></figure></p><p>æ‰€ä»¥ï¼Œä¸€æ—¦åœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--hot</code>ï¼Œå°±è¦å»æ‰pluginsçš„<code>new webpack.HotModuleReplacementPlugin()</code>ï¼Œä¸ç„¶å°±ç›¸å½“äºæ‰§è¡Œäº†ä¸¤æ¬¡HotModuleReplacementPluginï¼Œå¹¶å› æ­¤å¯èƒ½æŠ¥é”™ã€‚</p><p><strong>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ åœ¨webpack.config.jsçš„è®¾ç½®devServer.hotä¸º<code>true</code>æ•ˆæœå¹¶ä¸ä½³ï¼Œæ¨èåœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--hot</code></strong></p><p>å› æ­¤ä¸€èˆ¬<code>npm script</code>é…ç½®å¦‚ä¸‹ï¼Œæ„æ€æ˜¯å½“ä»£ç å˜åŒ–ï¼Œé‡æ–°ç¼–è¯‘çš„æ—¶å€™ï¼Œå¦‚æœçƒ­æ›¿æ¢èµ·ä½œç”¨ï¼Œå°±æ‰§è¡Œçƒ­æ›¿æ¢ï¼Œå¦‚æœçƒ­æ›¿æ¢ä¸èµ·ä½œç”¨ï¼Œå°±æ‰§è¡Œçƒ­é‡è£…æ•´ä¸ªé¡µé¢ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack-dev-server --inline --hot</span><br></pre></td></tr></table></figure></p><h4 id="expressæˆ–koa-çš„è‡ªå®šä¹‰æ–¹å¼"><a href="#expressæˆ–koa-çš„è‡ªå®šä¹‰æ–¹å¼" class="headerlink" title="expressæˆ–koa çš„è‡ªå®šä¹‰æ–¹å¼"></a>expressæˆ–koa çš„è‡ªå®šä¹‰æ–¹å¼</h4><p>æœ‰äº›é¡¹ç›®ä¸ç”¨webpack.config.jsçš„è®¾ç½®devServerï¼Œè€Œé€‰æ‹©expressæˆ–koaï¼Œç›´æ¥å¼•ç”¨webpack-dev-serveræ’ä»¶è‡ªå®šä¹‰é…ç½®çƒ­æ›¿æ¢æ•ˆæœï¼Œæ­¤æ—¶å°±éœ€è¦é…åˆ webpack-hot-middleware ä¸ webpack-dev-middleware ä¸€èµ·ä½¿ç”¨ï¼Œæ‰èƒ½è¾¾åˆ°æ•ˆæœã€‚<br>è¯¦ç»†è§ <a href="https://github.com/YeWills/react-hot-loader-demo" target="_blank" rel="noopener">demo</a>ã€‚</p><h3 id="çƒ­æ›¿æ¢æ–¹å¼äºŒï¼š-react-hot-loader"><a href="#çƒ­æ›¿æ¢æ–¹å¼äºŒï¼š-react-hot-loader" class="headerlink" title="çƒ­æ›¿æ¢æ–¹å¼äºŒï¼š react-hot-loader"></a>çƒ­æ›¿æ¢æ–¹å¼äºŒï¼š react-hot-loader</h3><p>è¿™æ˜¯çƒ­æ›¿æ¢æœ€ä½³æ¨¡å¼ã€‚å…·ä½“é…ç½®æ–¹æ³•ï¼Œå‚è§ <a href="https://github.com/YeWills/wills-react-pro/commit/971612a647e0a93c037c04830526cc684d90de76" target="_blank" rel="noopener">å¢åŠ react-hot-loaderçƒ­æ›´æ–°åŠŸèƒ½</a></p><h3 id="çƒ­æ›¿æ¢æœ€ä½³æ–¹æ¡ˆ"><a href="#çƒ­æ›¿æ¢æœ€ä½³æ–¹æ¡ˆ" class="headerlink" title="çƒ­æ›¿æ¢æœ€ä½³æ–¹æ¡ˆ"></a>çƒ­æ›¿æ¢æœ€ä½³æ–¹æ¡ˆ</h3><p>é…ç½®äº†å‡ ä¸ªé¡¹ç›®çš„çƒ­åŠ è½½åå‘ç°ä¸€èˆ¬ webpackè‡ªå¸¦çš„webpack-dev-serveræ–¹å¼çš„çƒ­æ›¿æ¢ä¸€èˆ¬æ•ˆæœä¸å¥½æˆ–å¹²è„†å¤±æ•ˆï¼Œæ‰€ä»¥æœ€ä½³æ–¹æ¡ˆæ˜¯ä½¿ç”¨react-hot-loaderã€‚</p><h3 id="module-hot"><a href="#module-hot" class="headerlink" title="module.hot"></a>module.hot</h3><p>module.hotæ˜¯ä¸€ä¸‹ä»£ç æ˜¯ webpack Hot Module Replacement APIï¼Œåœ¨react-hot-loader v3çš„ç‰ˆæœ¬ä¸­è¦é…ç½®webpack Hot Module Replacement çš„ module.hotã€‚ä¸è¿‡åœ¨v4çš„ç‰ˆæœ¬åï¼Œå°±ä¸éœ€è¦é…ç½®module.hotäº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if (module.hot) &#123;</span><br><span class="line">    module.hot.accept(&apos;./print.js&apos;, function()&#123;</span><br><span class="line">        console.log(&quot;Accepting the updated printMe module!&quot;);</span><br><span class="line">        printMe();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="react-hot-loaderå¤±æ•ˆé—®é¢˜"><a href="#react-hot-loaderå¤±æ•ˆé—®é¢˜" class="headerlink" title="react-hot-loaderå¤±æ•ˆé—®é¢˜"></a>react-hot-loaderå¤±æ•ˆé—®é¢˜</h3><h4 id="å»æ‰ä¸å¿…è¦æˆ–é‡å¤é…ç½®"><a href="#å»æ‰ä¸å¿…è¦æˆ–é‡å¤é…ç½®" class="headerlink" title="å»æ‰ä¸å¿…è¦æˆ–é‡å¤é…ç½®"></a>å»æ‰ä¸å¿…è¦æˆ–é‡å¤é…ç½®</h4><p>å¤±æ•ˆå¯èƒ½æœ‰å¾ˆå¤šé—®é¢˜ï¼Œå…¶ä¸­ä¹‹ä¸€æ˜¯ å°†ä¸å¿…è¦çš„é…ç½®åˆ é™¤ï¼Œå¯ä»¥è§£å†³hotå®æ•ˆé—®é¢˜ï¼Œä¾‹å¦‚åœ¨<code>npm script</code>ä¸­åŠ å…¥<code>--hot</code>ï¼Œåˆåœ¨webpack.config.jsçš„è®¾ç½®devServer.hotä¸º<code>true</code>,å¹¶ä¸”åœ¨pluginsä¸­åŠ HotModuleReplacementPluginï¼Œå°±å¯èƒ½å¯¼è‡´å¤±æ•ˆï¼Œåˆ é™¤é‡å¤é…ç½®å³å¯ã€‚</p><h4 id="ä¸è¦ä½¿ç”¨-createApp-è€Œä½¿ç”¨"><a href="#ä¸è¦ä½¿ç”¨-createApp-è€Œä½¿ç”¨" class="headerlink" title="ä¸è¦ä½¿ç”¨ createApp() è€Œä½¿ç”¨"></a>ä¸è¦ä½¿ç”¨ createApp() è€Œä½¿ç”¨<app></app></h4><p>é¡¹ç›®hotæ”¹é€ çš„å‘åœ¨äºapplicationå‡½æ•°æ–¹å¼çš„ç¼ºç‚¹å¯èƒ½æ˜¯ï¼Œæ¯æ¬¡renderé¡µé¢éƒ½ä¼šæ‰§è¡Œå‡½æ•°ï¼Œç”Ÿæˆå´­æ–°çš„é¡µé¢ï¼Œè¿™ä¼šæœ‰æ½œåœ¨çš„å‘ã€‚â€”ã€‹è§£å†³ä¹‹é“å‡½æ•°æ–¹å¼æ”¹æˆ ç»„ä»¶æ–¹å¼<code>&lt;app/&gt;</code><br>æ ¹æ®react-hot-loaderçš„é…ç½®æ–¹æ³•ï¼Œéœ€è¦æ”¹å†™ä¸º<code>&lt;app/&gt;</code>æ–¹å¼ï¼Œå¹¶hot appï¼›<br>è¯¦ç»†è§ <a href="https://github.com/YeWills/wills-react-pro/commit/971612a647e0a93c037c04830526cc684d90de76" target="_blank" rel="noopener">å¢åŠ react-hot-loaderçƒ­æ›´æ–°åŠŸèƒ½</a></p><h3 id="æ›´å¤šçŸ¥è¯†"><a href="#æ›´å¤šçŸ¥è¯†" class="headerlink" title="æ›´å¤šçŸ¥è¯†"></a>æ›´å¤šçŸ¥è¯†</h3><h4 id="â€“watch-ä¸-çƒ­æ›´æ–°-1"><a href="#â€“watch-ä¸-çƒ­æ›´æ–°-1" class="headerlink" title="â€“watch ä¸ çƒ­æ›´æ–°"></a>â€“watch ä¸ çƒ­æ›´æ–°</h4><p>å‚è€ƒã€Šwebpack é»‘çŸ¥è¯†ã€‹</p><h4 id="è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶-1"><a href="#è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶-1" class="headerlink" title="è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶"></a>è‡ªåŠ¨ç¼–è¯‘ä¸çƒ­æ›´æ–°ä¸‰å¤§æ¡ä»¶</h4><p>å‚è€ƒã€Šwebpack é»‘çŸ¥è¯†ã€‹</p><h4 id="webpack-dev-serveré»‘çŸ¥è¯†-1"><a href="#webpack-dev-serveré»‘çŸ¥è¯†-1" class="headerlink" title="webpack-dev-serveré»‘çŸ¥è¯†"></a>webpack-dev-serveré»‘çŸ¥è¯†</h4><p>å‚è€ƒã€Šwebpack é»‘çŸ¥è¯†ã€‹</p><h2 id="å¸¸ç”¨æ’ä»¶"><a href="#å¸¸ç”¨æ’ä»¶" class="headerlink" title="å¸¸ç”¨æ’ä»¶"></a>å¸¸ç”¨æ’ä»¶</h2><h3 id="ContextReplacementPlugin-1"><a href="#ContextReplacementPlugin-1" class="headerlink" title="ContextReplacementPlugin"></a>ContextReplacementPlugin</h3><p>å½“é¡¹ç›®ç”¨åˆ°momentæ—¶ï¼ŒåŠ¡å¿…ä½¿ç”¨æ­¤æ’ä»¶ï¼Œå¯å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼Œä»¥ä¸‹ä»£ç ä¸ºä¾‹ï¼ŒåŒ¹é…moment/localeè·¯å¾„ï¼ŒåªåŠ è½½ç¼–è¯‘æ­¤è·¯å¾„ä¸‹çš„/zh-cn|zh-hk|en/çš„æ–‡ä»¶ã€‚<br>new webpack.ContextReplacementPlugin(/moment[/\]locale$/, /zh-cn|zh-hk|en/)</p><h3 id="webpack-NormalModuleReplacementPlugin-1"><a href="#webpack-NormalModuleReplacementPlugin-1" class="headerlink" title="webpack.NormalModuleReplacementPlugin"></a>webpack.NormalModuleReplacementPlugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="webpack-DefinePlugin"><a href="#webpack-DefinePlugin" class="headerlink" title="webpack.DefinePlugin"></a>webpack.DefinePlugin</h3><p>æ­¤æ’ä»¶å®šä¹‰å€¼æ—¶ï¼Œéƒ½éœ€åŠ JSON.stringifyã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    new webpack.DefinePlugin(&#123;</span><br><span class="line">      &apos;process.env.ASSET_PATH&apos;: JSON.stringify(&quot;5fa3b9&quot;),</span><br><span class="line">      &apos;process.env.FLAG&apos;: JSON.stringify(true)</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure></p><h3 id="ProvidePlugin"><a href="#ProvidePlugin" class="headerlink" title="ProvidePlugin"></a>ProvidePlugin</h3><p>é…ç½®å…¨å±€å˜é‡ï¼Œè‡ªåŠ¨åŠ è½½æ¨¡å—ï¼Œä¸å¿…åˆ°å¤„importæˆ–requireï¼š<br>ä¾‹å¦‚è®¾ç½®$ä¸ºå…¨å±€å˜é‡ï¼ŒæŒ‡å‘jqã€‚<br>new webpack.ProvidePlugin({<br>  $: â€˜jqueryâ€™,<br>  jQuery: â€˜jqueryâ€™<br>})</p><h3 id="webpack-optimize-OccurrenceOrderPlugin-1"><a href="#webpack-optimize-OccurrenceOrderPlugin-1" class="headerlink" title="webpack.optimize.OccurrenceOrderPlugin"></a>webpack.optimize.OccurrenceOrderPlugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="happypack-1"><a href="#happypack-1" class="headerlink" title="happypack"></a>happypack</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="AutoDllPlugin"><a href="#AutoDllPlugin" class="headerlink" title="AutoDllPlugin"></a>AutoDllPlugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="webpack-parallel-uglify-plugin-1"><a href="#webpack-parallel-uglify-plugin-1" class="headerlink" title="webpack-parallel-uglify-plugin"></a>webpack-parallel-uglify-plugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="webpack-HashedModuleIdsPlugin-1"><a href="#webpack-HashedModuleIdsPlugin-1" class="headerlink" title="webpack.HashedModuleIdsPlugin"></a>webpack.HashedModuleIdsPlugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h3 id="webpack-optimize-AggressiveMergingPlugin-1"><a href="#webpack-optimize-AggressiveMergingPlugin-1" class="headerlink" title="webpack.optimize.AggressiveMergingPlugin"></a>webpack.optimize.AggressiveMergingPlugin</h3><p>ç”¨æ³•è¯·çœ‹ç« èŠ‚ã€Šæ„å»ºä¸æ€§èƒ½ä¼˜åŒ–ã€‹</p><h2 id="webpack-ç‰ˆæœ¬å˜åŒ–"><a href="#webpack-ç‰ˆæœ¬å˜åŒ–" class="headerlink" title="webpack ç‰ˆæœ¬å˜åŒ–"></a>webpack ç‰ˆæœ¬å˜åŒ–</h2><h3 id="cssåˆ†ç¦»æ’ä»¶"><a href="#cssåˆ†ç¦»æ’ä»¶" class="headerlink" title="cssåˆ†ç¦»æ’ä»¶"></a>cssåˆ†ç¦»æ’ä»¶</h3><p>webpack4.xå¼ƒç”¨äº†extract-text-webpack-pluginï¼Œä½¿ç”¨mini-css-extract-pluginä»£æ›¿ï¼Œæ¥åšcssä»htmlä¸­åˆ†ç¦»å•ç‹¬æˆä¸€ä¸ªcssæ–‡ä»¶ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const MiniCssExtractPlugin = require(&apos;mini-css-extract-plugin&apos;);</span><br><span class="line"> module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: /\.(sc|c|sa)ss$/,</span><br><span class="line">        use: [</span><br><span class="line">          MiniCssExtractPlugin.loader, &#123;</span><br><span class="line">            loader: &apos;css-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;postcss-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &apos;postcss&apos;,</span><br><span class="line">              sourceMap: true,</span><br><span class="line">              plugins: (loader) =&gt; [require(&apos;autoprefixer&apos;)(&#123;browsers: [&apos;&gt; 0.15% in CN&apos;]&#125;)]</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            loader: &apos;sass-loader&apos;,</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap: true</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: &apos;[name][hash].css&apos;, // è®¾ç½®æœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶å</span><br><span class="line">      chunkFilename: &apos;[id][hash].css&apos;</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure></p><h3 id="webpackæ³¨æ„äº‹é¡¹"><a href="#webpackæ³¨æ„äº‹é¡¹" class="headerlink" title="webpackæ³¨æ„äº‹é¡¹"></a>webpackæ³¨æ„äº‹é¡¹</h3><ul><li>ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨inlineæ¨¡å¼çš„source mapï¼Œå› ä¸ºè¿™ä¼šä½¿jsæ–‡ä»¶å˜å¾—å¾ˆå¤§ï¼Œè€Œä¸”ä¼šæ³„éœ²æºç ã€‚</li><li>å°½é‡å†™å…¨åç§°ï¼Œæ‰©å±•åä¹Ÿå†™ä¸Š const common = require(â€˜./webpack.common.jsâ€™);ä¸è¦å†™æˆrequire(â€˜./webpack.commonâ€™)ï¼Œä¸åˆ©äºç¼–è¯‘æŸ¥è¯¢ã€‚</li><li>çº¿ä¸Šå‘å¸ƒï¼Œæˆ–CDNä¼˜åŒ–é…ç½®ï¼Œå¤§éƒ¨åˆ†ä¸åˆç†é…ç½®publicpathæœ‰å…³ã€‚</li></ul><h2 id="å‚è€ƒå’Œå­¦ä¹ èµ„æ–™"><a href="#å‚è€ƒå’Œå­¦ä¹ èµ„æ–™" class="headerlink" title="å‚è€ƒå’Œå­¦ä¹ èµ„æ–™"></a>å‚è€ƒå’Œå­¦ä¹ èµ„æ–™</h2><h3 id="webpack-æ–‡æ¡£ä»‹ç»"><a href="#webpack-æ–‡æ¡£ä»‹ç»" class="headerlink" title="webpack æ–‡æ¡£ä»‹ç»"></a>webpack æ–‡æ¡£ä»‹ç»</h3><p>æœ‰ä¸¤ä¸ªwebpackå®˜ç½‘<br><a href="https://www.webpackjs.com/plugins/" target="_blank" rel="noopener">webpackjs å®˜ç½‘</a><br><a href="https://webpack.docschina.org/plugins/" target="_blank" rel="noopener">docschina å®˜ç½‘</a></p><p>å…¶ä¸­webpackjs å®˜ç½‘çš„ä¿¡æ¯ç›¸æ¯”ä¹‹ä¸‹æ›´å…¨å…¨ï¼Œåœ¨webpackjs å®˜ç½‘ä¸­èƒ½æœç´¢åˆ°æ’ä»¶NamedModulesPluginï¼Œdocschina å®˜ç½‘ ä¸­ä¸èƒ½ã€‚<br>ä½†æ˜¯ï¼Œwebpack githubä¸Šå®˜æ–¹ç»™å‡ºé“¾æ¥çš„å®˜ç½‘æ˜¯docschina å®˜ç½‘ï¼Œä¸ºä»€ä¹ˆå®ƒä¿¡æ¯è¿˜ä¸å…¨å‘¢ï¼Œå¯èƒ½çš„åŸå› æ˜¯ä¸æ˜¾ç¤ºçš„APIå¯èƒ½å·²ç»è¢«åºŸå¼ƒã€‚</p><h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><p><a href="https://ke.qq.com/course/321174" target="_blank" rel="noopener">è€é©¬å…¨æ ˆVIP2_02_webpack4é…ç½®å…¥é—¨åˆ°è¿›é˜¶</a><br><a href="https://www.imooc.com/learn/802" target="_blank" rel="noopener">webpackæ·±å…¥ä¸å®æˆ˜</a><br><a href="https://www.imooc.com/learn/935" target="_blank" rel="noopener">Vue+Webpackæ‰“é€ todoåº”ç”¨</a><br>æ˜é‡‘å°å†Œ-ä½¿ç”¨webpackå®šåˆ¶å‰ç«¯å¼€å‘ç¯å¢ƒ<br>å´æµ©éºŸ-æ·±å…¥æµ…å‡ºwebpack<br><a href="https://www.webpackjs.com/" target="_blank" rel="noopener">webpack å®˜ç½‘</a><br>æ­¤å®˜ç½‘ä¸‹çš„å››ä¸ªå­æ¨¡å—æ–‡æ¡£ï¼š<br>    <a href="https://www.webpackjs.com/concepts/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_æ¦‚å¿µ</a><br>    <a href="https://www.webpackjs.com/configuration/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_é…ç½®</a><br>    <a href="https://www.webpackjs.com/api/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_API</a><br>    <a href="https://www.webpackjs.com/guides/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_æŒ‡å—</a><br>    <a href="https://www.webpackjs.com/loaders/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_loader</a><br>    <a href="https://www.webpackjs.com/plugins/" target="_blank" rel="noopener">webpack æ–‡æ¡£å®˜ç½‘_æ’ä»¶</a><br><a href="https://segmentfault.com/a/1190000007479892" target="_blank" rel="noopener">webpackå­¦ä¹ ç³»åˆ—</a><br><a href="https://www.mmxiaowu.com/article/58482332d4352863efb55465" target="_blank" rel="noopener">WebPack ç»ˆæé…ç½®è¯´æ˜</a><br><a href="https://github.com/YeWills/webpack-code/tree/master" target="_blank" rel="noopener">åŸåˆ›webpack demo ä¸»è¦åº”ç”¨åˆ†æ”¯</a><br><a href="https://github.com/YeWills/webpack-code/tree/ejsHtml" target="_blank" rel="noopener">åŸåˆ›webpack demo æ¨¡æ¿ejsè¯­æ³•åˆ†æ”¯</a><br><a href="https://github.com/YeWills/webpack-code/tree/webpack_custom_merge_demo" target="_blank" rel="noopener">åŸåˆ›webpack demo è‡ªå®šä¹‰merge configåˆ†æ”¯</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> webpack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoç¬”è®°</title>
      <link href="/2018/10/01/hexo/"/>
      <url>/2018/10/01/hexo/</url>
      
        <content type="html"><![CDATA[<h2 id="hexo-å¸¸ç”¨çŸ¥è¯†"><a href="#hexo-å¸¸ç”¨çŸ¥è¯†" class="headerlink" title="hexo å¸¸ç”¨çŸ¥è¯†"></a>hexo å¸¸ç”¨çŸ¥è¯†</h2><h3 id="publicç›®å½•"><a href="#publicç›®å½•" class="headerlink" title="publicç›®å½•"></a>publicç›®å½•</h3><p>æ ¹ç›®å½•æ‰§è¡Œhexo g å‘½ä»¤ï¼Œä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªpublic/ æ–‡ä»¶å¤¹ï¼Œ<br>hexo gæ˜¯ä¸€ä¸ªç¼–è¯‘æºç çš„å‘½ä»¤ï¼Œç¼–è¯‘åçš„æºç ï¼Œå¯ä»¥ç›´æ¥ä¾›GitHubç½‘å€ç”Ÿæˆåšå®¢ã€‚<br>å› æ­¤public/ æ–‡ä»¶å¤¹æ˜¯ç”¨æ¥å°†æºç ä¸Šä¼ åˆ°githubä¸Šï¼Œä¾›githubç”Ÿæˆåšå®¢çš„ã€‚</p><h3 id="å¸¸ç”¨hexoå‘½ä»¤"><a href="#å¸¸ç”¨hexoå‘½ä»¤" class="headerlink" title="å¸¸ç”¨hexoå‘½ä»¤"></a>å¸¸ç”¨hexoå‘½ä»¤</h3><h4 id="å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œçœ‹åšå®¢æ•ˆæœ"><a href="#å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œçœ‹åšå®¢æ•ˆæœ" class="headerlink" title="å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œçœ‹åšå®¢æ•ˆæœ"></a>å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œçœ‹åšå®¢æ•ˆæœ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure><h4 id="å‘å¸ƒåˆ°GitHub"><a href="#å‘å¸ƒåˆ°GitHub" class="headerlink" title="å‘å¸ƒåˆ°GitHub"></a>å‘å¸ƒåˆ°GitHub</h4><p>å°†gitä»“åº“æ”¾åœ¨publicä¸­ï¼Œæ¯æ¬¡éœ€è¦å‘å¸ƒæ—¶ï¼Œæ ¹ç›®å½•ä¸‹æ‰§è¡Œhexo gï¼Œç„¶ååœ¨publicç›®å½•ä¸‹ git push;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure></p><h4 id="å…¶ä»–å‘½ä»¤"><a href="#å…¶ä»–å‘½ä»¤" class="headerlink" title="å…¶ä»–å‘½ä»¤"></a>å…¶ä»–å‘½ä»¤</h4><p>hexo d å¹¶ä¸ä¼šåˆ é™¤publcç›®å½•çš„.gitæ–‡ä»¶å¤¹ï¼Œåªä¼šå¢é‡å åŠ ã€‚ â€“ç›®å‰æ²¡æœ‰ç”¨è¿‡ï¼›<br>æ³¨æ„ï¼Œä¸è¦æ‰§è¡Œhexo cleanï¼Œå®ƒä¼šåˆ é™¤publicç›®å½•</p><h3 id="å†™çš„æ–‡ç« æ”¾åœ¨å“ªé‡Œä¸-postsç›®å½•"><a href="#å†™çš„æ–‡ç« æ”¾åœ¨å“ªé‡Œä¸-postsç›®å½•" class="headerlink" title="å†™çš„æ–‡ç« æ”¾åœ¨å“ªé‡Œä¸_postsç›®å½•"></a>å†™çš„æ–‡ç« æ”¾åœ¨å“ªé‡Œä¸_postsç›®å½•</h3><p>YeWills.github.io/source/_posts/<br>æ‰€æœ‰çš„æ–‡ç« éƒ½æ”¾ç½®äº_postsç›®å½•ä¸‹ã€‚</p><h3 id="åˆ›å»ºtagä¸categoriesç›¸å…³äº‹æƒ…"><a href="#åˆ›å»ºtagä¸categoriesç›¸å…³äº‹æƒ…" class="headerlink" title="åˆ›å»ºtagä¸categoriesç›¸å…³äº‹æƒ…"></a>åˆ›å»ºtagä¸categoriesç›¸å…³äº‹æƒ…</h3><p>äºŒè€…é…ç½®ä¸€æ ·ï¼Œä»¥categoriesä¸ºä¾‹ï¼š<br>hexo new page categories<br>ç”Ÿæˆç›®å½•å’Œæ–‡ä»¶ï¼š<br>YeWills.github.io/source/categories/index.md<br>ä¿®æ”¹index.mdå…ƒæ•°æ®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: categories</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">layout: &quot;categories&quot;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶ä¿®æ”¹<br>YeWills.github.io/scaffolds/draft.md<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">tags: &#123;&#123; tags &#125;&#125;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>YeWills.github.io/scaffolds/page.md<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>YeWills.github.io/scaffolds/post.md<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#123;&#123; title &#125;&#125;</span><br><span class="line">date: &#123;&#123; date &#125;&#125;</span><br><span class="line">tags: &#123;&#123; tags &#125;&#125;</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><p>å¦‚æ­¤ä¾¿å¯ä»¥é…ç½®å‡ºcategoriesçš„allæˆ–å…¨éƒ¨ çš„é€‰é¡¹å¡å†…å®¹ï¼Œå¦‚æœæ²¡æœ‰ä»¥ä¸Šæ­¥éª¤ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆcategoriesï¼Œä½†æ— æ³•ç”Ÿäº§categoriesçš„allæˆ–å…¨éƒ¨ çš„é€‰é¡¹å¡å†…å®¹ï¼›<br>ä¸”ç‚¹å‡»æœ¬ä¸»é¢˜å·¦ä¾§èœå•æ categoriesä¼šæŠ¥404é”™è¯¯ã€‚</p><p>è¿™ä¸€æ­¥çš„é…ç½®å†…å®¹ï¼Œå¯çœ‹commit å“ˆå¸Œå€¼ cbb06710ce7a40ade93</p><h3 id="categoriesã€tagsä¸¤ç§é…ç½®æ–¹å¼"><a href="#categoriesã€tagsä¸¤ç§é…ç½®æ–¹å¼" class="headerlink" title="categoriesã€tagsä¸¤ç§é…ç½®æ–¹å¼"></a>categoriesã€tagsä¸¤ç§é…ç½®æ–¹å¼</h3><p>categories:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// æ¨èä½¿ç”¨æ–¹æ³• method one,åŒæ¨ªæ æ–¹å¼ï¼Œå¯ä»¥é…ç½®å¤šçº§ï¼Œ</span><br><span class="line">categories: </span><br><span class="line">- react</span><br><span class="line">- reactè¯»ä¹¦ç¬”è®°</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// method two,åªèƒ½é…ç½®ä¸€ä¸ªå€¼</span><br><span class="line">categories: &quot;react&quot;</span><br></pre></td></tr></table></figure><p>tags:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// method one</span><br><span class="line">tags:[react, reactè¯»ä¹¦ç¬”è®°]</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// method two,åªèƒ½é…ç½®ä¸€ä¸ªå€¼</span><br><span class="line">tags: react</span><br></pre></td></tr></table></figure><h3 id="åšå®¢èœå•æ å·¦ä¾§å†…å®¹ä¿®æ”¹"><a href="#åšå®¢èœå•æ å·¦ä¾§å†…å®¹ä¿®æ”¹" class="headerlink" title="åšå®¢èœå•æ å·¦ä¾§å†…å®¹ä¿®æ”¹"></a>åšå®¢èœå•æ å·¦ä¾§å†…å®¹ä¿®æ”¹</h3><p>æ¯”å¦‚ä¿®æ”¹qqå·ç ï¼Œåå­—ï¼Œgitåœ°å€ï¼Œéƒ½å¯åœ¨è¿™é‡Œä¿®æ”¹YeWills.github.io/themes/mellow/_config.yml</p><h3 id="åšå®¢èœå•æ å·¦ä¾§èœå•å¢å‡"><a href="#åšå®¢èœå•æ å·¦ä¾§èœå•å¢å‡" class="headerlink" title="åšå®¢èœå•æ å·¦ä¾§èœå•å¢å‡"></a>åšå®¢èœå•æ å·¦ä¾§èœå•å¢å‡</h3><p>æ¯”å¦‚ä¿®æ”¹qqå·ç ï¼Œåå­—ï¼Œgitåœ°å€ï¼Œéƒ½å¯åœ¨è¿™é‡Œä¿®æ”¹YeWills.github.io/themes/mellow/_config.yml<br>ä¿®æ”¹æ”¹æ–‡ä»¶çš„menuéƒ¨åˆ†ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home:</span><br><span class="line">    text: HOME</span><br><span class="line">    url: /</span><br><span class="line">    icon: home</span><br><span class="line">  th-list:</span><br><span class="line">    text: CATEGORIES</span><br><span class="line">    url: /categories</span><br><span class="line">    icon: th-list</span><br><span class="line">  tags:</span><br><span class="line">    text: TAGS</span><br><span class="line">    url: /tags</span><br><span class="line">    icon: tags</span><br><span class="line">  archives:</span><br><span class="line">    text: ARCHIVES</span><br><span class="line">    url: /archives</span><br><span class="line">    icon: archives</span><br></pre></td></tr></table></figure></p><p>å¦‚ä¸Šï¼Œmenu.th-listé…ç½®çš„æ˜¯categoriesç›®å½•</p><h2 id="hexo-é»‘çŸ¥è¯†"><a href="#hexo-é»‘çŸ¥è¯†" class="headerlink" title="hexo é»‘çŸ¥è¯†"></a>hexo é»‘çŸ¥è¯†</h2><h3 id="loadingä¸‰çº§æ ‡é¢˜çš„ç¼–è¯‘å¼‚å¸¸"><a href="#loadingä¸‰çº§æ ‡é¢˜çš„ç¼–è¯‘å¼‚å¸¸" class="headerlink" title="loadingä¸‰çº§æ ‡é¢˜çš„ç¼–è¯‘å¼‚å¸¸"></a>loadingä¸‰çº§æ ‡é¢˜çš„ç¼–è¯‘å¼‚å¸¸</h3><p>ç»™ä¸‰çº§æ ‡é¢˜ååªæœ‰å•ç‹¬çš„ ä¸€ä¸ª loading å­—æ—¶ï¼Œhexoç¼–è¯‘å‡ºæ¥çš„ç›®å½•å¯èƒ½ä¼šå¼‚å¸¸ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸ªä¼šå¼‚å¸¸</span><br><span class="line">### loading</span><br></pre></td></tr></table></figure></p><p>è§£å†³ä¹‹é“æ˜¯åœ¨æ ‡é¢˜ä¸å®šä¹‰ä¸ºå•ç‹¬çš„loadingï¼ŒåŠ ç‚¹å­—å°±è¡Œå¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//è¿™ä¸ªæ­£å¸¸</span><br><span class="line">### æœ‰å…³loading</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
