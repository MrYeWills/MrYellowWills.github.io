<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>linux笔记(离) | Mr.Yellow.Wills</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="linux">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.3.9">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"codefine","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Mr.Yellow</h5>
          <a href="mailto:601661706@qq.com" title="601661706@qq.com" class="mail">
            
              <span>6</span>
            
              <span>0</span>
            
              <span>1</span>
            
              <span>6</span>
            
              <span>6</span>
            
              <span>1</span>
            
              <span>7</span>
            
              <span>0</span>
            
              <span>6</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/YeWills/YeWills.github.io/tree/blog_code" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                HOME
              </a>
            </li>
        
            <li class="">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                CATEGORIES
              </a>
            </li>
        
            <li class="">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                TAGS
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                ARCHIVES
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>linux笔记(离)</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">linux笔记(离)</h1>
        <h5 class="subtitle">
            
                <time datetime="2021-06-19T00:00:00.000Z" itemprop="datePublished" class="page-time">
  2021-06-19
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/linux/">linux</a></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-linux_six"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">linux笔记(离)</h1>
        <div class="post-meta">
            <time class="post-time" title="2021-06-19 00:00:00" datetime="2021-06-19T00:00:00.000Z"  itemprop="datePublished">2021-06-19</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/linux/">linux</a></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>dock 表示码头，docker是 码头工人的意思<br>docker 是一个容器(container)引擎</p>
<h3 id="容器和虚拟机的区别"><a href="#容器和虚拟机的区别" class="headerlink" title="容器和虚拟机的区别"></a>容器和虚拟机的区别</h3><p>如下图，其中 app a 好比虚拟机centos中 yum install 各种软件 如httpd， squid<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/vir.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/vir.png" alt title class></a>
                <p></p>
            </figure><br>还可以参考<a href="https://blog.csdn.net/jingzhunbiancheng/article/details/80994909" target="_blank" rel="noopener">Docker与VM虚拟机的区别以及Docker的特点</a><br>还可以参考<a href="https://www.zhihu.com/question/48174633" target="_blank" rel="noopener">docker容器与虚拟机有什么区别？</a></p>
<h3 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h3><p>docker 企业版是收费的<br>docker-ce 是社区版，免费的，一般用 docker-ce社区版。<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/sim.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/sim.png" alt title class></a>
                <p></p>
            </figure></p>
<h3 id="centos的docker安装和使用"><a href="#centos的docker安装和使用" class="headerlink" title="centos的docker安装和使用"></a>centos的docker安装和使用</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>下面安装步骤和使用全部<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener">参考官网</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils</span><br><span class="line">#设置稳定仓库</span><br><span class="line">sudo yum-config-manager \</span><br><span class="line">   --add-repo \</span><br><span class="line">   https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></p>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/ins.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/ins.png" alt title class></a>
                <p></p>
            </figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-ce docker-ce-cli containerd.io  #docker-ce是免费版本</span><br></pre></td></tr></table></figure>
<p>至此安装完毕</p>
<h4 id="使用一：-hello-world"><a href="#使用一：-hello-world" class="headerlink" title="使用一： hello-world"></a>使用一： hello-world</h4><p>安装好后，直接看文档这里<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/start.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/start.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/start1.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/start1.png" alt title class></a>
                <p></p>
            </figure></p>
<h4 id="使用二：安装和使用centos"><a href="#使用二：安装和使用centos" class="headerlink" title="使用二：安装和使用centos"></a>使用二：安装和使用centos</h4><p>涉及到比较多，单独列出说明:《安装和使用centos》</p>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -it centos bash</span><br><span class="line">Unable to find image &apos;centos:latest&apos; locally</span><br><span class="line">docker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).</span><br><span class="line">See &apos;docker run --help&apos;.</span><br></pre></td></tr></table></figure>
<p>如果遇到这样的异常，请多尝试几次</p>
<h3 id="安装和使用centos"><a href="#安装和使用centos" class="headerlink" title="安装和使用centos"></a>安装和使用centos</h3><h4 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h4><p><code>docker run -it centos bash</code> 这个命令是使用docker进入 centos 的bash终端；<br>docker会首先从本地查看是否有centos，如果无，就会自动安装centos；<br>然后进入centos 的bash终端<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker run -it centos bash</span><br><span class="line">Unable to find image &apos;centos:latest&apos; locally</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">7a0437f04f83: Pull complete</span><br><span class="line">Digest: sha256:5528e8b1b1719d34604c87e11dcd1c0a20bedf46e83b5632cdeac91b8c04efc1</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line">#注意这里以及变成root@30c93c21d6d0 与上一步centos主机root@localhost</span><br><span class="line">#这说明安装完后，默认进入centos终端，且使用root用户 </span><br><span class="line">[root@30c93c21d6d0 /]# ls  </span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@30c93c21d6d0 /]# pwd</span><br><span class="line">/</span><br><span class="line">[root@30c93c21d6d0 /]# exit 退出docker centos系统，进入主机centos系统终端</span><br><span class="line">exit</span><br><span class="line">[root@localhost ~]# pwd</span><br><span class="line">/root</span><br><span class="line">#退出docker centos系统后，仍然可以使用docker使用docker centos系统内的可运行程序，</span><br><span class="line">#比如 docker centos系统内的echo 程序输出语句</span><br><span class="line">[root@localhost ~]# docker run -it centos /bin/echo &quot;hollo docker..&quot;</span><br><span class="line">hollo docker..</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure></p>
<h4 id="退出docker-centos系统后仍可使用"><a href="#退出docker-centos系统后仍可使用" class="headerlink" title="退出docker centos系统后仍可使用"></a>退出docker centos系统后仍可使用</h4><p>退出docker centos系统后，仍然可以使用docker使用docker centos系统内的可运行程序，见上面《安装和使用》的命令行</p>
<h3 id="其他介绍"><a href="#其他介绍" class="headerlink" title="其他介绍"></a>其他介绍</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images  #docker安装的镜像</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    d1165f221234   3 months ago   13.3kB</span><br><span class="line">centos        latest    300e315adb2f   6 months ago   209MB</span><br><span class="line">[root@localhost ~]# docker ps   #docker目前在运行的进程，下面显示是没有</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line">[root@localhost ~]# docker ps -a  #-a表示docker刚才运行的进程</span><br><span class="line">CONTAINER ID   IMAGE         COMMAND                  CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">fdc92c41c363   centos        &quot;/bin/echo &apos;hollo do…&quot;   8 minutes ago    Exited (0) 7 minutes ago              optimistic_volhard</span><br><span class="line">30c93c21d6d0   centos        &quot;bash&quot;                   16 minutes ago   Exited (0) 15 minutes ago             busy_jang</span><br><span class="line">889899077b9c   hello-world   &quot;/hello&quot;                 32 minutes ago   Exited (0) 32 minutes ago             clever_dirac</span><br><span class="line">[root@localhost ~]# docker ps --help</span><br><span class="line"></span><br><span class="line">Usage:  docker ps [OPTIONS]</span><br><span class="line"></span><br><span class="line">List containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all containers (default shows just running)</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided</span><br><span class="line">      --format string   Pretty-print containers using a Go template</span><br><span class="line">  -n, --last int        Show n last created containers (includes all states) (default -1)</span><br><span class="line">  -l, --latest          Show the latest created container (includes all states)</span><br><span class="line">      --no-trunc        Don&apos;t truncate output</span><br><span class="line">  -q, --quiet           Only display container IDs</span><br><span class="line">  -s, --size            Display total file sizes</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure>
<h2 id="LNMP架构安装使用"><a href="#LNMP架构安装使用" class="headerlink" title="LNMP架构安装使用"></a>LNMP架构安装使用</h2><h3 id="LNMP架构介绍"><a href="#LNMP架构介绍" class="headerlink" title="LNMP架构介绍"></a>LNMP架构介绍</h3><p>LNMP架构 ： Linux + nginx + mysql + （mariaDB） + php 的开发架构<br>类似的有LAMP架构：<br>LAMP架构 : Linux + apache + mysql + （mariaDB） + php 的开发架构</p>
<p>php 与 apache 天生就搭配，但 nginx与php通讯必须要安装 FastCGI协议；</p>
<p>Discuz！ 一个国内的论坛 BBS 软件系统</p>
<h3 id="认识FastCGI"><a href="#认识FastCGI" class="headerlink" title="认识FastCGI"></a>认识FastCGI</h3><h4 id="架构示意图"><a href="#架构示意图" class="headerlink" title="架构示意图"></a>架构示意图</h4><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/fa1.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/fa1.png" alt title class></a>
                <p></p>
            </figure>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/fa3.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/fa3.png" alt title class></a>
                <p></p>
            </figure>
<h4 id="FastCGI是相对于早期的-CGI说的"><a href="#FastCGI是相对于早期的-CGI说的" class="headerlink" title="FastCGI是相对于早期的 CGI说的"></a>FastCGI是相对于早期的 CGI说的</h4><p>下面是早期的 CGI架构，因为有某些不足，因此就有了上面的 fastCGI.<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/fa2.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/fa2.png" alt title class></a>
                <p></p>
            </figure></p>
<h4 id="延申讲解-uwsgi"><a href="#延申讲解-uwsgi" class="headerlink" title="延申讲解- uwsgi"></a>延申讲解- uwsgi</h4><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/fa4.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/fa4.png" alt title class></a>
                <p></p>
            </figure>
<h3 id="FastCGI协议-与-php-fpm"><a href="#FastCGI协议-与-php-fpm" class="headerlink" title="FastCGI协议 与 php-fpm"></a>FastCGI协议 与 php-fpm</h3><p>FastCGI协议是可以让nginx与php进行通讯的一个协议<br>php-fpm就是一个这样的协议：</p>
<h3 id="php-fpm"><a href="#php-fpm" class="headerlink" title="php-fpm"></a>php-fpm</h3><h4 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h4><p>表示 FastCGI 进程管理器<br>默认监听9000端口</p>
<h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install php-fpm</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.ustc.edu.cn</span><br><span class="line"> * epel: mirrors.thzhost.com</span><br><span class="line"> * extras: mirrors.ustc.edu.cn</span><br><span class="line"> * updates: mirrors.ustc.edu.cn</span><br><span class="line"> * webtatic: us-east.repo.webtatic.com</span><br><span class="line">Resolving Dependencies</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package php-fpm.x86_64 0:5.4.16-48.el7 will be installed</span><br><span class="line">--&gt; Processing Dependency: php-common(x86-64) = 5.4.16-48.el7 for package: php-fpm-5.4.16-48.el7.x86_64</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package php-common.x86_64 0:5.4.16-48.el7 will be installed</span><br><span class="line">--&gt; Processing Conflict: php56w-common-5.6.40-1.w7.x86_64 conflicts php-common &lt; 5.6</span><br><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line">#因为之前升级了php版本到 php56，与php-fpm 冲突</span><br><span class="line">Error: php56w-common conflicts with php-common-5.4.16-48.el7.x86_64</span><br><span class="line"> You could try using --skip-broken to work around the problem</span><br><span class="line"> You could try running: rpm -Va --nofiles --nodigest</span><br></pre></td></tr></table></figure>
<h4 id="安装异常"><a href="#安装异常" class="headerlink" title="安装异常"></a>安装异常</h4><p>如上因为之前升级了php版本到 php56，与php-fpm 冲突，<br>既然这样，就不安装 php-fpm，安装 php56w-fpm</p>
<h4 id="解决之道"><a href="#解决之道" class="headerlink" title="解决之道"></a>解决之道</h4><p>当然你也可以卸载php56，安装php低版本，不过不太好，直接安装php56w-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# yum install php-fpm</span><br><span class="line">#安装完后，会发现nginx目录下下多了下面文件</span><br><span class="line">[root@localhost ~]# ls /etc/nginx/</span><br><span class="line"> fastcgi.conf.default uwsgi_params fastcgi_params uwsgi_params.default</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<h4 id="安装完后继续使用-php-fpm"><a href="#安装完后继续使用-php-fpm" class="headerlink" title="安装完后继续使用 php-fpm"></a>安装完后继续使用 php-fpm</h4><p>虽然安装的是php56w-fpm，但安装好后，使用时，请使用php-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start php-fpm</span><br><span class="line">systemctl enable php-fpm</span><br></pre></td></tr></table></figure></p>
<h3 id="配置nginx和php通讯"><a href="#配置nginx和php通讯" class="headerlink" title="配置nginx和php通讯"></a>配置nginx和php通讯</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line"> location / &#123;</span><br><span class="line">              index index.html index.htm index.php;  #网页的文件可以是这几种类型；</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">#再次写个location，用来解析php文件， ~表示使用正则表达式， 凡是匹配到php的文件时</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">          fastcgi_pass 127.0.0.1:9000; #匹配到php文件是，传递给fastcgi，9000是fastcgi默认端口</span><br><span class="line">          fastcgi_index index.php;</span><br><span class="line">          #$document_root 代表配置文件中server模块下的root ： /usr/share/nginx/html;</span><br><span class="line">          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  </span><br><span class="line">          include fastcgi_params;</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure>
<h4 id="访问页面"><a href="#访问页面" class="headerlink" title="访问页面"></a>访问页面</h4><p><a href="https://192.168.1.109/" target="_blank" rel="noopener">https://192.168.1.109/</a><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/ok1.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/ok1.png" alt title class></a>
                <p></p>
            </figure><br><a href="https://192.168.1.109/index.php" target="_blank" rel="noopener">https://192.168.1.109/index.php</a><br>显示下面文件，说明 php与nginx通讯正常了：<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/ok2.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/ok2.png" alt title class></a>
                <p></p>
            </figure></p>
<h4 id="调试技巧"><a href="#调试技巧" class="headerlink" title="调试技巧"></a>调试技巧</h4><p>nginx -t 可以调试配置文件 <code>/etc/nginx/nginx.conf</code> 哪里哪一行出错，语法出错。</p>
<h4 id="完整配置"><a href="#完整配置" class="headerlink" title="完整配置"></a>完整配置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# cat /etc/nginx/nginx.conf</span><br><span class="line"># For more information on configuration, see:</span><br><span class="line">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="line">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><span class="line"></span><br><span class="line">user nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log /var/log/nginx/error.log;</span><br><span class="line">pid /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="line">include /usr/share/nginx/modules/*.conf;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections 1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile            on;</span><br><span class="line">    tcp_nopush          on;</span><br><span class="line">    tcp_nodelay         on;</span><br><span class="line">    keepalive_timeout   65;</span><br><span class="line">    types_hash_max_size 2048;</span><br><span class="line"></span><br><span class="line">    include             /etc/nginx/mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    # Load modular configuration files from the /etc/nginx/conf.d directory.</span><br><span class="line">    # See http://nginx.org/en/docs/ngx_core_module.html#include</span><br><span class="line">    # for more information.</span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line"></span><br><span class="line"> # upstream backend-apache &#123;</span><br><span class="line">  #    server 127.0.0.1:7080;</span><br><span class="line"> # &#125;</span><br><span class="line"> #upstream backend-jenkins &#123;</span><br><span class="line">  #      server 127.0.0.1:8080;</span><br><span class="line">   # &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;</span><br><span class="line">        listen       [::]:80 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">        #location / &#123;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">       return 301 https://$host$request_uri;</span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"># Settings for a TLS enabled server.</span><br><span class="line">#</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       443 ssl http2 default_server;</span><br><span class="line">        listen       [::]:443 ssl http2 default_server;</span><br><span class="line">        server_name  _;</span><br><span class="line">        root         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        ssl_certificate &quot;/etc/nginx/pki/server.crt&quot;;</span><br><span class="line">        ssl_certificate_key &quot;/etc/nginx/pki/server.key&quot;;</span><br><span class="line">        ssl_session_cache shared:SSL:1m;</span><br><span class="line">        ssl_session_timeout  10m;</span><br><span class="line">        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        # Load configuration files for the default server block.</span><br><span class="line">        include /etc/nginx/default.d/*.conf;</span><br><span class="line"></span><br><span class="line">      #   location / &#123;</span><br><span class="line">       #         proxy_pass http://backend-apache;</span><br><span class="line">       # &#125;</span><br><span class="line"></span><br><span class="line">        #location /jenkins &#123;</span><br><span class="line">         #       proxy_pass http://backend-jenkins;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">              index index.html index.htm index.php;</span><br><span class="line">        &#125;</span><br><span class="line">  location ~ \.php$ &#123;</span><br><span class="line">          fastcgi_pass 127.0.0.1:9000;</span><br><span class="line">          fastcgi_index index.php;</span><br><span class="line">          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">          include fastcgi_params;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">        location = /404.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[root@localhost html]#</span><br></pre></td></tr></table></figure>
<h3 id="Discuz论坛搭建-LNMP架构的实践"><a href="#Discuz论坛搭建-LNMP架构的实践" class="headerlink" title="Discuz论坛搭建(LNMP架构的实践)"></a>Discuz论坛搭建(LNMP架构的实践)</h3><h4 id="参考官网安装"><a href="#参考官网安装" class="headerlink" title="参考官网安装"></a>参考官网安装</h4><p>Discuz论坛 就是基于LNMP架构<br>Linux + nginx + mysql + （mariaDB） + php 的开发架构</p>
<p>安装教程参考 <a href="https://www.dismall.com/thread-77-1-1.html" target="_blank" rel="noopener">Discuz官网</a><br>任意电脑下下载安装包：<br>进入<a href="https://www.discuz.net/" target="_blank" rel="noopener">首页</a><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc20.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc20.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc21.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc21.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc22.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc22.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc23.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc23.png" alt title class></a>
                <p></p>
            </figure></p>
<p>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ scp Discuz_X3.4_SC_UTF8_20210520.zip root@192.168.1.109:/usr/share/nginx/html  这是nginx文档目录</span><br></pre></td></tr></table></figure></p>
<h4 id="在服务端执行以下命令"><a href="#在服务端执行以下命令" class="headerlink" title="在服务端执行以下命令"></a>在服务端执行以下命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> cd /usr/share/nginx/html/</span><br><span class="line"> unzip Discuz_X3.4_SC_UTF8_20210520.zip</span><br><span class="line">[root@localhost html]# ls</span><br><span class="line"> readme   upload  utility ...  解压后多出这几个文件</span><br><span class="line">[root@localhost html]# rm -rf 404.html 50x.html index.html index.php  删除无用文件</span><br><span class="line">[root@localhost html]# mv upload/* .  将解压出来的 upload 内文件，移到到本目录</span><br><span class="line">[root@localhost html]# ls</span><br><span class="line">#有install文件夹，就是后面要访问的</span><br><span class="line">admin.php  config           en-US        home.php   install     misc.php        poweredby.png  robots.txt  template   utility</span><br><span class="line">api        connect.php      favicon.ico  icons      LICENSE     nginx-logo.png  qqqun.png      search.php  uc_client</span><br><span class="line">api.php    crossdomain.xml  forum.php    img        m           plugin.php      readme         source      uc_server</span><br><span class="line">archiver   data             group.php    index.php  member.php  portal.php      readme.html    static      upload</span><br><span class="line">[root@localhost html]# chmod -Rf 777 .   设置权限为777 可读写</span><br></pre></td></tr></table></figure>
<h4 id="使用Discuz自带的页面安装程序-install"><a href="#使用Discuz自带的页面安装程序-install" class="headerlink" title="使用Discuz自带的页面安装程序 install"></a>使用Discuz自带的页面安装程序 install</h4><p>页面访问 <a href="https://192.168.1.109/install" target="_blank" rel="noopener">https://192.168.1.109/install</a></p>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc1.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc1.png" alt title class></a>
                <p></p>
            </figure>
<h4 id="不可读写的问题"><a href="#不可读写的问题" class="headerlink" title="不可读写的问题"></a>不可读写的问题</h4><p>是权限的问题<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc2.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc2.png" alt title class></a>
                <p></p>
            </figure><br>解决方法一(不推荐，此方法可能导致开机异常)：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">semanage fcontext -a -t httpd_sys_rw_content_t &quot;(/.*)?&quot;</span><br><span class="line">restorecon -Rv .</span><br></pre></td></tr></table></figure></p>
<p>终极解决方法(推荐):<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">semanage 0</span><br></pre></td></tr></table></figure></p>
<p>再次刷新页面：<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/ok3.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/ok3.png" alt title class></a>
                <p></p>
            </figure></p>
<p>点击下一步<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc3.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc3.png" alt title class></a>
                <p></p>
            </figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost html]# mysql -u root -p  #下图中的root就是根据你自己安装在centos上的mysql来的</span><br></pre></td></tr></table></figure>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc4.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc4.png" alt title class></a>
                <p></p>
            </figure>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc5.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc5.png" alt title class></a>
                <p></p>
            </figure>
<figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc6.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc6.png" alt title class></a>
                <p></p>
            </figure>
<p>发帖<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc7.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc7.png" alt title class></a>
                <p></p>
            </figure><br>管理中心<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/doc8.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/doc8.png" alt title class></a>
                <p></p>
            </figure></p>
<p>以后每次只需要通过 <a href="https://192.168.1.109/" target="_blank" rel="noopener">https://192.168.1.109/</a> 即可访问</p>
<h2 id="救援模式"><a href="#救援模式" class="headerlink" title="救援模式"></a>救援模式</h2><p>由于上面配置Discuz时 修改了上下文 <code>semanage fcontext -a -t httpd_sys_rw_content_t &quot;(/.*)?&quot;</code>，<br>导致了开机服务器 centos时，安全验证的问题，无法开机，因此要进入救援模式，关闭 selinux，重启机器.<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help1.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help1.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help2.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help2.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help3.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help3.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help4.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help4.png" alt title class></a>
                <p></p>
            </figure><br>通过编辑 /etc/selinux/config 目录，可以永久关闭seLinux；<br>因为setenforce 0 是暂时关闭。<br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help5.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help5.png" alt title class></a>
                <p></p>
            </figure><br><figure class="image-box">
                <a rel=linux笔记(离) href="/image/linuxs/help6.png" title="undefined" data-fancybox="images"><img src="/image/linuxs/help6.png" alt title class></a>
                <p></p>
            </figure></p>
<p>然后执行命令<br>exit  退出<br>reboot  重启就好了</p>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2023-12-27T13:59:49.550Z" itemprop="dateUpdated">2023-12-27 13:59:49</time>
</span><br>


        
        博客内容均为原创，转载注明出处，原文地址：<a href="/2021/06/19/linux_six/" target="_blank" rel="external">https://yewills.github.io/2021/06/19/linux_six/</a>
        
    </div>
    <footer>
        <a href="https://yewills.github.io">
            <img src="/img/avatar.jpg" alt="Mr.Yellow">
            Mr.Yellow
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yewills.github.io/2021/06/19/linux_six/&title=《linux笔记(离)》 — Mr.Yellow.Wills&pic=https://yewills.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yewills.github.io/2021/06/19/linux_six/&title=《linux笔记(离)》 — Mr.Yellow.Wills&source=hellow kity" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2021/06/22/nginx_base/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">nginx笔记</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2021/06/16/linux_five/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">linux笔记(坎)</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#docker"><span class="post-toc-number">1.</span> <span class="post-toc-text">docker</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#容器和虚拟机的区别"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">容器和虚拟机的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#版本"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">版本</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#centos的docker安装和使用"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">centos的docker安装和使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用一：-hello-world"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">使用一： hello-world</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用二：安装和使用centos"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">使用二：安装和使用centos</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#异常处理"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">异常处理</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装和使用centos"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">安装和使用centos</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装和使用"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">安装和使用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#退出docker-centos系统后仍可使用"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">退出docker centos系统后仍可使用</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#其他介绍"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">其他介绍</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LNMP架构安装使用"><span class="post-toc-number">2.</span> <span class="post-toc-text">LNMP架构安装使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#LNMP架构介绍"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">LNMP架构介绍</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#认识FastCGI"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">认识FastCGI</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#架构示意图"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">架构示意图</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#FastCGI是相对于早期的-CGI说的"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">FastCGI是相对于早期的 CGI说的</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#延申讲解-uwsgi"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">延申讲解- uwsgi</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FastCGI协议-与-php-fpm"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">FastCGI协议 与 php-fpm</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#php-fpm"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">php-fpm</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#介绍"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">介绍</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装-1"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">安装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装异常"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">安装异常</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#解决之道"><span class="post-toc-number">2.4.4.</span> <span class="post-toc-text">解决之道</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装完后继续使用-php-fpm"><span class="post-toc-number">2.4.5.</span> <span class="post-toc-text">安装完后继续使用 php-fpm</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置nginx和php通讯"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">配置nginx和php通讯</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#配置"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">配置</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#访问页面"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">访问页面</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#调试技巧"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">调试技巧</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#完整配置"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">完整配置</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Discuz论坛搭建-LNMP架构的实践"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">Discuz论坛搭建(LNMP架构的实践)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#参考官网安装"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">参考官网安装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在服务端执行以下命令"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">在服务端执行以下命令</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用Discuz自带的页面安装程序-install"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">使用Discuz自带的页面安装程序 install</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#不可读写的问题"><span class="post-toc-number">2.6.4.</span> <span class="post-toc-text">不可读写的问题</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#救援模式"><span class="post-toc-number">3.</span> <span class="post-toc-text">救援模式</span></a></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        我们一起来让这个世界有趣一点
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/reward-wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/reward-wechat.jpg" data-alipay="/img/reward-alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

        <footer class="footer">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://www.lujingtao.com" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                Mr.Yellow &copy; 2017 - 2023
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://yewills.github.io/2021/06/19/linux_six/&title=《linux笔记(离)》 — Mr.Yellow.Wills&pic=https://yewills.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://yewills.github.io/2021/06/19/linux_six/&title=《linux笔记(离)》 — Mr.Yellow.Wills&source=hellow kity" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACOElEQVR42u3a226DQAxFUf7/p6nUp0o0ZB8b0o7Z84QICSwqub7MtuG1f6/j8c8zx2uO5/m3tjuWDBkylmXsp+v80fkD8buk35IhQ8ZzGCTIkjB6/jvnr48E95fnZciQIQOkfbUAmqahMmTIkMEDbpy6nZapf/Z/Q4YMGUsxeHnZSebSgvmWWlyGDBkLMjqDgbuPPzTfkCFDxj9m7OHi6WOteVdbMmTImM0g40neyudJHomW5w07NH+QIUPGaEb66OR6/vrIaw26hjJkyBjBuGqcWWvMcQz5VIYMGfMYJPHqtO95udsaPMiQIWM0I43HtfKSB9Z0mwX6y8iQIWNxxlUDRR5AeZOOJ5EyZMh4DqOznyEdZ9Y2c7x8cTJkyBjNSINm0JoPQycZAKDfkSFDxmhGJ1DycjQdecqQIUNGLVG7iprePX7RMmTIGMfgg4EaIG2xpWMJGTJkTGWkrfxaEdvfuvEmcMuQIeMxjM5KhwT9TWbFEaYMGTIWZHQGivxmPE2sBWgZMmTMZvTHk7XjWmMurr9lyJAxiFELsvx19MP3m9AsQ4aM0YxatyrdGMHP8LsnH8iQIWNtxh4u3vqvjQF4gvhL11CGDBlDGbUwx4NpZ8zJwTJkyHgCgwRZvqmUBOjaMCDIWGXIkDGUQYJs/NNhGdwJzTJkyJDBi9Xa9aToDTaByZAh4/GM2o4zfn2xSJYhQ8YDGOl2h2vb+jxNRHvcZMiQMY5RGwykI8+rNoe1MDJkyFiP8QUnLyLgjU+L+gAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/plugins/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/plugins/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/plugins/MathJax.js"></script>
<script type="text/javascript" src="/js/plugins/TeX-AMS-MML_HTMLorMML.js"></script>
<script type="text/javascript" src="/js/plugins/MathMenu.js"></script>
<script type="text/javascript" src="/js/plugins/MathZoom.js"></script>

<script type="text/javascript" src="/js/plugins/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.3.9"></script>
<script type="text/javascript" src="/js/blog.js?v=1.3.9"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.3.9"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src=""></script>







    
</body>
</html>
